"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[59655],{59655:function(t,e,o){o.d(e,{Z:function(){return u}});var c=o(66250),e=(o(84832),o(59978)),i=(o(16779),o(67763)),n=(o(73474),o(74755)),a=(o(23307),o(81392)),l=o(33453),r=o.n(l),l=o(8450),s=o.n(l),d=o(90541),f=o(25108),l={name:"EnclosureItem",inject:{isMobileForm:{value:"isMobileForm",default:!0}},components:{draggable:function(){return o.e(9980).then(o.t.bind(o,82021,23))},Icon:a.Z,Popup:n.Z,Grid:i.Z,GridItem:e.Z},props:{name:{type:String,require:!0},size:{type:String,default:""},url:{type:String,require:!0},itemData:{type:Object,require:!0},index:{type:Number,default:0},fileData:{type:Object,require:!0},formInfo:{type:Object,require:!0},isControl:{type:Boolean,default:!1},showLable:{type:Boolean,default:!0},showClickIcon:{type:Boolean,default:!1},previewId:{type:String,require:!0},formMeta:{type:Object,default:function(){}},formData:{type:Object,default:function(){}},metaData:{type:Object}},data:function(){return{fileType:{pdf:["pdf"],img:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],txt:["txt","sql","xml","html","css","js","java","php","bat","log"],word:["docx","docm","doc","dotx","dotm","dot"],xls:["xlsx","xlsm","xlsb","xls","xltx","xltm","xlt","xlam","xla","ods"],ppt:["pptx","pptm","ppt","potx","potm","pot","ppsx","ppsm","pps","ppam","ppa"]},hasFilePng:["ai","cloud","html","img","jpg","mp3","mp4","pdf","png","ppt","psd","rar","txt","word","wps","xls","zip","ofd"],show:!1,reTitle:"",reType:"",reItem:{},accept:"ios"==d.Z.util.checkSystem()||d.Z.util.getClientName().includes("ding")?"*":"image/*, application/*",openFileId:"",showMore:!1,clickItem:{}}},computed:{suffix:function(){var t=this.name.lastIndexOf(".");return-1!==t?this.name.substring(t+1,this.name.length).toLowerCase():""},type:function(){for(var t in this.fileType)if(-1<this.fileType[t].indexOf(this.suffix))return t;return"OTHER"},isShowLable:function(){var t;return!(!this.isMobileForm&&(null==(t=this.fileData)?void 0:t.allowMaintain)<=0||!this.showLable&&!(this.fileData&&0<this.fileData.allowMaintain))},fileTypeListPadding:function(){return!this.isShowLable&&this.fileData&&this.fileData.file.length<=0?"0":this.isControl?"".concat(d.Z.config.commonForm.controlPadding||"0.3rem"," 0"):"0.2rem"},enclosureStyle:function(){var e=["complex","noIcon","simple"],t=(null!=(t=this.metaData)&&t.extra.eatraClass?this.metaData.extra.eatraClass.split(","):[]).find(function(t){return e.includes(t)});return t||d.Z.config.commonForm.enclosureStyle||"complex"}},created:function(){f.log(this.fileData),this.fileHandleBtn()},methods:{ifFile:function(t){return!(t.includes(".png")||t.includes(".jpg")||t.includes(".mp4")||t.includes(".jpeg")||t.includes(".bmp")||t.includes(".gif")||t.includes(".mp4"))},ifFileEdit:function(t){var e=t.lastIndexOf("."),i=t.substr(e+1);return["doc","docx","wps","xls","xlsx","et","ppt","pptx"].some(function(t){return t==i.toLowerCase()})},openFile:function(t,e,i){!i&&0<e.isHandwrite?this.handWrite(e):this.$emit("open",t,e,i)},downFile:function(t,e,i){var n=d.Z.layer.loading("下载中..."),o=encodeURI(d.Z.url.getRootPath()+e.initUrl),a=e.title.substr(0,e.title.indexOf("."))+moment(new Date).format("YYYYMMDDHHss")+e.title.substr(e.title.indexOf(".")),l="/Download/item/"+a;this.$route.query.isdjOpen?(window.openNativeResult=function(t){d.Z.layer.closeLoading(n),t=JSON.parse(t),f.log(t),"FileTransfer.download"==t.action&&("source"in t?(d.Z.layer.toast("下载失败！",!1),f.log("download error source "+t.source),f.log("download error target "+t.target),f.log("upload error code"+t.code)):d.Z.layer.alert({message:"文件已下载到 "+l}))},e={array:[o,l,!1,"id",{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}]},window.androidMethod.openNative(s()({action:"FileTransfer.download",data:e}))):(e=new FileTransfer,l=cordova.file.externalRootDirectory+l,e.download(o,l,function(t){d.Z.layer.closeLoading(n),d.Z.layer.alert({message:"文件已下载到 /Download/item/"+a})},function(t){d.Z.layer.closeLoading(n),f.log("download error source "+t.source),f.log("download error target "+t.target),f.log("upload error code"+t.code)},!1,{headers:{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}}))},SaveDing:function(e,t){d.Z.http.post("fn/DingDing/upload2DingDrive",{fileId:e.id}).then(function(t){t=t.data;f.log(t),d.Z.dd.saveFile({corpId:t.data.corpId,mediaId:t.data.mediaId,name:e.title})})},handWrite:function(t,e){var i,n,o=this,a=this,l=(f.log(t,":154"),t.navtiveUrl.lastIndexOf(".")),l=t.navtiveUrl.substr(l+1).toLowerCase();null!=(i=d.Z.config.commonForm)&&null!=(i=i.dianJu)&&i.isEnable&&["ofd","pdf"].includes(l)?this.openFile(t.initUrl,t,"dianJu"):null!=(i=d.Z.config.commonForm)&&null!=(l=i.iSignature)&&l.isEnable?this.openFile(t.url,t,"iSignature"):null!=(i=d.Z.config.commonForm)&&null!=(l=i.shuke)&&l.isEnable?this.openFile(t.url,t,"shuke"):"1"==d.Z.config.setting["SYS-MOBILE-ATTACH-0006"]?this.$emit("openHandWrite",t):"xunmeng"==d.Z.util.getClientName()?d.Z.http.get("fn/wdct/circle",{infoId:t.infoId,moduleId:t.moduleId,fileId:t.id}).then(function(t){var e,i;"200"==t.data.code?((e=t.data.data).downloadUrl=d.Z.url.getRootPath()+e.downloadUrl+"&x-auth-token=".concat(d.Z.util.loadSessionStore("loginToken")),f.log(e.downloadUrl,e.saveUrl,"179"),i={pageIndex:1,url:e.downloadUrl,type:0},d.Z.commonForm.nativeCommon("documentannotate",i).then(function(t){f.log(t,":185"),d.Z.http.get("".concat(e.saveUrl),{sourceUrl:"".concat(t.data)}).then(function(t){f.log(t),d.Z.layer.toast("批示成功"),a.$eventBus.quanyue(a)})}).catch(function(t){d.Z.layer.toast("批示失败"),f.log(t,":193")})):d.Z.layer.toast(t.data.message)}):d.Z.config.ddSetting.isDing?(n=d.Z.layer.loading(),this.$emit("closePop"),d.Z.http.get("fn/handWrite/circle",{infoId:t.infoId,moduleId:t.moduleId,fileId:t.id}).then(function(t){var e;"200"==t.data.code?((e=t.data.data).downloadUrl=d.Z.url.getRootPath()+e.downloadUrl,f.log(e),d.Z.layer.closeLoading(n),d.Z.dd.signature(e,o).then(function(t){a.$eventBus.quanyue(a)}).catch(function(t){f.log(t)})):d.Z.layer.toast(t.data.message)})):null!=(i=d.Z.config.commonForm)&&i.aoxiong?this.$emit("open",t.initUrl,t,""):d.Z.layer.toast("当前暂无配置签批产品")},getIconClass:function(t){var e,i=t.lastIndexOf("."),n=-1<i?t.substring(i+1,t.length).toLowerCase():"";if(-1<this.hasFilePng.indexOf(n))return o(32380)("./".concat(n,".png"));for(e in this.fileType)if(-1<this.fileType[e].indexOf(n))return o(32380)("./".concat(e,".png"));return o(25555)},afterRead:function(t){this.$toast.loading({message:"上传中...",forbidClick:!0,duration:0,overlay:!0}),this.doFileRead(t,this.fileData.attachType)},doFileRead:function(n,o,s){var a=this;return(0,c.Z)(r().mark(function t(){var l,e,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e="/fn/mobileAttachment/upload?fileId="+s+"&moduleId="+(l=a).formInfo.moduleId+"&mid="+a.formInfo.moduleId+"&pId=".concat(a.formInfo.pId,"&pnId=").concat(a.formInfo.pnId,"&nodeName=")+encodeURI("拟稿")+"&nrType="+o+"&pk="+a.formInfo.info_id+"&mainPk="+a.formInfo.mainPk+"&newFileFlag=0",1==(null==(i=a.fileData)?void 0:i.isRevertName)&&null!=(i=a.formData.main[a.fileData.revertName])&&i.value&&(i=n.file.name.substr(n.file.name.lastIndexOf(".")+1),e+="&revertName=".concat(a.formData.main[a.fileData.revertName].value,".").concat(i)),d.Z.http.upload(e,{},n).then(function(){var e=(0,c.Z)(r().mark(function t(e){var i,n,o,a;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:f.log("uploaded",e.data),e.data.result&&(i=d.Z.util.loadSessionStore("loginToken"),a=(new Date).getTime(),n=e.data.data,(o={id:n.fileId,title:n.fileName,size:n.showFileSize||"",infoId:l.formInfo.info_id,moduleId:l.formInfo.moduleId,isHandwrite:l.fileData.isHandwrite||-1,canDelete:l.fileData.canDelete,canDownLoad:l.fileData.canDownLoad,canEdit:l.fileData.canEdit,type:l.fileData.attachType,name:"".concat(l.fileData.name).concat(l.fileData.file.length+1)}).navtiveUrl=n.filePath,o.url=d.Z.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(n.fileId,"&moduleId=").concat(l.formInfo.moduleId,"&x-auth-token=").concat(i)),o.editUrl=d.Z.url.getServerUrl("fn/mobileOffice/wordEdit?fileId=".concat(n.fileId,"&moduleId=").concat(l.formInfo.moduleId,"&nodeId=").concat(l.formInfo.nodeId,"&flowId=").concat(l.formInfo.flowId,"&x-auth-token=").concat(i)),o.initUrl="fn/file/download?infoId=".concat(l.formInfo.info_id,"&fileId=").concat(n.fileId,"&fileName=").concat(n.fileName,"&nrType=").concat(n.nrType,"&moduleId=").concat(l.formInfo.moduleId,"&x-auth-token=").concat(i,"&fullfilename=").concat(a).concat(n.fileName),o.handwritingUrl=d.Z.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(n.fileId,"&moduleId=").concat(l.formInfo.moduleId,"&x-auth-token=").concat(i,"&handwriting=1&screenWidth=").concat(document.body.clientWidth)),l.ifFile(n.fileName)||(o.url=d.Z.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(n.fileId,"&moduleId=").concat(l.formInfo.moduleId,"&fileName=").concat(n.fileName))),s?(a=l.fileData.file.findIndex(function(t){return t.id==s}),l.fileData.file.splice(a,1,o)):l.fileData.file?(l.fileData.file.push(o),l.fileData.uploadObj?l.fileData.uploadObj.push(n):l.fileData.uploadObj=[n]):(l.fileData.file=[o],l.fileData.uploadObj=[n]),l.$set(l.fileData,"file",l.fileData.file),l.fileHandleBtn(),f.log("fileData",l.fileData),l.$emit("addFile",o)),l.dsf.layer.toast(e.data.message);case 3:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}))()},deleteFile:function(i){var n=this;f.log(i),d.Z.layer.confirm({message:"是否确认删除",confirmButtonText:"确认"},function(){var t={pk:n.formInfo.info_id,fileId:i.id,nrType:n.fileData.attachType,moduleId:n.formInfo.moduleId,fileName:i.title,nodeName:n.formInfo.nodeName,pnId:n.formInfo.pnId,pId:n.formInfo.pId};d.Z.http.post("/fn/mobileFileUpload/delete",t).then(function(t){f.log(t),"200"==t.data.code||t.data.result||"success"==t.data.type?(n.fileData.file.forEach(function(t,e){t.id==i.id&&n.fileData.file.splice(e,1)}),n.$set(n.fileData,"file",n.fileData.file),n.$emit("deleteFile",{fileData:i,filelist:n.fileData.file})):d.Z.layer.toast(t.data.message)})})},rename:function(t){var e=t.title.lastIndexOf("."),i=-1<e?t.title.substring(e,t.title.length):"",e=-1<e?t.title.substring(0,e):"";this.show=!0,this.reTitle=e,this.reType=i,this.reItem=t},DingUpload:function(){dd.biz.util.uploadAttachment({space:{corpId:d.Z.config.ddSetting.ddCoprId,spaceId:"12345",isCopy:1,max:9},file:{spaceId:"12345",max:9},types:["photo","camera","file","space"],onSuccess:function(t){},onFail:function(t){}})},confirmRename:function(){var e=this;f.log(this.reItem),d.Z.http.post("/fn/file/rname",{pk:this.formInfo.info_id,moduleId:this.formInfo.moduleId,fileId:this.reItem.id,fileName:this.reTitle+this.reType,nrType:this.reItem.type,nodeName:this.formInfo.nodeName||null,pId:this.formInfo.pId||null,pnId:this.formInfo.pnId||null}).then(function(t){e.show=!1,d.Z.layer.toast(t.data.message),"200"==t.data.code&&(e.reItem.title=e.reTitle+e.reType)}).catch(function(t){d.Z.layer.toast("接口异常"),f.log(t)})},onSortEnd:function(){f.log(this.fileData.file);var t=this.fileData.file.map(function(t){return t.id}).join(",");f.log(t),d.Z.http.post("/fn/mobileAttachment/sort",{fileIds:t}).then(function(t){d.Z.layer.toast(t.data.message)}).catch(function(t){d.Z.layer.toast("接口异常"),f.log(t)})},getContainer:function(){return document.body},showHandleIcon:function(t){f.log(t),this.showMore=!0,this.clickItem=t},moreBtnClick:function(t,e){var i=this;this.showMore=!1,setTimeout(function(){"edit"==e?(i.$emit("closePop"),i.openFile(t.url,t,"edit")):"sign"==e?(i.$emit("closePop"),i.handWrite(t)):"download"==e?i.downFile(t.url,t,"downFile"):"rename"==e?i.rename(t):"saveDing"==e?i.SaveDing(t):"delete"==e?i.deleteFile(t):"reUpload"==e&&i.reUpload(t)},200)},fileHandleBtn:function(){var s=this;this.fileData.file.map(function(t){var e=0<t.canEdit&&d.Z.config.commonForm.canEditFile&&s.ifFileEdit(t.title),i=0<t.isHandwrite,n="app"==d.Z.util.getClientName()&&"ios"!=d.Z.util.checkSystem()&&!d.Z.config.commonForm.NoDownload&&"1"==s.fileData.canDownLoad,o="1"==s.fileData.allowMaintain&&(null==(o=s.fileData.maintainFunc)?void 0:o.split(",").includes("1"))&&!d.Z.config.commonForm.hideFileRename,a=!d.Z.config.commonFlow.hiddenSaveDing&&d.Z.config.ddSetting&&"dingding"==d.Z.config.ddSetting.dingdingType,l=0<s.fileData.canDelete;(e||i||n||o||a||l)&&s.$set(t,"showMore",!0)}),f.log(this.fileData.file)},reUpload:function(t){this.reUploadFileId=t.id,this.$refs.uploader.chooseFile()},afterReUpload:function(t){this.$toast.loading({message:"上传中...",forbidClick:!0,duration:0,overlay:!0}),this.doFileRead(t,this.fileData.attachType,this.reUploadFileId)}}},u=(0,o(51900).Z)(l,function(){var n=this,t=n._self._c;return 1==n.fileData.canShow?t("div",{staticClass:"fileTypeList",style:{padding:n.fileTypeListPadding}},[n.isShowLable?t("div",{staticClass:"fileTypeName"},[t("div",{class:["name","size-".concat(n.dsf.config.commonForm.fontLevel||3),{required:0<n.fileData.allowVerify&&n.isMobileForm}],style:{fontWeight:n.isControl?"normal":"bold"}},[n._v("\n            "+n._s(n.fileData.name||n.fileData.attachTypeText)+"\n        ")]),n._v(" "),0<n.fileData.allowUpload||0<n.fileData.allowMaintain&&"ribao"!=n.dsf.config.projectName?t("van-uploader",{staticClass:"upload-btn",attrs:{"result-type":"file","after-read":n.afterRead,accept:n.accept}},[t("i",{staticClass:"iconfont iconKHCFDC_fujian"})]):n._e(),n._v(" "),n.dsf.config.ddSetting.isDing&&"ribao"==n.dsf.config.projectName?t("van-icon",{attrs:{size:"0.48rem",name:"add-o"},on:{click:n.DingUpload}}):n._e()],1):n._e(),n._v(" "),t("draggable",{staticClass:"list-group",attrs:{group:n.fileData.attachType,delay:"100","ghost-class":"ghost",disabled:1!=n.fileData.allowMaintain},on:{sort:n.onSortEnd},model:{value:n.fileData.file,callback:function(t){n.$set(n.fileData,"file",t)},expression:"fileData.file"}},n._l(n.fileData.file,function(e,i){return t("div",{key:e.id,class:["fileList",{nopaddingTop:!n.isShowLable}]},[t("div",{staticClass:"file"},[n.showClickIcon&&e.id==n.previewId?t("van-icon",{attrs:{name:"passed",size:"0.40rem"}}):n._e(),n._v(" "),"complex"==n.enclosureStyle?t("div",{staticClass:"fileIcon",on:{click:function(t){return n.openFile(e.url,e)}}},[t("img",{attrs:{src:n.getIconClass(e.title),alt:""}})]):n._e(),n._v(" "),t("div",{staticClass:"fileBody",on:{click:function(t){return n.openFile(e.url,e)}}},[t("div",{staticClass:"fileTitle",class:{ellipsis:"noIcon"!=n.enclosureStyle},style:{width:0<n.fileData.canDelete?"90%":"100%"}},["simple"==n.enclosureStyle?t("img",{staticStyle:{width:"0.3rem",display:"inline-block","vertical-align":"sub"},attrs:{src:n.getIconClass(e.title),alt:""}}):n._e(),n._v(" "),e.mjText?t("span",{staticStyle:{color:"#E50012"}},[n._v("["+n._s(e.mjText)+"]")]):n._e(),n._v("\n                        "+n._s(-1==n.fileData.showSuffix?e.title.substring(0,e.title.lastIndexOf(".")):e.title)+"\n                    ")]),n._v(" "),"simple"!=n.enclosureStyle?t("div",{staticClass:"fileSize"},[t("span",[n._v(n._s("0Byte"!=e.size?e.size:""))])]):n._e()]),n._v(" "),t("div",{staticClass:"handleIcon"},[e.showMore?t("Icon",{staticClass:"iconfont icongengduo3",attrs:{size:"0.4rem",color:"#999999"},on:{click:function(t){return n.showHandleIcon(e)}}}):n._e(),n._v(" "),1==n.fileData.allowMaintain&&1<n.fileData.file.length?t("Icon",{staticClass:"iconfont iconpaixu",attrs:{size:"0.4rem",color:"#999999"}}):n._e()],1)],1),n._v(" "),t("div",{staticClass:"fileBtn",staticStyle:{display:"none"}},[0<e.canEdit&&n.dsf.config.commonForm.canEditFile&&n.ifFileEdit(e.title)?t("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.openFile(e.url,e,"edit")}}},[n._v("\n                    编辑\n                ")]):n._e(),n._v(" "),0<e.isHandwrite?t("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.handWrite(e,i)}}},[n._v("\n                    签批\n                ")]):n._e(),n._v(" "),"app"!=n.dsf.util.getClientName()||"ios"==n.dsf.util.checkSystem()||n.dsf.config.commonForm.NoDownload||"1"!=n.fileData.canDownLoad?n._e():t("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.downFile(e.url,e,"downFile")}}},[n._v("\n                    下载\n                ")]),n._v(" "),"1"==n.fileData.allowMaintain&&n.fileData.maintainFunc&&n.fileData.maintainFunc.split(",").includes("1")&&!n.dsf.config.commonForm.hideFileRename?t("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.rename(e)}}},[n._v("\n                    重命名\n                ")]):n._e(),n._v(" "),!n.dsf.config.commonFlow.hiddenSaveDing&&n.dsf.config.ddSetting&&"dingding"==n.dsf.config.ddSetting.dingdingType?t("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.SaveDing(e,i)}}},[n._v("\n                    存钉盘\n                ")]):n._e(),n._v(" "),0<n.fileData.canDelete?t("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.deleteFile(e)}}},[n._v("\n                    删除\n                ")]):n._e()])])}),0),n._v(" "),t("div",[t("van-dialog",{attrs:{title:"重命名","get-container":"#app","show-cancel-button":""},on:{cancel:function(t){n.show=!1},confirm:n.confirmRename},model:{value:n.show,callback:function(t){n.show=t},expression:"show"}},[t("van-field",{staticClass:"re-title",model:{value:n.reTitle,callback:function(t){n.reTitle=t},expression:"reTitle"}})],1)],1),n._v(" "),t("van-popup",{attrs:{"get-container":n.getContainer,"lock-scroll":!0,round:"","close-icon-position":"top-right",position:"bottom"},model:{value:n.showMore,callback:function(t){n.showMore=t},expression:"showMore"}},[t("div",{staticClass:"popup-title"},[t("Icon",{staticClass:"iconfont iconxialajiantou",attrs:{slot:"icon",size:"0.4rem",color:"#000000"},on:{click:function(t){n.showMore=!1}},slot:"icon"}),n._v("更多\n        ")],1),n._v(" "),t("div",{staticClass:"popup-btn"},[t("Grid",{attrs:{"column-num":4,clickable:"",border:!1}},[1==n.fileData.allowMaintain?t("GridItem",{on:{click:function(t){return t.stopPropagation(),n.moreBtnClick(n.clickItem,"reUpload")}}},[t("Icon",{staticClass:"iconfont iconKHCFDC_fujian",attrs:{slot:"icon",size:"0.48rem",color:"#333333"},slot:"icon"}),n._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[n._v("重新上传")])],1):n._e(),n._v(" "),0<n.clickItem.canEdit&&n.dsf.config.commonForm.canEditFile&&n.ifFileEdit(n.clickItem.title)?t("GridItem",{on:{click:function(t){return t.stopPropagation(),n.moreBtnClick(n.clickItem,"edit")}}},[t("Icon",{staticClass:"iconfont iconbianji1",attrs:{slot:"icon",size:"0.48rem",color:"#333333"},slot:"icon"}),n._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[n._v("编辑")])],1):n._e(),n._v(" "),0<n.clickItem.isHandwrite?t("GridItem",{on:{click:function(t){return t.stopPropagation(),n.moreBtnClick(n.clickItem,"sign")}}},[t("Icon",{staticClass:"iconfont iconqianpi",attrs:{slot:"icon",size:"0.48rem",color:"#333333"},slot:"icon"}),n._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[n._v("签批")])],1):n._e(),n._v(" "),"app"!=n.dsf.util.getClientName()||"ios"==n.dsf.util.checkSystem()||n.dsf.config.commonForm.NoDownload||"1"!=n.fileData.canDownLoad?n._e():t("GridItem",{on:{click:function(t){return t.stopPropagation(),n.moreBtnClick(n.clickItem,"download")}}},[t("Icon",{staticClass:"iconfont iconxiazai",attrs:{slot:"icon",size:"0.48rem",color:"#333333"},slot:"icon"}),n._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[n._v("下载")])],1),n._v(" "),"1"==n.fileData.allowMaintain&&n.fileData.maintainFunc&&n.fileData.maintainFunc.split(",").includes("1")&&!n.dsf.config.commonForm.hideFileRename?t("GridItem",{on:{click:function(t){return t.stopPropagation(),n.moreBtnClick(n.clickItem,"rename")}}},[t("Icon",{staticClass:"iconfont iconzhongmingming",attrs:{slot:"icon",size:"0.48rem",color:"#333333"},slot:"icon"}),n._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[n._v("重命名")])],1):n._e(),n._v(" "),!n.dsf.config.commonFlow.hiddenSaveDing&&n.dsf.config.ddSetting&&"dingding"==n.dsf.config.ddSetting.dingdingType?t("GridItem",{on:{click:function(t){return t.stopPropagation(),n.moreBtnClick(n.clickItem,"saveDing")}}},[t("Icon",{staticClass:"iconfont iconcundingpan",attrs:{slot:"icon",size:"0.48rem",color:"#333333"},slot:"icon"}),n._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[n._v("存钉盘")])],1):n._e(),n._v(" "),0<n.fileData.canDelete?t("GridItem",{on:{click:function(t){return t.stopPropagation(),n.moreBtnClick(n.clickItem,"delete")}}},[t("Icon",{staticClass:"iconfont iconshanchu",attrs:{slot:"icon",size:"0.48rem",color:"#333333"},slot:"icon"}),n._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[n._v("删除")])],1):n._e()],1)],1)]),n._v(" "),t("van-uploader",{ref:"uploader",staticClass:"upload-btn",staticStyle:{display:"none"},attrs:{"result-type":"file","after-read":n.afterReUpload,accept:n.accept}},[t("van-icon",{attrs:{size:"0rem",name:"add-o"}})],1)],1):n._e()},[],!1,null,"6a693be7",null).exports}}]);