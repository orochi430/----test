"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[16671],{18306:function(a,t,e){e.r(t);var n=e(73473),u=e.n(n),n=e(8450),m=e.n(n),p=e(90541),k=e(25108),n={};n.initHandle=function(o,t,l){l.relationList[0]&&l.relationList[0].document.length||(a=l,n="文件关联",d=2,new(u())(function(t,e){p.Z.http.post("ctrl/filerelation/select/checkedJson",{pks:a.$route.query.relationId,infoId:a.pk,relaType:d,relaName:n}).then(function(a){200==a.data.code?t(a.data.data):e()})}).then(function(a){p.Z.http.post("fn/mobileRelationFile/save",{relaMode:a[0].relaMode,relaIds:a[0].relaId,pk:l.pk,moduleId:l.moduleId,fileRelaId:l.relationList[0].fileRelaId}).then(function(a){200==a.data.code&&p.Z.http.get("fn/mobileRelationFile/getFormRelationFiles",{pk:l.pk,moduleId:l.moduleId,nodeId:t.parameters.nodeId,flowId:t.parameters.flowId}).then(function(a){l.$set(l,"relationList",a.data.rows)})})}));var a,n,d,r=t.controls.filter(function(a){return"controlMobileAlink"==a.metaId})[0],e=(p.Z.http.post("fn/superviseV6/approvalTask/hasTasks",{relationId:l.$route.query.sourcePk||o.main.A0031.value}).then(function(a){var t=m()({relationId:l.$route.query.sourcePk||o.main.A0031.value}),e="不定期/一次性反馈",n="/commonForm/210604144527JntE2LI7dWrpBLsluZz?specialSaveObj=".concat(t);200==a.data.code&&a.data.data&&a.data.data.taskTitle&&(e=a.data.data.taskTitle,n="/commonForm/210604144527JntE2LI7dWrpBLsluZz/".concat(a.data.data.taskId,"?specialSaveObj=").concat(t,"&method=view&listId=210618141757PmEKNvvLIJQtgqyDW44")),k.log(r),r.extra.linkInfo=n,r.extra.linkName=e}),t.controls.filter(function(a){return"controlMobileAlink"==a.metaId})[1]),i="新建反馈计划",s=m()({relationId:l.$route.query.sourcePk||o.main.A0031.value}),c="/commonForm/210604144527JntE2LI7dWrpBLsluZz?specialSaveObj=".concat(s);0!=t.parameters.nodeId?p.Z.http.post("fn/superviseV6/approvalTask/hasTasks",{relationId:l.$route.query.sourcePk||o.main.A0031.value,startDate:p.Z.date.format(new Date,"yyyy-mm-dd")+" 09:00"}).then(function(a){200==a.data.code&&a.data.data&&a.data.data.taskTitle&&(i=a.data.data.taskTitle,c="/commonForm/210604144527JntE2LI7dWrpBLsluZz/".concat(a.data.data.taskId,"?specialSaveObj=").concat(s)),k.log(e),e.extra.linkInfo=c,e.extra.linkName=i}):(e.extra.linkInfo=c,e.extra.linkName=i)},t.default=n}}]);