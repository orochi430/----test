"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[28523],{28523:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var a=i(25108),e={name:"zydxnewsdetail",data:function(){return{id:this.$route.query.id||"",title:"",fbbm:"",datetime:"",content:"",file:[],fbr:"",video:{type:"",src:"",videoTitle:"",showVideo:!1},imgpreview:{show:!1,images:[],index:0},videourl:"",isVideoNews:!1}},mounted:function(){var e=this;dsf.loadJs("static/js/ckplayer/ckplayer.js").then(function(){e.getDetail(),e.recordReadMsg()}).catch(function(t){e.getDetail(),e.recordReadMsg()})},methods:{getDetail:function(){var i=this,t={id:i.id,ispc:0};dsf.http.post("/ctrl/cmsManager/getInfomationById",t).then(function(t){var e;"success"==t.data.type?(e=t.data.data[0],i.title=e.title,i.fbbm=e.fbbm,i.datetime=e.date1,i.content=e.content||e.contenttext,i.file=e.file,i.fbr=e.fbr,"视频新闻"==e.columnname&&(i.isVideoNews=!0,i.getVideoById()),i.$nextTick(function(){var e=0;$(".editorhtml img").each(function(){var t=$(this).attr("src");i.imgpreview.images.push(t),$(this).attr("index",e),e++}),$(".editorhtml img").off("click").on("click",function(){var t=$(this).attr("index");i.imgpreview.index=t,i.$nextTick(function(){i.imgpreview.show=!0})})})):i.dsf.layer.toast(t.data.message,!1)}).catch(function(t){i.dsf.layer.toast(t.message||"失败")}).finally(function(){})},getVideoById:function(){var i=this;dsf.http.post("/ctrl/cmsManager/getInfomationVideoById",{id:i.id}).then(function(t){var e;"success"==t.data.type?0<t.data.data.length&&(e=t.data.data[0].vdeurl,i.videourl=e)&&i.$nextTick(function(){var t={playerID:"ckplayer01",container:"#video",variable:"player",html5m3u8:!0,autoplay:!1,drag:"start",debug:!1,video:e};try{new ckplayer(t)}catch(t){a.log(t)}}):i.dsf.layer.toast(t.data.message,!1)}).catch(function(t){i.dsf.layer.toast(t.message||"失败")}).finally(function(){})},onChangeImg:function(t){this.imgpreview.index=t},recordReadMsg:function(){var t={id:this.id};dsf.http.post("/ctrl/cmsManager/recordReadMsg",t).then(function(t){}).catch(function(t){}).finally(function(){})},openfile:function(t){t.filepath&&this.$router.push({path:"/zydx/filepreview",query:{url:t.filepath}})}}},n=(0,i(51900).Z)(e,function(){var i=this,a=i._self._c;return a("div",{staticClass:"newsdetail"},[a("div",{staticClass:"new-list"},[a("div",{staticClass:"title"},[i._v(i._s(i.title))]),i._v(" "),a("div",{staticClass:"des"},[a("span",{staticClass:"fbbm"},[i._v(i._s(i.fbbm))]),i._v(" "),a("span",{staticClass:"datetime"},[i._v(i._s(i.datetime))])]),i._v(" "),a("div",{staticClass:"content"},[i.videourl?a("div",{staticClass:"playerWrap video-player contentTxt",attrs:{id:"video"}}):i._e(),i._v(" "),a("div",{staticClass:"editorhtml",domProps:{innerHTML:i._s(i.content)}}),i._v(" "),i.file&&0<i.file.length?a("div",{staticClass:"filelist"},[a("h6",[i._v("附件：")]),i._v(" "),a("ul",i._l(i.file,function(e,t){return a("li",{key:t,on:{click:function(t){return i.openfile(e)}}},[i._v(i._s(e.filename))])}),0)]):i._e(),i._v(" "),i.isVideoNews&&i.fbr?a("div",{staticClass:"fbr"},[i._v("（责任编辑 "+i._s(i.fbr)+"）")]):i._e()])]),i._v(" "),a("van-image-preview",{attrs:{images:i.imgpreview.images,startPosition:i.imgpreview.index,"max-zoom":"5",closeable:!0},on:{change:i.onChangeImg},model:{value:i.imgpreview.show,callback:function(t){i.$set(i.imgpreview,"show",t)},expression:"imgpreview.show"}})],1)},[],!1,null,"14d98beb",null).exports}}]);