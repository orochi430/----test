"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[26600],{26600:function(e,t,r){r.r(t),r.d(t,{default:function(){return n}});var t={data:function(){return{errored:!1,errorMsg:"获取数据失败！",loading:null,docId:this.$route.params.id,docInfo:null,isReceive:!1}},created:function(){this.loading=dsf.layer.loading(),this.getDocInfo()},mounted:function(){},methods:{revert:function(){var t=this;t.$dialog.confirm({title:"提示",message:"确认回收该文件？"}).then(function(){dsf.http.get("fn/fileCheckIn?fileId=".concat(t.docId)).done(function(e){200==e.code?dsf.layer.toast("操作成功！",!0,function(){t.$router.replace({name:"PeopleDailyDocStatus",params:{id:t.docId}})}):(t.errored=!0,t.errorMsg=e.message)}).error(function(e){}).always(function(){})}).catch(function(){})},receive:function(){var t=this;t.$dialog.confirm({title:"提示",message:"确认领取该文件？"}).then(function(){dsf.http.get("fn/fileCheckOut?fileId=".concat(t.docId)).done(function(e){200==e.code?dsf.layer.toast("操作成功！",!0,function(){t.$router.replace({name:"PeopleDailyMyDocStatus",params:{id:t.docId}})}):(t.errored=!0,t.errorMsg=e.message)}).error(function(e){}).always(function(){})}).catch(function(){})},getDocInfo:function(){var t=this;dsf.http.get("fn/getFileInfo?fileId=".concat(t.docId)).done(function(e){200==e.code&&e.data?(t.docInfo={docCode:e.data.wh,recDept:e.data.curDeptName,deliDate:dsf.date.format(new Date(e.data.pfDate),"yyyy-mm-dd")},0==e.data.curRoles.length?(t.errored=!0,t.errorMsg="您无数据访问权限。"):0==e.data.fileStatus?e.data.curRoles.includes("0")?t.isReceive=!0:(t.errored=!0,t.errorMsg="该文件尚未领取。"):-1==e.data.fileStatus?e.data.curRoles.includes("1")||(t.errored=!0,t.errorMsg="该文件已领取。"):1==e.data.fileStatus?(t.errored=!0,t.errorMsg="该文件已归还。"):(t.errored=!0,t.errorMsg="数据异常。")):(t.errored=!0,t.errorMsg=e.message)}).error(function(e){}).always(function(){dsf.layer.closeLoading(t.loading)})}}},n=(0,r(51900).Z)(t,function(){var t=this,e=t._self._c;return t.errored?e("div",{staticClass:"init-div"},[t._v(t._s(t.errorMsg))]):e("div",[e("van-cell",{attrs:{value:t.docInfo.docCode,center:"",title:"文件编号"}}),t._v(" "),e("van-cell",{attrs:{value:t.docInfo.recDept,center:"",title:"接收部门"}}),t._v(" "),e("van-cell",{attrs:{value:t.docInfo.deliDate,center:"",title:"派发日期"}}),t._v(" "),e("div",{staticStyle:{height:"1.2rem"}},[t.isReceive?e("div",{staticClass:"btn-container"},[e("van-button",{attrs:{type:"info"},on:{click:function(e){return t.receive()}}},[t._v("确认领取")])],1):e("div",{staticClass:"btn-container"},[e("van-button",{attrs:{type:"info"},on:{click:function(e){return t.revert()}}},[t._v("确认归还")])],1)])],1)},[],!1,null,"f736c74a",null).exports}}]);