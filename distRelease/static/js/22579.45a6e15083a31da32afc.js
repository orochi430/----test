"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[22579],{22579:function(e,s,t){t.r(s),t.d(s,{default:function(){return a}});var s=t(26243),i=t.n(s),n=t(25108),s={name:"address_list",props:{bottom_active:{type:String,default:""}},data:function(){return{list:[],head_active:"",keyword:"",specific_show:!1,show_search:!1,tab_list:[],user_list:[],special_user:{},search_list:{}}},watch:{bottom_active:function(e,s){"address_list"==e&&this.getTab()}},created:function(){this.getTab()},methods:{handleName:function(e){var e=e.split("（"),s='<span class="name" style="font-size: var(--font_size_2);color: #333">'.concat(e[0],"</span>");return 1<e.length&&(s+='<span class="belong" style="font-size: var(--font_size_3);color: #666">\n            （'.concat(e[1],"\n          </span>")),s},getTab:function(){var s=this;dsf.http.get("action?AddressBookAppAction=1",{}).then(function(e){e=e.data;200==e.code&&(s.tab_list=e.data,s.head_active=e.data[0].type,dsf.util.loadSessionStore("current_session"))&&s.getTabUsers()})},getTabUsers:function(){var s=this,e=dsf.util.loadSessionStore("current_session").name;dsf.http.get("action?AddressBookAppAction=2",{tabId:this.head_active,jc:e}).then(function(e){e=e.data;200==e.code&&(s.user_list=e.data)})},changeTab:function(e){this.head_active=e.type,this.getTabUsers()},onSearch:function(e){var s=this;this.keyword=e,this.keyword_temp=e,n.log("触发搜索",this.keyword,this.keyword_temp),e?(this.loading=dsf.layer.loading("检索中..."),e=dsf.util.loadSessionStore("current_session").name,dsf.http.get("action?AddressBookAppAction=4",{name:this.keyword,jc:e}).then(function(e){e=e.data;200==e.code&&(s.search_list=e.data,dsf.layer.closeLoading(s.loading))})):dsf.layer.toast("请输入搜索内容")},onCancel:function(){this.show_search=!1,this.keyword=this.keyword_temp,n.log(this.keyword,this.keyword_temp)},onFocus:function(){var e=this;this.show_search=!0,this.$nextTick(function(){e.$refs.searchOuter.querySelector("input").blur(),e.$refs.searchInner.querySelector("input").focus()})},getSpecific:function(e){var s=this;dsf.http.get("action?AddressBookAppAction=3",{id:e.id}).then(function(e){e=e.data;200==e.code&&(s.special_user=e.data)}),this.specific_show=!0},matchColor:function(e){var t=this,e=e.split(this.keyword),n=e.length,a="";return e.forEach(function(e,s){e&&(a+="<span>".concat(e,"</span>")),s<n-1&&(a+='<span style="color: #CC0D12">'.concat(t.keyword,"</span>"))}),a}}},a=(0,t(51900).Z)(s,function(){var n=this,a=n._self._c;return a("div",{staticClass:"address_list"},[a("div",{staticClass:"head"},n._l(n.tab_list,function(s){return a("span",{key:s.type,class:{head_active:n.head_active==s.type},on:{click:function(e){return n.changeTab(s)}}},[n._v("\n      "+n._s(s.typeName)+"\n    ")])}),0),n._v(" "),a("form",{attrs:{action:"/"}},[a("van-search",{ref:"searchOuter",attrs:{placeholder:"请输入查找内容",clearable:""},on:{focus:n.onFocus},model:{value:n.keyword,callback:function(e){n.keyword=e},expression:"keyword"}})],1),n._v(" "),a("div",{staticClass:"list"},[n._l(n.user_list,function(s){return a("div",{key:s.id,staticClass:"single_person",on:{click:function(e){return n.getSpecific(s)}}},[a("p",{staticClass:"first",domProps:{innerHTML:n._s(n.handleName(s.name))}}),n._v(" "),a("p",{staticClass:"two"},[s.delegation?a("span",[n._v("\n          所属代表团："+n._s(s.delegation)+"\n        ")]):n._e(),n._v(" "),s.phone?a("span",[n._v("电话："+n._s(s.phone))]):n._e(),n._v(" "),s.extension?a("span",[n._v("分机："+n._s(s.extension))]):n._e()])])}),n._v(" "),n.user_list.length?n._e():a("div",{staticClass:"no_notice"},[n._v("\n      该届次暂无通讯录人员\n    ")])],2),n._v(" "),n.specific_show?a("div",{staticClass:"address_specific"},[a("div",{staticClass:"content"},[a("p",{staticClass:"cross"},[a("van-icon",{attrs:{name:"cross"},on:{click:function(e){n.specific_show=!1}}})],1),n._v(" "),a("p",{staticClass:"title"},[n._v(n._s(n.special_user.name))]),n._v(" "),a("div",{staticClass:"message"},[n.special_user.phone?a("p",[n._v("电话："+n._s(n.special_user.phone))]):n._e(),n._v(" "),n.special_user.delegation?a("p",[n._v("\n          所属代表团："+n._s(n.special_user.delegation)+"\n        ")]):n._e(),n._v(" "),n.special_user.extension?a("p",[n._v("\n          分机："+n._s(n.special_user.extension)+"\n        ")]):n._e(),n._v(" "),n.special_user.workplace?a("p",[n._v("\n          工作地点："+n._s(n.special_user.workplace)+"\n        ")]):n._e()])])]):n._e(),n._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:n.show_search,expression:"show_search"}],staticClass:"search_part"},[a("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},model:{value:n.show_search,callback:function(e){n.show_search=e},expression:"show_search"}},[a("form",{attrs:{action:"/"}},[a("van-search",{ref:"searchInner",attrs:{placeholder:"请输入查找内容",clearable:"","show-action":""},on:{search:n.onSearch,cancel:n.onCancel},model:{value:n.keyword,callback:function(e){n.keyword=e},expression:"keyword"}})],1),n._v(" "),a("div",{staticClass:"search_content"},[n._l(n.search_list,function(e,t){return a("div",{key:t,class:{group:"代表团"==t||"工作组"==t,single:"负责人"==t||"联络员"==t}},[a("p",{staticClass:"title"},[n._v(n._s(t))]),n._v(" "),n._l(e,function(s){return a("van-cell",{key:s.id,attrs:{"is-link":"代表团"==t||"工作组"==t},on:{click:function(e){return n.getSpecific(s)}},scopedSlots:n._u([{key:"title",fn:function(){return[a("div",{staticClass:"custom-title",domProps:{innerHTML:n._s(n.matchColor(s.name))}})]},proxy:!0}],null,!0)})})],2)}),n._v(" "),i()(n.search_list).length?n._e():a("div",{staticClass:"no_notice"},[n._v("\n          暂无检索人员\n        ")])],2)])],1)])},[],!1,null,"1fb8c13a",null).exports}}]);