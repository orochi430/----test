"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[98883],{15392:function(o,t,n){n.r(t),n.d(t,{default:function(){return r}});var i=n(13682),s=n(66250),t=n(33453),g=n.n(t),t=n(8450),u=n.n(t),f=n(88561),h=n(62596),t=n(89251),a=n(26983),c=n(89861),l=n(25108),t={components:{gesture:t.Z,forgetPassword:a.Z,setPhone:c.Z},data:function(){return{iscertificateEntry:!1,certificateLoading:"",logname:"",txtpassword:"",tokenCode:"",checked:!1,checkedPhone:!1,bfshow:1,title:"",DeviceId:"postman",DeviceName:"postman",loginType:"",nmgLoginTitle:dsf.config.login.nmgLoginTitle||"内蒙古移动办公平台",phone:"",mobile:"",phonecode:"",smsBtnText:"发送验证码",smsBtnEnable:!1,errorMessage:"",hasGesture:!1,logImgStyle:{height:"100%"},loading:null,autoLogin:!1,phoneValidator:[{required:!0},{pattern:/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/,message:"请输入正确手机号"}],phoneValidatorMobile:[{required:!0}],clickIndex:0,isShowAuto:dsf.config.setting.hasOwnProperty("SYS-MOBILE-STYLE-0004")&&dsf.config.setting["SYS-MOBILE-STYLE-0004"]||-1,isShowForget:dsf.config.setting.hasOwnProperty("SYS-MOBILE-STYLE-0006")&&dsf.config.setting["SYS-MOBILE-STYLE-0006"]||-1,isShowSmsLogin:dsf.config.setting.hasOwnProperty("SYS-MOBILE-STYLE-0005")&&dsf.config.setting["SYS-MOBILE-STYLE-0005"]||-1,isFullscreenBg:dsf.config.setting.hasOwnProperty("SYS-MOBILE-STYLE-0007")&&dsf.config.setting["SYS-MOBILE-STYLE-0007"]||-1,forgetPwdMsg:dsf.config.setting.hasOwnProperty("SYS-MOBILE-CAPTCHA-0004")&&dsf.config.setting["SYS-MOBILE-CAPTCHA-0004"]||"请联系管理员",isShowChangeType:void 0===dsf.config.login.isShowChangeType||dsf.config.login.isShowChangeType,clickTime:0,RSA_PUBLIC:dsf.config.setting.RSA_PUBLIC||"",loginStyle:document.documentElement.clientWidth>document.documentElement.clientHeight?"padformbox loginForm":"formbox loginForm"}},computed:{loginBackground:function(){var e="",e=1==this.bfshow?n(358):n(97603);return"iPad"==dsf.util.getClientType()&&dsf.config.setting["SYS-MOBILE-STYLE-0008"]?dsf.url.getServerUrl("fn/file/downloadImage?fileName=".concat(dsf.config.setting["SYS-MOBILE-STYLE-0008"])):dsf.config.setting["SYS-MOBILE-STYLE-0003"]?dsf.url.getWebPath(dsf.config.setting["SYS-MOBILE-STYLE-0003"]):e}},beforeMount:function(){this.title=dsf.config.login.title},beforeRouteLeave:function(e,o,t){!dsf.util.loadSessionStore("loginToken")&&"NmgLogin"==o.name&&e.name.toLowerCase().indexOf("login")<0&&"changePassWord"!=e.name?dsf.layer.toast("您进行了未授权的访问，请重新登录！",void 0,function(){t("/NmgLogin")}):t()},mounted:function(){dsf.util.removeSessionStore("defaultcount");var o=this;if(f.Z.loadLocalStore("autoLogin"),f.Z.loadLocalStore("openFingerprint")&&"app"==dsf.util.getClientName())xsfCommon.getStatus("",function(e){"true"===String(e)&&(e=dsf.util.loadLocalStore("loginData"))&&(e=JSON.parse(e),o.loginSuccessDeal(e))},function(e){dsf.layer.toast("获取指纹解锁状态失败")}),this.loading=dsf.layer.loading("登录中...");else if(f.Z.loadLocalStore("autoLogin")&&!f.Z.loadLocalStore("gesture_pas")){if(this.checked=f.Z.loadLocalStore("autoLogin"),this.logname=h.Z.decode(f.Z.loadLocalStore("userName")),this.txtpassword=h.Z.decode(f.Z.loadLocalStore("passWord")),dsf.config.login.isShowMobile&&dsf.config.login.isSpecialLogin&&(this.mobile=h.Z.decode(f.Z.loadLocalStore("mobile")),!this.mobile))return;if(!this.logname||!this.txtpassword)return;this.checked&&(this.autoLogin=!0,this.loading=dsf.layer.loading("登录中..."),"app"==f.Z.getClientName()?this.deviceready(this.login):this.login())}f.Z.loadLocalStore("phone")&&(this.checkedPhone=!0,this.phone=h.Z.decode(f.Z.loadLocalStore("phone")))},created:function(){this.logname=h.Z.decode(f.Z.loadLocalStore("longUserName")),null!=dsf.util.loadLocalStore("userColor")?this.bfshow=dsf.util.loadLocalStore("userColor"):this.bfshow=1;this.hasGesture=!!f.Z.loadLocalStore("gesture_pas"),this.loginType=this.hasGesture?"gesture":dsf.config.login.defaultLoginType||"user","app"==f.Z.getClientName()&&this.deviceready(),this.$route.query.ud&&this.$route.query.pd&&(this.logname=this.$route.query.ud,this.txtpassword=this.$route.query.pd,dsf.config.autoLogin)&&(this.autoLogin=!0,this.loading=dsf.layer.loading("登录中..."),this.login())},methods:{deviceready:function(o){var t=this;document.addEventListener("deviceready",function(){l.log("deviceready_testlogin"),"ios"==dsf.util.checkSystem()?(l.log(device),t.DeviceId=device.uuid,f.Z.saveToLocalStore("DeviceId",t.DeviceId),t.DeviceName=device.model,f.Z.saveToLocalStore("DeviceName",t.DeviceName),o&&o()):(l.log(xsfCommon),xsfCommon.SystemTools(["DeviceId"],function(e){l.log(e),t.DeviceId=JSON.parse(e).DeviceId,f.Z.saveToLocalStore("DeviceId",t.DeviceId),xsfCommon.SystemTools(["DeviceName"],function(e){l.log(e),t.DeviceName=JSON.parse(e).DeviceName,f.Z.saveToLocalStore("DeviceName",t.DeviceName),o&&o()},function(e){alert("open failed: "+e)})},function(e){alert("open failed: "+e)}))})},showDeviceId:function(){var e=this;e.clickIndex++,setTimeout(function(){e.clickIndex=0},300),l.log(e.clickIndex),1<e.clickIndex&&("postman"!=e.DeviceId&&dsf.layer.alert({title:"温馨提示",message:"您的设备码为：".concat(e.DeviceId)}),e.clickIndex=0)},loadImage:function(){this.logImgStyle={}},forgetPassword:function(){this.isShowSmsLogin<=0?dsf.layer.alert({title:"提示",message:this.forgetPwdMsg},function(){}):this.changeLoginType("forgetPassword")},gestureError:function(){this.loginType="user",this.hasGesture=!1},forgetGesture:function(){this.logname=f.Z.loadLocalStore("userName")?h.Z.decode(f.Z.loadLocalStore("userName")):"",f.Z.logOut(),this.changeLoginType("user")},goUrl:function(){dsf.layer.closeLoading(this.certificateLoading),dsf.config.login.defaultUrl?this.$router.replace(dsf.config.login.defaultUrl):this.$router.replace("/staging")},login:function(){var d=this;return(0,s.Z)(g().mark(function e(){var t,o,n,i,s,a,c,l,r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d,n={},i=o="",(s=f.Z.loadLocalStore("user")?f.Z.loadLocalStore("user").autoToken:"")&&dsf.config.login.tokenAutologin&&d.checked?(o="/fn/mobileAuth/autoByToken?autoToken=".concat(s,"&uuid=").concat(t.DeviceId,"&brand=").concat(t.DeviceName),e.next=31):e.next=9;break;case 9:"user"!=t.loginType?e.next=29:(i="user",dsf.config.login.isSpecialLogin?(o="/fn/mobileProjectAuth/auth",(dsf.config.login.isShowMobile?(a=["logname","password","mobile"],c=["logname","txtpassword","mobile"],dsf.config.login.specialLoginParamsPhone):(a=["logname","password","deviceId","mobile","tokenCode"],c=["logname","txtpassword","DeviceId","mobile","tokenCode"],dsf.config.login.specialLoginParams)).split(",").forEach(function(e,o){e="return `"+e.replace(/`/g,"")+"`",e=new Function(a[o],e)(t[c[o]]),o=e.split(":")[0],e=e.split(":")[1];n[o]=e}),e.next=27):e.next=17);break;case 17:if(o=dsf.config.login.specialLoginUrl||"/fn/mobileAuth/login",l=d.txtpassword,r=d.logname,d.RSA_PUBLIC)return e.next=23,dsf.http.post("fn/common/getConfig",{type:"browser"}).then(function(e){d.RSA_PUBLIC=e.data.setting.RSA_PUBLIC});e.next=26;break;case 23:r=d.encrypt(d.logname),l=d.encrypt(d.txtpassword),o=dsf.config.login.specialLoginUrl||"/fn/mobileAuth/login?decrypt=RSA";case 26:n={__DATA:u()({logname:r,password:l,device_id:t.DeviceId,device_desc:t.DeviceName})};case 27:e.next=31;break;case 29:i="sms",o="/fn/mobileSmsAuth/login?mobile=".concat(t.phone,"&code=").concat(t.phonecode,"&uuid=").concat(t.DeviceId,"&brand=").concat(t.DeviceName);case 31:dsf.http.post(o,n).then(function(e){var o;dsf.layer.closeLoading(t.loading),f.Z.saveToLocalStore("lastLoginType",i),1==e.data.rcode?(f.Z.saveToLocalStore("uid",h.Z.encode(t.logname)),f.Z.saveToLocalStore("pid",h.Z.encode(t.txtpassword)),f.Z.saveToLocalStore("autoLogin",t.checked),f.Z.saveToLocalStore("longUserName",h.Z.encode(t.logname)),f.Z.saveToLocalStore("userName",h.Z.encode(t.logname)),f.Z.saveToLocalStore("passWord",h.Z.encode(t.txtpassword)),dsf.config.login.isShowMobile&&dsf.config.login.isSpecialLogin&&f.Z.saveToLocalStore("mobile",h.Z.encode(t.mobile)),t.checkedPhone?f.Z.saveToLocalStore("phone",h.Z.encode(t.phone)):f.Z.removeToLocalStore("phone"),o=e.data,t.loginSuccessDeal(o)):2==e.data.rcode?(dsf.util.saveToSessionStore("user",{user_id:e.data.data}),dsf.util.saveToSessionStore("homePage","/changePassWord"),t.$router.replace("/changePassWord")):t.autoLogin=!1,dsf.layer.toast(e.data.message,"html")}).error(function(e){dsf.layer.closeLoading(t.loading),-1<e.message.indexOf("404")&&dsf.layer.toast("登录接口异常，请联系系统管理员！")}).always(function(){});case 32:case"end":return e.stop()}},e)}))()},loginSuccessDeal:function(e){var o=e.data;f.Z.saveToSessionStore("user",o),f.Z.saveToSessionStore("loginToken",o.auth.token),f.Z.saveToLocalStore("loginToken",o.auth.token),f.Z.saveToLocalStore("user",o),f.Z.saveToLocalStore("loginData",e),this.iscertificateEntry||1!=dsf.config.setting["SYS-MOBILE-0002"]||o.mobile?this.toNext():this.changeLoginType("setPhone")},toNext:function(){var t=this,o=f.Z.loadSessionStore("user"),n=f.Z.loadLocalStore("loginData");f.Z.logIn(function(){var e=o.user_id;l.log("Client",f.Z.getClientName()),l.log("shkt",n.shkt,1==n.shkt),"app"==f.Z.getClientName()&&1==n.shkt?(l.log("xsfCommon"),xsfCommon.bsCaLogin("",function(e){var o=JSON.parse(e).result;l.log("bsCaLogin",e,(0,i.Z)(e)),1==o&&t.goUrl()},function(e){l.log("bsCaLogin",e,(0,i.Z)(e)),dsf.layer.toast(err)})):dsf.config.login.loginSaveUUID?(e="fn/sso/devicesave?DeviceId="+t.DeviceId+"&DeviceName="+t.DeviceName+"&userId="+e,dsf.http.get(e).then(function(e){t.goUrl()}).catch(function(e){dsf.layer.toast(e.message)})):t.goUrl()})},changeLoginType:function(e){return this.loginType=e,!1},validator:function(e){return e.length?!!/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/.test(this.phone)||!(this.errorMessage="请输入正确的手机号码"):(this.errorMessage="",!1)},sendSmsCode:function(){var n=this,i=0;n.$refs.smslogin.validate("phone").then(function(){return n.smsBtnEnable=!0,i=dsf.layer.loading("发送中..."),dsf.http.get("/fn/mobileSmsAuth/sendSms?mobile=".concat(n.phone,"&uuid=").concat(n.DeviceId,"&brand=").concat(n.DeviceName),{})}).then(function(e){var o,t;1==e.data.rcode?(l.log(e),dsf.layer.closeLoading(i),dsf.layer.toast("发送成功！"),o=60,t=setInterval(function(){o--,n.smsBtnText="发送验证码("+o+")",0==o&&(clearInterval(t),n.smsBtnEnable=!1,n.smsBtnText="发送验证码")},1e3)):(dsf.layer.toast(e.data.message),n.smsBtnEnable=!1)}).error(function(e){dsf.layer.closeLoading(i),n.smsBtnEnable=!1,l.log(e),-1<e.message.indexOf("404")&&dsf.layer.toast("短信发送接口异常，请联系系统管理员！")})},showAppVersion:function(){var e=this;this.clickTime=(new Date).getTime(),setTimeout(function(){(new Date).getTime()-e.clickTime<500&&cordova.getAppVersion.getVersionCode(function(e){dsf.layer.toast("当前APP的版本为："+e)},function(e){dsf.layer.toast(e)})},500)},showBuildTime:function(){var e=this;this.clickTime=(new Date).getTime(),setTimeout(function(){(new Date).getTime()-e.clickTime<500&&(document.getElementById("appVersion").innerHTML="当前前端APP程序版本为：2024-03-22 18:20")},500)},encrypt:function(e){var o;return void 0!==this.RSA_PUBLIC&&this.RSA_PUBLIC&&((o=new this.$jsEncrypt).setPublicKey(this.RSA_PUBLIC),e=o.encrypt(e)),e},renderResize:function(){var e=document.documentElement.clientWidth,o=document.documentElement.clientHeight;this.loginStyle=o<e?"padformbox loginForm":"formbox loginForm"},certificateEntry:function(){var o=this;this.certificateLoading=dsf.layer.loading("登录中..."),this.iscertificateEntry=!0,dsf.http.post("fn/ldap/getRandom").then(function(e){e=e.data;o.token(e.data),l.log("getRandom",e)}).error(function(e){dsf.layer.closeLoading(o.certificateLoading),l.log("err",e)})},token:function(o){if(this.isIE())this.tokenFail(e,"客户端可能不支持websocket方式获取票据."+e.message);else try{this.tokenWebSocket(o)}catch(e){this.tokenFail(e,"客户端可能不支持websocket方式获取票据."+e.message)}},isIE:function(){var e=!1,o=navigator.userAgent.toLowerCase(),t=-1<o.indexOf("Opera");return e=-1<o.indexOf("compatible")&&-1<o.indexOf("msie")&&!t?!0:e},tokenWebSocket:function(o){var t=this,n='<?xml version="1.0" encoding="utf-8"?><getsignandtokenreq version="2"><challenge>'+o+"</challenge><appserverid>23f59482-fcfd-4201-80ad-17c8ba3de3ba</appserverid></getsignandtokenreq>",i=new WebSocket("ws://127.0.0.1:30318"),s=null,a=!0,c=0;i.onopen=function(e){i.send(n),c=1},i.onerror=function(e){a=!1,1==c?t.tokenFail(e,"WebSocket异常."+e.type):t.tokenFail(e,"WebSocket连接异常，请检查客户端安装或本地监听端口是否正常."+e.type)},i.onclose=function(e){return 0!=a&&(null==s||""==s?(t.tokenFail(e,"WebSocket连接关闭，但客户端未返回票据信息"),!1):void 0)},i.onmessage=function(e){return null==(s=e.data)||""==s?(t.tokenFail(e,"WebSocket连接成功，但客户端未返回票据信息"),!1):0!=s.split("</result>")[0].split("<result>")[1]?(e=s.split("</errorinfo>")[0].split("<errorinfo>")[1],t.tokenFail(3,e),!1):(e=s.split("</tokeninfo>")[0].split("<tokeninfo>")[1],l.log("token",e),void t.tokenSuccess(o,e))}},tokenFail:function(e,o,t){dsf.layer.closeLoading(self.certificateLoading),dsf.layer.toast(o),this.iscertificateEntry=!1},tokenSuccess:function(e,o){var t=this;dsf.http.post("fn/ldap/auth",{challenge:e,signAndToken:o}).then(function(e){e=e.data;l.log("auth",e),f.Z.saveToLocalStore("lastLoginType","user"),1==e.rcode?t.loginSuccessDeal(e):t.tokenFail("","未获取到身份信息")})}}},r=(0,n(51900).Z)(t,function(){var o=this,e=o._self._c;return e("div",{class:1!=o.bfshow?"boxs":"box",style:{overflowY:0<o.isFullscreenBg?"hidden":"scollor"}},[e("div",{staticClass:"banner",style:o.logImgStyle,on:{click:o.showDeviceId}},[e("img",{class:{fullscreenBg:0<o.isFullscreenBg},attrs:{src:o.loginBackground,alt:""},on:{load:o.loadImage}}),o._v(" "),e("p",{staticClass:"title"},[o._v("欢迎登录")]),o._v(" "),e("span",{staticClass:"titlefs"},[o._v(o._s(o.nmgLoginTitle)+" "),e("span",{staticClass:"boxJia"},[o._v("机密")])]),o._v(" "),1==o.bfshow?e("div",{staticClass:"bej"},[e("img",{attrs:{src:"static/images/project/nmgydbg/bg3.png",alt:""}})]):o._e()]),o._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"user"==o.loginType,expression:"loginType == 'user'"}],class:1!=o.bfshow?"active":"loginStyle formbox"},[e("van-form",{on:{submit:o.login}},[e("span",[o._v("用户名")]),o._v(" "),e("van-field",{attrs:{rules:[{required:!0}],name:"账号",placeholder:"请输入您的用户名"},model:{value:o.logname,callback:function(e){o.logname=e},expression:"logname"}}),o._v(" "),e("span",[o._v("密码")]),o._v(" "),e("van-field",{attrs:{rules:[{required:!0}],type:"password",name:"密码",placeholder:"请输入您的密码"},model:{value:o.txtpassword,callback:function(e){o.txtpassword=e},expression:"txtpassword"}}),o._v(" "),e("van-row",{staticClass:"auto",attrs:{type:"flex",justify:"space-between"}},[0<o.isShowAuto?e("van-checkbox",{attrs:{"icon-size":"16",shape:"square"},model:{value:o.checked,callback:function(e){o.checked=e},expression:"checked"}},[o._v("\n                    自动登录\n                ")]):o._e(),o._v(" "),0<o.isShowForget?e("span",{on:{click:function(e){return o.forgetPassword()}}},[o._v("忘记密码")]):o._e()],1),o._v(" "),e("div",{staticClass:"btnbox"},[o.autoLogin?e("van-button",{staticStyle:{width:"100%","font-size":"19px"},attrs:{disabled:o.autoLogin,round:"",type:"info","native-type":"submit"}},[o._v("登录中...")]):e("van-button",{staticStyle:{width:"100%","font-size":"19px"},attrs:{round:"",type:"info","native-type":"submit"}},[o._v("登录")]),o._v(" "),e("van-button",{staticStyle:{"margin-top":"50px",width:"100%","font-size":"19px"},attrs:{round:"",type:"info","native-type":"button"},on:{click:o.certificateEntry}},[o._v("证书登录")])],1),o._v(" "),o.isShowChangeType?e("div",{staticClass:"changeType"},[0<o.isShowSmsLogin?e("span",{on:{click:function(e){return o.changeLoginType("sms")}}},[o._v("短信验证码登录")]):o._e(),o._v(" "),o.dsf.util.loadLocalStore("gesture_pas")?e("span",{on:{click:function(e){return o.changeLoginType("gesture")}}},[o._v("手势登录")]):o._e()]):o._e()],1),o._v(" "),o.dsf.config.login.isShowIcon?e("van-icon",{staticClass:"login_icon",attrs:{name:"static/images/icon-img.png",size:"50"}}):o._e()],1),o._v(" "),"sms"==o.loginType?e("div",{class:o.loginStyle},[e("van-form",{ref:"smslogin",on:{submit:o.login}},[e("van-field",{attrs:{rules:o.phoneValidator,name:"phone",type:"tel",placeholder:"请输入手机号码",center:""},scopedSlots:o._u([{key:"left-icon",fn:function(){return[e("i",{staticClass:"iconfont iconshouji"})]},proxy:!0}],null,!1,3510034603),model:{value:o.phone,callback:function(e){o.phone=e},expression:"phone"}}),o._v(" "),e("div",{staticClass:"sendCode"},[e("van-field",{attrs:{rules:[{required:!0}],center:"",clearable:"",name:"短信验证码",placeholder:"请输入验证码"},scopedSlots:o._u([{key:"left-icon",fn:function(){return[e("i",{staticClass:"iconfont iconyuechi"})]},proxy:!0}],null,!1,253601634),model:{value:o.phonecode,callback:function(e){o.phonecode=e},expression:"phonecode"}}),o._v(" "),e("van-button",{attrs:{text:o.smsBtnText,disabled:o.smsBtnEnable,size:"small",type:"primary","native-type":"button"},on:{click:function(e){return o.sendSmsCode()}}})],1),o._v(" "),e("van-row",{staticClass:"auto",attrs:{type:"flex",justify:"space-between"}},[0<o.isShowAuto&&o.dsf.config.login.tokenAutologin?e("van-checkbox",{attrs:{"icon-size":"16",shape:"square"},model:{value:o.checked,callback:function(e){o.checked=e},expression:"checked"}},[o._v("\n                    自动登录\n                ")]):o._e(),o._v(" "),e("van-checkbox",{attrs:{"icon-size":"16",shape:"square"},model:{value:o.checkedPhone,callback:function(e){o.checkedPhone=e},expression:"checkedPhone"}},[o._v("\n                    记住手机号\n                ")])],1),o._v(" "),e("div",{staticClass:"btnbox"},[e("van-button",{staticStyle:{"margin-top":"50px",width:"100%","font-size":"19px"},attrs:{round:"",type:"info","native-type":"button"},on:{click:o.certificateEntry}},[o._v("证书登录")])],1),o._v(" "),o.isShowChangeType?e("div",{staticClass:"changeType"},[e("span",{on:{click:function(e){return o.changeLoginType("user")}}},[o._v("账号登录")]),o._v(" "),o.dsf.util.loadLocalStore("gesture_pas")?e("span",{on:{click:function(e){return o.changeLoginType("gesture")}}},[o._v("手势登录")]):o._e()]):o._e()],1),o._v(" "),o.dsf.config.login.isShowIcon?e("van-icon",{staticClass:"login_icon",attrs:{name:"static/images/icon-img.png",size:"50"}}):o._e()],1):o._e(),o._v(" "),"gesture"==o.loginType?e("div",{class:o.loginStyle},[e("gesture",{attrs:{"gesture-type":"check"},on:{gestureError:o.forgetGesture}}),o._v(" "),o.isShowChangeType?e("div",{staticClass:"changeType"},[e("span",{on:{click:function(e){return o.changeLoginType("user")}}},[o._v("账号登录")]),o._v(" "),0<o.isShowSmsLogin?e("span",{on:{click:function(e){return o.changeLoginType("sms")}}},[o._v("短信验证码登录")]):o._e()]):o._e()],1):o._e(),o._v(" "),"forgetPassword"==o.loginType?e("div",{class:o.loginStyle},[e("forget-password",{on:{toLogin:function(e){return o.changeLoginType("user")}}})],1):o._e(),o._v(" "),"setPhone"==o.loginType?e("div",{class:o.loginStyle},[e("set-phone",{on:{toLogin:function(e){o.dsf.util.logOut(),o.changeLoginType("user")},toIndex:function(e){return o.toNext()}}})],1):o._e(),o._v(" "),1==o.bfshow?e("div",{staticClass:"nmgimgbg2"},[e("img",{attrs:{src:"static/images/project/nmgydbg/bg2.jpg",alt:""}})]):o._e()])},[],!1,null,"0905656a",null).exports},89861:function(e,o,t){t.d(o,{Z:function(){return i}});var o=t(8450),n=t.n(o),o={name:"setPhone",data:function(){return{phone:"",phonecode:"",smsBtnText:"发送验证码",smsBtnEnable:!1,randomStr:"",phoneValidator:[{required:!0},{pattern:/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/,message:"请输入正确手机号"}],smsValidator:[{required:!0}]}},methods:{confirm:function(){var o=this,e={key:"mobile",value:this.phone};dsf.http.post("/fn/mobileUserData/update",{__DATA:n()(e)}).then(function(e){200!=e.data.code&&!e.data.result||o.$emit("toIndex")}).error(function(e){dsf.layer.toast("接口异常，请联系系统管理员！")})}}},i=(0,t(51900).Z)(o,function(){var o=this,e=o._self._c;return e("div",[e("van-form",{ref:"setPwd",on:{submit:o.confirm}},[e("van-field",{attrs:{rules:o.phoneValidator,name:"phone",type:"tel",placeholder:"请输入账号绑定的手机号码",center:""},scopedSlots:o._u([{key:"left-icon",fn:function(){return[e("i",{staticClass:"iconfont iconshouji"})]},proxy:!0}]),model:{value:o.phone,callback:function(e){o.phone=e},expression:"phone"}}),o._v(" "),e("div",{staticClass:"btnbox",staticStyle:{"margin-top":"30px"}},[e("van-button",{staticStyle:{width:"100%","font-size":"19px"},attrs:{round:"",type:"info","native-type":"submit"}},[o._v("确认")])],1),o._v(" "),e("div",{staticClass:"changeType"},[e("span",{on:{click:function(e){return o.$emit("toLogin")}}},[e("van-icon",{attrs:{name:"arrow-left"}}),o._v("返回")],1)])],1)],1)},[],!1,null,"1dce32b7",null).exports},97603:function(e,o,t){e.exports=t.p+"static/img/bg0.e30423d..jpg"},358:function(e,o,t){e.exports=t.p+"static/img/bg1.9e28530..jpg"}}]);