"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[6627],{6627:function(t,a,e){e.r(a),e.d(a,{default:function(){return s}});var i=e(5044),a=e(54258),a=(e(94859),e(40451),{components:{VChart:a.Z},data:function(){return{active:0,currentTime:"1",currentDept:"0",time:[{label:"一个月",value:"1"},{label:"三个月",value:"2"},{label:"一年",value:"3"}],depts:[{name:"全部",id:"0"}],zbrw:[{label:"总任务数",color:"#000",num:"0"},{label:"  办理中",color:"#000",num:"0"},{label:"  待接收",color:"#3389E0",num:"0"}],dbrw:[{label:"待接收",color:"#1688FA",icon:"iconjiahao",img:"./static/images/duban/daijieshou.png",num:"0"},{label:"办理中",color:"#FF8926",icon:"iconjiahao",img:"./static/images/duban/banlizhong.png",num:"0"},{label:"已办结",color:"#1ACAD4",icon:"iconjiahao",img:"./static/images/duban/banjie.png",num:"0"},{label:"已超期",color:"#DE1010",icon:"iconjiahao",img:"./static/images/duban/yichaoqi.png",num:"0"}],fkqk:[{label:"正常反馈",color:"#1ACAD4",num:"0"},{label:"超期反馈",color:"#FF8926",num:"0"},{label:"超期未反馈",color:"#DE1010",num:"0"}],blfkqk:[{label:"待反馈",color:"#1688FA",num:"11"},{label:"正常反馈",color:"#1ACAD4",num:"0"},{label:"超期反馈",color:"#FF8926",num:"0"},{label:"超期未反馈",color:"#DE1010",num:"0"}],completion:[{label:"领导批示",num:50},{label:"重要文件",num:60},{label:"重点工作",num:75},{label:"紧急事项",num:20}],xmqk:[{label:"项目",color:"#1688FA",icon:"iconjiahao",img:"./static/images/duban/xiangmu.png",num:"0"},{label:"办结",color:"#1ACAD4",icon:"iconjiahao",img:"./static/images/duban/banjie.png",num:"0"},[{label:"在办",color:"#FF8926",num:"0"},{label:"超期",color:"#DE1010",num:"0"}]],allPieChart:{title:{show:!1},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",position:[10,10]},color:["#3389E0","#C3E3FF"],series:[{name:"在办任务",type:"pie",radius:"80%",center:["40%","50%"],data:[{value:25,name:"待接收"},{value:75,name:"办理中"}],itemStyle:{normal:{label:{show:!1}}}}]},deptBarChart:{color:["#3389E0","#C3E3FF"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{right:"0",bottom:"3%",height:"90%",width:"100%",containLabel:!0},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],bottom:0,height:20,showDetail:!1,startValue:0,endValue:9},{type:"inside",show:!0,xAxisIndex:[0],startValue:0,endValue:9}],yAxis:{type:"value"},xAxis:{type:"category",data:[],axisLabel:{show:!0,interval:0,formatter:function(t){return t.split("").join("\n")}}},series:[{name:"待接收",type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]},{name:"办理中",type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}]}}},created:function(){this.getDept(),this.getProjectStatistics(),this.getTaskStatistics()},methods:{getDept:function(){var a=this;dsf.http.post("/ctrl/superviseV6/m/list/dept").then(function(t){200==t.data.code&&(a.depts=[].concat((0,i.Z)(a.depts),(0,i.Z)(t.data.data)))})},chooseTime:function(t){this.currentTime=t.value,this.getTaskStatistics(),this.getProjectStatistics()},chooseDept:function(t){this.currentDept=t.id,this.getTaskStatistics()},getProjectStatistics:function(){var i=this,t=dsf.layer.loading();dsf.http.post("/ctrl/superviseV6/m/statistics/project",{dateType:this.currentTime}).then(function(t){var a,e;200==t.data.code&&(a=(t=t.data.data).feedBack,e=t.pInfo,t=t.task,i.fkqk[0].num=a.normal,i.fkqk[1].num=a.over,i.fkqk[2].num=a.overNo,i.xmqk[0].num=e.sum,i.xmqk[1].num=e.close,i.xmqk[2][0].num=e.process,i.xmqk[2][1].num=e.over,i.completion[0].num=Number(e.ldps.split("%")[0]),i.completion[1].num=Number(e.zywj.split("%")[0]),i.completion[2].num=Number(e.zysx.split("%")[0]),i.completion[3].num=Number(e.jjsx.split("%")[0]),i.deptBarChart.xAxis.data=t.dept.map(function(t){return t.deptName}),i.deptBarChart.series[0].data=t.dept.map(function(t){return t.wait}),i.deptBarChart.series[1].data=t.dept.map(function(t){return t.process}),i.allPieChart.series[0].data[0].value=t.wait,i.allPieChart.series[0].data[1].value=t.process,i.zbrw[0].num=t.sum,i.zbrw[1].num=t.process,i.zbrw[2].num=t.wait)}).always(function(){dsf.layer.closeLoading(t)})},getTaskStatistics:function(){var e=this,i=dsf.layer.loading();dsf.http.post("/ctrl/superviseV6/m/statistics/task",{dateType:this.currentTime,deptId:this.currentDept}).then(function(t){var a;dsf.layer.closeLoading(i),200==t.data.code&&(a=(t=t.data.data).feedBack,t=t.task,e.blfkqk[0].num=a.normalNo,e.blfkqk[1].num=a.normal,e.blfkqk[2].num=a.over,e.blfkqk[3].num=a.overNo,e.dbrw[0].num=t.wait,e.dbrw[1].num=t.process,e.dbrw[2].num=t.close,e.dbrw[3].num=t.over)})}}}),s=(0,e(51900).Z)(a,function(){var e=this,i=e._self._c;return i("div",{staticClass:"container"},[i("div",{staticClass:"screen"},[i("div",{staticClass:"time"},e._l(e.time,function(a,t){return i("span",{key:t,staticClass:"screen-item",class:{"choose-item":a.value==e.currentTime},on:{click:function(t){return e.chooseTime(a)}}},[e._v(e._s(a.label))])}),0),e._v(" "),1==e.active?i("div",{staticClass:"dept"},e._l(e.depts,function(a,t){return i("span",{key:t,staticClass:"screen-item",class:{"choose-item":a.id==e.currentDept},on:{click:function(t){return e.chooseDept(a)}}},[e._v(e._s(a.name))])}),0):e._e()]),e._v(" "),i("div",{staticClass:"charts"},[0==e.active?[i("div",{staticClass:"module"},[i("div",{staticClass:"title"},[e._v("项目情况")]),e._v(" "),i("div",{staticClass:"blocks"},[e._l(e.xmqk,function(t,a){return[Array.isArray(t)?i("div",{key:a,staticStyle:{width:"30%"}},e._l(t,function(t,a){return i("div",{key:a,staticClass:"grey-block",staticStyle:{padding:"5px 8px"}},[i("div",[e._v(e._s(t.label))]),e._v(" "),i("span",{style:{color:t.color,fontSize:"25px"}},[e._v(e._s(t.num))])])}),0):i("div",{key:a,staticClass:"grey-block",staticStyle:{width:"30%",padding:"10px"}},[i("div",[i("img",{staticStyle:{width:"0.5rem",height:"0.5rem",display:"inline-block","margin-bottom":"10px"},attrs:{src:t.img,alt:""}}),e._v(" "),i("div",[e._v(e._s(t.label))])]),e._v(" "),i("span",{staticClass:"num",style:{color:t.color}},[e._v(e._s(t.num))])])]})],2),e._v(" "),i("div",{staticClass:"feedback-block"},[i("div",{staticStyle:{color:"#3389E0","padding-bottom":"10px"}},[e._v("办结率")]),e._v(" "),i("van-row",e._l(e.completion,function(a,t){return i("van-col",{key:t,attrs:{span:"6"}},[i("van-circle",{attrs:{size:"60px",rate:a.num,"stroke-width":130,"layer-color":"#e5e5e5",color:"#FF8926",text:"".concat(a.num,"%"),"stroke-linecap":"butt"},model:{value:a.num,callback:function(t){e.$set(a,"num",t)},expression:"item.num"}}),e._v(" "),i("div",[e._v(e._s(a.label))])],1)}),1)],1)]),e._v(" "),i("div",{staticClass:"module"},[i("div",{staticClass:"title"},[e._v("在办任务")]),e._v(" "),i("div",{staticClass:"charts-container"},[i("div",[i("v-chart",{staticStyle:{width:"2.4rem",height:"2.4rem"},attrs:{options:e.allPieChart}}),e._v(" "),e._l(e.zbrw,function(t,a){return i("div",{key:a,style:{color:t.color,paddingBottom:"10px"}},[e._v(e._s(t.label)+"："+e._s(t.num))])})],2),e._v(" "),i("v-chart",{staticStyle:{width:"4rem",height:"6rem",flex:"1","text-align":"right"},attrs:{options:e.deptBarChart}})],1),e._v(" "),i("div",{staticClass:"feedback-block"},[i("div",{staticStyle:{color:"#3389E0"}},[e._v("反馈情况")]),e._v(" "),i("div",{staticClass:"flex"},e._l(e.fkqk,function(t,a){return i("div",{key:a},[i("div",{staticClass:"num",style:{color:t.color}},[e._v(e._s(t.num))]),e._v(" "),i("div",[e._v(e._s(t.label))])])}),0)])])]:[i("div",{staticClass:"module"},[i("div",{staticClass:"title"},[e._v("督办任务")]),e._v(" "),i("div",{staticClass:"blocks"},e._l(e.dbrw,function(t,a){return i("div",{key:a,staticClass:"grey-block",staticStyle:{width:"48%"}},[i("div",[i("img",{staticStyle:{width:"0.5rem",height:"0.5rem",display:"inline-block","margin-bottom":"10px"},attrs:{src:t.img,alt:""}}),e._v(" "),i("div",[e._v(e._s(t.label))])]),e._v(" "),i("span",{staticClass:"num",style:{color:t.color}},[e._v(e._s(t.num))])])}),0)]),e._v(" "),i("div",{staticClass:"feedback-block"},[i("div",{staticStyle:{color:"#3389E0"}},[e._v("反馈情况")]),e._v(" "),i("div",{staticClass:"flex"},e._l(e.blfkqk,function(t,a){return i("div",{key:a},[i("div",{staticClass:"num",style:{color:t.color}},[e._v(e._s(t.num))]),e._v(" "),i("div",[e._v(e._s(t.label))])])}),0)])],e._v(" "),i("div",{staticStyle:{height:"60px"}})],2),e._v(" "),i("van-tabbar",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[i("van-tabbar-item",{scopedSlots:e._u([{key:"icon",fn:function(){return[i("img",{attrs:{src:0==e.active?"./static/images/duban/lixiang.png":"./static/images/duban/lixiang2.png",alt:""}})]},proxy:!0}])},[e._v("\r\n            督办立项\r\n            ")]),e._v(" "),i("van-tabbar-item",{scopedSlots:e._u([{key:"icon",fn:function(){return[i("img",{attrs:{src:0==e.active?"./static/images/duban/banli.png":"./static/images/duban/banli2.png",alt:""}})]},proxy:!0}])},[e._v("\r\n            督办办理\r\n            ")])],1)],1)},[],!1,null,"3a5c3742",null).exports}}]);