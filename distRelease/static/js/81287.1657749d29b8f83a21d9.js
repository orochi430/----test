"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[81287],{39067:function(t,s,e){e.d(s,{Z:function(){return i}});var a=e(25108),s={props:{lists:{type:Array,default:function(){return[]}},type:{type:String,default:""}},data:function(){return{messageClick:function(s){this.$emit("updatamessage",s),"publish"!==this.type&&dsf.http.post("fn/conferenceMessage/read",{pk:s.id}).done(function(t){"200"===t.code&&(s.isRead=!0,a.log("已读"))}).error(function(t){a.log("error",t)})}}}},i=(0,e(51900).Z)(s,function(){var e=this,a=e._self._c;return a("div",{staticClass:"message-list-wrapper"},e._l(e.lists,function(s,t){return a("div",{key:t,staticClass:"list",class:{read:s.isRead},on:{click:function(t){return e.messageClick(s)}}},[a("div",{staticClass:"message-desc"},[e._v(e._s(s.title))]),e._v(" "),a("div",{staticClass:"message-sender"},[e._v(e._s(s.sender))]),e._v(" "),a("div",{staticClass:"message-time"},[s.time?a("span",[e._v(e._s(s.time)+" ")]):e._e(),e._v(" "),a("van-icon",{attrs:{name:"arrow"}})],1)])}),0)},[],!1,null,"0be1336a",null).exports},81287:function(t,s,e){e.r(s),e.d(s,{default:function(){return i}});var s=e(39067),a=e(25108),s={components:{messageList:s.Z},data:function(){return{lists:[],meeting:dsf.util.loadSessionStore("meeting"),currentmessage:null,show:!1}},created:function(){this.getData()},methods:{updatamessage:function(t){this.currentmessage=t,this.show=!0},closeClick:function(){this.show=!1},delClick:function(){var s=this;dsf.http.post("fn/list/deleteRows",{metaKey:"A0001",pk:this.currentmessage.id,moduleId:"220805142201Z2JRY83u6rPqYsQk1uk",formId:"220805144114MAufCqtIpiY9Rt8TkYx"}).done(function(t){"200"===t.code&&(dsf.layer.toast("删除成功！",!0),s.getData())}).error(function(t){a.log("error",t)})},getData:function(){var s=this;dsf.http.get("fn/list/220805144114MAufCqtIpiY9Rt8TkYx/mobile/q",{moduleId:"220805142201Z2JRY83u6rPqYsQk1uk",fid:this.meeting.id,isFirst:1}).done(function(t){t.datas&&(s.lists=[],t.datas.forEach(function(t){s.lists.push({title:t.dataValue["HYXX.B0001"],time:t.dataValue["HYXX.C-HWXT-HYXX-0007"],sender:t.dataValue["HYXX.B0009"],isRead:"1"==t.dataValue["HWXT_HYXX_USER.C-HWXT-HYXX-USER-0002.value"],id:t.dataValue["HYXX.A0001"]})}))}).error(function(t){a.log("error",t)})}}},i=(0,e(51900).Z)(s,function(){var s=this,t=s._self._c;return t("div",{staticClass:"message-container"},[t("div",{staticClass:"top"},[t("van-cell",{staticClass:"top-back",attrs:{title:"消息提醒",icon:"arrow-left",center:""},on:{click:function(t){return s.$router.back()}}})],1),s._v(" "),t("div",{staticClass:"content"},[t("messageList",{attrs:{lists:s.lists},on:{updatamessage:s.updatamessage}})],1),s._v(" "),s.currentmessage?t("van-popup",{model:{value:s.show,callback:function(t){s.show=t},expression:"show"}},[t("div",{staticClass:"message-detail"},[t("div",{staticClass:"message-detail-top"},[s._v("消息")]),s._v(" "),t("div",{staticClass:"message-detail-con"},[s._v("\n        "+s._s(s.currentmessage.title)+"\n      ")]),s._v(" "),t("div",{staticClass:"message-detail-btn"},[t("van-button",{attrs:{type:"default"},on:{click:s.closeClick}},[s._v("关闭")])],1)])]):s._e()],1)},[],!1,null,"2af54a58",null).exports}}]);