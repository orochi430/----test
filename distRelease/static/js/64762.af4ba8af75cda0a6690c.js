"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[64762],{64762:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var t=i(8450),a=i.n(t),t=i(50856),n=i(25108),t={components:{DsfButtonToolbox:t.Z},data:function(){return{showDetail:!1,title:"",sender:"",recipient:"",carbonCopy:"",createTime:"",content:"",files:[],mail:null,fileShow:!1,fileTitle:"",fileUrl:""}},filters:{fileType:function(e){return e?(e=e.toString()).charAt(0).toUpperCase()+e.slice(1):""}},computed:{buttons:function(){return"0"==this.$route.query.type?{mainButtons:[{action:"replay",icon:"iconreply",name:"回复"},{action:"forward",icon:"iconshare",name:"转发"},{action:"del",icon:"icondelete",name:"删除"}]}:"1"==this.$route.query.type?{mainButtons:[{action:"forward",icon:"iconshare",name:"转发"},{action:"del",icon:"icondelete",name:"删除"}]}:void 0}},created:function(){this.getData()},methods:{getData:function(){var t=this,e=dsf.layer.loading();dsf.http.post("/fn/mail/detail",{id:this.$route.query.id,type:this.$route.query.type}).then(function(e){t.title=e.data.title||"",t.sender=e.data.sender||"",t.recipient=e.data.recipient||"",t.carbonCopy=e.data.carbonCopy||"",t.createTime=e.data.createTime||"",t.content=e.data.content.replace(/\\n/gm,"<br/>")||"",t.files=e.data.files||[],t.mail=e.data}).finally(function(){dsf.layer.closeLoading(e)})},openFile:function(e){this.fileShow=!0,this.fileTitle=e.title,this.fileUrl=dsf.config.previewSetting.previewLocation+e.url},handlerBtn:function(e){this[e]()},del:function(){var t=this;n.log("删除"),dsf.layer.confirm({message:"是否确认删除该邮件",confirmButtonText:"确认"},function(){dsf.http.post("fn/mail/toTrash",{id:t.$route.query.id}).then(function(e){200==e.data.code&&(dsf.layer.toast("删除成功"),t.$router.back())})})},forward:function(){n.log("转发"),this.$router.push({path:"/jiangsuyancaoMailEdit",query:{type:"forward",mail:a()(this.mail)}})},replay:function(){n.log("回复"),this.$router.push({path:"/jiangsuyancaoMailEdit",query:{type:"replay",mail:a()(this.mail)}})}}},o=(0,i(51900).Z)(t,function(){var i=this,a=i._self._c;return a("div",{staticClass:"detail",staticStyle:{"margin-top":"0.2rem"}},[a("van-field",{attrs:{label:"主题：",type:"textarea",rows:"1",autosize:"",value:i.title,readonly:"","label-width":"1.4rem"}}),i._v(" "),a("van-field",{attrs:{label:1==i.$route.query.type?"收件人：":"发件人：",type:"textarea",rows:"1",autosize:"",value:1==i.$route.query.type?i.recipient:i.sender,readonly:"","label-width":"1.4rem"},scopedSlots:i._u([{key:"button",fn:function(){return[a("span",{staticStyle:{color:"#3389e0","font-size":"var(--font_size_3)"},on:{click:function(e){i.showDetail=!i.showDetail}}},[i._v(i._s(i.showDetail?"隐藏详情":"显示详情"))])]},proxy:!0}])}),i._v(" "),i.showDetail?a("div",[a("van-field",{attrs:{label:1==i.$route.query.type?"发件人：":"收件人：",type:"textarea",rows:"1",autosize:"",value:1==i.$route.query.type?i.sender:i.recipient,readonly:"","label-width":"1.4rem"}}),i._v(" "),a("van-field",{attrs:{label:"抄送：",type:"textarea",rows:"1",autosize:"",value:i.carbonCopy,readonly:"","label-width":"1.4rem"}}),i._v(" "),a("van-field",{attrs:{label:"时间：",type:"textarea",rows:"1",autosize:"",value:i.createTime,readonly:"","label-width":"1.4rem"}})],1):i._e(),i._v(" "),a("div",{staticStyle:{padding:"0.2rem 0.32rem 0","white-space":"pre-wrap","line-height":"0.46rem"},domProps:{innerHTML:i._s(i.content)}}),i._v(" "),a("div",{staticStyle:{padding:"0.32rem"}},[i._v("\n    附件：\n    "),i._l(i.files,function(t,e){return a("div",{key:e,staticClass:"file",on:{click:function(e){return i.openFile(t)}}},[a("span",{staticClass:"elps"},[i._v(i._s(t.title))]),i._v(" "),a("van-icon",{attrs:{name:"eye",color:"#3389e0",size:"0.32rem"}})],1)})],2),i._v(" "),a("div",{staticStyle:{height:"1.2rem"}},[a("div",{staticClass:"footer"},[a("DsfButtonToolbox",{attrs:{more:!0,"is-form-btn":!0,buttons:i.buttons,size:"small"},on:{mainClick:i.handlerBtn,commonClick:i.handlerBtn}})],1)]),i._v(" "),a("van-popup",{staticClass:"filePop",attrs:{"get-container":"#app",position:"bottom"},model:{value:i.fileShow,callback:function(e){i.fileShow=e},expression:"fileShow"}},[a("van-nav-bar",{attrs:{title:i.fileTitle},on:{"click-left":function(e){i.fileShow=!1}},scopedSlots:i._u([{key:"left",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}}),a("span",[i._v("返回")])]},proxy:!0}])}),i._v(" "),i.fileShow?a("iframe",{attrs:{id:"filePreview",src:i.fileUrl,frameborder:"0"}}):i._e()],1)],1)},[],!1,null,"4a37bd54",null).exports}}]);