"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[98036],{98036:function(t,s,a){a.r(s),a.d(s,{default:function(){return n}});var s=a(70596),i=a.n(s),s={name:"personalAttendance",components:{},data:function(){return{obj:{datas:[]},cdts:0,ztts:0,ycqts:0,cqts:0,qqts:0,zs:"",isLoading:!1}},mounted:function(){},updated:function(){var t=this;this.$nextTick(function(){t.drawChart(t.cqts,t.qqts)})},created:function(){this.initDatas()},methods:{onRefresh:function(){this.initDatas()},initDatas:function(){var o=this;this.obj.datas=[],dsf.http.post("/fn/mobileKqData").then(function(t){var s,a,i,n,c,e;o.isLoading=!1,200==t.data.code?t.data.data&&(s=(e=t.data.data).zs,a=e.ycqts,i=e.cqts,n=e.cdts,c=e.ztts,e=e.qqts,o.zs=s,o.cdts=n,o.ztts=c,o.ycqts=a,o.cqts=i,o.qqts=e,t.data.data.datas.forEach(function(t){var s={date:t.rq,Sbattendance:t.sbsj,Xbattendance:t.xbsj,bz:t.bz,router:{moduleId:t.moduleId,pk:t.pk}};"出勤"==t.sbbz?s.Sbicon="late iconyitijiao":"迟到"==t.sbbz?s.Sbicon="orange iconminus-circle-outline":s.Sbicon="signature iconclose-circle-outline","出勤"==t.xbbz?s.Xbicon="late iconyitijiao":"早退"==t.xbbz?s.Xbicon="orange rotate iconminus-circle-outline":s.Xbicon="signature iconclose-circle-outline",o.obj.datas.push(s)})):dsf.layer.toast(t.data.message)})},handle:function(t){(t.moduleId||t.pk)&&this.$router.push({path:"/commonForm/".concat(t.moduleId,"/").concat(t.pk)})},drawChart:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=i().init(document.getElementById("myChart")),t={color:["#67c23b","#EB7E65"],tooltip:{trigger:"item",show:!1},legend:{orient:"vertical",icon:"circle",itemHeight:10,itemWidth:10,top:"center",x:"left",left:10,data:["出勤".concat(t,"天"),"缺勤".concat(s,"天")]},series:[{name:"Access From",type:"pie",center:["50%","50%"],radius:["60%","90%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:[{value:t/(t+s)*100,name:"出勤".concat(t,"天")},{value:s/(t+s)*100,name:"缺勤".concat(s,"天")}],emphasis:{disabled:!1,scale:!1,scaleSize:!1},silent:!0}]};a.setOption(t)}}},n=(0,a(51900).Z)(s,function(){var a=this,i=a._self._c;return i("div",{staticClass:"personalAttendance"},[i("van-pull-refresh",{on:{refresh:a.onRefresh},model:{value:a.isLoading,callback:function(t){a.isLoading=t},expression:"isLoading"}},[i("div",{staticClass:"content"},[a._v("\n      "+a._s((new Date).getFullYear())+"年"+a._s(+(new Date).getMonth()+1)+"月个人考勤记录\n    ")]),a._v(" "),0!=a.obj.datas.length?i("div",{staticClass:"box"},[i("div",{staticClass:"charts_box"},[i("div",{staticClass:"charts_title"},[a._v("出勤情况")]),a._v(" "),i("div",{staticClass:"charts-info"},[i("div",{staticClass:"charts-info-container"},[i("div",{staticClass:"num num1"},[a._v(a._s(a.cdts))]),a._v(" "),i("div",{staticClass:"desc"},[a._v("迟到次数")])]),a._v(" "),i("div",{staticClass:"charts-info-container"},[i("div",{staticClass:"num num2"},[a._v(a._s(a.ztts))]),a._v(" "),i("div",{staticClass:"desc"},[a._v("早退次数")])]),a._v(" "),i("div",{staticClass:"charts-info-container"},[i("div",{staticClass:"num num3"},[a._v(a._s(a.ycqts))]),a._v(" "),i("div",{staticClass:"desc"},[a._v("应出勤天数")])])])]),a._v(" "),i("div",{staticClass:"charts_box",staticStyle:{"padding-bottom":"10px"}},[i("div",{staticClass:"charts_title"},[a._v("出勤统计")]),a._v(" "),i("div",{attrs:{id:"myChart"}})]),a._v(" "),i("div",{staticClass:"charts_box"},[i("div",{staticClass:"charts_title"},[a._v("出勤详情")]),a._v(" "),i("div",{staticClass:"status"},[i("ul",[i("li",[i("span",[a._v("签到:")]),i("span",{staticClass:"iconfont late iconyitijiao"})]),a._v(" "),i("li",[i("span",[a._v("迟到:")]),i("span",{staticClass:"iconfont orange iconminus-circle-outline"})]),a._v(" "),i("li",[i("span",[a._v("早退:")]),i("span",{staticClass:"iconfont orange rotate iconminus-circle-outline"})]),a._v(" "),i("li",[i("span",[a._v("缺勤:")]),i("span",{staticClass:"iconfont signature iconclose-circle-outline"})])])]),a._v(" "),i("div",{staticClass:"table"},[i("ul",{staticClass:"th"},[i("li",[a._v("日期")]),a._v(" "),i("li",[a._v("上班考勤")]),a._v(" "),i("li",[a._v("下班考勤")]),a._v(" "),i("li",[a._v("备注")])]),a._v(" "),a._l(a.obj.datas,function(s,t){return i("ul",{key:t,staticClass:"td"},[i("li",[a._v(a._s(s.date.slice(5)))]),a._v(" "),i("li",[a._v("\n              "+a._s(s.Sbattendance)+"\n              "),i("span",{class:"iconfont ".concat(s.Sbicon)})]),a._v(" "),i("li",{class:"缺勤"==s.Xbattendance?"red":""},[a._v("\n              "+a._s(s.Xbattendance)+"\n              "),i("span",{class:"iconfont ".concat(s.Xbicon)})]),a._v(" "),i("li",{staticClass:"click",on:{click:function(t){return a.handle(s.router)}}},[a._v("\n              "+a._s(s.bz)+"\n            ")])])})],2),a._v(" "),i("div",{staticClass:"footer"},[a._v(a._s(a.zs))])])]):i("commonempty",{attrs:{description:"暂无个人考勤记录"}})],1)],1)},[],!1,null,"5675c398",null).exports}}]);