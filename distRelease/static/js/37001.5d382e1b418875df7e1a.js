"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[37001],{37001:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var e={name:"xizangMeeting",data:function(){return{personList:[],identity:0,showPop:!1,popHeight:"",popList:[],meetingNum:"",bySelectPerson:"",search:"",recording:!1,lockout:!1,showPop2:!1,password:""}},created:function(){dsf.util.loadSessionStore("identity")&&(dsf.util.loadSessionStore("identity").identity?this.identity=1:this.identity=0),this.meetingNum=this.$route.query.meetingNum,this.init()},methods:{confirm:function(){var i=this;0==this.password.length?dsf.layer.toast("请输入密码"):dsf.http.post("fn/vedioMeeting/judgeControlPassword",{meetingRoom:this.meetingNum,controlPassword:this.password}).then(function(t){var e,t=t.data;"200"==t.code?(e=dsf.layer.loading(""),dsf.util.saveToSessionStore("identity",{identity:1}),i.identity=1,i.init(),dsf.layer.closeLoading(e),i.showPop2=!1):"500"==t.code&&dsf.layer.toast("密码错误")})},init:function(){var e=this;dsf.http.post("fn/vedioMeeting/getPersonnelByMeetingRoom?meetingRoom=".concat(this.meetingNum)).then(function(t){t=t.data;e.personList=t.deviceStatusList||[],e.lockout=t.locked,e.recording=!!t.recordingDevice})},converMic:function(e,t){var i,t=0==t?(i=1,"singleSpeech"):(i=0,"relieveSingleSpeech");this.personList.find(function(t){return t.device.id==e.device.id}).muteStatus=i,dsf.http.post("fn/vedioMeeting/".concat(t),{meetingRoom:this.meetingNum,id:e.device.id,type:e.device.type,participantNumber:e.device.participantNumber})},showPopList:function(t,e){0==t?(this.popList=[{name:"开始录制",index:0},{name:"锁定会议",index:1},{name:"解除全体静音",index:2},{name:"结束会议",index:3}],this.recording&&(this.popList[0].name="结束录制"),this.lockout&&(this.popList[1].name="解锁会议")):this.popList=[{name:"挂断",index:4}],e&&(this.bySelectPerson=e.device),this.popHeight="".concat(.71*(this.popList.length+1),"rem"),this.showPop=!0},position:function(t){var e=this;switch(t){case 0:var i=this.recording?"endRecordVideo":"startRecordVideo";dsf.http.post("fn/vedioMeeting/".concat(i,"?meetingRoom=").concat(this.meetingNum)).then(function(t){"200"==t.data.code&&(e.recording=!e.recording,e.popList[0].name=e.recording?"结束录制":"开始录制")});break;case 1:i=this.lockout?"meetingUnlock":"meetingLock";dsf.http.post("fn/vedioMeeting/".concat(i,"?meetingRoom=").concat(this.meetingNum)).then(function(t){"200"==t.data.code&&(e.lockout=!e.lockout,e.popList[1].name=e.lockout?"解锁会议":"锁定会议")});break;case 2:dsf.http.post("fn/vedioMeeting/allReleaseSilence?meetingRoom=".concat(this.meetingNum)).then(function(t){200==t.data.code&&e.personList.forEach(function(t){return t.muteStatus=0})});break;case 3:dsf.layer.confirm({message:"是否结束会议",confirmButtonText:"是",cancelButtonText:"否"},function(){dsf.http.post("fn/vedioMeeting/meetingDismiss?meetingRoom=".concat(e.meetingNum))},function(){});break;case 4:dsf.layer.confirm({message:"是否挂断此人",confirmButtonText:"是",cancelButtonText:"否"},function(){dsf.http.post("fn/vedioMeeting/kickPeople",{meetingRoom:e.meetingNum,id:e.bySelectPerson.id,type:e.bySelectPerson.type,participantNumber:e.bySelectPerson.participantNumber}).then(function(t){200==t.data.code&&(e.init(),e.showPop=!1)})},function(){})}},allSilent:function(){var e=this;dsf.http.post("fn/vedioMeeting/allSilence?meetingRoom=".concat(this.meetingNum)).then(function(t){200==t.data.code&&e.personList.forEach(function(t){return t.muteStatus=1})})}}},n=(0,i(51900).Z)(e,function(){var i=this,n=i._self._c;return n("div",[n("div",{staticClass:"center flex"},[i.identity?i._e():[n("span",[i._v("已入会 ("+i._s(i.personList.length)+")")]),i._v(" "),n("button",{on:{click:function(t){i.showPop2=!0}}},[i._v("主持会议")])],i._v(" "),i.identity?[n("span",[i._v("参会者")]),i._v(" "),n("div",[n("button",{staticClass:"identityBtn",on:{click:function(t){return i.allSilent()}}},[i._v("全部静音")]),i._v(" "),n("button",{staticClass:"identityBtn",on:{click:function(t){return i.showPopList(0)}}},[i._v("更多")])])]:i._e()],2),i._v(" "),i.identity?n("div",{staticClass:"identity flex"},[n("span",[i._v("已入会 ("+i._s(i.personList.length)+")")])]):i._e(),i._v(" "),i._l(i.personList,function(e,t){return n("div",{key:t,staticClass:"footer"},[n("div",{staticClass:"footer-list flex"},[n("div",{staticClass:"footer-left flex_center"},[n("svg",{staticClass:"icon",attrs:{t:"1663146484780",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1612",width:"28",height:"28"}},[n("path",{attrs:{d:"M512.010745 1022.082324c-282.335297 0-511.220241-228.798986-511.220241-511.036046C0.790504 228.798986 229.675448 0 512.010745 0c282.312784 0 511.198751 228.798986 511.198751 511.046279C1023.208473 793.285385 794.322505 1022.082324 512.010745 1022.082324zM512.010745 95.826486c-229.385341 0-415.371242 185.884594-415.371242 415.220816 0 107.22714 41.021276 204.6551 107.802238 278.339286 60.140729-29.092595 38.062897-4.88424 116.77254-37.274952 80.539314-33.089629 99.610672-44.639686 99.610672-44.639686l0.776689-76.29464c0 0-30.169113-22.890336-39.543621-94.683453-18.895349 5.426593-25.108864-21.988804-26.237571-39.429011-1.001817-16.863063-10.926864-69.487607 12.105712-64.739467-4.714372-35.144428-8.094352-66.844407-6.417153-83.633792 5.763261-58.938344 62.97324-120.518864 151.105486-125.017318 103.665011 4.486174 144.737452 66.028832 150.500713 124.9682 1.680269 16.800641-2.028193 48.511877-6.739495 83.594907 23.025413-4.686742 13.028735 47.861054 11.901051 64.726164-1.028423 17.440208-7.394411 44.756343-26.208918 39.34203-9.42158 71.79107-39.593763 94.498234-39.593763 94.498234l0.725524 75.924203c0 0 19.070334 10.788717 99.609649 43.892673 78.70862 32.387641 56.605206 9.609869 116.77561 38.765909 66.75231-73.686233 107.772562-171.101913 107.772562-278.339286C927.356404 281.712103 741.398132 95.826486 512.010745 95.826486z","p-id":"1613",fill:"#bfbfbf"}})]),i._v(" "),n("div",[n("span",[i._v(i._s(e.name))])])]),i._v(" "),n("div",{staticClass:"footer-right flex_center"},[n("div",{on:{click:function(t){return i.converMic(e,e.muteStatus)}}},[n("svg",{directives:[{name:"show",rawName:"v-show",value:i.identity&&!e.muteStatus,expression:"identity && !item.muteStatus"}],staticClass:"icon",attrs:{t:"1663146662073",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2165",width:"21",height:"21"}},[n("path",{attrs:{d:"M896 490.666667a362.346667 362.346667 0 0 1-341.333333 362.046666V938.666667h192a21.333333 21.333333 0 0 1 0 42.666666H320a21.333333 21.333333 0 0 1 0-42.666666h192v-85.953334A362.366667 362.366667 0 0 1 170.666667 490.666667a21.333333 21.333333 0 0 1 42.666666 0c0 176.446667 143.553333 320 320 320s320-143.553333 320-320a21.333333 21.333333 0 0 1 42.666667 0zM317.113333 582A233.22 233.22 0 0 1 298.666667 490.666667V277.333333a234.666667 234.666667 0 1 1 469.333333 0v213.333334a234.726667 234.726667 0 0 1-450.886667 91.333333zM341.333333 490.666667c0 105.866667 86.133333 192 192 192s192-86.133333 192-192V277.333333c0-105.866667-86.133333-192-192-192S341.333333 171.466667 341.333333 277.333333z",fill:"#2c2c2c","p-id":"2166"}})]),i._v(" "),n("svg",{directives:[{name:"show",rawName:"v-show",value:i.identity&&e.muteStatus,expression:"identity && item.muteStatus"}],staticClass:"icon",attrs:{t:"1663147665367",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2417",width:"21",height:"21"}},[n("path",{attrs:{d:"M874.666667 469.333333a21.333333 21.333333 0 0 0-21.333334 21.333334c0 176.446667-143.553333 320-320 320a318.266667 318.266667 0 0 1-186.82-60.34l61.333334-61.333334A234.606667 234.606667 0 0 0 768 490.666667V328.84l121.753333-121.753333a21.333333 21.333333 0 1 0-30.173333-30.173334L767.826667 268.666667A234.666667 234.666667 0 0 0 298.666667 277.333333v213.333334a233.966667 233.966667 0 0 0 68.733333 165.933333c2.086667 2.086667 4.22 4.12 6.373333 6.12l-60.273333 60.273333C251.853333 664.626667 213.333333 582.06 213.333333 490.666667a21.333333 21.333333 0 0 0-42.666666 0 361.593333 361.593333 0 0 0 106.22 256.446666q3.126667 3.126667 6.326666 6.173334l-106.3 106.293333a21.333333 21.333333 0 0 0 30.173334 30.173333l108.786666-108.793333A361.266667 361.266667 0 0 0 512 852.713333V938.666667H320a21.333333 21.333333 0 0 0 0 42.666666h426.666667a21.333333 21.333333 0 0 0 0-42.666666H554.666667v-85.953334A362.366667 362.366667 0 0 0 896 490.666667a21.333333 21.333333 0 0 0-21.333333-21.333334z m-149.333334 21.333334c0 105.866667-86.133333 192-192 192a190.786667 190.786667 0 0 1-94.333333-24.826667l286.333333-286.333333z m-384 0V277.333333c0-105.866667 86.133333-192 192-192s192 86.133333 192 192v33.826667l-321.333333 321.333333A191.553333 191.553333 0 0 1 341.333333 490.666667z",fill:"#d81e06","p-id":"2418"}})])]),i._v(" "),i.identity?n("span",{on:{click:function(t){return i.showPopList(1,e)}}},[i._v("更多")]):i._e()])])])}),i._v(" "),n("van-popup",{style:{height:"3rem",width:"80%"},model:{value:i.showPop2,callback:function(t){i.showPop2=t},expression:"showPop2"}},[n("div",{staticClass:"popPass"},[n("div",{staticClass:"__user_box-header"},[n("div",{staticClass:"__title"},[i._v("主持会议")])]),i._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:i.password,expression:"password"}],attrs:{type:"text",maxlength:"6",placeholder:"请输入会控密码"},domProps:{value:i.password},on:{input:function(t){t.target.composing||(i.password=t.target.value)}}}),i._v(" "),n("div",{staticClass:"__user_box-footer"},[n("van-button",{attrs:{type:"default"},on:{click:function(t){i.password="",i.showPop2=!1}}},[i._v("取消")]),i._v(" "),n("van-button",{attrs:{type:"primary"},on:{click:i.confirm}},[i._v("确定")])],1)])]),i._v(" "),n("van-popup",{staticClass:"popList",style:{height:i.popHeight},attrs:{position:"bottom"},model:{value:i.showPop,callback:function(t){i.showPop=t},expression:"showPop"}},[i._l(i.popList,function(e,t){return n("div",{key:t,on:{click:function(t){return i.position(e.index)}}},[i._v(i._s(e.name))])}),i._v(" "),n("div",{on:{click:function(t){i.showPop=!1}}},[i._v("取消")])],2)],2)},[],!1,null,"7979a266",null).exports}}]);