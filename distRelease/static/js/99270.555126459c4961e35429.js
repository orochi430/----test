"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[99270],{21864:function(t,i,e){e.d(i,{Z:function(){return n}});var i={props:{fabItems:{type:Array,default:function(){return[]}},titleKey:{type:String,default:"title"}},data:function(){return{showFab:!1}},directives:{clickOutside:{bind:function(i,e,t){function n(t,i){return!t.el.contains(i.target)&&!i.target.dataset.outside&&(t.binding&&t.binding.value&&"function"==typeof t.binding.value?t.binding.value():void 0)}i.__clickOutside__=n,document.addEventListener("click",function(t){return n({el:i,binding:e},t)}),document.addEventListener("touchend",function(t){return n({el:i,binding:e},t)})},unbind:function(t){document.removeEventListener("click",t.__clickOutside__)}}},methods:{clickOutside:function(){this.showFab=!1},clickMain:function(){1==this.fabItems.length?this.clickItem(this.fabItems[0]):this.showFab=!this.showFab},clickItem:function(t){"go"==t.type?t.url?this.$router.push({path:t.url}):dsf.layer.toast("未传入跳转地址"):this.$emit("clickItem",t)}}},n=(0,e(51900).Z)(i,function(){var e=this,n=e._self._c;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.clickOutside,expression:"clickOutside"}],staticClass:"fab-container"},[0<e.fabItems.length?n("div",{staticClass:"main-btn",on:{click:e.clickMain}},[1<e.fabItems.length?n("transition",{attrs:{name:"change",mode:"out-in"}},[e.showFab?n("div",{key:"open"},[n("van-icon",{attrs:{name:"cross"}})],1):n("div",{key:"close"},[n("van-icon",{attrs:{name:"ellipsis"}})],1)]):n("i",{staticClass:"iconfont",class:e.fabItems[0].icon||"iconjiahao",staticStyle:{"font-size":"var(--font_size_0)","font-weight":"bold"}})],1):e._e(),e._v(" "),1<e.fabItems.length?n("transition",{attrs:{name:"fade"}},[e.showFab?n("div",{staticClass:"fab-btns",on:{click:function(t){e.showFab=!e.showFab}}},e._l(e.fabItems,function(i,t){return n("div",{key:t,staticClass:"dsf-fab-item",on:{click:function(t){return e.clickItem(i)}}},[i.icon?n("i",{staticClass:"iconfont",class:i.icon}):e._e(),e._v(" "),n("span",[e._v(e._s(i[e.titleKey]))])])}),0):e._e()]):e._e()],1)},[],!1,null,"75ba6501",null).exports},99270:function(t,i,e){e.r(i),e.d(i,{default:function(){return s}});var n=e(5044),i={components:{dsfFab:e(21864).Z},data:function(){return{addBtn:[{icon:"iconjiahao",title:"写信",type:"go",url:"/jiangsuyancaoMailEdit",action:""}],list:[],loading:!1,finished:!1,refreshing:!1,finishedTips:"",page:1}},created:function(){var t="邮箱列表";switch(this.$route.query.type){case"0":t="收件箱";break;case"1":t="发件箱";break;case"2":t="草稿箱";break;case"3":t="垃圾箱"}dsf.url.setTitle(t)},methods:{onLoad:function(){var e=this;this.refreshing&&(this.list=[],this.refreshing=!1),dsf.http.post("fn/mail/list",{type:this.$route.query.type,page:this.page,limit:15}).then(function(t){var i;200==t.data.code?(e.page+=1,(i=e.list).push.apply(i,(0,n.Z)(t.data.data)),e.list.length!=t.data.total&&0!=t.data.data.length||(e.finished=!0,e.finishedTips="没有更多了")):(e.finished=!0,dsf.layer.toast(t.data.message))}).catch(function(t){t.message;e.finished=!0}).finally(function(){e.loading=!1})},onRefresh:function(){this.finished=!1,this.loading=!0,this.list=[],this.page=1,this.onLoad()}}},s=(0,e(51900).Z)(i,function(){var e=this,n=e._self._c;return n("div",{staticStyle:{"margin-top":"0.2rem"}},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":e.finishedTips},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[0<e.list.length?e._l(e.list,function(i,t){return n("div",{key:t,staticClass:"mail",on:{click:function(t){return e.$router.push("/jiangsuyancaoMailDetail?id=".concat(i.id,"&type=").concat(e.$route.query.type))}}},[0==i.status?n("span",{staticClass:"status"}):e._e(),e._v(" "),n("div",{staticStyle:{flex:"1",overflow:"hidden"}},[n("div",{staticClass:"email flex jb ac"},[n("span",{staticClass:"elps"},[e._v(e._s(0==e.$route.query.type?i.sender:i.recipient))]),e._v(" "),n("span",{staticClass:"sub-font",staticStyle:{"flex-shrink":"0"}},[e._v(e._s(i.createTime))])]),e._v(" "),n("div",{staticClass:"title elps"},[e._v(e._s(i.title||"(无主题)"))]),e._v(" "),n("div",{staticClass:"elps",staticStyle:{color:"#999"}},[e._v(e._s(i.content||"(无内容)"))])])])}):e._e(),e._v(" "),e.list.length||e.loading?e._e():n("commonempty")],2)],1),e._v(" "),n("div"),e._v(" "),n("dsf-fab",{attrs:{"fab-items":e.addBtn}})],1)},[],!1,null,"160e23a5",null).exports}}]);