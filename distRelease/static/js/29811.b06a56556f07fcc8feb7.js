"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[29811],{79128:function(e,t,a){a.r(t);var n=a(66250),E=a(33453),l=a.n(E),E=a(73473),s=a.n(E),E=a(79529),C=a.n(E),c=a(25108),E={};function u(e,t,a,n){"project"==e?t.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows.forEach(function(e){n.$set(e,"220519112844EVzjXP7jUJlVKmc5kFh",{value:"",text:""}),n.$set(e,"220513201635mvLQr5jrPrTngcmMXhU",{value:"",text:""}),n.$set(e,"220513201809v9TGFYMGOirhYbOfNJP",{value:"",text:""}),n.$set(e,"220513201908F1JxdmM6Vc1gAhxOvAa",{value:"",text:""}),n.$set(e["c-res-space-009"],"value","")}):"building"==e?(n.$set(t.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows[a.subFormIndex],"220513201809v9TGFYMGOirhYbOfNJP",{value:"",text:""}),n.$set(t.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows[a.subFormIndex],"220513201908F1JxdmM6Vc1gAhxOvAa",{value:"",text:""}),n.$set(t.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows[a.subFormIndex]["c-res-space-009"],"value","")):"floor"==e&&(n.$set(t.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows[a.subFormIndex],"220513201908F1JxdmM6Vc1gAhxOvAa",{value:"",text:""}),n.$set(t.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows[a.subFormIndex]["c-res-space-009"],"value",""))}E.initHandle=function(R,e,i){i.pk||(i.$set(i.formData.main,"B0035",{value:i.$route.query.fid}),dsf.http.post("fn/customerLeadInfoController/selectCustomerLeadInformationById",{pk:i.$route.query.fid}).then(function(e){var t,a,n,E,s,o,r,u;"success"===e.data.type&&(e=e.data.data,i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-023",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-023_value"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-022",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-022_value"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-024",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-024_value"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-007",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-007_value"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-016",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-016_value"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-008",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-008_value"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-017",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-017_value"],text:e["C-RQ-SPACE-REQUIREMENT-PROCESS-017_text"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-021",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-021_value"],text:e["C-RQ-SPACE-REQUIREMENT-PROCESS-021_text"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-025",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-025_value"],text:e["C-RQ-SPACE-REQUIREMENT-PROCESS-025_text"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-009",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-009_value"],text:e["C-RQ-SPACE-REQUIREMENT-PROCESS-009_text"]}),i.$set(i.formData.main,"C-RQ-SPACE-REQUIREMENT-PROCESS-002",{value:e["C-RQ-SPACE-REQUIREMENT-PROCESS-002_value"],text:e["C-RQ-SPACE-REQUIREMENT-PROCESS-002_text"]}),t=R.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows,a=R.multinfos["220522125031I4f6W9rRsZ2SoRrLM1t"].rows,n=R.multinfos["220522125021TE1DVHzgnvmI5BigFn0"].rows,E=R.multinfos["220501153547qw43AZvDPsYnhAQVz1p"].rows,s=e.childInfo["2205201458207jgRwGliGFXqgs3kFAG"],o=e.childInfo["220522125031I4f6W9rRsZ2SoRrLM1t"],r=e.childInfo["220522125021TE1DVHzgnvmI5BigFn0"],u=e.childInfo["220501153547qw43AZvDPsYnhAQVz1p"],t.forEach(function(e,t){i.$set(e,"220519112844EVzjXP7jUJlVKmc5kFh",{value:s[t].space_name,text:s[t].space_name_text}),i.$set(e["c-res-space-009"],"value",s[t].max_area),i.$set(e,"220513201635mvLQr5jrPrTngcmMXhU",{value:s[t].build_name,text:s[t].build_name_text}),i.$set(e,"220513201809v9TGFYMGOirhYbOfNJP",{value:s[t].floor_name,text:s[t].floor_name_text}),i.$set(e,"220513201908F1JxdmM6Vc1gAhxOvAa",{value:s[t].spares_space_namece_name,text:s[t].spares_space_namece_name_text})}),a.forEach(function(e,t){i.$set(e,"C-JYTA-0009",{value:o[t].jyta_catagory,text:o[t].jyta_catagory_text}),i.$set(e,"C-JYTA-0061",{value:o[t].gksx_value,text:o[t].gksx_text}),i.$set(e,"C-JYTA-0062",{value:o[t].gknr_value,text:o[t].gknr_text}),i.$set(e,"C-JYTA-0023",{value:o[t].jssj})}),n.forEach(function(e,t){i.$set(e.B0051,"value",r[t].main_handle_unit),i.$set(e["C-CONTACT-0008"],"value",r[t].tel)}),E.forEach(function(e,t){i.$set(e,"C-RQ-SPACE-REQUIREMENT-ITEM-024",{value:u[t].require_type,text:u[t].require_type_text}),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-003"],"value",u[t].rent_require_area_min),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-004"],"value",u[t].rent_require_area_min),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-005"],"value",u[t].rent_require_budget_min),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-006"],"value",u[t].rent_require_budget_max),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-008"],"value",u[t].rent_require_start_date),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-025"],"value",u[t].intention_time),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-017"],"value",u[t].decoration_require_level),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-016"],"value",u[t].visitior_from),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-023"],"value",u[t].inquiry_type),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-022"],"value",u[t].district_txt),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-019"],"value",u[t].intention_level),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-026"],"value",u[t].start_visit_date),i.$set(e["C-RQ-SPACE-REQUIREMENT-ITEM-027"],"value",u[t].expect_signing_date)}))}));var t=e.controls.find(function(e){return"2205201458207jgRwGliGFXqgs3kFAG"==e.metaId}),a=("1"!=R.main["C-RQ-SPACE-REQUIREMENT-PROCESS-021"].value&&(t.show=0),e.controls.find(function(e){return"lyxPU4ZDrZgxy8AZ"==e.controlId})),n=(a.show=0,e.controls.find(function(e){return"0FDb8Vba1Pj0TZ9d"==e.controlId})),E=(n.show=0,R.multinfos["220501153547qw43AZvDPsYnhAQVz1p"].rows),E=(E.length&&"1"==E[0]["C-RQ-SPACE-REQUIREMENT-ITEM-016"].value&&(a.show=1,n.show=1),R.main["C-RQ-SPACE-REQUIREMENT-PROCESS-002"].text),s=R.multinfos["220501153547qw43AZvDPsYnhAQVz1p"].rows[0]["C-RQ-SPACE-REQUIREMENT-ITEM-016"].text,o=e.controls.find(function(e){return"attach-18"==e.metaId}),r=e.controls.find(function(e){return"attach-19"==e.metaId});o.show="核心商务书"==E?1:0,r.show="渠道介绍"==s?1:0,i.$bus.on("inputRadio",function(e){"C-RQ-SPACE-REQUIREMENT-PROCESS-021"==e.metaData.metaId&&("1"==e.value?t.show=1:t.show=0)}),i.$bus.on("checkVal",function(e){if("C-RQ-SPACE-REQUIREMENT-ITEM-016"==e.metaData.metaId&&("1"==e.value?(a.show=1,n.show=1):(a.show=0,n.show=0)),"C-RQ-SPACE-REQUIREMENT-ITEM-019"==e.metaData.metaId){var t="0%";switch(e.value){case"1":t="10%";break;case"2":t="30%";break;case"3":t="50%";break;case"4":t="70%";break;case"5":t="90%";break;case"6":t="100%"}i.$set(R.multinfos["220501153547qw43AZvDPsYnhAQVz1p"].rows[e.subFormIndex]["C-RQ-SPACE-REQUIREMENT-ITEM-020"],"value",t.replace("%",""))}"C-RQ-SPACE-REQUIREMENT-PROCESS-002"==e.metaData.metaId&&("核心商务书"==e.text?o.show=1:o.show=0),"C-RQ-SPACE-REQUIREMENT-ITEM-016"==e.metaData.metaId&&("渠道介绍"==e.text?r.show=1:r.show=0)}),i.$bus.on("selectUserBus",function(E){"C-JYTA-0061"==E.metaData.metaId&&E.value&&(window["C-JYTA-0062_beforeOpenCode"]=function(e,t){var a=t.split("?")[0]+"?companyId="+E.value;return a=t.split("?")[1]?a+"&"+t.split("?")[1]:a}),"C-RQ-SPACE-REQUIREMENT-PROCESS-025"==E.metaData.metaId&&E.value&&(u("project",R,E,i),window["220519112844EVzjXP7jUJlVKmc5kFh_beforeOpenCode"]=function(e,t){var a=t.split("?")[0]+"?projectId="+E.value,n=[];return t.split("?")[1]&&(t.split("?")[1].split("&").forEach(function(e){"projectId"!=e.split("=")[0]&&n.push(e)}),a=a+"&"+n.join("&")),a},window["220513201635mvLQr5jrPrTngcmMXhU_beforeOpenCode"]=function(e,t){var a=t.split("?")[0]+"?projectId="+E.value,n=[];return t.split("?")[1]&&(t.split("?")[1].split("&").forEach(function(e){"projectId"!=e.split("=")[0]&&n.push(e)}),a=a+"&"+n.join("&")),a}),"220513201635mvLQr5jrPrTngcmMXhU"==E.metaData.metaId&&E.value&&(u("building",R,E,i),window["220513201809v9TGFYMGOirhYbOfNJP_beforeOpenCode"]=function(e,t){var a=t.split("?")[0]+"?buildingId="+E.value,n=[];return t.split("?")[1]&&(t.split("?")[1].split("&").forEach(function(e){"buildingId"!=e.split("=")[0]&&n.push(e)}),a=a+"&"+n.join("&")),a}),"220513201809v9TGFYMGOirhYbOfNJP"==E.metaData.metaId&&E.value&&(u("floor",R,E,i),window["220513201908F1JxdmM6Vc1gAhxOvAa_beforeOpenCode"]=function(e,t){var a=t.split("?")[0]+"?floorId="+E.value,n=[];return t.split("?")[1]&&(t.split("?")[1].split("&").forEach(function(e){"floorId"!=e.split("=")[0]&&n.push(e)}),a=a+"&"+n.join("&")),a}),"220513201908F1JxdmM6Vc1gAhxOvAa"==E.metaData.metaId&&E.value&&dsf.http.post("fn/customerLeadInfoController/getArea",{spaceId:E.value}).then(function(e){e=e.data;"success"==e.type&&i.$set(R.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows[E.subFormIndex]["c-res-space-009"],"value",e.data.area)})})},E.saveFilter=function(u,R,i){return new(s())(function(){var a=(0,n.Z)(l().mark(function e(t,a){var n,E,s,o,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.multinfos["220522125031I4f6W9rRsZ2SoRrLM1t"].rows,E=u.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows,0<n.length&&(s=n[0]["C-JYTA-0061"].text,n.forEach(function(e,t){0!=t&&e["C-JYTA-0061"].text!=s&&a("当前客户渠道信息存在多家公司，无法保存")})),o=[],E.forEach(function(e){return"Deleted"!=e.action?o.push(e["220513201908F1JxdmM6Vc1gAhxOvAa"].value):""}),function(e){var t,a={};for(t in e){if(a[e[t]])return 1;a[e[t]]=!0}}(o)&&a("当前客户房源信息存在重复"),e.prev=6,r=u.multinfos["220501153547qw43AZvDPsYnhAQVz1p"].rows,1!=u.main["C-RQ-SPACE-REQUIREMENT-PROCESS-021"].value);else if(0==u.multinfos["2205201458207jgRwGliGFXqgs3kFAG"].rows.filter(function(e){return"Deleted"!=e.action}).length)return a("意向房源子表必填,至少存在一条数据!"),e.abrupt("return");e.next=13;break;case 13:dsf.http.post("fn/commonTool/getIdByTableName",{tableName:"rq_space_requirement_item",dbName:"ImBzServiceConnection"}).then(function(e){var a,n=e.data.data.id;i.pk?(a=0,r.forEach(function(e,t){"Added"==e.action&&(i.$set(e["220501153547qw43AZvDPsYnhAQVz1p"],"value",C()(n)+a),a++)})):r.forEach(function(e,t){i.$set(e["220501153547qw43AZvDPsYnhAQVz1p"],"value",C()(n)+t)}),i.pk?t():dsf.http.post("fn/commonTool/getIdByTableName",{tableName:"rq_space_requirement_process",dbName:"ImBzServiceConnection"}).then(function(e){e=e.data,dsf.http.post("fn/UpdateGNRInfoController/updateInfo",{moduleId:i.moduleId,oldId:i.formParams.pk,newId:e.data.id}).then(function(e){e=e.data;c.log("fn/UpdateGNRInfoController/updateInfo",e)}),e=e.data.id;i.pk=e,i.formParams.pk=e,i.$set(R.parameters,"pk",e),i.$set(u.main,"A0001",{value:e}),t()})}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),t();case 19:case"end":return e.stop()}},e,null,[[6,16]])}));return function(e,t){return a.apply(this,arguments)}}())},t.default=E}}]);