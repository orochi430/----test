"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[50787],{31069:function(e,t,n){n.r(t);var f=n(66250),r=n(33453),x=n.n(r),r=n(73473),a=n.n(r),r=n(79529),p=n.n(r),r=n(62207),d=n.n(r),l=n(90541),u=n(25108),r={};function s(){return(s=(0,f.Z)(x().mark(function e(u,s){var i,o,c,t,n,r,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o=i=0,t="",n={},r=new Date(u.substring(0,10)).getTime()-new Date(s.substring(0,10)).getTime(),r=p()(r/1e3/60/60/24)+1,s.substring(0,10)==u.substring(0,10)){e.next=30;break}a=1;case 9:if(!(a<=r)){e.next=28;break}if(t){e.next=15;break}return e.next=13,h(s.substring(0,10)+" 23:59",s).then(function(){var t=(0,f.Z)(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=t).IsHoliday?(o=n.SC.toFixed(1),i=n.Hours,c=n.Hours,e.next=9):e.next=7;break;case 7:return e.next=9,m(s,1).then(function(e){o=d()(e.SC)+d()(o),i=e.Days+i});case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());case 13:e.next=23;break;case 15:if(t.substring(0,10)==u.substring(0,10))return e.next=18,h(u,u.substring(0,10)+" 00:00").then(function(){var t=(0,f.Z)(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=t).IsHoliday?(o=d()(o)+d()(n.SC.toFixed(1)),i+=n.Hours,c+=n.Hours,e.next=9):e.next=7;break;case 7:return e.next=9,b(u,1).then(function(e){o=d()(o)+d()(e.SC),i+=e.Days});case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());e.next=21;break;case 18:return e.abrupt("break",28);case 21:return e.next=23,h(t.substring(0,10)+" 23:59",t.substring(0,10)+" 00:00").then(function(e){e.IsHoliday?(o=d()(o)+d()(e.SC.toFixed(1)),i+=e.Hours,c+=e.Hours):(o=d()(o)+15.5,i+=.5)});case 23:t=new Date(s).getTime()+864e5*a,t=l.Z.date.format(new Date(t),"yyyy/mm/dd hh:ii");case 25:a++,e.next=9;break;case 28:e.next=32;break;case 30:return e.next=32,h(u,s).then(function(){var t=(0,f.Z)(x().mark(function e(t){var n,r,a;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=t).IsHoliday?(c+=n.Hours,o=n.SC.toFixed(1),i=n.Hours,e.next=21):e.next=7;break;case 7:r=s.substring(0,10)+" 08:30",(a=s.substring(0,10)+" 17:00")<=u&&a<=s||u<=r&&s<=r?(o=n.SC.toFixed(1),i=n.Hours,e.next=21):e.next=14;break;case 14:if(u<=a&&s<=r)return e.next=17,h(r,s).then(function(e){o=(n=e).SC.toFixed(1),i=n.Hours});e.next=19;break;case 17:e.next=21;break;case 19:return e.next=21,m(s,0).then(function(){var t=(0,f.Z)(x().mark(function e(t){var n;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,b(u,0).then(function(e){(o=d()(n.SC)+d()(e.SC))<0||0<o&&o<4?i=0:4<=o&&(i=.5)});case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());case 32:return n.Days=i,n.SC=o,n.DaysOff=c,e.abrupt("return",n);case 36:case"end":return e.stop()}},e)}))).apply(this,arguments)}function m(){return i.apply(this,arguments)}function i(){return(i=(0,f.Z)(x().mark(function e(t,n){var r,a,u,s,i;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},u=a=0,s=t.substring(0,10)+" 08:30",i=t.substring(0,10)+" 17:00",t<=s)return e.next=8,h(s,t).then(function(e){a=e.SC.toFixed(1),u=e.Hours});e.next=13;break;case 8:if(1==n)return e.next=11,h(t.substring(0,10)+" 23:59",i).then(function(e){a=d()(a)+d()(e.SC.toFixed(1)),.5<(u+=e.Hours)&&(u=.5)});e.next=11;break;case 11:e.next=21;break;case 13:if(i<=t)return e.next=16,h(t.substring(0,10)+" 23:59",t).then(function(e){a=e.SC.toFixed(1),u=e.Hours});e.next=18;break;case 16:e.next=21;break;case 18:if(1==n)return e.next=21,h(t.substring(0,10)+" 23:59",i).then(function(e){a=e.SC.toFixed(1),u=e.Hours});e.next=21;break;case 21:return r.SC=a,r.Days=u,e.abrupt("return",r);case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(){return o.apply(this,arguments)}function o(){return(o=(0,f.Z)(x().mark(function e(t,n){var r,a,u,s,i;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},u=a=0,s=t.substring(0,10)+" 08:30",i=t.substring(0,10)+" 17:00",t<=s)return e.next=8,h(t,t.substring(0,10)+" 00:00").then(function(e){a=e.SC.toFixed(1),u=e.Hours});e.next=10;break;case 8:e.next=17;break;case 10:if(i<=t)return e.next=13,h(t,i).then(function(e){a=e.SC.toFixed(1),1==n&&(a+=8.5),u=e.Hours});e.next=15;break;case 13:e.next=17;break;case 15:return e.next=17,h(s,t.substring(0,10)+" 00:00").then(function(e){a=e.SC.toFixed(1),u=e.Hours});case 17:return r.SC=a,r.Days=u,e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(){return c.apply(this,arguments)}function c(){return(c=(0,f.Z)(x().mark(function e(t,n){var r,a,u,s;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=new Date(t).getTime(),r=new Date(n).getTime(),a={},u=u-r,isNaN(u)||u<0)return e.abrupt("return",null);e.next=6;break;case 6:return a.Days=p()(u/1e3/60/60/24),a.TotalHours=d()(u/1e3/60/60)+"",a.Hours=a.TotalHours%24,a.SC=a.TotalHours%24,a.TotalMinutes=p()(u/1e3/60),a.Minutes=a.TotalMinutes%60+"",a.TotalSeconds=p()(u/1e3),a.Seconds=a.TotalSeconds%60,a.TotalMilliseconds=u,a.Milliseconds=u%1e3,s=!1,e.next=19,l.Z.http.post("fn/zjdxCommon/checkIsHoliday",{date:t.replace(/\//g,"-")}).then(function(e){e=e.data;"success"==e.type&&(s=e.data.isHodiday)});case 19:return(a.IsHoliday=s)&&1==s?a.Hours<0||0<a.Hours&&a.Hours<4?a.Hours=0:4<=a.Hours&&a.Hours<8?a.Hours=.5:8<=a.Hours&&(a.Hours=1):a.Hours<0||0<a.Hours&&a.Hours<4?a.Hours=0:4<=a.Hours&&(a.Hours=.5),e.abrupt("return",a);case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=(0,f.Z)(x().mark(function e(t,n,r){var a,u;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,(u={}).userId=t.main.A0010.value,u.pk=r.formMeta.parameters.pk,e.next=7,l.Z.http.post("fn/applicationOvertime/getJbsqByUserId",u).then(function(e){e=e.data;"success"==e.type&&e.data.ktxts&&(a=e.data.ktxts)});case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){e=e.replace(/-/g,"/");return Date.parse(e)}r.handle=function(e,t){},r.initHandle=function(n,r,a){u.log("加班申请"),r.controls.find(function(e){return"B0009"==e.metaId})&&(r.controls.find(function(e){return"B0009"==e.metaId}).show=0),r.controls.find(function(e){return"B0010"==e.metaId})&&(r.controls.find(function(e){return"B0010"==e.metaId}).show=0);var e={};e.currentYear=n.main["210619153641sZ5bdxgxgzkTKNvMyFl"].value,e.userId=n.main.A0010.value,e.pk=a.formMeta.parameters.pk,l.Z.http.post("fn/zjdxOfficeInfo/getAddWorkDays",e).then(function(e){u.log(e.data),"200"==e.data.code&&(e=e.data.data.days,a.$set(a.formData.main,"21061116293141xxcrAJQlqLnfzFtEo",{value:e}))}),a.$bus.on("selectDateTime",function(e){"2106111626475BOgJckrMLEPn1e7u13"!=e.metaData.metaId&&"210611162556mFz52xDvgDhxbTwHWbL"!=e.metaData.metaId||(a.formData.main["2106111626475BOgJckrMLEPn1e7u13"].value&&a.formData.main["210611162556mFz52xDvgDhxbTwHWbL"].value?(e=n.main["210611162556mFz52xDvgDhxbTwHWbL"].value.replace(/-/g,"/"),function(){return s.apply(this,arguments)}(n.main["2106111626475BOgJckrMLEPn1e7u13"].value.replace(/-/g,"/"),e).then(function(e){var t=e,e=(!function(){return H.apply(this,arguments)}(n,r,a).then(function(e){e+=t.DaysOff,a.$set(a.formData.main,"220422155820SZUcgdSzbqHnHRXrAyj",{value:e})}),a.$set(a.formData.main,"220424155322BbJScH4uKJMdhgFUhuz",{value:t.DaysOff}),a.$set(a.formData.main,"210611162727RHhoUgYy9OTmz37J3Tn",{value:t.Days}),a.$set(a.formData.main,"220107162859MHh50kHBG02TES3AD9Y",{value:t.SC}),a.formData.main.A0011.value+a.formData.main["210611162556mFz52xDvgDhxbTwHWbL"].value.split(" ")[0]+"的加班申请");a.$set(a.formData.main,"B0001",{value:e})})):a.$set(a.formData.main,"210611162727RHhoUgYy9OTmz37J3Tn",{value:"0"}))})},r.saveFilter=function(n,e,t,r){return new(a())(function(e,t){"save"==r||"send"==r?g(n.main["2106111626475BOgJckrMLEPn1e7u13"].value)<g(n.main["210611162556mFz52xDvgDhxbTwHWbL"].value)?t("开始时间必须早于结束时间"):n.main["210611162727RHhoUgYy9OTmz37J3Tn"].value<.5?t("加班时长不满4小时（半天），无需申报"):e():e()})},t.default=r}}]);