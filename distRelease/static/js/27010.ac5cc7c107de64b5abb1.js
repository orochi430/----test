"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[27010],{71763:function(t,s,i){i.r(s),i.d(s,{default:function(){return l}});var s=[function(){var t=this._self._c;return t("div",{staticClass:"fileIcon"},[t("img",{attrs:{src:i(15146),alt:""}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"fileBody"},[s("div",{staticClass:"fileTitle"},[t._v("共性办公应用功能清单.xlsx")]),t._v(" "),s("div",{staticClass:"filePath"},[s("span",[t._v("群聊：")]),t._v(" "),s("label",[t._v("梦创双杨 /")]),t._v(" "),s("label",[t._v("团队文件 /")]),t._v(" "),s("label",[t._v("测试 /")]),t._v(" "),s("label",[t._v("一体化办公平台开发群")])])])}],e={name:"rencentItem",components:{},props:{},data:function(){return{showItem:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},a=i(51900),e=(0,a.Z)(e,function(){var s=this,t=s._self._c;return t("div",{staticClass:"rencent-item"},[s._m(0),s._v(" "),s._m(1),s._v(" "),t("div",{staticClass:"moreIcon",on:{click:function(t){s.showItem=!0}}},[t("img",{attrs:{src:i(3145),alt:""}})]),s._v(" "),t("van-popup",{attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:s.showItem,callback:function(t){s.showItem=t},expression:"showItem"}},[t("div",{staticClass:"handle-contain"},[t("div",{staticClass:"file-box"},[t("div",{staticClass:"fileIcon"},[t("img",{attrs:{src:i(15146),alt:""}})]),s._v(" "),t("div",{staticClass:"fileBody"},[t("div",{staticClass:"fileTitle"},[s._v("共性办公应用功能清单.xlsx")]),s._v(" "),t("div",{staticClass:"filePath"},[t("span",[s._v("20.6KB · 17:09")])])]),s._v(" "),t("div",{staticClass:"closeIcon",on:{click:function(t){s.showItem=!1}}},[t("img",{attrs:{src:i(63397),alt:""}})])]),s._v(" "),t("div",{staticClass:"handle-list"},[t("div",{staticClass:"handle-box"},[t("div",[t("img",{attrs:{src:i(87294),alt:""}}),s._v(" "),t("p",[t("span",[s._v("转发副本")]),s._v(" "),t("img",{attrs:{src:i(12547),alt:""}})])]),s._v(" "),t("div",[t("img",{attrs:{src:i(62228),alt:""}}),s._v(" "),t("p",[t("span",[s._v("详细信息")]),s._v(" "),t("img",{attrs:{src:i(12547),alt:""}})])]),s._v(" "),t("div",[t("img",{attrs:{src:i(94024),alt:""}}),s._v(" "),t("p",[t("span",[s._v("打开目录")]),s._v(" "),t("img",{attrs:{src:i(12547),alt:""}})])]),s._v(" "),t("div",[t("img",{attrs:{src:i(81203),alt:""}}),s._v(" "),t("p",[t("span",[s._v("清除记录")]),s._v(" "),t("img",{attrs:{src:i(12547),alt:""}})])])])])])])],1)},s,!1,null,"cfc50c42",null).exports,s=i(2319),n=i(25108),e={name:"searchList",components:{RecentItem:e,FileItem:s.Z},data:function(){return{keyword:"",hisList:[],list:[],finished:!1,loading:!1,refreshing:!1,start:1,limit:15,typeList:[],range:0,showSelect:!1,showHis:!0,nodata:!1,fileType:""}},computed:{},watch:{},methods:{getFileTypeList:function(){var i=this;dsf.http.get("fn/cloud/file/getFileSuffixSelect").then(function(t){var s=t.status,t=t.data;n.log(t.data,s),200===s&&t.data&&(t.data.forEach(function(t){t.isSelect=!1}),i.typeList=t.data)}).catch(function(t){t.message}).finally(function(){})},onClickLeft:function(){this.$bus.emit("closeSearchBox")},clearText:function(){this.keyword=""},onSearch:function(){var t;this.keyword&&((t=dsf.util.loadLocalStore("searchHis"))?t.split(",").includes(this.keyword)||(t=this.keyword+","+t,dsf.util.saveToLocalStore("searchHis",t)):dsf.util.saveToLocalStore("searchHis",this.keyword),this.showHis=!1,this.doRefresh())},removeStorage:function(){window.localStorage.removeItem("searchHis"),this.hisList=[]},initSearchList:function(){var t=dsf.util.loadLocalStore("searchHis");t&&(this.hisList=t.split(","))},onLoad:function(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});var i=this;i.nodata=!1,dsf.http.post("fn/cloud/file/fileSearch",{fileName:this.keyword,fileType:this.fileType,pageNo:this.start,pageSize:this.limit},{headers:{"Content-Type":"application/json"}}).then(function(t){var s=t.status,t=t.data;n.log(t,s),200===s?(t.data||(t.data=[]),0==t.data.length&&1==i.start&&(i.nodata=!0),t&&t.data&&0<t.data.length&&(t.data.forEach(function(t){t.lastUpdateTime=t.lastUpdateTime?moment(new Date(t.lastUpdateTime)).calendar():""}),i.list=i.list.concat(t.data)),t.data.length<i.limit?i.finished=!0:i.start+=1):(i.finished=!0,i.nodata=!0)}).catch(function(t){t.message;i.finished=!0,i.nodata=!0}).finally(function(){i.loading=!1,i.refreshing=!1,i.$toast.clear()})},doRefresh:function(t){t&&(this.keyword=t),this.start=1,this.list=[],this.finished=!1,this.loading=!0,this.showHis=!1,this.onLoad()},selectItem:function(t){var i=this;this.timer&&(dsf.layer.toast("请勿重复操作！"),window.clearInterval(this.timer),this.timer=null),this.timer=setTimeout(function(){i.$set(t,"isSelect",!t.isSelect);var s=[];i.typeList.map(function(t){t.isSelect&&s.push(t.value)}),i.fileType=0<s.length?s.join(","):"",i.doRefresh(),window.clearInterval(i.timer),i.timer=null},1e3)},setRange:function(t){this.range=t}},created:function(){},mounted:function(){this.initSearchList(),this.getFileTypeList()},destroyed:function(){}},l=(0,a.Z)(e,function(){var e=this,a=e._self._c;return a("div",{staticClass:"searchList"},[a("van-search",{attrs:{placeholder:"在当前企业中搜索"},on:{search:e.doRefresh,clear:e.clearText},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),e.showHis?a("div",{staticClass:"his"},[0<e.hisList.length?a("div",{staticClass:"recentSearch"},[a("div",{staticClass:"rs_title"},[a("span",[e._v("最近搜索")]),e._v(" "),a("van-icon",{attrs:{name:"delete-o"},on:{click:e.removeStorage}})],1),e._v(" "),0<e.hisList.length?a("div",{staticClass:"rs_list"},e._l(e.hisList,function(s,t){return a("span",{key:t,on:{click:function(t){return e.doRefresh(s)}}},[e._v(e._s(s))])}),0):e._e()]):e._e(),e._v(" "),0==e.hisList.length?a("div",{staticClass:"noData"},[a("img",{attrs:{src:i(17370)}}),e._v(" "),a("span",[e._v("输入关键词快速搜索")])]):e._e()]):e._e(),e._v(" "),e.showHis?e._e():a("div",{staticClass:"fileList"},[a("div",{staticClass:"listType"},[a("div",{staticClass:"types"},[a("div",{staticClass:"items"},[a("label",[e._v("类型：")]),e._v(" "),a("p",e._l(e.typeList,function(s,i){return a("span",{key:"file"+i,class:{active:s.isSelect},on:{click:function(t){return e.selectItem(s,i)}}},[e._v(e._s(s.name))])}),0)])])])]),e._v(" "),e.showHis?e._e():a("div",{staticClass:"lists"},[0!=e.list.length||e.loading?e._e():a("commonempty",{attrs:{description:"暂无文件"}}),e._v(" "),a("van-pull-refresh",{attrs:{disabled:e.finished},on:{refresh:e.doRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{finished:e.finished,"finished-text":""},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,function(t,s){return a("file-item",{key:s,attrs:{item:t},on:{doRefresh:e.doRefresh}})}),1)],1)],1)],1)},[],!1,null,"0b3d991e",null).exports},17370:function(t,s,i){t.exports=i.p+"static/img/img_nodata.55b7d39..png"}}]);