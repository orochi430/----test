"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[28741],{3105:function(a,t,o){o.r(t);var e=o(8450),r=o.n(e),d=o(90541),i=o(25108),e={link:function(a,t,o,e,n){e.$router.push({path:"/commonForm/".concat(t,"/").concat(n["G_COMUSER_PLACE.C-COMUSER-PLACE-0001"]),query:{listId:a,method:"edit"}})},createRow:function(a,t){var o="",e=d.Z.layer.loading();function n(){t.$router.push({path:"/commonForm/220319194130l6pirMZJe74yeqvID8I",query:{specialSaveObj:r()({placeIds:o}),fid:JSON.parse(t.$route.query.secQuery).communityId}})}d.Z.http.post("ctrl/communityUser/placeList",{communityId:JSON.parse(t.$route.query.secQuery).communityId}).then(function(a){d.Z.layer.closeLoading(e),200==a.data.code&&(0==a.data.data.length?d.Z.layer.toast("请联系单位管理员维护场所管理权限"):1==a.data.data.length?(o=a.data.data[0].value,n()):t.$refs.ckDialog.show(a.data.data,"选择场所","value","name").then(function(a){o=a.join(","),n()}).catch(function(){d.Z.layer.toast("请选择场所")}))})},delCommunityUsers:function(a,o){d.Z.layer.confirm({message:"是否确认删除",confirmButtonText:"确认"},function(){var t=d.Z.layer.loading();d.Z.http.post("ctrl/communityUser/delCommunityUsers",{ids:a.dataValue["G_COMUSER_PLACE.A0001"]}).then(function(a){d.Z.layer.closeLoading(t),200==a.data.code&&(d.Z.layer.toast("删除成功"),o.onRefresh())})})},excelImport:function(a,o){var e="",n="",r=d.Z.layer.loading();function c(){o.$dialog.confirm({showConfirmButton:!1,showCancelButton:!1,closeOnClickOverlay:!0,message:'<div id="excelImport">仅导入人员</div>\n      <div id="imageImport">仅导入照片</div>\n      <div id="zipImport">导入人员及照片</div>'}).then(function(){}).catch(function(){}),o.$nextTick(function(){document.getElementById("excelImport").onclick=function(){o.$refs.uploader.afterRead=function(a){o.$toast.loading({message:"上传中...",forbidClick:!0,duration:0,overlay:!0}),d.Z.http.upload("ctrl/exPo/communityUser/excelImport?fid=".concat(JSON.parse(o.$route.query.secQuery).communityId,"&placeIds=").concat(e,"&placeText=").concat(n),{},a).then(function(a){200==a.data.code?(i.log(a),o.$toast.clear(),o.$dialog.close(),a.data.data?d.Z.layer.confirm({message:"".concat(a.data.data.total?"总记录数："+a.data.data.total:"","\n").concat(a.data.data.importCount?"导入总数:"+a.data.data.importCount:"","\n").concat(a.data.data.dupCardNo?"重复身份证号：:"+a.data.data.dupCardNo:""),confirmButtonText:"确认",showCancelButton:!1},function(){o.onRefresh()}):(o.$toast("导入成功"),o.onRefresh())):a.data.data&&a.data.data.error?(o.$toast.clear(),d.Z.layer.confirm({message:"".concat(a.data.data.mobilerror?"手机号格式不正确名单如下：\n"+a.data.data.mobilerror:"","\n").concat(a.data.data.idNumberError?"身份证号格式不正确名单如下:\n"+a.data.data.idNumberError:"","\n").concat(a.data.data.requiredError?"姓名或身份证未填写行号如下:\n"+a.data.data.requiredError:"").concat(a.data.data.imageSuccessCount?"图片导入成功数:"+a.data.data.imageSuccessCount:""),confirmButtonText:"确认",showCancelButton:!1})):o.$toast(a.data.message.replace(/<br\/>/gm,"\n"))}).error(function(a){o.$toast.clear(),o.$toast("导入失败"),i.log(a)})},i.log(o.$refs.uploader),o.$refs.uploader.chooseFile()},document.getElementById("imageImport").onclick=function(){o.$refs.uploader.afterRead=function(a){o.$toast.loading({message:"上传中...",forbidClick:!0,duration:0,overlay:!0}),d.Z.http.upload("ctrl/exPo/communityUser/imageImport?fid=".concat(JSON.parse(o.$route.query.secQuery).communityId,"&placeIds=").concat(e,"&placeText=").concat(n),{},a).then(function(a){200==a.data.code?(i.log(a),o.$toast.clear(),o.$dialog.close(),a.data.data?d.Z.layer.confirm({message:"".concat(a.data.data.imageTotalCount?"图片总数:"+a.data.data.imageTotalCount:"","\n").concat(a.data.data.imageSuccessCount?"图片导入成功数:"+a.data.data.imageSuccessCount:"","\n").concat(a.data.data.imageImportError||""),confirmButtonText:"确认",showCancelButton:!1},function(){o.onRefresh()}):(o.$toast("导入成功"),o.onRefresh())):a.data.data&&a.data.data.error?(o.$toast.clear(),d.Z.layer.confirm({message:"".concat(a.data.data.mobilerror?"手机号格式不正确名单如下：\n"+a.data.data.mobilerror:"","\n").concat(a.data.data.idNumberError?"身份证号格式不正确名单如下:\n"+a.data.data.idNumberError:"","\n").concat(a.data.data.requiredError?"姓名或身份证未填写行号如下:\n"+a.data.data.requiredError:"").concat(a.data.data.imageSuccessCount?"图片导入成功数:"+a.data.data.imageSuccessCount:""),confirmButtonText:"确认",showCancelButton:!1})):o.$toast(a.data.message.replace(/<br\/>/gm,"\n"))}).error(function(a){o.$toast.clear(),o.$toast("导入失败"),i.log(a)})},i.log(o.$refs.uploader),o.$refs.uploader.chooseFile()},document.getElementById("zipImport").onclick=function(){o.$refs.uploader.afterRead=function(a){o.$toast.loading({message:"上传中...",forbidClick:!0,duration:0,overlay:!0}),d.Z.http.upload("ctrl/exPo/communityUser/zipImport?fid=".concat(JSON.parse(o.$route.query.secQuery).communityId,"&placeIds=").concat(e,"&placeText=").concat(n),{},a).then(function(a){200==a.data.code?(i.log(a),o.$toast.clear(),o.$dialog.close(),a.data.data?d.Z.layer.confirm({message:"".concat(a.data.data.total?"总记录数："+a.data.data.total:"","\n").concat(a.data.data.importCount?"导入总数:"+a.data.data.importCount:"","\n").concat(a.data.data.imageTotalCount?"图片总数:"+a.data.data.imageTotalCount:"","\n").concat(a.data.data.imageSuccessCount?"图片导入成功数:"+a.data.data.imageSuccessCount:"","\n").concat(a.data.data.dupCardNo?"重复身份证号：:"+a.data.data.dupCardNo:""),confirmButtonText:"确认",showCancelButton:!1},function(){o.onRefresh()}):(o.$toast("导入成功"),o.onRefresh())):a.data.data&&a.data.data.error?(o.$toast.clear(),d.Z.layer.confirm({message:"".concat(a.data.data.mobilerror?"手机号格式不正确名单如下：\n"+a.data.data.mobilerror:"","\n").concat(a.data.data.idNumberError?"身份证号格式不正确名单如下:\n"+a.data.data.idNumberError:"","\n").concat(a.data.data.requiredError?"姓名或身份证未填写行号如下:\n"+a.data.data.requiredError:"").concat(a.data.data.imageSuccessCount?"图片导入成功数:"+a.data.data.imageSuccessCount:""),confirmButtonText:"确认",showCancelButton:!1})):o.$toast(a.data.message.replace(/<br\/>/gm,"\n"))}).error(function(a){o.$toast.clear(),o.$toast("导入失败"),i.log(a)})},i.log(o.$refs.uploader),o.$refs.uploader.chooseFile()}})}d.Z.http.post("ctrl/communityUser/placeList",{communityId:JSON.parse(o.$route.query.secQuery).communityId}).then(function(t){d.Z.layer.closeLoading(r),200==t.data.code&&(0==t.data.data.length?d.Z.layer.toast("请联系单位管理员维护场所管理权限"):1==t.data.data.length?(e=t.data.data[0].value,n=t.data.data[0].name,c()):o.$refs.ckDialog.show(t.data.data,"选择场所","value","name").then(function(a){e=a.join(","),n=t.data.data.filter(function(a){return e.includes(a.value)}).map(function(a){return a.name}).join(","),c()}).catch(function(){d.Z.layer.toast("请选择场所")}))})}};t.default=e}}]);