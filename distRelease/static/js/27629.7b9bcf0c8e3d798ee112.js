"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[27629],{21864:function(t,e,n){n.d(e,{Z:function(){return i}});var e={props:{fabItems:{type:Array,default:function(){return[]}},titleKey:{type:String,default:"title"}},data:function(){return{showFab:!1}},directives:{clickOutside:{bind:function(e,n,t){function i(t,e){return!t.el.contains(e.target)&&!e.target.dataset.outside&&(t.binding&&t.binding.value&&"function"==typeof t.binding.value?t.binding.value():void 0)}e.__clickOutside__=i,document.addEventListener("click",function(t){return i({el:e,binding:n},t)}),document.addEventListener("touchend",function(t){return i({el:e,binding:n},t)})},unbind:function(t){document.removeEventListener("click",t.__clickOutside__)}}},methods:{clickOutside:function(){this.showFab=!1},clickMain:function(){1==this.fabItems.length?this.clickItem(this.fabItems[0]):this.showFab=!this.showFab},clickItem:function(t){"go"==t.type?t.url?this.$router.push({path:t.url}):dsf.layer.toast("未传入跳转地址"):this.$emit("clickItem",t)}}},i=(0,n(51900).Z)(e,function(){var n=this,i=n._self._c;return i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:n.clickOutside,expression:"clickOutside"}],staticClass:"fab-container"},[0<n.fabItems.length?i("div",{staticClass:"main-btn",on:{click:n.clickMain}},[1<n.fabItems.length?i("transition",{attrs:{name:"change",mode:"out-in"}},[n.showFab?i("div",{key:"open"},[i("van-icon",{attrs:{name:"cross"}})],1):i("div",{key:"close"},[i("van-icon",{attrs:{name:"ellipsis"}})],1)]):i("i",{staticClass:"iconfont",class:n.fabItems[0].icon||"iconjiahao",staticStyle:{"font-size":"var(--font_size_0)","font-weight":"bold"}})],1):n._e(),n._v(" "),1<n.fabItems.length?i("transition",{attrs:{name:"fade"}},[n.showFab?i("div",{staticClass:"fab-btns",on:{click:function(t){n.showFab=!n.showFab}}},n._l(n.fabItems,function(e,t){return i("div",{key:t,staticClass:"dsf-fab-item",on:{click:function(t){return n.clickItem(e)}}},[e.icon?i("i",{staticClass:"iconfont",class:e.icon}):n._e(),n._v(" "),i("span",[n._v(n._s(e[n.titleKey]))])])}),0):n._e()]):n._e()],1)},[],!1,null,"75ba6501",null).exports},18433:function(t,e,n){n.d(e,{Z:function(){return o}});var e=n(79529),i=n.n(e),e={props:{type:{type:String,default:"focus"},show:{type:Boolean,default:!1}},data:function(){return{breadcrumb:[{name:"全部".concat(dsf.config.setting["SYS-MOBILE-LIST-0005"]||"收藏"),id:0}],folders:[],isShow:!0}},computed:{title:function(){return"move"==this.type?"移动到目录":"".concat(dsf.config.setting["SYS-MOBILE-LIST-0005"]||"收藏","到目录")}},created:function(){this.getFiles()},methods:{uncode:function(t){return t.replace(/&#(x)?([^&]{1,5});?/g,function(t,e,n){return String.fromCharCode(i()(n,e?16:10))})},getFiles:function(){var e=this;e.folders=[];dsf.http.post("fn/myFavorite/list",{isDirectory:"1",dataId:e.breadcrumb[e.breadcrumb.length-1].id,key:""}).then(function(t){"200"==t.data.code&&t.data.data.data.forEach(function(t){t.name=e.uncode(t.name),1==t.isDirectory&&(t.type="folder",e.folders.push(t))})}).error(function(t){e.errored=!0}).always(function(){dsf.layer.closeLoading(e.loading)})},link:function(t){this.breadcrumb.push(t),this.getFiles()},to:function(t){this.breadcrumb.splice(t+1),this.getFiles()},confirm:function(){this.$emit("update:show",!1),this.$emit("confirmChoose",this.breadcrumb[this.breadcrumb.length-1].id)}}},o=(0,n(51900).Z)(e,function(){var n=this,i=n._self._c;return i("div",[i("van-dialog",{attrs:{title:n.title,"show-cancel-button":""},on:{cancel:function(t){return n.$emit("update:show",!1)},confirm:n.confirm},model:{value:n.isShow,callback:function(t){n.isShow=t},expression:"isShow"}},[i("div",{staticStyle:{padding:"0.2rem 0.32rem"}},n._l(n.breadcrumb,function(t,e){return i("span",{key:t.id,on:{click:function(t){return n.to(e)}}},[n._v(n._s(t.name)+"/")])}),0),n._v(" "),i("div",{staticStyle:{"min-height":"1rem"}},[n._l(n.folders,function(e,t){return[i("div",{key:t,staticClass:"file",on:{click:function(t){return n.link(e)}}},[i("div",{staticClass:"typeIcon"},[i("img",{attrs:{src:"static/images/fileType/folder.png",alt:""}})]),n._v(" "),i("div",{staticClass:"info"},["folder"==e.type?i("div",[i("div",{staticClass:"title"},[n._v(n._s(e.name))])]):n._e()])])]})],2)])],1)},[],!1,null,"9ee4a27c",null).exports},27629:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var i=n(5044),e=n(79529),o=n.n(e),e=n(18433),a=n(50856),s=n(21864),c=n(39946),l=n(25108),c={components:{DsList:c.Z,dsfFab:s.Z,DsButtonToolbox:a.Z,chooseFolder:e.Z},data:function(){return{files:[],folders:[],loading:null,folderid:"",errored:!1,isFirstLoad:!1,columns:[{showCategory:"mainTitle",showName:"标题",showMetaColumn:"name"},{showCategory:"subTitleA",showName:"模块名称",icon:"iconwenjianleixing",showMetaColumn:"moduleName"},{showCategory:"subTitleC",showName:"创建人",icon:"iconfl-renyuan",showMetaColumn:"createUname"}],addBtn:[{icon:"iconjiahao",title:"新增",type:"event",action:"add"}],spHandleJS:{},dialogTitle:"新建目录",title:"",show:!1,reTitleId:"",showChoose:!1,needMoveId:""}},created:function(){var t=this;t.$route.query.title&&dsf.url.setTitle(t.$route.query.title),t.loading=dsf.layer.loading(),t.isFirstLoad=!0,t.folderid=t.$route.params.folderid,t.getFiles(),this.spHandleJS.link=function(t,e,n,i,o){i.$router.push({path:"/commonForm/".concat(o.moduleId,"/").concat(o.infoId)})}},activated:function(){},mounted:function(){},methods:{uncode:function(t){return t.replace(/&#(x)?([^&]{1,5});?/g,function(t,e,n){return String.fromCharCode(o()(n,e?16:10))})},getFiles:function(){var e=this;e.folders=[],e.files=[];dsf.http.post("fn/myFavorite/list",{isDirectory:"0",dataId:e.$route.params.folderid||"0",key:""}).then(function(t){"200"==t.data.code&&t.data.data.data.forEach(function(t){t.name=e.uncode(t.name),1==t.isDirectory?(t.type="folder",e.folders.push({buttons:{commonButton:[{action:"del",condition:"",icon:"icondelete",name:"删除",showIndex:0}],mainButtons:[{action:"reTitle",condition:"",icon:"",name:"重命名",showIndex:0},{action:"moveGuanZhu",condition:"",icon:"",name:"移动",showIndex:0}]},dataValue:t})):e.files.push({buttons:{commonButton:[],mainButtons:[{action:"quXiaoGuanZhu",condition:"",icon:"",name:"取消".concat(dsf.config.setting["SYS-MOBILE-LIST-0005"]||"收藏"),showIndex:0},{action:"moveGuanZhu",condition:"",icon:"",name:"移动",showIndex:0}]},dataValue:t})})}).error(function(t){e.errored=!0}).always(function(){dsf.layer.closeLoading(e.loading)})},link:function(t){this.$router.push("/myFavorite/".concat(t.id,"?title=").concat(t.name))},handleActionClick:function(){(this["action-".concat(arguments[0])]||function(){}).apply(void 0,(0,i.Z)(Array.prototype.slice.call(arguments,1)))},btnAction:function(t){l.log(t),this[t.action](t)},add:function(){this.show=!0,this.dialogTitle="新建目录"},confirmRename:function(){var e=this;"新建目录"==this.dialogTitle?dsf.http.post("/fn/myFavorite/add",{name:this.title,isDirectory:1,rowState:-1,fId:this.$route.params.folderid||"0"}).then(function(t){e.show=!1,dsf.layer.toast(t.data.message),"200"==t.data.code?(e.title="",e.getFiles()):dsf.layer.toast(t.data.message)}).catch(function(t){dsf.layer.toast("接口异常"),l.log(t)}):dsf.http.post("/fn/myFavorite/reName",{name:this.title,id:this.reTitleId}).then(function(t){e.show=!1,dsf.layer.toast(t.data.message),"200"==t.data.code?(e.title="",e.getFiles()):dsf.layer.toast(t.data.message)}).catch(function(t){dsf.layer.toast("接口异常"),l.log(t)})},"action-quXiaoGuanZhu":function(t,e){var n=this;this.$toast.loading({forbidClick:!0,message:"提交中"}),l.log(t),dsf.http.post("/fn/mobileFocus/deleteFocus",{infoId:t.dataValue.fid||t.dataValue.info_id||t.dataValue.infoId||t.dataValue.A0001||t.dataValue.id||t.dataValue["SW_XZD.A0001"]||t.dataValue["G_INFOS.A0001"]}).then(function(t){var t=t.data,e=(t.message,t.result);"success"!==t.type&&!e||n.getFiles(),n.dsf.layer.toast("操作成功")}).catch(function(){n.$toast.clear()})},"action-del":function(t,e){var n=this;l.log(t),dsf.layer.confirm({message:"是否确认删除该目录",confirmButtonText:"确认"},function(){dsf.http.post("/fn/myFavorite/delete",{id:t.dataValue.id}).then(function(t){200==t.data.code?n.getFiles():dsf.layer.toast(t.data.message)})})},"action-reTitle":function(t,e){this.show=!0,this.dialogTitle="重命名",this.reTitleId=t.dataValue.id,this.title=t.dataValue.name},"action-moveGuanZhu":function(t,e){this.showChoose=!0,this.needMoveId=t.dataValue.id},confirmMove:function(t){var e=this;dsf.http.post("/fn/myFavorite/move",{dataIds:this.needMoveId,fid:t}).then(function(t){200==t.data.code&&e.getFiles(),dsf.layer.toast(t.data.message)})}}},d=(0,n(51900).Z)(c,function(){var i=this,t=i._self._c;return t("div",[0<i.folders.length||0<i.files.length?t("div",[i._l(i.folders,function(e,n){return t("div",{key:n},[t("div",{staticClass:"folder"},[t("div",{staticClass:"title",on:{click:function(t){return i.link(e.dataValue)}}},[i._m(0,!0),i._v(" "),t("div",{staticClass:"info"},[t("div",{staticClass:"title"},[i._v(i._s(e.dataValue.name))])])]),i._v(" "),t("DsButtonToolbox",{attrs:{buttons:e.buttons||{},more:!0,size:"small"},on:{commonClick:function(t){i.handleActionClick(t,e,n)},mainClick:function(t){i.handleActionClick(t,e,n)}}})],1)])}),i._v(" "),t("DsList",{ref:"dslist",attrs:{data:i.files,columns:i.columns,spHandleJs:i.spHandleJS},on:{mainClick:i.handleActionClick,commonClick:i.handleActionClick}})],2):t("div",[t("commonempty",{attrs:{description:"暂无数据"}})],1),i._v(" "),t("dsf-fab",{attrs:{"fab-items":i.addBtn},on:{clickItem:i.btnAction}}),i._v(" "),t("van-dialog",{attrs:{title:i.dialogTitle,"get-container":"#app","show-cancel-button":""},on:{cancel:function(t){i.show=!1},confirm:i.confirmRename},model:{value:i.show,callback:function(t){i.show=t},expression:"show"}},[t("van-field",{staticClass:"re-title",attrs:{placeholder:"请输入名称"},model:{value:i.title,callback:function(t){i.title=t},expression:"title"}})],1),i._v(" "),i.showChoose?t("chooseFolder",{attrs:{show:i.showChoose,type:"move"},on:{"update:show":function(t){i.showChoose=t},confirmChoose:i.confirmMove}}):i._e()],1)},[function(){var t=this._self._c;return t("div",{staticClass:"typeIcon"},[t("img",{attrs:{src:"static/images/fileType/folder.png",alt:""}})])}],!1,null,"49af6bda",null).exports}}]);