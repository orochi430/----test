"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[6292],{34182:function(e,t,a){a.r(t);var n=a(62207),o=a.n(n),n=a(79529),u=a.n(n),n=a(73473),s=a.n(n),h=a(25108),n={};function c(e,t,a){h.log("formData.multinfos['220511171325ethChZNde5NphADcHPU'].rows",e.multinfos["220511171325ethChZNde5NphADcHPU"].rows);var n="",s=0;e.multinfos["220511171325ethChZNde5NphADcHPU"].rows.forEach(function(e){n=e["c-res-space-008"].value,s+=o()(e["c-res-space-009"].value)}),t.controls.find(function(e){return"C-IM-SPACE-009"==e.metaId}).enumData.find(function(e){return e.text==n})&&t.controls.find(function(e){return"C-IM-SPACE-009"==e.metaId}).enumData.find(function(e){return e.text==n}).value,a.$set(e.main,"C-IM-SPACE-010",{value:s.toFixed(2)})}function d(e,t,a){e.main["C-IM-SPACE-046"].value.length?a.$set(a.formData.main,"C-IM-SPACE-036",{value:"1",text:"是"}):a.$set(a.formData.main,"C-IM-SPACE-036",{value:"2",text:"否"})}n.saveAfter=function(e,t,a){dsf.layer.toast("表单保存成功",null,function(){e.$eventBus.refresh(e),e.pk||e.$router.replace({path:"/commonForm/"+e.moduleId+"/"+e.pk})})},n.initHandle=function(s,a,o){var t,n,e;function r(){var e,t;s.main["C-IM-SPACE-020"].value.length&&(e=s.main["C-IM-SPACE-020"].value.replace(/-/g,"/"),0<function(e,t,a){e=e.replace(/\-/g,"/"),t=t.replace(/\-/g,"/"),a=a.toLowerCase();var e=new Date(e),t=new Date(t),n=1;switch(a){case"second":n=1e3;break;case"minute":n=6e4;break;case"hour":n=36e5;break;case"day":n=864e5}return u()((t.getTime()-e.getTime())/u()(n))}((t=new Date).getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),e,"day")?o.$set(s.main,"C-IM-SPACE-017",{value:"1",text:"在租"}):o.$set(s.main,"C-IM-SPACE-017",{value:"2",text:"待租"}))}"拟稿中"==s.main.A0040.value&&(s.main["C-IM-SPACE-038"].value=""),""!=s.main["C-IM-SPACE-009"].text&&"商业"!=s.main["C-IM-SPACE-009"].text?(t="",o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.forEach(function(e){t+=e["220513201908F1JxdmM6Vc1gAhxOvAa"].value+","}),e={spaceIds:t,purpose1:s.main["C-IM-SPACE-009"].value,purpose2:"",type:2},"商业"!=s.main["C-IM-SPACE-009"].text&&dsf.http.post("fn/enclosure/getFyPrice",e).then(function(e){var t,a,e=e.data;"500"==e.code?dsf.layer.toast(e.message):"200"==e.code&&(t=e.data.jtpgzdj,dsf.http.post("fn/coreBusinessContract/isCxPrice").then(function(e){e=e.data;"200"==e.code&&(0==e.data.zdj?s.main["C-IM-SPACE-053"].value=t:s.main["C-IM-SPACE-052"].value=t,0==e.data.zjj)&&(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value="*")}),0<o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.length)&&(a=o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["220519113003oVyOtN0vIc6ilH4oTZE"].value,-1!=e.data.ysqyzjj[0][a])&&(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value="",s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value=e.data.ysqyzjj[0][a])})):""!=s.main["C-IM-SPACE-051"].text&&"商业"==s.main["C-IM-SPACE-009"].text&&(n="",o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.forEach(function(e){n+=e["220513201908F1JxdmM6Vc1gAhxOvAa"].value+","}),e={spaceIds:n,purpose1:s.main["C-IM-SPACE-009"].value,purpose2:s.main["C-IM-SPACE-051"].value,type:2},"商业"==s.main["C-IM-SPACE-009"].text)&&""!=s.main["C-IM-SPACE-051"].text&&dsf.http.post("fn/enclosure/getFyPrice",e).then(function(e){var t,a,e=e.data;"500"==e.code?dsf.layer.toast(e.message):"200"==e.code&&(t=e.data.jtpgzdj,dsf.http.post("fn/coreBusinessContract/isCxPrice").then(function(e){e=e.data;"200"==e.code&&(0==e.data.zdj?(s.main["C-IM-SPACE-053"].value="",s.main["C-IM-SPACE-053"].value=t):(s.main["C-IM-SPACE-052"].value="",s.main["C-IM-SPACE-052"].value=t),0==e.data.zjj)&&(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value="*")}),0<o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.length)&&(a=o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["220519113003oVyOtN0vIc6ilH4oTZE"].value,-1!=e.data.ysqyzjj[0][a])&&(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value="",s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value=e.data.ysqyzjj[0][a])}),dsf.http.post("fn/coreBusinessContract/isCxPrice").then(function(e){e=e.data;h.log(e),"200"==e.code&&(0==e.data.zdj&&(s.main["C-IM-SPACE-052"].value="*"),0==e.data.zjj)&&(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value="*")}),d(s,0,o),o.$bus.on("blurBus",function(e){"C-IM-SPACE-046"==e.metaData.metaId&&d(s,0,o)}),o.$bus.on("selectUserBus",function(t){var e;"C-IM-SPACE-037"==t.metaData.metaId&&(window["220513201635mvLQr5jrPrTngcmMXhU_beforeOpenCode"]=function(e,t){return t.split("?")[0]+"?projectId="+e.main["C-IM-SPACE-037"].value},window["220513201809v9TGFYMGOirhYbOfNJP_beforeOpenCode"]=function(e,t,a){a=e.multinfos["220511171325ethChZNde5NphADcHPU"].rows[a.subFormIndex]["220513201635mvLQr5jrPrTngcmMXhU"].value;return t.split("?")[0]+"?projectId="+e.main["C-IM-SPACE-037"].value+"&buildingId="+a},window["220513201908F1JxdmM6Vc1gAhxOvAa_beforeOpenCode"]=function(e,t,a){var n=e.multinfos["220511171325ethChZNde5NphADcHPU"].rows[a.subFormIndex]["220513201635mvLQr5jrPrTngcmMXhU"].value,a=e.multinfos["220511171325ethChZNde5NphADcHPU"].rows[a.subFormIndex]["220513201809v9TGFYMGOirhYbOfNJP"].value;return t.split("?")[0]+"?projectId="+e.main["C-IM-SPACE-037"].value+"&buildingId="+n+"&floorId="+a}),"220513201908F1JxdmM6Vc1gAhxOvAa"==t.metaData.metaId&&(e=s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["220513201908F1JxdmM6Vc1gAhxOvAa"].value,dsf.http.post("fn/fygl/getSpaceDetails",{spaceId:e}).then(function(e){e=e.data;o.$set(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["c-res-space-080"],"value",e.data.cqf),o.$set(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["c-res-space-071"],"value",e.data.jyf),o.$set(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["c-res-space-008"],"value",e.data.spaceType),o.$set(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["c-res-space-009"],"value",e.data.maxArea),o.$set(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["c-res-space-013"],"value",e.data.lowPrice),o.$set(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["c-res-space-081"],"value",e.data.contractValue),o.$set(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[t.subFormIndex]["c-res-space-077"],"value",e.data.merchant),c(s,a,o)}))}),r(),o.$bus.on("selectDateTime",function(e){"C-IM-SPACE-020"==e.metaData.metaId&&r()}),o.$watch(function(){return s.multinfos["220511171325ethChZNde5NphADcHPU"]},function(e,t){c(s,a,o)},{deep:!0}),o.$bus.off("checkVal").on("checkVal",function(e){var t,a,n;"C-IM-SPACE-009"==e.metaData.metaId?(t="",o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.forEach(function(e){t+=e["220513201908F1JxdmM6Vc1gAhxOvAa"].value+","}),n={spaceIds:t,purpose1:s.main["C-IM-SPACE-009"].value,purpose2:"",type:2},"商业"!=s.main["C-IM-SPACE-009"].text&&dsf.http.post("fn/enclosure/getFyPrice",n).then(function(e){var t,a,e=e.data;"500"==e.code?dsf.layer.toast(e.message):"200"==e.code&&(t=e.data.jtpgzdj,dsf.http.post("fn/coreBusinessContract/isCxPrice").then(function(e){e=e.data;"200"==e.code&&(0==e.data.zdj?s.main["C-IM-SPACE-053"].value=t:s.main["C-IM-SPACE-052"].value=t)}),0<o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.length)&&(a=o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["220519113003oVyOtN0vIc6ilH4oTZE"].value,-1!=e.data.ysqyzjj[0][a])&&(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value="",s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value=e.data.ysqyzjj[0][a])})):"C-IM-SPACE-051"==e.metaData.metaId&&(a="",o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.forEach(function(e){a+=e["220513201908F1JxdmM6Vc1gAhxOvAa"].value+","}),n={spaceIds:a,purpose1:s.main["C-IM-SPACE-009"].value,purpose2:s.main["C-IM-SPACE-051"].value,type:2},"商业"==s.main["C-IM-SPACE-009"].text)&&""!=s.main["C-IM-SPACE-051"].text&&dsf.http.post("fn/enclosure/getFyPrice",n).then(function(e){var t,a,e=e.data;"500"==e.code?dsf.layer.toast(e.message):"200"==e.code&&(t=e.data.jtpgzdj,dsf.http.post("fn/coreBusinessContract/isCxPrice").then(function(e){e=e.data;"200"==e.code&&(0==e.data.zdj?(s.main["C-IM-SPACE-053"].value="",s.main["C-IM-SPACE-053"].value=t):(s.main["C-IM-SPACE-052"].value="",s.main["C-IM-SPACE-052"].value=t))}),0<o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows.length)&&(a=o.formData.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["220519113003oVyOtN0vIc6ilH4oTZE"].value,-1!=e.data.ysqyzjj[0][a])&&(s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value="",s.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value=e.data.ysqyzjj[0][a])})})},n.saveFilter=function(r,u,c,e){var d=r.main["C-IM-SPACE-006"].value;return new(s())(function(t,e){var a,n,s,o="系统分析到"+d+"集团指导价或企业指导价暂无 是否继续?";r.multinfos["220511171325ethChZNde5NphADcHPU"].rows.length<=0?(dsf.layer.toast("须含有至少一条原始房源的子表信息"),e()):(a=r.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["220513201635mvLQr5jrPrTngcmMXhU"].value,n=r.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["220513201809v9TGFYMGOirhYbOfNJP"].value,s=r.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["220513201908F1JxdmM6Vc1gAhxOvAa"].value,""!=a&&""!=n&&""!=s||(dsf.layer.toast("请填写完整的原始房源信息"),e())),""!=r.main["C-IM-SPACE-052"].value&&""!=r.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value||dsf.layer.confirm({message:o,title:"提示",confirmButtonText:"确定"},function(){var e=r.main["C-IM-SPACE-038"].value;r.main["C-IM-SPACE-038"].value="26,"+e,t()},function(){e()}),c.pk||dsf.http.post("fn/fygl/getId").then(function(e){var e=e.data,e=(h.log(e),dsf.http.post("fn/UpdateGNRInfoController/updateInfo",{moduleId:c.moduleId,oldId:c.formParams.pk,newId:e.data.id}).then(function(e){e=e.data;h.log("fn/UpdateGNRInfoController/updateInfo",e)}),e.data.id);c.pk=e,c.formParams.pk=e,c.$set(u.parameters,"pk",e),c.$set(r.main,"A0001",{value:e}),""!=r.main["C-IM-SPACE-052"].value&&""!=r.multinfos["220511171325ethChZNde5NphADcHPU"].rows[0]["c-res-space-099"].value&&(e=r.main["C-IM-SPACE-038"].value,r.main["C-IM-SPACE-038"].value="26,"+e,t())})})},t.default=n}}]);