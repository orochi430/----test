"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[84584],{84584:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var n=a(25108),t={data:function(){return{keywords:"",sType:"",sTypes:[],venue:"",venues:[{text:"全部",value:""},{text:"A馆",value:"A"},{text:"B馆",value:"B"},{text:"C馆",value:"C"},{text:"D馆",value:"D"},{text:"R馆",value:"R"}],floor:"",floors:[{text:"全部",value:""},{text:"一楼",value:"1"},{text:"二楼",value:"2"},{text:"三楼及以上",value:"3"}],list:[],loading:!1,finished:!1,finishedTips:"没有更多了",page:1,pageSize:10}},methods:{onLoad:function(){var e=this;0==e.sTypes.length?e.getDataByOpts():e.getData()},getDataByOpts:function(){var i=this;dsf.http.get("list").done(function(e){var t;if(0==e.code)return i.sTypes=null==(t=e.data.find(function(e){return"17"==e.id}))?void 0:t.children.map(function(e){return{text:e.name,value:e.name}}),0<i.sTypes.length&&i.sTypes.unshift({text:"全部",value:""}),dsf.http.get("api/merchant/list",{page:i.page,limit:i.pageSize,building:i.venue,floor:i.floor,type:i.sType,keyword:i.keywords});throw e.msg}).done(function(e){if(0!=e.code)throw e.msg;i.page++,i.list=i.list.concat(e.page.list),e.page.list.length<i.pageSize&&(i.finished=!0)}).error(function(e){i.list=null,n.log("enjoyServices-error",e),dsf.layer.toast(e.message)}).always(function(){i.loading=!1})},getData:function(){var t=this;dsf.http.get("api/merchant/list",{page:t.page,limit:t.pageSize,building:t.venue,floor:t.floor,type:t.sType,keyword:t.keywords}).done(function(e){if(0!=e.code)throw e.msg;t.page++,t.list=t.list.concat(e.page.list),e.page.list.length<t.pageSize&&(t.finished=!0)}).error(function(e){t.list=null,n.log("enjoyServices-list-error",e),dsf.layer.toast(e.message)}).always(function(){t.loading=!1})},filterChange:function(){var e=this;e.page=1,e.list=[],e.loading=!0,e.finished=!1,e.onLoad()},onSearch:function(e){var t=this;t.page=1,t.list=[],t.loading=!0,t.finished=!1,t.onLoad()}}},i=(0,a(51900).Z)(t,function(){var i=this,n=i._self._c;return n("div",{staticClass:"page-enjoyServices"},[n("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:i.onSearch},model:{value:i.keywords,callback:function(e){i.keywords=e},expression:"keywords"}}),i._v(" "),n("img",{staticClass:"banner",attrs:{src:a(4091),alt:""}}),i._v(" "),n("div",{staticClass:"menu-container"},[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{title:"服务类型",options:i.sTypes},on:{change:i.filterChange},model:{value:i.sType,callback:function(e){i.sType=e},expression:"sType"}}),i._v(" "),n("van-dropdown-item",{attrs:{title:"场馆",options:i.venues},on:{change:i.filterChange},model:{value:i.venue,callback:function(e){i.venue=e},expression:"venue"}}),i._v(" "),n("van-dropdown-item",{attrs:{title:"楼层",options:i.floors},on:{change:i.filterChange},model:{value:i.floor,callback:function(e){i.floor=e},expression:"floor"}})],1)],1),i._v(" "),n("div",{staticClass:"list-container"},[n("van-list",{attrs:{finished:i.finished,"finished-text":i.finishedTips},on:{load:i.onLoad},model:{value:i.loading,callback:function(e){i.loading=e},expression:"loading"}},i._l(i.list,function(e,t){return n("div",{key:t,staticClass:"flex item"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://www.ciie.org/appapi/api/merchant/upload/file/name/".concat(e.logo),expression:"\n            `https://www.ciie.org/appapi/api/merchant/upload/file/name/${item.logo}`\n          "}],attrs:{alt:""}}),i._v(" "),n("div",{staticStyle:{flex:"1",overflow:"hidden"}},[n("div",{staticClass:"title elps"},[i._v(i._s(e.name))]),i._v(" "),e.location?n("div",{staticClass:"sub"},[n("img",{attrs:{src:a(70594)}}),i._v(i._s(e.location)+"\n          ")]):i._e(),i._v(" "),n("div",{staticClass:"sub"},[n("img",{attrs:{src:a(22311)}}),i._v("营业时间："+i._s(e.openTime)+"-"+i._s(e.closeTime)+"\n          ")])])])}),0)],1)],1)},[],!1,null,"4a955f18",null).exports},70594:function(e,t,i){e.exports=i.p+"static/img/address.f5bd4ed..svg"},4091:function(e,t,i){e.exports=i.p+"static/img/server.ce1f32d..png"},22311:function(e,t,i){e.exports=i.p+"static/img/time.174c683..svg"}}]);