"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[88842],{88842:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var e=a(26243),i=a.n(e),e=a(8450),s=a.n(e),n=a(25108),e={data:function(){return{id:this.$route.query.id||"",selectVal:0,option:[{text:"全部",value:0},{text:"已反馈",value:1},{text:"未反馈",value:2}],active:0,tabList:[],copyTabList:[]}},methods:{getDataList:function(){var a=this,n=dsf.layer.loading();dsf.http.get("/ctrl/superviseV6/m/feedBack/info?id="+this.id).then(function(t){dsf.layer.closeLoading(n);var e=(t.data||{}).data||{},t=i()(e).map(function(t){return{label:t+"期",data:e[t]}});a.copyTabList=JSON.parse(s()(t)),a.tabList=t})},handleDingDing:function(t){try{dsf.config.ddSetting.isDing&&dd.biz.chat.openSingleChat({corpId:dsf.config.ddSetting.ddCoprId,userId:t.id,onSuccess:function(){n.log("success")},onFail:function(){n.log("error")}})}catch(t){n.log(t)}},handleTel:function(t){window.location.href="tel:".concat(t.utTel)},handleDeal:function(){var e=this;dsf.http.post("/ctrl/convert/moduleRuleConvert",{convertId:"2106161334381PC5vugnZwQyjNoMLzA",initDataSource:1,srcInfo:this.id}).then(function(t){200==t.data.code&&e.$router.push({path:"/commonForm/".concat(t.data.data.moduleId,"/").concat(t.data.data.pk),query:{initDataSource:1,sourcePk:e.id,relationId:e.id,type:"催办"}})})},handleJump:function(t){this.$router.push({path:"/commonForm/210608105939mkuTUSzHdhowHPHxlY8/".concat(t.feedBackId)})},handleTabChange:function(){this.handleChange(this.selectVal)},handleChange:function(e){this.tabList[this.active].data=this.copyTabList[this.active].data.filter(function(t){return 1===e?t.feedBackId:2!==e||!t.feedBackId})}},mounted:function(){this.getDataList()}},d=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return n("div",{staticClass:"superviseidea"},[0<a.tabList.length?[n("van-tabs",{attrs:{sticky:"","offset-top":a.dsf.util.getOffsetTop()},on:{change:a.handleTabChange},model:{value:a.active,callback:function(t){a.active=t},expression:"active"}},a._l(a.tabList,function(t,e){return n("van-tab",{key:e,attrs:{title:"".concat(t.label),"title-style":"color:#333"}},[n("div",{staticClass:"ideacontent"},[n("div",{staticClass:"disflex"},[n("span",[a._v("反馈状态：")]),a._v(" "),n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:a.option},on:{change:a.handleChange},model:{value:a.selectVal,callback:function(t){a.selectVal=t},expression:"selectVal"}})],1)],1),a._v(" "),0<t.data.length?n("ul",{staticClass:"idea-box"},a._l(t.data,function(e,t){return n("li",{key:t},[e.dutyUnit?n("div",{staticClass:"idea-title"},[n("span",[a._v("["+a._s("1"===e.taskType?"主办":"协办")+"]")]),a._v("\n                "+a._s(e.dutyUnit))]):a._e(),a._v(" "),n("div",{staticClass:"displayflex"},[e.underTaker?n("div",{staticClass:"idea-ln"},[a._v("\n                    承办人："+a._s(e.underTaker)+"\n                    ")]):a._e(),a._v(" "),e.feedBackId?n("div",{staticClass:"idea-ln"},[a._v("\n                    反馈时间："+a._s(e.feedBackDate)+"\n                  ")]):a._e()]),a._v(" "),n("div",{staticClass:"idea-ln displayflex"},[n("div",{staticClass:"idea-phone",on:{click:function(t){return a.handleTel(e)}}},[a._v("联系方式："+a._s(e.utTel)+"\n                  "),e.utTel?n("van-icon",{attrs:{name:"phone-o",size:"20"}}):a._e()],1),a._v(" "),n("div",{staticClass:"idea-cus-button",class:e.feedBackId?"idea-cus-primary":"idea-cus-warning"},[a._v(a._s(e.feedBackId?"已反馈":"未反馈"))])]),a._v(" "),e.exeInfo&&e.feedBackId?n("div",{staticClass:"idea-ln displayflex"},[n("div",{staticClass:"idea-phone idea-lan",on:{click:function(t){return a.handleJump(e)}}},[a._v("反馈情况："+a._s(e.exeInfo))])]):a._e(),a._v(" "),e.bjyj&&e.feedBackId?n("div",{staticClass:"idea-ln displayflex"},[n("div",{staticClass:"idea-lan elps",on:{click:function(t){return a.handleJump(e)}}},[a._v("反馈内容："+a._s(e.bjyjText))])]):a._e(),a._v(" "),e.feedBackId?a._e():n("div",{staticClass:"idea-send",on:{click:a.handleDeal}},[n("div",{staticClass:"idea-primary-blue"},[a._v("催办")])])])}),0):n("commonempty",{attrs:{description:"暂无数据"}})],1)])}),1)]:n("commonempty",{attrs:{description:"暂无数据"}})],2)},[],!1,null,"fe0dc3fa",null).exports}}]);