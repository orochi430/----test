"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[99162],{61360:function(e,t,a){a.r(t);var n=a(79529),N=a.n(n),n=a(73473),S=a.n(n),c=a(90541),m=a(25108),n={};function O(e,S,I,t){var o=3<arguments.length&&void 0!==t?t:"",i="220528193219Af81uiCJAp2rcc1PIZ8",C=e.multinfos[i].rows;c.Z.http.post("fn/commonTool/getIdByTableName",{dbName:"ImBzServiceConnection",tableName:"zs_business_confirmation_core_listings"}).then(function(e){var t,a,n=e.data.data.id;o?(t=0,C.forEach(function(e){"Added"==e.action&&10<=e[i].value.length&&(S.$set(e[i],"value",N()(n)+t),t++)})):(a=0,C.forEach(function(e){"Added"==e.action&&10<=e[i].value.length&&(S.$set(e[i],"value",N()(n)+a),a++)})),I()})}n.initHandle=function(l,e,s){function t(){window["C-ZS-BUSINESS-CONFIRMATION-CORE-008_beforeOpenCode"]=function(e,t,a){return e.main["C-ZS-BUSINESS-CONFIRMATION-CORE-007"].value.length?(e=t.split("?")[0]+"?provinceId="+e.main["C-ZS-BUSINESS-CONFIRMATION-CORE-007"].value,t.split("?")[1]?e+"&"+t.split("?")[1]:e):(c.Z.layer.toast("请选择省份！"),"")},window["C-ZS-BUSINESS-CONFIRMATION-CORE-009_beforeOpenCode"]=function(e,t){return e.main["C-ZS-BUSINESS-CONFIRMATION-CORE-008"].value.length?(e=t.split("?")[0]+"?cityId="+e.main["C-ZS-BUSINESS-CONFIRMATION-CORE-008"].value,t.split("?")[1]?e+"&"+t.split("?")[1]:e):(c.Z.layer.toast("请选择城市！"),"")}}var a=l.main["C-ZS-BUSINESS-CONFIRMATION-CORE-027"].value,n=["C-ZS-BUSINESS-CONFIRMATION-CORE-027","C-ZS-BUSINESS-CONFIRMATION-CORE-028","C-ZS-BUSINESS-CONFIRMATION-CORE-029","C-ZS-BUSINESS-CONFIRMATION-CORE-030","C-ZS-BUSINESS-CONFIRMATION-CORE-031","C-ZS-BUSINESS-CONFIRMATION-CORE-032","C-ZS-BUSINESS-CONFIRMATION-CORE-033","C-ZS-BUSINESS-CONFIRMATION-CORE-034"];e.controls.forEach(function(t){a&&""!=a?-1<n.findIndex(function(e){return e==t.metaId})&&(t.show=1):-1<n.findIndex(function(e){return e==t.metaId})&&(s.notVaildateMetas.push(t.metaId),t.show=0)});t(),window["relationFile-2_beforeOpenCode"]=function(t,a,e,n){s.saveNoTip(function(e){"2206012142016maxXSIRHzAd7cVdfdW"==t?s.$router.push({path:"/commonForm/220528195846HDnSpbcDZr1L2fZ42QU?formid=220528200102UV2XbtnVBfKKgcZp7OP",query:{fid:a.pk}}):"2206012142396KwXtJaGeILz3cw6Xe6"==t&&s.$router.push({path:"/commonForm/220601192152cn9h0jVIqKOD3vaaxsR?formid=220601192152XVnNFHW00VGCWMBv9r6",query:{fid:a.pk}})})},s.$bus.on("selectUserBus",function(e){"C-ZS-BUSINESS-CONFIRMATION-CORE-005"==e.metaData.metaId&&e.value&&c.Z.http.post("fn/coreBusinessContract/getSecCode",{companyId:e.value}).then(function(e){s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-006",{value:e.data.data.companyId,text:e.data.data.companyName})}),"C-ZS-BUSINESS-CONFIRMATION-CORE-007"==e.metaData.metaId&&(s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-008",{value:"",text:""}),s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-009",{value:"",text:""}),e.value)&&t(),"C-ZS-BUSINESS-CONFIRMATION-CORE-008"==e.metaData.metaId&&(s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-009",{value:"",text:""}),e.value)&&t()}),s.$bus.on("selectDateTime",function(e){function t(e){return e%4==0&&(e%100!=0||e%400==0)}var a,n,S,I,o,i,C,N,O,u,r;"C-ZS-BUSINESS-CONFIRMATION-CORE-017"!=e.metaData.metaId&&"C-ZS-BUSINESS-CONFIRMATION-CORE-054"!=e.metaData.metaId||(e=l.main["C-ZS-BUSINESS-CONFIRMATION-CORE-017"].value,a=l.main["C-ZS-BUSINESS-CONFIRMATION-CORE-054"].value,e&&a?(o=e,i=a,C=[1,3,5,7,8,10,12,4,6,9,11,2],N=new Date(o),O=new Date(i),o=O.getFullYear()-N.getFullYear(),i=O.getMonth()-N.getMonth(),u=O.getDate()-N.getDate(),r=(r=C.findIndex(function(e){return e===O.getMonth()+1}))<=6?31:6<r&&r<=10?30:t(O.getFullYear())?29:28,C=(C=C.findIndex(function(e){return e===N.getMonth()+1}))<=6?31:6<C&&C<=10?30:t(N.getFullYear())?29:28,0==u?u=1:-1==u?u=0:u<-1?(i--,u=u+C+1):0<u&&(u=O.getDate()-N.getDate()+1)==r&&(i++,u=0),i<0&&(o--,i=12+i),12==i&&(o++,i=0),n=(C={year:o,month:i,day:u}).year,S=C.month,c.Z.http.post("fn/coreBusinessContract/countDate",{day:I=C.day,ksDate:e,jsDate:a}).then(function(e){e=e.data;m.log("countDate:"+e);var t=1<=n?12*n+S:S;s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-020",{value:String(n+e)}),s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-018",{value:String(t)}),s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-019",{value:String(I)})})):(s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-020",{value:""}),s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-018",{value:""}),s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-019",{value:""})))}),s.$bus.on("checkVal",function(e){"C-ZS-BUSINESS-CONFIRMATION-CORE-057"==e.metaData.metaId&&1<e.value.length&&-1!=e.value.indexOf("0")&&(c.Z.layer.toast("重点核心商务书条款”不能同时选择无和其他条款，请重新确认！"),s.$set(l.main,"C-ZS-BUSINESS-CONFIRMATION-CORE-057",{text:"",value:""}))})},n.saveFilter=function(o,i,C){return new(S())(function(t,e){var a=Number(o.main["C-ZS-BUSINESS-CONFIRMATION-CORE-018"].value),n=Number(o.main["C-ZS-BUSINESS-CONFIRMATION-CORE-019"].value),S=Number(o.main["C-ZS-BUSINESS-CONFIRMATION-CORE-021"].value),I=Number(o.main["C-ZS-BUSINESS-CONFIRMATION-CORE-022"].value);(a<S||!(a!=S||I<n))&&e("数据校验未通过，请检查填写的数据！"),300<o.main["C-ZS-BUSINESS-CONFIRMATION-CORE-015"].value.length&&e("企业经营简介/经营品牌长度必须在300字符内，请注意！"),C.pk?O(o,C,function(){return t()}):c.Z.http.post("fn/commonTool/getIdByTableName",{dbName:"ImBzServiceConnection",tableName:"zs_business_confirmation_core"}).then(function(e){e=e.data.data.id;C.pk=e,C.formParams.pk=e,C.$set(i.parameters,"pk",e),C.$set(o.main,"A0001",{value:e}),O(o,C,function(){return t()},e)})})},n.saveAfter=function(e,t,a){e.$router.push({path:"/commonTabs/hxsws?title=核心商务书"})},n.zuofei=function(e,t,a){var n={title:"原因",placeholder:"请输入作废原因",buttonText:"保存",api:"fn/coreBusinessContract/invalid"},S=e.main.A0001.value;c.Z.http.post("fn/coreBusinessContract/isSubmitInvalid",{pk:S}).then(function(e){e=e.data;"1"==e.code?(a.$refs.rejectDialog.showDialog=!0,a.$refs.rejectDialog.title=n.title,a.$refs.rejectDialog.placeholder=n.placeholder,a.$refs.rejectDialog.subTitle=n.subTitle,a.$refs.rejectDialog.buttonText=n.buttonText,a.$refs.rejectDialog.confirmCallBack=function(e){c.Z.http.post(n.api,{pk:S,nr:e}).then(function(e){e=e.data;c.Z.layer.toast(e.message)})}):c.Z.layer.toast(e.message)})},t.default=n}}]);