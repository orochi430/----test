"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[61110],{61110:function(e,n,t){t.r(n),t.d(n,{default:function(){return i}});var n=t(8450),o=t.n(n),a=t(88561),r=t(25108),n={name:"emergency_login",data:function(){return{}},created:function(){var t=this;"app"==a.Z.getClientName()?document.addEventListener("deviceready",function(){r.log("deviceready_emergency_login");var n=t.randomString(16);r.log(xsfCommon),xsfCommon.ssoAuthLogin("",function(e){r.log(e),e&&(e={device_desc:"postman",token:e,device_id:n},dsf.http.post("fn/mobileSAG/validateUser",{data_:o()(e)}).then(function(e){e=e.data,r.log(e),"1"===String(e.rcode)?(a.Z.saveToSessionStore("user",e.data),a.Z.saveToSessionStore("loginToken",e.data.auth.token),a.Z.saveToLocalStore("loginToken",e.data.auth.token),a.Z.saveToLocalStore("user",o()(e.data)),a.Z.logIn(function(){t.$router.replace("/index")})):(dsf.layer.toast("所在机构无用户信息，请重新登录"),t.$router.replace("/testLogin"))}))},function(e){alert("open failed: "+e)})}):dsf.layer.toast("当前设备不支持单点登录")},methods:{randomString:function(e){e=e||32;for(var n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",t=n.length,o="",a=0;a<e;a++)o+=n.charAt(Math.floor(Math.random()*t));return o}}},i=(0,t(51900).Z)(n,function(){return(0,this._self._c)("div",{staticClass:"init-div"})},[],!1,null,null,null).exports}}]);