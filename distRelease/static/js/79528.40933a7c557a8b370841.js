"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[79528],{79528:function(t,a,e){e.r(a),e.d(a,{default:function(){return i}});var a={name:"applyrRecord",components:{CommonCard:e(11865).Z},props:{},data:function(){return{keyword:"",cardHeight:"calc(100vh - ".concat(dsf.util.getOffsetTop()," - ").concat(this.$store.state.isShowAppFooter?"1.2rem":"0px"," - 119px)"),active:0,applyNum:{ing:0,pass:0,reject:0}}},computed:{},watch:{},created:function(){},mounted:function(){this.getApplyNum()},methods:{search:function(t){switch(this.keyword=t,this.active){case 0:this.$refs.commonCard1.cardType="applying",this.$refs.commonCard1.initUrl(),this.$refs.commonCard1.onRefresh();break;case 1:this.$refs.commonCard1.cardType="applyPass",this.$refs.commonCard2.initUrl(),this.$refs.commonCard2.onRefresh();break;case 2:this.$refs.commonCard1.cardType="applyReject",this.$refs.commonCard3.initUrl(),this.$refs.commonCard3.onRefresh()}},getApplyNum:function(){var a=this;dsf.http.get("fn/application/store/apply/nums",{zdfw:"1"}).then(function(t){t&&t.data&&200==t.data.code&&t.data.data&&(a.applyNum={ing:t.data.data[1],pass:t.data.data[9],reject:t.data.data[2]})}).catch(function(t){}).finally(function(){})}}},i=(0,e(51900).Z)(a,function(){var a=this,t=a._self._c;return t("div",{staticClass:"applyrRecord"},[t("div",{staticClass:"search-box"},[t("van-search",{attrs:{placeholder:"搜索","left-icon":"",clearable:!1},on:{search:a.search},scopedSlots:a._u([{key:"left-icon",fn:function(){return[t("i",{staticClass:"iconfont iconsousuo i1",staticStyle:{color:"#999"},on:{click:a.search}})]},proxy:!0}]),model:{value:a.keyword,callback:function(t){a.keyword=t},expression:"keyword"}})],1),a._v(" "),t("van-tabs",{model:{value:a.active,callback:function(t){a.active=t},expression:"active"}},[t("van-tab",{attrs:{title:"申请中 (".concat(a.applyNum.ing,")")}},[t("common-card",{ref:"commonCard1",attrs:{keyword:a.keyword,type:"applying",cardHeight:a.cardHeight}})],1),a._v(" "),t("van-tab",{attrs:{title:"已通过 (".concat(a.applyNum.pass,")")}},[t("common-card",{ref:"commonCard2",attrs:{keyword:a.keyword,type:"applyPass",cardHeight:a.cardHeight}})],1),a._v(" "),t("van-tab",{attrs:{title:"已拒绝 (".concat(a.applyNum.reject,")")}},[t("common-card",{ref:"commonCard3",attrs:{keyword:a.keyword,type:"applyReject",cardHeight:a.cardHeight}})],1)],1)],1)},[],!1,null,"6d7894e9",null).exports},11865:function(t,a,n){n.d(a,{Z:function(){return u}});var a=n(26243),s=n.n(a),a=n(62680),r=n.n(a),a=n(95366),o=n.n(a),a=n(6919),i=n.n(a),c=n(5044),l=n(77193),a=n(18428),d=n.n(a);function p(a,t){var e,i=s()(a);return r()&&(e=r()(a),t&&(e=e.filter(function(t){return o()(a,t).enumerable})),i.push.apply(i,e)),i}function e(a){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?p(Object(e),!0).forEach(function(t){(0,l.Z)(a,t,e[t])}):i()?Object.defineProperties(a,i()(e)):p(Object(e)).forEach(function(t){Object.defineProperty(a,t,o()(e,t))})}return a}var a={name:"commonCard",components:{},props:{title:{default:"",type:String},type:{default:"",type:String},keyword:{default:"",type:String},cardHeight:{default:"",type:String}},data:function(){return{appList:[],pageIndex:1,pageSize:10,loading:!1,finished:!1,refreshing:!1,url:"",apiObj:{}}},computed:{cardType:{get:function(){return this.type},set:function(){}}},watch:{},created:function(){this.initUrl()},mounted:function(){},methods:{initUrl:function(){var t={moduleId:"190105143853JG60tzYub8kZVlHz41r","query_S-APP-0056":"1",zdfw:"1"},a={};switch(this.cardType){case"all":this.url="fn/application/store/230518181204g9QDOvekP21o3FtcX82/mobile/q",a={_content:this.keyword,"query_S-APP-0096":"","query_S-APP-0087":""},this.apiObj=e(e({},t),a);break;case"recommend":this.url="fn/application/store/230518151804YdPmKWxiYAZ7HQHj7Ko/mobile/q",this.apiObj=t;break;case"hot":this.url="fn/application/store/230518180238gDkLQrJ3dNXmQmRUmYn/mobile/q",this.apiObj=t;break;case"my":this.url="fn/list/230518192726S3IUYa85cukZZxi88yz/mobile/q",a={listId:"230518192726S3IUYa85cukZZxi88yz"},this.apiObj=e(e({},t),a);break;case"applying":this.url="fn/list/230519141156TOWA7ZDldtH2J6qMG0D/mobile/q",a={_content:this.keyword,listId:"230519141156TOWA7ZDldtH2J6qMG0D"},this.apiObj=e(e({},t),a);break;case"applyPass":this.url="fn/list/230518192726S3IUYa85cukZZxi88yz/mobile/q",a={_content:this.keyword,listId:"230518192726S3IUYa85cukZZxi88yz"},this.apiObj=e(e({},t),a);break;case"applyReject":this.url="fn/list/230519141254N97FnClw8F6KVxrkfT2/mobile/q",a={_content:this.keyword,listId:"230519141254N97FnClw8F6KVxrkfT2"},this.apiObj=e(e({},t),a)}},getList:function(){var e=this,t=(this.refreshing&&(this.appList=[],this.pageIndex=1,this.refreshing=!1),d()(this.apiObj,{page:this.pageIndex,limit:this.pageSize}));dsf.http.post(this.url,t).then(function(t){var a;e.loading=!1,t&&200==t.status&&t.data&&t.data.datas&&(a=t.data.datas.map(function(t){return{id:t.dataValue["S-BASE-0001"]||t.dataValue["app.S-BASE-0001"],icon:dsf.url.getServerUrl("fn/file/downloadImage?fileName=".concat(t.dataValue["S-APP-0026"]||t.dataValue["app.S-APP-0026"])),text:t.dataValue["S-APP-0001"]||t.dataValue["app.S-APP-0001"],module:t.dataValue["S-APP-0066"]||t.dataValue["app.S-APP-0066"],rate:Number(t.dataValue["S-APP-0110"]||t.dataValue["app.S-APP-0110"]),time:t.dataValue["S-APP-0108"]||t.dataValue["app.S-APP-0108"],used:t.dataValue["S-APP-0109"]||t.dataValue["app.S-APP-0109"]}}),0<e.appList.length?e.appList=[].concat((0,c.Z)(e.appList),(0,c.Z)(a)):e.appList=a,e.pageIndex++,e.appList.length!=t.data.total)&&!(t.data.datas.length<e.pageSize)||(e.finished=!0)}).catch(function(t){}).finally(function(){e.finished=!0,e.loading=!1})},onLoad:function(){this.getList()},onRefresh:function(){this.finished=!1,this.loading=!0,this.refreshing=!0,this.pageIndex=1,this.getList()},goDetail:function(t){this.$router.push({path:"/applicationDetail/".concat(t.id)})}}},u=(0,n(51900).Z)(a,function(){var e=this,i=e._self._c;return i("div",{staticClass:"common-card",style:{height:"".concat(e.cardHeight)}},[e.title?i("div",{staticClass:"card-title"},[i("p",[i("img",{attrs:{src:n(33996),alt:""}}),e._v(" "),i("span",[e._v(e._s(e.title))])])]):e._e(),e._v(" "),i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[i("van-list",{attrs:{finished:e.finished},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.appList,function(a,t){return i("div",{key:t,staticClass:"list-box",on:{click:function(t){return e.goDetail(a)}}},[i("div",{staticClass:"top-content"},[i("div",{staticClass:"app-info"},[i("img",{attrs:{src:a.icon,alt:""}}),e._v(" "),i("div",[i("p",[e._v(e._s(a.text))]),e._v(" "),i("span",[e._v(e._s(a.module))])])]),e._v(" "),i("van-rate",{attrs:{size:12,color:"#F19927","void-icon":"star","void-color":"#eee",readonly:""},model:{value:a.rate,callback:function(t){e.$set(a,"rate",t)},expression:"item['rate']"}})],1),e._v(" "),i("div",{staticClass:"bottom-content"},[i("span",[e._v("发布时间："+e._s(a.time))]),e._v(" "),i("span",[e._v("使用量："+e._s(a.used||0))])])])}),0)],1),e._v(" "),e.appList.length||e.loading?e._e():i("commonempty")],1)},[],!1,null,"9e47efe0",null).exports},33996:function(t,a,e){t.exports=e.p+"static/img/icon-line.22d6bd9..png"}}]);