"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[37659],{37659:function(t,e,n){n.r(e),n.d(e,{default:function(){return a}});var e=n(30007),i="",e={name:"fgwQB",components:{fgwheader:e.Z},data:function(){return{tabIndex:1,tabList:[{name:"已发送",type:1},{name:"已办结",type:2}],list:[],finished:!1,loading:!1,refreshing:!1,page:0,limit:5,searchValue:"",timer:null,scrollPages:0,vertical:!1}},computed:{},watch:{},methods:{checkScreen:function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;this.vertical=!(e<t)},alive:function(t){this.scrollPages=t.target.scrollTop},changeTab:function(t){this.tabIndex=t,this.searchValue="",this.doRefresh()},doRefresh:function(){this.list=[],this.page=0,this.finished=!1,this.refreshing=!0,this.loading=!0,this.onLoad()},onLoad:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.refreshing&&(e.list=[],e.page=0,e.refreshing=!1),dsf.http.post("/fn/developmentOffice/dutyData",{type:"qb",kind:e.tabIndex,bt:e.searchValue,page:e.page}).then(function(t){t=t.data;200!=t.code||(t&&t.data&&0<t.data.length&&(t.data.forEach(function(t){t.time=t.time?moment(new Date(t.time)).format("YYYY-MM-DD"):""}),e.list=e.list.concat(t.data)),t.data.length<e.limit)?e.finished=!0:e.page+=1}).catch(function(t){t=t.message;e.finished=!0,dsf.layer.toast(t)}).finally(function(){e.loading=!1,e.refreshing=!1})},1e3)},onSearch:function(t){this.doRefresh()},link:function(t,e){var n=this;this.$set(this.list[e],"whetherRead","1"),dsf.http.post("fn//fgw/todo/setRead",{id:t.id}).done(function(t){}).error(function(t){}).finally(function(){n.$router.push({name:"dsfIframe",query:{url:t.url,title:t.bt}})})}},created:function(){},mounted:function(){var t=this;this.checkScreen(),window.addEventListener("resize",function(){t.checkScreen()})},destroyed:function(){},beforeRouteEnter:function(t,e,n){i=e.name,n()},activated:function(){"dsfIframe"!=i?this.doRefresh():this.$refs.list.scrollTop=this.scrollPages}},a=(0,n(51900).Z)(e,function(){var i=this,t=i._self._c;return t("div",{staticClass:"fgwDB",class:{verticalx:i.vertical}},[t("fgwheader",{attrs:{showBack:!0},on:{reflush:i.doRefresh}}),i._v(" "),t("div",{staticClass:"fcontain"},[t("div",{staticClass:"tabs"},[t("p",{staticClass:"tab"},i._l(i.tabList,function(e){return t("span",{key:e.type,class:{active:e.type==i.tabIndex},on:{click:function(t){return i.changeTab(e.type)}}},[i._v(i._s(e.name))])}),0)]),i._v(" "),t("div",{ref:"list",staticClass:"listbox",on:{scroll:i.alive}},[0!=i.list.length||i.loading?i._e():t("commonempty"),i._v(" "),t("van-list",{attrs:{finished:i.finished,"finished-text":""},on:{load:i.onLoad},model:{value:i.loading,callback:function(t){i.loading=t},expression:"loading"}},i._l(i.list,function(e,n){return t("div",{key:e.id,staticClass:"dblist",class:{unread:"0"==e.whetherRead},on:{click:function(t){return i.link(e,n)}}},[t("p",{staticClass:"title"},[i._v(i._s(e.bt))]),i._v(" "),t("div",{staticClass:"right"},[1==i.tabIndex?t("p",[t("img",{attrs:{src:"static/images/project/fgwPad/user.png",alt:""}}),i._v(" "),t("span",[i._v(i._s(e.userName))])]):i._e(),i._v(" "),t("p",[t("img",{attrs:{src:"static/images/project/fgwPad/date.png",alt:""}}),i._v(" "),t("span",[i._v(i._s(e.time))])])])])}),0)],1)])],1)},[],!1,null,"2f6742c3",null).exports},30007:function(t,e,n){n.d(e,{Z:function(){return i}});var e=n(79529),o=n.n(e),c=n(25108),e={name:"headerimg",props:{showBack:{type:!1,default:!1}},components:{},data:function(){return{vertical:!1}},computed:{},watch:{},methods:{goBack:function(){this.$router.go(-1)},checkScreen:function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;this.vertical=!(e<t)},initSize:function(){var t,e=window.document,a=e.documentElement,n="orientationchange"in window?"orientationchange":"resize",s="",i=function t(){var e,n,i=a.getBoundingClientRect().width;return s&&s==i||(s=i,i=dsf.util.loadLocalStore("multiple")||dsf.util.loadLocalStore("fontSizeMultiple")||5,e=document.documentElement.clientWidth,n=document.documentElement.clientHeight,-1<window.location.href.indexOf("meetingPad")?a.style.fontSize=s/51.2+"px":-1<window.location.href.indexOf("shGovSM")||n<e&&(-1<window.location.href.indexOf("deptNews")||-1<window.location.href.indexOf("fgwStaging")||-1<window.location.href.indexOf("fgwPad"))?(n=a.clientWidth/128*5,a.style.fontSize=n+"px"):a.style.fontSize=Math.max(Math.min(s/750*20,11.2),8.55)*i+"px"),t}();try{a.setAttribute("data-dpr",window.navigator.appVersion.match(/iphone/gi)?window.devicePixelRatio:1),1<window.navigator.userAgent.indexOf("like Mac OS X")&&(e.documentElement.classList.add("ios"),1<(t=navigator.appVersion?navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/):[]).length)&&8<=o()(t[1],10)&&e.documentElement.classList.add("hairline"),e.addEventListener&&(window.addEventListener(n,i,!1),e.addEventListener("DOMContentLoaded",i,!1))}catch(t){c.log(t)}}},created:function(){},mounted:function(){var t=this;this.checkScreen(),window.addEventListener("resize",function(){t.initSize(),t.checkScreen()})},destroyed:function(){}},i=(0,n(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"headerimg",class:{vertical:e.vertical}},[e._m(0),e._v(" "),t("div",{staticClass:"btns"},[t("span",{staticClass:"reflush",on:{click:function(t){return e.$emit("reflush")}}},[e._v("刷新")]),e._v(" "),e.showBack?t("span",{staticClass:"reflush",on:{click:e.goBack}},[e._v("返回")]):e._e()])])},[function(){var t=this._self._c;return t("div",{staticClass:"logoDiv"},[t("img",{staticClass:"logo",attrs:{src:"static/images/project/fgwPad/gh.png",alt:"",srcset:""}}),this._v(" "),t("img",{staticClass:"logo",attrs:{src:"static/images/project/fgwPad/title.png",alt:"",srcset:""}})])}],!1,null,"09294748",null).exports}}]);