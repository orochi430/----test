(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[70699],{23610:function(t,e,i){"use strict";i.d(e,{Z:function(){return n}});var e=i(77193),s=(i(41762),i(41956)),e={components:(0,e.Z)({},s.Z.name,s.Z),props:{file:{type:Object,default:function(){}},meetingId:{type:String},isShowCount:{type:Boolean,default:!0}},filters:{dateFormat:function(t){return t?dsf.date.format(t,"yyyy年mm月dd日 hh:ii"):""}},data:function(){return{fileType:{pdf:["pdf"],img:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],txt:["txt","sql","xml","html","css","js","java","php","bat","log"],word:["docx","docm","doc","dotx","dotm","dot"],xls:["xlsx","xlsm","xlsb","xls","xltx","xltm","xlt","xlam","xla","ods"],ppt:["pptx","pptm","ppt","potx","potm","pot","ppsx","ppsm","pps","ppam","ppa"]},hasFilePng:["ai","cloud","html","img","jpg","mp3","mp4","pdf","png","ppt","psd","rar","txt","word","wps","xls","zip","folder"],imgPreview:!1,previewImg:[]}},computed:{typeClass:function(){var t,e=this.file.type.toLowerCase();if(this.hasFilePng.includes(e))return i(83887)("./".concat(e,".png"));for(t in this.fileType)if(this.fileType[t].includes(e))return i(83887)("./".concat(t,".png"))}},methods:{link:function(){var e,i=this,s=this;"folder"==s.file.type?s.$router.push({name:"peopleCongressFile",params:{meetingId:s.meetingId,folderid:s.file.folderId},query:{title:s.file.folderName}}):(e="fn/peopleCongress/setRead",dsf.http.post(e,{fileId:s.file.fileId}).done(function(t){200==t.code&&(s.file.fileName.toLowerCase().includes(".png")||s.file.fileName.toLowerCase().includes(".jpg")||s.file.fileName.toLowerCase().includes(".jpeg")||s.file.fileName.toLowerCase().includes(".bmp")||s.file.fileName.toLowerCase().includes(".gif")?(e="peopleCongressFile"==s.$route.name?dsf.url.getWebPath("fn/conferenceFile/download?pk=".concat(s.file.fileId)):dsf.url.getWebPath("fn/mobileFileDownload/download?fileId=".concat(s.file.fileId,"&moduleId=").concat(s.file.moduleId,"&fileName=").concat(s.file.fileName)),i.imgPreview=!0,i.previewImg=[e]):(t="fn/office/openMobileOffice?fileId=".concat(s.file.fileId,"&moduleId=").concat(s.file.moduleId,"&nodeId=").concat(s.file.nodeId,"&flowId=").concat(s.file.flowId,"&filename=").concat(s.file.fileName),s.file.officeModuleId&&(t+="&officeModuleId=".concat(s.file.officeModuleId)),s.$router.push({name:"dsfIframe",params:{url:dsf.url.getServerUrl(t)}})))}).error(function(t){dsf.layer.toast("操作失败！")}).always(function(){}))}}},n=(0,i(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"file",on:{click:e.link}},[t("div",{staticClass:"typeIcon"},[t("img",{attrs:{src:e.typeClass,alt:""}}),e._v(" "),e.file.isNew?t("van-badge",{attrs:{dot:""}}):e._e()],1),e._v(" "),t("div",{staticClass:"info"},["folder"==e.file.type?t("div",[t("div",{staticClass:"title",domProps:{innerHTML:e._s(e.file.folderName)}}),e._v(" "),e.isShowCount?t("div",{staticClass:"num"},[e._v(e._s(e.file.filesCount)+"个文件")]):e._e()]):t("div",[t("div",{staticClass:"title",domProps:{innerHTML:e._s(e.file.fileName)}}),e._v(" "),e.isShowCount?t("div",{staticClass:"num"},[t("span",[e._v(e._s(e.file.viewCount)+"次查看")]),t("span",[e._v(e._s(e._f("dateFormat")(e.file.releaseTime)))])]):e._e()])])]),e._v(" "),t("van-image-preview",{attrs:{images:e.previewImg,closeable:""},model:{value:e.imgPreview,callback:function(t){e.imgPreview=t},expression:"imgPreview"}})],1)},[],!1,null,"0173f259",null).exports},70699:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return n}});var e=i(18428),s=i.n(e),e={components:{fileItem:i(23610).Z},data:function(){return{errored:!1,loading:null,news:null,active:0,files:[]}},created:function(){this.loading=dsf.layer.loading(),this.getNewsDetail()},mounted:function(){},methods:{getNewsDetail:function(){var i=this;dsf.http.post("fn/peopleCongress/newsDetail",{newsId:i.$route.params.newsId}).done(function(t){var e;200==t.code&&t.data&&(i.news=t.data,t.data.files)&&0<t.data.files.length&&(e=[],t.data.files.map(function(t){e.push(s()({},t,{type:t.fileName.substr(t.fileName.lastIndexOf(".")+1)}))}),(t=i.files).push.apply(t,e))}).error(function(t){i.errored=!0}).always(function(){dsf.layer.closeLoading(i.loading)})},setRead:function(){dsf.http.post("fn/peopleCongress/setNewsRead",{newsId:this.$route.params.newsId}).done(function(t){t.code}).error(function(t){dsf.layer.toast("设置已读失败！")}).always(function(){})}}},n=(0,i(51900).Z)(e,function(){var e=this,i=e._self._c;return e.errored?i("div",{staticClass:"init-div"},[e._v("获取数据失败！")]):i("div",[e.news&&e.news.files&&0<e.news.files.length?i("div",[i("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[i("van-tab",{attrs:{title:"详情"}},[e.news?i("div",{staticClass:"detail"},[i("div",{staticClass:"title"},[e._v(e._s(e.news.title))]),e._v(" "),i("div",{staticClass:"time"},[e._v(e._s(e.news.sDate))]),e._v(" "),i("div",{staticClass:"content",domProps:{innerHTML:e._s(e.news.content)}})]):i("div",{staticClass:"init-div"},[e._v("\n                    加载中…\n                ")])]),e._v(" "),i("van-tab",{attrs:{title:"附件"}},[e._l(e.files,function(t){return[i("file-item",{key:t.id,attrs:{file:t,"is-show-count":!1}})]})],2)],1)],1):e.news?i("div",{staticClass:"detail"},[i("div",{staticClass:"title"},[e._v(e._s(e.news.title))]),e._v(" "),i("div",{staticClass:"time"},[e._v(e._s(e.news.sDate))]),e._v(" "),i("div",{staticClass:"content",domProps:{innerHTML:e._s(e.news.content)}})]):i("div",{staticClass:"init-div"},[e._v("\n        加载中…\n    ")])])},[],!1,null,"88adb678",null).exports},83887:function(t,e,i){var s={"./ai.png":44936,"./cloud.png":54073,"./doc.png":39636,"./docx.png":70071,"./folder-team.png":36556,"./folder.png":7818,"./html.png":97744,"./img.png":32954,"./jpeg.png":90699,"./jpg.png":84693,"./mp3.png":77957,"./mp4.png":96128,"./ofd.png":88825,"./pdf.png":46616,"./png.png":95742,"./ppt.png":68985,"./psd.png":89041,"./rar.png":45074,"./txt.png":48339,"./word.png":26206,"./wps.png":83392,"./xls.png":49472,"./xlsx.png":81682,"./xml.png":66874,"./zip.png":99021};function n(t){t=o(t);return i(t)}function o(t){if(i.o(s,t))return s[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}n.keys=function(){return Object.keys(s)},n.resolve=o,(t.exports=n).id=83887},44936:function(t,e,i){"use strict";t.exports=i.p+"static/img/ai.692fadd..png"},54073:function(t,e,i){"use strict";t.exports=i.p+"static/img/cloud.e0e5c0c..png"},39636:function(t,e,i){"use strict";t.exports=i.p+"static/img/doc.178d734..png"},70071:function(t,e,i){"use strict";t.exports=i.p+"static/img/docx.178d734..png"},36556:function(t,e,i){"use strict";t.exports=i.p+"static/img/folder-team.256a132..png"},7818:function(t,e,i){"use strict";t.exports=i.p+"static/img/folder.b74dd1f..png"},97744:function(t,e,i){"use strict";t.exports=i.p+"static/img/html.aed4382..png"},32954:function(t,e,i){"use strict";t.exports=i.p+"static/img/img.1e66416..png"},90699:function(t,e,i){"use strict";t.exports=i.p+"static/img/jpeg.6690b6f..png"},84693:function(t,e,i){"use strict";t.exports=i.p+"static/img/jpg.6690b6f..png"},77957:function(t,e,i){"use strict";t.exports=i.p+"static/img/mp3.11779e9..png"},96128:function(t,e,i){"use strict";t.exports=i.p+"static/img/mp4.bf3626d..png"},88825:function(t,e,i){"use strict";t.exports=i.p+"static/img/ofd.aa35dda..png"},46616:function(t,e,i){"use strict";t.exports=i.p+"static/img/pdf.0431c10..png"},95742:function(t,e,i){"use strict";t.exports=i.p+"static/img/png.99cbe3b..png"},68985:function(t,e,i){"use strict";t.exports=i.p+"static/img/ppt.2dcd0da..png"},89041:function(t,e,i){"use strict";t.exports=i.p+"static/img/psd.10d45f5..png"},45074:function(t,e,i){"use strict";t.exports=i.p+"static/img/rar.5ca3e88..png"},48339:function(t,e,i){"use strict";t.exports=i.p+"static/img/txt.9b1d964..png"},26206:function(t,e,i){"use strict";t.exports=i.p+"static/img/word.178d734..png"},83392:function(t,e,i){"use strict";t.exports=i.p+"static/img/wps.d841695..png"},49472:function(t,e,i){"use strict";t.exports=i.p+"static/img/xls.e136da2..png"},81682:function(t,e,i){"use strict";t.exports=i.p+"static/img/xlsx.e136da2..png"},66874:function(t,e,i){"use strict";t.exports=i.p+"static/img/xml.aed4382..png"},99021:function(t,e,i){"use strict";t.exports=i.p+"static/img/zip.4b7a304..png"}}]);