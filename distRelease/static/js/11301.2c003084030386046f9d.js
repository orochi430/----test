"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[11301],{20803:function(a,t,e){e.r(t);var n=e(26243),u=e.n(n),n=e(73473),o=e.n(n),i=e(90541),n=(e(88561),e(80129)),r=e.n(n),l=e(25108),n={saveAfter:function(a,t,e){var n,u;a.$eventBus.refresh(a),a.$route.params.pk||a._pk?i.Z.layer.toast("表单保存成功"):(n=e.main.A0001.value,u=e.main.A0004.value,i.Z.layer.toast("表单保存成功",void 0,function(){a.$router.replace({path:"/commonTabs/CSGL",query:{moduleId:u,place_id:n,area_street_id:a.$route.query.fid,listId:"220516215358qflS2YIo7ZgUbhqIBJM",method:"edit"}})}))}},I=[],m=[];function C(a){i.Z.http.Axios.post(i.Z.url.getWebPath("/ctrl/street/getStreetByArea"),r().stringify({codes:a.split(",")},{arrayFormat:"brackets"}),{headers:{"x-auth-token":i.Z.util.loadSessionStore("loginToken")}}).then(function(t){l.log(t.data),I=[],t.data&&u()(t.data).forEach(function(a){I.push({remark:"",id:a,text:t.data[a],varClass:"layui-col-md3",value:a})})})}function c(a){i.Z.http.get("/fn/codemanage/getCodeListByFId?fId=".concat(a)).then(function(a){m=[],200==a.data.code&&a.data.data.forEach(function(a){m.push({remark:"",id:a.id,text:a.codeName,varClass:"layui-col-md3",value:a.codeValue})})})}n.initHandle=function(t,a,e){t.main["C-PLACE-INFORMATION-009"].value||e.$set(e.formData.main,"C-PLACE-INFORMATION-009",{value:e.$route.query.fid}),I=[],m=[];var n=a.controls.find(function(a){return"C-PLACE-INFORMATION-002"==a.metaId}).enumData,u=a.controls.find(function(a){return"C-PLACE-INFORMATION-006"==a.metaId}).enumData;t.main["C-PLACE-INFORMATION-002"].value.length&&C(n.find(function(a){return a.value==t.main["C-PLACE-INFORMATION-002"].value}).value),t.main["C-PLACE-INFORMATION-006"].value.length&&c(u.find(function(a){return a.value==t.main["C-PLACE-INFORMATION-006"].value}).id),e.$bus.on("checkVal",function(a){"C-PLACE-INFORMATION-002"==a.metaData.metaId?(e.$set(e.formData.main,"C-PLACE-INFORMATION-003",{value:"",text:""}),C(a.value),e.$set(e.formData.main,"C-PLACE-INFORMATION-005",{value:a.text+t.main["C-PLACE-INFORMATION-003"].text+t.main["C-PLACE-INFORMATION-004"].value})):"C-PLACE-INFORMATION-003"==a.metaData.metaId?e.$set(e.formData.main,"C-PLACE-INFORMATION-005",{value:t.main["C-PLACE-INFORMATION-002"].text+a.text+t.main["C-PLACE-INFORMATION-004"].value}):"C-PLACE-INFORMATION-006"==a.metaData.metaId&&(e.$set(e.formData.main,"C-PLACE-INFORMATION-007",{value:"",text:""}),c(u.find(function(a){return a.value==t.main["C-PLACE-INFORMATION-006"].value}).id))}),e.$bus.on("inpBus",function(a){"C-PLACE-INFORMATION-004"==a.metaData.metaId&&e.$set(e.formData.main,"C-PLACE-INFORMATION-005",{value:t.main["C-PLACE-INFORMATION-002"].text+t.main["C-PLACE-INFORMATION-003"].text+a.value})}),e.$bus.on("showCheckBox",function(a){"C-PLACE-INFORMATION-003"==a.metaData.metaId?t.main["C-PLACE-INFORMATION-002"].value?(a.controlData.columnsValue.columns=I,a.currentColumns=I):i.Z.layer.toast("请先选择区"):"C-PLACE-INFORMATION-007"==a.metaData.metaId&&(t.main["C-PLACE-INFORMATION-006"].value?(a.controlData.columnsValue.columns=m,a.currentColumns=m):i.Z.layer.toast("请先选择一级分类"))})},n.beforeDelete=function(a,n,t){return new(o())(function(t,e){i.Z.http.post("ctrl/expo/community/beforeDelete",{ids:n.parameters.pk}).then(function(a){(200==a.data.code?t:(i.Z.layer.toast(a.data.message),e))()}).error(function(a){e()})})},n.saveFilter=function(a,t,e){return new(o())(function(t,a){try{t()}catch(a){t()}})},t.default=n}}]);