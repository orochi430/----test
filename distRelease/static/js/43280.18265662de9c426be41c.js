"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[43280],{9046:function(t,e,a){a.r(e);var n=a(26243),o=a.n(n),n=a(73473),r=a.n(n),u=a(90541),n=(a(88561),a(80129)),i=a.n(n),s=a(25108),n={saveAfter:function(t,e,a){var n,o;t.$route.params.pk||t._pk?(u.Z.layer.toast("表单保存成功"),t.$eventBus.refresh(this)):(n=a.main.A0001.value,o=a.main.A0004.value,u.Z.layer.toast("表单保存成功",void 0,function(){t.$router.replace({path:"/commonTabs/DWGL",query:{moduleId:o,pk:n,formId:"220406201147rVA7eCOsQ0tTsNGCkH8",listId:"220406203601hhPx0FfhxCElijOfRu3",method:"edit"}})}))}},l=[];function c(t){u.Z.http.Axios.post(u.Z.url.getWebPath("/ctrl/street/getStreetByArea"),i().stringify({codes:t.split(",")},{arrayFormat:"brackets"}),{headers:{"x-auth-token":u.Z.util.loadSessionStore("loginToken")}}).then(function(e){s.log(e.data),l=[],e.data&&o()(e.data).forEach(function(t){l.push({remark:"",id:t,text:e.data[t],varClass:"layui-col-md3",value:t})})})}n.initHandle=function(e,t,a){l=[],t.controls.find(function(t){return"C-EXPO-MEETING-0003"==t.metaId}).controlType="controlMap";var n=t.controls.find(function(t){return"C-EXPO-MEETING-0008"==t.metaId}).enumData;e.main["C-EXPO-MEETING-0008"].value.length&&c(n.find(function(t){return t.value==e.main["C-EXPO-MEETING-0008"].value}).value),a.$bus.on("checkVal",function(e){"C-EXPO-MEETING-0008"==e.metaData.metaId&&(a.$set(a.formData.main,"C-EXPO-MEETING-0009",{value:"",text:""}),c(n.find(function(t){return t.value==e.value}).value))}),a.$bus.on("showCheckBox",function(t){"C-EXPO-MEETING-0009"==t.metaData.metaId&&(e.main["C-EXPO-MEETING-0008"].value?(t.controlData.columnsValue.columns=l,t.currentColumns=l):u.Z.layer.toast("请先选择区"))}),a.$bus.on("setAddress",function(t){"C-EXPO-MEETING-0003"==t.metaData.metaId&&(a.$set(a.formData.main,"C-EXPO-MEETING-0003",{value:t.address}),a.$set(a.formData.main,"C-EXPO-MEETING-0034",{value:t.lng}),a.$set(a.formData.main,"C-EXPO-MEETING-0035",{value:t.lat}))})},n.beforeDelete=function(t,n,e){return new(r())(function(e,a){u.Z.http.post("ctrl/expo/community/beforeDelete",{ids:n.parameters.pk}).then(function(t){(200==t.data.code?e:(u.Z.layer.toast(t.data.message),a))()}).error(function(t){a()})})},n.saveFilter=function(t,e,a){return new(r())(function(e,t){try{e()}catch(t){e()}})},e.default=n}}]);