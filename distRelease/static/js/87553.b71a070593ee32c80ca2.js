"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[87553],{29037:function(a,e,n){n.r(e);var f=n(5044),t=n(62207),r=n.n(t),t=n(73473),o=n.n(t),s=n(25108),t={};function l(e,a,n,t,o,l,m){var u,i;-1<a.findIndex(function(a){return a==e})&&(u=[].concat((0,f.Z)(n),(0,f.Z)(t)),i=["B0001","210516140234MX9BO2nntcUAkJz8lfG","210516155135ngyIySp4Qq5o69vKRjR","210516135726sWtlb3XK0PYw6OWI3f4","210516140131P6n7d3IznSMKEIVkkXx","210516155749ZBCbuP0P0B7LVQSM8WV","210516140700T6SbXhe9vBLiL9hnpTv","210516184850OO9slh3poyAMTxjDTs8","210516155408Cxnwf3lIeQbKyeUmsa0","21051614040890pNP7hOnN9E7zBWpEL","210516155226bsjXao7qOnuZlE0LKfd","210516155538gECNJGTmNX0GdQv5V8Y","2105161600568mzXy0Fyy1Jm4ExNyLu","210516155909dVMxSoRwHMqZND6SIhs","220507150222vrOAMr6Y0i8c6uogtDq","220507150517UFVKbhV4kgCqvXpa4fy"].filter(function(a){return!u.includes(a)}),o.controls.forEach(function(e,a){n.findIndex(function(a){return a==e.metaId}),t.findIndex(function(a){return a==e.metaId}),-1<i.findIndex(function(a){return a==e.metaId})&&("controlDateTime"==e.controlType?l.main[e.metaId].value="1900-01-01":"210516155408Cxnwf3lIeQbKyeUmsa0"==e.metaId?l.main[e.metaId].value="0":"210516155749ZBCbuP0P0B7LVQSM8WV"==e.metaId?m.$set(m.formData.main,"210516155749ZBCbuP0P0B7LVQSM8WV",{value:"1",text:"8:30-9:00"}):l.main[e.metaId].value=" ")})),s.log("formData.main",l.main)}function v(a){a=a.replace(/-/g,"/");return Date.parse(a)}function d(a,e){for(var n=v(a),t=(v(e)-n)/864e5+1,o=0,l=0;l<t;l++)0!=new Date(n).getDay()&&6!=new Date(n).getDay()||o++,n=n.valueOf(),n+=864e5,n=new Date(n);return t-o}function c(a,e,n,t){var o=["B0001","210516135726sWtlb3XK0PYw6OWI3f4","2105161600568mzXy0Fyy1Jm4ExNyLu","210516155909dVMxSoRwHMqZND6SIhs","220107160435ZiOZKoWrY5sIb9TtOnM","220507150222vrOAMr6Y0i8c6uogtDq","220507150517UFVKbhV4kgCqvXpa4fy","controlMobileFl","controlMobileFlowInfo"];l(a,["1","2","3","4","5"],o,["210516140234MX9BO2nntcUAkJz8lfG","210516155135ngyIySp4Qq5o69vKRjR","210516140700T6SbXhe9vBLiL9hnpTv","210516184850OO9slh3poyAMTxjDTs8","210516155408Cxnwf3lIeQbKyeUmsa0"],n,e,t),l(a,["6","7","8","9","11","13"],o,["210516140234MX9BO2nntcUAkJz8lfG","210516155135ngyIySp4Qq5o69vKRjR","210516155408Cxnwf3lIeQbKyeUmsa0"],n,e,t),l(a,["12"],o,["210516140234MX9BO2nntcUAkJz8lfG","210516155135ngyIySp4Qq5o69vKRjR","210516155749ZBCbuP0P0B7LVQSM8WV"],n,e,t),l(a,["14"],o,["210516140234MX9BO2nntcUAkJz8lfG","210516155135ngyIySp4Qq5o69vKRjR","210516140131P6n7d3IznSMKEIVkkXx","210516140700T6SbXhe9vBLiL9hnpTv","210516184850OO9slh3poyAMTxjDTs8","210516155408Cxnwf3lIeQbKyeUmsa0"],n,e,t),l(a,["10"],o,["21051614040890pNP7hOnN9E7zBWpEL","210516155226bsjXao7qOnuZlE0LKfd","210516155538gECNJGTmNX0GdQv5V8Y"],n,e,t)}function p(a,e,n){a={sDate:a.main["210516140234MX9BO2nntcUAkJz8lfG"].value,eDate:a.main["210516155135ngyIySp4Qq5o69vKRjR"].value,type:"1",jb:a.main["210516135726sWtlb3XK0PYw6OWI3f4"].value,currentYear:a.main["2107021129251NdUhtjqzWLB6O5UhLc"].value,userId:a.main.A0010.value};dsf.http.post("fn/zjdxCommon/getTotalQjCount",a).then(function(a){a=a.data;"success"==a.type&&n.$set(n.formData.main,"220107160435ZiOZKoWrY5sIb9TtOnM",{value:a.message})})}function I(a,e,n){var t=a.main["210516140234MX9BO2nntcUAkJz8lfG"].value,o=a.main["210516155135ngyIySp4Qq5o69vKRjR"].value,l=a.main["210516135726sWtlb3XK0PYw6OWI3f4"].value,m=a.main["210516184850OO9slh3poyAMTxjDTs8"].value,a=a.main["210516140700T6SbXhe9vBLiL9hnpTv"].value;t&&o&&(t==o&&m&&a&&a<m?dsf.layer.toast("开始时间不能大约结束时间！"):((t={sDate:t,eDate:o,sHalfDay:m,eHalfDay:a}).type=l&&"2"==l||"4"==l||"5"==l||"13"==l||"15"==l||"16"==l||"9"==l?"1":"2",dsf.http.post("fn/zjdxCommon/getWorkDayCount",t).then(function(a){a=a.data;"success"==a.type&&n.$set(n.formData.main,"210516155408Cxnwf3lIeQbKyeUmsa0",{value:a.message})})))}function m(a,e){a=a.replace(/\-/g,"/");var n=new Date(a),a=new Date(a),n=(a.setDate(n.getDate()+e),a.getMonth()+1);return n.toString().length<=1&&(n="0"+(a.getMonth()+1)),a.getFullYear()+"-"+n+"-"+a.getDate()}function y(a,e,n){var t,o=a.main["210516140234MX9BO2nntcUAkJz8lfG"].value,l=n.formData.main["210516135726sWtlb3XK0PYw6OWI3f4"].value;""!=o&&"6"==l&&("1"==(t=a.main["22010610070883hqhFMXrNjx1piyF9S"].value)?n.$set(n.formData.main,"210516155135ngyIySp4Qq5o69vKRjR",{value:m(o,157)}):"2"!=t&&"3"!=t||n.$set(n.formData.main,"210516155135ngyIySp4Qq5o69vKRjR",{value:m(o,187)})),""!=o&&"17"==l&&("1"==a.main["221219153059TiO11shpeRdblDYQYjn"].value?n.$set(n.formData.main,"210516155135ngyIySp4Qq5o69vKRjR",{value:m(o,6)}):"2"==a.main["221219153059TiO11shpeRdblDYQYjn"].value&&n.$set(n.formData.main,"210516155135ngyIySp4Qq5o69vKRjR",{value:m(o,4)}))}t.handle=function(a,e,n,t,o,l){n.main["210516135726sWtlb3XK0PYw6OWI3f4"].value},t.initHandle=function(m,u,i){var a,e,n;c(m.main["210516135726sWtlb3XK0PYw6OWI3f4"].value,m,u,i),e=i,(n={}).currentYear=(a=m).main["2107021129251NdUhtjqzWLB6O5UhLc"].value,n.userId=a.main.A0010.value,n.pk=e.formMeta.parameters.pk,dsf.http.post("fn/zjdxOfficeInfo/getLeaveWorkDays",n).then(function(a){a=a.data;"success"==a.type&&(e.$set(e.formData.main,"220507150222vrOAMr6Y0i8c6uogtDq",{value:a.data.days.toString()}),e.$set(e.formData.main,"220507150517UFVKbhV4kgCqvXpa4fy",{value:a.data.sjDays.toString()}))}),p(m,0,i),i.$bus.on("inputRadio",function(a){"22010610070883hqhFMXrNjx1piyF9S"==a.metaData.metaId&&(y(m,0,i),I(m,0,i))}),i.$bus.on("checkVal",function(e){var a,n,t,o,l;"221219153059TiO11shpeRdblDYQYjn"==e.metaData.metaId&&(y(m,0,i),I(m,0,i)),"210516135726sWtlb3XK0PYw6OWI3f4"==e.metaData.metaId&&(n=(a=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate())+" "+(new Date).getHours()+":"+(new Date).getMinutes(),p(m,0,i),c(e.value,m,u,i),"4"==e.value&&(o=m,t=i,(l=u).controls.find(function(a){return"210709135321bcY3oP1kQmIxbC4ujhO"==a.metaId}),(l={}).currentYear=o.main["2107021129251NdUhtjqzWLB6O5UhLc"].value,l.userId=o.main.A0010.value,l.pk=t.formMeta.parameters.pk,dsf.http.post("fn/zjdxOfficeInfo/getAddWorkDays",l).then(function(a){a=a.data;"success"==a.type&&t.$set(t.formData.main,"210709135321bcY3oP1kQmIxbC4ujhO",{value:a.data.txDays.toString()})})),i.$route.params.pk||("10"==e.value&&(i.$set(i.formData.main,"21051614040890pNP7hOnN9E7zBWpEL",{value:n}),i.$set(i.formData.main,"210516155226bsjXao7qOnuZlE0LKfd",{value:n})),-1<["1","2","3","4","5","6","7","8","9","11","12","13","14"].findIndex(function(a){return a==e.value})&&(i.$set(i.formData.main,"210516140234MX9BO2nntcUAkJz8lfG",{value:a}),i.$set(i.formData.main,"210516155135ngyIySp4Qq5o69vKRjR",{value:a}))),y(m,0,i)),"210516184850OO9slh3poyAMTxjDTs8"!=e.metaData.metaId&&"210516140700T6SbXhe9vBLiL9hnpTv"!=e.metaData.metaId||(l=o=0,d(i.formData.main["210516140234MX9BO2nntcUAkJz8lfG"].value,i.formData.main["210516155135ngyIySp4Qq5o69vKRjR"].value),o="下午"==i.formData.main["210516184850OO9slh3poyAMTxjDTs8"].text?-.5:o,l="上午"==i.formData.main["210516140700T6SbXhe9vBLiL9hnpTv"].text?-.5:l,I(m,0,i)),s.log("busObj",e)}),i.$bus.on("selectDateTime",function(a){var e,n,t,o,l;s.log("busObj",a),"210516140234MX9BO2nntcUAkJz8lfG"!=a.metaData.metaId&&"210516155135ngyIySp4Qq5o69vKRjR"!=a.metaData.metaId||(e=i.formData.main["210516135726sWtlb3XK0PYw6OWI3f4"].value,-1<["1","2","3","4","5","6","7","8","9","11","12","13","14"].findIndex(function(a){return a==e})?(n=v(i.formData.main["210516140234MX9BO2nntcUAkJz8lfG"].value),v(i.formData.main["210516155135ngyIySp4Qq5o69vKRjR"].value)<n?(dsf.layer.toast("请假结束时间必须晚于请假开始时间"),i.$set(i.formData.main,"210516155408Cxnwf3lIeQbKyeUmsa0",{value:0})):(d(i.formData.main["210516140234MX9BO2nntcUAkJz8lfG"].value,i.formData.main["210516155135ngyIySp4Qq5o69vKRjR"].value),-1<["1","2","3","4","5"].findIndex(function(a){return a==e})&&(t=n=0,n="下午"==i.formData.main["210516184850OO9slh3poyAMTxjDTs8"].text?-.5:n,t="上午"==i.formData.main["210516140700T6SbXhe9vBLiL9hnpTv"].text?-.5:t))):"10"==e&&(n=v(i.formData.main["21051614040890pNP7hOnN9E7zBWpEL"].value),t=v(i.formData.main["210516155226bsjXao7qOnuZlE0LKfd"].value),r()(i.formData.main["210516155538gECNJGTmNX0GdQv5V8Y"].value),o=(l=t-n)%36e5,o=r()((.1*Math.floor(o/36e4)).toFixed(1)),l=Math.floor(l/36e5)+o,t<n?(dsf.layer.toast("临请结束时间必须晚于临请开始时间"),i.$set(i.formData.main,"210516155538gECNJGTmNX0GdQv5V8Y",{value:0})):i.$set(i.formData.main,"210516155538gECNJGTmNX0GdQv5V8Y",{value:l})),"210516155135ngyIySp4Qq5o69vKRjR"!=a.metaData.metaId&&y(m,0,i),I(m,0,i))})},t.saveFilter=function(m,u,i,a){return new(o())(function(n,t){var a,e=m.main["210516135726sWtlb3XK0PYw6OWI3f4"].value,o=m.main["210516155408Cxnwf3lIeQbKyeUmsa0"].value,l=("15"==e&&10<o?t("夫妻育儿假不能超过10天"):"13"==e&&15<o?t("男方护理假不能超过15天"):"16"==e&&5<o?t("独生子女陪护父母假假不能超过5天"):"7"==e&&3<o?t("婚假不能超过3天"):"9"==e&&3<o?t("丧假不能超过3天"):"5"==e&&15<o?t("年休假不能超过15天"):"6"==e&&((l=m.main["22010610070883hqhFMXrNjx1piyF9S"].value)&&"1"==l&&158<o?t("妇女产假-第一胎 不能超过158天"):l&&("2"==l||"3"==l)&&188<o&&t("妇女产假-第二、三胎 不能超过188天")),-1<["1","2","3","4","5","6","7","8","9","11","12","13","14"].findIndex(function(a){return a==e})?(l=r()(m.main["210516155408Cxnwf3lIeQbKyeUmsa0"].value),o=v(m.main["210516140234MX9BO2nntcUAkJz8lfG"].value),v(m.main["210516155135ngyIySp4Qq5o69vKRjR"].value)<o&&t("请假结束时间必须晚于请假开始时间"),"12"!=e&&l<=0&&t("请输入请假天数"),"12"==e&&""==m.main["210516155749ZBCbuP0P0B7LVQSM8WV"].value.replace(/^\s*|\s*$/g,"")&&t("请输入具体时间段"),"14"==e&&m.main["210516140131P6n7d3IznSMKEIVkkXx"].value.replace(/^\s*|\s*$/g,"").length<=0&&t("请输入特殊假期备注")):"10"==e&&(o=v(m.main["21051614040890pNP7hOnN9E7zBWpEL"].value),l=v(m.main["210516155226bsjXao7qOnuZlE0LKfd"].value),a=r()(m.main["210516155538gECNJGTmNX0GdQv5V8Y"].value),l<o&&t("临请结束时间必须晚于临请开始时间"),a<=0)&&t("请输入请假时长"),m.main["210516135726sWtlb3XK0PYw6OWI3f4"].value);s.log(l,i.pk),"3"==l||"6"==l||"13"==l||"15"==l||"16"==l?i.pk?(o={info_id:u.parameters.pk,infoId:u.parameters.pk,moduleId:u.parameters.moduleId,nodeId:u.parameters.nodeId,start:0,limit:10,flowId:u.parameters.flowId},dsf.http.post("fn/mobileAttachment/getFormAttachment",o).then(function(a){var e=0;a.data.rows.forEach(function(a){a.document&&0<a.document.length&&e++}),s.log(e),0<e?n():t("请上传附件")}).error(function(a){s.log(a),t("获取附件异常")})):(s.log(i.allFile),i.allFile[0].file.length?n():t("请上传附件")):n()})},e.default=t}}]);