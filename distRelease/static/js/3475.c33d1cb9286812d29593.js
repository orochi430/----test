"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[3475],{3475:function(t,n,e){e.r(n),e.d(n,{default:function(){return p}});var n=e(8450),i=e.n(n),r=e(25108),n={name:"blockMenu",props:{mainMenu:{type:Array,default:function(){return[]}}},data:function(){return{default_img:'this.src="'+e(52817)+'"',isShowPopup:!1,currentMenuList:[]}},created:function(){},mounted:function(){},methods:{openMenuList:function(t){var n=this;this.isShowPopup=!0,this.currentMenuList=t.child,this.$nextTick(function(){n.$refs.childListContainer.scrollTo(0,0)})},goRoute:function(t){r.log("菜单点击",t),t.type&&3==t.type?this.openDDApp(t.router):2==t.type?dsf.config.ddSetting.isDing?dd.biz.util.openLink({url:t.router,onSuccess:function(t){},onFail:function(t){}}):this.$router.push({path:"iframe",params:{url:t.router}}):t.props?t.props.props?this.$router.push({path:t.router,query:JSON.parse(i()(t.props))}):this.$router.push({name:t.router,params:JSON.parse(i()(t.props))}):this.$router.push({path:t.router})}},filters:{formatBadge:function(t){return t<99?t:"99+"}}},s=e(51900),n=(0,s.Z)(n,function(){var e=this,i=e._self._c;return i("div",{attrs:{id:"block-menu"}},[i("div",{staticClass:"menu-list-container"},e._l(e.mainMenu,function(n,t){return i("div",{key:t},[i("div",{staticClass:"menu-list"},[i("div",{staticClass:"menu-title"},[i("img",{attrs:{src:n.img}}),e._v(" "),i("div",[i("span",[e._v(e._s(n.name))]),e._v(" "),i("div",{on:{click:function(t){return e.openMenuList(n)}}},[i("span",[e._v("更多")]),e._v(" "),i("van-icon",{attrs:{name:"arrow"}})],1)])]),e._v(" "),i("div",{staticClass:"menu-child"},e._l(n.child.slice(0,4),function(n,t){return i("div",{on:{click:function(t){return e.goRoute(n)}}},[i("img",{attrs:{src:n.img,onerror:e.default_img}}),e._v(" "),i("span",[e._v(e._s(n.name))]),e._v(" "),n.badgeNum?i("div",{staticClass:"badge"},[e._v(e._s(e._f("formatBadge")(n.badgeNum)))]):e._e()])}),0)])])}),0),e._v(" "),i("van-popup",{staticClass:"child-list-container",attrs:{round:""},model:{value:e.isShowPopup,callback:function(t){e.isShowPopup=t},expression:"isShowPopup"}},[i("div",{ref:"childListContainer"},e._l(e.currentMenuList,function(n,t){return i("div",{key:t,staticClass:"child-list",on:{click:function(t){return e.goRoute(n)}}},[i("img",{attrs:{src:n.img,onerror:e.default_img}}),e._v(" "),i("span",[e._v(e._s(n.name.slice(0,5)))]),e._v(" "),i("span",{staticClass:"name-wrap"},[e._v(e._s(n.name.slice(5,10)))])])}),0)])],1)},[],!1,null,"68ad728a",null).exports,u=e(5040),a=e(25108),o={name:"blockMenuPad",props:{mainMenu:{type:Array,default:function(){return[]}}},data:function(){return{default_img:'this.src="'+e(52817)+'"',isShowPopup:!1,currentMenuList:[]}},created:function(){a.log(this.mainMenu),this.userInfo=dsf.util.loadSessionStore("user"),u.Z.set(this.userInfo.name)},mounted:function(){},destroyed:function(){u.Z.hide()},methods:{openMenuList:function(t){var n=this;this.isShowPopup=!0,this.currentMenuList=t.child,this.$nextTick(function(){n.$refs.childListContainer.scrollTo(0,0)})},goRoute:function(t){a.log("菜单点击",t),t.type&&3==t.type?this.openDDApp(t.router):2==t.type?dsf.config.ddSetting.isDing?dd.biz.util.openLink({url:t.router,onSuccess:function(t){},onFail:function(t){}}):this.$router.push({path:"iframe",params:{url:t.router}}):t.props?t.props.props?this.$router.push({path:t.router,query:JSON.parse(i()(t.props))}):this.$router.push({name:t.router,params:JSON.parse(i()(t.props))}):this.$router.push({path:t.router})}},filters:{formatBadge:function(t){return t<99?t:"99+"}}},o=(0,s.Z)(o,function(){var e=this,i=e._self._c;return i("div",{attrs:{id:"block-menu-pad"}},[i("div",{staticClass:"menu-list-container"},e._l(e.mainMenu,function(n,t){return i("div",{key:t},[i("div",{staticClass:"menu-list"},[i("div",{staticClass:"menu-title"},[i("img",{attrs:{src:n.img,alt:""}}),e._v(" "),i("div",[i("span",[e._v(e._s(n.name))]),e._v(" "),i("div",{on:{click:function(t){return e.openMenuList(n)}}},[i("span",[e._v("更多")]),e._v(" "),i("van-icon",{attrs:{name:"arrow"}})],1)])]),e._v(" "),i("div",{staticClass:"menu-child"},e._l(n.child.slice(0,4),function(n,t){return i("div",{on:{click:function(t){return e.goRoute(n)}}},[i("div",{staticClass:"text_right"},[i("img",{attrs:{src:n.img,onerror:e.default_img}})]),e._v(" "),i("div",{staticClass:"child-content text_left"},[i("span",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(n.name)+"\n\t\t\t\t\t\t\t\t"),n.badgeNum?i("i",{staticClass:"badge"},[e._v(e._s(e._f("formatBadge")(n.badgeNum)))]):e._e()])])])}),0)])])}),0),e._v(" "),i("van-popup",{staticClass:"child-list-container",attrs:{round:""},model:{value:e.isShowPopup,callback:function(t){e.isShowPopup=t},expression:"isShowPopup"}},[i("div",{ref:"childListContainer"},e._l(e.currentMenuList,function(n,t){return i("div",{key:t,staticClass:"child-list",on:{click:function(t){return e.goRoute(n)}}},[i("img",{attrs:{src:n.img,onerror:e.default_img}}),e._v(" "),i("span",[e._v(e._s(n.name.slice(0,5)))]),e._v(" "),i("span",{staticClass:"name-wrap"},[e._v(e._s(n.name.slice(5,10)))])])}),0)])],1)},[],!1,null,"0d9c88ae",null).exports,c=e(25108),l={name:"tiledMenu",props:{mainMenu:{type:Array,default:function(){return[]}}},data:function(){return{default_img:'this.src="'+e(52817)+'"'}},watch:{mainMenu:function(t,n){c.log(t)}},created:function(){},mounted:function(){},methods:{goRoute:function(t){c.log("菜单点击",t),t.type&&3==t.type?this.openDDApp(t.router):2==t.type?dsf.config.ddSetting.isDing?dd.biz.util.openLink({url:t.router,onSuccess:function(t){},onFail:function(t){}}):this.$router.push({path:"iframe",params:{url:t.router}}):t.props?t.props.props?this.$router.push({path:t.router,query:JSON.parse(i()(t.props))}):this.$router.push({name:t.router,params:JSON.parse(i()(t.props))}):this.$router.push({path:t.router})}}},l=(0,s.Z)(l,function(){var e=this,i=e._self._c;return i("div",{attrs:{id:"tiled-menu"}},[i("div",e._l(e.mainMenu,function(n,t){return i("div",{key:t,staticClass:"item-container",on:{click:function(t){return e.goRoute(n)}}},[i("img",{attrs:{src:n.img,onerror:e.default_img}}),e._v(" "),i("span",[e._v(e._s(n.name))])])}),0)])},[],!1,null,"35790d95",null).exports,d=e(25108),p=(0,s.Z)({name:"appManageCenter",components:{blockMenu:n,blockMenuPad:o,tiledMenu:l},data:function(){return{mainMenu:[],myMenus:[],currentMainMenuId:this.$route.query.menuid,isShowBlockMenu:!1,isTablet:!1}},created:function(){var t=navigator.userAgent,n=/(?:Android)/.test(t),e=/(?:Firefox)/.test(t);this.isTablet=/(?:iPad|PlayBook)/.test(t)||n&&!/(?:Mobile)/.test(t)||e&&/(?:Tablet)/.test(t),d.log(this.isTablet,navigator.userAgent)},mounted:function(){this.getMenu()},methods:{getMenu:function(){var t,n=this,e=this,r=[];dsf.util.loadLocalStore("mySetting")&&((t=dsf.util.loadLocalStore("mySetting")).forEach(function(n){n.isshow=!0,n.badgeNum=0,n.badge&&""!=n.badge&&dsf.http.post(n.badge,{}).then(function(t){n.badgeNum=t.data.badge})}),this.myMenus=t,d.log(this.myMenus)),dsf.http.post("fn/newFile/shortcutDing",{}).then(function(t){t.data.data.forEach(function(t){var i={img:t.shortcutIcon,name:t.shortcutName,id:t.id,isOpen:!1,child:[]};t.children.forEach(function(t){var n=t.agentid;try{""!=n&&(n=JSON.parse(n))}catch(t){n={}}var e={id:t.id,isOpen:!1,name:t.shortcutName,badge:t.tip,router:t.actUrl,img:t.shortcutIcon,props:n,type:t.shortcutType,child:[]};t.children.forEach(function(t){t={id:t.id,isOpen:!1,name:t.shortcutName,badge:t.tip,router:t.actUrl,img:t.shortcutIcon,props:n,type:t.shortcutType,child:[]};e.child.push(t)}),i.child.push(e)}),r.push(i)}),r.forEach(function(t){d.log(t.name),t.child.forEach(function(n){n.badgeNum=0,n.isshow=!0;var t=e.myMenus.filter(function(t){return t.name==n.name});n.hasMyMenu=t.length,n.badge&&""!=n.badge&&dsf.http.post(n.badge,{}).then(function(t){n.badgeNum=t.data.badge||t.data.data})})}),e.mainMenu=r,d.log(e.mainMenu),n.currentMainMenuId?e.getCurrentMenu():n.isShowBlockMenu=!0,d.log(e.mainMenu)})},getCurrentMenu:function(){var n=this,t=this.mainMenu.filter(function(t){return t.id==n.currentMainMenuId});document.title=t[0].name,t.length?1<t[0].child.length?this.mainMenu=t[0].child:1==t[0].child.length?this.mainMenu=t[0].child[0].child:this.mainMenu=[]:this.mainMenu=[],this.mainMenu.filter(function(t){return t.child.length}).length&&(this.isShowBlockMenu=!0)},getTitleImg:function(t){var n="";switch(t){case"公文管理":n="gwgl";break;case"会议中心":n="hyzx";break;case"督查督办":n="dcdb";break;case"个人中心":n="grzx";break;case"行政事务":n="xzsw";break;case"政府值班":n="zfzb";break;case"待办待阅":n="dbdy";break;case"综合服务":n="zhfu"}return n}}},function(){var t=this,n=t._self._c;return n("div",{attrs:{id:"app-manage-center"}},[t.isShowBlockMenu&&t.mainMenu.length&&!t.isTablet?n("blockMenu",{attrs:{mainMenu:t.mainMenu}}):t._e(),t._v(" "),t.isShowBlockMenu&&t.mainMenu.length&&t.isTablet?n("blockMenuPad",{attrs:{mainMenu:t.mainMenu}}):t._e(),t._v(" "),!t.isShowBlockMenu&&t.mainMenu.length?n("tiledMenu",{attrs:{mainMenu:t.mainMenu}}):t._e(),t._v(" "),t.mainMenu.length?t._e():n("commonempty")],1)},[],!1,null,"581a1e02",null).exports},52817:function(t,n,e){t.exports=e.p+"static/img/menu8.798394b..png"}}]);