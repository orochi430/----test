(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[80809,17649,24570,56535],{45604:function(t,e,o){"use strict";var n={},a=o(33684);a.keys().forEach(function(t){var e=a(t);n[t.replace(/^\.\/(.*)\.\w+$/,"$1")]=e.default}),e.Z=n},81926:function(t,e){"use strict";e.Z={relations:[{}],controls:[{controlId:"a0001",label:"文本框",showLevel:"1",metaId:"C-GW-FW-0001",controlType:"controlTextBox",placeholder:"文本框提示信息,输入文字后消失",defaultValue:"默认值",format:"yyyy-MM-dd",readonly:!1,restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger",formatterFn:"fn"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"}},enumData:[{text:"上海",value:"shanghai"},{text:"成都",value:"chengdu"}]},{controlId:"b0001",label:"时间选择",showLevel:"1",metaId:"B0001",controlType:"controlDateTime",placeholder:"文本框提示信息,输入文字后消失",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"}},enumData:[{text:"上海",value:"shanghai"},{text:"成都",value:"chengdu"}]},{controlId:"b0002",label:"选择框",showLevel:"1",metaId:"A0032",controlType:"controlFileCode",placeholder:"多重选择",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,message:"超过填写范围"},length:{maxLength:50,message:"超出最大长度"},number:{},required:{require:!1,message:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"}},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b0003",label:"开关",showLevel:"1",metaId:"A0033",controlType:"controlSwitcher",placeholder:"多重选择",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!1,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"}},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b0004",label:"评分",showLevel:"1",metaId:"C-GW-FW-0004",controlType:"controlRate",placeholder:"多重选择",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!1,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"},allowHalf:!0},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b0006",label:"下拉框",showLevel:"1",metaId:"A0038",controlType:"controlComboBox",placeholder:"下拉框",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"},allowHalf:!0},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b0007",label:"数字框",showLevel:"1",metaId:"A0037",controlType:"controlNumberBox",placeholder:"数字框",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"},allowHalf:!0},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b0008",label:"单选框",showLevel:"1",metaId:"A0041",controlType:"controlRadio",placeholder:"单选框",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"},allowHalf:!0},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b0009",label:"文本域",showLevel:"1",metaId:"A0042",controlType:"controlTextarea",placeholder:"文本域",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"},allowHalf:!0},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b00010",label:"复选框",showLevel:"1",metaId:"A0040",controlType:"controlCheckBox",placeholder:"复选框",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"},allowHalf:!0},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b00011",label:"会议室",showLevel:"1",metaId:"B0035",controlType:"meetingRoomControl",placeholder:"会议室选择",defaultValue:"默认值",format:"yyyy-MM-dd",restrict:{minDate:"1999-01-01",maxDate:"2020-10-10",inputType:"positiveInteger"},privilege:{editable:!0,visible:!0},validator:{lengthRange:{begin:0,end:50,tips:"超过填写范围"},length:{maxLength:50,tips:"超出最大长度"},number:{},required:{require:!0,tips:"此项必填"}},extra:{tabs:[{name:"本处室",action:"/user?id=1"},{name:"本机构",action:"/user?id=1"}],multiple:!0,rows:3,autoComplete:{action:"fn/getCity"},allowHalf:!0},enumData:[{text:"浙江"},{text:"福建"}]},{controlId:"b0012",label:"选择用户",showLevel:"1",metaId:"C-GW-FW-0112",controlType:"controlUser",placeholder:"请选择用户",defaultValue:"",format:"yyyy-MM-dd",restrict:{minDate:"",maxDate:"",inputType:""},privilege:{editable:!1,visible:!1},validator:{lengthRange:{},length:{},number:{},required:{}},extra:{tabs:[{name:"部门",action:"/user?id=1"},{name:"机构",action:"/user?id=1"},{name:"群组",action:"/user?id=1"}],multiple:!0,rows:2,autoComplete:{action:"fn/getCity"}},enumData:[]},{controlId:"b0013",label:"代码选择",showLevel:"1",metaId:"C-GW-FW-0113",controlType:"controlCode",placeholder:"请选择用户",defaultValue:"",format:"yyyy-MM-dd",restrict:{minDate:"",maxDate:"",inputType:""},privilege:{editable:!1,visible:!1},validator:{lengthRange:{},length:{},number:{},required:{}},extra:{tabs:[],multiple:!0,rows:2,autoComplete:{action:"fn/getCity"}},enumData:[]},{controlId:"b0014",label:"领导意见",showLevel:"1",metaId:"C-FW-0030",controlType:"controlOpintionView",placeholder:"请输入内容",defaultValue:"",format:"yyyy-MM-dd",restrict:{minDate:"",maxDate:"",inputType:""},privilege:{editable:!0,visible:!1},validator:{lengthRange:{},length:{},number:{},required:{}},extra:{tabs:[],multiple:!0,rows:2,autoComplete:{action:"fn/getCity"}},enumData:[]}],buttons:{commonButtons:[{showIndex:"0",name:"关注",icon:"iconguanzhu1",action:"guanZhu"},{showIndex:"1",name:"置顶",icon:"iconzhiding",action:"zhiDing"},{showIndex:"2",name:"视频",icon:"iconshipin",action:"liuChengShiPin"},{showIndex:"3",name:"转办",icon:"iconweb-icon-",action:"xform.changeUser"},{showIndex:"4",name:"退回",icon:"iconhuifu",action:"tuiHui"}],mainButtons:[{showIndex:"0",name:"报名",icon:"",action:"baoMing"},{showIndex:"1",name:"发送",icon:"",action:"faSong"}]},attach:{"attach-0":{attType:"0",isZwqy:"-1",fileCount:"999",required:!0,showSuffix:1,showSuffixText:"是",attValue:"0",showFileType:"1",versionMode:1,showType:0,maintainFunc:"",moduleId:"2004150934196HdOEhoIx1Iw2pDpAvq",value:0,buttonText:"",templates:"",maintainFuncText:"",attTypeText:"正文",fileSize:"100",defaultFileName:"",isMJ:"-1",name:"正文",showOrder:1,qcButtonText:"",attName:"正文",orderbyType:"1",fileType:"doc,docx,wps"}}}},81688:function(t,e,o){"use strict";o.r(e);var n=o(8450),a=o.n(n),i=o(25108);e.default={methods:{afterGetinfoFunc:function(){window.wx&&wx.onMenuShareAppMessage({title:document.title,desc:document.title,link:"https://open.weixin.qq.com/connect/oauth2/authorize?target=out&appid=".concat(dsf.util.loadSessionStore("wxParams").corpId,"&redirect_uri=").concat(encodeURIComponent(dsf.url.getRootPath()+"ctrl/rztAuth/redirectWorkbench?field=rzt&encodeData="+dsf.base64.encode(a()({pcUrl:"ctrl/formControl/form?moduleId=".concat(vueObj.$route.params.moduleId,"&pk=").concat(vueObj.$route.params.pk,"&todoId=").concat(vueObj.$route.query.todoId||"","&&agencyUserId=&agencyUserName=&validateByList=1&listId=PCJudgePermission&method=verify"),mobileUrl:vueObj.$route.fullPath+(-1<vueObj.$route.fullPath.indexOf("?")?"&":"?")+"validateByList=1&listId=MobileJudgePermission&method=verify"}))),"&response_type=code&scope=snsapi_base&agentid=1000219#wechat_redirect"),imgUrl:"",success:function(){i.log("https://open.weixin.qq.com/connect/oauth2/authorize?target=out&appid=".concat(dsf.util.loadSessionStore("wxParams").corpId,"&redirect_uri=").concat(encodeURIComponent(dsf.url.getRootPath()+"ctrl/rztAuth/redirectWorkbench?field=rzt&encodeData="+dsf.base64.encode(a()({pcUrl:"ctrl/formControl/form?moduleId=".concat(vueObj.$route.params.moduleId,"&pk=").concat(vueObj.$route.params.pk,"&todoId=").concat(vueObj.$route.query.todoId||"","&&agencyUserId=&agencyUserName=&validateByList=1&listId=PCJudgePermission&method=verify"),mobileUrl:vueObj.$route.fullPath+(-1<vueObj.$route.fullPath.indexOf("?")?"&":"?")+"validateByList=1&listId=MobileJudgePermission&method=verify"}))),"&response_type=code&scope=snsapi_base&agentid=1000219#wechat_redirect"))},cancel:function(){}})}}}},35902:function(t,e,o){"use strict";o.r(e);var n={methods:{}},a=o(81807);a.keys().forEach(function(t){t.replace(/\.\/|\.js/g,"")==dsf.config.projectName&&(n=a(t).default)}),e.default=n},2549:function(t,e,o){"use strict";o.r(e),e.default={methods:{projectBeforechangeTab:function(t){var e;return"onlyOnefilePreview"!=t||(e=null==(t=null==(t=this.allFile.find(function(t){return 0==t.attachType}))?void 0:t.file[0])?void 0:t.title.substr(t.title.lastIndexOf(".")+1),!t)||"pdf"!=e&&"ofd"!=e||!dsf.config.commonForm.locationHrefToFile||(dsf.util.filePreview({fileId:t.id,fileName:t.title,moduleId:this.formMeta.moduleId}),!1)}}}},53411:function(t,e,s){"use strict";s.r(e);var n=s(66250),o=s(33453),l=s.n(o),o=s(73473),c=s.n(o),y=(s(9669),s(25108)),u={},d={},f={};u.init=function(a,i,r){return new(c())(function(){var o=(0,n.Z)(l().mark(function t(e,o){var n;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d={},u.spHandleJS={},t.next=4,s(75493)("./".concat(a,"_").concat(i,".js")).then(function(t){d=t.default,u.spHandleJS=d,r&&r()}).catch(function(t){y.log("无特殊js")});case 4:return t.next=6,s(5845)("./".concat(a,"_").concat(i,"_subform.js")).then(function(t){f=t.default,u.spHandleJS_subform=f,r&&r()}).catch(function(t){y.log("无特殊子表js")});case 6:(n=document.createElement("script")).type="text/javascript",n.src="./static/js/formSpecialJS/"+a+"_"+i+".js?random="+Math.random(),n.onerror=function(){e()},window.noJS=!1,document.body.appendChild(n),n.onload=function(){window.noJS||(d=window.spJS,u.spHandleJS=d,r&&r()),e()};case 13:case"end":return t.stop()}},t)}));return function(t,e){return o.apply(this,arguments)}}())},u.WatchHandle=function(t,e,o,n,a,i){d.handle&&d.handle(t,e,o,n,a,i)},u.initHandle=function(t,e,o){d.initHandle&&d.initHandle(t,e,o)},u.saveFilter=function(t,e,o,n){if(d.saveFilter)return d.saveFilter(t,e,o,n)},u.handleFormData=function(t,e,o,n){if(d.handleFormData)return d.handleFormData(t,e,o,n)},u.leaveHandle=function(t,e,o,n){if(d.leaveHandle)return d.leaveHandle(t,e,o,n)},u.saveAfter=function(t,e,o){if(d.saveAfter)return d.saveAfter(t,e,o)},u.sendAfter=function(t,e,o){if(d.sendAfter)return d.sendAfter(t,e,o)},u.propertyJoinHandle=function(v,g,w){function a(h){var t,e;(h.operateTarget?h.operateTarget.split(","):[]).forEach(function(e){var o,n,t,a,i,r=g.controls.find(function(t){return t.metaId==e});if(r)if("5"==h.operation)-1<w.notVaildateMetas.indexOf(r.metaId)&&w.notVaildateMetas.splice(w.notVaildateMetas.indexOf(r.metaId),1),w.$set(r,"show",1);else if("1"==h.operation)w.notVaildateMetas.indexOf(r.metaId)<0&&w.notVaildateMetas.push(r.metaId),w.$set(r,"show",0);else if("7"==h.operation)v.main[r.metaId].hasOwnProperty("text")?w.$set(v.main,r.metaId,{text:"",value:""}):w.$set(v.main[r.metaId],"value","");else if("2"==h.operation&&g.rows){w.notVaildateMetas.indexOf(r.metaId)<0&&w.notVaildateMetas.push(r.metaId);for(var s,l=r.controlId,c=[],u=0;u<g.rows.length;u++)if(null!=(s=g.rows[u].controls)&&s.find(function(t){return t==l})){c=g.rows[u].controls;break}c.forEach(function(e){var t=g.controls.find(function(t){return t.controlId==e});w.$set(t,"show",0)})}else if("6"==h.operation&&g.rows){-1<w.notVaildateMetas.indexOf(r.metaId)&&w.notVaildateMetas.splice(w.notVaildateMetas.indexOf(r.metaId),1);for(var d,f=r.controlId,m=[],p=0;p<g.rows.length;p++)if(null!=(d=g.rows[p].controls)&&d.find(function(t){return t==f})){m=g.rows[p].controls;break}m.forEach(function(e){var t=g.controls.find(function(t){return t.controlId==e});w.$set(t,"show",1)})}else"4"==h.operation?w.$set(r.validator,"required",{}):"15"==h.operation?w.$delete(r.validator,"required"):"12"==h.operation?(y.log(h),o=v.main[h.triggerCondition].value,n=v.main[r.metaId].value,o&&(t=null==(t=g.controls.find(function(t){return t.metaId==h.triggerCondition}).enumData.find(function(t){return t.value==o}))?void 0:t.id,dsf.http.post("fn/propertyJoint/getCodeItems",{codeFid:t,queryModuleId:w.moduleId,triggerCondition:h.triggerCondition}).then(function(t){200==t.data.code&&(w.$set(r,"enumData",t.data.data),t.data.data.find(function(t){return t.value==n})||w.$set(v.main,r.metaId,{text:"",value:""}))}))):"calc"==h.operation&&"proposedOpinion"==h.targetContent&&(y.log(g.propertyJoin),t=g.propertyJoin.filter(function(t){return t.operateTarget==h.operateTarget}),a=g.controls.find(function(t){return t.metaId==h.operateTarget}))&&(i={showTemplateId:a.extra.showTemplate},t.forEach(function(t){i[t.triggerCondition]=function(t){var e="",t=v.main[t]||{},o=t.schema;if(o)if(0<=o.indexOf("1::")){for(var n=o.split(",")||[],a=t.value.split(",")||[],i=t.text.split(",")||[],r=n.length,s=[],l=0;l<r;l++){var c=n[l],u=a[l],d=i[l];s.push(d+"^"+u+"^"+c.substring(3))}e="userInfos:"+s.join(",")}else e=(e=t.text)&&e.replace(/,/g,"、");else e=t.text||t.value||"";return e}(t.triggerCondition)}),dsf.http.post("fn/proposedOpinion/getOpinion",i).then(function(t){"success"==t.data.type&&w.$set(v.main,r.metaId,{value:t.data.data})}))}),"10"!=h.operation&&"11"!=h.operation||(t=g.controls.filter(function(t){return null==(t=t.extra.eatraClass)?void 0:t.includes(h.targetContent)}),e="10"==h.operation?0:1,t.forEach(function(t){return w.$set(t,"show",e)}))}var n;g.propertyJoin&&0<g.propertyJoin.length&&(n=[],g.controls.forEach(function(e){var t=g.propertyJoin.filter(function(t){return t.triggerCondition==e.metaId});t.length&&n.push({ctrMetaId:e.metaId,tcArr:t,ctr:e})}),w.$watch(function(){return w.mainData},function(e,o){n.forEach(function(t){var n;o&&e[t.ctrMetaId].value==o[t.ctrMetaId].value||t.ctr.show&&(n=e[t.ctrMetaId],t=t.tcArr,g.controls,t.forEach(function(e){var t,o;"12"==e.operation||"calc"==e.operation?a(e):"1"==e.operator?e.selectedValues.split(",").forEach(function(t){-1<String(n.value).split(",").indexOf(t)&&a(e)}):"2"==e.operator&&(t=String(n.value).split(","),o=!0,t.forEach(function(t){-1<e.selectedValues.split(",").indexOf(t)&&(o=!1)}),o)&&a(e)}))})},{deep:!0,immediate:!0}))},u.checkShowByData=function(t){return!d.checkShowByData||d.checkShowByData(t)},u.initHandle_subform=function(t,e,o){f.initHandle&&f.initHandle(t,e,o)},u.saveFilter_subform=function(t,e,o,n){if(f.saveFilter)return f.saveFilter(t,e,o,n)},u.checkShowByData_subform=function(t){return!f.checkShowByData||f.checkShowByData(t)},u.initDataAfter=function(t,e,o){if(d.initDataAfter)return d.initDataAfter(t,e,o)},e.default=u},48056:function(t,e,o){o(21013),t.exports=o(34579).Object.values},21013:function(t,e,o){var n=o(83856),a=o(52050)(!1);n(n.S,"Object",{values:function(t){return a(t)}})},32444:function(E,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ut}});var t=n(62680),a=n.n(t),t=n(95366),i=n.n(t),t=n(6919),r=n.n(t),w=n(522),s=n(66250),l=n(77193),t=n(33453),y=n.n(t),t=n(8450),b=n.n(t),t=n(18428),c=n.n(t),t=n(64830),_=n.n(t),t=n(43562),x=n.n(t),t=n(26243),D=n.n(t),t=n(73473),e=n.n(t),t=n(20629),$=(n(81926),n(35902)),I=n(45604),o={},u=n(72),B=(u.keys().forEach(function(t){var e=u(t);o[t.replace(/^\.\/(.*)\.\w+$/,"$1")]=e.default}),o),C=n(53411),A=n(33259),V=n(50856),R=n(96345),k=n(2728),U=n(86720),q=n(5453),Z=n(17649),H=n(46385),W=n(38496),z=n(7843),J=n(30819),d=n(9669),K=n.n(d),f=n(25108);function m(e,t){var o,n=D()(e);return a()&&(o=a()(e),t&&(o=o.filter(function(t){return i()(e,t).enumerable})),n.push.apply(n,o)),n}var p,h,v,d={props:["metaData","formData","nowButtonParameters"],data:function(){return{searchValue:"",personSelectData:[],secPeo:!1,columns:[],reasonMessage:"",result:[],sms:"",userInfo:"",smsMethodRange:[],isBackTrack:1==this.nowButtonParameters.autoReturn,isRequired:null==dsf.config.commonForm.returnNodeRequired||dsf.config.commonForm.returnNodeRequired}},methods:{onClickLeft:function(){this.$emit("onClickLeft")},showPersonModel:function(){this.secPeo=!this.secPeo},onConfirm:function(t){this.personSelectData=[],this.personSelectData.push(t),this.showPersonModel()},closePerson:function(t,e){this.personSelectData.splice(e,1)},submitFun:function(){var e,t,o,n,a=this;""==this.reasonMessage.trim()&&this.isRequired?dsf.layer.toast("请输入退回原因"):this.personSelectData.length<1?dsf.layer.toast("请选择退回人员"):(e=dsf.layer.loading(),t={sendType:"SR_SPECIAL",pk:this.metaData.pk,isSms:this.result.join(","),sms:this.sms,isBackTrack:this.isBackTrack?1:99,pId:this.metaData.pId,pnId:this.metaData.pnId,nextNodeId:this.personSelectData[0].wfNodeId,opinionType:4,opinionContent:this.reasonMessage,nextHandleType:"SR_BACKSEND",receiverList:[{type:1,userId:this.personSelectData[0].userId,userName:this.personSelectData[0].uName,deptId:this.personSelectData[0].deptId,deptName:this.personSelectData[0].deptName,isSms:this.result.join(","),sms:this.sms}]},2==this.$route.query.agencyType&&(t.agencyType=this.$route.query.agencyType,t.determineUser=this.$route.query.agencyUserId,t.determineUserName=this.$route.query.agencyUserName),o={timeout:2e4,responseType:"json",headers:{"Content-Type":"application/json","x-auth-token":dsf.util.loadSessionStore("loginToken")}},n=dsf.url.getWebPath("fn/flow/sendRequest"),K().post(n,t,o).then(function(t){"200"==t.data.code&&(dsf.layer.closeLoading(e),dsf.layer.toast("退回成功"),a.$emit("backSendSuc"))}))}},computed:{title:function(){return dsf.config.commonFlow.title||"退回"}},created:function(){var t,o=this,n=(this.userInfo=dsf.util.loadSessionStore("user"),f.log(this.userInfo),this.sms=this.userInfo.name+"于"+moment(new Date).format("YYYY-MM-DD HH:mm:ss")+"给您退回了："+this.formData.B0001.value,f.log(this.formData),this);dsf.http.get("fn/flow/getGPNodeList",{pk:this.metaData.pk,sendType:"SR_BACKSEND",pId:this.metaData.pId,pnId:this.metaData.pnId,moduleId:this.metaData.moduleId,returnNodeId:(null==(t=this.nowButtonParameters)?void 0:t.nodeId)||""}).then(function(t){var e,t=t.data;f.log(t),"200"==t.code&&(e=[],t.data.forEach(function(t){e.push(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?m(Object(o),!0).forEach(function(t){(0,l.Z)(e,t,o[t])}):r()?Object.defineProperties(e,r()(o)):m(Object(o)).forEach(function(t){Object.defineProperty(e,t,i()(o,t))})}return e}({text:t.receiver},t))}),o.columns=e,o.personSelectData.push(o.columns[0]),t.smsMethodRange&&(t.smsMethodRange.forEach(function(t){t.checked&&n.result.push(t.value)}),n.smsMethodRange=t.smsMethodRange),f.log(o.columns))})}},g=n(51900),d=(0,g.Z)(d,function(){var n=this,a=n._self._c;return a("div",{staticClass:"box"},[a("van-nav-bar",{attrs:{title:n.title,"left-arrow":""},on:{"click-left":n.onClickLeft}}),n._v(" "),a("div",{staticClass:"itemSheet"},[1<n.columns.length||n.dsf.config.commonFlow.onePersonBackIsShow?a("p",{staticClass:"reasonLabel"},[n._v("请选择退回人员")]):n._e(),n._v(" "),1<n.columns.length||n.dsf.config.commonFlow.onePersonBackIsShow?a("div",{staticClass:"disfr ac",staticStyle:{padding:"10px 0"}},[a("div",{staticClass:"peopleSec disfr ac flex1"},[n._l(n.personSelectData,function(e,o){return a("van-tag",{key:o,attrs:{closeable:"",size:"large",type:"primary"},on:{close:function(t){return n.closePerson(e,o)}}},[n._v("\n                    "+n._s(e.text)+"\n                ")])}),n._v("\n                  \n            ")],2),n._v(" "),a("van-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"default"},on:{click:n.showPersonModel}},[n._v("选择人员")])],1):n._e(),n._v(" "),a("p",{staticClass:"reasonLabel"},[n._v("请输入退回原因")]),n._v(" "),a("div",{staticClass:"reasonBox reason"},[a("van-field",{attrs:{type:"textarea",rows:"5",placeholder:"请输入退回原因"},model:{value:n.reasonMessage,callback:function(t){n.reasonMessage=t},expression:"reasonMessage"}})],1),n._v(" "),0<n.smsMethodRange.length?a("div",{staticClass:"checks"},[a("div",{staticClass:"clists"},[a("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:n.result,callback:function(t){n.result=t},expression:"result"}},n._l(n.smsMethodRange,function(t,e){return a("van-checkbox",{key:e,attrs:{name:t.value}},[n._v(n._s(t.text))])}),1)],1),n._v(" "),a("van-field",{ref:"reason",staticClass:"reason",attrs:{type:"textarea",placeholder:"请输入提醒信息",border:""},model:{value:n.sms,callback:function(t){n.sms=t},expression:"sms"}})],1):n._e()]),n._v(" "),a("div",{staticClass:"footer"},[a("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:-1!=n.nowButtonParameters.autoReturn,expression:"nowButtonParameters.autoReturn != -1"}],attrs:{shape:"square"},model:{value:n.isBackTrack,callback:function(t){n.isBackTrack=t},expression:"isBackTrack"}},[n._v("处理完毕自动返回")]),n._v(" "),a("van-button",{attrs:{type:"theme",block:""},on:{click:n.submitFun}},[n._v("确认退回")])],1),n._v(" "),a("van-popup",{style:{height:"50vh"},attrs:{position:"bottom",round:""},model:{value:n.secPeo,callback:function(t){n.secPeo=t},expression:"secPeo"}},[a("div",{staticStyle:{width:"100%"}},[a("van-picker",{attrs:{title:"请选择退回人员","show-toolbar":"",columns:n.columns},on:{confirm:n.onConfirm,cancel:n.showPersonModel}})],1)])],1)},[],!1,null,"344ec5e0",null).exports,Y=n(11728),G=n(63450),S=n(5044),T=n(18868),F=n(4812),P=n(23501),M=n(94358),O=n(25108),F={name:"controlOpintionBtn",components:{DebounceClick:T.Z,OpinionSign:F.Z,hw:P.Z,hwJG:function(){return n.e(69751).then(n.bind(n,69751))},idealEdit:M.Z},props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}},currentOpintion:{type:String,default:""}},data:function(){return{isSign:0,signName:"",signTime:"",user:dsf.util.loadSessionStore("user"),isShow:!1,value:"",tags:[],allowEditOpinion:1,opinionRequired:1,errorMessage:"",_loading:"",saveName:"保存",submitName:"提交",showMore:!1,needHandWrite:dsf.config.commonFlow&&dsf.config.commonFlow.needHandWrite,havetoHandWrite:dsf.config.setting["SYS-MOBILE-FORM-0011"]||"-1",imgUrl:"",showWrite:!1,allowUploadOpinionAttach:!1,fileCount:0}},created:function(){var e=1;this.metaData.controls.forEach(function(t){"controlEditOpinion"==t.controlType&&(e=0)}),this.allowEditOpinion=e&&this.metaData.parameters.allowEditOpinion,this.opinionRequired=this.metaData.parameters.opinionRequired,O.log(this.metaData.parameters,this.formData,this.formParams),dsf.config.commonFlow.opinionBtnSetting&&(this.saveName=dsf.config.commonFlow.opinionBtnSetting.cancelName||"保存",this.submitName=dsf.config.commonFlow.opinionBtnSetting.submitName||"提交")},watch:{isShow:{handler:function(t,e){t&&(dsf.config.commonFlow.isDefaultShowOpinition&&this.getDefaultOpinition(),1==this.metaData.parameters.handWriteOpinion)&&this.openWritePopup()}}},computed:{tempTags:function(){return this.showMore?this.tags:this.tags.slice(0,2)},getHW_Type:function(){return dsf.config.setting.hasOwnProperty("SYS-MOBILE-FORM-0003")&&dsf.config.setting["SYS-MOBILE-FORM-0003"]||"self"}},mounted:function(){},methods:{Sign:function(){this.isSign?this.isSign=0:(this.$refs.idealEdit.value="",this.isSign=1,this.signName=this.user.name,this.signTime=dsf.date.format(new Date,"yyyy-mm-dd"))},getDefaultOpinition:function(){var o=this;return(0,s.Z)(y().mark(function t(){return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dsf.http.post("fn/mobileFormComment/getH5CurrentComment",{pk:o.metaData.parameters.pk,pid:o.metaData.parameters.pId,pnid:o.metaData.parameters.pnId,moduleId:o.metaData.parameters.moduleId}).then(function(t){var e,t=t.data;O.log(o.$refs.idealEdit),t.data.opinion&&(o.$refs.idealEdit.value=t.data.opinion),(e=o.$refs.idealEdit.attachList).push.apply(e,(0,S.Z)(t.data.attachList)),o.allowUploadOpinionAttach="1"==t.data.isShowFile,o.fileCount=t.data.fileCount});case 2:o.currentOpintion&&(o.$refs.idealEdit.value=o.currentOpintion);case 3:case"end":return t.stop()}},t)}))()},btnSaveOpintion:function(){this.$refs.idealEdit.value.length<1&&this.opinionRequired&&0<this.allowEditOpinion?dsf.layer.toast("请填写意见",!1):this.saveOpinion()},saveOpinion:function(n){this._loading=dsf.layer.loading("保存中...");var a=this,t={__DATA:b()({info_id:a.formParams.pk,pid:new String(a.metaData.parameters.pId),pnid:new String(a.metaData.parameters.pnId),opinion:a.$refs.idealEdit.value,type:"g_inbox",isSign:a.isSign})},i="/fn/mobileSaveOpinion/saveOpinion?flowId=".concat(a.metaData.parameters.flowId,"&nodeId=").concat(a.metaData.parameters.nodeId,"&moduleId=").concat(a.formParams.moduleId);return new(e())(function(e,o){dsf.http.post(i,t).then(function(t){dsf.layer.closeLoading(a._loading),(t.data.result?(n?a.$emit("setOpintion",{content:a.$refs.idealEdit.value,isSign:a.isSign}):(a.$emit("setOpintion",{content:a.$refs.idealEdit.value,isSign:a.isSign},"init"),a.$emit("refreshPcForm")),a.Show(),e):(a.dsf.layer.toast(t.data.message,!1),o))()})})},Show:function(){this.isShow=!this.isShow},send:function(){var e=this;this.$refs.idealEdit.value.length<1&&this.opinionRequired&&0<this.allowEditOpinion?dsf.layer.toast("请填写意见",!1):this.saveOpinion("send").then(function(t){O.log("1111111111"),e.$emit("send")})},openWritePopup:function(){this.showWrite=!0,"jg"==this.getHW_Type&&this.$refs.HWJG.buttonHWClick()},delHandWrite:function(){var e=this;dsf.http.post("fn/mobileHandWritingData/delete?pnid=".concat(this.metaData.parameters.pnId,"&pid=").concat(this.metaData.parameters.pId)).then(function(t){t.data.result&&(e.imgUrl="",dsf.layer.toast("清除成功"))})},closeWritePopup:function(t){t?(this.showWrite=!1,t&&(this.imgUrl=t)):(this.imgUrl="",this.delHandWrite(),this.showWrite=!1)}}},P=(0,g.Z)(F,function(){var e=this,t=e._self._c;return t("div",{staticClass:"opintionView"},[t("van-popup",{staticClass:"opintionPopup",attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("van-nav-bar",{staticClass:"top",attrs:{title:"意见"},scopedSlots:e._u([{key:"left",fn:function(){return[t("i",{staticClass:"iconfont iconxialajiantou",staticStyle:{color:"#000"},attrs:{size:"0.4rem"},on:{click:function(t){return e.Show()}}})]},proxy:!0}])}),e._v(" "),t("div",{staticClass:"container"},[t("idealEdit",{ref:"idealEdit",staticStyle:{"border-top":"5px solid #f1f2f4"},attrs:{allowUploadOpinionAttach:e.allowUploadOpinionAttach,fileCount:e.fileCount,metaData:e.metaData,isShowHandWrite:e.dsf.config.commonFlow&&e.dsf.config.commonFlow.needHandWrite},on:{handWrite:e.openWritePopup},scopedSlots:e._u([{key:"opinionImg",fn:function(){return[e.dsf.config.commonFlow&&e.dsf.config.commonFlow.needHandWrite?t("div",{staticClass:"handleWriteBox"},[t("div",{staticClass:"writeContent"},[e.imgUrl?t("img",{style:{width:e.dsf.config.commonFlow.opinionImgWidth||"50%"},attrs:{src:e.imgUrl,alt:""}}):e._e()])]):e._e()]},proxy:!0}])})],1),e._v(" "),"self"==e.getHW_Type?t("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.showWrite,callback:function(t){e.showWrite=t},expression:"showWrite"}},[t("hw",{attrs:{formData:e.metaData.parameters},on:{closeWritePopup:e.closeWritePopup}})],1):e._e(),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"jg"==e.getHW_Type&&e.showWrite,expression:"getHW_Type == 'jg' && showWrite"}]},[t("hwJG",{ref:"HWJG",attrs:{hwtype:e.getHW_Type,formData:e.metaData.parameters,formMeta:e.metaData},on:{closeWritePopup:e.closeWritePopup}})],1),e._v(" "),t("div",{staticStyle:{height:"1.2rem"}},[t("div",{staticClass:"_footer"},[t("debounce-click",[t("van-button",{staticClass:"_btn",attrs:{type:"default"},on:{click:function(t){return e.btnSaveOpintion()}}},[e._v(e._s(e.saveName))])],1),e._v(" "),t("debounce-click",[t("van-button",{staticClass:"_btn",attrs:{type:"theme"},on:{click:function(t){return e.send()}}},[e._v(e._s(e.submitName))])],1),e._v(" "),e.dsf.config.commonForm&&e.dsf.config.commonForm.opinitonShowSign?t("debounce-click",[t("van-goods-action-button",{attrs:{type:"theme",text:e.isSign?"取消签字":"签字"},on:{click:function(t){return e.Sign()}}})],1):e._e()],1)])],1)],1)},[],!1,null,"ed635cf2",null).exports,M=(n(86261),n(37460)),F=n(18433),Q=n(13361),X=n(48440),tt=n(25108),N={name:"wuxiAppraise",props:{metaData:{type:Object,default:function(){return{}}}},data:function(){return{show:!1,addEvaluate:[],evaluate:[{bxlcjdName:"",cyrbm:"",bz:""}]}},watch:{show:function(t,e){1==t&&this.getEvaluate()}},methods:{onClickLeft:function(){this.show=!1},onClickRight:function(){var e=this;this.addEvaluate=[],this.evaluate.forEach(function(t){t.bz=e.evaluate[0].bz;t={flowId:e.metaData.flowId,pk:e.metaData.pk,from_id:e.metaData.fromId,pnidd:e.metaData.pId,pffs:String(2*t.xj),pfxj:String(t.xj),zbid:t.id,zxid:t.zxid,pnid:e.metaData.pnId,nodeId:e.metaData.nodeId};e.addEvaluate.push(t)}),this.addEvaluate.push({flowId:this.metaData.flowId,pk:this.metaData.pk,from_id:this.metaData.fromId,pnidd:this.metaData.pId,zbid:this.evaluate[0].id,zxid:this.evaluate[0].id,pnid:this.metaData.pnId,nodeId:this.metaData.nodeId,bzxx:this.evaluate[0].bz}),dsf.http.post("fn/rcbgpjcontroller/addMobileEvaluate",{data:this.addEvaluate},{headers:{"Content-Type":"application/json"}}).then(function(t){tt.log(b()(e.addEvaluate)),dsf.layer.toast(t.data.message)})},getEvaluate:function(){var e=this,o=dsf.layer.loading(),t={pnid:this.metaData.pnId,moduleId:this.metaData.moduleId,infoid:this.metaData.pk,nodeId:this.metaData.nodeId};dsf.http.post("fn/rcbgpjcontroller/getEvaluate",t).then(function(t){t=t.data;t.data.array.forEach(function(t){return t.xj=Number(t.xj)}),e.evaluate=t.data.array,dsf.layer.closeLoading(o)})}}},N=(0,g.Z)(N,function(){var o=this,n=o._self._c;return n("van-popup",{staticStyle:{height:"70%"},attrs:{position:"bottom",border:!1},model:{value:o.show,callback:function(t){o.show=t},expression:"show"}},[n("div",{staticClass:"box"},[n("van-nav-bar",{attrs:{"left-text":"取消","right-text":"保存"},on:{"click-left":o.onClickLeft,"click-right":o.onClickRight}}),o._v(" "),o.evaluate[0].cyrbm?n("div",{staticClass:"top"},[n("span",{staticClass:"span1"},[o._v(o._s(o.evaluate[0].bxlcjdName||"撰搞人起草"))]),o._v(" "),n("span",{staticClass:"span2"},[o._v("【"+o._s(o.evaluate[0].cyrbm||"")+"】")])]):o._e(),o._v(" "),o.evaluate[0].cyrbm?n("div",{staticClass:"center"},[n("dl",[n("dt",[o._v(o._s(o.evaluate[0].dispname||""))]),o._v(" "),o._l(o.evaluate,function(e,t){return n("dd",{key:t},[n("span",[o._v(o._s(e.pjx)+"：")]),n("van-rate",{attrs:{gutter:"7px",size:20,color:"rgb(184,155,121)","void-icon":"star-o","void-color":"#eee","allow-half":"",icon:"star",touchable:!1},model:{value:e.xj,callback:function(t){o.$set(e,"xj",t)},expression:"item.xj"}})],1)}),o._v(" "),n("dd",[n("span",{staticClass:"last"},[o._v("备注：")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.evaluate[0].bz,expression:"evaluate[0].bz"}],attrs:{cols:"30",rows:"2"},domProps:{value:o.evaluate[0].bz},on:{input:function(t){t.target.composing||o.$set(o.evaluate[0],"bz",t.target.value)}}})])],2)]):o._e()],1)])},[],!1,null,"f6e9e6f6",null).exports,et=(0,g.Z)({name:"calendarSelect",data:function(){return{date:"",show:!1,defaultDate:new Date,confirmCallBack:function(){}}},computed:{defaultDate1:function(){this.defaultDate.setTime(this.defaultDate.getTime()+12096e5);var t=this.defaultDate.getFullYear()+"/"+(this.defaultDate.getMonth()+1)+"/"+this.defaultDate.getDate();return new Date(t)}},methods:{formatDate:function(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},onConfirm:function(t){this.show=!1,this.date=this.formatDate(t),this.confirmCallBack(this.date)}}},function(){var e=this,t=e._self._c;return t("div",[t("van-cell",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{title:"选择单个日期",value:e.date},on:{click:function(t){e.show=!0}}}),e._v(" "),t("van-calendar",{attrs:{"default-date":e.defaultDate1},on:{confirm:e.onConfirm},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},[],!1,null,"2afcdb58",null).exports,ot=n(8250),nt=(n(84832),n(59978)),at=(n(16779),n(67763)),it=(n(73474),n(74755)),rt=(n(23307),n(81392)),st=n(19063),lt=n(25108),T={directives:{"click-outside":{bind:function(e,o){e.clickOutsideEvent=function(t){e===t.target||e.contains(t.target)||o.value(t)},document.addEventListener("click",e.clickOutsideEvent)},unbind:function(t){document.removeEventListener("click",t.clickOutsideEvent)}}},name:"",components:{DebounceClick:T.Z,controlEditOpinion:st.default,Icon:rt.Z,Popup:it.Z,Grid:at.Z,GridItem:nt.Z},props:{formMeta:{type:Object,default:function(){return{}}},subFormIndex:{type:Number,default:null},buttons:{type:Object,default:function(){}},size:{type:String,default:"normal"},metaData:{type:Object,default:function(){return{}}},isShowWriteOpintionBtn:{type:Boolean},isShowQiXiangJuEditOpinion:{type:Boolean}},data:function(){return{showPopover:!1,value:{value:""},isShowSub:!1,subButtons:[],isShowIntroductionImage:!1,introductionImage:[],introductionImageIndex:0,newButton:null,showMore:!1}},created:function(){},mounted:function(){null!=this.isShowWriteOpintionBtn&&this.checkIsShowWriteOpintionBtn(),this.showIntroductionImage()},methods:{onCommonClick:(p=function(t){var e=this;"subBtnPopup"==t.action?this.showSubButtons(t):this.comfirmDialog(t).then(function(){e.$emit("getNowButton",t),e.$emit("commonClick",t.action)})},h=1e3,v=!0,function(){v&&(v=!1,p.apply(this,arguments),setTimeout(function(){v=!0},h))}),comfirmDialog:function(o){return new(e())(function(t,e){o.parameters&&o.parameters.find(function(t){return"isComfirm"==t.key&&1==t.value})?dsf.layer.confirm({message:o.parameters.find(function(t){return"comfirmText"==t.key}).value.replace(/\\n/gm,"<br/>"),confirmButtonText:"确认"},function(){t()}):t()})},showSubButtons:function(t){t.parameters&&t.parameters.find(function(t){return"subButtons"==t.key})&&(this.subButtons=t.parameters.find(function(t){return"subButtons"==t.key}).value.split(";").map(function(t){return JSON.parse(t.replace(/'/g,'"'))}),this.isShowSub=!0)},onSubButton:function(t){lt.log(t),this.isShowSub=!1,this.$emit("getNowButton",t),this.$emit("commonClick",t.action)},checkIsShowWriteOpintionBtn:function(){var o=this,t=this.allButtons,n=["BtnWriteOpinion","qxjEditOpinion"];t.forEach(function(t){var e;"qxjEditOpinion"==t.action&&o.$emit("update:isShowQiXiangJuEditOpinion",!0),-1<n.indexOf(t.action)&&o.$emit("update:isShowWriteOpintionBtn",!0),"subBtnPopup"==t.action&&(e=t.parameters.find(function(t){return"subButtons"==t.key}).value)&&(-1<e.indexOf("qxjEditOpinion")&&o.$emit("update:isShowQiXiangJuEditOpinion",!0),0<n.filter(function(t){return-1<e.indexOf(t)}).length)&&o.$emit("update:isShowWriteOpintionBtn",!0)})},showIntroductionImage:function(){this.introductionImageIndex=0;var t=this.allButtons.find(function(t){return Array.isArray(t.introductionImage)&&0<t.introductionImage.length});t&&(this.newButton=t,this.introductionImage=t.introductionImage.map(function(t){return dsf.url.getServerUrl(t)}),this.isShowIntroductionImage=!0,1==this.introductionImage.length)&&(this.isShowCoverBtn=!0)},updateGuidanceModule:function(){var e=this;this.isShowIntroductionImage=!1,dsf.http.post("/fn/updateGuidanceModule/saveUserInfo",{type:1,objId:this.newButton.buttonId,objName:this.newButton.name}).then(function(t){e.newButton.introductionImage="",e.showIntroductionImage()})},clickintroductionImage:function(){this.introductionImageIndex==this.introductionImage.length-1?this.updateGuidanceModule():this.introductionImageIndex+=1},handleBlur:function(t){this.$refs.controlEditOpinion.inputRows=1},getIconColor:function(t){return 0<=["已关注","已置顶","取消关注","取消置顶","取消收藏","已收藏","取消"].indexOf(t.name)||-1<t.name.indexOf("已")?{color:"#F1B902"}:t.parameters&&t.parameters.find(function(t){return"color"==t.key})?{color:t.parameters.find(function(t){return"color"==t.key}).value}:void 0},getContainer:function(){return document.body}},computed:{commonButtons:function(){var t=this.buttons.commonButton||this.buttons.commonButtons?(0,S.Z)(this.buttons.commonButton||this.buttons.commonButtons):[];this.buttons.mainButtons;return t},mainButtons:function(){return this.buttons.mainButtons?(0,S.Z)(this.buttons.mainButtons):[]},allButtons:function(){return[].concat((0,S.Z)(this.mainButtons),(0,S.Z)(this.commonButtons))},actions:function(){return JSON.parse(b()(this.allButtons)).slice(1)},iconSize:function(){return"iconTile"==dsf.config.commonForm.btnStyle?"0.52rem":"small"===this.size?"0.4rem":"0.48rem"}},watch:{}},st=(0,g.Z)(T,function(){var o=this,n=o._self._c;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:o.handleBlur,expression:"handleBlur"}],staticStyle:{width:"100%"}},[n("div",{staticClass:"ds-button-and-opinion"},[1<o.allButtons.length?n("div",{staticClass:"more-button",on:{click:function(t){o.showMore=!0}}},[o.dsf.config.commonForm.hideMoreBtnIcon?o._e():n("Icon",{attrs:{size:o.iconSize,name:"apps-o"}}),o._v(" "),n("span",{staticClass:"btn-text"},[o._v("更多")])],1):o._e(),o._v(" "),n("controlEditOpinion",{ref:"controlEditOpinion",staticClass:"flex1",style:{"max-width":1<o.allButtons.length?"calc(100% - 2.1rem)":"calc(100% - 1.4rem)"},attrs:{formMeta:o.formMeta,metaData:o.metaData,showOpinionAndBtn:!0},model:{value:o.value,callback:function(t){o.value=t},expression:"value"}}),o._v(" "),1<o.allButtons.length?n("div",{staticClass:"ds-button"},[n("debounce-click",[n("van-button",{staticClass:"flex1",attrs:{size:"middle",icon:o.allButtons[0].icon,type:o.allButtons[0].type||"primary",disabled:o.allButtons[0].disabled},on:{click:function(t){return o.onCommonClick(o.allButtons[0])}}},[o._v(o._s(o.allButtons[0].name))])],1)],1):1==o.allButtons.length?n("div",[n("div",{staticClass:"flex1 ds-button"},o._l(o.allButtons,function(e,t){return n("debounce-click",{key:e.action},[n("van-button",{staticClass:"flex1",attrs:{size:"middle",icon:e.icon,type:e.type||"primary",disabled:e.disabled},on:{click:function(t){return o.onCommonClick(e)}}},[o._v(o._s(e.name))])],1)}),1)]):o._e()],1),o._v(" "),n("van-action-sheet",{attrs:{value:o.isShowSub,actions:o.subButtons,"get-container":"#app"},on:{select:o.onSubButton,"click-overlay":function(t){o.isShowSub=!1}}}),o._v(" "),n("van-popup",{staticClass:"introductionImagePopup",attrs:{position:"bottom","get-container":"#app","overlay-class":"introductionImageOverlay",round:""},model:{value:o.isShowIntroductionImage,callback:function(t){o.isShowIntroductionImage=t},expression:"isShowIntroductionImage"}},[n("img",{attrs:{src:o.introductionImage[o.introductionImageIndex],alt:""},on:{click:o.clickintroductionImage}}),o._v(" "),n("div",{staticClass:"coverBtn",on:{click:o.updateGuidanceModule}},[o._v("已知晓")])]),o._v(" "),n("van-popup",{attrs:{"get-container":o.getContainer,"lock-scroll":!0,round:"","close-icon-position":"top-right",position:"bottom"},model:{value:o.showMore,callback:function(t){o.showMore=t},expression:"showMore"}},[n("div",{staticClass:"popup-title"},[n("Icon",{staticClass:"iconfont iconxialajiantou",attrs:{slot:"icon",size:"0.4rem",color:"#000000"},on:{click:function(t){o.show=!1}},slot:"icon"}),o._v("更多\r\n        ")],1),o._v(" "),n("div",{staticClass:"popup-btn"},[n("Grid",{attrs:{"column-num":4,clickable:"",border:!1}},o._l(o.actions,function(e){return"liuChengShiPin"!=e.action||o.dsf.config.ddSetting.isDing?n("GridItem",{key:e.action,on:{click:function(t){o.showMore=!1,o.onCommonClick(e)}}},[n("Icon",{class:["iconfont",e.icon],style:o.getIconColor(e),attrs:{slot:"icon",size:o.iconSize},slot:"icon"}),o._v(" "),n("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[o._v(o._s(e.name))])],1):o._e()}),1)],1)])],1)},[],!1,null,"3dbad2d1",null).exports,j=n(25108);function ct(e,t){var o,n=D()(e);return a()&&(o=a()(e),t&&(o=o.filter(function(t){return i()(e,t).enumerable})),n.push.apply(n,o)),n}function L(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(o),!0).forEach(function(t){(0,l.Z)(e,t,o[t])}):r()?Object.defineProperties(e,r()(o)):ct(Object(o)).forEach(function(t){Object.defineProperty(e,t,i()(o,t))})}return e}var rt={name:"commonForm",mixins:[$.default],props:{_pk:{type:String,default:function(){}},_moduleId:{type:String,default:function(){}},_formId:{type:String,default:function(){}},_params:{type:Object,default:function(){return{}}},currentTabs:{type:Number,default:function(){return 0}},clickTabIndex:{type:Number,default:function(){return 0}},isPop:{type:Boolean,default:!1}},components:L(L(L({chooseFolder:F.Z,EnclosurePre:Z.default,EnclosureButton:q.Z,movingSituation:U.Z,sendFile:R.Z,signFile:W.default,AskLeave:z.default,DsfButtonToolbox:V.Z,formLayout:A.default,BtnWriteOpintion:P},I.Z),B),{},{specialJS:C.default,SeparateRead:H.default,workFlowDialog:J.Z,controlUserList:G.default,returnNode:d,TransactionActionSheet:M.default,formDetail:function(){return n.e(5585).then(n.bind(n,5585))},QiXiangJuOpinion:function(){return n.e(51611).then(n.bind(n,51611))},QiXiangJuFlow:function(){return n.e(49904).then(n.bind(n,49904))},QiXiangJuEditOpinion:function(){return n.e(87210).then(n.bind(n,87210))},yuebi:function(){return Promise.resolve().then(n.bind(n,86261))},DefaultList:function(){return Promise.resolve().then(n.bind(n,14355))},rejectDialog:Y.Z,checkBoxDialog:Q.Z,meettingTopic:X.default,wuxiAppraise:N,calendarSelect:et,commonDialog:function(){return Promise.resolve().then(n.bind(n,40954))},addLeaderReview:function(){return n.e(8636).then(n.bind(n,8636))},DsfButtonAndOpinion:st}),data:function(){return{pk:this.$route.params.pk,moduleId:this.$route.params.moduleId,formData:{},formMeta:{controls:[]},showFlowSend:!1,formButtons:{},buttonHandle:null,value:"",showPopUp:!1,showBtnWriteOpintion:!1,isShowWriteOpintionBtn:!1,isShowYoZoHandWriteBtn:!1,currentOpintion:"",sendFileOpintion:"",headTab:this.$route.query.activeTab||0,sendFileData:{},fileUrl:"",showFyyj:!1,dataValue:{},showPerson:!1,isTransfer:!1,tab:this.$route.query.type,formParams:{},showSeparate:!1,multinfos:null,extra:{},allformMeta:{},relationList:[],formTabs:[],returnNodePop:!1,allFile:[],handWrittenFile:[],isShowTransactionActionSheet:!1,isShowTitle:!1,titleMetaData:{},titleControlData:{},titleOpinion:[],isFromList:!0,nowButton:null,nowButtonParameters:{},hasControlOpinionTagView:!1,formStyle:0,isShowQiXiangJuOpinion:!1,isShowQiXiangJuFlow:!1,isShowQiXiangJuEditOpinion:!1,qixiangjuOpinion:"",showyuebi:!1,notVaildateMetas:[],commonPop:!1,commonPopParam:{},checkType:"radio",specialJSObj:C.default,spHandleJS:{},showChooseFolder:!1,dividerColor:"",dividerStyle:null,separateTabs:[],getinfoParams:{},notMainCtr:["controlMobileAlink","controlMobileFl","controlFileRelation","controlFileUpload"],getInfoLoading:!0,componentName:"",isAsync:dsf.config.commonForm.isSelectProcessAsync,ShowSendFile:!0,currentref:null,shakeFlag:!0,flagPath:!0,ShowTreeData:!1,selectType:0,showFlowBack:!1,showSuccess:!1,curPath:"",checkable:!0,refreshListKey:Math.random(),isShowForm:!0,ShowAddLeaderReview:!1,leaderOrder:"1",leaderReviewKey:Math.random(),processSettings:null,shoEditOpinion:1,currentAction:"",alreadSetStorage:!1,editorOpinionMetaData:{},showOpinionAndBtn:!1,flowRangeUrl:{}}},computed:L(L({isShowFooter:function(){return!this.$route.query.isPreview&&(this.formButtons.commonButtons&&this.formButtons.commonButtons.length||this.formButtons.mainButtons&&this.formButtons.mainButtons.length)}},(0,t.rn)({isShowAppFooter:function(t){return t.isShowAppFooter},isShowAppHeader:function(t){return t.isShowAppHeader}})),{},{mainData:function(){return JSON.parse(b()(this.formData.main))}}),watch:{clickTabIndex:function(t){t==this.currentTabs&&this.initData()},"formData.main":{handler:function(t,e){t&&C.default.WatchHandle(t,e,this.formData,this.formMeta,"main",this)},deep:!0,immediate:!0},"formData.multinfos":{handler:function(t,e){t&&C.default.WatchHandle(t,e,this.formData,this.formMeta,"multinfos",this)},deep:!0,immediate:!0},formData:{handler:function(){this.alreadSetStorage&&dsf.config.commonForm.saveToStorage&&this.saveFormToStorage()},deep:!0}},mounted:function(){this.DioMounted=!1;var o=this;this.$nextTick(function(){o.isFromList||(o.$route.query.distribId?(t=o.$route.query.distribId,e="fn/mobileToRead/markRead"):"180805175628RK7ixI1IyrjDuG4njD5"==o.moduleId&&(e="fn/mobileNotice/markRead",t="-".concat(o.pk)),e&&t&&dsf.http.post(e,{pks:t}).then(function(t){}));var t,e=document.createElement("script");e.type="text/javascript",e.src="static/js/bridge.min.js",document.body.appendChild(e)})},destroyed:function(){},activated:function(){},created:function(){var o=this,t=(this.pk=this._pk||this.$route.params.pk,this.moduleId=this._moduleId||this.$route.params.moduleId,{});t.isSign=0,t.pk=this.pk,t.moduleId=this.moduleId,this.pk?t.isNewFile=0:t.isNewFile=1,this.formParams=t,this.init(),this.$bus.on("commonFormBack",function(t){o.backSucces()}),this.$bus.off("iSignatureSend").on("iSignatureSend",function(t){o.alreadyWriteOpintion=!0,o.isShowWriteOpintionBtn=!0,j.log(o.spHandleJS),o.spHandleJS&&o.spHandleJS["iSignatureSend.".concat(t.act)]?o.spHandleJS["iSignatureSend.".concat(t.act)](o.formData,o.formMeta,o):o.handleActionClick(t.act)}),this.$bus.off("saveFormBus").on("saveFormBus",function(t){(o.busObj=t).isTemp?o.buttonHandle["xform.saveFormTemporarily"](o.$route.params,o.formMeta,o.formData,o,o.$refs,t.callback):o.saveNoTip(t.callback)}),this.$bus.off("handleFormBtn").on("handleFormBtn",function(e){var t;o.$refs.DsfButtonToolbox&&(t=o.formMeta.buttons.commonButtons.concat(o.formMeta.buttons.mainButtons).find(function(t){return t.action==e.action}))&&o.$refs.DsfButtonToolbox.onCommonClick(t)}),this.$bus.off("refreshFormBus").on("refreshFormBus",function(){o.init()}),this.$bus.on("changeControlShow",function(t){t.show&&-1<o.notVaildateMetas.indexOf(t.metaId)?o.notVaildateMetas.splice(o.notVaildateMetas.indexOf(t.metaId),1):!t.show&&o.notVaildateMetas.indexOf(t.metaId)<0&&o.notVaildateMetas.push(t.metaId)}),null==this.isAsync&&(this.isAsync=!1,j.log("当前节点为同步")),dsf.loadCss.loadForm()},methods:{test:function(){alert("123123")},showNext:function(t){j.log(t),this.showSuccess=!0,this.curPath=t},goBackList:function(){this.showSuccess=!1,this.backSucces()},goNextDb:function(){this.showSuccess=!1,this.$router.replace({path:this.curPath}),this.$eventBus.refresh(this)},commonPopChoose:function(t){this.spHandleJS.choose?this.spHandleJS.choose(t,this):dsf.layer.toast("当前列表未定义接收函数！")},setCurrentOpintion:function(t){this.qixiangjuOpinion=t.content,this.formParams.isSign=t.isSign},refreshPcForm:function(){j.log(this.$refs.pcForm),this.$refs.pcForm&&this.$refs.pcForm[0].refreshIframe()},setOpintion:function(t){var e=this;j.log(t),this.currentOpintion=t[0].content,this.formParams.isSign=t[0].isSign,"init"==t[1]&&this.saveNoTip(function(){e.initData(),e.$nextTick(function(){e.$eventBus.btnWriteOpintion(e)})})},backSendSuc:function(){var t=this;this.returnNodePop=!1,setTimeout(function(){t.backSucces()},100)},getData:function(t){return this.formData.main[t.metaId]},getContainer:function(){return document.body},getNowButton:function(t){var e=this;this.nowButton=t,this.nowButtonParameters={},this.nowButton.parameters&&this.nowButton.parameters.forEach(function(t){e.nowButtonParameters[t.key]=t.value})},formOperation:function(){var t,e,o=this,n=this,a=dsf.layer.loading();n.nowButton.parameters&&n.nowButton.parameters.length?(t=n.nowButton.parameters[0].value,e={moduleId:n.moduleId,pk:n.pk,queryParams:b()(n.$route.query)},dsf.http.post(t,e).then(function(t){var e=t.data;switch(j.log(e),dsf.layer.closeLoading(a),e.action){case"refreshList":dsf.layer.toast(e.message),setTimeout(function(){n.$eventBus.refresh(o)},1e3);break;case"openForm":n.$router.push({path:"/commonForm/".concat(e.moduleId,"/").concat(e.pk)});break;case"openTip":dsf.layer.toast(e.message);break;case"openTipAndCloseForm":dsf.layer.toast(e.message),setTimeout(function(){n.backSucces()},1e3);break;case"openTipAndOpenForm":dsf.layer.toast(e.message),setTimeout(function(){n.$router.push({path:"/commonForm/".concat(e.moduleId,"/").concat(e.pk)})},1e3);break;case"openTipAndGoList":dsf.layer.toast(e.message),setTimeout(function(){n.$router.push({path:e.url})},1e3);break;case"openComfirmAndOpenForm":dsf.layer.confirm({message:e.message,confirmButtonText:"确认"},function(){n.$router.push({path:"/commonForm/".concat(e.moduleId,"/").concat(e.pk)})});break;default:dsf.layer.toast(e.message)}})):dsf.layer.toast("当前按钮未配置接口参数")},handleActionClick:function(t){var e,o=this;this.currentAction=t;this.spHandleJS&&this.spHandleJS[t]?this.spHandleJS[t](this.formData,this.formMeta,this):"formOperation"==t?(e=this.nowButton.parameters&&this.nowButton.parameters.find(function(t){return"needSave"==t.key}))&&0==e.value?this.formOperation():this.saveNoTip(function(){o.formOperation()}):this.buttonHandle[t]?this.btnAction(t):dsf.layer.toast("当前按钮未定义："+t,!1)},saveNoTip:function(e){var o=this;this.spHandleJS&&this.spHandleJS.saveFilter?this.spHandleJS.saveFilter(this.formData,this.formMeta,this,"saveNoTip").then(function(t){o.buttonHandle.saveNoTip(o.$route.params,o.formMeta,o.formData,o,e)}).catch(function(t){dsf.layer.toast(t)}):this.buttonHandle.saveNoTip(this.$route.params,this.formMeta,this.formData,this,e)},btnAction:function(t){this.currentAction=t,this.buttonHandle[t](this.$route.params,this.formMeta,this.formData,this,this.$refs,this.spHandleJS.saveAfter||null)},handleFlowSendChange:function(t){j.info("tag","handleFlowSendChange"),this.sendLineIds=t,C.default.sendAfter(this.formData,this.formMeta,this)},closeSendFilePopup:function(){this.$refs.sendFileCom.cancel()},closeSendFile:function(t){t&&t.length&&(this.sendFileOpintion=t),this.showPopUp=!1,j.info("console","handleFlowSendChange")},openFile:function(){},buttonInit:function(){},initData:function(){var a=this,t="iPad"==dsf.config.clientType?"fn/xform/getInfo?hd=1":"fn/xform/getInfo";dsf.http.get(t,this.getinfoParams).then(function(t){var e,n;"error"==(null==(e=t.data)?void 0:e.type)?(dsf.layer.toast(t.data.message),setTimeout(function(){a.$router.back()},2e3)):(n=t.data.data,t.data.struct.controls.forEach(function(e,t){n.main[e.metaId]||("{}"!=b()(e.defaultValue)?"controlUser"==e.controlType?n.main[e.metaId]=JSON.parse(e.defaultValue.value):n.main[e.metaId]=e.defaultValue:a.notMainCtr.find(function(t){return e.controlType==t})||(n.main[e.metaId]={value:""})),"controlHidden"==e.controlType&&null!=(o=e.defaultValue)&&o.value&&(n.main[e.metaId]={value:e.defaultValue.value});var o=a.formMeta.controls.find(function(t){return t.controlId==e.controlId});o&&(o.extra=e.extra)}),a.formData.main=n.main,a.formButtons=t.data.struct.buttons,a.formMeta.buttons=t.data.struct.buttons,a.$set(a.formParams,"extraPageNum",t.data.struct.parameters.extraPageNum),a.$nextTick(function(){C.default.initDataAfter(a.formData,a.formMeta,a)}))})},init:function(){var n=this;return(0,s.Z)(y().mark(function t(){var g,e,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(g=n).$eventBus.OnDoSaveForm(n,function(t){g.buttonHandle.save(g.$route.params,g.formMeta,g.formData,g,g.$refs,t)}),e={},n.isPop?((e=c()({},n._params)).pk=n.pk,e.moduleId=n.moduleId,e.isEnterTodo=-1):((e=c()({},n.$route.query)).pk=n.pk,e.moduleId=n.moduleId,e.isEnterTodo=n.$route.params.isEnterTodo?1:-1,n.$route.query&&((n.$route.query.listId||n._params.listId)&&(e.listId=n.$route.query.listId||n._params.listId),(n.$route.query.method||n._params.method)&&(e.method=n.$route.query.method||n._params.method),n.$route.query.qianshoufankui&&(e.listId=n.$route.query.qianshoufankui,e.method=n.$route.query.method,e.validateByList=n.$route.query.validateByList),n.$route.query.todoId&&(e.todoId=n.$route.query.todoId),n.$route.query.initDataSource&&(e.initDataSource=n.$route.query.initDataSource),(n.$route.query.formId||n._formId)&&(e.customXForm=n.$route.query.formId||n._formId),n.$route.query.originModuleId&&(e.originModuleId=n.$route.query.originModuleId),n.$route.query.originPk)&&(e.originPk=n.$route.query.originPk),"db"==g.tab?(e.listId="190328103127HaPchz97HN6WfDHYZlq",e.method="feedback",n.$route.query.formMethod&&(e.method="info"),e.validateByList=1):"hy"==g.tab?e.listId="2005251401083zMqDmCkxfMm1LkQC4w":"gw"==g.tab?(e.todoId=n.$route.query.todoId,g.formParams.todoId=n.$route.query.todoId):"dy"==g.tab&&(e.distribId=n.$route.query.distribId),e.customXForm&&(e.todoId=""),n._formId&&(e.formId=n._formId)),n.getinfoParams=e,o="iPad"==dsf.config.clientType?"fn/xform/getInfo?hd=1":"fn/xform/getInfo",t.next=8,dsf.http.get(o,e).then(function(){var e=(0,s.Z)(y().mark(function t(s){var e,l,c,o,n,a,i,r,u,d,f,m,p,h,v;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("error"==(null==(o=s.data)?void 0:o.type))return dsf.layer.toast(s.data.message),setTimeout(function(){g.$router.back()},2e3),t.abrupt("return");t.next=4;break;case 4:return g.importButtonHandle(),l=s.data.data,"commonForm"==g.$route.name&&(g.$route.query.title?k.Z.setTitle(g.$route.query.title):s.data.struct.parameters.title?k.Z.setTitle(s.data.struct.parameters.title):s.data.struct.parameters.titleBar?k.Z.setTitle(s.data.struct.parameters.titleBar):l.main.A0005&&l.main.A0005.value&&k.Z.setTitle(l.main.A0005.value)),dsf.config.commonForm.saveToStorage&&g.setStructJSON(s.data.struct),g.formParams.pk=s.data.struct.parameters.pk,g.formParams.formId=s.data.struct.parameters.formId,s.data.struct.controls.forEach(function(e,t){l.main[e.metaId]||("{}"!=b()(e.defaultValue)?"controlUser"==e.controlType?l.main[e.metaId]=JSON.parse(e.defaultValue.value):l.main[e.metaId]=e.defaultValue:g.notMainCtr.find(function(t){return e.controlType==t})||(l.main[e.metaId]={value:""})),"controlHidden"==e.controlType&&e.defaultValue&&e.defaultValue.value&&(l.main[e.metaId]={value:e.defaultValue.value}),"controlOpinionTagView"==e.controlType&&(g.hasControlOpinionTagView=!0)}),g.$set(g.formParams,"extraPageNum",s.data.struct.parameters.extraPageNum),g.formData=s.data.data,c=s.data.struct,dsf.config.commonForm.qixiangjuDetailModules&&g.pk&&dsf.config.commonForm.qixiangjuDetailModules.find(function(t){return t.split("_")[0]==g.moduleId})&&(g.formStyle=1,c.parameters.formId==dsf.config.commonForm.qixiangjuDetailModules.find(function(t){return t.split("_")[0]==g.moduleId}).split("_")[1])&&(g.formStyle=0),o={pk:g.pk,moduleId:g.moduleId,nodeId:c.parameters.nodeId,flowId:c.parameters.flowId},g.formParams.extraPageNum&&(o.extraPageNum=g.formParams.extraPageNum),t.next=19,dsf.http.post("fn/mobileRelationFile/getFormRelationFiles",o).then(function(t){g.relationList=t.data.rows});case 19:return t.next=21,g.getSignFile(c);case 21:if(c.subform){for(n=_()(c.subform).map(function(t){return t.showOrder}),a="",i=0;i<n.length;i++)for(r=0;r<n.length-i;r++)n[r]>n[r+1]&&(a=n[r],n[r]=n[r+1],n[r+1]=a);u=n.map(function(e,t){return x()(c.subform).filter(function(t){return t[1].showOrder==e})[0][0]}),g.formData.subformKeys=u}if(d={},c.subform)for(f=0,m=x()(c.subform);f<m.length;f++)p=(0,w.Z)(m[f],2),h=p[0],p[1],l.subform&&l.subform[h]?(l.subform[h].forEach(function(t){g.$set(t,"action","Updated")}),d[h]={rows:l.subform[h],notVaildateMetas:[]}):d[h]={rows:[],notVaildateMetas:[]};return g.multinfos=d,g.$set(g.formData,"multinfos",d),t.next=28,C.default.init(g.moduleId,c.parameters.formId,function(){g.spHandleJS=dsf.util.deepCopy(C.default.spHandleJS)});case 28:return v=D()(I.Z),c.controls=c.controls.filter(function(o,t){o.show=1,o.propertyShow=1,"B0001"!=o.metaId||0!=t||"notTitle"==o.extra.eatraClass||!dsf.config.commonForm.bigTitle||dsf.config.commonForm.notBigTitleModules&&-1!=dsf.config.commonForm.notBigTitleModules.indexOf(g.moduleId)||(o.controlType="formTitle",o.showLable=!1),o.extra.nodeList&&(e=o.extra.nodeList.split(",").filter(function(t){return t&&"null"!=t}),o.opinion=x()(g.formData.opinion).filter(function(t){return-1<e.indexOf(t[0])}).map(function(t){return t[1]})),"controlEditOpinion"==o.controlType&&1==o.privilege.visible&&(g.shoEditOpinion=0,g.editorOpinionMetaData=o,g.showOpinionAndBtn="4"==o.extra.displayMode,o.show="4"==o.extra.displayMode?0:1),"controlOpinionView"==o.controlType&&(1==o.extra.mobileInput?g.shoEditOpinion=0:o.extra.list&&0!=o.extra.list.length||(o.show=0)),"opinionControlP2433"==o.controlType&&(j.log(o),o.extra.showNodeId.split(",").includes(c.parameters.nodeId)||(o.show=0)),"controlHidden"==o.controlType&&(o.show=0),"LabelForTextControl"==o.controlType&&(o.showLable=!1),"controlFileCode"==o.controlType&&(o.readonlyValue=s.data.data.main[o.metaId]||""),o.privilege&&!o.privilege.visible&&(g.notVaildateMetas.push(o.metaId),o.show=0),"controlRadio"==o.controlType&&"1"==o.extra.mobileSelectType&&(o.controlType="controlComboBox"),"controlCheckBox"==o.controlType&&"1"==o.extra.mobileSelectType&&(o.controlType="controlComboBox"),"controlSubFormPrimary"!=o.controlType||o.privilege.editable||null!=(t=l.subform)&&null!=(t=t[o.metaId])&&t.length||(o.show=0),"controlMobileFlowInfo"==o.controlType&&0==c.parameters.hasFlow&&(o.show=0),"controlMobileDateShow"==o.controlType&&(o.showLable=!1,t=c.controls.find(function(t){return t.metaId==o.extra.startMetaId}),i=c.controls.find(function(t){return t.metaId==o.extra.endMetaId}),n=null==(n=l.main[o.extra.startMetaId])?void 0:n.value,a=null==(a=l.main[o.extra.endMetaId])?void 0:a.value,!t.privilege.editable&&!i.privilege.editable&&n&&a?(t.show=0,i.show=0,o.show=1):o.show=0),!o.privilege.editable&&l.main[o.metaId]&&_()(l.main[o.metaId]).every(function(t){return""==t})&&1==o.extra.readonlyHide&&(o.show=0),"controlFileRelation"==o.controlType&&(a=(null==(n=g.relationList.find(function(t){return t.fileRelaId==o.extra.fileRelaId}))?void 0:n.document)||[],o.privilege.editable||0!=a.length||(o.show=0)),"controlFileUpload"==o.controlType&&(i=(null==(t=g.allFile.find(function(t){return t.attachType==o.metaId.substr(7)}))?void 0:t.file)||[],"-1"==o.extra.allowMaintain)&&"-1"==o.extra.allowUpload&&0==i.length&&(o.show=0);for(var e,n,a,i,r=0;r<c.propertyJoin.length;r++)!function(){var e=c.propertyJoin[r];e.operateTarget.split(",").forEach(function(t){t=t.split(":");1<t.length||t[0]==o.metaId&&"1"==e.operation&&g.notVaildateMetas.indexOf(o.metaId)<0&&(g.notVaildateMetas.push(o.metaId),o.propertyOperateTarget=1)})}();return"extraPageView"==o.controlType?(null!=o.extra.solicitMode&&(g.formParams.solicitMode=o.extra.solicitMode),null!=o.extra.viewMode&&(g.formParams.viewMode=o.extra.viewMode),null!=o.extra.showFileTypes&&(g.formParams.showFileTypes=o.extra.showFileTypes),!1):"79"!=o.controlId&&"78"!=o.controlId&&v.filter(function(t){return o.controlType==t}).length}),g.allformMeta=JSON.parse(b()(c)),g.$route.query.distribId&&(g.formData.distribId=g.$route.query.distribId),g.$route.query.masterId&&(g.formData.masterId=g.$route.query.masterId),g.formMeta=c,t.next=36,null==(u=g.spHandleJS)||null==(e=u.beforeInitAsync)?void 0:e.call(u,g.formData,g.formMeta,g);case 36:g.initFormTab(),g.getDividerColor(),dsf.config.commonForm.saveToStorage&&g.setStorageToForm(),g.$nextTick(function(){C.default.initHandle(g.formData,g.formMeta,g),C.default.propertyJoinHandle(g.formData,g.formMeta,g)}),g.formButtons=c.buttons,"dy"==g.tab&&g.$eventBus.refresh(g),g.afterGetinfoFunc&&g.afterGetinfoFunc(),g.getInfoLoading=!1;case 44:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return t.stop()}},t)}))()},getSelectUser:function(o){var t,e,n,a,i,r,s=this;j.log(o),this.ShowTreeData?(this.formParams.SelectData=o,this.ShowTreeData=!1,this.showPerson=!1,j.log(this.$refs.commonDialog)):0<o.length&&(o.forEach(function(t,e){t.children&&0<t.children.length&&o.splice(e,1)}),t=o.map(function(t){return t.id.replace("person_","")}),e={},this.isTransfer?1<o.length?dsf.layer.toast("请仅选中一人转交",!0):(n=this.getType(),a=dsf.util.loadSessionStore("user"),i=dsf.layer.loading("取消中"),r=this.dataValue,this.showPerson=!1,j.log(n),dsf.changeUser.flowChangeUser({param:{pk:r.info_id,pId:r.pid,pnId:r.pnid,fromUserId:a.user_id,userId:t.join(","),userName:o.map(function(t){return t.name}).join(","),deptId:o.map(function(t){return t.pid}).join(","),deptName:""},thenFun:function(){s.backSucces()},finallyFun:function(){return dsf.layer.closeLoading(i)}})):this.isDing?dsf.dd.Ding({users:t,type:2,alertType:2,alertDate:{format:"yyyy-MM-dd HH:mm",value:"2020-05-13 20:00"},attachment:{images:[""]},text:dataValue.bt||item.dataValue.B0001,bizType:0,onSuccess:function(){this.dsf.layer.toast("操作成功")},onFail:function(){this.dsf.layer.toast("操作失败")}}):dsf.http.post("fn/newMobileMeeting/sendMeetingSq",{pk:dataValue.info_id,userIds:t,bt:dataValue.bt}).then(function(t){"success"==t.data.type&&dsf.layer.toast("操作成功",!0)}).catch(function(t){e={msg:"操作异常",type:!1}}).finally(function(t){e.msg&&dsf.layer.toast(e.msg,e.type)}))},cancePerson:function(){this.showPerson=!1},getType:function(){var t=6;switch(j.log(this.tab),this.tab){case"gw":t=1;break;case"hy":t=2;break;case"db":t=3;break;case"dy":t=4;break;case"dqs":t=5}return t},initSubForm:function(){for(var e=this,t=this.formMeta,o=0,n=x()(t.subform);o<n.length;o++){var a=(0,w.Z)(n[o],2),i=a[0];a[1];e.formData.multinfos[i]&&e.formData.multinfos[i].rows.forEach(function(t){"Added"==t.action&&e.$set(t,"action","Updated")})}},backSucces:function(t){var e=this;this.$eventBus.refresh(this),"govding"==this.$route.query.from?dsf.dd.closePage():1==this.$route.query.isShGovWechat?setTimeout(function(){window.wx.closeWindow()},500):"lzt"==this.$route.query.from?setTimeout(function(){window.lzt.action("closeWebView",{refresh:1})},500):1==this.$route.query.closeIMPage?setTimeout(function(){ot.Z.closeIMPage()},500):window.dd?window.dd.biz?1==this.$route.query.closePage?window.dd.biz.navigation.close({onSuccess:function(t){},onFail:function(t){}}):window.dd.biz.navigation.goBack():1==this.$route.query.closePage?window.dd.closePage():window.dd.goBack():1==this.$route.query.closePage?window.top!=window?this.$router.back():setTimeout(function(){dsf.util.closeWebview()},500):t?this.$router.go(-1*Math.abs(t)):setTimeout(function(){e.$router.back()},50)},initFormTab:function(){var o=this,s=this,n=[],l=(null==(r=dsf.util.loadSessionStore("user"))?void 0:r.privileges)||[];function t(e){return n.findIndex(function(t){return t.name===e})}function e(e){var t=n.findIndex(function(t){return t.name===e});-1<t&&n.splice(t,1)}dsf.config.formTab&&(n=dsf.config.formTab.filter(function(e){var o=!1,t=(null!=e.showModuleIds&&""!=e.showModuleIds?e.showModuleIds.some(function(t){return t.split("_")[0]==s.moduleId&&(!t.split("_")[1]||t.split("_")[1]==s.formMeta.parameters.formId)})&&(o=!e.showPrivileges||l.some(function(t){return e.showPrivileges.includes(t.name)})):o=!e.showPrivileges||l.some(function(t){return e.showPrivileges.includes(t.name)}),e.defaultSelectModuleIds),n=e.name,a=e.padEnable,i=e.enable,r=e.noShowModuleIds;return r&&r.length&&r.find(function(t){t.split("_")[0]!=s.moduleId||t.split("_")[1]&&t.split("_")[1]!=s.formMeta.parameters.formId||(o=!1)}),null!=t&&t.includes(s.moduleId)&&(s.headTab=n),void 0!==a&&"iPad"==dsf.config.clientType?a&&o:i&&o}));var a=this.moduleId,i=((!this.pk||this._params.commonTabHaveStatus||this.formMeta.parameters&&0==b()(this.formMeta.parameters.hasFlow)||"210204173326Wha9PmqgePoJ8JSIZWX"==a||"210202144200a6hFT4QWrGbmmP4dSy1"==a||((null==(r=dsf.config.commonForm)?void 0:r.hideMoveStatus)||[]).some(function(t){var e=t.split("_")[0],t=t.split("_")[1];return e==a&&(!t||t==o.formMeta.parameters.formId)}))&&(e("moveStatus"),e("newMoveStatus")),this.pk||e("chatFrame"),l.filter(function(t){return"手写签批权限"==t.name}).length||e("signForm"),(this.formMeta.parameters&&"false"==b()(this.formMeta.parameters.showAttachTab)||"210204173326Wha9PmqgePoJ8JSIZWX"==a)&&e("relevantFile"),this.relationList.some(function(t){return 1==t.canShow&&0<t.document.length})||e("relationList"),this.$route.query.isPreview&&(n=[n.find(function(t){return"formTab"==t.name})]),t("signForm")<0&&-1<t("relevantFile")&&"1"==(null==(r=this.formMeta.parameters)?void 0:r.isopenHandwrite)&&(this.headTab="relevantFile"),this.$route.query.notShowFeedbackHandle&&e("feedbackHandle"),t("DefaultList")),r=null==(r=n[i])?void 0:r.set;r?(e("DefaultList"),r.forEach(function(t){var e;t.formId==o.formMeta.parameters.formId&&(e={name:"DefaultList",title:t.title,listParams:{params:t.params||{}}},t.fileType?(e.listParams.params.fileType=t.fileType,n.splice(i++,0,e)):t.listId&&(e.listParams.listId=t.listId,e.listParams.moduleId=t.moduleId,n.splice(i++,0,e)))})):e("DefaultList"),this.$route.query.hideOtherTab&&(n=[n.find(function(t){return t.name==o.$route.query.activeTab})]),this.formTabs=dsf.util.deepCopy(n)},getSignFile:function(r){var s=this;return new(e())(function(e,o){var t={info_id:r.parameters.pk,infoId:r.parameters.pk,nodeId:r.parameters.nodeId,flowId:r.parameters.flowId,moduleId:s.moduleId,start:1,limit:100,pnId:r.parameters.pnId};s.formParams.extraPageNum&&(t.extraPageNum=s.formParams.extraPageNum),s.$route.query.distribId&&(t.distribId=s.$route.query.distribId),s.$route.query.realDistribId&&(t.realDistribId=s.$route.query.realDistribId),s.$route.query.dataFrom&&(t.dataFrom=s.$route.query.dataFrom),dsf.http.post("fn/mobileAttachment/getFormAttachment",t).then(function(t){var t=t.data.rows,a=(new Date).getTime(),i=dsf.util.loadSessionStore("loginToken");t.length&&(t.forEach(function(o){var n=[];o.document?(o.document.forEach(function(t,e){t.downloadFileName=dsf.util.stripscript(t.downloadFileName||t.title);e={pagination:t.pagination,id:t.id,title:t.title,downloadFileName:t.downloadFileName,type:t.type,size:t.showFileSize||"",navtiveUrl:t.url,url:dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.id,"&moduleId=").concat(t.moduleId,"&fileName=").concat(t.downloadFileName,"&nodeId=").concat(r.parameters.nodeId,"&flowId=").concat(r.parameters.flowId,"&x-auth-token=").concat(i)),editUrl:dsf.url.getServerUrl("fn/mobileOffice/wordEdit?fileId=".concat(t.id,"&moduleId=").concat(t.moduleId,"&fileName=").concat(t.downloadFileName,"&nodeId=").concat(r.parameters.nodeId,"&nodeName=").concat(r.parameters.nodeName,"&pnId=").concat(r.parameters.pnId,"&flowId=").concat(r.parameters.flowId,"&x-auth-token=").concat(i)),initUrl:"fn/file/download?infoId=".concat(t.infoId,"&fileId=").concat(t.id,"&fileName=").concat(t.downloadFileName,"&nrType=").concat(t.type,"&moduleId=").concat(t.moduleId,"&x-auth-token=").concat(i,"&fullfilename=").concat(a).concat(t.downloadFileName),handwritingUrl:dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.id,"&moduleId=").concat(t.moduleId,"&fileName=").concat(t.downloadFileName,"&nodeId=").concat(r.parameters.nodeId,"&flowId=").concat(r.parameters.flowId,"&x-auth-token=").concat(i,"&handwriting=1&screenWidth=").concat(document.body.clientWidth)),infoId:t.infoId,moduleId:t.moduleId,isHandwrite:s.$route.query.isdjOpen?-1:t.isHandwrite,isRevise:t.isRevise,isNoModify:t.isNoModify,canEdit:t.canEdit,canDownLoad:t.canDownLoad,mj:t.mj||"",mjText:t.mjText||"",name:1<o.document.length?"".concat(o.name).concat(e+1):o.name};(t.title.toLowerCase().includes(".png")||t.title.toLowerCase().includes(".jpg")||t.title.toLowerCase().includes(".jpeg")||t.title.toLowerCase().includes(".bmp")||t.title.toLowerCase().includes(".gif")||t.title.toLowerCase().includes(".mp4"))&&(e.url=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(t.moduleId,"&fileName=").concat(t.downloadFileName))),"1"==o.canShow&&n.push(e),"手写签批"==o.name&&"1"==e.isHandwrite&&s.handWrittenFile.push(e)}),o.file=n):o.file=[],"-1"==o.allowMaintain&&"-1"==o.allowUpload&&0==o.file.length&&(o.canShow="-1")}),s.allFile=t.filter(function(t){return 1==t.canShow})),e(s.allFile)}).catch(function(t){return o(t)})})},actionSelect:function(t){this.$set(this.formData.main.B0024,"value",t.value),this.spHandleJS&&this.spHandleJS[t.method]?this.spHandleJS[t.method](this.formData,this.formMeta,this):this.buttonHandle.send(this.$route.params,this.formMeta,this.formData,this,this.$refs,null,t.params)},actionSaveCallback:function(t){var e=this;e.buttonHandle.save(e.$route.params,e.formMeta,e.formData,e,e.$refs,t)},confirmFocus:function(t){var e=this;dsf.http.post("/fn/mobileFocus/setFocus",{infoId:this.pk,fid:t}).then(function(t){t.data.result?(e.init(),dsf.layer.toast("".concat(dsf.config.setting["SYS-MOBILE-LIST-0005"]||"收藏","成功"))):dsf.layer.toast(t.data.message)})},getDividerColor:function(){var e=this;if(this.formMeta.parameters.formColor){var t="\n                .van-tab.van-tab--active {\n                    color: ".concat(this.formMeta.parameters.formColor," !important;\n                }\n                .van-tabs__line {\n                    background-color: ").concat(this.formMeta.parameters.formColor," !important;\n                }\n                .showDivider::before{\n                    border-bottom:1px solid ").concat(this.formMeta.parameters.formColor," !important;\n                }\n                .layout_box .control_label, .pad_layout_box .control_label{\n                    color: ").concat(this.formMeta.parameters.formColor,";\n                }\n                .formLayout .relation-type .type-name{\n                    color: ").concat(this.formMeta.parameters.formColor,";\n                }\n                .formLayout .fileTypeName .name{\n                    color: ").concat(this.formMeta.parameters.formColor,";\n                }\n                .formLayout .fileTypeList:not(:last-child){\n                    border-bottom:1px solid ").concat(this.formMeta.parameters.formColor," !important;\n                }\n                .formLayout >.box .divider ::after{\n                  border-color: ").concat(this.formMeta.parameters.formColor," !important;\n                }\n                .control_mobile_fl span{\n                    color: ").concat(this.formMeta.parameters.formColor," !important;\n                }\n                .pad_layout_box .control_mobile_fl {\n                    background-color: #fff;\n                }\n                .formLayout, .formLayout >.box .padLeftRight::before, .formLayout>.box .padLeftRight:last-child::after, .formLayout >.box .padDivider::after, .pad_layout_box .van-col:first-child:after {\n                    border-color: ").concat(this.formMeta.parameters.formColor," !important;\n                }");this.setCssRule(t)}else if(dsf.config.setting["SYS-MOBILE-FORM-0019"])for(var o=JSON.parse(dsf.config.setting["SYS-MOBILE-FORM-0019"]),n=0;n<o.length;n++)if(-1<o[n].forms.findIndex(function(t){return t.split("_")[0]==e.formMeta.parameters.moduleId&&(!t.split("_")[1]||t.split("_")[1]==e.formMeta.parameters.formId)})){var a="\n                        .showDivider::before{\n                            border-bottom:1px solid ".concat(this.formMeta.parameters.formColor," !important;\n                        }");this.setCssRule(a);break}},setCssRule:function(t){this.dividerStyle=document.createElement("style"),this.dividerStyle.type="text/css",this.$el.appendChild(this.dividerStyle),this.dividerStyle.innerHTML=t},closeCallback:function(t){var t=(0,w.Z)(t,2),e=t[0],t=t[1];this.componentName="",null!=e&&e.justClose||this.spHandleJS.closeDialogCallback&&this.spHandleJS.closeDialogCallback(e,t,this.formData,this.formMeta,this)},showTree:function(t){this.extra=t,this.ShowTreeData=!0,this.showPerson=!0,j.log(this.data)},beforechangeTab:function(t){return!this.projectBeforechangeTab||this.projectBeforechangeTab(t)},changeTab:function(t){this.$refs.relevantFile&&this.$refs.relevantFile[0].$refs.enclosure.$refs.tabEnclosurePreview&&("relevantFile"!=t?this.$refs.relevantFile[0].$refs.enclosure.$refs.tabEnclosurePreview.destroyInterval():0<=this.$refs.relevantFile[0].$refs.enclosure.$refs.tabEnclosurePreview.count&&this.$refs.relevantFile[0].$refs.enclosure.$refs.tabEnclosurePreview.init()),this.$refs.signForm&&this.$refs.signForm[0].$refs.tabEnclosurePreview&&"signForm"==t&&this.$refs.signForm[0].$refs.tabEnclosurePreview.init()},opinionToSend:function(){this.alreadyWriteOpintion=!0,"BtnWriteOpinion"==this.nowButton.action?this.handleActionClick("send"):this.handleActionClick(this.nowButton.action)},removeLocalOptions:function(){var e,o=this;this.$route.query.todoId&&(e=dsf.util.loadLocalStore("opnions")||{},D()(e).filter(function(t){return t.includes("".concat(o.$route.params.pk,"_").concat(o.$route.query.todoId))}).forEach(function(t){return delete e[t]}),dsf.util.saveToLocalStore("opnions",e))},closeLeaderReview:function(){this.ShowAddLeaderReview=!1},changeLeaderSitu:function(t){j.log(t),t&&t.initControl?this.formData.main[t.initControl].value=t.data:this.initData()},setStructJSON:function(t){t=JSON.parse(b()(t)),t.subform&&_()(t.subform).forEach(function(t){t.controls=t.controls.filter(function(t){return"controlSubFormPrimary"!=t.controlType}),t.controls.forEach(function(t){delete t.defaultValue,delete t.extra})}),t.controls.forEach(function(t){delete t.defaultValue,delete t.extra}),t={controls:t.controls.filter(function(t){return"controlSubFormPrimary"!=t.controlType}),rows:t.rows,subform:t.subform};this.structJSON=b()(t)},getStorageForm:function(){var t,e=this;return this.$route.params.pk?(t=dsf.util.loadLocalStore("editForms")||[],this.editFormIndex=t.findIndex(function(t){return t.id=="".concat(e.moduleId,"_").concat(e.formParams.formId,"_").concat(e.pk)}),-1<this.editFormIndex?t[this.editFormIndex]:null):null==(t=dsf.util.loadLocalStore("draftForm"))?void 0:t["".concat(this.moduleId,"_").concat(this.formParams.formId)]},saveFormToStorage:function(){var t,e;this.$route.params.pk?(e=this.getStorageForm(),t=dsf.util.loadLocalStore("editForms")||[],e?t[this.editFormIndex]={id:"".concat(this.moduleId,"_").concat(this.formParams.formId,"_").concat(this.pk),formData:this.formData,structJSON:this.structJSON,time:(new Date).getTime()}:(t.length>=(dsf.config.commonForm.saveToStorageLength||10)&&t.pop(),t.unshift({id:"".concat(this.moduleId,"_").concat(this.formParams.formId,"_").concat(this.pk),formData:this.formData,structJSON:this.structJSON,time:(new Date).getTime()})),dsf.util.saveToLocalStore("editForms",t)):((e=dsf.util.loadLocalStore("draftForm")||{})["".concat(this.moduleId,"_").concat(this.formParams.formId)]={formData:this.formData,structJSON:this.structJSON},dsf.util.saveToLocalStore("draftForm",e))},setStorageToForm:function(){this.alreadSetStorage=!0;var t,e=this.getStorageForm();e&&(e.structJSON!=this.structJSON||this.$route.params.pk&&e.time<new Date(null==(t=this.formData.main.A0009)?void 0:t.value).getTime()?this.delFormStorage():this.formData=e.formData)},delFormStorage:function(){var t;this.$route.params.pk?(t=dsf.util.loadLocalStore("editForms")||[],-1!=this.editFormIndex&&t.splice(this.editFormIndex,1),dsf.util.saveToLocalStore("editForms",t)):(delete(t=dsf.util.loadLocalStore("editForms")||{})["".concat(this.moduleId,"_").concat(this.formParams.formId)],dsf.util.saveToLocalStore("draftForm",t))},importButtonHandle:function(){var o=this;n.e(99016).then(n.bind(n,57116)).then(function(t){o.buttonHandle=t.default;var e;n(33959)("./".concat(dsf.config.projectName,".js")).then(function(t){j.log(t),e=t.default,c()(o.buttonHandle,e)}).catch(function(t){j.log("无项目按钮方法")})})}},beforeRouteEnter:function(t,e,o){o(function(t){j.log(e),"commonList"!=e.name&&(t.isFromList=!1)})},beforeRouteLeave:function(t,e,o){this.dividerStyle&&this.$el.removeChild(this.dividerStyle),C.default.leaveHandle(this.formData,this.formMeta,this,{to:t,from:e,next:o}),sessionStorage.removeItem("checkedMettingRoom"),sessionStorage.removeItem("checkedMettingStime"),this.$bus.off("selectUserBus"),this.$bus.off("selectDateTime"),this.$bus.off("checkVal"),this.$bus.off("showCheckBox"),this.$bus.off("subFormAdd"),this.$bus.off("comboxChangeCode"),o()}},ut=(0,g.Z)(rt,function(){var t,e=this,o=e._self._c;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowForm,expression:"isShowForm"}],staticClass:"wrap tabs-Form commonFormDiv",style:{height:e.isShowAppHeader?"calc(100vh - ".concat(e.dsf.util.getOffsetTop(),")"):"100vh"}},[e.dsf.config.commonForm.isShowSkeleton?e._l(3,function(t){return o("van-skeleton",{key:t,attrs:{title:"",row:3,loading:e.getInfoLoading}})}):e._e(),e._v(" "),1==e.formStyle?o("formDetail"):0==e.formStyle&&1<e.formTabs.length?o("van-tabs",{attrs:{"offset-top":e.dsf.util.getOffsetTop(),"title-inactive-color":"#666666","before-change":e.beforechangeTab},on:{change:e.changeTab},model:{value:e.headTab,callback:function(t){e.headTab=t},expression:"headTab"}},e._l(e.formTabs,function(t){return o("van-tab",{key:t.name,attrs:{title:t.title,name:t.name}},[["relationList"!=t.name?o(t.name,{ref:t.name,refInFor:!0,tag:"component",attrs:{"form-params":e.formParams,"form-data":e.formData,"form-meta":e.formMeta,"all-file":e.allFile,"hand-written-file":e.handWrittenFile,"relation-list":e.relationList,"is-from-list":e.isFromList,headTab:e.headTab,tabName:t.name,params:t.listParams}}):o("relationList",{ref:e.relationList,refInFor:!0,tag:"component",attrs:{"relation-list":e.relationList,"form-params":e.formParams,parameters:e.formMeta.parameters}})]],2)}),1):o("div",{staticClass:"formBox"},e._l(e.formTabs,function(t){return t.enable?o(t.name,{key:t.name,ref:t.name,refInFor:!0,tag:"component",attrs:{"all-file":e.allFile,"form-params":e.formParams,"form-data":e.formData,"form-meta":e.formMeta,"relation-list":e.relationList,"is-from-list":e.isFromList,headTab:e.headTab,tabName:t.name}}):e._e()}),1),e._v(" "),e.isShowFooter?o("div",{style:{height:e.showOpinionAndBtn?"auto":"1.2rem",minHeight:e.showOpinionAndBtn?"2rem":""}},[o("div",{class:e.showOpinionAndBtn?"footer-other":"footer"},[e.showOpinionAndBtn?o("DsfButtonAndOpinion",{ref:"DsfButtonAndOpinion",attrs:{size:"small","form-meta":e.formMeta,metaData:e.editorOpinionMetaData,buttons:e.formButtons,"is-show-write-opintion-btn":e.isShowWriteOpintionBtn,"is-show-qi-xiang-ju-edit-opinion":e.isShowQiXiangJuEditOpinion},on:{"update:isShowWriteOpintionBtn":function(t){e.isShowWriteOpintionBtn=t},"update:is-show-write-opintion-btn":function(t){e.isShowWriteOpintionBtn=t},"update:isShowQiXiangJuEditOpinion":function(t){e.isShowQiXiangJuEditOpinion=t},"update:is-show-qi-xiang-ju-edit-opinion":function(t){e.isShowQiXiangJuEditOpinion=t},commonClick:e.handleActionClick,getNowButton:e.getNowButton}}):o("DsfButtonToolbox",{ref:"DsfButtonToolbox",attrs:{"is-show-write-opintion-btn":e.isShowWriteOpintionBtn,"is-show-qi-xiang-ju-edit-opinion":e.isShowQiXiangJuEditOpinion,more:!0,"is-form-btn":!0,buttons:e.formButtons,size:"small"},on:{"update:isShowWriteOpintionBtn":function(t){e.isShowWriteOpintionBtn=t},"update:is-show-write-opintion-btn":function(t){e.isShowWriteOpintionBtn=t},"update:isShowQiXiangJuEditOpinion":function(t){e.isShowQiXiangJuEditOpinion=t},"update:is-show-qi-xiang-ju-edit-opinion":function(t){e.isShowQiXiangJuEditOpinion=t},mainClick:e.handleActionClick,commonClick:e.handleActionClick,getNowButton:e.getNowButton}})],1)]):e._e(),e._v(" "),e.ShowSendFile?o("van-popup",{ref:"sendPop",style:{height:"showSimple"==e.dsf.config.commonFlow.nodeDisplayType?"100vh":"90vh"},attrs:{"get-container":"#app","lock-scroll":"",position:"bottom",round:"showSimple"!=e.dsf.config.commonFlow.nodeDisplayType},on:{close:e.closeSendFilePopup},model:{value:e.showPopUp,callback:function(t){e.showPopUp=t},expression:"showPopUp"}},[o("send-file",{directives:[{name:"show",rawName:"v-show",value:e.showFlowSend,expression:"showFlowSend"}],ref:"sendFileCom",attrs:{"form-meta":e.formMeta,"form-params":e.formParams,"form-data":e.sendFileData,"is-show-write-opintion-btn":e.isShowWriteOpintionBtn,"current-opintion":e.currentOpintion,sendFileOpintion:e.sendFileOpintion,"send-parameters":e.nowButtonParameters,currentAction:e.currentAction},on:{change:e.handleFlowSendChange,close:e.closeSendFile,golist:e.backSucces,showNext:e.showNext,initData:e.initData}})],1):e._e(),e._v(" "),e.showyuebi?o("yuebi",{ref:"yuebi",attrs:{"form-data":e.formData},on:{golist:e.backSucces}}):e._e(),e._v(" "),e.showBtnWriteOpintion?o("btn-write-opintion",{ref:"BtnWriteOpintion",attrs:{"form-data":e.formData,"meta-data":e.formMeta,"form-params":e.formParams,"current-opintion":e.currentOpintion},on:{setOpintion:function(t){return e.setOpintion(arguments)},refreshPcForm:e.refreshPcForm,send:function(t){return e.opinionToSend()}}}):e._e(),e._v(" "),o("sign-file",{ref:"signFile"}),e._v(" "),o("ask-leave",{ref:"askLeave"}),e._v(" "),e.showSeparate?o("separate-read",{ref:"readPop",attrs:{"separate-tabs":e.separateTabs,"form-params":e.formMeta.parameters,nowButtonParameters:e.nowButtonParameters}}):e._e(),e._v(" "),o("van-popup",{attrs:{"get-container":"#app","lock-scroll":"",position:"bottom",round:""},model:{value:e.showFlowBack,callback:function(t){e.showFlowBack=t},expression:"showFlowBack"}},[o("work-flow-dialog",{ref:"wfDialog",attrs:{"form-data":e.dataValue,"meta-data":e.formMeta},on:{change:e.backSucces,close:function(t){e.showFlowBack=!1}}})],1),e._v(" "),o("van-popup",{style:{height:"100%"},attrs:{"close-on-click-overlay":!1,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:e.showPerson,callback:function(t){e.showPerson=t},expression:"showPerson"}},[e.showPerson?o("control-user-list",{attrs:{extra:e.extra,selectType:e.selectType},on:{close:e.cancePerson,getSelectUser:e.getSelectUser}}):e._e()],1),e._v(" "),o("van-popup",{attrs:{"close-on-click-overlay":!0,"lock-scroll":"",position:"bottom",round:""},model:{value:e.returnNodePop,callback:function(t){e.returnNodePop=t},expression:"returnNodePop"}},[o("returnNode",{ref:"returnNode",attrs:{"meta-data":{pk:e.formMeta.parameters?e.formMeta.parameters.pk:"",moduleId:e.moduleId,nodeId:e.formMeta.parameters?e.formMeta.parameters.nodeId:"",nodeName:e.formMeta.parameters?e.formMeta.parameters.nodeName:"",flowId:e.formMeta.parameters?e.formMeta.parameters.flowId:"",pId:e.formMeta.parameters?e.formMeta.parameters.pId:"",pnId:e.formMeta.parameters?e.formMeta.parameters.pnId:""},formData:e.formData.main,nowButtonParameters:e.nowButtonParameters},on:{backSendSuc:e.backSendSuc,onClickLeft:function(t){e.returnNodePop=!1}}})],1),e._v(" "),o("TransactionActionSheet",{attrs:{"form-data":e.formData,"meta-data":e.formMeta},on:{actionSelect:e.actionSelect},model:{value:e.isShowTransactionActionSheet,callback:function(t){e.isShowTransactionActionSheet=t},expression:"isShowTransactionActionSheet"}}),e._v(" "),o("van-popup",{style:{height:"100%"},attrs:{"close-on-click-overlay":!1,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:e.isShowQiXiangJuOpinion,callback:function(t){e.isShowQiXiangJuOpinion=t},expression:"isShowQiXiangJuOpinion"}},[o("QiXiangJuOpinion",{attrs:{show:e.isShowQiXiangJuOpinion},on:{"update:show":function(t){e.isShowQiXiangJuOpinion=t}}})],1),e._v(" "),o("van-popup",{style:{height:"100%"},attrs:{"close-on-click-overlay":!1,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:e.isShowQiXiangJuFlow,callback:function(t){e.isShowQiXiangJuFlow=t},expression:"isShowQiXiangJuFlow"}},[o("QiXiangJuFlow",{attrs:{show:e.isShowQiXiangJuFlow},on:{"update:show":function(t){e.isShowQiXiangJuFlow=t}}})],1),e._v(" "),e.isShowQiXiangJuEditOpinion?o("QiXiangJuEditOpinion",{ref:"QiXiangJuEditOpinion",attrs:{"form-data":e.formData,"form-meta":e.formMeta},on:{setOpinion:e.setCurrentOpintion,send:function(t){return e.handleActionClick("send")}}}):e._e(),e._v(" "),o("van-popup",{staticStyle:{height:"100%","background-color":"#f5f5f5"},attrs:{"get-container":"#app",position:"bottom"},model:{value:e.commonPop,callback:function(t){e.commonPop=t},expression:"commonPop"}},[null!=(t=e.commonPopParam)&&null!=(t=t.params)&&t.title?o("van-sticky",[o("header",[o("van-nav-bar",{staticStyle:{"z-index":"9"},attrs:{title:e.commonPopParam.params.title},on:{"click-left":function(t){e.commonPop=!1}},scopedSlots:e._u([{key:"left",fn:function(){return[o("van-icon",{attrs:{name:"arrow-left"}}),o("span",[e._v("返回")])]},proxy:!0}],null,!1,2489604797)})],1)]):e._e(),e._v(" "),o("DefaultList",{key:e.refreshListKey,ref:"DefaultList",attrs:{params:e.commonPopParam,"no-load-js":null==(null==(t=e.commonPopParam)||null==(t=t.params)?void 0:t.noLoadJs)||e.commonPopParam.params.noLoadJs,"check-type-pop":e.checkType,checkable:e.checkable,"oppset-top":"0px"},on:{cancelCheck:function(t){e.commonPop=!1},confirmCheck:e.commonPopChoose}})],1),e._v(" "),e.showChooseFolder?o("chooseFolder",{attrs:{show:e.showChooseFolder,type:"focus"},on:{"update:show":function(t){e.showChooseFolder=t},confirmChoose:e.confirmFocus}}):e._e(),e._v(" "),o("rejectDialog",{ref:"rejectDialog"}),e._v(" "),o("check-box-dialog",{ref:"ckDialog"}),e._v(" "),o("wuxiAppraise",{ref:"appraise",attrs:{metaData:{pk:e.formMeta.parameters?e.formMeta.parameters.pk:"",moduleId:e.moduleId,nodeId:e.formMeta.parameters?e.formMeta.parameters.nodeId:"",pnId:e.formMeta.parameters?e.formMeta.parameters.pnId:"",flowId:e.formMeta.parameters?e.formMeta.parameters.flowId:"",pId:e.formMeta.parameters?e.formMeta.parameters.pId:"",fromId:e.formMeta.parameters?e.formMeta.parameters.fromId:""}}}),e._v(" "),o("calendarSelect",{ref:"calenderSelect"}),e._v(" "),o("commonDialog",{directives:[{name:"show",rawName:"v-show",value:""!=e.componentName,expression:"componentName != ''"}],ref:"commonDialog",attrs:{componentName:e.componentName,"form-data":e.formData,"meta-data":e.formMeta,"form-params":e.formParams,extra:e.extra},on:{closeCallback:function(t){return e.closeCallback(arguments)},showTree:e.showTree,backSucces:e.backSucces}}),e._v(" "),o("van-dialog",{attrs:{showConfirmButton:!1,showCancelButton:!1,title:"操作提示"},model:{value:e.showSuccess,callback:function(t){e.showSuccess=t},expression:"showSuccess"}},[o("div",{staticClass:"radioBox"},[o("van-icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"static/assistant/passed.png",size:"2rem"}}),e._v(" "),o("span",[e._v("发送成功")]),e._v(" "),o("van-button",{attrs:{type:"info"},on:{click:e.goNextDb}},[e._v("继续办理")]),e._v(" "),o("van-button",{attrs:{type:"default"},on:{click:e.goBackList}},[e._v("返回列表")])],1)]),e._v(" "),o("van-popup",{staticStyle:{height:"100vh"},attrs:{"get-container":"#app","lock-scroll":"",position:"bottom"},model:{value:e.ShowAddLeaderReview,callback:function(t){e.ShowAddLeaderReview=t},expression:"ShowAddLeaderReview"}},[o("add-leader-review",{key:e.leaderReviewKey,ref:"addLeaderReview",attrs:{"form-data":e.formData,"form-meta":e.formMeta,"form-params":e.formParams,"leader-order":e.leaderOrder,"process-settings":e.processSettings,"flow-range-url":e.flowRangeUrl},on:{close:e.closeLeaderReview,changeLeaderSitu:e.changeLeaderSitu}})],1)],2)},[],!1,null,"32e436b9",null).exports},81505:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"LabelForTextControl",components:{},mixins:[o(13852).Z],data:function(){return{controlData:{inputAlign:"left"}}},computed:{labelStylr:function(){return{fontSize:this.metaData.extra.fontSize?"".concat(this.metaData.extra.fontSize,"px"):"",fontWeight:this.metaData.extra.fontWeight||"",color:this.metaData.extra.color||""}}},watch:{},methods:{textClick:function(){this.$bus.emit("textClick",this)}},created:function(){},mounted:function(){},destroyed:function(){}},n=(0,o(51900).Z)(e,function(){var e=this;return(0,e._self._c)("div",{staticClass:"LabelForTextControl van-field",style:e.labelStylr,domProps:{innerHTML:e._s(e.metaData.label)},on:{click:function(t){return e.textClick()}}})},[],!1,null,null,null).exports},87232:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(11650);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlCheckBox",mixins:[e.Z],model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null},formMeta:{type:Object,default:function(){}},topformMeta:{type:Object,default:function(){}}},data:function(){return{showPopup:!1,result:[],controlData:{inputAlign:"left",rules:[],leftIcon:"",rightIcon:"",disabled:!1,closeable:!0,round:!0,lockScroll:!0,overlay:!0,duration:"0.3",columnsValue:{columns:[]}},currentColumns:[],readonly:!1,ifCheck:!1}},components:{controlDialog:c.default},watch:{"metaData.defaultValue":{handler:function(t,e){t.value&&(this.result=t.value.split(","))},deep:!0,immediate:!0},"metaData.enumData":{handler:function(t,e){this.controlData.columnsValue.columns=t,this.currentColumns=t},deep:!0,immediate:!0},"value.value":{handler:function(t,e){this.result=t?t.split(","):[]},immediate:!0}},computed:{style:function(){return"mobile"==dsf.config.clientType&&"row"==dsf.config.commonForm.layout&&"right"==dsf.config.commonForm.textlayout?"justify-content: flex-end":""},bindValue:function(){var t=this;return this.readonly||this.value.value.length&&this.currentColumns.length<1?this.value.text:this.value.value&&this.value.value.split(",").map(function(e){if(t.currentColumns.filter(function(t){return t.value==e})[0])return t.currentColumns.filter(function(t){return t.value==e})[0].text}).join(",")}},created:function(){var t;this.controlData.columnsValue.columns=this.metaData.enumData,this.controlData.placeholder=this.metaData.extra.placeholder,this.currentColumns=this.metaData.enumData,this.metaData.extra&&this.metaData.extra.multiple&&(this.ifCheck=this.metaData.extra.multiple),""==this.value.value&&""==this.value.text&&"{}"!=l()(this.metaData.defaultValue)&&"0"==this.topformMeta.parameters.nodeId&&((t=this.value).value=this.metaData.defaultValue.value,t.text=this.metaData.defaultValue.text,this.$emit("input",t)),this.readonly||(this.controlData.rightIcon=" iconfont iconchevron-right")},methods:{toClick:function(){this.readonly||(this.showPopup=!this.showPopup,this.$bus.emit("showCheckBox",this))},changeGroup:function(t){var o=this,e=(this.value.value=this.result.join(","),this.showPopup=!this.showPopup,this.value);this.currentColumns=this.controlData.columnsValue.columns,e.value=this.result.join(),e.text=this.result.map(function(e){return o.currentColumns.filter(function(t){return t.value==e})[0].text}).join(","),this.$emit("input",e),this.$bus.emit("checkVal",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex}))}}},f=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"box controlCheckBoxWrap"},[o.readonly?n("div",{staticClass:"van-cell van-field"},[n("span",{staticClass:"van-field__control",domProps:{textContent:o._s(o.bindValue)}})]):n("van-field",{attrs:{rules:o.controlData.rules},scopedSlots:o._u([{key:"input",fn:function(){return[n("van-checkbox-group",{style:o.style,attrs:{direction:"horizontal"},on:{change:o.changeGroup},model:{value:o.result,callback:function(t){o.result=t},expression:"result"}},o._l(o.currentColumns,function(t,e){return n("div",{key:e,staticClass:"diaItem flex ac"},[n("van-checkbox",{attrs:{name:t.value,shape:"square","icon-size":"0.32rem"}},[o._v(o._s(t.text))])],1)}),0)]},proxy:!0}],null,!1,2129493877),model:{value:o.bindValue,callback:function(t){o.bindValue=t},expression:"bindValue"}})],1)},[],!1,null,"7a24d0b3",null).exports},18317:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(11650);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlCheckBox",mixins:[e.Z],model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null}},data:function(){return{showPopup:!0,result:[],controlData:{inputAlign:"left",rules:[],leftIcon:"",rightIcon:"",disabled:!1,closeable:!0,round:!0,lockScroll:!0,overlay:!0,duration:"0.3",columnsValue:{columns:[]}},currentColumns:[],readonly:!1,ifCheck:!1}},components:{controlDialog:c.default},computed:{bindValue:function(){var t=this;return this.value.value.length&&this.currentColumns.length<1?this.value.text:this.value.value&&this.value.value.split(",").map(function(e){if(t.currentColumns.filter(function(t){return t.value==e})[0])return t.currentColumns.filter(function(t){return t.value==e})[0].text}).join(",")}},created:function(){var t;this.controlData.columnsValue.columns=this.metaData.enumData,this.currentColumns=this.metaData.enumData,this.metaData.extra&&this.metaData.extra.multiple&&(this.ifCheck=this.metaData.extra.multiple),"{}"!=l()(this.metaData.defaultValue)&&this.metaData.parameters&&this.metaData.parameters.nodeId&&"0"==this.metaData.parameters.nodeId&&((t=this.value).value=this.metaData.defaultValue.value,t.text=this.metaData.defaultValue.text,this.$emit("input",t)),this.result=""!=this.value.value?this.value.value.split(","):[],this.readonly||(this.controlData.rightIcon=" iconfont iconchevron-right")},methods:{toClick:function(){this.readonly||(this.showPopup=!this.showPopup,this.$bus.emit("showCheckBox",this))},cancel:function(){this.showPopup=!this.showPopup},confirm:function(){var t=this,e=(this.showPopup=!this.showPopup,this.value);this.currentColumns=this.controlData.columnsValue.columns,e.value=this.result.join(),e.text=this.result.map(function(e){return t.currentColumns.filter(function(t){return t.value==e})[0].text}).join(","),this.$emit("input",e),this.$bus.emit("checkVal",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex}))},changeGroup:function(t){this.confirm()},pupopClose:function(t){this.currentColumns=this.controlData.columnsValue.columns},selectItem:function(t){var e;t.children?(this.showPopup=!0,this.currentColumns=t.children):(e=this.value,this.currentColumns=this.controlData.columnsValue.columns,e.value=t.value,e.text=t.text,this.$emit("input",e),this.$bus.emit("checkVal",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})))}}},f=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return!o.readonly||o.readonly&&o.bindValue?n("div",{staticClass:"box controlCheckBoxWrap"},[n("div",{staticClass:"diaBox"},[n("van-checkbox-group",{staticStyle:{flex:"1","overflow-y":"auto"},on:{change:o.changeGroup},model:{value:o.result,callback:function(t){o.result=t},expression:"result"}},o._l(o.currentColumns,function(t,e){return n("div",{key:e,staticClass:"diaItem flex ac"},[n("van-checkbox",{attrs:{shape:"square",name:t.value}},[o._v(o._s(t.text))])],1)}),0)],1)]):o._e()},[],!1,null,"a43b601a",null).exports},16929:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(25108);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlCityPickerA",mixins:[e.Z],props:["formData","parameters","subFormIndex","formId"],model:{prop:"value",event:"input"},data:function(){return{val1:"",defaultVal:this.value.value,pickerShow:!1,columns:[],controlData:{readonly:!1,placeholder:""},cityPickerData:[],indexA:0,indexB:0,indexC:0}},created:function(){var e=this;dsf.http.post("/fn/cityPickerData/get").then(function(t){t=t.data;e.cityPickerData=t.data,e.initData()})},mounted:function(){},methods:{initData:function(){var e=[],t={},o=this;this.value.value?e=this.value.value.split(","):"{}"!=l()(this.metaData.defaultValue)&&(e=this.metaData.defaultValue.value.split(",")),this.checkFormat(function(){o.columns=o.cityPickerData.filter(function(t){return-1==t.fid}),0<e.length&&(t=o.columns.find(function(t){return t.id==e[0]}),o.indexA=o.columns.findIndex(function(t){return t.id==e[0]}),t)&&(o.val1+=t.name)},function(){o.columns.forEach(function(e){e.children=o.cityPickerData.filter(function(t){return t.fid==e.id})}),1<e.length&&(o.indexB=t.children.findIndex(function(t){return t.id==e[1]}),t=t.children.find(function(t){return t.id==e[1]}))&&(o.val1+="/"+t.name)},function(){o.columns.forEach(function(t){t.children.forEach(function(e){e.children=o.cityPickerData.filter(function(t){return t.fid==e.id})})}),2<e.length&&(o.indexC=t.children.findIndex(function(t){return t.id==e[2]}),t=t.children.find(function(t){return t.id==e[2]}))&&(o.val1+="/"+t.name)})},showPicker:function(){var t=this;this.readonly||(this.pickerShow=!this.pickerShow,this.$nextTick(function(){t.checkFormat(function(){t.$refs.picker.setColumnIndex(0,t.indexA)},function(){t.$refs.picker.setColumnIndex(1,t.indexB)},function(){t.$refs.picker.setColumnIndex(2,t.indexC)})}))},checkFormat:function(t,e,o){0<Number(this.metaData.extra.format)&&t&&t(),1<Number(this.metaData.extra.format)&&e&&e(),2<Number(this.metaData.extra.format)&&o&&o()},confirmData:function(t,e){var o=this,n=this.val1="",a="",i=this.$refs.picker.getValues(),r=this.$refs.picker.getIndexes(),s=(c.log(i,r),this.checkFormat(function(){o.indexA=r[0]},function(){o.indexB=r[1]},function(){o.indexC=r[2]}),i.forEach(function(t,e){o.val1+=t.name,a+=t.name,n+=t.id,e<i.length-1&&(o.val1+="/",a+=",",n+=",")}),this.value);s.value=n,s.text=a,this.$emit("input",s),this.$bus.emit("changeCityBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId})),this.showPicker()},getContainer:function(){return document.querySelector("body")}}},f=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"controlCityPickerA"},[t("div",{},[t("div",{on:{click:e.showPicker}},[t("van-field",{attrs:{name:e.metaData.metaId,readonly:"",placeholder:"请选择"},model:{value:e.val1,callback:function(t){e.val1=t},expression:"val1"}})],1)]),e._v(" "),t("van-popup",{attrs:{"get-container":e.getContainer,position:"bottom",round:""},model:{value:e.pickerShow,callback:function(t){e.pickerShow=t},expression:"pickerShow"}},[t("van-picker",{ref:"picker",attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:e.confirmData,cancel:e.showPicker},scopedSlots:e._u([{key:"option",fn:function(t){return[e._v("\n        "+e._s(t.name)+"\n      ")]}}])})],1)],1)},[],!1,null,"2582cb12",null).exports},91733:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlCode",extends:o(59146).default,created:function(){}},n=(0,o(51900).Z)(e,void 0,void 0,!1,null,null,null).exports},84140:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(11650);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlComboBox",mixins:[e.Z],model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null},formMeta:{type:Object,default:function(){}},topformMeta:{type:Object,default:function(){}}},data:function(){return{showPopup:!1,controlData:{inputAlign:"left",rules:[],leftIcon:"",rightIcon:"",disabled:!1,closeable:!0,round:!0,lockScroll:!0,overlay:!0,duration:"0.3",columnsValue:{columns:[]},allowEdit:!1},currentColumns:[],readonly:!1,isMultiple:!1}},components:{controlDialog:c.default},computed:{bindValue:{get:function(){var t=this;return this.value.value||this.readonly||this.value.value.length&&this.currentColumns.length<1?this.value.text:this.value.value&&this.value.value.split(",").map(function(e){if(t.currentColumns.filter(function(t){return t.value==e})[0])return t.currentColumns.filter(function(t){return t.value==e})[0].text}).join(",")},set:function(t){this.value.text=t,this.value.value=t}},result:{get:function(){return!this.isMultiple||""==this.value.value?[]:this.value.value.split(",")},set:function(t){this.value.value=t.join(",")}}},watch:{"metaData.enumData":{handler:function(t,e){t&&(this.controlData.columnsValue.columns=t,this.currentColumns=t)},deep:!0,immediate:!0},"value.value":{handler:function(t,e){var o=this;t&&this.$nextTick(function(){1==o.metaData.extra.isDocType&&o.$bus.emit("comboxChangeCode",d(d({},o.value),{},{metaData:o.metaData,subFormIndex:o.subFormIndex}))})},deep:!0,immediate:!0},result:{immediate:!0,handler:function(e,t){var o=this;this.currentColumns.forEach(function(t){-1<e.indexOf(t.value)?o.$set(t,"checked",!0):o.$set(t,"checked",!1)})}}},created:function(){this.$set(this.value,"text",this.value.text),this.metaData.extra&&this.metaData.extra.multiple&&(this.isMultiple=this.metaData.extra.multiple);var t=this.formMeta||this.topformMeta,e=this.value;this.value.value||this.value.text?(e.text=this.value.text,e.value=this.value.value):t.parameters&&t.parameters.nodeId&&"{}"!=l()(this.metaData.defaultValue)&&(e.value=this.metaData.defaultValue.value,e.text=this.metaData.defaultValue.text),this.$emit("input",e),this.readonly||(this.controlData.rightIcon=" iconfont iconchevron-right"),this.value.value&&this.$bus.emit("checkValToFilecode",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex}))},methods:{toggleChecked:function(t){this.$set(t,"checked",!t.checked);var e=this.result.indexOf(t.value);-1<e?this.result.splice(e,1):this.result.push(t.value)},toClick:function(){this.readonly||(this.showPopup=!this.showPopup,this.$bus.emit("showCheckBox",this))},cancel:function(){this.showPopup=!this.showPopup},confirm:function(){var t=this,e=(this.showPopup=!this.showPopup,this.value);this.currentColumns=this.controlData.columnsValue.columns,e.value=this.result.join(),e.text=this.result.map(function(e){return t.currentColumns.filter(function(t){return t.value==e})[0].text}).join(","),this.$emit("input",e),this.$bus.emit("checkVal",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$bus.emit("checkValToFilecode",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex}))},changeGroup:function(t){},pupopClose:function(t){this.currentColumns=this.controlData.columnsValue.columns},selectItem:function(t){var e;t.children?(this.showPopup=!0,this.currentColumns=t.children):(e=this.value,this.currentColumns=this.controlData.columnsValue.columns,e.value=t.value,e.text=t.text,this.$emit("input",e),this.$bus.emit("checkVal",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$bus.emit("checkValToFilecode",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})))}}},f=(0,o(51900).Z)(e,function(){var o=this,t=o._self._c;return t("div",{staticClass:"box controlCheckBoxWrap"},[o.readonly?o._e():t("van-field",{ref:"comboInput",staticClass:"controlCheckBox",class:[o.controlData.error?"errorInp":""],attrs:{disabled:o.controlData.disabled,clickable:o.controlData.clickable,placeholder:o.controlData.placeholder,readonly:!o.controlData.allowEdit,"input-align":o.controlData.inputAlign,"left-icon":o.controlData.leftIcon,"right-icon":o.controlData.rightIcon,border:!1,rules:o.controlData.rules,name:o.metaData&&o.metaData.metaId?o.metaData.metaId:""},on:{click:function(t){return o.toClick("click",t)}},scopedSlots:o._u([{key:"right-icon",fn:function(){return[t("i",{staticClass:"iconfont iconyoujiantou1"})]},proxy:!0}],null,!1,2303440962),model:{value:o.bindValue,callback:function(t){o.bindValue=t},expression:"bindValue"}}),o._v(" "),o.readonly?t("div",{staticClass:"van-cell van-field"},[t("span",{staticClass:"van-field__control",domProps:{textContent:o._s(o.bindValue)}})]):o._e(),o._v(" "),o.isMultiple?t("van-popup",{staticClass:"flex dc",staticStyle:{height:"60vh"},attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:o.showPopup,callback:function(t){o.showPopup=t},expression:"showPopup"}},[t("div",{staticClass:"popup-title"},[t("i",{staticClass:"iconfont iconxialajiantou",attrs:{size:"0.4rem"},on:{click:function(t){o.showPopup=!1}}}),o._v(" "),t("span",[o._v("选择")])]),o._v(" "),t("div",{staticClass:"choose-container"},o._l(o.currentColumns,function(e){return t("div",{staticClass:"choose-col flex jb",on:{click:function(t){return o.toggleChecked(e)}}},[t("span",{staticClass:"elps"},[o._v(o._s(e.text))]),o._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"item.checked"}],staticClass:"iconfont iconcheck"})])}),0),o._v(" "),t("div",{staticClass:"choose-btn"},[t("van-button",{attrs:{type:"primary",block:""},on:{click:o.confirm}},[o._v("确定")])],1)]):o._e(),o._v(" "),o.isMultiple?o._e():t("control-dialog",{attrs:{columns:o.controlData.columnsValue,checkedVal:o.value.value,metaData:o.metaData},on:{pupopClose:o.pupopClose,selectItem:o.selectItem},model:{value:o.showPopup,callback:function(t){o.showPopup=t},expression:"showPopup"}})],1)},[],!1,null,"3319cffc",null).exports},44266:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(25108);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlDateTime",mixins:[e.Z],model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null}},computed:{showValue:function(){return this.metaData.format?this.changeFormat(this.value.value.trim()):this.value.value}},data:function(){var t;return{show:!1,controlData:{defaultDate:new Date,inputAlign:"right",rules:[],type:"single",title:"日期选择",placeholder:"时间选择",color:"",minDate:new Date((new Date).getFullYear()-5,0,1),maxDate:new Date((new Date).getFullYear()+5,11,31),confirmText:"确定",confirmDisText:"请选择",position:"bottom",maxRange:"5",showMark:!0,showConfirm:!0,round:!0,rangePrompt:"超出可选范围",allowSameDay:!0,arrFormatter:[]},successValue:this.value,showPicker:!1,currentTime:"",nowTime:"",allowHours:!0,currentDate:new Date,currentDateTitle:"选择年月",currentDateType:"year-month",timePop:!1,minDate:new Date((new Date).getFullYear()-100,0,1),maxDate:new Date((new Date).getFullYear()+10,11,31),onlyShowTime:"hh:mm"==(null==(t=this.metaData.format)?void 0:t.toLowerCase())||!1}},watch:{value:{handler:function(t,e){var o;null!=t&&t.value&&null!=(o=this.metaData.format)&&o.toLowerCase().includes("hh:mm")&&(this.currentTime=t.value.substring(this.metaData.format.toLowerCase().indexOf("hh:mm")),c.log(this.currentTime))},deep:!0,immediate:!0}},mounted:function(){var t,e;this.metaData.extra.minDate&&(this.controlData.minDate=this.metaData.extra.minDate),this.metaData.extra.maxDate&&(this.controlData.maxDate=this.metaData.extra.maxDate),this.controlData.type=this.metaData.DateType||"single","{}"==l()(this.metaData.defaultValue)||this.value.value||(t=this.metaData.defaultValue,(e=this.value).value=t.value,this.$emit("input",e)),this.metaData.format?this.metaData.format&&(-1<this.metaData.format.indexOf("HH")?this.allowHours=!0:this.allowHours=!1,t=this.metaData.defaultValue,e=this.value,"yyyy"==this.metaData.format&&(this.currentDateTitle="选择年份",e.value=dsf.date.format(t.value+"-01-01","yyyy-mm-dd")),"yyyy-MM"==this.metaData.format&&(this.currentDateTitle="选择年月",e.value=dsf.date.format(t.value+"-01","yyyy-mm-dd")),this.$emit("confirm",e)):this.allowHours=!1,"200921170218dMlK5UVnsi1jkA5F35N"==this.$route.params.moduleId&&(this.allowHours=!1),"2011251622514OfwWKislZu9g54F3LS"==this.$route.params.moduleId&&(this.allowHours=!1),"201125171531HhP41e8lrLw0T7kuFXK"==this.$route.params.moduleId&&(this.allowHours=!1)},methods:{selectYear:function(){var o=this;this.$nextTick(function(){o.$refs.currentDate.$el.querySelectorAll(".van-picker-column").forEach(function(t,e){("yyyy"!==o.metaData.format||0==e)&&(t.style.display="block")})})},changeFormat:function(t){var e=-1<this.metaData.format.indexOf("|")?this.metaData.format.split("|")[1]:this.metaData.format;return-1<(e=-1<(e=-1<e.indexOf("mm")?e.replace("mm","ii"):e).indexOf("HH")?e.replace("HH","hh"):e).indexOf("MM")&&(e=e.replace("MM","mm")),dsf.date.format(t,e)},confirmTime:function(){var t,e=this;this.timePop=!1,"yyyy"==this.metaData.format||"yyyy-MM"==this.metaData.format?((t=this.value).value=dsf.date.format(this.currentDate,"yyyy-mm-dd"),this.$bus.emit("selectDateTime",d(d({},t),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",t)):(this.currentDate<new Date?this.controlData.minDate=new Date(this.currentDate.getFullYear()-5,0,1):this.controlData.maxDate=new Date(this.currentDate.getFullYear()+5,0,1),this.$nextTick(function(){e.$refs.calendarRef.scrollToDate(e.currentDate)}))},cancelTime:function(){this.timePop=!1},scrollDate:function(){this.timePop=!0},clearDate:function(){this.value.value="",this.timePop=!1,this.showPicker=!1,this.show=!1},formatDate:function(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},formatter:function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.controlData.arrFormatter,n=o.date.getMonth()+1,a=o.date.getDate();return t&&t.forEach(function(t,e){n==t.month&&a==t.date&&(t.topInfo&&(o.topInfo=t.topInfo),t.text&&(o.text=t.text),t.bottomInfo&&(o.bottomInfo=t.bottomInfo),t.type)&&(o.type=t.type)}),o},onConfirm:function(o){var t;"single"==this.controlData.type||""==this.controlData.type?(o=dsf.date.format(o,"yyyy-mm-dd"),c.log(o),this.allowHours?(this.nowTime=o,this.showPicker=!0):(this.show=!this.show,(t=this.value).value=o,this.$bus.emit("selectDateTime",d(d({},t),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",t))):(o=o.map(function(t,e){return dsf.date.format(o,"yyyy-mm-dd")}),t.value=o.join())},confirmDate:function(t){var e=this.value;e.value=this.onlyShowTime?t:this.nowTime+=" "+t,c.log(t),this.showPicker=!1,this.show=!1,this.$bus.emit("selectDateTime",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",e)},resetFn:function(){this.$refs.calendarRef.reset()},closeFn:function(){},inClickFn:function(){this.metaData.privilege.editable&&(this.metaData.extra.eatraClass?this.$bus.emit("clickDateTime",{metaData:this.metaData,subFormIndex:this.subFormIndex}):(this.showValue&&(this.controlData.defaultDate=new Date(this.showValue.replace(/-/g,"/"))),"yyyy"==this.metaData.format||"yyyy-MM"==this.metaData.format?this.timePop=!this.timePop:this.onlyShowTime?this.showPicker=!0:this.show=!this.show))},filter:function(t,e){var o=this;return"minute"===t?e.filter(function(t){return t%(o.metaData.extra.minuteAccuracy||15)==0}):e}}},f=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return!e.readonly||e.readonly&&e.value.value?t("div",{staticClass:"controlDateTimeBox",attrs:{id:e.metaData.metaId}},[t("van-popup",{style:{height:"500px"},attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("van-calendar",{ref:"calendarRef",attrs:{poppable:!1,type:e.controlData.type,title:e.controlData.title,"default-date":e.controlData.defaultDate,"show-mark":e.controlData.showMark,"show-confirm":e.controlData.showConfirm,color:e.controlData.color,"min-date":e.controlData.minDate,"max-date":e.controlData.maxDate,"confirm-text":e.controlData.confirmText,"confirm-disabled-text":e.controlData.confirmDisText,formatter:e.formatter,position:e.controlData.position,"max-range":e.controlData.maxRange,round:e.controlData.round,"range-prompt":e.controlData.rangePrompt,"allow-same-day":e.controlData.allowSameDay,"first-day-of-week":"1"},on:{confirm:e.onConfirm},scopedSlots:e._u([{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0},{key:"title",fn:function(){return[t("div",{staticStyle:{padding:"0 15px","text-align":"left",height:"80px"}},[t("div",{staticClass:"btnleft"},[t("van-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:e.scrollDate}},[e._v("年月选择")])],1),e._v(" "),t("div",{staticClass:"btnright"},[t("van-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:e.clearDate}},[e._v("清空日期")])],1)])]},proxy:!0}],null,!0)})],1),e._v(" "),t("van-field",{attrs:{readonly:!0,placeholder:e.controlData.placeholder,"input-align":e.controlData.inputAlign,rules:e.controlData.rules,name:e.metaData&&e.metaData.metaId?e.metaData.metaId:""},on:{click:e.inClickFn},scopedSlots:e._u([e.readonly?null:{key:"right-icon",fn:function(){return[t("i",{staticClass:"iconfont iconriqi"})]},proxy:!0}],null,!0),model:{value:e.showValue,callback:function(t){e.showValue=t},expression:"showValue"}}),e._v(" "),t("van-popup",{attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[t("van-datetime-picker",{attrs:{type:"time",title:"选择时间","min-hour":0,"max-hour":23,filter:e.filter},on:{confirm:e.confirmDate,cancel:function(t){e.showPicker=!e.showPicker}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1),e._v(" "),t("van-popup",{staticClass:"currentDate",staticStyle:{width:"80%"},attrs:{"get-container":"#app",round:""},on:{opened:e.selectYear},model:{value:e.timePop,callback:function(t){e.timePop=t},expression:"timePop"}},[t("van-datetime-picker",{ref:"currentDate",attrs:{type:e.currentDateType,title:e.currentDateTitle,"min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirmTime,cancel:e.cancelTime},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1):e._e()},[],!1,null,"4f3b7a88",null).exports},99056:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(25108);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlDateTime",mixins:[e.Z],model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null}},computed:{showValue:function(){return this.metaData.format?this.changeFormat(this.value.value):this.value.value}},watch:{value:function(t){c.log(t)}},data:function(){return{show:!1,controlData:{defaultDate:new Date,inputAlign:"right",rules:[],type:"single",title:"日期选择",placeholder:"时间选择",color:"",minDate:new Date((new Date).getFullYear()-5,0,1),maxDate:new Date((new Date).getFullYear()+5,11,31),confirmText:"确定",confirmDisText:"请选择",position:"bottom",maxRange:"5",showMark:!0,showConfirm:!0,round:!0,rangePrompt:"超出可选范围",allowSameDay:!0,arrFormatter:[]},successValue:this.value,showPicker:!1,currentTime:"",nowTime:"",allowHours:!0,currentDate:new Date,timePop:!1,minDate:new Date((new Date).getFullYear()-100,0,1),maxDate:new Date((new Date).getFullYear()+10,11,31)}},mounted:function(){var t,e;this.metaData.extra&&this.metaData.extra.minDate&&(this.controlData.minDate=this.metaData.extra.minDate),this.metaData.extra&&this.metaData.extra.maxDate&&(this.controlData.maxDate=this.metaData.extra.maxDate),this.controlData.type=this.metaData.DateType||"single","{}"==l()(this.metaData.defaultValue)||this.value.value||(t=this.metaData.defaultValue,(e=this.value).value=t.value,this.$emit("input",e)),this.metaData.format?this.metaData.format&&(-1<this.metaData.format.indexOf("HH")?this.allowHours=!0:this.allowHours=!1):this.allowHours=!1,"200921170218dMlK5UVnsi1jkA5F35N"==this.$route.params.moduleId&&(this.allowHours=!1),"2011251622514OfwWKislZu9g54F3LS"==this.$route.params.moduleId&&(this.allowHours=!1),"201125171531HhP41e8lrLw0T7kuFXK"==this.$route.params.moduleId&&(this.allowHours=!1)},methods:{changeFormat:function(t){var e=-1<this.metaData.format.indexOf("|")?this.metaData.format.split("|")[1]:this.metaData.format;return-1<(e=-1<(e=-1<e.indexOf("mm")?e.replace("mm","ii"):e).indexOf("HH")?e.replace("HH","hh"):e).indexOf("MM")&&(e=e.replace("MM","mm")),dsf.date.format(t,e)},confirmTime:function(){var t,e=this;c.log(this.currentDate),this.timePop=!1,"yyyy"==this.metaData.format||"yyyy-MM"==this.metaData.format?((t=this.value).value=dsf.date.format(this.currentDate,"yyyy-mm-dd"),this.$bus.emit("selectDateTime",d(d({},t),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",t)):(this.currentDate<new Date?this.controlData.minDate=new Date(this.currentDate.getFullYear()-5,0,1):this.controlData.maxDate=new Date(this.currentDate.getFullYear()+5,0,1),this.$nextTick(function(){e.$refs.calendarRef.scrollToDate(e.currentDate)}))},cancelTime:function(){this.timePop=!1},scrollDate:function(){this.timePop=!0},clearDate:function(){this.value.value="",this.timePop=!1,this.showPicker=!1,this.show=!1},formatDate:function(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},formatter:function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.controlData.arrFormatter,n=o.date.getMonth()+1,a=o.date.getDate();return t&&t.forEach(function(t,e){n==t.month&&a==t.date&&(t.topInfo&&(o.topInfo=t.topInfo),t.text&&(o.text=t.text),t.bottomInfo&&(o.bottomInfo=t.bottomInfo),t.type)&&(o.type=t.type)}),o},onConfirm:function(o){var t;"single"==this.controlData.type||""==this.controlData.type?(o=dsf.date.format(o,"yyyy-mm-dd"),c.log(o),this.allowHours?(this.nowTime=o,this.showPicker=!0):(this.show=!this.show,(t=this.value).value=o,this.$bus.emit("selectDateTime",d(d({},t),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",t))):(o=o.map(function(t,e){return dsf.date.format(o,"yyyy-mm-dd")}),t.value=o.join())},confirmDate:function(t){var e=this.value;e.value=this.nowTime+=" "+t,c.log(t),this.showPicker=!1,this.show=!1,this.$bus.emit("selectDateTime",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",e)},resetFn:function(){this.$refs.calendarRef.reset()},closeFn:function(){},inClickFn:function(){this.value&&this.value.value&&(this.nowTime=this.value.value,this.currentTime=moment(new Date(this.value.value)).format("HH:mm")),this.metaData.privilege.editable&&(this.showValue&&(this.controlData.defaultDate=new Date(this.showValue)),"yyyy"==this.metaData.format||"yyyy-MM"==this.metaData.format?this.timePop=!this.timePop:this.show=!this.show)}}},f=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return!e.readonly||e.readonly&&e.value.value?t("div",{staticClass:"controlDateTimeBox"},[t("van-popup",{style:{height:"500px"},attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("van-calendar",{ref:"calendarRef",attrs:{poppable:!1,type:e.controlData.type,title:e.controlData.title,"default-date":e.controlData.defaultDate,"show-mark":e.controlData.showMark,"show-confirm":e.controlData.showConfirm,color:e.controlData.color,"min-date":e.controlData.minDate,"max-date":e.controlData.maxDate,"confirm-text":e.controlData.confirmText,"confirm-disabled-text":e.controlData.confirmDisText,formatter:e.formatter,position:e.controlData.position,"max-range":e.controlData.maxRange,round:e.controlData.round,"range-prompt":e.controlData.rangePrompt,"allow-same-day":e.controlData.allowSameDay,"first-day-of-week":"1"},on:{confirm:e.onConfirm},scopedSlots:e._u([{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0},{key:"title",fn:function(){return[t("div",{staticStyle:{padding:"0 15px","text-align":"left",height:"80px"}},[t("div",{staticClass:"btnleft"},[t("van-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:e.scrollDate}},[e._v("年月选择")])],1),e._v(" "),t("div",{staticClass:"btnright"},[t("van-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:e.clearDate}},[e._v("清空日期")])],1)])]},proxy:!0}],null,!0)})],1),e._v(" "),t("van-popup",{attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[t("van-datetime-picker",{attrs:{type:"time",title:"选择时间","min-hour":0,"max-hour":23},on:{confirm:e.confirmDate,cancel:function(t){e.showPicker=!e.showPicker}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1),e._v(" "),t("van-popup",{staticStyle:{width:"80%"},attrs:{"get-container":"#app",round:""},model:{value:e.timePop,callback:function(t){e.timePop=t},expression:"timePop"}},[t("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirmTime,cancel:e.cancelTime},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1):e._e()},[],!1,null,"7e91a788",null).exports},11650:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={props:["value","columns","metaData","checkedVal"],data:function(){return{showPopup:this.value,nextPopup:!1,textTemp:""}},watch:{value:function(){this.showPopup=this.value}},methods:{pupupClose:function(){this.$emit("input",this.showPopup),this.$emit("pupopClose",this.showPopup)},selectValue:function(t){n.log(t),this.textTemp&&(t={text:this.textTemp,value:this.textTemp},this.textTemp=""),t.children||(this.showPopup=!this.showPopup),this.$emit("input",this.showPopup),this.$emit("selectItem",t)}},created:function(){}},a=(0,o(51900).Z)(e,function(){var o=this,t=o._self._c;return t("van-popup",{staticClass:"flex dc",staticStyle:{height:"60vh"},attrs:{"get-container":"#app",position:"bottom",round:""},on:{close:o.pupupClose},model:{value:o.showPopup,callback:function(t){o.showPopup=t},expression:"showPopup"}},[t("div",{staticClass:"popup-title"},[t("i",{staticClass:"iconfont iconxialajiantou",attrs:{size:"0.4rem"},on:{click:function(t){o.showPopup=!1}}}),o._v(" "),t("span",[o._v("选择")])]),o._v(" "),t("div",{staticClass:"choose-container"},o._l(o.columns.columns,function(e){return t("div",{staticClass:"choose-col flex jb",on:{click:function(t){return o.selectValue(e)}}},[t("span",{staticClass:"elps"},[o._v(o._s(e.text))]),o._v(" "),e.value==o.checkedVal?t("i",{staticClass:"iconfont iconcheck"}):o._e()])}),0)])},[],!1,null,"758e7a0f",null).exports},19063:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return r}});var e=o(8450),n=o.n(e),e=o(13852),a=(o(70690),o(23501)),i=o(25108),e={directives:{"click-outside":{bind:function(e,o){e.clickOutsideEvent=function(t){e===t.target||e.contains(t.target)||o.value(t)},document.addEventListener("click",e.clickOutsideEvent)},unbind:function(t){document.removeEventListener("click",t.clickOutsideEvent)}}},mixins:[e.Z],model:{prop:"value",event:"input"},components:{hw:a.Z,hwJG:function(){return o.e(69751).then(o.bind(o,69751))},draggable:function(){return o.e(9980).then(o.t.bind(o,82021,23))}},props:{formMeta:{type:Object,default:function(){return{}}},subFormIndex:{type:Number,default:null},showOpinionAndBtn:{type:Boolean,default:!1}},data:function(){var t;return{bindValue:this.value.value,controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!this.showOpinionAndBtn,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1,autosize:!!this.showOpinionAndBtn&&{maxHeight:75}},reg:[],ifSuccess:!1,tags:[],showWrite:!1,formData:null,lineWidth:6,lineColor:"#000000",bgColor:"white",isCrop:!1,imgUrl:"",flowinfo:{},flowKey:"",pk:this.$route.params.pk,shuiyin_div:null,showMore:!0,needHandWrite:dsf.config.commonFlow&&dsf.config.commonFlow.needHandWrite,havetoHandWrite:dsf.config.setting["SYS-MOBILE-FORM-0011"]||"-1",handWriteRules:[{message:"手写签批不能为空",required:!0}],isShow:!1,deletable:!1,showIdeal:!1,newTagValue:"",isDefaultRequired:!1,inputRows:this.showOpinionAndBtn?1:3,opinionTempDirection:(null==(t=dsf.config.commonFlow)?void 0:t.opinionTempDirection)||"column",opinionShowmoreText:(null==(t=dsf.config.commonFlow)?void 0:t.opinionShowmoreText)||"更多",opinionObj:{},disabled:!0}},computed:{tempTags:function(){return this.showMore?this.tags:this.tags.slice(0,2)},getHW_Type:function(){return dsf.config.setting.hasOwnProperty("SYS-MOBILE-FORM-0003")&&dsf.config.setting["SYS-MOBILE-FORM-0003"]||"self"}},watch:{value:function(t){this.bindValue=this.value.value},"metaData.extra.opinionContent":function(t){var e;this.opinionObj.opinionContent=t,this.$emit("controlEditOpinion",{key:this.flowKey,value:this.opinionObj}),this.controlData.errorMessage="",this.$route.query.todoId&&((e=dsf.util.loadLocalStore("opnions")||{})["".concat(this.$route.params.pk,"_").concat(this.$route.query.todoId,"_").concat(this.metaData.extra.customNode||"")]=t,dsf.util.saveToLocalStore("opnions",e))},imgUrl:function(t){this.isDefaultRequired&&(t?this.$delete(this.metaData.validator,"required"):this.$set(this.metaData.validator,"required",{}))}},created:function(){var a,i=this,r=(this.isDefaultRequired=!!this.metaData.validator.required,this.readonly=!this.metaData.privilege.editable,this.getAdvice(),dsf.util.loadSessionStore("user"));this.metaData.extra.handwritePic&&(this.imgUrl=dsf.url.getServerUrl(this.metaData.extra.handwritePic));this.$nextTick(function(){i.formData=i.formMeta.parameters,i.$route.query.todoId&&(t=dsf.util.loadLocalStore("opnions")||{},a=t["".concat(i.$route.params.pk,"_").concat(i.$route.query.todoId,"_").concat(i.metaData.extra.customNode||"")])&&(i.metaData.extra.opinionContent=a);var t=r.user_id,e=r.name,o=r.user_id,n=r.name;i.$route.query.todoId&&("2"==i.$route.query.agencyType?(t=i.$route.query.agencyUserId,e=i.$route.query.agencyUserName,o=i.$route.query.agencyUserId,n=i.$route.query.agencyUserName):"1"==i.$route.query.agencyType&&(o=i.$route.query.agencyUserId,n=i.$route.query.agencyUserName)),i.pk?(i.flowKey="flow-".concat(i.pk,"-").concat(i.formData.pId,"-").concat(i.formData.pnId).concat(i.metaData.extra.customNode?"-"+i.metaData.extra.name:""),i.opinionObj={id:i.formData.pnId,fid:i.formData.fPnId,infoId:i.pk,pid:i.formData.pId,pnid:i.formData.pnId,nodeId:i.formData.nodeId,wfId:i.formData.flowId,opinionContent:i.metaData.extra.opinionContent,handwritePic:i.metaData.extra.handwritePicDB,handwriteThumb:i.metaData.extra.handwriteThumbDB,nodeName:i.formData.nodeName,isSign:"0",signName:"",signTime:"",opinionUsers:i.metaData.extra.opinionUsers,opinionUsersText:i.metaData.extra.opinionUsersText,duserId:o,duserName:n,userId:t,userName:e,opinionFiles:[]}):(i.flowKey="flow-".concat(i.formData.pk,"-0-").concat(i.formData.pk).concat(i.metaData.extra.customNode?"-"+i.metaData.extra.name:""),i.opinionObj={id:i.formData.pk,fid:0,infoId:i.formData.pk,pid:0,pnid:i.formData.pk,nodeId:i.formData.nodeId,wfId:i.formData.flowId,opinionContent:i.metaData.extra.opinionContent,handwritePic:i.metaData.extra.handwritePicDB,handwriteThumb:i.metaData.extra.handwriteThumbDB,nodeName:i.formData.nodeName,isSign:"0",signName:"",signTime:"",opinionUsers:i.metaData.extra.opinionUsers,opinionUsersText:i.metaData.extra.opinionUsersText,duserId:o,duserName:n,userId:t,userName:e,opinionFiles:[]}),i.metaData.extra.customNode&&(i.opinionObj.id=i.metaData.extra.customId,i.opinionObj.customNode=i.metaData.extra.customNode,i.opinionObj.customId=i.metaData.extra.customId,i.opinionObj.editOpinionUser=r.name,i.opinionObj.editOpinionUserId=r.user_id),i.metaData.extra.opinionContent&&!i.readonly&&i.inpFn(i.metaData.extra.opinionContent)})},methods:{scrollFn:function(t,e,o,n,a){},onClickRight:function(){i.log("click right"),this.disabled=!this.disabled},onMove:function(t){return i.log(t.relatedContext.element),"-1"!=t.relatedContext.element.type},onEnd:function(){var e=this;i.log(this.tags),this.tags.forEach(function(t){e.ids+=t.id+","}),dsf.http.post("/fn/mobileUsedOpinion/moveIndex",{templateIds:this.ids}).then(function(){e.getAdvice()})},tagClick:function(t){this.disabled&&(this.metaData.extra.opinionContent+=t,this.showIdeal=!this.showIdeal)},idealClick:function(){this.showIdeal=!this.showIdeal},inpFn:function(t){this.$bus.emit("opinionInpFnBus",{val:t,metaData:this.metaData}),this.opinionObj.opinionContent=t,this.$emit("controlEditOpinion",{key:this.flowKey,value:this.opinionObj}),this.newTagValue=t},toFocus:function(t){this.tempOpinion=this.metaData.extra.opinionContent,this.inputRows=this.showOpinionAndBtn?1:5},toClear:function(){},toClick:function(){},getAdvice:function(){var e=this;dsf.http.get("fn/mobileUsedOpinion/find").then(function(t){e.tags=t.data.rows})},clearTags:function(t){var e=this;this.$dialog.confirm({title:"提示",message:"是否确认删除该常用意见"}).then(function(){dsf.http.get("fn/mobileUsedOpinion/delete?id="+t.id).then(function(){e.getAdvice()})}).catch(function(){})},addContent:function(t){this.metaData.extra.opinionContent+=t.context},addTemplate:function(){var e=this;if(this.showIdeal){if(this.tags.find(function(t){return e.newTagValue==t.context}))return void dsf.layer.toast("模板内容已重复")}else if(this.tags.find(function(t){return e.metaData.extra.opinionContent==t.context}))return void dsf.layer.toast("模板内容已重复");""!=this.newTagValue&&0<this.newTagValue.trim().length?dsf.http.post("fn/mobileUsedOpinion/add",{__DATA:n()({opinion:this.showIdeal?this.newTagValue:this.metaData.extra.opinionContent})}).then(function(t){dsf.layer.toast("设为模板成功"),e.newTagValue="",e.getAdvice()}):dsf.layer.toast("请输入内容")},openWritePopup:function(){this.showWrite=!0,"jg"==this.getHW_Type&&this.$refs.HWJG.buttonHWClick()},delHandWrite:function(){var e=this;dsf.http.post("fn/mobileHandWritingData/delete?pnid=".concat(this.formData.pnId,"&pid=").concat(this.formData.pId)).then(function(t){t.data.result&&(e.imgUrl="",dsf.layer.toast("清除成功"))})},closeWritePopup:function(t){this.showWrite=!1,t&&(this.imgUrl=dsf.url.getServerUrl("fn/file/downloadFile?fileName=".concat(t.handwritePic)),this.opinionObj.handwritePic=t.handwritePic,this.opinionObj.handwriteThumb=t.handwriteThumb,this.$emit("controlEditOpinion",{key:this.flowKey,value:this.opinionObj}))},toBlur:function(){this.metaData.extra.opinionContent=this.metaData.extra.opinionContent.replace(/(^\s*)|(\s*$)/g,""),this.metaData.extra.opinionContent&&dsf.layer.toast("意见已暂存")},validatorFn:function(t){},handleBlur:function(t){this.showOpinionAndBtn||(this.inputRows=3)}}},r=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:o.handleBlur,expression:"handleBlur"}],staticClass:"controlEditOpinion"},[n("div",{staticClass:"flex",style:{flexDirection:o.opinionTempDirection}},[n("div",{staticClass:"input-box",style:{margin:"".concat("column"==o.opinionTempDirection?"0.2rem":0," 0 ").concat("column"!=o.opinionTempDirection?"0.2rem":0)}},[n("van-field",{class:[o.readonly?"":"controlTextBox",o.showOpinionAndBtn?"controlTextPadding":""],attrs:{rows:o.readonly?1:o.inputRows,border:o.controlData.border,disabled:o.controlData.disabled,clearable:o.controlData.clearable,"error-message":o.controlData.errorMessage,placeholder:"请在此输入意见或选择".concat("column"==o.opinionTempDirection?"下":"上","方常用意见"),"input-align":o.controlData.inputAlign,"left-icon":o.controlData.leftIcon,"right-icon":o.controlData.rightIcon,rules:o.controlData.rules,formatter:o.controlData.formatter,autosize:o.controlData.autosize,readonly:o.readonly,type:"textarea",name:o.metaData&&o.metaData.metaId?o.metaData.metaId:"",maxlength:o.metaData.extra.maxlength||void 0,"show-word-limit":""},on:{input:o.inpFn,focus:function(t){o.intoView(t),o.toFocus("focus",t)},clear:function(t){return o.toClear("clear",t)},click:function(t){return o.toClick("click",t)},blur:function(t){return o.toBlur("blur",t)}},scopedSlots:o._u([{key:"button",fn:function(){return[o._t("button")]},proxy:!0}],null,!0),model:{value:o.metaData.extra.opinionContent,callback:function(t){o.$set(o.metaData.extra,"opinionContent",t)},expression:"metaData.extra.opinionContent"}})],1),o._v(" "),o.readonly||!o.metaData.extra.showTemplate||"pop"==o.dsf.config.commonForm.commonOpinionStyle||o.dsf.config.commonForm.hideSendOpinion?o._e():n("div",{staticClass:"flex jb ae"},[n("div",{class:o.showOpinionAndBtn?"inline_file_log":"_file_log"},o._l(o.tempTags,function(e,t){return n("van-tag",{key:t,class:["_file_tags","elps",o.showOpinionAndBtn?"_file_tags_large":""],attrs:{size:"medium",type:"primary"},on:{click:function(t){return o.addContent(e)}}},[o._v(o._s(e.context))])}),1),o._v(" "),n("div",{staticClass:"setting",on:{click:function(t){return o.idealClick()}}},[o._v("\n        "+o._s(o.opinionShowmoreText)+"\n      ")])])]),o._v(" "),o.dsf.config.commonFlow&&o.dsf.config.commonFlow.needHandWrite?n("div",{staticClass:"handleWriteBox"},[n("div",{staticClass:"writeContent"},[o.imgUrl?n("img",{style:{width:o.dsf.config.commonFlow.opinionImgWidth||"50%"},attrs:{src:o.imgUrl,alt:""}}):o._e()]),o._v(" "),n("div",{staticClass:"writeBtn",style:{textAlign:"jsgzw"==o.dsf.config.projectName?"left":"right"}},[n("span",{staticStyle:{color:"var(--normal)","font-size":"var(--font_size_3)"},on:{click:o.openWritePopup}},[o._v("手写签批")])])]):o._e(),o._v(" "),o.metaData.show&&o.needHandWrite&&1==o.havetoHandWrite?n("van-field",{staticClass:"havetoHandWrite",attrs:{name:"handWrite",rules:o.handWriteRules},model:{value:o.imgUrl,callback:function(t){o.imgUrl=t},expression:"imgUrl"}}):o._e(),o._v(" "),"self"==o.getHW_Type?n("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:o.showWrite,callback:function(t){o.showWrite=t},expression:"showWrite"}},[n("hw",{attrs:{formData:o.formData,isForm:"1"},on:{closeWritePopup:o.closeWritePopup}})],1):o._e(),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"jg"==o.getHW_Type&&o.showWrite,expression:"getHW_Type == 'jg' && showWrite"}]},[n("hwJG",{ref:"HWJG",attrs:{hwtype:o.getHW_Type,formData:o.formData,formMeta:o.formMeta},on:{closeWritePopup:o.closeWritePopup}})],1),o._v(" "),n("van-popup",{staticStyle:{height:"50vh"},attrs:{position:"bottom","get-container":"#app",round:""},model:{value:o.isShow,callback:function(t){o.isShow=t},expression:"isShow"}},[n("van-nav-bar",{attrs:{title:"常用意见","left-text":"取消","right-text":o.deletable?"保存":"删除意见",placeholder:""},on:{"click-left":function(t){o.isShow=!1},"click-right":function(t){o.deletable=!o.deletable}}}),o._v(" "),n("div",{staticClass:"opinion-container"},o._l(o.tempTags,function(e,t){return n("div",{key:t,staticClass:"module",on:{click:function(t){o.addContent(e),o.isShow=!1}}},[n("div",{staticClass:"content",style:{borderRadius:o.deletable?"4px 0 0 4px":"4px"}},[o._v("\n          "+o._s(e.context)+"\n        ")]),o._v(" "),o.deletable?n("div",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),o.clearTags(e)}}},[n("van-icon",{attrs:{name:"cross"}})],1):o._e()])}),0)],1),o._v(" "),n("van-popup",{style:{height:"80%"},attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:o.showIdeal,callback:function(t){o.showIdeal=t},expression:"showIdeal"}},[n("div",{staticClass:"ideal",staticStyle:{width:"100%",height:"100%"}},[n("van-nav-bar",{attrs:{title:"意见维护","right-text":o.disabled?"排序":"取消","left-text":"共".concat(this.tags.length,"条")},on:{"click-right":o.onClickRight}}),o._v(" "),o.disabled?o._e():n("span",{staticClass:"prompt"},[o._v("拖拽排序，默认意见无法排序。")]),o._v(" "),n("draggable",{staticClass:"list-group",style:{top:o.disabled?"1rem":"calc(1rem + 25px)"},attrs:{group:"people","ghost-class":"ghost",chosenClass:"chosen",animation:"300",disabled:o.disabled,filter:".forbid",move:o.onMove},on:{sort:o.onEnd},model:{value:o.tags,callback:function(t){o.tags=t},expression:"tags"}},o._l(o.tags,function(e,t){return n("div",{key:t,staticClass:"list-group-item",class:-1==e.type?"forbid":"",on:{click:function(t){return t.stopPropagation(),o.tagClick(e.context)}}},[n("span",[o._v(o._s(e.context))]),o._v(" "),o.dsf.config.commonForm.hideSendOpinionOrder||-1==e.type||o.disabled?o._e():n("van-icon",{staticClass:"sort",attrs:{name:"sort",color:"#666666",size:"15"}}),o._v(" "),-1!=e.type&&o.disabled?n("van-icon",{attrs:{name:"close",size:"20"},on:{click:function(t){return t.stopPropagation(),o.clearTags(e)}}}):o._e()],1)}),0),o._v(" "),n("div",{staticClass:"footer-btn"},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.newTagValue,expression:"newTagValue"}],attrs:{type:"text",placeholder:"请输入意见"},domProps:{value:o.newTagValue},on:{input:function(t){t.target.composing||(o.newTagValue=t.target.value)}}}),o._v(" "),n("van-button",{attrs:{type:"primary"},on:{click:o.addTemplate}},[o._v("添加")])],1)],1)])],1)},[],!1,null,"acd233d8",null).exports},60174:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return s}});var a,o=n(66250),e=n(33453),i=n.n(e),e=n(13852),r=n(25108);n.e(90006).then(n.bind(n,90006));var e={mixins:[e.Z],model:{prop:"value",event:"input"},components:{quillEditor:function(){return Promise.all([n.e(76095),n.e(91629)]).then(n.t.bind(n,91629,23)).then(function(t){return t.quillEditor})}},data:function(){return{editorOption:{placeholder:"请输入编辑内容",modules:{toolbar:dsf.config.commonForm.editorToolbar||[["bold","italic","underline"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["clean"]],syntax:{highlight:function(t){return hljs.highlightAuto(t).value}}}},controlData:{readonly:!1,placeholder:""},readonly:!1,imgPreview:!1,previewImg:[]}},computed:{content:{get:function(){return this.value.value||""},set:function(t){return this.value.text=dsf.util.removeHTMLTags(t),this.value.value=t}}},created:function(){this.value.value&&this.value.value.length<1&&(this.value.value=this.metaData.defaultValue.value),this.customEditor()},methods:{customEditor:function(){return(0,o.Z)(i().mark(function t(){var e,o;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(76095).then(n.t.bind(n,76095,23)).then(function(t){a=t.default});case 2:(o=a.import("attributors/style/align")).whitelist=["right","center","justify"],a.register(o,!0),o=[!1,"SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Calibri","Times-New-Roman","sans-serif","宋体","黑体","微软雅黑","楷体","隶书","仿宋_GB2312"],(e=a.import("attributors/style/font")).whitelist=o,a.register(e,!0),(o=a.import("attributors/style/size")).whitelist=[!1,"12px","14px","16px","18px","20px","22px","24px","26px","28px","30px","32px"],a.register(o,!0);case 12:case"end":return t.stop()}},t)}))()},save:function(){r.log("content",this.content)},onEditorFocus:function(t){this.readonly&&t.enable(!1)},onEditorReady:function(t){t.blur()},onEditorBlur:function(t){var e=this;this.value.value=this.replaceSpace(this.value.value),this.$nextTick(function(){e.$refs.myQuillEditor.quill.blur()})},onEditorChange:function(t){var e=this.value;this.$emit("input",e)},replaceSpace:function(t){var a=/\s/g;return t.replace(/\t/g,"&nbsp;&nbsp;").replace(/(<.*?>)(.*?)(<.*?>)/g,function(t,e,o,n){return[e,o.replace(a,"&nbsp;"),n].join("")})},hanldeImage:function(t){"IMG"!==t.target.nodeName&&"img"!==t.target.nodeName||(t=decodeURIComponent(t.target.currentSrc),this.imgPreview=!0,this.previewImg=[t])},closeImg:function(){this.previewImg=[]}}},s=(0,n(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"controlEditorBox"},[e.readonly?e._e():t("quill-editor",{ref:"myQuillEditor",staticClass:"ql-editor",attrs:{options:e.editorOption},on:{ready:function(t){return e.onEditorReady(t)},blur:function(t){return e.onEditorBlur(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),e.readonly?t("div",{staticClass:"htmlBox",domProps:{innerHTML:e._s(e.content)},on:{click:function(t){return t.stopPropagation(),e.hanldeImage(t)}}}):e._e(),e._v(" "),t("van-image-preview",{attrs:{images:e.previewImg,"show-index":!1,closeable:""},on:{onClose:e.closeImg},model:{value:e.imgPreview,callback:function(t){e.imgPreview=t},expression:"imgPreview"}})],1)},[],!1,null,null,null).exports},53575:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return p}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(79529),c=o.n(e),e=o(18428),u=o.n(e),e=o(13852),d=o(25108);function f(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):f(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={mixins:[e.Z],props:["formData","parameters"],model:{prop:"value",event:"input"},data:function(){return{showData:[],rules:[],selectedRule:{},selectColumns:[],canEdit:!1,allowFilecode:!0,allCodeColumns:[],showRuleTag:!0,displaySelect:!1,template:null,isShowRulePicker:!1,isShowCodePicker:!1,controlData:{readonly:!1,placeholder:""},currentSelectShowData:{},currentSelectPeriod:"",isInit:!0,initValue:JSON.parse(l()(this.value)),serialNumberTemp:"",defaultIndex:0}},created:function(){this.init(),this.onComboxChangeCode()},watch:{selectedRule:function(t){this.showData.splice(0),null!=t&&t.id?(this.getFileCodeTemplate(),this.value.ruleid=t.id,this.$bus.$emit("changeRuleCode",{value:t,metaData:this.metaData})):"请选择"==(null==t?void 0:t.codeName)&&(this.value.ruleid="",this.value.period="",this.value.order="",this.value.num="",this.value.tnum="",this.value.value="",this.value.ruleorder="")},showData:{deep:!0,handler:function(t){var e,o,n,a,i,r=this;null!=t&&t.length&&(i=a=n=o=e="",d.log(t),this.allowFilecode?(t.forEach(function(t){"period"==t.type?e+=t.realValue:"serialNumber"==t.type&&(-1<t.childRule.indexOf("N")?""!=(a=t.data)&&(a=c()(a)):""!=(n=t.data)&&(n=c()(n))),i+=r.selectedRule.savePeriod||"period"!=t.type?t.data:""}),0<n&&(o=e+(Array(5).join("0")+n).slice(-5)),0<a&&(o=e+(Array(5).join("0")+a).slice(-5))):i=this.selectedRule.codeName,this.value.period=e,this.value.order=o,this.value.num=n,this.value.tnum=a,this.value.value=i,this.value.ruleorder=this.selectedRule.showOrder,this.$bus.$emit("changeFileCode",m(m({},this.value),{},{metaData:this.metaData})))}},rules:{deep:!0,handler:function(t){this.rules=t,d.log(this.rules)},immediate:!0}},computed:{selectRules:function(){return this.displaySelect?[{codeName:"请选择",id:""}].concat(this.rules):this.rules}},methods:{init:function(t){this.rules=this.metaData.extra.rules||[],this.canEdit=this.initEditable(),this.allowFilecode=this.initAllowFileCode(),this.showRuleTag=1<this.rules.length||1==this.rules.length&&1==this.metaData.extra.showTagForSimple,this.displaySelect=1==this.metaData.extra.displaySelect,(this.canEdit||this.allowFilecode)&&this.initFilecode(t),this.onRefreshFilecode()},initFilecode:function(t){var e=this;t?this.selectedRule=this.rules[0]||{}:this.value.ruleid?this.selectedRule=this.rules.find(function(t){return t.id==e.value.ruleid})||{}:this.displaySelect&&this.showRuleTag||!this.allowFilecode?this.selectedRule={}:this.selectedRule=this.rules[0]||{}},initEditable:function(){return"readonly"!=this.metaData.extra.eatraClass&&this.metaData.privilege.editable},initAllowFileCode:function(){return 0!=this.metaData.extra.allowFilecode&&(!this.metaData.extra.allowFilecodeNodeId||-1<this.metaData.extra.allowFilecodeNodeId.split(",").indexOf(this.parameters.nodeId))},getFileCodeTemplate:function(){var e=this;dsf.http.post("fn/filecode/template",{pk:this.parameters.pk,ruleId:this.selectedRule.id}).then(function(t){200==t.data.code&&(e.selectedRule.allowRecycle=t.data.data.allowRecycle,e.selectedRule.bindCode=t.data.data.bindCode,e.selectedRule.savePeriod=t.data.data.savePeriod,e.selectedRule.showOrder=t.data.data.showOrder,e.$set(e,"showData",t.data.data.selects),e.showData.forEach(function(t){"constant"!=t.type&&(e.$set(t,"data",""),e.$set(t,"realValue",""))}),e.getFileCodeData())})},getFileCodeData:function(){var e=this,t={pk:this.parameters.pk,moduleId:this.parameters.moduleId,metaId:this.metaData.metaId,date:dsf.date.format(new Date,"yyyy-mm-dd hh:ii:00"),allowRecycle:this.selectedRule.allowRecycle,bindCode:this.selectedRule.bindCode,ruleId:this.selectedRule.id,period:this.isInit?this.initValue.period||"":this.currentSelectPeriod,wh:this.isInit?this.initValue.value||"":this.value.value||"",no:this.isInit?this.initValue.num||"":this.value.num||"",totalNo:""};dsf.http.post("fn/filecode/data",t).then(function(t){200==t.data.code&&(e.isInit=!1,e.allCodeColumns=t.data.data,e.setShowData())})},setShowData:function(){var n=this;this.allCodeColumns.forEach(function(e){var t=e.data.find(function(t){return"selected"==t.selected})||e.data[0],o=n.showData.find(function(t){return t.childRule==e.itemAttr});o&&(o.data=(null==t?void 0:t.showValue)||"",o.realValue=(null==t?void 0:t.realValue)||"")})},confirmRule:function(t,e){this.selectedRule=t,this.isShowRulePicker=!1,this.isInit=!1},showCodePicker:function(e,t){var o,n=this;this.currentSelectShowData=e,this.selectColumns=null==(o=this.allCodeColumns.find(function(t){return t.itemAttr===e.childRule}))?void 0:o.data,this.currentSelectPeriod="";for(var a=0;a<t;a++)"period"==this.showData[a].type&&(this.currentSelectPeriod+=this.showData[a].data);"serialNumber"==e.type&&(this.serialNumberTemp=e.data),this.defaultIndex=this.selectColumns.findIndex(function(t){return t.showValue==n.currentSelectShowData.data}),this.isShowCodePicker=!0},confirmCode:function(t,e){"serialNumber"==this.currentSelectShowData.type?(this.currentSelectShowData.data=this.serialNumberTemp,this.currentSelectShowData.realValue=this.serialNumberTemp):(this.currentSelectShowData.data=t.showValue,this.currentSelectShowData.realValue=t.realValue,"period"==this.currentSelectShowData.type&&(this.currentSelectPeriod+=t.showValue,this.getFileCodeData())),this.isShowCodePicker=!1},changeCode:function(t,e,o){"serialNumber"==this.currentSelectShowData.type&&(this.serialNumberTemp=e.showValue)},onComboxChangeCode:function(){var o=this;this.$bus.on("comboxChangeCode",function(t){o.metaData.privilege.editable&&dsf.http.post("fn/filecode/docType",{element:o.metaData.controlId,moduleId:o.parameters.moduleId,formId:o.parameters.formId,pk:o.parameters.pk,xzdocType:o.formData.main.B0016?o.formData.main.B0016.value:"",ddocType:o.formData.main.B0017?o.formData.main.B0017.value:"",fwlx:o.formData.main["C-GW-FW-0202"]?o.formData.main["C-GW-FW-0202"].value:"",wzMetaId:t.metaData.metaId,wzMetaValue:t.value}).then(function(t){var e;200==t.data.code&&null!=(e=t.data.data)&&e.rules&&l()(t.data.data.rules)!=l()(o.rules)&&(o.$set(o.metaData,"extra",u()(o.metaData.extra,t.data.data)),o.isInit=!0,o.init(!0))})})},onRefreshFilecode:function(){var e=this;this.$eventBus.onRefreshFilecode(e,function(t){e.initFilecode(!0)})},blurFn:function(){this.serialNumberTemp=this.serialNumberTemp.padStart(this.currentSelectShowData.dataLength,"0")}}},p=(0,o(51900).Z)(e,function(){var n=this,t=n._self._c;return t("div",{staticClass:"controlFileCode"},[n.canEdit?t("div",{staticClass:"code"},[n.showRuleTag?t("van-field",{style:{width:n.selectedRule.codeName?"".concat(n.selectedRule.codeName.length,"em"):"3em"},attrs:{readonly:!0,placeholder:"请选择"},on:{click:function(t){n.isShowRulePicker=!0}},model:{value:n.selectedRule.codeName,callback:function(t){n.$set(n.selectedRule,"codeName",t)},expression:"selectedRule.codeName"}}):n._e(),n._v(" "),n.allowFilecode?n._l(n.showData,function(e,o){return t("div",{directives:[{name:"show",rawName:"v-show",value:"display-none"!=e.show,expression:"item.show != 'display-none'"}],key:o},["constant"==e.type?t("span",{staticStyle:{padding:"0 2px"}},[n._v(n._s(e.data))]):t("van-field",{style:{width:e.data.length?"".concat(e.data.length,"em"):"3em"},attrs:{readonly:"",placeholder:"请选择"},on:{click:function(t){return n.showCodePicker(e,o)}},model:{value:e.data,callback:function(t){n.$set(e,"data",t)},expression:"item.data"}})],1)}):n._e()],2):t("div",{staticClass:"van-cell van-field"},[t("span",{staticClass:"van-field__control"},[n._v("\n      "+n._s(n.value.value)+"\n    ")])]),n._v(" "),t("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:n.isShowRulePicker,callback:function(t){n.isShowRulePicker=t},expression:"isShowRulePicker"}},[t("van-picker",{attrs:{"show-toolbar":"",title:"",columns:n.selectRules,"value-key":"codeName"},on:{confirm:n.confirmRule,cancel:function(t){n.isShowRulePicker=!1}}})],1),n._v(" "),t("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:n.isShowCodePicker,callback:function(t){n.isShowCodePicker=t},expression:"isShowCodePicker"}},[t("van-picker",{ref:"codePiker",attrs:{"default-index":n.defaultIndex,"show-toolbar":"",title:"",columns:n.selectColumns,"value-key":"showValue"},on:{confirm:n.confirmCode,cancel:function(t){n.isShowCodePicker=!1},change:n.changeCode},scopedSlots:n._u(["serialNumber"==n.currentSelectShowData.type?{key:"columns-top",fn:function(){return[t("van-field",{staticClass:"numberTemp",attrs:{label:"编号："},on:{blur:n.blurFn},model:{value:n.serialNumberTemp,callback:function(t){n.serialNumberTemp=t},expression:"serialNumberTemp"}})]},proxy:!0}:null],null,!0)})],1)],1)},[],!1,null,"34997a12",null).exports},39743:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={components:{relationList:o(25580).default},props:["relationList","formMeta","metaData","topformMeta"],data:function(){return{}},computed:{fileList:{get:function(){var e=this;return this.relationList.filter(function(t){return!e.metaData.extra.fileRelaId||t.fileRelaId==e.metaData.extra.fileRelaId})}}},created:function(){}},n=(0,o(51900).Z)(e,function(){var t=this;return(0,t._self._c)("relation-list",{attrs:{relationList:t.fileList,parameters:(t.topformMeta||t.formMeta).parameters,isControl:!0,metaData:t.metaData}})},[],!1,null,"3c8ec3b6",null).exports},36022:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(8450),n=o.n(e),e=o(13852),a=o(11650),e={name:"controlFileCode",mixins:[e.Z],model:{prop:"value",event:"input"},data:function(){return{showPopup:!1,controlData:{inputAlign:"right",rules:[],leftIcon:"",rightIcon:"",disabled:!1,closeable:!0,round:!0,placeholder:"",lockScroll:!0,overlay:!0,duration:"0.3",columnsValue:{title:"请选择",columns:[]}},readonly:!1,currentColumns:[],ifFileCode:!1}},components:{controlDialog:a.default},computed:{bindValue:function(){return this.value.text}},created:function(){var t;this.ifFileCode=this.metaData.hasOwnProperty("readonlyValue"),this.metaData.hasOwnProperty("readonlyValue")&&(this.value.text=this.metaData.readonlyValue),this.value.value.length<1&&"{}"!=n()(this.metaData.defaultValue)&&((t=this.value).value=this.metaData.defaultValue.value,t.text=this.metaData.defaultValue.text,this.$emit("confirm",t)),this.controlData.columnsValue.columns=this.metaData.enumData,this.currentColumns=this.metaData.enumData},methods:{toClick:function(){this.readonly||this.ifFileCode||(this.showPopup=!this.showPopup)},onConfirm:function(t,e){this.showPopup=!1,this.$emit("confirm",{value:t,index:e})},onCancel:function(){},pupopClose:function(t){this.currentColumns=this.controlData.columnsValue.columns},selectItem:function(t){var e;t.children?(this.showPopup=!0,this.currentColumns=t.children):(e=this.value,this.currentColumns=this.controlData.columnsValue.columns,e.value=t.value,e.text=t.text,this.$emit("input",e))}}},i=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"box controlFileCodeBox",on:{click:function(t){return t.stopPropagation(),e.toClick("click",t)}}},[t("van-field",{staticClass:"controlFileCode",class:[e.controlData.error?"errorInp":""],attrs:{disabled:e.controlData.disabled,clickable:e.controlData.clickable,placeholder:e.controlData.placeholder,readonly:!0,"input-align":e.controlData.inputAlign,"left-icon":e.controlData.leftIcon,"right-icon":e.controlData.rightIcon,border:!1,rules:e.controlData.rules,name:e.metaData&&e.metaData.metaId?e.metaData.metaId:""},scopedSlots:e._u([{key:"label",fn:function(){},proxy:!0},e.controlData.buttonSlot?{key:"button",fn:function(){},proxy:!0}:null],null,!0),model:{value:e.value.text,callback:function(t){e.$set(e.value,"text",t)},expression:"value.text"}}),e._v(" "),t("control-dialog",{attrs:{columns:e.controlData.columnsValue},on:{pupopClose:e.pupopClose,selectItem:e.selectItem},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}})],1)},[],!1,null,"72f9ab62",null).exports},53271:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlFileUpload",components:{enclosure:o(58930).default},props:{pformData:{type:Object,default:function(){return{}}},pformMeta:{type:Object,default:function(){return{}}},topformData:{type:Object,default:function(){return{}}},topformMeta:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},formMeta:{type:Object,default:function(){return{}}},metaData:{type:Object,default:function(){return{}}},allFile:{type:Array,default:function(){return[]}},formId:{type:String}},data:function(){return{fileList:[],fileData:{}}},watch:{allFile:{handler:function(t,e){var o=this;this.fileList=t.filter(function(t){return t.attachType==o.metaData.extra.attachType})},deep:!0}},created:function(){var t,e=this;this.fileList=this.allFile.filter(function(t){return t.attachType==e.metaData.extra.attachType}),this.fileData={info_id:(null==(t=this.pformData[this.formId])?void 0:t.value)||(null==(t=this.formMeta.parameters)?void 0:t.pk)||this.formData.main.A0001.value||"",moduleId:(null==(t=this.pformData.A0004)?void 0:t.value)||this.formMeta.parameters.moduleId,nodeId:(null==(t=this.topformMeta.parameters)?void 0:t.nodeId)||(null==(t=this.formMeta.parameters)?void 0:t.nodeId)||"",nodeName:(null==(t=this.formMeta.parameters)?void 0:t.nodeName)||"",flowId:(null==(t=this.formMeta.parameters)?void 0:t.flowId)||"",pId:(null==(t=this.topformMeta.parameters)?void 0:t.pId)||(null==(t=this.formMeta.parameters)?void 0:t.pId)||"",pnId:(null==(t=this.topformMeta.parameters)?void 0:t.pnId)||(null==(t=this.formMeta.parameters)?void 0:t.pnId)||"",uploadAttach:(null==(t=this.formMeta.parameters)?void 0:t.uploadAttach)||"",mainPk:(null==(t=this.topformMeta.parameters)?void 0:t.pk)||""}}},n=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"controlFileUpload"}},[e("enclosure",{ref:"enclosure",attrs:{fileData:t.fileData,allFile:t.fileList,isControl:!0,formMeta:t.formMeta,formData:t.formData,metaData:t.metaData}})],1)},[],!1,null,"7e03bbd3",null).exports},36438:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={name:"controlFormAttchView",props:{subFormIndex:{type:Number,default:null},formId:{type:String,default:null},formMeta:{type:Object,default:function(){return{}}},allFile:{type:Array,default:function(){return[]}}},components:{},data:function(){return{url:"",innerHeight:"",ikey:(new Date).getTime()}},created:function(){var e=this,t=this.allFile.find(function(t){return"0"==t.attachType});this.url=t.file[0].url,this.$bus.on("addUrlTimer",function(t){n.log(t,"data"),e.ikey=(new Date).getTime()})},mounted:function(){this.innerHeight=window.innerHeight-100},activated:function(){},computed:{},watch:{},methods:{getUrl:function(){var e=dsf.layer.loading();dsf.http.post("",{}).then(function(t){dsf.layer.closeLoading(e),"success"!==t.data.type&&dsf.layer.toast(t.data.message)}).error(function(t){dsf.layer.closeLoading(e),n.log(t)})},resizeIframe:function(){}}},a=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"controlFormAttchView"},[e("iframe",{key:t.ikey,ref:"myIframe",attrs:{width:"100%",src:t.url,height:t.innerHeight||500,frameborder:"0",allowfullscreen:""},on:{load:t.resizeIframe}})])},[],!1,null,"158092ee",null).exports},12820:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var s=o(25108),e={name:"controlPostscript",props:{subFormIndex:{type:Number,default:null},formId:{type:String,default:null},formMeta:{type:Object,default:function(){return{}}},metaData:{type:Object,default:function(){return{}}},allFile:{type:Array,default:function(){return[]}}},components:{},data:function(){return{showDate:"",mobileShowDate:"",showName:"",content:"",more:!1,count:"",show:!1,list:[],height:0,closeShow:!0,flag:1==dsf.config.setting["p2512-MOBILE-FORM-ZKFYAGAIN"]||!1}},created:function(){this.getData()},mounted:function(){},activated:function(){},computed:{},watch:{},methods:{getData:function(){var i=this,r=dsf.layer.loading();dsf.http.post("fn/handleTipsMessage/queryHandleTipData",{pk:this.formMeta.parameters.pk,fPnId:this.formMeta.parameters.fPnId,nodeId:this.formMeta.parameters.nodeId}).then(function(t){var e,o,n,a;dsf.layer.closeLoading(r),"success"===t.data.type?(e=(a=t.data.data.first).showDate,o=a.showName,n=a.content,a=a.mobileShowDate,i.showDate=e,i.showName=o,i.mobileShowDate=a,i.content=n,i.count=t.data.data.list.length,i.list=t.data.data.list,i.$nextTick(function(){i.height=i.$refs.fuyan.offsetHeight+50,i.$refs.flag.offsetHeight<=50&&(i.more=!0)}),i.content&&(i.metaData.show=1)):(s.log(t.data.message),i.metaData.show=0)}).error(function(t){dsf.layer.closeLoading(r),s.log(t)})},close:function(){this.flag&&!this.closeShow?(this.closeShow=!0,this.$refs.controlPostscript.style.height="auto",this.$refs.controlPostscript.style.padding="8px 10px 8px 32px",this.$parent.$parent.$parent.$parent.$el.childNodes[0].style.borderBottom="5px solid #f8f8f8"):(this.closeShow=!1,this.$refs.controlPostscript.style.height=0,this.$refs.controlPostscript.style.padding=0,this.$parent.$parent.$parent.$parent.$el.childNodes[0].style.border=0)},moreList:function(){this.show=!0},closePopup:function(){this.show=!1}}},n=(0,o(51900).Z)(e,function(){var e=this,o=e._self._c;return o("div",{ref:"controlPostscript",staticClass:"controlPostscript"},[o("div",{staticClass:"more",on:{click:function(t){return t.stopPropagation(),e.moreList.apply(null,arguments)}}},[o("img",{attrs:{src:"static/images/project/chengduyitihua/iconLiuYan@1x.png",alt:""}})]),e._v(" "),o("div",{staticClass:"num",on:{click:function(t){return t.stopPropagation(),e.moreList.apply(null,arguments)}}},[e._v("\n    "+e._s(e.count)+"\n  ")]),e._v(" "),o("div",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[!e.flag&&e.closeShow?o("img",{attrs:{src:"static/images/project/chengduyitihua/iconGuanBi@1x.png",alt:""}}):e._e(),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.flag&&!e.closeShow,expression:"flag&&!closeShow"}],staticClass:"iconfont iconxialajiantou"}),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.flag&&e.closeShow,expression:"flag&&closeShow"}],staticClass:"iconfont iconshangjiantou"})]),e._v(" "),o("div",{class:{clamp:!e.more},style:{height:e.more?"auto !important":e.height+"px"},on:{click:function(t){t.stopPropagation(),e.more=!0}}},[o("div",{ref:"fuyan",staticClass:"fuyan"},[e._v("附言   ")]),e._v(" "),o("span",{ref:"flag",staticStyle:{"white-space":"pre-wrap",color:"#565551","letter-spacing":"1.3px","line-height":"25px"},domProps:{innerHTML:e._s(e.content)}})]),e._v(" "),o("div",{staticStyle:{"text-align":"right !important","padding-right":"26px",color:"#92908c","letter-spacing":"-0.4px","line-height":"26px"}},[e._v("\n    "+e._s(e.showName)+" "+e._s(e.mobileShowDate)+"\n  ")]),e._v(" "),o("van-popup",{style:{height:"100vh",width:"100vw"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("van-nav-bar",{staticStyle:{"z-index":"9"},attrs:{title:"附言记录"},on:{"click-left":e.closePopup},scopedSlots:e._u([{key:"left",fn:function(){return[o("van-icon",{attrs:{name:"arrow-left"}}),o("span",[e._v("返回")])]},proxy:!0}])}),e._v(" "),o("div",{staticClass:"list"},e._l(e.list,function(t){return o("div",{key:t.id,staticClass:"item"},[o("div",{staticClass:"left"},[o("img",{attrs:{src:"static/images/project/chengduyitihua/iconBiaoQian@1x.png",alt:""}})]),e._v(" "),o("div",{staticClass:"right1"},[o("span",{staticClass:"text"},[e._v(e._s(t.content))]),e._v(" "),o("div",{staticClass:"content"},[o("div",{staticClass:"left"},[o("img",{attrs:{src:"static/images/project/chengduyitihua/iconJianTou@1x.png",alt:""}}),e._v(" "),o("span",[e._v(e._s(t.showName))])]),e._v(" "),o("div",{staticClass:"right"},[e._v("\n              "+e._s(t.showDate)+"\n            ")])])])])}),0)],1)],1)},[],!1,null,"6561ae26",null).exports},72402:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlHidden",mixins:[o(13852).Z],model:{prop:"value",event:"input"},data:function(){return{bindValue:this.value.value,controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},reg:[],ifSuccess:!1}},computed:{},mounted:function(){},created:function(){},methods:{}},n=(0,o(51900).Z)(e,function(){return(0,this._self._c)("div",{staticClass:"controlHidden"})},[],!1,null,"21190a1e",null).exports},27017:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e=o(85027),e={name:"controlTextBox",mixins:[o(13852).Z],model:{prop:"value",event:"input"},components:{baiduMap:e.default},data:function(){return{bindValue:this.value.value,showMap:!1,controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},reg:[],ifSuccess:!1,htmlTxt:"<img style='width:100%;' src='static/images/yiqingfangkong.png'>"}},computed:{},mounted:function(){},created:function(){},methods:{}},n=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",{staticClass:"controlTextBox"},[t("div",{domProps:{innerHTML:this._s(this.htmlTxt)}})])},[],!1,null,"2237c9cc",null).exports},41242:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e=o(73473),a=o.n(e),e=o(13852),i=o(25108),e={name:"controlImage",mixins:[e.Z],components:{},data:function(){var t;return{fileList:[],controlData:{},litmitImgSize:null,uploadArr:[],canEdit:!0,lxUploader:null==(t=dsf.config.commonForm.controlImage)||null==(t=t.lanxin)?void 0:t.isEnable,imageFit:(null==(t=dsf.config.commonForm.controlImage)?void 0:t.imageFit)||"contain"}},watch:{value:function(t,e){var o=this;i.log("value"),this.fileList=[],this.uploadArr=[],t&&t.value.length&&t.value.split(",").forEach(function(t){o.uploadArr.push(t),t.length&&0==t.indexOf("http")?o.fileList.push({url:t+"&imageMogr2/thumbnail/!50p"}):(t="fn/file/downloadImage?fileName="+t,o.fileList.push({url:dsf.url.getServerUrl(t)}))})}},created:function(){var e=this;this.metaData.privilege.editable||(this.canEdit=!1),this.value.value&&this.value.value.length&&this.value.value.split(",").forEach(function(t){e.uploadArr.push(t),t.length&&0==t.indexOf("http")?e.fileList.push({url:t+"&imageMogr2/thumbnail/!50p"}):(t="fn/file/downloadImage?fileName="+t,e.fileList.push({url:dsf.url.getServerUrl(t)}))})},computed:{style:function(){return"mobile"==dsf.config.clientType&&"row"==dsf.config.commonForm.layout&&"right"==dsf.config.commonForm.textlayout?"text-align: right":""},litmitImgNum:function(){return this.metaData.extra.maxCount||3}},methods:{afterReadFile:function(t){var e,o=this;this.$toast.loading({message:"上传中...",forbidClick:!0,duration:0,overlay:!0}),t.length?(e=[],t.forEach(function(t){t.uploadTag="".concat(t.file.name,"_").concat((new Date).getTime()),e.push(dsf.http.upload("fn/file/uploadImage",{},t))}),a().all(e).done(function(t){o.$toast.clear(),t.forEach(function(t){o.uploadArr.push(t.data.data.filePath)}),i.log(o.uploadArr),o.emitFn(o.uploadArr.join(","))})):(t.uploadTag="".concat(t.file.name,"_").concat((new Date).getTime()),dsf.http.upload("fn/file/uploadImage",{},t).done(function(t){o.$toast.clear(),o.uploadArr.push(t.data.filePath),o.emitFn(o.uploadArr.join(","))}))},beforeReadFile:function(){return!0},beforeDeleteFile:function(t,e){return this.uploadArr.splice(e.index,1),this.emitFn(this.uploadArr.join(",")),!0},emitFn:function(t){var e=this.value;e.value=t,this.$emit("input",e),i.log(this.value)},clickUpload:function(){var n=this;lx.media.chooseImage({count:9,sourceType:["album","camera"],quality:"high",success:function(t){i.log("success",t);var e,o=[];t.tempFiles.forEach(function(t){t={content:t.base64,file:dsf.util.base64ToFile(t.base64,t.type,t.name),message:"",status:""};o.push(t)}),i.log("files",o),o.length&&(e=[],o.forEach(function(t){t.uploadTag="".concat(t.file.name,"_").concat((new Date).getTime()),n.fileList.push(t),e.push(dsf.http.upload("fn/file/uploadImage",{},t))}),a().all(e).done(function(t){n.$toast.clear(),t.forEach(function(t){n.uploadArr.push(t.data.data.filePath)}),n.emitFn(n.uploadArr.join(","))}))},fail:function(t){i.log("imageUpErr",t),dsf.layer.toast("获取图片失败，请联系管理员！")}})}}},n=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"controlImage",style:e.style},[t("van-uploader",{ref:"vanUploader",attrs:{"image-fit":e.imageFit,multiple:"","max-count":e.litmitImgNum,"after-read":e.afterReadFile,"before-read":e.beforeReadFile,"before-delete":e.beforeDeleteFile,disabled:!e.canEdit,deletable:e.canEdit,"show-upload":e.canEdit&&!e.lxUploader},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),e._v(" "),e.lxUploader?t("div",{staticClass:"van-uploader",on:{click:e.clickUpload}},[e._m(0)]):e._e()],1)},[function(){var t=this._self._c;return t("div",{staticClass:"van-uploader__wrapper"},[t("div",{staticClass:"van-uploader__upload"},[t("i",{staticClass:"van-icon van-icon-photograph van-uploader__upload-icon"})])])}],!1,null,"c0d7edc8",null).exports},98653:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlLabel",props:{fieldValue:{type:Object},metaData:{type:Object}},data:function(){return{labelValue:{showActive:!1,showLevel:1,text:""}}},computed:{getAlign:function(){return"mobile"!=dsf.config.clientType&&dsf.config.commonForm.padLabellayout||"left"}},created:function(){this.labelValue.showLevel=dsf.config.commonForm.fontLevel||2,this.metaData.validator.required?this.labelValue.showActive=!0:this.labelValue.showActive=!1}},n=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"control_label",class:{"label-center":"center"==t.getAlign},style:{textAlign:t.getAlign}},[t.metaData.icon?e("i",{class:["iconfont",t.metaData.icon,{"icon-active":t.metaData.validator.required}]}):e("span",{class:["size-"+t.labelValue.showLevel,{"label-active":t.metaData.validator.required}],domProps:{innerHTML:t._s(this.metaData.label||"请输入")}},[t.labelValue.colon?[t._v(":")]:t._e()],2)])},[],!1,null,"eb24a860",null).exports},56133:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=(o(70690),o(25108));function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlTextBox",mixins:[e.Z],model:{prop:"value",event:"input"},components:{baiduMap:function(){return Promise.resolve().then(o.bind(o,85027))}},data:function(){return{bindValue:this.value.value,showMap:!1,controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},reg:[],ifSuccess:!1,inpReadonly:!0}},computed:{},watch:{value:function(t){this.bindValue=this.value.value}},mounted:function(){var i=this;this.$bus.on("mapAddress",function(t){var t=t.addressComponent,e=t.province,o=t.city,n=t.district,a=t.street,t=t.streetNumber;i.showMap=!1,i.value.value=""+e+o+n+a+t})},created:function(){var t,e;this.readonly=!this.metaData.privilege.editable,this.inpReadonly=this.metaData.inpReadonly,"{}"==l()(this.metaData.defaultValue)||this.value.value||(t=this.metaData.defaultValue,(e=this.value).value=t.value,this.$emit("input",e))},methods:{showPop:function(){this.readonly||(this.showMap=!0)},getContainer:function(){return document.querySelector("body")},inpFn:function(t){this.controlData.errorMessage=""},toFocus:function(t){this.$emit("focus",this.value)},toClear:function(){this.$emit("clear",this.value)},toClick:function(){this.$emit("clear",this.value)},toBlur:function(){},validatorFn:function(t){(t.length<this.controlData.begin||t.length>this.controlData.end)&&(this.bindValue="",this.controlData.errorMessage=this.controlData.rules[1].message)},setAddress:function(){this.showMap=!1;var t=this.$refs.map.getAddress();c.log(t),this.$bus.emit("setAddress",d(d({},t),{},{metaData:this.metaData}))}}},f=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return!e.readonly||e.readonly&&e.value.value?t("div",{staticClass:"controlTextBox"},[t("van-field",{staticClass:"controlTextBox",attrs:{border:e.controlData.border,disabled:e.controlData.disabled,"error-message":e.controlData.errorMessage,placeholder:e.controlData.placeholder,"input-align":e.controlData.inputAlign,"left-icon":e.controlData.leftIcon,"right-icon":e.controlData.rightIcon,rules:e.controlData.rules,formatter:e.controlData.formatter,readonly:"",type:"textarea",autosize:"",rows:"1",clearable:"",name:e.metaData&&e.metaData.metaId?e.metaData.metaId:""},on:{input:e.inpFn,clear:function(t){return e.toClear("clear",t)},click:e.showPop,blur:function(t){return e.toBlur("blur",t)}},scopedSlots:e._u([{key:"label",fn:function(){},proxy:!0},{key:"right-icon",fn:function(){return[t("van-icon",{attrs:{name:"location-o"},on:{click:e.showPop}})]},proxy:!0}],null,!1,3767109514),model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}}),e._v(" "),t("van-popup",{staticClass:"mapPop",staticStyle:{"z-index":"99999"},attrs:{"get-container":"#app",position:"bottom"},model:{value:e.showMap,callback:function(t){e.showMap=t},expression:"showMap"}},[t("van-nav-bar",{attrs:{title:"地图"},on:{"click-left":function(t){e.showMap=!1}},scopedSlots:e._u([{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}}),t("span",[e._v("返回")])]},proxy:!0}],null,!1,2489604797)}),e._v(" "),t("baiduMap",{ref:"map",staticClass:"map-container"}),e._v(" "),t("div",{staticClass:"btn-container"},[t("van-button",{staticClass:"btn",attrs:{type:"info"},on:{click:function(t){return e.setAddress()}}},[e._v("确认")])],1)],1)],1):e._e()},[],!1,null,"e5c58f48",null).exports},9742:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={components:{commonForm:function(){return Promise.resolve().then(o.bind(o,32444))}},props:["formMeta","metaData","topformMeta"],data:function(){return{list:[],value:"",data:{},show:!1,relaIds:[],relaForm:{},showForm:!1}},beforeCreate:function(){this.$options.components.commonForm=o(32444).default},created:function(){this.getList()},computed:{},methods:{getList:function(){var e=this;dsf.http.get("/fn/mobile/bw/getBWList",{pk:this.formMeta.parameters.pk}).then(function(t){e.list=t.data.rows,0==e.list.length&&(e.metaData.show=0)})},toDtail:function(t){this.showForm=!0,this.relaForm={moduleId:t.moduleId,pk:t.info_id,params:{listId:"MobileBW",method:"view"}}}}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",[o.list.length?n("div",{staticClass:"relation-list"},o._l(o.list,function(t){return n("div",{key:t.relaValue,staticClass:"relation-type",style:{padding:"0"}},[t.canShow?[o.metaData&&o.metaData.showLabel?n("div",{staticClass:"type-name"},[n("span",{class:["size-".concat(o.dsf.config.commonForm.fontLevel||3)]},[n("span",[o._v(o._s(t.name))])])]):o._e(),o._v(" "),o._l(t.document,function(e,t){return n("div",{key:e.info_id,staticClass:"fileList",on:{click:function(t){return o.toDtail(e)}}},[n("div",{staticClass:"fileBody flex1"},[n("div",{staticClass:"fileTitle flex ac"},[n("img",{attrs:{src:"static/images/platform/relation.png",alt:""}}),o._v(" "),n("span",{staticClass:"ellipsis",staticStyle:{flex:"1"}},[o._v(o._s(e.itemsContents))])])])])})]:o._e()],2)}),0):o._e(),o._v(" "),n("van-popup",{style:{height:"100%"},attrs:{position:"bottom","get-container":"#app"},model:{value:o.showForm,callback:function(t){o.showForm=t},expression:"showForm"}},[n("van-nav-bar",{attrs:{title:"并文"},on:{"click-left":function(t){o.showForm=!1}},scopedSlots:o._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-left"}}),o._v(" "),n("span",[o._v("返回")])]},proxy:!0}])}),o._v(" "),o.showForm?n("common-form",{attrs:{_moduleId:o.relaForm.moduleId,_pk:o.relaForm.pk,_params:o.relaForm.params||{},isPop:!0}}):o._e()],1)],1)},[],!1,null,"a3138f38",null).exports},97965:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlMobileAlink",mixins:[o(13852).Z],data:function(){return{controlData:{inputAlign:"right"}}},props:{formMeta:{type:Object,default:function(){return{}}}},created:function(){},mounted:function(){},methods:{cellClick:function(){this.$bus.emit("saveFormBus",{metaData:this.metaData,callback:function(t){t.$route.params.pk||t.$router.replace({path:"/commonForm/".concat(t.moduleId,"/").concat(t.formParams.pk),query:t.$route.query}),t.$router.push(t.busObj.metaData.extra.linkInfo)}})}}},n=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",{staticClass:"controlMobileAlink"},[t("van-cell",{staticClass:"titlespan",attrs:{title:this.metaData.extra.linkName,"is-link":"",center:""},on:{click:this.cellClick}})],1)},[],!1,null,"5c919bfd",null).exports},82076:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlMobileDateShow",components:{},mixins:[o(13852).Z],props:["formData"],data:function(){return{controlData:{startTimeStamp:0,endTimeStamp:0}}},computed:{start:function(){var t,e="";return this.metaData.extra.startMetaId&&(t=this.metaData.extra.startMetaId,t=this.formData.main[t].value+":00",this.controlData.startTimeStamp=t,e=this.getDate(new Date(t.replace(/-/g,"/")))),e},end:function(){var t,e="";return this.metaData.extra.endMetaId&&(t=this.metaData.extra.endMetaId,t=this.formData.main[t].value+":00",this.controlData.endTimeStamp=t,e=this.getDate(new Date(t.replace(/-/g,"/")))),e},gap:function(){var t=this.controlData.startTimeStamp,e=this.controlData.endTimeStamp,o=/\d{4}-\d{1,2}-\d{1,2} /,t=new Date((o.test(t)?t:"2018-1-1 "+t).replace(/-/g,"/")),o=(e=new Date((o.test(e)?e:"2018-1-1 "+e).replace(/-/g,"/"))).getTime()-t.getTime();return o<0?0:(o/1e3/60/60).toFixed(1)}},watch:{},methods:{getDate:function(t){var e=t.getMonth()+1+"月"+t.getDate()+"日",e=t.getFullYear()+"年"+e,o=(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()),n="";switch(t.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return{monthAndDay:e,hoursAndSecond:o,week:n}}},created:function(){},mounted:function(){},destroyed:function(){}},n=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"controlMobileDateShow"},[e("div",{staticClass:"box_start"},[e("span",[t._v("开始时间")]),t._v(" "),e("p",{staticClass:"hour-and-second"},[t._v(t._s(t.start.hoursAndSecond))]),t._v(" "),e("p",{staticClass:"month-and-day"},[t._v("\n      "+t._s(t.start.monthAndDay)+"\n    ")])]),t._v(" "),e("div",{staticClass:"box_center"},[t._v(t._s(1<t.gap?t.gap+"小时":60*t.gap+"分钟"))]),t._v(" "),e("div",{staticClass:"box_end"},[e("span",[t._v("结束时间")]),t._v(" "),e("p",{staticClass:"hour-and-second"},[t._v(t._s(t.end.hoursAndSecond))]),t._v(" "),e("p",{staticClass:"month-and-day"},[t._v("\n      "+t._s(t.end.monthAndDay)+"\n    ")])])])},[],!1,null,null,null).exports},66696:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={props:["metaData","formMeta"],inject:["isMobileForm"],data:function(){return{controlId:this.metaData.controlId}},computed:{label:function(){return this.metaData.label.replace(/(^\s*)|(\s*$)/g,"")},isShow:function(){for(var t=0,e=0,o=this.index+1;o<this.formMeta.controls.length&&"controlMobileFl"!=this.formMeta.controls[o].controlType&&"controlSubFormPrimary"!=this.formMeta.controls[o].controlType;o++)this.formMeta.controls[o].show||t++,e++;return e!=t},showSwitch:function(){return 1==this.metaData.extra["M-SFZCSS"]},switchLabel:function(){return dsf.config.commonForm.controlMobileFlSwitchLabel||(this.isOpen?"收起":"展开")},titleFontSize:function(){var t="var(--font_size_1)";return t=this.metaData.extra.fontSize?"".concat(this.metaData.extra.fontSize/50,"rem"):t},titleFontWeight:function(){return this.metaData.extra.fontWeight||"600"},index:function(){var e=this;return this.formMeta.controls.findIndex(function(t){return t.controlId==e.controlId})},isOpen:{get:function(t){return-1==this.metaData.extra["M-MRSFSF"]||null==this.metaData.extra["M-MRSFSF"]},set:function(t){this.metaData.extra["M-MRSFSF"]=t?-1:1}},getAlign:function(){return this.metaData.extra.eatraClass?-1<this.metaData.extra.eatraClass.indexOf("textCenter")?"center":this.metaData.extra.eatraClass:""},getPadding:function(){return this.isMobileForm?"0 0.2rem":"0.2rem"}},watch:{isOpen:{handler:function(t,e){for(var o=this.index+1;o<this.formMeta.controls.length&&"controlMobileFl"!=this.formMeta.controls[o].controlType;o++)0<this.formMeta.controls[o].extra.openFold&&(this.formMeta.controls[o].propertyShow=!!this.formMeta.controls[o].privilege.visible&&t)},immediate:!0}},created:function(){},methods:{changeControlsShow:function(t){1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this.isOpen=!t)}}},n=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return e.isShow?t("div",{staticClass:"control_mobile_fl column",style:{padding:e.getPadding,textAlign:e.getAlign}},[t("span",{staticClass:"left-icon"}),e._v(" "),t("span",{staticClass:"title",style:{fontSize:e.titleFontSize,fontWeight:e.titleFontWeight},domProps:{innerHTML:e._s(e.label)}}),e._v(" "),e.showSwitch?t("div",{staticClass:"switch",class:{isOpen:e.isOpen}},[t("van-switch",{attrs:{size:"16px","inactive-color":"#ccc"},on:{change:function(t){return e.changeControlsShow(e.isOpen)}},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}})],1):e._e()]):e._e()},[],!1,null,"09518e58",null).exports},91850:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={props:["formData","formMeta"],components:{movingSituation:o(86720).Z},computed:{isShow:function(){return 1==this.formMeta.parameters.hasFlow}},data:function(){return{pk:this.$route.params.pk}}},n=(0,o(51900).Z)(e,function(){var t=this._self._c;return this.isShow?t("moving-situation",{attrs:{"form-data":{info_id:this.pk},isControl:!0,parameters:this.formMeta.parameters}}):this._e()},[],!1,null,"5baabf7f",null).exports},71043:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlMobileShareInfo",mixins:[o(13852).Z],props:{formMeta:{type:Object,default:function(){return{}}}},data:function(){return{controlData:{},activeIndex:0}},created:function(){},mounted:function(){},methods:{showOpinion:function(t){}}},n=(0,o(51900).Z)(e,function(){var n=this,a=n._self._c;return a("div",{attrs:{id:"controlMobileShareInfo"}},[a("van-tabs",{model:{value:n.activeIndex,callback:function(t){n.activeIndex=t},expression:"activeIndex"}},n._l(this.metaData.extra.tabs,function(o,t){return a("van-tab",{key:t,attrs:{title:o.name,badge:o.badge}},["yyqk"==o.action?a("div",n._l(o.data,function(t,e){return a("div",{key:e,staticClass:"useritem"},[a("div",{class:"已阅"==t.shareContent?"opinionText":"opinionTextBold",domProps:{innerHTML:n._s(""==t.shareContent?"已阅":t.shareContent)}}),n._v(" "),a("div",{staticClass:"tr"},[a("i",[n._v(n._s(t.uname)+" ")]),n._v("\n                        "+n._s(t.lastUpdataDateShow)+"\n                    ")])])}),0):a("div",n._l(o.data,function(t,e){return a("span",{key:e},[n._v(n._s(t.uname)+"\n                    "),e<o.data.length-1?a("i",[n._v("，")]):n._e()])}),0)])}),1)],1)},[],!1,null,"238a8d81",null).exports},35698:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(15036),n=o(97551),a=o(25108),e={name:"controlMultiDeptOpinion",props:["formData","metaData","parameters"],components:{enclosurePopup:e.Z,editOpinion:n.Z},data:function(){return{activeNames:[""],opinion:[]}},computed:{},mounted:function(){a.log(this.formData),this.getopinion()},methods:{isShowType:function(t,e){return 0==e?t.nodeName:t.nodeName&&t.nodeName!=this.opinion[e-1].nodeName},getopinion:function(){var o=this;dsf.http.post("/ctrl/suggestionProposal/getMinorDeptOpinionList",{nodeId:this.parameters.nodeId,pk:"231206094611ozfPecj2tTcgzjb8mHx"==this.parameters.moduleId?this.formData.main.A0003.value:this.parameters.pk}).then(function(t){var e;"200"==t.status&&null!=(e=t.data)&&e.data&&(o.opinion=t.data.data)})},priview:function(t){t={fileName:t.fileName,isNew:!0,moduleId:this.parameters.moduleId,officeModuleId:"",nodeId:"-1",flowId:"0",fileId:t.infoId||t.fileId,id:t.id||t.fileId,isHandwrite:"0"};this.$refs.enclosurePopup.open(t)}}},i=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},[o._l(o.opinion,function(t,e){return n("div",{key:e,staticClass:"opinionBox opinionBox0"},o._l(t,function(e,t){return n("div",{key:t,staticClass:"opinionBox opinionBox1"},[n("span",[o._v(o._s(e.deptName))]),o._v(" "),n("div",{staticClass:"opion-box"},["231206094611ozfPecj2tTcgzjb8mHx"!=o.parameters.moduleId?o._l(e.leaderOpinions,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[[n("div",{directives:[{name:"show",rawName:"v-show",value:t.leaderOpinion,expression:"it.leaderOpinion"}],staticClass:"opinionText",class:{current:!t.handler},domProps:{innerHTML:o._s(t.leaderOpinion)}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.leaderOpinionDate,expression:"it.leaderOpinionDate"}],staticClass:"opinionTime tr",class:{current:!t.handler}},[n("i",[o._v(o._s(t.leaderName)+" ")]),o._v("\n                                "+o._s(t.leaderOpinionDate)+"\n                            ")])]],2)}):o._e(),o._v(" "),n("div",{staticClass:"file-div"},[e.acceptStr&&"231206094611ozfPecj2tTcgzjb8mHx"!=o.parameters.moduleId?n("div",[o._v("采纳情况："+o._s(e.acceptStr))]):o._e(),o._v(" "),e.publicStr&&"231206094611ozfPecj2tTcgzjb8mHx"!=o.parameters.moduleId?n("div",[o._v("公开情况："+o._s(e.publicStr))]):o._e(),o._v(" "),e.privateReason&&"231206094611ozfPecj2tTcgzjb8mHx"!=o.parameters.moduleId?n("div",[o._v("非主动公开理由："+o._s(e.privateReason))]):o._e(),o._v(" "),e.fileId?n("div",{staticClass:"tr"},[n("div",{staticClass:"opinionFile ellipsis",on:{click:function(t){return o.priview(e)}}},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName)}}),o._v(" "),n("div",{staticClass:"info"},[n("p",{staticClass:"elps"},[o._v(o._s(e.fileName))])])])]):o._e()])],2)])}),0)}),o._v(" "),n("enclosurePopup",{ref:"enclosurePopup"})],2)},[],!1,null,"2bd2452c",null).exports},7456:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return s}});var l=n(522),e=n(43562),c=n.n(e),e=n(18428),a=n.n(e),e=n(73473),i=n.n(e),e=n(13852),u=n(53411),o=n(95426),r=n(25108),e={name:"controlNestedForm",mixins:[e.Z],components:{controlSubFormPrimary:o.default},props:["pformData","pformMeta","topformData","topformMeta","formId"],data:function(){return{controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},buttonHandle:null,formData:{},struct:{},checkShow:function(){}}},computed:{},mounted:function(){},created:function(){var r=this,t=(this.importButtonHandle(),this.pformData[this.formId].value),s=this.pformData.A0004.value,e=this.topformMeta.parameters.flowId,o=this.topformMeta.parameters.nodeId,n=this.topformMeta.parameters.moduleId,t="fn/xform/getInfo?nestedForm=true&pk="+t+"&"+this.metaData.extra.urlParam+"&moduleId="+s+"&_parentFlowId="+e+"&_parentNodeId="+o+"&master_moduleId="+n;dsf.http.get(t).then(function(t){var t=t.data,e=(r.formData=t.data,r.struct=t.struct,{});if(r.struct.subform)for(var o=0,n=c()(r.struct.subform);o<n.length;o++){var a=(0,l.Z)(n[o],2),i=a[0];a[1];r.formData.subform&&r.formData.subform[i]?(r.formData.subform[i].forEach(function(t){r.$set(t,"action","Updated")}),e[i]={rows:r.formData.subform[i]}):e[i]={rows:[]}}r.$set(r.formData,"multinfos",e),u.default.init(s,r.struct.parameters.formId),r.$nextTick(function(){u.default.initHandle_subform(r.formData,r.struct,r),r.checkShow=function(t){return u.default.checkShowByData_subform(t)}})})},methods:{importButtonHandle:function(){var o=this;n.e(99016).then(n.bind(n,57116)).then(function(t){o.buttonHandle=t.default;var e;n(33959)("./".concat(dsf.config.projectName,".js")).then(function(t){r.log(t),e=t.default,a()(o.buttonHandle,e)}).catch(function(t){r.log("无项目按钮方法")})})},saveNestedForm:function(){var o=this;return new(i())(function(e,t){o.buttonHandle.saveNestedFormSync(o.$route.params,o.struct,o.formData,o,o.$refs).then(function(t){o.initSubForm(),e()})})},initSubForm:function(){for(var e=this,t=0,o=c()(e.struct.subform);t<o.length;t++){var n=(0,l.Z)(o[t],2),a=n[0];n[1];e.formData.multinfos[a]&&e.formData.multinfos[a].rows.forEach(function(t){e.$set(t,"action","Updated")})}}}},s=(0,n(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlNestedForm"},o._l(o.struct.controls,function(t,e){return n("van-row",{key:e,staticClass:"box flex"},[[n("transition",{attrs:{name:"fade"}},["controlSubFormPrimary"==t.controlType?n("controlSubFormPrimary",{tag:"component",attrs:{checkShow:o.checkShow,formMeta:o.struct.subform[t.metaId],formData:o.formData.multinfos[t.metaId],formId:o.formId,foreign:o.formData.main.A0001.value}}):o._e()],1)]],2)}),1)},[],!1,null,"0cbe226b",null).exports},95426:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(20629),c=o(18868),u=o(25108);function d(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}var e={name:"controlNestedFormlSub",props:["formMeta","formData","formId","foreign","checkShow"],data:function(){return{subForm:null,cardCount:1,container:null,subFormData:null,SubFormPrimary:null,readonly:!1,structControl:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):d(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}({},(0,e.rn)({isShowAppFooter:function(t){return t.isShowAppFooter},isShowAppHeader:function(t){return t.isShowAppHeader}})),watch:{formData:{handler:function(t,e){u.log(t,e)},deep:!0,immediate:!0}},components:{DebounceClick:c.Z,formLayout:function(){return Promise.resolve().then(o.bind(o,33259))}},beforeCreate:function(){this.$options.components.formLayout=o(33259).default},mounted:function(){this.container=this.$refs.subform},created:function(){var o=this;if(this.structControl=this.formMeta.controls.filter(function(t){return"controlSubFormPrimary"!=t.controlType&&"controlHidden"!=t.controlType}),this.SubFormPrimary=this.formMeta.controls.filter(function(t){return"controlSubFormPrimary"==t.controlType})[0],this.SubFormPrimary){if(!this.$route.params.pk&&this.SubFormPrimary.extra["default-rows"])for(var t=0;t<this.SubFormPrimary.extra["default-rows"];t++)this.addCard(!1);this.SubFormPrimary.privilege&&(this.readonly=!this.SubFormPrimary.privilege.editable),this.structControl.forEach(function(t,e){t.showLabel=!1,t.showLable=!1,o.SubFormPrimary.defaultValue[t.metaId]||(o.SubFormPrimary.defaultValue[t.metaId]={value:""})})}},methods:{check:function(t,e){return this.checkShow({item:t,ctr:e})},getData:function(t,e){return this.formData.rows[t][e.metaId]},deepCopy:function(t){return JSON.parse(l()(t))},addCard:function(){var o=this;return dsf.http.get("fn/common/generateUUID?size=1").then(function(t){var t=t.data,e={};(e=o.SubFormPrimary?o.deepCopy(o.SubFormPrimary.defaultValue):e)[o.formId]={},e[o.formId].value=t.data.UUID,e[o.formId].foreign=o.foreign,e.action="Added",o.formData.rows[o.formData.rows.length]={},o.$set(o.formData.rows,o.formData.rows.length-1,e)}),!1},deleteCard:function(e){var o=this;this.$dialog.confirm({title:"提示",message:"确定要删除吗？"}).then(function(){var t;0<o.formData.rows.length&&("Added"==(t=o.deepCopy(o.formData.rows))[e].action?t.splice(e,1):"Updated"==t[e].action&&(t[e].action="Deleted"),o.formData.rows=t)}).catch(function(){})},getcol:function(t){switch(t.metaId){case"C-MEETINGBI-0015":return 6;case"C-MEETINGBI-0022":return t.isHideDivider=!0,18;default:return 24}}}},f=(0,o(51900).Z)(e,function(){var a=this,i=a._self._c;return i("div",{ref:"subform",staticClass:"subform"},a._l(a.formData.rows,function(o,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:"Deleted"!=o.action,expression:"cardItm.action!='Deleted'"}],key:n,staticClass:"card",attrs:{id:"id"+n+a.formId}},[i("van-row",{attrs:{type:"flex"}},a._l(a.structControl,function(t,e){return i("van-col",{key:t.controlId,staticStyle:{padding:"0"},attrs:{span:a.getcol(t)}},[a.check(o,t)&&t.privilege&&t.privilege.visible?i("form-layout",{attrs:{formType:"nestedForm",rowCteNum:1,lastControl:0<=e-1?a.structControl[e-1]:"",controlData:a.getData(n,t),subFormIndex:n,metaData:t,formId:a.formId,isSubForm:!0}}):a._e()],1)}),1)],1)}),0)},[],!1,null,"56c2347d",null).exports},83911:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlNewAmountThreeFirstOrder",extends:o(91298).default,methods:{toThousands:function(t){var t=(t||0).toString().split("."),e=t[0].replace(/(\d)(?=(?:\d{3})+$)/g,"$1,");return 2===t.length?e+"."+t[1]:e}},created:function(){this.controlData.inputType="Number",this.value.value&&!isNaN(this.value.value)&&(this.value.value=this.toThousands(this.value.value))}},n=(0,o(51900).Z)(e,void 0,void 0,!1,null,null,null).exports},94629:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={data:function(){return{historyMsg:[]}},created:function(){this.getHistoryMsg()},methods:{getHistoryMsg:function(){var e=this,t={moduleId:this.$route.params.moduleId,pk:this.$route.params.pk||this.$route.query.forwardIds||this.$route.query.replyId};dsf.http.post("fn/mobileNote/getToAndGo",t).then(function(t){e.historyMsg=t.data.data})}}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",o._l(o.historyMsg,function(t,e){return n("div",{key:e,staticClass:"historyItem"},[n("div",{staticClass:"line"},[n("span",[o._v("发件人："+o._s(t.sendUserName))])]),o._v(" "),n("div",{staticClass:"line"},[n("span",[o._v("发送时间："+o._s(t.sendTime))])]),o._v(" "),n("div",{staticClass:"line"},[n("span",[o._v("主题："+o._s(t.bt))])]),o._v(" "),n("div",{staticClass:"line"},[n("span",[o._v("内容："),n("span",{domProps:{innerHTML:o._s(t.content)}})])]),o._v(" "),t.attachInfos&&0<t.attachInfos.length?n("div",{staticClass:"line"},[n("span",[o._v("附件："),o._l(t.attachInfos,function(e,t){return n("span",{key:t,on:{click:function(t){return o.openFile(e)}}},[o._v(o._s(e.showName))])})],2)]):o._e()])}),0)},[],!1,null,"0282d596",null).exports},81312:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlNumberBox",extends:o(91298).default,created:function(){this.controlData.inputType="Number"}},n=(0,o(51900).Z)(e,void 0,void 0,!1,null,null,null).exports},21422:function(t,e,o){"use strict";o.r(e);o=(0,o(51900).Z)({},void 0,void 0,!1,null,null,null);e.default=o.exports},2644:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(27921),s=o.n(e),e=o(85579),l=o.n(e),e=o(22013),c=o.n(e),i=o(5044),e=o(8450),n=o.n(e),e=o(6838),a=o(13852),r=o(25108);function u(t,e){var o,n,a,i,r=void 0!==l()&&t[c()]||t["@@iterator"];if(r)return n=!(o=!0),{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){n=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(n)throw a}}};if(Array.isArray(t)||(r=function(t,e){var o;if(t)return"string"==typeof t?d(t,e):"Map"===(o="Object"===(o=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:o)||"Set"===o?s()(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?d(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return r&&(t=r),i=0,{s:e=function(){},n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}var a={mixins:[a.Z],props:["parameters"],components:{controlUserByData:e.default},data:function(){return{controlData:{rules:[]},suggTabs:[],pk:this.$route.params.pk,opinionContentTags:[],oftenOpinion:{load:!1,show:!1,active:0,often:[],module:[]},behaviour:{load:!1,show:!1,active:0,often:[],other:[],lineTags:{}},allOpinion:{load:!1,show:!1,active:0,tabs:{"历史意见":[],"流程意见":[]}},deptuser:{show:!1,title:"",active:0,url:"",tabs:[],nextNodeSendModeList:this.metaData.extra.nextNodeSendModeList||[]},currentTagIndex:0,currentCursorIndex:0,flowKey:"",flowinfo:null,opinionObj:{}}},watch:{opinionContentTags:{deep:!0,handler:function(t,e){this.opinionObj.opinionContentTag=n()(t),this.opinionObj.opinionContent=t.map(function(t){return t.tagName}).join(""),this.opinionChange()}}},created:function(){var e=this,t=(this.suggTabs=this.metaData.extra.tabs,this.metaData.extra.opinionContentTag?JSON.parse(this.metaData.extra.opinionContentTag).forEach(function(t){e.opinionContentTags.push(t)}):this.opinionContentTags.push({id:"",tagName:"",type:-1}),dsf.util.loadSessionStore("user"));this.pk&&"0"!=this.parameters.nodeId&&"-2"!=this.parameters.nodeId?(this.flowKey="flow-".concat(this.parameters.pk,"-").concat(this.parameters.pId||"0","-").concat(this.parameters.pnId||this.parameters.pk),this.opinionObj={id:this.parameters.pnId,fid:this.parameters.pnId,infoId:this.parameters.pk,pid:this.parameters.pId,pnid:this.parameters.pnId,nodeId:this.parameters.nodeId,wfId:this.parameters.flowId,opinionContentTag:this.metaData.extra.opinionContentTag,opinionContent:this.metaData.extra.opinionContentTag?JSON.parse(this.metaData.extra.opinionContentTag).map(function(t){return t.tagName}).join(""):"",nodeName:this.parameters.nodeName,isSign:"0",signName:"",signTime:"",duserId:t.user_id,duserName:t.name,userId:t.user_id,userName:t.name,opinionFiles:[]}):(this.flowKey="flow-".concat(this.parameters.pk,"-0-").concat(this.parameters.pk),this.opinionObj={id:this.parameters.pk,fid:0,infoId:this.parameters.pk,pid:0,pnid:this.parameters.pk,nodeId:this.parameters.nodeId,wfId:this.parameters.flowId,opinionContentTag:this.metaData.extra.opinionContentTag,opinionContent:this.metaData.extra.opinionContentTag?JSON.parse(this.metaData.extra.opinionContentTag).map(function(t){return t.tagName}).join(""):"",nodeName:this.parameters.nodeName,isSign:"0",signName:"",signTime:"",duserId:t.user_id,duserName:t.name,userId:t.user_id,userName:t.name,opinionFiles:[]})},methods:{getContainer:function(){return document.body},closeUser:function(t){this.deptuser.show=t},convertUser:function(t,o){var n=[];return t.forEach(function(t,e){n.push({id:t.userId,itemIndex:e,name:t.userName,isopen:null,pid:t.orgId,showName:t.userName,type:t.type,checked:!1,deep:o,childrenCount:0})}),n},convertDept:function(t,o){var n=this,a=[];return t.forEach(function(t,e){e={id:t.orgId,itemIndex:e,name:t.orgName,isopen:null,pid:t.fid,showName:t.orgName,type:3,deep:o,children:t.orgUsers.length?n.convertUser(t.orgUsers,o++):[]};t.opinionTagTreeEntityUserEntities.length&&(e.children=[].concat((0,i.Z)(e.children),(0,i.Z)(n.convertDept(t.opinionTagTreeEntityUserEntities)))),e.childrenCount=e.children.length,a.push(e)}),a},convertDept2:function(t,o){var n=this,a=[];return t.forEach(function(t,e){e={id:t.orgId,itemIndex:e,name:t.orgName,isopen:null,pid:t.fid,showName:t.orgName,type:3,deep:o,children:t.leafList.length?n.convertDept2(t.leafList,o++):[]};e.childrenCount=e.children.length,a.push(e)}),a},getSelectUser:function(t){var e,o=t[0],n=t[1],a=[],i=u(o);try{for(i.s();!(e=i.n()).done;){var r=e.value,s={id:r.id,tagName:r.name,type:r.type};4==r.type&&(s.serial=n),a.push(s)}}catch(t){i.e(t)}finally{i.f()}this.addTag(a)},tabClick:function(n){var a=this;switch(n.name){case"常用":this.oftenOpinion.show=!0,this.oftenOpinion.load||(dsf.http.get(n.action).then(function(t){200==t.data.code&&(a.oftenOpinion.often=t.data.data.data.often)}),dsf.http.get("fn/editopinion/more/data").then(function(t){0==t.data.code&&(a.oftenOpinion.module=t.data.data,a.oftenOpinion.module.forEach(function(t){t.content=a.contentJson(t.content)}))}),this.oftenOpinion.load=!0);break;case"部门":"部门选择"==this.deptuser.title?this.deptuser.show=!0:(this.deptuser.tabs=[],dsf.http.get(n.action).then(function(t){var e;200==t.data.code&&((t=t.data.data).often&&t.often.length&&a.deptuser.tabs.push({name:"最近使用",children:a.convertDept2(t.often,1),action:n.action}),e=a.convertDept2(t.leafList,1),a.deptuser.tabs.push({name:t.orgName,children:e,action:n.action}),a.deptuser.show=!0,a.deptuser.title="部门选择"),r.log(a.deptuser)}));break;case"人员":"人员选择"==this.deptuser.title?this.deptuser.show=!0:(this.deptuser.tabs=[],dsf.http.get(n.action).then(function(t){var e,o;200==t.data.code&&(e=1,(t=t.data.data).often&&t.often.length&&a.deptuser.tabs.push({name:"最近使用",children:a.convertUser(t.often,e),action:n.action}),t.userCurrent&&(o=a.convertUser(t.userCurrent.orgUsers,e=1),t.userCurrent.opinionTagTreeEntityUserEntities.length&&(o=[].concat((0,i.Z)(o),(0,i.Z)(a.convertDept(t.userCurrent.opinionTagTreeEntityUserEntities,e)))),a.deptuser.tabs.push({name:t.userCurrent.orgName,children:o,action:n.action})),o=a.convertUser(t.orgUsers,e=1),t.opinionTagTreeEntityUserEntities.length&&(o=[].concat((0,i.Z)(o),(0,i.Z)(a.convertDept(t.opinionTagTreeEntityUserEntities,e)))),a.deptuser.tabs.push({name:t.orgName,children:o,action:n.action}),a.deptuser.show=!0,a.deptuser.title="人员选择"),r.log(a.deptuser)}));break;case"办理行为":this.behaviour.show=!0,this.behaviour.load||(dsf.http.get(n.action).then(function(t){200==t.data.code&&(a.behaviour.often=t.data.data.data.often,a.behaviour.other=t.data.data.data.other,a.behaviour.lineTags=t.data.data.lineTags)}),this.behaviour.load=!0);break;case"所有意见":this.allOpinion.show=!0,this.allOpinion.load||(dsf.http.get(n.action).then(function(t){200==t.data.code&&(a.allOpinion.tabs["历史意见"]=t.data.data.myOpinion,a.allOpinion.tabs["流程意见"]=t.data.data.flowOpinion)}),this.allOpinion.load=!0)}},addTag:function(o){var t,n=o,e={id:"",tagName:this.opinionContentTags[this.currentTagIndex].tagName.substring(0,this.currentCursorIndex),type:-1},a={id:"",tagName:this.opinionContentTags[this.currentTagIndex].tagName.substring(this.currentCursorIndex),type:-1};o.every(function(t){return 4==t.type})?(n=[],o.forEach(function(t,e){n.push(t),e<o.length-1&&n.push({id:"",tagName:"、",type:-1})}),a=(-1<this.opinionContentTags[this.currentTagIndex].tagName.indexOf("同志")&&(e={id:"",tagName:"",type:-1}),{id:"",tagName:"同志",type:-1}),this.opinionContentTags[this.currentTagIndex+1]&&4==this.opinionContentTags[this.currentTagIndex+1].type&&(a={id:"",tagName:"、",type:-1}),0!=this.currentTagIndex&&4==this.opinionContentTags[this.currentTagIndex-1].type&&(e={id:"",tagName:"、",type:-1})):o.every(function(t){return 3==t.type})&&(n=[],o.forEach(function(t,e){n.push(t),e<o.length-1&&n.push({id:"",tagName:"、",type:-1})})),(t=this.opinionContentTags).splice.apply(t,[this.currentTagIndex,1,e].concat((0,i.Z)(n),[a])),this.currentTagIndex+=n.length+1,"同志"==this.opinionContentTags[this.currentTagIndex].tagName?this.currentCursorIndex=2:this.currentCursorIndex=0},delTag:function(t,e){4!=this.opinionContentTags[e].type&&3!=this.opinionContentTags[e].type||-1!=this.opinionContentTags[e-1].type||"、"!=this.opinionContentTags[e-1].tagName||(this.opinionContentTags[e-1].tagName=""),0<e&&-1==this.opinionContentTags[e-1].type&&-1==this.opinionContentTags[e+1].type?(this.opinionContentTags[e-1].tagName+=this.opinionContentTags[e+1].tagName,this.opinionContentTags.splice(e,2)):this.opinionContentTags.splice(e,1),this.opinionContentTags[e]||setTimeout(this.focusLast,500)},blurTag:function(t,e){var o,n=e.target,a=n.ownerDocument||n.document,a=a.defaultView||a.parentWindow,i=0,n=(0<a.getSelection().rangeCount&&((o=(a=a.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(n),o.setEnd(a.endContainer,a.endOffset),i=o.toString().length),this.currentTagIndex=t,e.target.innerHTML),a=(n=e.target.innerHTML.replace(/ /g,"&nbsp;")).split("&nbsp;").length-1;this.currentCursorIndex=6*a+i,t<=this.opinionContentTags.length&&(this.opinionContentTags[t].tagName=n)},delTagName:function(t,e){var o,n=e.target,a=n.ownerDocument||n.document,a=a.defaultView||a.parentWindow,i=0;0<a.getSelection().rangeCount&&((o=(a=a.getSelection().getRangeAt(0)).cloneRange()).selectNodeContents(n),o.setEnd(a.endContainer,a.endOffset),i=o.toString().length),e.target.innerHTML.substring(0,i)||(this.opinionContentTags[t].tagName=e.target.innerHTML.substring(i),this.delTag(this.opinionContentTags[t-1],t-1))},focusLast:function(){var o=this;this.$nextTick(function(){r.log(o.$refs.tag);var t=o.$refs.tag.length,t=o.$refs.tag[t-1],e=(t.focus(),window.getSelection());e.selectAllChildren(t),e.collapseToEnd()})},contentJson:function(t){return t?-1==t.indexOf("TAG:")?[{id:"",tagName:t,type:1}]:JSON.parse(t.slice(4)):[]},replaceOpinionContent:function(t){this.opinionContentTags=JSON.parse(t.contentTag),this.allOpinion.show=!1},saveModule:function(){var e=this,t=(1==this.opinionContentTags.length&&-1==this.opinionContentTags[0].type&&""==this.opinionContentTags[0].tagName&&dsf.layer.toast("保存意见模板不能为空"),"TAG:".concat(n()(this.opinionContentTags)));dsf.http.post("fn/editopinion/more/mobileAddrows",{opinionTempVal:t}).then(function(t){200==t.data.code?(dsf.layer.toast("意见模板保存成功"),dsf.http.get("fn/editopinion/more/data").then(function(t){0==t.data.code&&(e.oftenOpinion.module=t.data.data,e.oftenOpinion.module.forEach(function(t){t.content=e.contentJson(t.content)}))})):dsf.layer.toast("意见模板保存失败")})},delModule:function(t,e){var o=this;dsf.layer.confirm({message:"是否确认删除该意见模板",confirmButtonText:"确认"},function(){dsf.http.post("fn/editopinion/more/mobileDelrows",{ids:t.id}).then(function(t){200==t.data.code&&(dsf.layer.toast("意见模板删除成功"),o.oftenOpinion.module.splice(e,1))})})},opinionChange:function(){this.opinionObj.opinionContentTag=n()(this.opinionContentTags),this.opinionObj.opinionContent=this.opinionContentTags.map(function(t){return t.tagName}).join(""),this.$emit("controlEditOpinion",{key:this.flowKey,value:this.opinionObj})}}},f=(0,o(51900).Z)(a,function(){var n=this,a=n._self._c;return n.readonly?a("div",[a("span",{staticClass:"van-field__control",domProps:{textContent:n._s(n.opinionObj.opinionContent)}})]):a("div",[a("div",{staticClass:"sugg-tab"},n._l(n.suggTabs,function(e){return a("van-button",{key:e.name,attrs:{size:"small",type:"info"},on:{click:function(t){return n.tabClick(e)}}},[n._v(n._s(e.name))])}),1),n._v(" "),a("div",{staticClass:"sugg-fillin",on:{click:function(t){return t.target!==t.currentTarget?null:n.focusLast.apply(null,arguments)}}},[n._l(n.opinionContentTags,function(e,o){return[-1==e.type?a("span",{key:"".concat(e.id,"_").concat(o),ref:"tag",refInFor:!0,staticClass:"space",attrs:{contenteditable:"true"},domProps:{innerHTML:n._s(e.tagName)},on:{keydown:function(t){return!t.type.indexOf("key")&&n._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:n.delTagName(o,t)},blur:function(t){return n.blurTag(o,t)}}}):a("van-tag",{key:"".concat(e.id,"_").concat(o),ref:"tag",refInFor:!0,attrs:{closeable:"",size:"large",color:"#969799"},on:{close:function(t){return n.delTag(e,o)}}},[n._v(n._s(e.tagName))])]})],2),n._v(" "),a("van-field",{staticStyle:{display:"none"},attrs:{rows:1,"error-message":n.controlData.errorMessage,rules:n.controlData.rules,type:"textarea",name:n.metaData&&n.metaData.metaId?n.metaData.metaId:""},scopedSlots:n._u([{key:"button",fn:function(){return[n._t("button")]},proxy:!0}],null,!0),model:{value:n.opinionObj.opinionContent,callback:function(t){n.$set(n.opinionObj,"opinionContent",t)},expression:"opinionObj.opinionContent"}}),n._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("van-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return n.saveModule()}}},[n._v("保存为意见模板")])],1),n._v(" "),a("van-popup",{style:{height:"50%"},attrs:{position:"top","get-container":"#app"},model:{value:n.oftenOpinion.show,callback:function(t){n.$set(n.oftenOpinion,"show",t)},expression:"oftenOpinion.show"}},[a("van-tabs",{attrs:{sticky:""},model:{value:n.oftenOpinion.active,callback:function(t){n.$set(n.oftenOpinion,"active",t)},expression:"oftenOpinion.active"}},[a("van-tab",{attrs:{title:"常用"}},[a("div",{staticClass:"sub-title"},[n._v("最近使用")]),n._v(" "),a("div",{staticClass:"tags"},n._l(n.oftenOpinion.often,function(e){return a("van-tag",{key:e.id,staticClass:"sugg-tag",attrs:{size:"large",type:"primary"},on:{click:function(t){return n.addTag([e])}}},[n._v(n._s(e.tagName))])}),1)]),n._v(" "),a("van-tab",{attrs:{title:"意见模板"}},n._l(n.oftenOpinion.module,function(e,o){return a("div",{key:e.id,staticClass:"module",on:{click:function(t){return n.addTag(e.content)}}},[a("div",{staticClass:"content"},[n._v("\n                        "+n._s(e.content.map(function(t){return t.tagName}).join(""))+"\n                    ")]),n._v(" "),a("span",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),n.addTag(e.content)}}},[n._v("使用")]),n._v(" "),a("span",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),n.delModule(e,o)}}},[n._v("删除")])])}),0)],1)],1),n._v(" "),a("van-popup",{style:{height:"50%"},attrs:{position:"top","get-container":"#app"},model:{value:n.behaviour.show,callback:function(t){n.$set(n.behaviour,"show",t)},expression:"behaviour.show"}},[a("van-tabs",{attrs:{sticky:""},model:{value:n.behaviour.active,callback:function(t){n.$set(n.behaviour,"active",t)},expression:"behaviour.active"}},[a("van-tab",{attrs:{title:"常用模式"}},[a("div",{staticClass:"sub-title"},[n._v("最近使用")]),n._v(" "),a("div",{staticClass:"tags"},n._l(n.behaviour.often,function(e){return a("van-tag",{key:e.id,staticClass:"sugg-tag",attrs:{size:"large",type:"primary"},on:{click:function(t){return n.addTag([e])}}},[n._v(n._s(e.tagName))])}),1),n._v(" "),n.behaviour.other?[a("div",{staticClass:"sub-title"},[n._v("其他")]),n._v(" "),a("div",{staticClass:"tags"},n._l(n.behaviour.other,function(e){return a("van-tag",{key:e.id,staticClass:"sugg-tag",attrs:{size:"large",type:"primary"},on:{click:function(t){return n.addTag([e])}}},[n._v(n._s(e.tagName))])}),1)]:n._e()],2),n._v(" "),a("van-tab",{attrs:{title:"导航模式"}},[n._l(n.behaviour.lineTags,function(t,e){return[a("div",{key:e},[a("div",{staticClass:"sub-title"},[n._v(n._s(e))]),n._v(" "),a("div",{staticClass:"tags"},n._l(t,function(e){return a("van-tag",{key:e.id,staticClass:"sugg-tag",attrs:{size:"large",type:"primary"},on:{click:function(t){return n.addTag([e])}}},[n._v(n._s(e.tagName))])}),1)])]})],2)],1)],1),n._v(" "),a("van-popup",{style:{height:"50%"},attrs:{position:"top","get-container":"#app"},model:{value:n.allOpinion.show,callback:function(t){n.$set(n.allOpinion,"show",t)},expression:"allOpinion.show"}},[a("van-tabs",{attrs:{sticky:""},model:{value:n.allOpinion.active,callback:function(t){n.$set(n.allOpinion,"active",t)},expression:"allOpinion.active"}},n._l(n.allOpinion.tabs,function(t,e){return a("van-tab",{key:e,attrs:{title:e}},n._l(t,function(e){return a("div",{key:e.id,staticClass:"allOpinion",on:{click:function(t){return n.replaceOpinionContent(e)}}},[a("div",[a("span",[n._v(n._s(e.userName)+n._s(e.eDate))]),n._v(" "),a("span",[n._v(n._s(e.nodeName))])]),n._v(" "),a("div",[n._v("意见内容："+n._s(e.content))])])}),0)}),1)],1),n._v(" "),a("van-popup",{style:{height:"100%"},attrs:{"get-container":n.getContainer,position:"bottom"},model:{value:n.deptuser.show,callback:function(t){n.$set(n.deptuser,"show",t)},expression:"deptuser.show"}},[n.deptuser.show?a("div",[a("control-user-by-data",{attrs:{pageTitle:n.deptuser.title,controlData:n.deptuser},on:{closeUser:n.closeUser,getSelectUser:function(t){return n.getSelectUser(arguments)}}})],1):n._e()])],1)},[],!1,null,"22a791d6",null).exports},86052:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return g}});var e=o(62680),a=o.n(e),e=o(95366),i=o.n(e),e=o(6919),n=o.n(e),u=o(5044),r=o(77193),e=o(64830),d=o.n(e),e=o(26243),s=o.n(e),e=o(13852),l=o(15036),c=o(97551),f={},m=o(5589),p=(m.keys().forEach(function(t){var e=m(t);f[t.replace(/^\.\/(.*)\.\w+$/,"$1")]=e.default}),f),h=o(25108);function v(e,t){var o,n=s()(e);return a()&&(o=a()(e),t&&(o=o.filter(function(t){return i()(e,t).enumerable})),n.push.apply(n,o)),n}var e={name:"controlOpinionView",mixins:[e.Z],props:["parameters","formMeta"],components:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach(function(t){(0,r.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):v(Object(o)).forEach(function(t){Object.defineProperty(e,t,i()(o,t))})}return e}({enclosurePopup:l.Z,editOpinion:c.Z},p),data:function(){return{user:dsf.util.loadSessionStore("user"),controlData:{},filePreview:!1,imgPreview:!1,videoPreview:!1,preveiwImg:[],previewUrl:"",templateComponent:""}},computed:{canEditOpinion:function(){return 1==this.metaData.extra.mobileInput},opinion:function(){var o,n,a=this,i=[];if(null!=(c=this.metaData.extra.list)&&c.length&&(c=this.metaData.extra.list,o=dsf.util.loadSessionStore("loginToken"),n={},c.forEach(function(e){e.handwritePic&&(e.handwritePic=dsf.url.getServerUrl(e.handwritePic)),e.opinionFiles&&e.opinionFiles.forEach(function(t){t.priviewUrl=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&nodeId=").concat(e.nodeId,"&&flowId=").concat(a.parameters.flowId,"&x-auth-token=").concat(o)),t.navtiveUrl=t.filePath,t.initUrl="fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&fileName=").concat(t.fileName,"&x-auth-token=").concat(o),(t.fileName.includes(".png")||t.fileName.includes(".jpg"))&&(t.priviewUrl=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&fileName=").concat(t.fileName))),t.fileName.includes(".mp4")&&(t.priviewUrl=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&fileName=").concat(t.fileName)))});var t=e;n[e.nodeName]?n[t.nodeName].push(t):n[e.nodeName]=[t]}),d()(n).forEach(function(t){return i.push.apply(i,(0,u.Z)(t))})),this.canEditOpinion){for(var t=-1,e=dsf.util.loadSessionStore("user").user_id,r=(2==this.$route.query.agencyType&&(e=this.$route.query.agencyUserId),(null==(c=this.metaData.extra.users)?void 0:c.findIndex(function(t){return t.userId==e}))||0),s=(null==(c=this.metaData.extra.users)?void 0:c.map(function(t){return t.userId}))||[],l=0;l<i.length;l++)if("break"===function(){var e=i[l].userId;if(s.findIndex(function(t){return t==e})>=r)return t=l,"break"}())break;var c=-1==t?i.length:t;i.splice(c,0,{editOpinion:!0})}return 0<i.length&&(this.metaData.show=!0),i},showDeptOpinion:function(){return 1==this.metaData.extra.isDept}},created:function(){var t=s()(p);this.metaData.extra.template&&t.includes("template".concat(this.metaData.extra.template))&&(this.templateComponent="template".concat(this.metaData.extra.template))},mounted:function(){var t=this;this.$eventBus.OnBtnWriteOpintion(this,function(){h.log("接收",t.metaData.extra.nodeIds.indexOf(t.parameters.nodeId)),-1<t.metaData.extra.nodeIds.indexOf(t.parameters.nodeId)&&t.$nextTick(function(){t.$refs.controlOpinionView.scrollIntoView({behavior:"smooth",block:"end"})})})},methods:{isShowType:function(t,e){return 0==e?t.nodeName:t.nodeName&&t.nodeName!=this.opinion[e-1].nodeName},onClickLeft:function(){this.filePreview=!1},priviewOpinionImg:function(t){},stripscript:function(t){for(var e=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\]<>/?~！@#￥……&*——|{}‘；：”“'？↵\r\n ]"),o="",n=0;n<t.length;n++)o+=t.substr(n,1).replace(e,"");return o},wpsOpen:function(t,e,o){e=dsf.url.getRootPath()+e,t=this.stripscript(t.fileName),h.log(t),e={keepCallback:!0,downUrl:encodeURI(e),saveUrl:"",fileName:t,openWithWPS:!0,uploadFile:!0,openMode:"readOnly",enterReviseMode:!1,showReviewingPaneRightDefault:!1,userName:this.user.name};h.log(e),$WPS.downAndOpen(e,function(t){h.log(t)},function(t){h.log("错误回调",t)})},priview:function(t){h.log(t);t={fileName:t.fileName,isNew:!0,moduleId:this.parameters.moduleId,officeModuleId:"",nodeId:"-1",flowId:"0",fileId:t.infoId,id:t.id,isHandwrite:"0"};this.$refs.enclosurePopup.open(t)},controlEditOpinion:function(t){this.$emit("controlEditOpinion",t)}}},g=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",[o.templateComponent?n(o.templateComponent,{tag:"component",attrs:{metaData:o.metaData,parameters:o.parameters}}):o.showDeptOpinion?n("div",{ref:"controlOpinionView",staticClass:"controlOpinionView"},o._l(o.opinion,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.deptname,expression:"itemdept.deptname"}],staticClass:"opinionType",staticStyle:{"font-weight":"bold"}},[o._v("\n              "+o._s(t.deptname)+":\n          ")]),o._v(" "),o._l(t.list,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.nodeName,expression:"item.nodeName"}]},[o._v(o._s(t.nodeName))]),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.opinionContent,expression:"item.opinionContent"}],staticClass:"opinionText",domProps:{innerHTML:o._s(t.opinionContent)}}),o._v(" "),n("div",{staticClass:"opinionWhere tr"}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.time,expression:"item.time"}],staticClass:"opinionTime tr"},[t.signPhoto&&!o.dsf.config.commonForm.hideOpinionSignPhoto?n("img",{attrs:{src:o.dsf.url.getWebPath(t.signPhoto),alt:""}}):n("i",[o._v(o._s(t.userName)+"  ")]),o._v("\n                  "+o._s(t.time)+"\n              ")])])})],2)}),0):n("div",{ref:"controlOpinionView",staticClass:"controlOpinionView"},[o._l(o.opinion,function(e,t){return n("div",{key:t,staticClass:"opinionBox"},[e.editOpinion?[o.canEditOpinion?n("editOpinion",{attrs:{formMeta:o.formMeta,metaData:o.metaData},on:{controlEditOpinion:o.controlEditOpinion}}):o._e()]:[n("div",{directives:[{name:"show",rawName:"v-show",value:o.isShowType(e,t),expression:"isShowType(item, index)"}],staticClass:"opinionType",staticStyle:{"font-weight":"bold"}},[o._v(o._s(e.nodeName)+":")]),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.deptName,expression:"item.deptName"}],staticStyle:{padding:"6px 0"}},[o._v(o._s(e.deptName))]),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.opinionContent,expression:"item.opinionContent"}],staticClass:"opinionText",domProps:{innerHTML:o._s(e.opinionContent)}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.handwritePic,expression:"item.handwritePic"}],staticClass:"opinionText opinionImg",on:{click:function(t){return o.priviewOpinionImg(e.handwritePic)}}},[n("img",{style:{width:o.dsf.config.commonFlow.opinionImgWidth||"50%"},attrs:{src:e.handwritePic,alt:""}})]),o._v(" "),e.opinionFiles&&e.opinionFiles.length<=2?n("div",o._l(e.opinionFiles,function(e,t){return n("div",{key:t,staticClass:"opinionFile ellipsis",on:{click:function(t){return o.priview(e)}}},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName)}}),o._v(" "),n("div",{staticClass:"info"},[n("p",{staticClass:"elps"},[o._v(o._s(e.fileName))]),o._v(" "),n("p",{staticClass:"sub"},[o._v(o._s(o.dsf.util.filesizeTostr(e.fileSize)))])])])}),0):o._e(),o._v(" "),e.opinionFiles&&2<e.opinionFiles.length?n("div",{staticClass:"attachWrap"},o._l(e.opinionFiles,function(e,t){return n("div",{staticClass:"attach",on:{click:function(t){return o.priview(e)}}},[n("div",{staticClass:"title"},[o._v(o._s(e.fileName))]),o._v(" "),n("div",{staticClass:"icon elps"},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName),alt:""}}),n("span",[o._v(o._s(o.dsf.util.filesizeTostr(e.fileSize)))])])])}),0):o._e(),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.time,expression:"item.time"}],staticClass:"opinionTime tr"},[e.signPhoto&&!o.dsf.config.commonForm.hideOpinionSignPhoto?n("img",{attrs:{src:o.dsf.url.getWebPath(e.signPhoto),alt:""}}):n("i",[o._v(o._s(e.userName)+" ")]),o._v("\n              "+o._s(e.time)+"\n          ")])]],2)}),o._v(" "),n("enclosurePopup",{ref:"enclosurePopup"})],2)],1)},[],!1,null,"2e52f350",null).exports},28472:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlOpintionView",model:{prop:"options",event:"optionContent"},props:{metaData:{type:Object,default:{}},options:{type:Object,default:{}}},data:function(){return{optiontext:this.options.text,controlData:{}}},created:function(){this.optionMessage=this.metaData},computed:{text:function(){return this.options.text}},watch:{options:function(t,e){this.optiontext=t}},methods:{getOptions:function(){var t=this.options;t.text=this.optiontext,t.value="",this.$emit("getOptions",t)}}},n=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"opintionView"},[t("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"200",placeholder:e.optionMessage.placeholder,disabled:e.optionMessage.privilege.editable,"show-word-limit":"",name:e.metaData&&e.metaData.metaId?e.metaData.metaId:""},on:{blur:e.getOptions,input:e.getOptions},model:{value:e.optiontext,callback:function(t){e.optiontext=t},expression:"optiontext"}})],1)},[],!1,null,"233f5795",null).exports},36941:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(25108);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlTextarea",mixins:[e.Z],props:{subFormIndex:{type:Number,default:null},formId:{type:String,default:null}},data:function(){return{bindValue:"",controlData:{rules:[],maxlength:null,showWordLimit:!0,placeholder:""},readonly:!1}},methods:{inpFn:function(t){this.$bus.emit("textareaInpBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))},toFocus:function(t){this.$bus.emit("textareaFocusBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))},toBlur:function(){this.$bus.emit("textareaBlurBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))}},created:function(){c.log(this.value.value),"{}"==l()(this.metaData.defaultValue)||this.value.value||(this.value.value=this.metaData.defaultValue.value)},mounted:function(){}},f=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"controlTextarea"},[e.readonly?t("div",{ref:"controlTextarea",staticClass:"van-cell van-field readonlyBox"},[t("span",{class:["van-field__control"],domProps:{innerHTML:e._s(e.value.value)}})]):t("van-field",{class:{textareaBox:!e.readonly},style:e.metaData.autosizeStyle,attrs:{rows:e.readonly?1:e.metaData.extra.defaultRow||3,autosize:"",type:"textarea",readonly:e.readonly,placeholder:e.controlData.placeholder,maxlength:e.controlData.maxlength},on:{input:e.inpFn,focus:e.toFocus,blur:e.toBlur},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}}),e._v(" "),t("van-field",{staticClass:"dreamInput",attrs:{type:"textarea",rows:"1",autosize:"",rules:e.controlData.rules,maxlength:e.controlData.maxlength,"show-word-limit":e.controlData.showWordLimit,readonly:e.readonly,placeholder:e.controlData.placeholder,name:e.metaData&&e.metaData.metaId?e.metaData.metaId:""},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1)},[],!1,null,"da123e0a",null).exports},39765:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return d}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e);function c(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):c(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlRadio",mixins:[o(13852).Z],model:{prop:"value",event:"input"},data:function(){return{bindValue:this.value.text,radio:"",controlData:{inputAlign:"right",rules:[],leftIcon:"",rightIcon:"",disabled:!1,closeable:!0,round:!0,placeholder:"",lockScroll:!0,overlay:!0,duration:"0.3",columnsValue:{title:"请选择",columns:[]}},currentColumns:[]}},computed:{style:function(){return"mobile"==dsf.config.clientType&&"row"==dsf.config.commonForm.layout&&"right"==dsf.config.commonForm.textlayout?"justify-content: flex-end":""}},watch:{value:{handler:function(t,e){var o=this;null!=t&&t.value&&(this.radio=t.value,this.$nextTick(function(){1==o.metaData.extra.isDocType&&o.$bus.emit("comboxChangeCode",u(u({},o.value),{},{metaData:o.metaData}))}))},deep:!0,immediate:!0},"metaData.enumData":{handler:function(t,e){t&&(this.currentColumns=t)},deep:!0,immediate:!0}},created:function(){var t;this.metaData.hasOwnProperty("readonlyValue")&&(this.value.text=this.metaData.readonlyValue),this.value.value||this.value.text||"{}"==l()(this.metaData.defaultValue)||this.readonly||((t=this.value).value=this.metaData.defaultValue.value,t.text=this.metaData.defaultValue.text,this.$emit("input",t)),this.radio=this.value.value,this.controlData.columnsValue.columns=this.metaData.enumData},methods:{changeRadio:function(t,e){var o;this.readonly||((o=this.value).value=t.value,o.text=t.text,this.$emit("input",o),this.$bus.emit("inputRadio",u(u({},o),{},{metaData:this.metaData})))},changeValue:function(t,e){var o;this.readonly||(o=this.value,this.$emit("input",o),this.$bus.emit("changeRadio",u(u({},o),{},{metaData:this.metaData})))}}},d=(0,o(51900).Z)(e,function(){var n=this,t=n._self._c;return t("div",{staticClass:"box controlRadio"},[n.readonly?t("div",{staticClass:"van-cell van-field"},[t("span",{staticClass:"van-field__control",domProps:{textContent:n._s(n.value.text)}})]):t("van-field",{attrs:{rules:n.controlData.rules},scopedSlots:n._u([{key:"input",fn:function(){return[t("van-radio-group",{style:n.style,on:{change:n.changeValue},model:{value:n.radio,callback:function(t){n.radio=t},expression:"radio"}},n._l(n.currentColumns,function(e,o){return t("van-radio",{key:o,style:{width:isNaN(n.metaData.extra.numPerLine)?"":"".concat(100/Number(n.metaData.extra.numPerLine),"%")},attrs:{name:String(e.value)},on:{click:function(t){return n.changeRadio(e,o)}}},[n._v(n._s(e.text))])}),1)]},proxy:!0}],null,!1,2352137922),model:{value:n.radio,callback:function(t){n.radio=t},expression:"radio"}})],1)},[],!1,null,"1281bcb9",null).exports},29207:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={mixins:[o(13852).Z],name:"controlRate",data:function(){return{starNum:0,count:5,aColor:"#ffd21e",starSize:"20",allowHalf:this.metaData.extra.allowHalf,controlData:{}}},methods:{initRate:function(){},onChangeStar:function(t){}},created:function(){this.value.value=Number(this.value.value)}},n=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"controlRate"},[t("van-cell",[t("van-rate",{attrs:{count:e.count,size:e.starSize,color:e.aColor,"allow-half":e.allowHalf,readonly:e.readonly,"void-icon":"star","void-color":"#eee"},on:{change:e.onChangeStar},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1)],1)},[],!1,null,"0b5b742b",null).exports},31428:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e=o(58930),e={props:{pformData:{type:Object,default:function(){return{}}},pformMeta:{type:Object,default:function(){return{}}},topformData:{type:Object,default:function(){return{}}},topformMeta:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},formMeta:{type:Object,default:function(){return{}}},allFile:{type:Array,default:function(){return[]}},formId:{type:String}},components:{enclosure:e.default},data:function(){return{fileData:null}},created:function(){var t;this.fileData={info_id:(null==(t=this.pformData[this.formId])?void 0:t.value)||(null==(t=this.formMeta.parameters)?void 0:t.pk)||this.formData.main.A0001.value||"",moduleId:(null==(t=this.pformData.A0004)?void 0:t.value)||this.formMeta.parameters.moduleId,nodeId:(null==(t=this.topformMeta.parameters)?void 0:t.nodeId)||(null==(t=this.formMeta.parameters)?void 0:t.nodeId)||"",nodeName:(null==(t=this.formMeta.parameters)?void 0:t.nodeName)||"",flowId:(null==(t=this.formMeta.parameters)?void 0:t.flowId)||"",pId:(null==(t=this.topformMeta.parameters)?void 0:t.pId)||(null==(t=this.formMeta.parameters)?void 0:t.pId)||"",pnId:(null==(t=this.topformMeta.parameters)?void 0:t.pnId)||(null==(t=this.formMeta.parameters)?void 0:t.pnId)||"",uploadAttach:(null==(t=this.formMeta.parameters)?void 0:t.uploadAttach)||"",mainPk:(null==(t=this.topformMeta.parameters)?void 0:t.pk)||""}}},n=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",[e("enclosure",{ref:"enclosure",attrs:{fileData:t.fileData,allFile:t.allFile,isControl:!0,formMeta:t.formMeta,formData:t.formData}})],1)},[],!1,null,"440f3734",null).exports},74871:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var n=o(77193),e=o(8450),a=o.n(e),e=o(13852),e=(o(70690),{name:"controlTextBox",mixins:[e.Z],model:{prop:"value",event:"input"},props:{formMeta:{type:Object,default:function(){return{}}},subFormIndex:{type:Number,default:null}},data:function(){return{bindValue:this.value.value,controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},reg:[],ifSuccess:!1,tags:[],showWrite:!1,formData:null,lineWidth:6,lineColor:"#000000",bgColor:"white",isCrop:!1,imgUrl:"",flowinfo:{},flowKey:"",pk:this.$route.params.pk,shuiyin_div:null,showMore:!1}},computed:{tempTags:function(){return this.showMore?this.tags:this.tags.slice(0,2)}},watch:{value:function(t){this.bindValue=this.value.value}},created:function(){var t=this;this.readonly=!this.metaData.privilege.editable,this.getAdvice(),dsf.util.loadSessionStore("user");this.$nextTick(function(){t.formData=t.findForm(t).formMeta.parameters,t.distribKey="distrib-".concat(t.pk,"-").concat(t.formData.distribId),t.distribinfo=(0,n.Z)({},t.distribKey,{id:t.formData.distribId,fid:t.formData.fdistribId,infoId:t.pk,status:1,shareContent:t.metaData.extra.opinionContent,shareFiles:[]}),t.metaData.extra.opinionContent&&t.inpFn(t.metaData.extra.opinionContent)})},methods:{inpFn:function(t){this.distribinfo[this.distribKey].shareContent=t,this.$emit("controlShareOpinion",this.distribinfo),this.controlData.errorMessage=""},toFocus:function(t){},toClear:function(){},toClick:function(){},getAdvice:function(){var e=this;!this.readonly&&this.metaData.extra.tempList&&dsf.http.get("fn/mobileUsedOpinion/find").then(function(t){e.tags=t.data.rows})},clearTags:function(t){var e=this;this.$dialog.confirm({title:"提示",message:"确定要删除吗？"}).then(function(){dsf.http.get("fn/mobileUsedOpinion/delete?id="+t.id).then(function(){e.getAdvice()})})},addContent:function(t){this.metaData.extra.opinionContent=t.context,this.distribinfo[this.distribKey].shareContent=t.context,this.$emit("controlShareOpinion",this.distribinfo)},addTemplate:function(){var e=this;this.tags.find(function(t){return e.metaData.extra.opinionContent==t.context})?dsf.layer.toast("模板内容已重复"):""!=this.metaData.extra.opinionContent?dsf.http.post("fn/mobileUsedOpinion/add",{__DATA:a()({opinion:this.metaData.extra.opinionContent})}).then(function(t){e.getAdvice()}):dsf.layer.toast("请输入内容")},toBlur:function(){this.metaData.extra.opinionContent=this.metaData.extra.opinionContent.replace(/(^\s*)|(\s*$)/g,"")},validatorFn:function(t){}}}),i=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlEditOpinion"},[n("van-field",{class:{controlTextBox:!o.readonly},attrs:{rows:o.readonly?1:3,border:o.controlData.border,disabled:o.controlData.disabled,clearable:o.controlData.clearable,"error-message":o.controlData.errorMessage,placeholder:o.controlData.placeholder,"input-align":o.controlData.inputAlign,"left-icon":o.controlData.leftIcon,"right-icon":o.controlData.rightIcon,rules:o.controlData.rules,formatter:o.controlData.formatter,readonly:o.readonly,type:"textarea",name:o.metaData&&o.metaData.metaId?o.metaData.metaId:""},on:{input:o.inpFn,focus:function(t){return o.toFocus("focus",t)},clear:function(t){return o.toClear("clear",t)},click:function(t){return o.toClick("click",t)},blur:function(t){return o.toBlur("blur",t)}},scopedSlots:o._u([{key:"button",fn:function(){return[o._t("button")]},proxy:!0}],null,!0),model:{value:o.metaData.extra.opinionContent,callback:function(t){o.$set(o.metaData.extra,"opinionContent",t)},expression:"metaData.extra.opinionContent"}}),o._v(" "),o.readonly?o._e():n("div",{staticClass:"mould"},[n("div",{staticClass:"_file_log"},[o._l(o.tempTags,function(e,t){return n("van-tag",{key:t,staticClass:"_file_tags",attrs:{size:"medium",type:"primary",closeable:!0},on:{close:function(t){return o.clearTags(e)},click:function(t){return o.addContent(e)}}},[o._v(o._s(e.context))])}),o._v(" "),2<o.tags.length?n("span",{staticClass:"show-more",on:{click:function(t){o.showMore=!o.showMore}}},[o._v(o._s(o.showMore?"收起":"更多"))]):o._e()],2),o._v(" "),n("div",{staticClass:"mould-button",on:{click:function(t){return o.addTemplate()}}},[o._v("设为模板")])])],1)},[],!1,null,"40ae3bae",null).exports},96777:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlShareRead",mixins:[o(13852).Z],props:{formMeta:{type:Object,default:function(){return{}}}},data:function(){return{controlData:{},currentData:{},isShow:!1}},created:function(){},mounted:function(){},methods:{showOpinion:function(t){this.currentData=t,this.isShow=!0}}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"shareRead-container"},[o._l(o.metaData.extra.list,function(e,t){return n("div",{key:t,staticClass:"useritem"},[o._v("\n        在"+o._s(e.createTime)+"\n        "),n("br"),o._v(" "),n("span",{class:[e.opinion.length?"click-username":"username"],on:{click:function(t){e.opinion.length&&o.showOpinion(e)}}},[o._v("\n            "+o._s(e.createName)+"\n            ("+o._s(e.createDetpName)+")\n            "),e.opinion.length?n("i",{staticClass:"iconfont iconcomment-processing-outline"}):o._e()]),o._v("\n        分发给=>"),o._l(e.shareList,function(t,e){return n("span",{key:e},[0<e?n("i",[o._v(",")]):o._e(),o._v(o._s(t.uName))])})],2)}),o._v(" "),n("van-popup",{staticStyle:{height:"50%",width:"80%",overflow:"hidden"},attrs:{closeable:"",round:"","get-container":"#app"},on:{close:function(t){o.isShow=!1}},model:{value:o.isShow,callback:function(t){o.isShow=t},expression:"isShow"}},[n("div",{staticClass:"content"},[o._v("\n            "+o._s(o.currentData.opinion)+"\n        ")])])],2)},[],!1,null,"a160577c",null).exports},57844:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var i=o(522),e=o(43562),r=o.n(e),e=(o(56535),{name:"controlShareView",mixins:[o(13852).Z],props:{formMeta:{type:Object,default:function(){return{}}}},data:function(){return{controlData:{},totalCount:0,deptList:[],activeNames:[]}},created:function(){for(var e=this,t=0,o=r()(this.metaData.extra.deptList);t<o.length;t++){var n=(0,i.Z)(o[t],2),a=n[0],n=n[1];this.deptList.push({name:a,userlist:n}),n.forEach(function(t){e.totalCount++})}},mounted:function(){},methods:{showOpinion:function(t){}}}),n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{attrs:{id:"controlShareView"}},[n("div",{staticClass:"usercount"},[o._v("共 "),n("span",{staticClass:"sp"},[o._v(o._s(o.totalCount))]),o._v(" 人已阅")]),o._v(" "),n("van-collapse",{model:{value:o.activeNames,callback:function(t){o.activeNames=t},expression:"activeNames"}},o._l(o.deptList,function(t,e){return n("van-collapse-item",{key:e,attrs:{title:t.name,name:e}},o._l(t.userlist,function(t,e){return n("div",{key:e,staticClass:"useritem"},[n("span",[o._v(o._s(t.uname))]),o._v(" "),t.shareContent?n("span",[o._v('："'+o._s(t.shareContent)+'"')]):o._e()])}),0)}),1)],1)},[],!1,null,"bb8e14ce",null).exports},5518:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(13852),n=o(25108),e={name:"controlSign",mixins:[e.Z],model:{prop:"value",event:"input"},props:{parameters:{type:Object,default:null}},data:function(){return{userinfo:{},controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},reg:[],ifSuccess:!1,signing:!1}},computed:{},created:function(){this.userinfo=dsf.util.loadSessionStore("user"),this.value.value=this.value.value.split(" ")[0]},methods:{signClick:function(t){var e,o=this;1==t?(this.signing=!0,dsf.http.post("fn/sign/sortUsers",{userId:"".concat(this.value.userid||"").concat(this.value.userid?",":"").concat(this.userinfo.user_id),infoId:this.parameters.pk}).then(function(t){200==t.data.code?(o.value.value=t.data.data.userName,o.value.userid=t.data.data.userId,o.value.time=dsf.date.format(new Date,"yyyy-mm-dd hh:ii:ss"),n.log(o.value)):dsf.layer.toast(t.data.message)}).error(function(){var t=o.value.userid.split(",").filter(function(t){return""!=t});t.push(o.userinfo.user_id),o.value.userid=t.join(","),(t=o.value.value.split(",").filter(function(t){return""!=t})).push(o.userinfo.name),o.value.value=t.join(","),o.value.time=dsf.date.format(new Date,"yyyy-mm-dd hh:ii:ss")}).always(function(){o.signing=!1})):(t=this.value.value.split(",").filter(function(t){return t!=o.userinfo.name}).join(","),e=this.value.userid.split(",").filter(function(t){return t!=o.userinfo.user_id}).join(","),this.value.value=t,this.value.userid=e)}}},a=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return!e.readonly||e.readonly&&e.value.value?t("div",{staticClass:"controlSign"},[t("div",{staticClass:"van-field__control van-field"},[e.value.value?t("span",{staticClass:"sign",domProps:{textContent:e._s(e.value.value+" "+e.value.time.split(" ")[0])}}):e._e(),e._v(" "),e.readonly?e._e():t("span",[-1==e.value.value.indexOf(e.userinfo.name)?t("van-button",{attrs:{type:"primary",size:"small",disabled:e.signing},on:{click:function(t){return e.signClick(1)}}},[e._v("签名")]):t("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.signClick(0)}}},[e._v("取消签名")])],1)])]):e._e()},[],!1,null,"b04c4f28",null).exports},28798:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return D}});var e=o(62680),a=o.n(e),e=o(95366),i=o.n(e),e=o(6919),n=o.n(e),r=o(66250),s=o(77193),e=o(33453),l=o.n(e),e=o(18428),c=o.n(e),e=o(79529),u=o.n(e),e=o(8450),d=o.n(e),e=o(73473),f=o.n(e),e=o(26243),m=o.n(e),e=o(20629),p=o(18868),h=o(63450),v=o(21265),g=o(14355),w=o(25108),y={methods:{DBsubForm:function(t){this.$bus.emit("saveFormBus",{metaData:this.metaData,callback:function(o){dsf.http.post("fn/convert/moduleRuleConvert",{convertId:"210807173604X5XSzA4sBEKDTXEgYWN",initDataSource:1,srcInfo:o.formParams.pk}).then(function(t){var e;200==t.data.code&&(e=d()({relationId:o.formParams.pk}),o.$route.params.pk||o.$router.replace({path:"/commonForm/".concat(o.moduleId,"/").concat(o.formParams.pk),query:o.$route.query}),o.$router.push({path:"/commonForm/".concat(t.data.data.moduleId,"/").concat(t.data.data.pk),query:{specialSaveObj:e,endDate:o.formData.main["C-DB-0052"].value,initDataSource:1,listId:"210807171452Aq5XM4u7yTrwKPu4MAy",method:"maintenanceData"}}))})}})},showRestVacations:function(t){var e='<div style="padding: 20px"><font size="5px"> 公休剩余天数: <font color="red">'+this.topformData.main["C-LEAVE-0019"].value+'</font> <br>调休剩余天数：<font color="red"> '+this.topformData.main["C-LEAVE-0011"].value+"</font></font></div>";this.$dialog.alert({title:"",message:e}).then(function(){})},importWork:function(t){var n=this;dsf.http.post("ctrl/integration/workPlan/getLatestPlan",{pk:this.topformMeta.parameters.pk}).then(function(o){var t;200==o.data.code&&0<(t=o.data.data.length)&&n.addMultipleCard(t).then(function(t){for(var e=0;e<t.length;e++)n.$set(t[e],"B0060",o.data.data[e].B0060),n.$set(t[e],"C-LASTWEEK-WORK-SUB-0001",o.data.data[e]["C-LASTWEEK-WORK-SUB-0001"]),n.$set(t[e],"C-LASTWEEK-WORK-SUB-0002",o.data.data[e]["C-LASTWEEK-WORK-SUB-0002"])})})},"xform.saveFormTemporarily":function(){w.log(this),this.$bus.emit("saveFormBus",{isTemp:!0})}}},b=o(25108);function _(e,t){var o,n=m()(e);return a()&&(o=a()(e),t&&(o=o.filter(function(t){return i()(e,t).enumerable})),n.push.apply(n,o)),n}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?_(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):_(Object(o)).forEach(function(t){Object.defineProperty(e,t,i()(o,t))})}return e}var y={name:"controlSubFormPrimary",props:["metaData","formMeta","formData","formId","foreign","pformData","pformMeta","topformData","topformMeta","formParams"],mixins:[y],data:function(){return{subForm:null,cardCount:1,container:null,subFormData:null,SubFormPrimary:null,readonly:!1,structControl:[],showPerson:!1,extra:{},showSubFormTitle:!1,subFormStyle:"card",commonPop:!1,commonPopParam:{},checkType:"radio",relatedKey:{},subctrArr:[],treePopParam:{},treePop:!1,offsetTop:0,showPopover:!1,goodsPop:!1}},computed:x(x({},(0,e.rn)({isShowAppFooter:function(t){return t.isShowAppFooter},isShowAppHeader:function(t){return t.isShowAppHeader}})),{},{buttons:function(){return this.metaData.extra.buttons?this.metaData.extra.buttons.map(function(t){return{icon:"icon-hao"==t.icon?"plus":t.icon,text:t.text,actionName:t.actionName,actionArgs:t.actionArgs}}):[{icon:"plus",text:"新增",actionName:"x-subform-add",actionArgs:""}]},isMobileForm:function(){return"mobile"==dsf.config.clientType||!(!this.topformMeta.parameters.hasOwnProperty("formType")||3!=this.topformMeta.parameters.formType)},isShowOperateColumn:function(){return!("false"==this.SubFormPrimary.extra.isShowOperateColumn)}}),components:{DebounceClick:p.Z,controlUserList:h.default,DefaultList:g.default,goodsList:v.default,formLayout:function(){return Promise.resolve().then(o.bind(o,33259))}},watch:{"SubFormPrimary.privilege.editable":{handler:function(t,e){this.readonly=!t}}},beforeCreate:function(){this.$options.components.formLayout=o(33259).default},mounted:function(){this.container=this.$refs.subform,this.$nextTick(function(){this.$eventBus.emitSubformOnload(this,{formId:this.formId}),this.offsetTop=$(".commonForm")[0].getBoundingClientRect().top})},created:function(){var o=this,a=this;if(this.formMeta&&(this.structControl=this.formMeta.controls.filter(function(t){return"controlSubFormPrimary"!=t.controlType&&"controlHidden"!=t.controlType}),this.SubFormPrimary=this.formMeta.controls.filter(function(t){return"controlSubFormPrimary"==t.controlType})[0]),this.SubFormPrimary){if(this.SubFormPrimary.extra["subform-style"]&&(this.subFormStyle=this.SubFormPrimary.extra["subform-style"],this.showSubFormTitle=!1),this.formParams.isNewFile&&this.SubFormPrimary.extra["default-rows"])for(var t=0;t<this.SubFormPrimary.extra["default-rows"];t++)this.addCard(!1);this.SubFormPrimary.privilege&&(this.readonly=!this.SubFormPrimary.privilege.editable);["201125171531HhP41e8lrLw0T7kuFXK","201230170107FTM46tEGeG4rwLX9mDr","1905311647221BSf1doWPYLsr8nAdqB"].includes(this.$route.params.moduleId)&&(this.readonly=!0),a.loadPropertyJoinHandle(),this.structControl.forEach(function(o,t){a.SubFormPrimary.defaultValue[o.metaId]||(a.SubFormPrimary.defaultValue[o.metaId]={value:""}),a.$set(o,"show",1),a.$set(o,"propertyShow",1);for(var e,n=0;n<a.topformMeta.propertyJoin.length;n++)!function(){var e=a.topformMeta.propertyJoin[n];e.operateTarget.split(",").forEach(function(t){t=t.split(":");1<t.length&&t[0]==a.SubFormPrimary.metaId&&t[1]==o.metaId&&"1"==e.operation&&(a.$set(o,"show",0),a.$set(o,"propertyOperateTarget",1))})}();"controlHidden"==o.controlType&&a.$set(o,"show",0),o.privilege&&!o.privilege.visible&&a.$set(o,"show",0),a.SubFormPrimary.extra["subform-style"]&&"card"!=a.SubFormPrimary.extra["subform-style"]&&a.$set(o,"showLable",!1),"controlFileUpload"==o.controlType&&(e=c()(o.extra,{file:[]}),a.$set(o,"allFile",[e])),a.$watch(function(){return o.privilege.editable},function(e,t){a.formData.rows.forEach(function(t){t.structControl.forEach(function(t){o.metaId==t.metaId&&a.$set(t.privilege,"editable",e)})})},{deep:!0})}),a.formData.rows.forEach(function(t,e){a.$set(t,"isOpen",!0),a.$set(t,"structControl",a.deepCopy(a.structControl)),1!=o.metaData.extra.defaultOpen&&"table"!=o.subFormStyle&&a.toggleOpen(t),a.loadWatch(t,!0),t.structControl.forEach(function(t){"1"==o.metaData.extra.mobileShowType&&(t.privilege.editable=!1),"controlFileUpload"==t.controlType&&a.$set(t,"allFile",o.getSubAllFile(e,t))})})}},methods:{popoverClick:function(t){var e=this;this.showPopover=!1,setTimeout(function(){e.handleActionClick(t)},50)},loadPropertyJoinHandle:function(){var o,n=this;n.topformMeta.propertyJoin&&0<n.topformMeta.propertyJoin.length&&(o=n.SubFormPrimary.metaId,n.topformMeta.subform[o].controls.forEach(function(e){var t=n.topformMeta.propertyJoin.filter(function(t){return t.triggerCondition=="".concat(o+":"+e.metaId)});t.length&&n.subctrArr.push({ctrMetaId:e.metaId,tcArr:t})}))},operatorCtr:function(n,a){var i=this;(n.operateTarget?n.operateTarget.split(","):[]).forEach(function(t){var e,o=t.split(":"),t=null;(t=1<o.length?a.structControl.find(function(t){return t.metaId==o[1]}):t)&&("5"==n.operation?(i.$set(t,"show",1),-1<(null==(e=i.formData.notVaildateMetas)?void 0:e.indexOf(t.metaId))&&i.formData.notVaildateMetas.splice(i.formData.notVaildateMetas.indexOf(t.metaId),1)):"1"==n.operation?(i.$set(t,"show",0),(null==(e=i.formData.notVaildateMetas)?void 0:e.indexOf(t.metaId))<0&&i.formData.notVaildateMetas.push(t.metaId)):"7"==n.operation&&(a[t.metaId].hasOwnProperty("text")?i.$set(a,t.metaId,{text:"",value:""}):i.$set(a[t.metaId],"value","")))})},checkShow:function(n,t,a){var i=this;t.forEach(function(e){var t,o;"1"==e.operator?e.selectedValues.split(",").forEach(function(t){-1<n.value.split(",").indexOf(t)&&i.operatorCtr(e,a)}):"2"==e.operator&&(t=n.value.split(","),o=!0,t.forEach(function(t){-1<e.selectedValues.split(",").indexOf(t)&&(o=!1)}),o)&&i.operatorCtr(e,a)})},loadWatch:function(o){var n=this;n.topformMeta.propertyJoin&&0<n.topformMeta.propertyJoin.length&&(1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&n.subctrArr.forEach(function(t){n.checkShow(o[t.ctrMetaId],t.tcArr,o)}),n.$watch(function(){return o},function(e,t){b.log(e,t),n.subctrArr.forEach(function(t){n.checkShow(e[t.ctrMetaId],t.tcArr,o)})},{deep:!0}))},getTopHeight:function(){var t=0;return this.isShowAppHeader&&(t+=document.querySelector(".van-nav-bar__content").offsetHeight),(t+=document.querySelector(".van-tabs__wrap").offsetHeight)+"px"},getColSpan:function(t){return(null==(t=t.extra)?void 0:t.width)||u()(24/this.structControl.length)},getData:function(t,e){return this.formData.rows[t][e.metaId]},getSubAllFile:function(t,e){var o=this,n=dsf.util.loadSessionStore("loginToken"),a=(new Date).getTime(),i=[],r=e.extra;return r.file=[],this.formData.rows[t].attach&&this.formData.rows[t].attach[e.metaId]&&(r.file=this.formData.rows[t].attach[e.metaId].map(function(t){var e=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.id,"&moduleId=").concat(o.$route.params.moduleId,"&nodeId=").concat(o.topformMeta.parameters.nodeId,"&flowId=").concat(o.topformMeta.parameters.flowId,"&x-auth-token=").concat(n));return o.ifFile(t.fileName)||(e=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(o.$route.params.moduleId,"&fileName=").concat(t.fileName))),b.log(t),{id:t.id,title:t.fileName,type:0,attachType:r.attachType,size:dsf.util.filesizeTostr(Number(t.fileSize)),navtiveUrl:t.filePath,url:e,initUrl:"fn/file/download?infoId=".concat(t.infoId,"&fileId=").concat(t.id,"&fileName=").concat(t.fileName,"&nrType=").concat(t.type,"&moduleId=").concat(o.$route.params.moduleId,"&x-auth-token=").concat(n,"&fullfilename=").concat(a).concat(t.fileName),editUrl:dsf.url.getServerUrl("fn/mobileOffice/wordEdit?fileId=".concat(t.id,"&moduleId=").concat(o.$route.params.moduleId,"&nodeId=").concat(o.topformMeta.parameters.nodeId,"&flowId=").concat(o.topformMeta.parameters.flowId,"&x-auth-token=").concat(n)),infoId:t.infoId,moduleId:o.$route.params.moduleId,isHandwrite:r.isHandwrite,canEdit:r.canEdit,canDownLoad:t.canDownLoad,name:t.fileName,icon:"insert_drive_file"}})),i.push(r),this.deepCopy(i)},getSubRelationList:function(t,e){var o=this,n=[],a=e.extra;return a.canShow=1,a.document=[],null!=(e=this.formData.rows[t].relationFile)&&e["relationFile-".concat(a.relaValue)]&&(a.document=this.formData.rows[t].relationFile["relationFile-".concat(a.relaValue)].map(function(t){return{fileId:t.fileId,fileRelaId:a.fileRelaId,info_id:t.relaId,isShowRela:!0,itemsContents:t.relaBt,moduleId:t.relaModuleId,moduleName:t.relaModuleName,nodeId:"",pk:t.relaId,relaId:o.foreign}})),n.push(a),this.deepCopy(n)},ifFile:function(t){return!(t.includes(".png")||t.includes(".jpg")||t.includes(".mp4")||t.includes(".jpeg")||t.includes(".bmp")||t.includes(".gif")||t.includes(".mp4"))},deepCopy:function(t){return JSON.parse(d()(t))},"x-subform-add":function(){"1"==this.metaData.extra.mobileShowType?this.toNewSubform():this.addCard()},addCard:function(){var n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=this;return new(f())(function(o){dsf.http.get("fn/common/generateUUID?size=1").then(function(t){var t=t.data,e={};(e=a.SubFormPrimary?a.deepCopy(a.SubFormPrimary.defaultValue):e)[a.formId]={},e[a.formId].value=t.data.UUID,e[a.formId].foreign=a.foreign,e.A0032.value=a.formData.rows.length+1,e.action="Added",e.isOpen=!0,a.$set(e,"structControl",a.deepCopy(a.structControl)),a.formData.rows.push(e),a.loadWatch(e),a.$bus.emit("subFormAdd",{newData:e,subFormId:a.formId,index:a.formData.rows.length-1}),!1!==n&&a.$nextTick(function(){setTimeout(function(){a.$el.querySelector("#id".concat(a.formData.rows.length-1).concat(a.formId)).scrollIntoView({behavior:"smooth",block:"center"})},100)}),o(e)})})},deleteCard:function(t){var e=this;0<this.formData.rows.length&&("Added"==this.formData.rows[t].action?this.formData.rows.splice(t,1):"Updated"==this.formData.rows[t].action&&this.$dialog.confirm({title:"提示",message:"确定要删除吗？"}).then(function(){e.formData.rows[t].action="Deleted"}).catch(function(){}),this.$bus.emit("subFormDelete",{subFormIndex:t,subFormId:this.formId}))},addMultipleCard:function(t){var r=this;return new(f())(function(i){dsf.http.post("fn/common/generateUUID",{size:t,multiple:!0}).then(function(t){for(var e=t.data,o=[],n=0;n<e.data.UUID.length;n++){var a={};(a=r.SubFormPrimary?r.deepCopy(r.SubFormPrimary.defaultValue):a)[r.formId]={},a[r.formId].value=e.data.UUID[n],a[r.formId].foreign=r.foreign,a.A0032.value=r.formData.rows.length+1,a.action="Added",r.$set(a,"structControl",r.deepCopy(r.structControl)),r.formData.rows.push(a),o.push(a),r.$bus.emit("subFormAdd",{newData:a,subFormId:r.formId}),r.loadWatch(a)}i(o)})})},handleActionClick:function(t){this[t.actionName]?this[t.actionName](t.actionArgs):dsf.layer.toast("当前按钮未定义："+t.actionName,!1)},listSelect:function(t){t=this.replaceMainVal(t);t=JSON.parse(t.replace(/'/g,'"'));this.relatedKeyValue=t.relatedKeyValue||{},this.checkType=t.multiple?"checkBox":"radio",this.commonPopParam=t.listParams,this.commonPop=!0},commonPopChoose:function(o){this.commonPop=!1;var n,a=this;"{}"!=d()(this.relatedKeyValue)&&(n=function(o,n){m()(a.relatedKeyValue).forEach(function(t){var e={};a.relatedKeyValue[t].value&&(e.value=n[a.relatedKeyValue[t].value]),a.relatedKeyValue[t].text&&(e.text=n[a.relatedKeyValue[t].text]),a.$set(o,t,e)})},this.addMultipleCard(o.length).then(function(t){for(var e=0;e<t.length;e++)n(t[e],o[e].dataValue)})),this.$bus.emit("subFormSelect",{checkItems:o,subFormId:this.formId})},treeSelect:function(t){var e=this,t=JSON.parse(t.replace(/'/g,'"'));t.tabs.forEach(function(t){t.action=e.replaceMainVal(t.action)}),this.treePopParam=t,this.treePop=!0},getSelect:function(e){var o=this;return(0,r.Z)(l().mark(function t(){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o.treePop=!1,b.log(e),o.formData.rows.length,o.$bus.emit("subFormTreeSelect",{selectArr:e,subFormId:o.formId});case 4:case"end":return t.stop()}},t)}))()},replaceMainVal:function(o){var n=this,t=/\[(.+?)\]/g;return o.match(t)&&o.match(t).forEach(function(t){var e;-1<t.indexOf("[main:")&&(e=t.replace("[main:","").replace("]",""),o=o.replace(t,n.topformData.main[e].value))}),o},toggleOpen:function(t){t.isOpen?t.structControl.forEach(function(t,e){0<e&&(t.propertyShow=0)}):t.structControl.forEach(function(t,e){t.propertyShow=1}),t.isOpen=!t.isOpen},toNewSubform:function(){var o=this.SubFormPrimary.defaultValue.A0004.value;b.log(o),this.$bus.emit("saveFormBus",{metaData:this.metaData,callback:function(t){var e=d()({fid:t.formParams.pk});t.$route.params.pk||t.$router.replace({path:"/commonForm/".concat(t.moduleId,"/").concat(t.formParams.pk),query:t.$route.query}),t.$router.push({path:"/commonForm/".concat(o),query:{specialSaveObj:e,fid:t.formParams.pk}})}})},toSubform:function(t){var o=t.A0004.value,n=t[this.formId].value;b.log(o),this.$bus.emit("saveFormBus",{metaData:this.metaData,callback:function(t){var e=d()({fid:t.formParams.pk});t.$router.push({path:"/commonForm/".concat(o,"/").concat(n),query:{specialSaveObj:e,fid:t.formParams.pk}})}})},goodsSelect:function(t){b.log("commonPopParam",JSON.parse(t.replace(/'/g,'"'))),this.commonPopParam=JSON.parse(t.replace(/'/g,'"')),this.goodsPop=!0}}},D=(0,o(51900).Z)(y,function(){var a=this,i=a._self._c;return i("div",[a.formMeta?i("div",{ref:"subform",staticClass:"subform"},[i("div",{staticClass:"disfr ac jsb subTitle"},[i("div",[i("span",{staticClass:"left-icon"}),a._v(" "),i("span",{staticClass:"title",domProps:{innerHTML:a._s(a.formMeta.controls[0].label)}})]),a._v(" "),a.readonly?a._e():i("div",[1==a.buttons.length?i("i",{staticClass:"iconfont icontianjia",on:{click:function(t){return t.stopPropagation(),a.handleActionClick(a.buttons[0])}}}):1<a.buttons.length?i("van-popover",{attrs:{trigger:"click",placement:"bottom-end",actions:a.buttons},on:{select:a.popoverClick},scopedSlots:a._u([{key:"reference",fn:function(){return[i("i",{staticClass:"iconfont icongengduo3",on:{click:function(t){t.stopPropagation(),a.showPopover=!0}}})]},proxy:!0}],null,!1,1365402362),model:{value:a.showPopover,callback:function(t){a.showPopover=t},expression:"showPopover"}}):a._e()],1)]),a._v(" "),"card"==a.subFormStyle?a._l(a.formData.rows,function(o,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:"Deleted"!=o.action,expression:"cardItm.action != 'Deleted'"}],key:n,staticClass:"card",attrs:{id:"id"+n+a.formId}},[i("div",{staticClass:"card-btn"},["1"==a.metaData.extra.mobileShowType?i("span",{on:{click:function(t){return a.toSubform(o)}}},[a._v("查看")]):i("span",{on:{click:function(t){return a.toggleOpen(o)}}},[a._v(a._s(o.isOpen?"收起":"展开"))]),a._v(" "),a.isShowOperateColumn&&!a.readonly?i("span",{on:{click:function(t){return a.deleteCard(n)}}},[a._v("删除")]):a._e()]),a._v(" "),a._l(o.structControl,function(t,e){return i("van-row",{key:t.controlId,staticClass:"box flex"},[i("van-col",{staticStyle:{padding:"0"},attrs:{span:24}},[i("div",{class:{divider:a.isMobileForm&&e<o.structControl.length-1}},[t.show&&t.propertyShow&&"controlNestedForm"==t.controlType?i("form-layout",{ref:"nestedForm",refInFor:!0,attrs:{rowCteNum:1,lastControl:0<=e-1?a.structControl[e-1]:"",controlData:a.getData(n,t),subFormIndex:n,pformData:o,pformMeta:a.formMeta,topformData:a.topformData,topformMeta:a.topformMeta,metaData:t,formId:a.formId,isSubForm:!0,isMobileForm:a.isMobileForm}}):t.show&&t.propertyShow?i("form-layout",{attrs:{rowCteNum:1,lastControl:0<=e-1?a.structControl[e-1]:"",pformData:o,pformMeta:a.formMeta,controlData:a.getData(n,t),topformData:a.topformData,topformMeta:a.topformMeta,subFormIndex:n,metaData:t,formId:a.formId,isSubForm:!0,allFile:"controlFileUpload"==t.controlType?t.allFile:[],relationList:"controlFileRelation"==t.controlType?a.getSubRelationList(n,t):[],isMobileForm:a.isMobileForm}}):a._e()],1)])],1)})],2)}):"table"==a.subFormStyle?i("div",{staticClass:"card cardHorizontal"},[i("van-row",{staticClass:"cardRow rowTitle",attrs:{type:"flex",justify:"space-between"}},[a._l(a.structControl,function(t){return[t.show&&t.propertyShow?i("van-col",{staticClass:"titleCenter",class:[t.validator.required?"label-active":""],attrs:{span:a.getColSpan(t)}},[a._v("\n                        "+a._s(t.label)+"\n                    ")]):a._e()]})],2),a._v(" "),a._l(a.formData.rows,function(o,n){return i("van-row",{directives:[{name:"show",rawName:"v-show",value:"Deleted"!=o.action,expression:"cardItm.action != 'Deleted'"}],key:n,staticClass:"cardRow rowItem",attrs:{id:"id"+n+a.formId,type:"flex",justify:"space-between",align:"center"}},[a._l(o.structControl,function(t,e){return[t.show&&t.propertyShow?i("van-col",{attrs:{span:a.getColSpan(t)}},[a._v("\n                        "+a._s(t.visible)+"\n                        "),i("form-layout",{attrs:{rowCteNum:1,lastControl:0<=e-1?a.structControl[e-1]:"",subFormLayout:"textCenter",controlData:a.getData(n,t),pformData:o,pformMeta:a.formMeta,topformData:a.topformData,topformMeta:a.topformMeta,subFormIndex:n,metaData:t,formId:a.formId,isSubForm:!0,allFile:"controlFileUpload"==t.controlType?t.allFile:[],relationList:"controlFileRelation"==t.controlType?a.getSubRelationList(n,t):[]}})],1):a._e()]}),a._v(" "),a.isShowOperateColumn&&!a.readonly?i("debounce-click",[i("van-icon",{staticClass:"deleteIconRow",attrs:{name:"cross"},on:{click:function(t){return a.deleteCard(n)}}})],1):a._e()],2)})],2):a._e()],2):a._e(),a._v(" "),i("van-popup",{staticStyle:{height:"100%","background-color":"#f5f5f5"},attrs:{"get-container":"#app",position:"bottom"},model:{value:a.commonPop,callback:function(t){a.commonPop=t},expression:"commonPop"}},[a.commonPop?i("DefaultList",{attrs:{params:a.commonPopParam,"no-load-js":!0,"check-type-pop":a.checkType,checkable:!0,"oppset-top":"0px"},on:{cancelCheck:function(t){a.commonPop=!1},confirmCheck:a.commonPopChoose}}):a._e()],1),a._v(" "),i("van-popup",{style:{height:"100%"},attrs:{"get-container":"#app",position:"bottom"},model:{value:a.treePop,callback:function(t){a.treePop=t},expression:"treePop"}},[i("control-user-list",{attrs:{extra:a.treePopParam,selectType:a.treePopParam.selectType,topformMeta:a.topformMeta},on:{close:function(t){a.treePop=!1},getSelectUser:a.getSelect}})],1),a._v(" "),i("van-popup",{staticStyle:{height:"100%","background-color":"#f5f5f5"},attrs:{"get-container":"#app",position:"bottom"},model:{value:a.goodsPop,callback:function(t){a.goodsPop=t},expression:"goodsPop"}},[a.goodsPop?i("goodsList",{attrs:{params:a.commonPopParam},on:{close:function(t){a.goodsPop=!1}}}):a._e()],1)],1)},[],!1,null,"3584edf5",null).exports},87003:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return m}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(13682),l=o(77193),e=o(8450),c=o.n(e),e=o(43562),u=o.n(e),e=o(20629),d=o(25108);function f(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}var e={props:["formMeta","formData","formId","foreign"],data:function(){return{subForm:null,cardCount:1,container:null,subFormData:null,SubFormPrimary:null,readonly:!1,structControl:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach(function(t){(0,l.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):f(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}({},(0,e.rn)({isShowAppFooter:function(t){return t.isShowAppFooter},isShowAppHeader:function(t){return t.isShowAppHeader}})),components:{formLayoutCpyd:function(){return Promise.resolve().then(o.bind(o,5491))}},beforeCreate:function(){this.$options.components.formLayout=o(5491).default},mounted:function(){this.container=this.$refs.subform},created:function(){var o=this;this.subformShowType=dsf.config.commonForm.subformShowType||"block";["201125171531HhP41e8lrLw0T7kuFXK","201230170107FTM46tEGeG4rwLX9mDr"].includes(this.$route.params.moduleId)&&(this.readonly=!0),this.structControl=this.formMeta.controls.filter(function(t){return"controlSubFormPrimary"!=t.controlType}),this.SubFormPrimary=this.formMeta.controls.filter(function(t){return"controlSubFormPrimary"==t.controlType})[0],this.SubFormPrimary&&(this.SubFormPrimary.privilege&&(this.readonly=!this.SubFormPrimary.privilege.editable),this.structControl.forEach(function(t,e){"row"==o.subformShowType&&o.$set(t,"showLable",!1),o.SubFormPrimary.defaultValue[t.metaId]||(o.SubFormPrimary.defaultValue[t.metaId]={value:""})}))},methods:{getData:function(t,e){return this.formData.rows[t][e.metaId]},deepCopy:function(t){return JSON.parse(c()(t))},addCard:function(){var n=this;return dsf.http.get("fn/common/generateUUID?size=1").then(function(t){var o,t=t.data,e={};d.log(n.formMeta,n.formData.rows.length),n.formData.rows.length?(e=n.deepCopy(n.formData.rows[0]),o={},u()(e).forEach(function(e){"object"==(0,s.Z)(e[1])&&(o[e[0]]=e[1],u()(e[1]).forEach(function(t){o[e[0]][t[0]]=""}))}),d.log(o),e=o):n.SubFormPrimary&&(e=n.deepCopy(n.SubFormPrimary.defaultValue)),e[n.formId]={},e[n.formId].value=t.data.UUID,e[n.formId].foreign=n.foreign,d.log(e),e.action="Added",n.formData.rows[n.formData.rows.length]={},n.$set(n.formData.rows,n.formData.rows.length-1,e),d.log(n.formData),n.$nextTick(function(){n.$el.querySelector("#id".concat(n.formData.rows.length-1).concat(n.formId)).scrollIntoView({behavior:"smooth",block:"end"})})}),!1},deleteCard:function(e){var o=this;this.$dialog.confirm({title:"提示",message:"确定要删除吗？"}).then(function(){var t;0<o.formData.rows.length&&("Added"==(t=o.deepCopy(o.formData.rows))[e].action?t.splice(e,1):"Updated"==t[e].action&&(t[e].action="Deleted"),o.formData.rows=t)}).catch(function(){})},getColSpan:function(t){return"201221102131oCk7pVCHhyH3e1I2TQt"==t.metaId||"B0001"==t.metaId?"12":"201229101800AuyqpP4yjv7vbphegCh"==t.metaId?"7":"5"}}},m=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{ref:"subform",staticClass:"subform"},[n("van-sticky",{attrs:{"offset-top":o.dsf.util.getOffsetTop(),container:o.container}},[n("div",{staticClass:"disfr ac jsb subTitle"},[n("span",{staticStyle:{"font-weight":"600","font-size":"0.3rem"}},[o._v(o._s(o.formMeta.name))])])]),o._v(" "),o._l(o.formData.rows,function(t,e){return n("van-row",{key:e,staticClass:"card",attrs:{id:"id"+e+o.formId,type:"flex",justify:"space-between",align:"center"}},o._l(o.structControl,function(t){return n("van-col",{key:t.controlId,attrs:{span:o.getColSpan(t)}},[t.privilege&&t.privilege.visible&&"201229102037KPKpUHuJI0O7jVQSW53"!=t.metaId?n("form-layout-cpyd",{attrs:{controlData:o.getData(e,t),subFormIndex:e,metaData:t,isSubForm:!0}}):o._e()],1)}),1)})],2)},[],!1,null,"2e4e9eab",null).exports},18115:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(8450),n=o.n(e),e={name:"controlSwitcher",mixins:[o(13852).Z],model:{prop:"value",event:"change"},data:function(){return{checked:0<this.value.value,count:1,controlData:{disabled:!1,loading:!1,size:"24",activeColor:"",inactiveColor:""},enumData:[]}},computed:{},watch:{checked:function(t,e){dsf.config.commonForm.WangStyle&&this.changeFn(t)},"value.value":function(t,e){this.checked=0<this.value.value}},created:function(){var t;this.enumData=this.metaData.enumData,"{}"==n()(this.metaData.defaultValue)||this.value.value||((t=this.value).value=this.metaData.defaultValue.value,t.text=this.metaData.defaultValue.text,this.$emit("change",t))},methods:{changeFn:function(t){var e=-1,o=(this.enumData.filter(function(t){return"0"==t.value}).length&&(e=0),this.value);o.value=this.checked?1:e,this.$emit("change",o)}}},a=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"controlSwitcherBox flex ac"},[e.dsf.config.commonForm.WangStyle?t("div",{staticClass:"wangStyle"},[t("div",{staticClass:"van-field__control",on:{click:function(t){e.checked=!e.checked}}},[e.checked?t("img",{staticClass:"icon-arrow",attrs:{src:"static/images/arrow_up.gif",alt:""}}):t("img",{staticClass:"icon-arrow",attrs:{src:"static/images/arrow_down.gif",alt:""}})])]):t("van-switch",{attrs:{disabled:e.controlData.disabled,loading:e.controlData.loading,size:e.controlData.size,"active-color":e.controlData.activeColor,"inactive-color":e.controlData.inactiveColor},on:{change:e.changeFn},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)},[],!1,null,"1b19db24",null).exports},44491:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var n=o(5044),e=o(13852),a=o(25108),e={name:"controlTemplateCode",components:{commonTabs:function(){return Promise.resolve().then(o.bind(o,56229))}},mixins:[e.Z],data:function(){return{showPop:!1,controlData:{defaultValue:"查看/新建任务计划"},photo:"",checkItems:[],canView:!!this.$route.params.pk,messages:[],TemplabelShow:!0}},props:{formMeta:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}}},computed:{getTitle:function(){return this.value.value&&""!=this.value.value?this.value.value:this.controlData.defaultValue}},created:function(){var t=this.metaData.controlId;this.formData.main[t]&&(this.formData.main[t].value=this.checkItems)},mounted:function(){var o=this;"showSignPhoto"===this.metaData.extra.templateCode?dsf.http.post("fn/mobile/user/singleton",{userId:this.formData.main.A0010.value}).then(function(t){var e;200==t.data.code&&(e=dsf.util.loadSessionStore("loginToken"),o.photo=dsf.url.getServerUrl(t.data.data.signPhoto)+"&x-auth-token=".concat(e))}):"sqsMessageBar"==this.metaData.extra.templateCode&&this.getMessage()},methods:{getMessage:function(){var e=this,o=this;dsf.http.post("fn/yellowstriper/getYellow?pk=".concat(this.formMeta.parameters.pk)).then(function(t){t=t.data;t.data?(e.messages=t.data,e.messages.forEach(function(t){t.CREATE_TIME=t.CREATE_TIME.slice(0,16)})):dsf.config.commonForm.TemplabelShow&&(o.TemplabelShow=!1)})},cellClick:function(){},confirmCheck:function(t){var e;a.log("checkItems",t);this.showPop=!1,(e=this.checkItems).push.apply(e,(0,n.Z)(t))},toDtail:function(t){this.canView&&("220803111621B521Wfaj0JHZLp0lbpU"==t.dataValue.A0004?this.$router.push({name:"elecDetail",query:{id:t.dataValue.A0001}}):this.$router.push({name:"commonForm",params:{moduleId:t.dataValue.A0004,pk:t.dataValue.A0001},query:{listId:"ViewList",method:"open"}}))},delRelation:function(t,e){var o=this;dsf.layer.confirm({message:"是否确认不再关联该文件？",confirmButtonText:"确认"},function(){return o.checkItems.splice(e,1)})}},watch:{"formData.main":{handler:function(t,e){var o=this.metaData.controlId;t[o]&&(this.checkItems=t[o].value)},deep:!0}}},i=(0,o(51900).Z)(e,function(){var n=this,a=n._self._c;return a("div",{staticClass:"controlTemplateCode"},["showSignPhoto"==n.metaData.extra.templateCode?a("van-image",{staticClass:"photo",attrs:{src:n.photo,width:"150px",height:"50px"}}):"showRelevantDocuments"==n.metaData.extra.templateCode?a("div",[a("div",{staticClass:"fileHead"},[a("span",[n._v("相关文件")]),n._v(" "),n.metaData.privilege.editable?a("van-icon",{staticClass:"fileIcon",attrs:{size:"0.48rem",name:"add-o"},on:{click:function(t){n.showPop=!0}}}):n._e()],1),n._v(" "),n._l(n.checkItems,function(e,o){return 0<n.checkItems.length?a("div",{key:o,staticClass:"fileList",on:{click:function(t){return n.toDtail(e)}}},[a("div",{staticClass:"fileBody flex1"},[a("div",{staticClass:"fileModule"},[a("div",{staticClass:"fileTitle"},[n._v(n._s(e.dataValue.B0001))]),n._v(" "),a("div",{staticClass:"fileBtn"},[n.canView?a("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.toDtail(e)}}},[n._v("查看")]):n._e(),n._v(" "),n.metaData.privilege.editable?a("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.delRelation(e,o)}}},[n._v("取消关联\n            ")]):n._e()])])])]):n._e()})],2):"sqsMessageBar"==n.metaData.extra.templateCode?a("div",{staticClass:"sqsMessageBar"},[a("span",{directives:[{name:"show",rawName:"v-show",value:n.TemplabelShow,expression:"TemplabelShow"}]},[n._v(n._s(n.metaData.label))]),n._v(" "),n._l(n.messages,function(t,e){return a("div",{key:e,staticClass:"messages"},[a("div",{staticClass:"messageBt"},[n._v(n._s(t.BT))]),n._v(" "),a("div",{staticClass:"messageUser"},[a("span",[n._v(n._s(t.CREATE_UNAME))]),n._v(" "),a("span",[n._v(n._s(t.CREATE_TIME))])])])})],2):a("van-cell",{staticClass:"titlespan",attrs:{title:n.getTitle,"is-link":""},on:{click:n.cellClick}}),n._v(" "),a("van-popup",{staticStyle:{height:"100%",background:"#f5f5f5"},attrs:{"get-container":"#app",position:"bottom"},model:{value:n.showPop,callback:function(t){n.showPop=t},expression:"showPop"}},[n._e(),n._v(" "),a("common-tabs",{attrs:{tabKey:"XTBG",params:{},"check-type":"checkBox",checkable:!0,"oppset-top":"0.88rem","tab-oppset-top":"0px"},on:{cancelCheck:function(t){n.showPop=!1},confirmCheck:n.confirmCheck}})],1)],1)},[],!1,null,"377f7f4a",null).exports},91298:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(70690);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlTextBox",components:{enclosure:o(58930).default},mixins:[e.Z],model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null},formId:{type:String,default:null},formMeta:{type:Object,default:function(){return{}}},allFile:{type:Array,default:function(){return[]}}},data:function(){return{bindValue:this.value.value,controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},reg:[],ifSuccess:!1,isShowEnclosure:!1}},computed:{enclosureAble:function(){return dsf.config.commonForm.canClickBigTitle&&"B0001"==this.metaData.metaId},fileTitle:function(){var t;return(null==(t=this.allFile[0])||null==(t=t.file[0])?void 0:t.title)||""}},watch:{value:function(t){this.bindValue=this.value.value}},created:function(){var t,e;"{}"==l()(this.metaData.defaultValue)||this.value.value||(t=this.metaData.defaultValue,(e=this.value).value=t.value,this.$emit("input",e))},methods:{readonlyStyle:function(){var t={},e=dsf.config.commonForm.textlayout||"right";return t.color=0<this.metaData.extra.makeACall?"#0086D9 !important":this.metaData.extra.color?"".concat(this.metaData.extra.color," !important"):"unset",t.textAlign=this.metaData.extra.eatraClass?this.metaData.extra.eatraClass.includes("textCenter")?"center":this.metaData.extra.eatraClass:e,t.fontSize=this.metaData.extra.fontSize?"".concat(this.metaData.extra.fontSize," !important"):"unset",t.fontWeight=this.metaData.extra.fontWeight?"".concat(this.metaData.extra.fontWeight," !important"):"unset",t},checkIsPhone:function(t){return!dsf.config.commonForm.isHiddenPhoneButton&&(11==t.length||12==t.length||13==t.length||14==t.length)&&new RegExp(c.Z.mobile.regex).test(t)},smsTo:function(t){window.location.href="sms:".concat(t)},phoneTo:function(t){window.location.href="tel:".concat(t)},inpFn:function(t){this.$bus.emit("inpBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId})),this.controlData.errorMessage=""},toFocus:function(t){this.$emit("focus",this.value),this.$bus.emit("focusBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))},toClear:function(){this.$emit("clear",this.value)},toClick:function(){this.$emit("clear",this.value),this.$bus.emit("clickBus",d(d(d({},this),this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))},toBlur:function(){this.$bus.emit("blurBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId})),this.controlData.errorMessage=""},validatorFn:function(t){(t.length<this.controlData.begin||t.length>this.controlData.end)&&(this.bindValue="",this.controlData.errorMessage=this.controlData.rules[1].message)},showEnclosure:function(){this.enclosureAble&&(this.isShowEnclosure=!0)}}},f=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return!e.readonly||e.readonly&&""!==e.value.value?t("div",{staticClass:"controlTextBox"},[e.readonly?t("div",{staticClass:"van-cell van-field",on:{click:e.showEnclosure}},[t("span",{staticClass:"van-field__control",style:e.readonlyStyle(),on:{click:function(t){t.stopPropagation(),0<e.metaData.extra.makeACall&&e.phoneTo(e.value.value)}}},[e.enclosureAble&&0<e.allFile.length&&0<e.allFile[0].file.length?t("img",{staticStyle:{width:"0.3rem",display:"inline-block","vertical-align":"sub",height:"auto",margin:"0"},attrs:{src:e.dsf.util.getFileTypeIcon(e.allFile[0].file[0].title),alt:""}}):e._e(),e._v("\n      "+e._s(e.value.value)+"\n    ")])]):["stepper"==e.metaData.extra.eatraClass?t("van-stepper",{attrs:{min:0,"default-value":0},on:{change:e.inpFn},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}}):t("van-field",{staticClass:"controlTextBox",attrs:{type:e.metaData.extra.eatraClass&&-1<e.metaData.extra.eatraClass.indexOf("textarea")?"textarea":"text",autosize:e.metaData.extra.eatraClass&&-1<e.metaData.extra.eatraClass.indexOf("textarea"),center:"",rows:"1",name:e.metaData&&e.metaData.metaId?e.metaData.metaId:"",border:e.controlData.border,disabled:e.controlData.disabled,clearable:e.controlData.clearable,"error-message":e.controlData.errorMessage,placeholder:e.controlData.placeholder,"input-align":e.controlData.inputAlign,"left-icon":e.controlData.leftIcon,"right-icon":e.controlData.rightIcon,rules:e.controlData.rules,formatter:e.controlData.formatter,readonly:e.controlData.readonly},on:{input:e.inpFn,focus:function(t){e.intoView(t),e.toFocus("focus",t)},clear:function(t){return e.toClear("clear",t)},click:function(t){return e.toClick("click",t)},blur:function(t){return e.toBlur("blur",t)}},scopedSlots:e._u([{key:"label",fn:function(){},proxy:!0},{key:"button",fn:function(){return[e._t("button")]},proxy:!0}],null,!0),model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],e._v(" "),e.enclosureAble?t("van-popup",{staticClass:"flex dc",staticStyle:{height:"100vh"},attrs:{"close-on-click-overlay":!1,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:e.isShowEnclosure,callback:function(t){e.isShowEnclosure=t},expression:"isShowEnclosure"}},[t("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":"",title:e.fileTitle},on:{"click-left":function(t){e.isShowEnclosure=!1}}}),e._v(" "),t("div",{staticStyle:{flex:"1",overflow:"hidden"}},[t("enclosure",{ref:"enclosure",attrs:{fileData:{info_id:e.formMeta.parameters?e.formMeta.parameters.pk:"",moduleId:e.formMeta.parameters?e.formMeta.parameters.moduleId:"",nodeId:e.formMeta.parameters?e.formMeta.parameters.nodeId:"",nodeName:e.formMeta.parameters?e.formMeta.parameters.nodeName:"",flowId:e.formMeta.parameters?e.formMeta.parameters.flowId:"",pId:e.formMeta.parameters?e.formMeta.parameters.pId:"",pnId:e.formMeta.parameters?e.formMeta.parameters.pnId:"",uploadAttach:e.formMeta.parameters?e.formMeta.parameters.uploadAttach:""},allFile:e.allFile,formMeta:e.formMeta}})],1)],1):e._e()],2):e._e()},[],!1,null,"41ed4869",null).exports},58448:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return f}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(8450),l=o.n(e),e=o(13852),c=o(25108);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"controlTextarea",mixins:[e.Z],props:{subFormIndex:{type:Number,default:null},formId:{type:String,default:null}},data:function(){return{bindValue:"",controlData:{rules:[],maxlength:null,showWordLimit:!0,placeholder:""},readonly:!1,expandAble:!1,isExpand:!0,showOneRow:!0,lineHeight:0,isOpinionTemplate:!1,tags:[],opinionShowmore:!1}},methods:{inpFn:function(t){this.$bus.emit("textareaInpBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))},toFocus:function(t){this.$bus.emit("textareaFocusBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))},toBlur:function(){this.$bus.emit("textareaBlurBus",d(d({},this.value),{},{metaData:this.metaData,subFormIndex:this.subFormIndex,subFormId:this.formId}))},getAdvice:function(){var e=this;dsf.http.get("fn/mobileUsedOpinion/find").then(function(t){e.tags=t.data.rows})},inputContent:function(t){this.$bus.emit("textareaTemp",{template:t,metaData:this.metaData})},showMore:function(){this.opinionShowmore=!this.opinionShowmore}},watch:{"metaData.propertyShow":{immediate:!0,handler:function(t,e){var o=this;t&&this.$nextTick(function(){var t;!1!==dsf.config.commonForm.enableControlTextareaExpand&&(null==(t=o.$refs.controlTextarea)?void 0:t.offsetHeight)>o.lineHeight*(o.metaData.extra.defaultRow||3)&&(o.isExpand=!1,o.expandAble=!0)})}},"metaData.showOpinionTem":{immediate:!0,deep:!0,handler:function(t,e){t&&(this.isOpinionTemplate=!0,this.getAdvice())}}},created:function(){c.log(this.value.value),"{}"==l()(this.metaData.defaultValue)||this.value.value||(this.value.value=this.metaData.defaultValue.value)},mounted:function(){var t=this.$refs.oneRow;this.lineHeight=t.offsetHeight,this.showOneRow=!1}},f=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlTextarea"},[!o.readonly&&o.isOpinionTemplate?n("div",{staticClass:"opinion-temp"},[n("div",{class:[o.opinionShowmore?"_file_log_open":"_file_log"]},o._l(o.tags,function(e,t){return n("van-tag",{key:t,class:["_file_tags","elps"],attrs:{size:"medium",type:"primary"},on:{click:function(t){return o.inputContent(e)}}},[o._v(o._s(e.context))])}),1),o._v(" "),n("div",{staticClass:"setting",on:{click:o.showMore}},[o._v("\n      "+o._s(o.opinionShowmore?"收起":"展开")+"\n    ")])]):o._e(),o._v(" "),o.readonly?n("div",{ref:"controlTextarea",staticClass:"van-cell van-field readonlyBox"},[n("span",{class:["van-field__control",{isEllipsis:!o.isExpand}],domProps:{innerHTML:o._s(o.value.value)}}),o._v(" "),o.expandAble?n("span",{class:["expand","van-field__control"],staticStyle:{color:"var(--normal) !important"},on:{click:function(t){o.isExpand=!o.isExpand}}},[o._v(o._s(o.isExpand?"收起":"... 展开"))]):o._e()]):n("van-field",{class:{textareaBox:!o.readonly},style:o.metaData.autosizeStyle,attrs:{rows:o.readonly?1:o.metaData.extra.defaultRow||3,autosize:"",type:"textarea",readonly:o.readonly,placeholder:o.controlData.placeholder,maxlength:o.controlData.maxlength},on:{input:o.inpFn,focus:o.toFocus,blur:o.toBlur},model:{value:o.value.value,callback:function(t){o.$set(o.value,"value",t)},expression:"value.value"}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.showOneRow,expression:"showOneRow"}],ref:"oneRow",staticClass:"van-cell van-field readonlyBox"},[o._v("\n    单行\n  ")]),o._v(" "),n("van-field",{staticClass:"dreamInput",attrs:{type:"textarea",rows:"1",autosize:"",rules:o.controlData.rules,maxlength:o.controlData.maxlength,"show-word-limit":o.controlData.showWordLimit,readonly:o.readonly,placeholder:o.controlData.placeholder,name:o.metaData&&o.metaData.metaId?o.metaData.metaId:""},model:{value:o.value.value,callback:function(t){o.$set(o.value,"value",t)},expression:"value.value"}})],1)},[],!1,null,"d516e8ce",null).exports},65639:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"controlTitle",mixins:[o(13852).Z],data:function(){return{htmlTxt:"",controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1}}},computed:{getTitle:function(){return this.metaData.defaultValue.value.replace("$title$","")}},created:function(){},mounted:function(){},methods:{}},n=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",{staticClass:"controlTextBox"},[t("div",{staticClass:"title",domProps:{innerHTML:this._s(this.getTitle)}})])},[],!1,null,"73d049b2",null).exports},6838:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(43882),n=o(25108),e={name:"controlUserByData",props:{controlData:{type:Object,default:[]},pageTitle:{type:String,default:null}},components:{controlUserTree:e.default},data:function(){return{tab:0,tabsLoad:[],multiple:!1,allCount:0,searchValue:"",tabs:[],show:!1,type:0,navBarSticky:!1,selectArr:[],showSearch:!1,tabsOffsetTop:0,sendMode:""}},created:function(){var t;n.log(this.controlData),this.searchValue="",this.tabs=this.controlData.tabs,this.sendMode=(null==(t=this.controlData.nextNodeSendModeList[0])?void 0:t.id)||""},mounted:function(){this.$parent.$el.onscroll=this.handleScroll;var t=document.documentElement.style.fontSize.split("px")[0];this.$refs.search&&this.$refs.search.offsetHeight;this.tabsOffsetTop=.92*t},watch:{},computed:{title:function(){return this.pageTitle},selectObj:function(){return""},btnDisable:function(){return 0==this.selectArr.length}},methods:{handleScroll:function(){0<this.$parent.$el.scrollTop?this.navBarSticky=!0:this.navBarSticky=!1},close:function(t){this.show=t},showCheckUsers:function(){this.show=!0},onSearch:function(t){this.showSearch=!0},onSearchClose:function(){n.log("关闭人员检索层"),this.showSearch=!1},onClick:function(t,e){},back:function(){this.$emit("closeUser",!1)},addPerson:function(){this.show=!1,this.showSearch=!1,n.log("最终选择=====>",this.selectArr),this.$emit("getSelectUser",this.selectArr,this.sendMode),this.$emit("closeUser",!1)},getSelect:function(o){var n=this,a=!1;n.selectArr.forEach(function(t,e){t.id==o.id&&(a=!0,o.checked||n.selectArr.splice(e,1))}),a||n.selectArr.push(o)}}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"dsf-select-person"},[n("van-nav-bar",{class:{navBarSticky:o.navBarSticky},attrs:{title:o.title,"left-arrow":""},on:{"click-left":o.back},scopedSlots:o._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-left"}}),n("span",[o._v("返回")])]},proxy:!0}])}),o._v(" "),n("div",{staticClass:"tabs"},[n("van-tabs",{attrs:{animated:"",sticky:"","offset-top":o.dsf.util.getOffsetTop(o.tabsOffsetTop)},on:{click:o.onClick},model:{value:o.tab,callback:function(t){o.tab=t},expression:"tab"}},o._l(o.tabs,function(t,e){return n("van-tab",{key:e,attrs:{title:t.name,name:t.name}},[n("div",[t.children.length?n("control-user-tree",{ref:t.name,refInFor:!0,staticClass:"_add_tree",attrs:{personSelectData:t.children,title:o.title,params:t},on:{select:o.getSelect}}):n("commonempty",{attrs:{description:"暂无人员"}})],1)])}),1)],1),o._v(" "),n("div",{staticClass:"bottom"},["人员选择"==o.pageTitle?n("van-radio-group",{attrs:{direction:"horizontal"},model:{value:o.sendMode,callback:function(t){o.sendMode=t},expression:"sendMode"}},o._l(o.controlData.nextNodeSendModeList,function(t){return n("van-radio",{key:t.id,attrs:{name:t.id}},[o._v(o._s(t.name))])}),1):o._e(),o._v(" "),n("van-button",{staticClass:"tree_r",attrs:{type:"info",size:"middle"},on:{click:o.addPerson}},[o._v("确 定")])],1)],1)},[],!1,null,"691ccc5c",null).exports},49658:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var n=(0,o(51900).Z)({},function(){return(0,this._self._c)("div")},[],!1,null,null,null).exports},43882:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var i=o(5044),n=o(25108),e={name:"addTree",props:["personSelectData","params","title"],data:function(){return{isHidden:!1,selectIds:[],selectArr:[],type:0}},created:function(){this.isHidden=void 0,"部门选择"==this.title&&(this.type=1),n.log(this.personSelectData);var e=this;this.personSelectData.forEach(function(t){e.setChecked(t)})},mounted:function(){},destroyed:function(){},methods:{setChecked:function(t){var e=this;t.checked=!1,t.children&&t.children.forEach(function(t){e.setChecked(t)})},convertUser:function(t,o){var n=[];return t.forEach(function(t,e){n.push({id:t.userId,itemIndex:e,name:t.userName,isopen:null,pid:t.orgId,showName:t.userName,type:t.type,deep:o,childrenCount:0})}),n},convertDept:function(t,o){var n=this,a=[];return t.forEach(function(t,e){e={id:t.orgId,itemIndex:e,name:t.orgName,isopen:null,pid:t.fid,showName:t.orgName,type:3,deep:o,children:t.orgUsers.length?n.convertUser(t.orgUsers,o++):[]};t.opinionTagTreeEntityUserEntities.length&&(e.children=[].concat((0,i.Z)(e.children),(0,i.Z)(n.convertDept(t.opinionTagTreeEntityUserEntities)))),e.childrenCount=e.children.length,a.push(e)}),a},convertDept2:function(t,o){var n=this,a=[];return t.forEach(function(t,e){e={id:t.orgId,itemIndex:e,name:t.orgName,isopen:null,pid:t.fid,showName:t.orgName,type:3,deep:o,children:t.leafList.length?n.convertDept2(t.leafList,o++):[]};e.childrenCount=e.children.length,a.push(e)}),a},getChild:function(o){var n=this;o.isopen=!o.isopen,0<o.childrenCount||("部门选择"==this.title?dsf.http.get(this.params.action.split("?")[0]+"?orgId="+o.id).then(function(t){200==t.data.code&&(t=t.data.data,t=n.convertDept2(t.leafList,o.deep+1),o.children=t,o.childrenCount=t.length)}):"人员选择"==this.title&&dsf.http.get(this.params.action.split("?")[0]+"?orgId="+o.id).then(function(t){var e;200==t.data.code&&(t=t.data.data,e=n.convertUser(t.orgUsers,o.deep+1),t.opinionTagTreeEntityUserEntities.length&&(e=[].concat((0,i.Z)(e),(0,i.Z)(n.convertDept(t.opinionTagTreeEntityUserEntities,o.deep+1)))),o.children=e,o.childrenCount=e.length)}))},selectAll:function(t){this.$emit("select",t)},getStyle:function(t){return{"padding-left":15*t+"px","box-sizing":"border-box"}},userClick:function(t){this.setSelectUser(t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},setSelectUser:function(t,e){this.$emit("select",t),this.$forceUpdate()}}},a=(0,o(51900).Z)(e,function(){var n=this,a=n._self._c;return a("div",{staticClass:"dsf-tree",staticStyle:{width:"100%",height:"100%"}},n._l(n.personSelectData,function(o,t){return a("div",{key:"index1"+t,staticStyle:{"overflow-y":"hidden","overflow-x":"auto"}},[a("div",{staticClass:"flex-box tree_line"},[4==o.type?a("div",{staticClass:"person",style:n.getStyle(o.deep)},[a("div",{staticClass:"flex-box person_child"},[a("van-checkbox",{staticClass:"child_check",attrs:{"icon-size":"0.32rem"},on:{click:function(t){return n.userClick(o)}},model:{value:o.checked,callback:function(t){n.$set(o,"checked",t)},expression:"item.checked"}},[a("div",{staticClass:"user-logo"},[a("i",{staticClass:"icon iconfont iconyonghu"})]),n._v(" "),a("div",{staticClass:"user-name"},[n._v(n._s(o.showName))])])],1)]):a("div",{staticClass:"tree_tit",style:n.getStyle(o.deep)},[a("van-checkbox",{ref:"check",refInFor:!0,staticStyle:{flex:"1"},style:n.getStyle(o.deep),attrs:{"icon-size":"18px"},on:{click:function(t){return n.userClick(o)}},model:{value:o.checked,callback:function(t){n.$set(o,"checked",t)},expression:"item.checked"}},[a("div",{staticClass:"tree_tit w_normal"},[n._v("\n                        "+n._s(o.showName||o.name)+"\n                    ")])])],1),n._v(" "),3==o.type?a("div",{staticClass:"isShowChiled",on:{click:function(t){return n.getChild(o)}}},[o.isopen?a("van-icon",{attrs:{name:"arrow-up"}}):a("van-icon",{attrs:{name:"arrow-down"}}),n._v(" "),a("span",{staticClass:"r_span"},[n._v(n._s(o.isopen?"收起":"展开"))]),n._v(" "),a("span",{staticClass:"r_line"})],1):n._e()]),n._v(" "),n._l(o.children,function(e,t){return a("div",{key:"index2"+t,style:{display:o.isopen?"block":"none"}},[1==e.type?a("div",{staticClass:"person",style:n.getStyle(o.deep+1)},[a("div",{staticClass:"flex-box person_child"},[a("van-checkbox",{staticClass:"child_check",attrs:{"icon-size":"0.32rem"},on:{click:function(t){return n.userClick(e)}},model:{value:e.checked,callback:function(t){n.$set(e,"checked",t)},expression:"cell.checked"}},[a("div",{staticClass:"user-logo"},[a("i",{staticClass:"icon iconfont iconyonghu"})]),n._v(" "),a("div",{staticClass:"user-name"},[n._v(n._s(e.showName))])])],1)]):a("div",[a("add-tree",{attrs:{personSelectData:[e],title:n.title,params:n.params},on:{select:n.selectAll}})],1)])})],2)}),0)},[],!1,null,"292cfc94",null).exports},98869:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={mixins:[o(13852).Z],props:["parameters","formMeta"],data:function(){return{opinion:[],controlData:{}}},created:function(){this.initData()},methods:{initData:function(){var e=this,t={pk:this.parameters.pk,moduleId:this.parameters.moduleId,showNode:this.metaData.extra.showNode,opinionFilter:this.metaData.extra.opinionFilter,opinonSource:this.metaData.extra.opinonSource,orderType:this.metaData.extra.orderType,moduleIds:this.metaData.extra.moduleIds};dsf.http.post("fn/convertOpinion/convertOpinionView",t).then(function(t){t.data.type="success",e.opinion=t.data.data})},isShowType:function(t,e){return 0==e?t.nodeName:t.nodeName&&t.nodeName!=this.opinion[e-1].nodeName}}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlconvertopinionview"},o._l(o.opinion,function(e,t){return n("div",{key:t,staticClass:"opinionBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.opinionContent,expression:"item.opinionContent"}],staticClass:"opinionText",domProps:{innerHTML:o._s(e.opinionContent)}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.handwritePic,expression:"item.handwritePic"}],staticClass:"opinionText opinionImg",on:{click:function(t){return o.priviewOpinionImg(e.handwritePic)}}},[n("img",{style:{width:o.dsf.config.commonFlow.opinionImgWidth||"50%"},attrs:{src:e.handwritePic,alt:""}})]),o._v(" "),e.opinionFiles&&2<e.opinionFiles.length?n("div",{staticClass:"attachWrap"},o._l(e.opinionFiles,function(e,t){return n("div",{staticClass:"attach",on:{click:function(t){return o.priview(e)}}},[n("div",{staticClass:"title"},[o._v(o._s(e.fileName))]),o._v(" "),n("div",{staticClass:"icon elps"},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName),alt:""}}),n("span",[o._v(o._s(o.dsf.util.filesizeTostr(e.fileSize)))])])])}),0):o._e(),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.rDateTimeShow,expression:"item.rDateTimeShow"}],staticClass:"opinionTime tr"},[e.signPhoto&&!o.dsf.config.commonForm.hideOpinionSignPhoto?n("img",{attrs:{src:o.dsf.url.getWebPath(e.signPhoto),alt:""}}):n("i",[o._v(o._s(e.userName)+" ")]),o._v("\n      "+o._s(e.rDateTimeShow)+"\n    ")])])}),0)},[],!1,null,"1484ae2e",null).exports},8260:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(13852),n=o(25108),e={name:"extraPageNotInitView",mixins:[e.Z],props:["parameters"],components:{commonForm:function(){return Promise.resolve().then(o.bind(o,32444))}},data:function(){return{controlData:{},showForm:!1,relaForm:{}}},computed:{relationList:function(){var t,e=[];return 0<(null==(t=this.metaData.extra)||null==(t=t.extraPageList)?void 0:t.length)&&this.metaData.extra.extraPageList.forEach(function(t){t.relationList&&0<t.relationList.length&&(e=e.concat(t.relationList))}),e}},mounted:function(){n.log(this.metaData)},methods:{goForm:function(t){this.showForm=!0,this.relaForm={moduleId:t.relaModuleId,pk:t.relaId,relaBt:t.relaBt,params:{relaId:t.relaId,isShowRela:!0}}}}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",[0<o.relationList.length?n("div",{staticClass:"fileBody"},o._l(o.relationList,function(e,t){return n("div",{key:t,staticClass:"fileList",on:{click:function(t){return o.goForm(e)}}},[n("div",{staticClass:"fileBody1 flex1"},[n("div",{staticClass:"fileTitle flex ac"},[n("img",{attrs:{src:"static/images/platform/relation.png",alt:""}}),o._v(" "),n("span",{staticClass:"ellipsis",staticStyle:{flex:"1"}},[o._v(o._s(e.relaBt))])])])])}),0):o._e(),o._v(" "),n("van-popup",{style:{height:"100%"},attrs:{position:"bottom","get-container":"#app"},model:{value:o.showForm,callback:function(t){o.showForm=t},expression:"showForm"}},[o.showForm?n("van-nav-bar",{attrs:{title:o.relaForm.relaBt},on:{"click-left":function(t){o.showForm=!1}},scopedSlots:o._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-left"}}),n("span",[o._v("返回")])]},proxy:!0}],null,!1,2489604797)}):o._e(),o._v(" "),o.showForm?n("common-form",{attrs:{_moduleId:o.relaForm.moduleId,_pk:o.relaForm.pk,_params:o.relaForm.params||{},isPop:!0}}):o._e()],1)],1)},[],!1,null,"8d2ea7c4",null).exports},62562:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return s}});var n=o(77193),e=o(8450),a=o.n(e),e=o(13852),i=o(59146),r=o(25108),e={name:"controlTextBox",mixins:[e.Z],components:{controlUser:i.default,draggable:function(){return o.e(9980).then(o.t.bind(o,82021,23))}},model:{prop:"value",event:"input"},props:{formMeta:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},subFormIndex:{type:Number,default:null}},data:function(){return{bindValue:this.value.value,controlData:{begin:0,end:10,defaultValue:"编号",inputType:null,clearable:!0,leftIcon:"",rightIcon:"",inputAlign:"right",errorMessage:"",rules:[],placeholder:"",maxlength:"",readonly:!1},reg:[],ifSuccess:!1,tags:[],showWrite:!1,formParameters:null,lineWidth:6,lineColor:"#000000",bgColor:"white",isCrop:!1,imgUrl:"",flowinfo:{},flowKey:"",pk:this.$route.params.pk,shuiyin_div:null,showMore:!1,handleTipCode:[],handleNextNodeReadDel:0,radio:"0",isShowReadDel:!0,readDel:{name:"阅后即焚",checked:!1},isShowControlUser:!1,selectUser:{value:""},userMetaData:{controlId:"DyOe8jLTFlV6l8gp",controlType:"controlUser",defaultValue:{},enumData:[],extra:{multiple:!0,showLabel:"true",srcControl:"controlUser",srcControlClass:"ControlUser",srcControlName:"oa.controluser",tabs:[]},label:"特定人员",metaId:"",placeholder:"请选择",privilege:{visible:!0,editable:!0},restrict:{},showLabel:!0,showLable:!0,validator:{}},showIdeal:!1,newTagValue:""}},computed:{tempTags:function(){return this.showMore?this.tags:this.tags.slice(0,2)}},watch:{value:function(t){this.bindValue=this.value.value},selectUser:{deep:!0,immediate:!0,handler:function(t,e){e&&this.inpFn()}},readDel:{deep:!0,immediate:!0,handler:function(t,e){e&&this.inpFn()}}},created:function(){var t=this,e=(this.readonly=!this.metaData.privilege.editable,this.handleTipCode=this.metaData.extra.handleTipCode,this.handleNextNodeReadDel=this.metaData.extra.handleNextNodeReadDel,this.handleNextNodeReadDel&&(this.readDel.checked=!0),this.userMetaData.extra.tabs=this.metaData.extra.rangeTab,this.userMetaData.extra.multiple=this.metaData.extra.rangeMultiple,this.getAdvice(),dsf.util.loadSessionStore("user"));this.$nextTick(function(){t.formParameters=t.findForm(t).formMeta.parameters,t.pk?(t.flowKey="flow-".concat(t.pk,"-").concat(t.formParameters.pId,"-").concat(t.formParameters.pnId),t.formData.flowinfo?t.flowinfo=t.formData.flowinfo:t.flowinfo=(0,n.Z)({},t.flowKey,{id:t.formParameters.pnId,fid:t.formParameters.pnId,infoId:t.pk,pid:t.formParameters.pId,pnid:t.formParameters.pnId,nodeId:t.formParameters.nodeId,wfId:t.formParameters.flowId,opinionContent:"",handwritePic:"",handwriteThumb:"",nodeName:t.formParameters.nodeName,isSign:"0",signName:"",signTime:"",opinionUsers:"",opinionUsersText:"",duserId:e.user_id,duserName:e.name,userId:e.user_id,userName:e.name,opinionFiles:[]})):(t.flowKey="flow-".concat(t.formParameters.pk,"-0-").concat(t.formParameters.pk),t.formData.flowinfo?t.flowinfo=t.formData.flowinfo:t.flowinfo=(0,n.Z)({},t.flowKey,{id:t.formParameters.pk,fid:0,infoId:t.formParameters.pk,pid:0,pnid:t.formParameters.pk,nodeId:t.formParameters.nodeId,wfId:t.formParameters.flowId,opinionContent:"",handwritePic:"",handwriteThumb:"",nodeName:t.formParameters.nodeName,isSign:"0",signName:"",signTime:"",opinionUsers:"",opinionUsersText:"",duserId:e.user_id,duserName:e.name,userId:e.user_id,userName:e.name,opinionFiles:[]})),t.inpFn()})},methods:{checkRange:function(t){this.isShowReadDel=!1,this.isShowControlUser=!1,0==t.codevalue?this.isShowReadDel=!0:(4==t.codevalue&&(this.isShowControlUser=!0),this.readDel.checked=!1),this.inpFn()},inpFn:function(t){this.flowinfo[this.flowKey].handleTips=this.metaData.extra.handleTips||"",this.flowinfo[this.flowKey].handleTipsRange=this.radio,this.flowinfo[this.flowKey].handleNextNodeReadDel=this.readDel.checked?1:0,4==this.radio?(this.flowinfo[this.flowKey].handleTipsSpec=this.selectUser.value,this.flowinfo[this.flowKey].handleTipsSpecText=this.selectUser.text,this.flowinfo[this.flowKey].handleTipsSpecSchema=this.selectUser.schema):(this.flowinfo[this.flowKey].handleTipsSpec="",this.flowinfo[this.flowKey].handleTipsSpecText="",this.flowinfo[this.flowKey].handleTipsSpecSchema=""),this.formData.flowinfo=this.flowinfo,this.controlData.errorMessage="",this.newTagValue=this.metaData.extra.handleTips},toFocus:function(t){},toClear:function(){},toClick:function(){},getAdvice:function(){var e=this;this.readonly||dsf.http.get("fn/mobileUsedOpinion/find").then(function(t){e.tags=t.data.rows})},clearTags:function(t){var e=this;this.$dialog.confirm({title:"提示",message:"确定要删除吗？"}).then(function(){dsf.http.get("fn/mobileUsedOpinion/delete?id="+t.id).then(function(){e.getAdvice()})})},addContent:function(t){this.metaData.extra.handleTips=t.context,this.inpFn()},addTemplate:function(){var e=this;this.tags.find(function(t){return e.newTagValue==t.context})?dsf.layer.toast("模板内容已重复"):dsf.http.post("fn/mobileUsedOpinion/add",{__DATA:a()({opinion:this.metaData.extra.handleTips})}).then(function(t){dsf.layer.toast("设为模板成功"),e.newTagValue="",e.getAdvice()})},toBlur:function(){this.metaData.extra.handleTips=this.metaData.extra.handleTips.replace(/(^\s*)|(\s*$)/g,""),this.inpFn()},validatorFn:function(t){},tagClick:function(t){this.metaData.extra.handleTips=t,this.showIdeal=!this.showIdeal},idealClick:function(){this.showIdeal=!this.showIdeal},onEnd:function(){var e=this;r.log(this.tags),this.tags.forEach(function(t){e.ids+=t.id+","}),dsf.http.post("/fn/mobileUsedOpinion/moveIndex",{templateIds:this.ids}).then(function(){e.getAdvice()})}}},s=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"flowHandle"},[n("div",{staticClass:"control_label"},[n("span",{staticClass:"tiptitle"},[o._v("办理提示  可见范围：")]),o._v(" "),o.readonly?o._e():n("div",[n("van-radio-group",{attrs:{direction:"horizontal"},model:{value:o.radio,callback:function(t){o.radio=t},expression:"radio"}},o._l(o.handleTipCode,function(e,t){return n("van-radio",{key:t,attrs:{"icon-size":"16px",name:e.codevalue},on:{click:function(t){return o.checkRange(e)}}},[o._v(o._s(e.codename))])}),1),o._v(" "),n("transition",{attrs:{name:"fade"}},[o.isShowReadDel?n("van-checkbox",{attrs:{"icon-size":"16px",shape:"square"},model:{value:o.readDel.checked,callback:function(t){o.$set(o.readDel,"checked",t)},expression:"readDel.checked"}},[o._v("阅后即焚")]):o._e()],1)],1),o._v(" "),n("transition",{attrs:{name:"fade"}},[o.isShowControlUser?n("div",[n("controlUser",{attrs:{"meta-data":o.userMetaData},model:{value:o.selectUser,callback:function(t){o.selectUser=t},expression:"selectUser"}})],1):o._e()])],1),o._v(" "),n("div",{staticClass:"input-box"},[n("van-field",{class:{controlTextBox:!o.readonly},attrs:{rows:o.readonly?1:3,border:o.controlData.border,disabled:o.controlData.disabled,clearable:o.controlData.clearable,"error-message":o.controlData.errorMessage,placeholder:o.controlData.placeholder,"input-align":o.controlData.inputAlign,"left-icon":o.controlData.leftIcon,"right-icon":o.controlData.rightIcon,rules:o.controlData.rules,formatter:o.controlData.formatter,readonly:o.readonly,type:"textarea",name:o.metaData&&o.metaData.metaId?o.metaData.metaId:""},on:{input:o.inpFn,focus:function(t){return o.toFocus("focus",t)},clear:function(t){return o.toClear("clear",t)},click:function(t){return o.toClick("click",t)},blur:function(t){return o.toBlur("blur",t)}},scopedSlots:o._u([{key:"button",fn:function(){return[o._t("button")]},proxy:!0}],null,!0),model:{value:o.metaData.extra.handleTips,callback:function(t){o.$set(o.metaData.extra,"handleTips",t)},expression:"metaData.extra.handleTips"}}),o._v(" "),o.readonly?o._e():n("div",{staticClass:"mould"},[n("div",{staticClass:"mould-button",on:{click:function(t){return o.idealClick()}}},[o._v("常用意见")])])],1),o._v(" "),o.readonly?o._e():n("div",{staticClass:"mould"},[n("div",{staticClass:"_file_log"},[o._l(o.tempTags,function(e,t){return n("van-tag",{key:t,staticClass:"_file_tags",attrs:{size:"medium",type:"primary",closeable:!0},on:{close:function(t){return o.clearTags(e)},click:function(t){return o.addContent(e)}}},[o._v(o._s(e.context))])}),o._v(" "),2<o.tags.length?n("span",{staticClass:"show-more",on:{click:function(t){o.showMore=!o.showMore}}},[o._v(o._s(o.showMore?"收起":"更多"))]):o._e()],2)]),o._v(" "),n("van-popup",{style:{height:"80%"},attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:o.showIdeal,callback:function(t){o.showIdeal=t},expression:"showIdeal"}},[n("div",{staticClass:"ideal",staticStyle:{width:"100%",height:"100%"}},[n("van-nav-bar",{attrs:{title:"意见维护","left-text":"共".concat(this.tags.length,"条")}}),o._v(" "),n("draggable",{staticClass:"list-group",attrs:{group:"people","ghost-class":"ghost",chosenClass:"chosen",animation:"200",handle:".sort"},on:{sort:o.onEnd},model:{value:o.tags,callback:function(t){o.tags=t},expression:"tags"}},o._l(o.tags,function(e,t){return n("div",{key:t,staticClass:"list-group-item",on:{click:function(t){return t.stopPropagation(),o.tagClick(e.context)}}},[n("span",[o._v(o._s(e.context))]),o._v(" "),o.dsf.config.commonForm.hideSendOpinionOrder?o._e():n("van-icon",{staticClass:"sort",attrs:{name:"sort",color:"#666666",size:"15"}}),o._v(" "),n("van-icon",{attrs:{name:"close",size:"20"},on:{click:function(t){return t.stopPropagation(),o.clearTags(e)}}})],1)}),0),o._v(" "),n("div",{staticClass:"footer-btn"},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.newTagValue,expression:"newTagValue"}],attrs:{type:"text",placeholder:"请输入意见"},domProps:{value:o.newTagValue},on:{input:function(t){t.target.composing||(o.newTagValue=t.target.value)}}}),o._v(" "),n("van-button",{attrs:{type:"primary"},on:{click:o.addTemplate}},[o._v("添加")])],1)],1)])],1)},[],!1,null,"20c8b3d9",null).exports},29282:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var s=o(25108),e={name:"controlTextBox",model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null},formId:{type:String,default:null},formMeta:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:function(){return{}}},allFile:{type:Array,default:function(){return[]}}},data:function(){return{textData:{deadline:"",myTimeConsuming:"",timeOut:!1,timeOutText:""}}},computed:{percentage:function(){var t=(Date.parse(this.formData.main.B0021.value)-+new Date)/(Date.parse(this.formData.main.B0021.value)-Date.parse(this.formData.main.B0018.value));return isNaN(Math.floor(100*t))||Math.floor(100*t)<0?0:Math.floor(100*t)}},watch:{},created:function(){this.initData()},methods:{initData:function(){var r=this;dsf.http.post("/fn/toScreen/formTimeSpent",{pk:this.formMeta.parameters.pk,pnId:this.formMeta.parameters.pnId,nodes:this.metaData.extra.nodes}).then(function(t){var e,o,n,a,i;"success"===t.data.type?(e=(i=t.data.data).deadline,o=i.myTimeConsuming,n=i.timeOut,a=i.timeOutText,i=i.show,r.textData={deadline:e,myTimeConsuming:o,timeOut:n,timeOutText:a},i||(r.metaData.show=0)):(s.log(t.data.message),r.metaData.show=0)}).error(function(t){dsf.layer.closeLoading(loading),s.log(t)})}}},n=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.textData.timeOut?e("div",{staticClass:"top"},[t._m(0),t._v(" "),e("div",{staticClass:"right",style:{background:t.textData.timeOut?"rgb(245 248 255)":""}})]):t._e(),t._v(" "),e("div",{staticClass:"footer"},[e("div",{staticClass:"left"},[e("div",{staticClass:"icon",style:{background:t.textData.timeOut?"rgb(245 248 255)":""}},[e("i",{staticClass:"iconfont iconshijian"})]),t._v(" "),e("div",{staticClass:"box"},[e("div",{staticClass:"gray"},[t._v("办文时限")]),t._v(" "),e("div",{staticClass:"bold"},[t._v("\n          "+t._s(t.textData.deadline||"未填写")+"\n        ")])])]),t._v(" "),e("div",{staticClass:"right"},[t._m(1),t._v(" "),e("div",{staticClass:"box"},[e("div",{staticClass:"gray"},[t._v("我的耗时")]),t._v(" "),e("div",{staticClass:"bold"},[t._v("\n          "+t._s(t.textData.myTimeConsuming)+"\n        ")])])])])])},[function(){var t=this._self._c;return t("div",{staticClass:"left red",staticStyle:{"{\n          height":"'30px'"}},[t("div",{staticClass:"posi"},[this._v("已超期")])])},function(){var t=this._self._c;return t("div",{staticClass:"icon"},[t("i",{staticClass:"iconfont iconchuli"})])}],!1,null,"653f5166",null).exports},40708:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return r}});var e=a(64830),n=a.n(e),e=a(13852),o=a(58930),i=a(25108),o={components:{enclosure:o.default},mixins:[e.Z],props:["formData","formMeta","allFile"],data:function(){return{bindValue:"",controlData:{rules:[],maxlength:null,showWordLimit:!0,placeholder:""},readonly:!1,opinion:this.formData.opinion,isShowEnclosure:!1,fileType:{pdf:["pdf"],img:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],txt:["txt","sql","xml","html","css","js","java","php","bat","log"],word:["docx","docm","doc","dotx","dotm","dot"],xls:["xlsx","xlsm","xlsb","xls","xltx","xltm","xlt","xlam","xla","ods"],ppt:["pptx","pptm","ppt","potx","potm","pot","ppsx","ppsm","pps","ppam","ppa"]},hasFilePng:["ai","cloud","html","img","jpg","mp3","mp4","pdf","png","ppt","psd","rar","txt","word","wps","xls","zip","ofd"]}},computed:{opinionText:function(){var e=this,o=null;return n()(this.opinion).forEach(function(t){t.forEach(function(t){!o||dsf.date.parse(o.opinionDate).getTime()<dsf.date.parse(t.opinionDate).getTime()?o=t:dsf.date.parse(o.opinionDate).getTime()==dsf.date.parse(t.opinionDate).getTime()&&(o=t.nodeName==e.formMeta.parameters.nodeName?o:t)})}),o?o.opinionContent:""},promoter:function(){return this.formData.main.A0011?this.formData.main.A0011.value:""},status:function(){return this.formData.main.A0009||""}},created:function(){i.log()},methods:{inpfn:function(){this.$emit("input",this.value)},showEnclosure:function(){dsf.config.commonForm.canClickBigTitle&&this.readonly&&(this.isShowEnclosure=!0)},getIconClass:function(t){var e,o=t.lastIndexOf("."),n=-1<o?t.substring(o+1,t.length).toLowerCase():"";if(-1<this.hasFilePng.indexOf(n))return a(83887)("./".concat(n,".png"));for(e in this.fileType)if(-1<this.fileType[e].indexOf(n))return a(83887)("./".concat(e,".png"));return a(26206)}}},r=(0,a(51900).Z)(o,function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-title"},[e.readonly?t("div",{staticStyle:{"font-size":"var(--font_size_0)","font-weight":"600"},on:{click:function(t){0<e.allFile.length&&0<e.allFile[0].file.length&&e.showEnclosure()}}},[t("span",[e._v("\n        "+e._s(e.value.value)+"\n      ")])]):[t("van-field",{class:{textareaBox:!e.readonly},attrs:{rows:e.readonly?1:3,autosize:"",type:"textarea",readonly:e.readonly,placeholder:e.controlData.placeholder,maxlength:e.controlData.maxlength,rules:e.controlData.rules},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],e._v(" "),e.dsf.config.commonForm.hideBigTitleDetail?e._e():t("div",{staticClass:"status"},[e.promoter?t("span",[e._v("发起人："),t("span",{staticClass:"promoter"},[e._v(e._s(e.promoter))])]):e._e(),e._v(" "),e.status?t("span",{style:{color:2==e.status.value?"#13ba84":"#E6A23C"}},[e._v(e._s(e.status.text))]):e._e()]),e._v(" "),!e.dsf.config.commonForm.hideBigTitleDetail&&e.opinionText?t("div",{staticClass:"opinion"},[e._v(e._s(e.opinionText))]):e._e(),e._v(" "),t("van-popup",{staticClass:"flex dc",style:{height:"100%"},attrs:{"close-on-click-overlay":!1,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:e.isShowEnclosure,callback:function(t){e.isShowEnclosure=t},expression:"isShowEnclosure"}},[t("van-nav-bar",{attrs:{title:"相关文件"},on:{"click-left":function(t){e.isShowEnclosure=!1}},scopedSlots:e._u([{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}}),t("span",[e._v("返回")])]},proxy:!0}])}),e._v(" "),t("enclosure",{ref:"enclosure",staticStyle:{flex:"1"},attrs:{fileData:{info_id:e.formMeta.parameters?e.formMeta.parameters.pk:"",moduleId:e.formMeta.parameters?e.formMeta.parameters.moduleId:"",nodeId:e.formMeta.parameters?e.formMeta.parameters.nodeId:"",nodeName:e.formMeta.parameters?e.formMeta.parameters.nodeName:"",flowId:e.formMeta.parameters?e.formMeta.parameters.flowId:"",pId:e.formMeta.parameters?e.formMeta.parameters.pId:"",pnId:e.formMeta.parameters?e.formMeta.parameters.pnId:"",uploadAttach:e.formMeta.parameters?e.formMeta.parameters.uploadAttach:""},allFile:e.allFile,formMeta:e.formMeta}})],1)],2)},[],!1,null,"5254431e",null).exports},21265:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(24921),n=o(25108),e={name:"goodsList",props:["params"],components:{goodsListChild:e.default},data:function(){return{goodsData:[],multiple:!1,showCheckGoods:!1,showImgSwipe:!1,imgSwipeArr:[],imgSwipeName:"",goodsCheckArr:[],searchText:"",isFocus:!1}},created:function(){var t;this.initData(),this.multiple=null!=(t=this.params.multiple)&&t},computed:{goodsNum:function(){return this.goodsCheckArr.length}},methods:{searchBack:function(){this.searchText="",this.isFocus=!1,this.initData()},onSearch:function(){this.initData()},initData:function(){var t,e=this,a=this,o=dsf.layer.loading();this.params.url?(t=this.searchText||"",dsf.http.post(this.params.url,{name:t}).then(function(t){var t=t.data;e.goodsData=t.data.codeList,function o(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(!t||!t.length)return;t.forEach(function(t){var e;t.level=n,a.$set(t,"open",a.searchText?1:null!=(e=t.open)?e:0),a.$set(t,"checked",null!=(e=t.checked)&&e),t.children&&t.children.length&&o(t.children,n+1)})}(e.goodsData),0<(null==(t=e.goodsData[0])?void 0:t.children.length)&&(e.goodsData[0].open=1),dsf.layer.closeLoading(o),n.log(e.goodsData)})):(dsf.layer.closeLoading(o),dsf.layer.toast("参数配置有误，请检查！"))},back:function(){this.$emit("close",!1)},imgSwipe:function(t){var e=this;this.imgSwipeArr=[],t.imgArr.forEach(function(t){t.includes("http")||t.includes("static")?e.imgSwipeArr.push(t):e.imgSwipeArr.push(dsf.url.getServerUrl("fn/file/downloadImage?fileName="+t))}),this.imgSwipeName=t.name,this.showImgSwipe=!0},goodsCheck:function(e){var t;n.log(e.checked),this.multiple?e.checked?this.goodsCheckArr.push(e):(t=this.goodsCheckArr.findIndex(function(t){return t.id==e.id}),this.goodsCheckArr.splice(t,1)):e.checked?(0<this.goodsCheckArr.length&&(this.goodsCheckArr[0].checked=!1,this.goodsCheckArr.pop()),this.goodsCheckArr.push(e)):this.goodsCheckArr=[]},goodsDelete:function(t){this.goodsCheckArr[t].checked=!1,this.goodsCheckArr.splice(t,1)},goodsSelect:function(){this.$bus.emit("subFormGoodsSelect",this.goodsCheckArr),this.back()}}},a=(0,o(51900).Z)(e,function(){var t,o=this,n=o._self._c;return n("div",{staticClass:"good_list"},[n("van-nav-bar",{attrs:{fixed:"",placeholder:"",title:null!=(t=o.params.name)?t:""},on:{"click-left":o.back},scopedSlots:o._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-left"}}),n("span",[o._v("返回")])]},proxy:!0}])}),o._v(" "),n("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:o.onSearch,focus:function(t){o.isFocus=!0}},model:{value:o.searchText,callback:function(t){o.searchText=t},expression:"searchText"}},[n("template",{slot:"action"},[n("span",{staticClass:"search_btn",on:{click:o.onSearch}},[o._v("搜索")])]),o._v(" "),o.isFocus?n("template",{slot:"left"},[n("van-icon",{staticStyle:{"padding-right":"5px"},attrs:{name:"arrow-left"},on:{click:o.searchBack}})],1):o._e()],2),o._v(" "),o.goodsData.length?n("goods-list-child",{attrs:{multiple:o.multiple,goodsData:o.goodsData},on:{imgSwipeShow:o.imgSwipe,goodsCheck:o.goodsCheck}}):n("commonempty",{attrs:{description:"暂无数据"}}),o._v(" "),n("div",{staticClass:"goods_list_footer"},[n("span",{on:{click:function(t){o.showCheckGoods=!0}}},[o._v("\n      已选择："+o._s(o.goodsNum)+"\n      "),o.goodsNum?n("van-icon",{attrs:{name:"arrow-up"}}):o._e()],1),o._v(" "),n("button",{on:{click:o.goodsSelect}},[o._v("确定")])]),o._v(" "),n("van-popup",{style:{height:"70%"},attrs:{round:"",position:"bottom"},model:{value:o.showCheckGoods,callback:function(t){o.showCheckGoods=t},expression:"showCheckGoods"}},[n("van-nav-bar",{staticClass:"goods_nav_bar",attrs:{title:"选中物品"},on:{"click-left":function(t){o.showCheckGoods=!1}},scopedSlots:o._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-down"}})]},proxy:!0}])}),o._v(" "),o._l(o.goodsCheckArr,function(t,e){return n("div",{key:t.id+e,staticClass:"goods_display_list"},[n("span",[o._v(o._s(t.name))]),o._v(" "),n("van-icon",{attrs:{name:"close"},on:{click:function(t){return o.goodsDelete(e)}}})],1)})],2),o._v(" "),n("van-popup",{style:{height:"130vw",width:"100vw","background-color":"#000"},attrs:{"overlay-style":{"background-color":"#000"}},on:{click:function(t){o.showImgSwipe=!1}},model:{value:o.showImgSwipe,callback:function(t){o.showImgSwipe=t},expression:"showImgSwipe"}},[n("van-swipe",{attrs:{width:"100vw",height:"100vw"}},o._l(o.imgSwipeArr,function(t,e){return n("van-swipe-item",{key:e},[n("img",{attrs:{src:t,alt:""}})])}),1),o._v(" "),n("span",{staticClass:"img_swipe_name"},[o._v(o._s(o.imgSwipeName))])],1)],1)},[],!1,null,"588a3952",null).exports},24921:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"goodsListChild",props:["goodsData","multiple"],components:{collapseTransition:o(25540).Z},data:function(){return{}},created:function(){},methods:{getPadding:function(t,e){return 15*(t+e)+"px"},openChild:function(t){this.$set(t,"open",!t.open)},imgSwipe:function(t){t.imgArr.length&&this.$emit("imgSwipeShow",t)},goodsCheck:function(t){this.$emit("goodsCheck",t)}}},n=(0,o(51900).Z)(e,function(){var n=this,a=n._self._c;return a("div",{staticClass:"goodsListChild"},[n._l(n.goodsData,function(e,t){return[a("div",{staticClass:"flex-box",style:{"padding-left":n.getPadding(e.level,1)},on:{click:function(t){return n.openChild(e)}}},[e.attrs.noselect?a("div",{staticClass:"goods_name"},[n._v(n._s(e.showName||e.name))]):a("van-checkbox",{attrs:{"icon-size":"20px",shape:"".concat(n.multiple?"square":"round")},on:{click:function(t){return n.goodsCheck(e)}},model:{value:e.checked,callback:function(t){n.$set(e,"checked",t)},expression:"item.checked"}},[a("div",{staticClass:"goods_name"},[n._v(n._s(e.showName||e.name))])]),n._v(" "),0<e.children.length?a("van-icon",{class:e.open?"arrowTransform":"arrowTransformReturn",attrs:{name:"arrow-down"}}):n._e()],1),n._v(" "),a("collapseTransition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"item.open"}],staticStyle:{"border-bottom":"1px solid #eee"}},[n._l(e.children,function(e,t){var o;return[e.children.length||"category"==e.attrs.type?a("div",[a("goods-list-child",{attrs:{goodsData:[e],multiple:n.multiple},on:{imgSwipeShow:n.imgSwipe,goodsCheck:n.goodsCheck}})],1):[a("div",{staticClass:"goods_child",style:{"padding-left":n.getPadding(e.level,0)}},[a("van-checkbox",{staticClass:"child_check",attrs:{"icon-size":"20px",shape:"".concat(n.multiple?"square":"round")},on:{click:function(t){return n.goodsCheck(e)}},model:{value:e.checked,callback:function(t){n.$set(e,"checked",t)},expression:"cell.checked"}}),n._v(" "),a("div",{staticClass:"goods_img",on:{click:function(t){return n.imgSwipe({imgArr:e.attrs.img,name:e.name})}}},[a("img",{attrs:{src:null!=(o=e.attrs.img)&&o.length?e.attrs.img[0]:"static/images/project/sxXTBG/moren.png",alt:""}})]),n._v(" "),a("div",{staticClass:"goods_name goods_child_name"},[a("span",[n._v(n._s(e.showName||e.name))]),n._v(" "),a("div",{staticClass:"goods_child_kc"},[a("span",[n._v("库存：")]),n._v(" "),a("span",{style:{color:0==(null!=(o=e.attrs.stockCount)?o:0)?"red":"#999"}},[n._v(n._s(null!=(o=e.attrs.stockCount)?o:0))])])])],1)]]})],2)])]})],2)},[],!1,null,"d117a92a",null).exports},40847:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={name:"handleRrecordsControl",props:{subFormIndex:{type:Number,default:null},formId:{type:String,default:null},formMeta:{type:Object,default:function(){return{}}},allFile:{type:Array,default:function(){return[]}},metaData:{type:Object,default:function(){return{}}}},components:{},data:function(){return{content:""}},created:function(){},mounted:function(){this.getContent()},activated:function(){},computed:{},watch:{},methods:{getContent:function(){var e=this,o=dsf.layer.loading(),t="ctrl/toScreen/handleRrecords?pk=".concat(this.formMeta.parameters.pk,"&dbName=").concat(this.metaData.extra.dbName,"&subDbName=").concat(this.metaData.extra.subDbName,"&tempName=").concat(this.metaData.extra.tempName);dsf.http.post(t).then(function(t){dsf.layer.closeLoading(o),"success"===t.data.type?e.content=t.data.message:(n.log(t.data.message),e.metaData.show=0)}).error(function(t){dsf.layer.closeLoading(o),n.log(t)})}}},a=(0,o(51900).Z)(e,function(){return(0,this._self._c)("div",{staticClass:"handleRrecordsControl",domProps:{innerHTML:this._s(this.content)}})},[],!1,null,"4b3ccc3e",null).exports},12928:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"handleTips",mixins:[o(13852).Z],props:["parameters"],data:function(){return{controlData:{}}},computed:{handletips:function(){var t=[];return t=this.metaData.extra.list?this.metaData.extra.list:t}},mounted:function(){},methods:{}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"handleTips"},o._l(o.handletips,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.handletips,expression:"item.handletips"}],staticClass:"opinionText",domProps:{innerHTML:o._s(t.handletips)}}),o._v(" "),n("div",{staticClass:"opinionWhere tr"}),o._v(" "),n("div",{staticClass:"opinionTime tr"},[n("i",[o._v(o._s(t.deptname)+"  ")]),o._v(" "),n("i",[o._v(o._s(t.username)+"  ")]),o._v("\r\n            "+o._s(t.accDate)+"\r\n        ")])])}),0)},[],!1,null,"858fa91a",null).exports},42661:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var e=n(13852),a=n(25108),e={name:"meetingRoomControl",mixins:[e.Z],model:{prop:"value",event:"input"},data:function(){var t=new Date;return{showPopup:!1,controlData:{inputAlign:"right",rules:[],placeholder:this.metaData.placeholder,leftIcon:"",rightIcon:"",disabled:!1,closeable:!0,round:!0,lockScroll:!0,overlay:!0,duration:"0.3",columnsValue:{columns:[]}},meetingData:[{configSetUp:"无投影设备,移动话筒",number:"20",name:"行政大楼2号楼",id:"200528154121AgvU0dOlpEGz83U61BD",occupydate:[]},{configSetUp:"固定投影,话筒,移动话筒",number:"5",images:"ctrl/file/downloadImage?fileName=200515092017XZrIiVl1h6kbgRBpMru.jpg",name:"多媒体会议室",id:"200116153258XxH4GUh0bS2x7R14ze8",occupydate:[]},{configSetUp:"固定投影,无投影设备,话筒,无线话筒",number:"20",images:"ctrl/file/downloadImage?fileName=200515092005bTfiJ7EpCpbbAx0CyPg.jpg",name:"综合楼102",id:"20011616090768IgVSAOqOLji6l5i1E",occupydate:[]},{configSetUp:"固定投影,话筒,移动话筒,无线话筒,有投影幕布,移动投影",number:"6",images:"ctrl/file/downloadImage?fileName=200515092100zYb6FbG4tzEtwNcUY1R.jpg",name:"综合楼701",id:"200118112502bg9iz8ps6UiNBrvFIWZ",occupydate:[]},{configSetUp:"固定投影,无投影设备,话筒,移动话筒",number:"20",images:"ctrl/file/downloadImage?fileName=200515092131Hpo5RWtYgtVEApt21Im.jpg",name:"大礼堂",id:"200211213526uTT4yiPqRqV4k1mY7Wv",occupydate:[]},{configSetUp:"无投影设备,移动话筒,有投影幕布",number:"",images:"ctrl/file/downloadImage?fileName=200515092320jgKpQh0zvuwPfjYLcuj.jpeg",name:"行政楼601",id:"2003251823494ZtNDJJJcoLvV9j9Q8G",occupydate:[]},{configSetUp:"无投影设备,移动话筒",number:"12",images:"ctrl/file/downloadImage?fileName=200515092348PRT1md1vWO7v3ssG0au.jpg",name:"行政楼多媒体会议室",id:"200325182331qwr5yocW0e3V9fIZM1m",occupydate:[]}],radioSec:null,readonly:!1,statusConfig:{0:"未审核通过/审核中",1:"审核通过",2:"被占用",3:"被锁定",4:"本人预定"},type:this.$route.query.type||0,expire:null,date:dsf.date.format(t,"yyyy-mm-dd"),dateStr:dsf.date.format(t,"mm月dd日 DD")}},mounted:function(){this.init()},filters:{urlFilter:function(t){return dsf.config.assetsRoot+t}},computed:{bindValue:function(){return this.value.text}},methods:{setExpire:function(){var t=new Date,e=dsf.date.format(t,"yyyy-mm-dd 07:00");-1===e.indexOf(this.date)?this.expire=null:this.expire=this.progressBar({starttime:e,endtime:dsf.date.format(t,"yyyy-mm-dd hh:ii")})},progressBar:function(t){var e=t.endtime,t=t.starttime,e=dsf.date.parse(e,"yyyy-mm-dd hh:ii"),o=dsf.date.parse(t,"yyyy-mm-dd hh:ii"),t=dsf.date.parse(t.split(" ")[0]+" 07:00","yyyy-mm-dd hh:ii"),e=(100*(e-o)/576e5).toFixed(2)+"%";return{left:(100*(o-t)/576e5).toFixed(2)+"%",width:e}},init:function(){this.postData()},postData:function(){var e=this,t=dsf.layer.loading();this.setExpire(),dsf.http.post("fn/meeting/meetingRoomJson",{date:this.date}).done(function(t){t.code+""=="200"&&e.postDataSuccess(t.data)}).error(function(){dsf.layer.toast("请求异常")}).always(function(){dsf.layer.closeLoading(t)})},postDataSuccess:function(t){this.meetingData=t},toClick:function(){this.readonly||(this.showPopup=!this.showPopup)},cancelFn:function(){this.showPopup=!this.showPopup},confirmFn:function(){var e=this,t=(a.log(this.radioSec),this.meetingData.filter(function(t){return t.id==e.radioSec})[0]),o=(a.log(t),this.value);o.value=t.id,o.text=t.name,this.showPopup=!this.showPopup,this.$emit("input",o)}},created:function(){a.log(this.value)}},o=(0,n(51900).Z)(e,function(){var e=this,o=e._self._c;return o("div",{staticClass:"meetingRoomControlBox"},[o("van-field",{staticClass:"meetingRoomControl",class:[e.controlData.error?"errorInp":""],attrs:{disabled:e.controlData.disabled,clickable:e.controlData.clickable,placeholder:e.controlData.placeholder,readonly:!0,"input-align":e.controlData.inputAlign,"left-icon":e.controlData.leftIcon,"right-icon":e.controlData.rightIcon,border:!1,rules:e.controlData.rules,name:e.metaData&&e.metaData.metaId?e.metaData.metaId:""},on:{click:function(t){return e.toClick("click",t)}},model:{value:e.value.text,callback:function(t){e.$set(e.value,"text",t)},expression:"value.text"}}),e._v(" "),o("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[o("div",{staticClass:"popupBox"},[o("div",{staticClass:"contentBox"},[o("van-radio-group",{model:{value:e.radioSec,callback:function(t){e.radioSec=t},expression:"radioSec"}},e._l(e.meetingData,function(t){return o("div",{key:t.id,staticClass:"_content"},[o("van-radio",{attrs:{name:t.id}},[o("div",{staticClass:"_item"},[o("div",{staticClass:"_left"},[o("div",{staticClass:"_title ds_font4"},[e._v(e._s(t.name))]),e._v(" "),o("div",{staticClass:"_shebei ds_font6"},[e._v(e._s(t.configSetUp))]),e._v(" "),o("div",{staticClass:"_num"},[o("i",{staticClass:"iconfont"},[e._v("")]),e._v(" "),o("span",{staticClass:"ds_font6"},[e._v(e._s(t.number))])])]),e._v(" "),o("div",{staticClass:"_right"},[o("van-image",{attrs:{src:e._f("urlFilter")(t.images),fit:"cover","lazy-load":""},scopedSlots:e._u([{key:"error",fn:function(){return[o("img",{attrs:{src:n(86722)}})]},proxy:!0}],null,!0)})],1)])])],1)}),0)],1),e._v(" "),o("van-tabbar",[o("van-tabbar-item",{staticClass:"_btns"},[o("van-button",{attrs:{type:"default","native-type":"button"},on:{click:e.cancelFn}},[e._v("取消")]),e._v(" "),o("van-button",{attrs:{type:"info","native-type":"button"},on:{click:e.confirmFn}},[e._v("确定")])],1)],1)],1)])],1)},[],!1,null,"6906a6ec",null).exports},67126:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(8450),n=o.n(e),a=o(88561),e={props:["metaData","formMeta"],components:{DefaultList:o(14355).default},data:function(){return{opinionNodeName:"",opinionNodeNameCondition:"",show:!1,refreshListKey:Math.random(),commonPopParam:{listId:"231204144747uQcstWFNRUu8AGKK6ml",moduleId:"190812173618iFCoPPLoNcCkftTOTHQ",name:"意见维护",title:"意见维护",params:{customInfoId:this.formMeta.parameters.pk,customPid:this.formMeta.parameters.pId,customFlowId:this.formMeta.parameters.flowId,opinionNodeId:this.metaData.extra.opinionNodeId,opinionNodeName:""}}}},computed:{},beforeCreate:function(){},mounted:function(){this.getNodeName()},methods:{getNodeName:function(){var e=this,t=this.metaData.extra.opinionNodeId.split(",");0<t.length&&t.forEach(function(t){dsf.http.post("/ctrl/opinionControlP2433/getInfo",{flowId:e.metaData.extra.flowId,opinionNodeId:t}).then(function(t){200==t.data.code&&(e.commonPopParam.params.opinionNodeName+=0==e.commonPopParam.params.opinionNodeName.length?t.data.data.opinionNodeName:","+t.data.data.opinionNodeName)})})},goFrom:function(){this.$router.push({path:"/commonForm/190812173618iFCoPPLoNcCkftTOTHQ",query:{customXForm:"231214135820jHjKGpzR7KjN02vKuF1",customInfoId:this.formMeta.parameters.pk,customPid:this.formMeta.parameters.pId,customFlowId:this.formMeta.parameters.flowId,opinionNodeId:this.metaData.extra.opinionNodeId,opinionNodeName:this.commonPopParam.params.opinionNodeName,leaderOpinion:this.metaData.extra.leaderOpinion}})},goList:function(){var t=this;a.Z.saveToSessionStore("OpinionMaintenance",{customXForm:"231214135820jHjKGpzR7KjN02vKuF1",customInfoId:this.formMeta.parameters.pk,customPid:this.formMeta.parameters.pId,customFlowId:this.formMeta.parameters.flowId,opinionNodeId:this.metaData.extra.opinionNodeId,opinionNodeName:this.opinionNodeName,leaderOpinion:this.metaData.extra.leaderOpinion}),this.$bus.emit("saveFormBus",{metaData:this.metaData,callback:function(){t.$router.push({path:"/commonList/231204144747uQcstWFNRUu8AGKK6ml/190812173618iFCoPPLoNcCkftTOTHQ",query:{title:"意见维护",secQuery:n()(t.commonPopParam.params)}})},isTemp:!0})}}},i=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"opinionControl"},[t("div",{staticClass:"inbox"},[e.metaData.extra.showNodeId.includes(e.formMeta.parameters.nodeId)?t("div",{staticClass:"footbtn"},[t("span",{on:{click:e.goList}},[e._v("批量维护")]),e._v(" "),t("span",{on:{click:e.goFrom}},[e._v("维护")])]):e._e()]),e._v(" "),t("van-popup",{style:{height:"100%"},attrs:{"get-container":"#app",position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e.commonPopParam.title?t("van-sticky",[t("header",[t("van-nav-bar",{staticStyle:{"z-index":"9"},attrs:{title:e.commonPopParam.title},on:{"click-left":function(t){e.show=!1}},scopedSlots:e._u([{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0}],null,!1,669704712)})],1)]):e._e(),e._v(" "),t("default-list",{key:e.refreshListKey,attrs:{params:e.commonPopParam}})],1)],1)},[],!1,null,"776a7207",null).exports},97551:function(t,e,o){"use strict";o.d(e,{Z:function(){return i}});var e=o(8450),n=o.n(e),a=o(25108),e={props:["formMeta","metaData"],components:{draggable:function(){return o.e(9980).then(o.t.bind(o,82021,23))}},data:function(){return{opinionContent:"",showPicker:!1,showIdeal:!1,tags:[],formData:null,newValue:"",opinionObj:{}}},created:function(){var a=this;this.$nextTick(function(){a.formData=a.formMeta.parameters;var t=dsf.util.loadSessionStore("user"),e=t.user_id,o=t.name,n=t.user_id,t=t.name;a.$route.query.todoId&&("2"==a.$route.query.agencyType?(e=a.$route.query.agencyUserId,o=a.$route.query.agencyUserName,n=a.$route.query.agencyUserId,t=a.$route.query.agencyUserName):"1"==a.$route.query.agencyType&&(n=a.$route.query.agencyUserId,t=a.$route.query.agencyUserName)),a.flowKey="flow-".concat(a.formData.pk,"-").concat(a.formData.pId,"-").concat(a.formData.pnId),a.opinionObj={id:a.formData.pnId,fid:a.formData.fPnId,infoId:a.formData.pk,pid:a.formData.pId,pnid:a.formData.pnId,nodeId:a.formData.nodeId,wfId:a.formData.flowId,opinionContent:a.opinionContent,handwritePic:"",handwriteThumb:"",nodeName:a.formData.nodeName,isSign:"0",signName:"",signTime:"",opinionUsers:"",opinionUsersText:"",duserId:n,duserName:t,userId:e,userName:o,opinionFiles:[]}})},mounted:function(){this.getDefaultOpinition(),this.getAdvice()},computed:{showSend:function(){var t;return(null==(t=this.formMeta.buttons)?void 0:t.commonButtons.find(function(t){return"send"==t.action}))||(null==(t=this.formMeta.buttons)?void 0:t.mainButtons.find(function(t){return"send"==t.action}))}},watch:{opinionContent:function(t){this.opinionObj.opinionContent=t,this.$emit("controlEditOpinion",{key:this.flowKey,value:this.opinionObj})}},methods:{getDefaultOpinition:function(){var e=this;dsf.http.post("fn/mobileFormComment/getH5CurrentComment",{pk:this.formMeta.parameters.pk,pid:this.formMeta.parameters.pId,pnid:this.formMeta.parameters.pnId,moduleId:this.formMeta.parameters.moduleId}).then(function(t){t=t.data;t.data.opinion&&(e.opinionContent=t.data.opinion)})},getAdvice:function(){var e=this;dsf.http.get("fn/mobileUsedOpinion/find").then(function(t){e.tags=t.data.rows})},onConfirm:function(){this.opinionContent=this.$refs.tagPicker.getColumnValue(0).context,this.showPicker=!1},send:function(){this.$bus.$emit("handleFormBtn",{action:"send"})},clearTags:function(t){var e=this;this.$dialog.confirm({title:"提示",message:"确定要删除吗？"}).then(function(){dsf.http.get("fn/mobileUsedOpinion/delete?id="+t.id).then(function(){e.getAdvice()})})},onEnd:function(){var e=this;a.log(this.tags),this.tags.forEach(function(t){e.ids+=t.id+","}),dsf.http.post("/fn/mobileUsedOpinion/moveIndex",{templateIds:this.ids}).then(function(){e.getAdvice()})},addTemplate:function(){var e=this;this.tags.find(function(t){return e.newValue==t.context})?dsf.layer.toast("模板内容已重复"):""!=this.newValue&&0<this.newValue.trim().length?dsf.http.post("fn/mobileUsedOpinion/add",{__DATA:n()({opinion:this.newValue})}).then(function(t){e.getAdvice(),e.newValue=""}):dsf.layer.toast("请输入内容")}}},i=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"container"},[n("van-field",{staticClass:"input-box",attrs:{rows:2,type:"textarea",name:o.metaData&&o.metaData.metaId?o.metaData.metaId:""},model:{value:o.opinionContent,callback:function(t){o.opinionContent=t},expression:"opinionContent"}}),o._v(" "),n("div",{staticClass:"choose"},[n("span",[o._v("常用批示语")]),o._v(" "),n("span",{on:{click:function(t){o.showPicker=!0}}},[o._v("\n      请选择\n      "),n("van-icon",{attrs:{name:"arrow-down"}})],1)]),o._v(" "),n("div",{staticClass:"tag-wrap"},o._l(o.tags,function(e,t){return t<3?n("span",{staticClass:"tag",on:{click:function(t){o.opinionContent=e.context}}},[o._v(" "+o._s(e.context))]):o._e()}),0),o._v(" "),o.showSend?n("div",{staticStyle:{margin:"10px"}},[n("van-button",{attrs:{type:"primary",block:""},on:{click:function(t){return o.send()}}},[o._v("发送")])],1):o._e(),o._v(" "),n("van-popup",{attrs:{round:"",position:"bottom","get-container":"#app"},model:{value:o.showPicker,callback:function(t){o.showPicker=t},expression:"showPicker"}},[n("van-picker",{ref:"tagPicker",attrs:{title:"常用批示语","show-toolbar":"",columns:o.tags,"confirm-button-text":"维护","value-key":"context"},on:{cancel:function(t){o.showPicker=!1},confirm:function(t){o.showIdeal=!0}}}),o._v(" "),n("div",{staticStyle:{margin:"10px"}},[n("van-button",{attrs:{type:"primary",block:""},on:{click:function(t){return o.onConfirm()}}},[o._v("确认")])],1)],1),o._v(" "),n("van-popup",{staticStyle:{height:"80%"},attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:o.showIdeal,callback:function(t){o.showIdeal=t},expression:"showIdeal"}},[n("div",{staticClass:"ideal",staticStyle:{width:"100%",height:"100%"}},[n("van-nav-bar",{attrs:{title:"意见维护","left-text":"取消","right-text":"共".concat(this.tags.length,"条")},on:{"click-left":function(t){o.showIdeal=!1}}}),o._v(" "),n("draggable",{staticClass:"list-group",attrs:{group:"people","ghost-class":"ghost",chosenClass:"chosen",animation:"200",handle:".sort"},on:{sort:o.onEnd},model:{value:o.tags,callback:function(t){o.tags=t},expression:"tags"}},o._l(o.tags,function(e,t){return n("div",{key:t,staticClass:"list-group-item"},[n("span",[o._v(o._s(e.context))]),o._v(" "),o.dsf.config.commonForm.hideSendOpinionOrder||-1==e.type?o._e():n("van-icon",{staticClass:"sort",attrs:{name:"sort",color:"#666666",size:"15"}}),o._v(" "),-1!=e.type?n("van-icon",{attrs:{name:"close",size:"20"},on:{click:function(t){return t.stopPropagation(),o.clearTags(e)}}}):o._e()],1)}),0),o._v(" "),n("div",{staticClass:"footer-btn"},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.newValue,expression:"newValue"}],attrs:{type:"text",placeholder:"请输入意见"},domProps:{value:o.newValue},on:{input:function(t){t.target.composing||(o.newValue=t.target.value)}}}),o._v(" "),n("van-button",{attrs:{type:"primary"},on:{click:o.addTemplate}},[o._v("添加")])],1)],1)])],1)},[],!1,null,"79f245ca",null).exports},29198:function(t,e,o){"use strict";o.d(e,{Z:function(){return n}});var e=o(26243),i=o.n(e),e={name:"round",props:{opinion:{type:Object,default:{}}},components:{round:n},data:function(){return{activeNames:[""]}},computed:{},mounted:function(){},methods:{}},n=(0,o(51900).Z)(e,function(){var n=this,a=n._self._c;return a("van-collapse",{staticClass:"opinionContent",model:{value:n.activeNames,callback:function(t){n.activeNames=t},expression:"activeNames"}},n._l(n.opinion,function(t,e,o){return a("van-collapse-item",{key:o,attrs:{title:e,name:o,icon:"play"}},[n._l(t,function(t,e){return[0<i()(t.customMap).length?a("round",{attrs:{opinion:t.customMap}}):a("div",{staticClass:"opiniondiv"},[a("p",{staticClass:"opinionText"},[n._v(n._s(t.opinionContent))]),n._v(" "),a("span",{staticClass:"opinionTime"},[n._v("\r\n                    "+n._s(t.muserName+" "+t.lastUpdataDateShow)+"\r\n                ")])])]})],2)}),1)},[],!1,null,"35dc7441",null).exports},62662:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={props:["metaData"],data:function(){return{dataTree:{}}},computed:{opinionTree:function(){var o=this,n=[],a=0,i=this.metaData.extra.list.reverse();return i.forEach(function(t,e){"qTzpZgXEBU8GM0A"==t.nodeId&&i[e-1].pnid!=t.fpnid&&(n.push(o.metaData.extra.list.slice(a,e)),a=e),e==o.metaData.extra.list.length-1&&n.push(o.metaData.extra.list.slice(a))}),n}},methods:{}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",o._l(o.opinionTree,function(t,e){return n("div",[n("div",{staticClass:"title"},[o._v("第"+o._s(e+1)+"次拟办")]),o._v(" "),o._l(t,function(t){return[t.opinionContent?n("div",[n("div",{staticClass:"node"},[o._v(o._s("Q23XZ6FnC7SDVMf"==t.nodeId||"RfqqqHGESZNlapb"==t.nodeId?"审核：":"拟办："))]),o._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:o._s(t.opinionContent)}}),o._v(" "),n("div",{staticClass:"time"},[o._v(o._s(t.userName)+"  "+o._s(t.time.split(" ")[0]))])]):o._e()]})],2)}),0)},[],!1,null,"02be1984",null).exports},29078:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={props:["metaData"],data:function(){return{dataTree:{}}},computed:{opinion:function(){var t=[];return this.metaData.extra.list&&(t=this.metaData.extra.list.filter(function(t){return"QHQexxQdTtH1r7K"!=t.nodeId})),n.log(t),t}},methods:{}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},o._l(o.opinion,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{staticClass:"opinionContent"},[-1==t.isOpinionValid&&4==t.nextHandleType?n("p",[o._v(o._s(t.userName)+"：退回（原因："+o._s(t.backReason)+"）。")]):n("p",[o._v(o._s(t.userName)+"：同意。")]),o._v(" "),n("p",[o._v(o._s(t.time.split(" ")[0]))])])])}),0)},[],!1,null,"0c8d72ec",null).exports},76806:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var n=o(5044),e=o(64830),a=o.n(e),e={props:["metaData","parameters"],data:function(){return{dataTree:{}}},computed:{opinion:function(){var t,o,e=[];return this.metaData.extra.list&&(t=this.metaData.extra.list,dsf.util.loadSessionStore("loginToken"),o={},t.forEach(function(t){t.handwritePic&&(t.handwritePic=dsf.url.getServerUrl(t.handwritePic));var e=t;o[t.nodeName]?o[e.nodeName].push(e):o[t.nodeName]=[e]}),a()(o).forEach(function(t){return e.push.apply(e,(0,n.Z)(t))})),e}},methods:{toShuke:function(t){var o=this.parameters,n=(dsf.layer.loading(),String(t.handwritePageNum).split(",").reduce(function(t,e){return t<e?t:e}));dsf.http.post("ctrl/instructions/signedFile",{id:"230716135502ednDlLWLSO8VsLwqzrC"==o.moduleId?o.pnId:o.pk,moduleId:o.moduleId,nodeId:o.nodeId,pnId:t.pnid,needSignFile:1}).then(function(t){var e;dsf.layer.clear(),200==t.data.code&&t.data.data&&t.data.data.fileId&&(e=(t=t.data.data).fileName.substr(t.fileName.lastIndexOf(".")+1),e={id:t.fileId,title:"ofd"!=e&&"pdf"!=e?t.fileName.substr(0,t.fileName.lastIndexOf("."))+".pdf":t.fileName,isHandleWrite:!1,openToPage:Number(n)},t={info_id:o.pk,moduleId:o.moduleId,nodeId:o.nodeId,nodeName:o.nodeName,flowId:o.flowId,pId:o.pId,pnId:o.pnId,type:"todo",canBack:!1},dsf.shuke.shGovShuke(e,t,function(t){}))}).catch(function(t){dsf.layer.toast("不能手写签批")})}}},i=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},o._l(o.opinion,function(e,t){return n("div",{key:t,staticClass:"opinionBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.opinionContent||void 0!==e.handwritePageNum&&0<String(e.handwritePageNum).length,expression:"item.opinionContent || (item.handwritePageNum!==undefined && String(item.handwritePageNum).length > 0)"}],staticClass:"opinionText"},[n("span",{domProps:{innerHTML:o._s(e.opinionContent)}}),o._v(" "),void 0!==e.handwritePageNum&&0<String(e.handwritePageNum).length?n("span",{staticStyle:{padding:"color: #999"},on:{click:function(t){return o.toShuke(e)}}},[o._v("\n        有手写"),n("span",{staticStyle:{color:"var(--normal)"}},[o._v("签批意见")])]):o._e()]),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.handwritePic,expression:"item.handwritePic"}],staticClass:"opinionText opinionImg",on:{click:function(t){return o.priviewOpinionImg(e.handwritePic)}}},[n("img",{style:{width:o.dsf.config.commonFlow.opinionImgWidth||"50%"},attrs:{src:e.handwritePic,alt:""}})]),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.time,expression:"item.time"}],staticClass:"opinionTime tr"},[e.signPhoto&&!o.dsf.config.commonForm.hideOpinionSignPhoto?n("img",{attrs:{src:o.dsf.url.getWebPath(e.signPhoto),alt:""}}):n("i",[o._v(o._s(e.userName)+" ")]),o._v("\n      "+o._s(e.time.split(" ")[0])+"\n    ")])])}),0)},[],!1,null,"3fc61854",null).exports},54156:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(26243),i=o.n(e),e=o(29198),n=o(25108),e={props:["metaData","parameters"],components:{round:e.Z},data:function(){return{activeNames:[""],dataTree:[]}},computed:{},mounted:function(){n.log(this.parameters),this.opinion()},methods:{opinion:function(){var e=this;dsf.http.post("/ctrl/czjSw/getCustomOpinons",{moduleId:this.parameters.moduleId,formId:"230612143037vi20jAuOfGo5QYtW6GK",pk:this.parameters.pk,isZb:"协办部门意见"==this.metaData.label?"0":"1"}).then(function(t){n.log(t.data.data),"200"==t.status&&(e.dataTree=t.data.data)})}}},a=(0,o(51900).Z)(e,function(){var n=this,a=n._self._c;return a("van-collapse",{staticClass:"opinionContent",model:{value:n.activeNames,callback:function(t){n.activeNames=t},expression:"activeNames"}},n._l(n.dataTree,function(t,e,o){return a("van-collapse-item",{key:o,attrs:{title:e,name:o,icon:"play"}},[n._l(t,function(t,e){return[0<i()(t.customMap).length?a("round",{attrs:{opinion:t.customMap}}):a("div",{staticClass:"opiniondiv"},[a("p",{staticClass:"opinionText"},[n._v(n._s(t.opinionContent))]),n._v(" "),a("span",{staticClass:"opinionTime"},[n._v("\n                    "+n._s(t.muserName+" "+t.lastUpdataDateShow)+"\n                ")])])]})],2)}),1)},[],!1,null,"339e329a",null).exports},41558:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={props:["metaData"],data:function(){return{}},computed:{nigao:function(){var t;return(null==(t=this.metaData.extra.list)?void 0:t.find(function(t){return"lldjwUqlqHlnyDE"==t.nodeId}))||{}},chuzhang:function(){var t;return(null==(t=this.metaData.extra.list)?void 0:t.find(function(t){return"E8b9eqOTlq9yiUr"==t.nodeId}))||{}},fuchuzhang:function(){var t;return(null==(t=this.metaData.extra.list)?void 0:t.find(function(t){return"J7S7CjOVWTksFCt"==t.nodeId}))||{}},hegao:function(){return this.fuchuzhang.userName?this.fuchuzhang:this.chuzhang}},methods:{}},n=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"controlOpinionView opinionBox"},[e("div",{staticClass:"opinionContent"},[t._v("处长审核：\n    "),t.chuzhang.opinionContent?e("span",[t._v(t._s(t.chuzhang.opinionContent)),e("br")]):t._e(),t._v(" "),e("span",{class:{name:t.chuzhang.opinionContent}},[t._v(t._s(t.chuzhang.userName)+" "+t._s(t.chuzhang.time))])]),t._v(" "),e("div",{staticClass:"opinionContent"},[t._v("核稿：\n    "),t.hegao.opinionContent?e("span",[t._v(t._s(t.hegao.opinionContent)),e("br")]):t._e(),t._v(" "),e("span",{class:{name:t.hegao.opinionContent}},[t._v(t._s(t.hegao.userName)+" "+t._s(t.hegao.time))])]),t._v(" "),e("div",{staticClass:"opinionContent"},[t._v("拟稿：\n    "),t.nigao.opinionContent?e("span",[t._v(t._s(t.nigao.opinionContent)),e("br")]):t._e(),t._v(" "),e("span",{class:{name:t.nigao.opinionContent}},[t._v(t._s(t.nigao.userName)+" "+t._s(t.nigao.time))])])])},[],!1,null,"53fe8ca4",null).exports},53695:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(15036),n=o(25108),e={components:{enclosurePopup:e.Z},props:["parameters","metaData"],data:function(){return{}},computed:{opinion:function(){var t,e=this,o=[];return e.metaData.extra.list&&null!=(t=(o=e.metaData.extra.list).opinionFiles)&&t.forEach(function(t){t.priviewUrl=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.id,"&moduleId=").concat(e.$route.params.moduleId,"&nodeId=").concat(element.nodeId,"&&flowId=").concat(e.parameters.flowId,"&x-auth-token=").concat(loginToken)),t.navtiveUrl=t.filePath,t.initUrl="fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(e.$route.params.moduleId,"&fileName=").concat(t.fileName,"&x-auth-token=").concat(loginToken),(t.fileName.toLowerCase().includes(".png")||t.fileName.toLowerCase().includes(".jpg")||t.fileName.toLowerCase().includes(".mp4"))&&(t.priviewUrl=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(e.$route.params.moduleId,"&fileName=").concat(t.fileName)))}),n.log("opinion ->",o),o}},methods:{priview:function(t){t={fileName:t.fileName,isNew:!0,moduleId:this.parameters.moduleId,officeModuleId:"",nodeId:"-1",flowId:"0",fileId:t.infoId,id:t.id,isHandwrite:"0"};this.$refs.enclosurePopup.open(t)}}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},[o._l(o.opinion,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{staticClass:"opinionContent"},[n("div",{staticClass:"opinionText"},[o._v(o._s(t.opinionContent))]),o._v(" "),t.opinionFiles?n("div",o._l(t.opinionFiles,function(e,t){return n("div",{key:t,staticClass:"opinionFile ellipsis",on:{click:function(t){return o.priview(e)}}},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName)}}),o._v(" "),n("div",{staticClass:"info"},[n("p",{staticClass:"elps"},[o._v(o._s(e.fileName))]),o._v(" "),n("p",{staticClass:"sub"},[o._v(o._s(o.dsf.util.filesizeTostr(e.fileSize)))])])])}),0):o._e(),o._v(" "),n("div",{staticClass:"opinionTime"},[n("span",[o._v(o._s(t.userName))]),o._v(" "),n("span",[o._v(o._s(t.time.split(" ")[0]))])])])])}),o._v(" "),n("enclosurePopup",{ref:"enclosurePopup"})],2)},[],!1,null,"51390f4e",null).exports},78817:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={props:["metaData"],data:function(){return{depName:""}},computed:{opinion:function(){var t=[];return this.metaData.extra.list&&(t=this.metaData.extra.list),n.log(t),this.depName=this.metaData.opinion[0][0].orgName,t}},methods:{}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},o._l(o.opinion,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{staticClass:"opinionContent"},[n("div",{staticClass:"opinionText",domProps:{innerHTML:o._s(t.opinionContent)}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.handwritePic,expression:"item.handwritePic"}]},[n("img",{staticStyle:{width:"50%"},attrs:{src:o.dsf.url.getServerUrl(t.handwritePic),alt:""}})]),o._v(" "),n("div",{staticClass:"opinionTime"},[n("span",[o._v(o._s(t.deptName))]),o._v(" "),n("span",[o._v(o._s(t.time.split(" ")[0]))])])])])}),0)},[],!1,null,"02d3bd2c",null).exports},68419:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={props:["metaData"],data:function(){return{fontStyle:""}},filters:{filterTime:function(t){return n.log(t),t?t.includes("年")?t.split("年")[1]:t:""}},computed:{signPhotoStyle:function(){return dsf.config.commonForm.opinionSignPhotoWidth?{width:dsf.config.commonForm.opinionSignPhotoWidth,height:"auto"}:dsf.config.commonForm.opinionSignPhotoHeight?{height:dsf.config.commonForm.opinionSignPhotoHeight,width:"auto"}:{width:"30%"}}},mounted:function(){var t;this.fontStyle=null!=(t=this.metaData.extra.eatraClass)?t:"KT"}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},[n("div",{staticClass:"opinionBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.metaData.extra.deptname,expression:"metaData.extra.deptname"}],staticClass:"opinionType",staticStyle:{"font-weight":"bold"}},[o._v("\n      "+o._s(o.metaData.extra.deptname)+":\n    ")]),o._v(" "),o._l(o.metaData.extra.list,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{class:["opinionBoxCon","SX_FZKT"==o.fontStyle?"opinionBoxConFZKT":"opinionBoxConKT"]},[n("span",{staticClass:"opinionTextTemp"},[o._v(o._s(t.userName))]),o._v(" "),n("span",{staticClass:"opinionTextTemp"},[o._v("（"+o._s(o._f("filterTime")(t.time))+"）")]),o._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.opinionContent,expression:"item.opinionContent"}],staticClass:"opinionTextTemp"},[o._v("：")]),o._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.opinionContent,expression:"item.opinionContent"}],staticClass:"opinionTextTemp",domProps:{innerHTML:o._s(t.opinionContent)}})]),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.time,expression:"item.time"}],staticClass:"opinionTime tr"},[t.signPhoto&&!o.dsf.config.commonForm.hideOpinionSignPhoto?n("img",{style:o.signPhotoStyle,attrs:{src:o.dsf.url.getWebPath(t.signPhoto),alt:""}}):o._e()])])})],2)])},[],!1,null,"27943a6c",null).exports},75381:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={props:["metaData"],data:function(){return{depName:""}},computed:{opinion:function(){var t,e=[];return this.metaData.extra.list&&(e=this.metaData.extra.list),n.log(e),this.depName=null==(t=this.metaData.opinion)||null==(t=t[0])?void 0:t[0].orgName,e}},methods:{}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},o._l(o.opinion,function(t,e){return n("div",{key:e,staticClass:"opinionBox"},[n("div",{staticClass:"opinionContent"},[n("div",{staticClass:"opinionText",domProps:{innerHTML:o._s(t.opinionContent)}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.handwritePic,expression:"item.handwritePic"}]},[n("img",{staticStyle:{width:"50%"},attrs:{src:t.handwritePic,alt:""}})]),o._v(" "),n("div",{staticClass:"opinionTime"},[n("span",[o._v(o._s(t.orgnameLv1))]),o._v(" "),n("span",[o._v(o._s(t.time.split(" ")[0]))])])])])}),0)},[],!1,null,"35e8dc78",null).exports},48321:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return s}});var i=o(5044),e=o(64830),r=o.n(e),e=o(29198),n=o(15036),a=o(97551),n={props:["metaData","parameters"],components:{enclosurePopup:n.Z,editOpinion:a.Z,round:e.Z},data:function(){return{activeNames:[""],dataTree:[]}},computed:{opinion:function(){var t,o,n,a=this,e=[];return null!=(t=this.metaData.extra.list)&&t.length&&(t=this.metaData.extra.list,o=dsf.util.loadSessionStore("loginToken"),n={},t.forEach(function(e){e.handwritePic&&(e.handwritePic=dsf.url.getServerUrl(e.handwritePic)),e.opinionFiles&&e.opinionFiles.forEach(function(t){t.priviewUrl=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&nodeId=").concat(e.nodeId,"&&flowId=").concat(a.parameters.flowId,"&x-auth-token=").concat(o)),t.navtiveUrl=t.filePath,t.initUrl="fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&fileName=").concat(t.fileName,"&x-auth-token=").concat(o),(t.fileName.includes(".png")||t.fileName.includes(".jpg"))&&(t.priviewUrl=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&fileName=").concat(t.fileName))),t.fileName.includes(".mp4")&&(t.priviewUrl=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.id,"&moduleId=").concat(a.$route.params.moduleId,"&fileName=").concat(t.fileName)))});var t=e;n[e.nodeName]?n[t.nodeName].push(t):n[e.nodeName]=[t]}),r()(n).forEach(function(t){return e.push.apply(e,(0,i.Z)(t))})),0<e.length&&(this.metaData.show=!0),e}},mounted:function(){},methods:{isShowType:function(t,e){return 0==e?t.nodeName:t.nodeName&&t.nodeName!=this.opinion[e-1].nodeName},priview:function(t){t={fileName:t.fileName,isNew:!0,moduleId:this.parameters.moduleId,officeModuleId:"",nodeId:"-1",flowId:"0",fileId:t.infoId,id:t.id,isHandwrite:"0"};this.$refs.enclosurePopup.open(t)}}},s=(0,o(51900).Z)(n,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlOpinionView"},[o._l(o.opinion,function(e,t){return n("div",{key:t,staticClass:"opinionBox"},[[n("div",{directives:[{name:"show",rawName:"v-show",value:e.opinionContent,expression:"item.opinionContent"}],staticClass:"opinionText",class:{current:"处长"==e.nodeName},domProps:{innerHTML:o._s(e.opinionContent)}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.handwritePic,expression:"item.handwritePic"}],staticClass:"opinionText opinionImg",on:{click:function(t){return o.priviewOpinionImg(e.handwritePic)}}},[n("img",{style:{width:o.dsf.config.commonFlow.opinionImgWidth||"50%"},attrs:{src:e.handwritePic,alt:""}})]),o._v(" "),e.opinionFiles&&e.opinionFiles.length<=2?n("div",o._l(e.opinionFiles,function(e,t){return n("div",{key:t,staticClass:"opinionFile ellipsis",on:{click:function(t){return o.priview(e)}}},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName)}}),o._v(" "),n("div",{staticClass:"info"},[n("p",{staticClass:"elps"},[o._v(o._s(e.fileName))]),o._v(" "),n("p",{staticClass:"sub"},[o._v(o._s(o.dsf.util.filesizeTostr(e.fileSize)))])])])}),0):o._e(),o._v(" "),e.opinionFiles&&2<e.opinionFiles.length?n("div",{staticClass:"attachWrap"},o._l(e.opinionFiles,function(e,t){return n("div",{staticClass:"attach",on:{click:function(t){return o.priview(e)}}},[n("div",{staticClass:"title"},[o._v(o._s(e.fileName))]),o._v(" "),n("div",{staticClass:"icon elps"},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName),alt:""}}),n("span",[o._v(o._s(o.dsf.util.filesizeTostr(e.fileSize)))])])])}),0):o._e(),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.time,expression:"item.time"}],staticClass:"opinionTime tr",class:{current:"处长"==e.nodeName}},[e.signPhoto&&!o.dsf.config.commonForm.hideOpinionSignPhoto?n("img",{attrs:{src:o.dsf.url.getWebPath(e.signPhoto),alt:""}}):n("i",[o._v(o._s(e.userName)+" ")]),o._v("\n            "+o._s(e.time)+"\n        ")])]],2)}),o._v(" "),n("enclosurePopup",{ref:"enclosurePopup"})],2)},[],!1,null,"c3b7e2ca",null).exports},14622:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={mixins:[o(13852).Z],props:["parameters","formMeta"],data:function(){return{opinion:[],controlData:{}}},created:function(){this.initData()},computed:{filterPath:function(){return function(t){return"fn/file/downloadImage?fileName="+t.split("/")[2]}},filterTime:function(){return function(t){return t.split(" ")[0]}}},methods:{initData:function(){var e=this,t={nodeIds:this.metaData.extra.nodeIds,dateFormat:this.metaData.extra.dateFormat,proxyNodeIds:this.metaData.extra.proxyNodeIds,templeId:this.metaData.extra.templeId,rules:this.metaData.extra.rules,nodeId:this.parameters.nodeId,pk:this.parameters.pk,moduleId:this.parameters.moduleId};dsf.http.post("fn/proxyOpinion/getProxyOpinion",t).then(function(t){t.data.type="success",e.opinion=t.data.data.opinions})},isShowType:function(t,e){return 0==e?t.nodeName:t.nodeName&&t.nodeName!=this.opinion[e-1].nodeName}}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"controlconvertopinionview"},o._l(o.opinion,function(e,t){return n("div",{key:t,staticClass:"opinionBox"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.opinionContent,expression:"item.opinionContent"}],staticClass:"opinionText",domProps:{innerHTML:o._s(e.opinionContent)}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.handwritePic,expression:"item.handwritePic"}],staticClass:"opinionText opinionImg",on:{click:function(t){return o.priviewOpinionImg(e.handwritePic)}}},[n("img",{style:{width:o.dsf.config.commonFlow.opinionImgWidth||"50%"},attrs:{src:e.handwritePic,alt:""}})]),o._v(" "),e.opinionFiles&&2<e.opinionFiles.length?n("div",{staticClass:"attachWrap"},o._l(e.opinionFiles,function(e,t){return n("div",{staticClass:"attach",on:{click:function(t){return o.priview(e)}}},[n("div",{staticClass:"title"},[o._v(o._s(e.fileName))]),o._v(" "),n("div",{staticClass:"icon elps"},[n("img",{attrs:{src:o.dsf.util.getFileTypeIcon(e.fileName),alt:""}}),n("span",[o._v(o._s(o.dsf.util.filesizeTostr(e.fileSize)))])])])}),0):o._e(),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.edateTimeShow,expression:"item.edateTimeShow"}],staticClass:"opinionTime tr"},[e.signPhoto&&!o.dsf.config.commonForm.hideOpinionSignPhoto?n("img",{attrs:{src:o.dsf.url.getWebPath(o.filterPath(e.signPhoto)),alt:""}}):n("i",[o._v(o._s(e.userName)+" ")]),o._v("\n      "+o._s(o.filterTime(e.edateTimeShow))+"\n    ")])])}),0)},[],!1,null,"5f012ff7",null).exports},47769:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"SignForm",props:{formData:{type:Object,default:function(){}},formMeta:{type:Object,default:function(){}},allFile:{type:Array,default:function(){return[]}},handWrittenFile:{type:Array,default:function(){return[]}}},components:{EnclosurePreview:function(){return Promise.all([o.e(97805),o.e(82060)]).then(o.bind(o,82060))}},data:function(){return{url:"",currentFile:null,fileData:null}},created:function(){var t=this;this.currentFile=this.handWrittenFile.length?this.handWrittenFile[0]:null,this.$eventBus.OnQuanyue(this,function(){t.currentFile.url+="&temp"+Math.random()}),this.fileData={info_id:this.$route.params.pk||this.formMeta.parameters.pk||this.formData.main.A0001.value||"",moduleId:this.$route.params.moduleId||this.formMeta.parameters.moduleId,nodeId:this.formMeta.parameters.nodeId||"",nodeName:this.formMeta.parameters.nodeName||"",flowId:this.formMeta.parameters.flowId||"",pId:this.formMeta.parameters.pId||"",pnId:this.formMeta.parameters.pnId||"",uploadAttach:this.formMeta.parameters.uploadAttach||""}},mounted:function(){},methods:{selectFile:function(t){this.currentFile=t}}},n=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"sign-form"}},[e("div",{staticClass:"content"},[t.currentFile?e("div",[t.dsf.config.commonForm.LocalDocPreview?e("enclosure-preview",{ref:"tabEnclosurePreview",attrs:{file:t.currentFile,isPreview:!1,"form-info":t.fileData,formMeta:t.formMeta,isTabType:!0}}):t._e(),t._v(" "),t.dsf.config.commonForm.LocalDocPreview?t._e():e("iframe",{key:t.currentFile.url,ref:"currentFile",attrs:{src:"1"==t.dsf.config.setting["SYS-MOBILE-ATTACH-0006"]?t.currentFile.handwritingUrl:t.currentFile.url,frameborder:"0"}})],1):e("commonempty",{attrs:{description:"暂无签批文件"}})],1)])},[],!1,null,"1022848f",null).exports},37738:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(64830),n=o.n(e),a=(o(13852),o(25108)),e={props:["formData","formMeta"],data:function(){return{default_avatar:'this.src="'+o(60710)+'"',controlData:{rules:[],maxlength:null,showWordLimit:!0,placeholder:""},readonly:!1,opinion:this.formData.opinion}},computed:{opinionText:function(){var e=this,o=null;return n()(this.opinion).forEach(function(t){t.forEach(function(t){!o||dsf.date.parse(o.opinionDate).getTime()<dsf.date.parse(t.opinionDate).getTime()?o=t:dsf.date.parse(o.opinionDate).getTime()==dsf.date.parse(t.opinionDate).getTime()&&(o=t.nodeName==e.formMeta.parameters.nodeName?o:t)})}),o?o.opinionContent:""},promoter:function(){return this.formData.main.A0023?this.formData.main.A0023.value:""},status:function(){return this.formData.main.A0009||""},title:function(){return"".concat(this.formData.main.A0011?this.formData.main.A0011.value:"","发起的").concat(this.formData.main.A0005?this.formData.main.A0005.value:"")},avatar:function(){return dsf.url.getWebPath("/fn/mobilePhoto/download?id=".concat(this.formData.main.A0010.value,"&time=").concat((new Date).getTime()))}},created:function(){a.log()},methods:{inpfn:function(){this.$emit("input",this.value)}}},i=(0,o(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",{staticClass:"special-title"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.avatar,onerror:t.default_avatar,alt:""}})]),t._v(" "),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),t.promoter?e("div",[t._v("\r\n      所属部门："),e("span",{staticClass:"promoter"},[t._v(t._s(t.promoter))])]):t._e(),t._v(" "),t.status?e("div",{style:{color:2==t.status.value?"#13ba84":"#E6A23C"}},[t._v("\r\n      "+t._s(t.status.text)+"\r\n    ")]):t._e()])])},[],!1,null,"1e1c96d4",null).exports},97430:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(13852),n=o(25108),e={mixins:[e.Z],props:{formMeta:{type:Object,default:function(){return{}}},metaData:{type:Object,default:function(){return{}}}},data:function(){return{supervisionInfo:[]}},created:function(){this.initData()},methods:{initData:function(){var e=this,t={id:this.formMeta.parameters.pk,showLevel:5};dsf.http.post("fn/superviseV6/status/getFeedbackInfo",t).then(function(t){200==t.data.code&&(e.supervisionInfo=t.data.data)})},detail:function(t){n.log(t),this.$router.push({path:"/commonForm/210608105939mkuTUSzHdhowHPHxlY8/".concat(t.id),query:{isPreview:1}})}}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"superviseV6StatusBottom"},[o._l(o.supervisionInfo.master,function(t){return n("div",o._l(t,function(e){return n("div",{key:e.id},[n("div",{staticClass:"deptTitle"},[o._v(o._s("-"+e.deptName+"（主办）"))]),o._v(" "),n("div",{staticClass:"supervisionContent"},[o._v(o._s("●"+e.feedbackDate+"   "+e.feedbackText)+"\n        "),n("span",{staticClass:"detailbt",on:{click:function(t){return o.detail(e)}}},[o._v("[详情]")])])])}),0)}),o._v(" "),o._l(o.supervisionInfo.minor,function(t){return n("div",o._l(t,function(e){return n("div",{key:e.id},[n("div",{staticClass:"deptTitle"},[o._v(o._s("-"+e.deptName+"（协办）"))]),o._v(" "),n("div",{staticClass:"supervisionContent"},[o._v(o._s("●"+e.feedbackDate+"   "+e.feedbackText)+"\n        "),n("span",{staticClass:"detailbt",on:{click:function(t){return o.detail(e)}}},[o._v("[详情]")])])])}),0)}),o._v(" "),o._l(o.supervisionInfo.notFeed,function(t){return n("div",{key:t.id},[n("div",{staticClass:"deptTitle"},[o._v(o._s("-"+t.dutyUnitText+"（"+t.taskTypeText+"）"))]),o._v(" "),n("div",{staticClass:"supervisionContent"},[o._v("●未反馈 ")])])})],2)},[],!1,null,"2f7f7e3c",null).exports},77869:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"testController"},n=(0,o(51900).Z)(e,function(){return(0,this._self._c)("div",[this._v("\n    testController\n")])},[],!1,null,null,null).exports},91938:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={props:["value"],name:"textbox",data:function(){return{bindValue:this.value}}},n=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.bindValue,expression:"bindValue"}],attrs:{type:"textbox"},domProps:{value:e.bindValue},on:{input:function(t){t.target.composing||(e.bindValue=t.target.value)}}})])},[],!1,null,null,null).exports},37460:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(5044),e={name:"TransactionActionSheet",model:{prop:"value",event:"change"},props:{value:Boolean,metaData:Object},data:function(){return{isShowActionSheet:!1,transactionActions:[{name:"送审",method:"send",value:1},{name:"会文",method:"send",value:2},{name:"办结",method:"documentFilingForm",value:3}]}},mounted:function(){},methods:{closeActionSheet:function(){this.$emit("closeTransactionActionSheet")},onSelect:function(t){t.params=this.getButtonParams(),"转发文"==t.name?dsf.layer.alert({title:"提示",message:"请在pc端中，进行转发文操作",confirmButtonText:"知道了"},function(){}):(t.name,this.$emit("actionSelect",t))},getButtonParams:function(){var t=[].concat((0,n.Z)(this.metaData.buttons.mainButtons),(0,n.Z)(this.metaData.buttons.commonButtons)).find(function(t){return"transaction"==t.action}),e={};return t&&t.parameters&&t.parameters.forEach(function(t){e[t.key]=t.value}),e}}},a=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"transaction-action-sheet"}},[t("van-action-sheet",{attrs:{value:e.value,actions:e.transactionActions},on:{input:function(t){return e.$emit("change",t)},select:e.onSelect}})],1)},[],!1,null,"0cc60d7b",null).exports},33259:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return d}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(45604),l=o(81926),c=o(25108);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}var e={name:"formLayout",props:["isMobileForm","metaData","controlData","isSubForm","subFormIndex","parameters","allFile","rowCteNum","formData","formMeta","pformData","pformMeta","relationList","lastControl","formType","topformData","topformMeta","formId","subFormLayout","formParams","labelSpan"],components:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}({},e.Z),data:function(){return{testValue:l.Z.controls[0],ifRowLayout:!0,textLayout:"right",defaultVal:"",fileCode:!0,configlayout:"col",device:"pad",tabControls:["controlSubFormPrimaryCPYD","controlSubFormPrimary","controlMobileFlowInfo","controlRightFileList","controlFileRelation","controlMobileFl","controlFileUpload"],padTabControls:["controlSubFormPrimaryCPYD","controlMobileFlowInfo","controlMobileFl"]}},created:function(){var e=this;this.ifRowLayout=["controlEditor","controlTextarea"].filter(function(t){return t==e.metaData.controlType}).length,this.configlayout=dsf.config.commonForm.layout,this.textLayout=dsf.config.commonForm.textlayout||"right"},computed:{isColLayout:function(){return-1<["controlNotePaperToAndGo","flowHandle","handleTips","controlOpinionTagView","controlMobileShareInfo","controlShareRead","controlShareView","controlNestedForm","controlSubFormPrimaryCPYD","controlSubFormPrimary","controlFileUpload","formTitle","controlEditor","controlTextarea","controlMobileFlowInfo","controlRightFileList","controlFileRelation","controlMobileFl","controlEditOpinion","controlOpinionView","controlShareOpinion","controlProposedOpinion","controlMultiDeptOpinion","controlconvertopinionview","superviseV6StatusBottom"].indexOf(this.metaData.controlType)||"col"==dsf.config.commonForm.layout||"controlFileCode"==this.metaData.controlType&&this.metaData.privilege.editable||"controlUser"==this.metaData.controlType&&!this.metaData.privilege.editable&&"showTelicon"==this.metaData.extra.eatraClass},isTextRight:function(){return this.subFormLayout||("row"==dsf.config.commonForm.layout&&"right"==this.textLayout?"textRight":void 0)},isTitleField:function(){var t=!1;return t=this.metaData.defaultValue.value&&(-1<this.metaData.defaultValue.value.indexOf("$title$")||-1<this.metaData.defaultValue.value.indexOf("$tend$"))?!0:t},getClass:function(){return"right"==this.textLayout?"pad_ rowLayout":"pad__left rowLayout_left"},rowSpanLable:function(){return dsf.config.commonForm.WangStyle?4:8},rowSpanText:function(){return dsf.config.commonForm.WangStyle?20:16},isShowLable:function(){return null==this.metaData.showLable||null==this.metaData.showLable||1==this.metaData.showLable}},methods:{confirmFn:function(t){c.log(this.controlData)},inpFn:function(t){this.controlData=t},selectuser:function(t){},getOptions:function(t){},controlAction:function(){this.$refs.control.showPicker()},changeFileCode:function(t){this.fileCode=t},controlEditOpinion:function(t){this.$emit("controlEditOpinion",t)},controlShareOpinion:function(t){this.$emit("controlShareOpinion",t)}}},d=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",height:"100%"}},[e.isMobileForm?[t("van-row",{staticClass:"layout_box",style:{backgroundColor:"controlMobileFl"==e.metaData.controlType||"controlSubFormPrimary"==e.metaData.controlType?"":"#fff",padding:-1==e.tabControls.indexOf(e.metaData.controlType)?"".concat(e.dsf.config.commonForm.controlPadding||"0.3rem"," 0"):"0"},attrs:{type:"flex",align:"center"}},[e.isShowLable&&-1==e.tabControls.indexOf(e.metaData.controlType)?t("van-col",{style:{width:e.metaData.icon?"1rem":""},attrs:{span:e.isColLayout?24:e.metaData.extra.width||8}},[t("control-label",{attrs:{"meta-data":e.metaData}})],1):e._e(),e._v(" "),t("van-col",{staticClass:"noPadding",class:e.isTextRight,style:{padding:-1==e.tabControls.indexOf(e.metaData.controlType)?"":"0",width:-1==e.tabControls.indexOf(e.metaData.controlType)&&e.metaData.icon?"calc(100% - 1rem)":""},attrs:{span:e.isColLayout||!e.isShowLable?24:e.metaData.extra.width?24-e.metaData.extra.width:16}},["controlSubFormPrimary"==e.metaData.controlType||"controlSubFormPrimaryCPYD"==e.metaData.controlType?t(e.metaData.controlType,{ref:"subform",tag:"component",attrs:{formMeta:e.formMeta.subform[e.metaData.metaId],"meta-data":e.metaData,formData:e.formData.multinfos[e.metaData.metaId],formId:e.metaData.metaId,"form-params":e.formParams,foreign:e.formMeta.parameters.pk,topformData:e.topformData,topformMeta:e.topformMeta}}):"nestedForm"==e.formType&&"controlCheckBox"==e.metaData.controlType?t("controlCheckBoxPC",{ref:"control",tag:"component",class:{"readonly-font":!e.metaData.privilege.editable},attrs:{allFile:e.allFile,"meta-data":e.metaData,formId:e.formId,subFormIndex:e.subFormIndex,parameters:e.parameters,topformData:e.topformData,topformMeta:e.topformMeta,relationList:e.relationList},on:{controlEditOpinion:e.controlEditOpinion,controlShareOpinion:e.controlShareOpinion,input:e.inpFn,confirm:e.confirmFn,selectuser:e.selectuser,getOptions:e.getOptions},model:{value:e.controlData,callback:function(t){e.controlData=t},expression:"controlData"}}):t(e.metaData.controlType,{ref:e.metaData.controlType,tag:"component",class:{"readonly-font":!e.metaData.privilege.editable},attrs:{allFile:e.allFile,"meta-data":e.metaData,subFormIndex:e.subFormIndex,parameters:e.parameters,formId:e.formId,formData:e.formData,formMeta:e.formMeta,pformData:e.pformData,pformMeta:e.pformMeta,topformData:e.topformData,topformMeta:e.topformMeta,relationList:e.relationList},on:{controlEditOpinion:e.controlEditOpinion,controlShareOpinion:e.controlShareOpinion,input:e.inpFn,confirm:e.confirmFn,selectuser:e.selectuser,getOptions:e.getOptions},model:{value:e.controlData,callback:function(t){e.controlData=t},expression:"controlData"}})],1)],1)]:[t("van-row",{staticClass:"pad_layout_box",attrs:{type:"flex",align:"center"}},[e.isShowLable&&-1==e.padTabControls.indexOf(e.metaData.controlType)?t("van-col",{attrs:{span:(e.labelSpan||4)*e.rowCteNum}},[t("control-label",{attrs:{"meta-data":e.metaData}})],1):e._e(),e._v(" "),t("van-col",{staticClass:"noPadding",style:{padding:-1==e.padTabControls.indexOf(e.metaData.controlType)?"":"0"},attrs:{span:-1<e.padTabControls.indexOf(e.metaData.controlType)||!e.isShowLable?24:24-(e.labelSpan||4)*e.rowCteNum}},["controlSubFormPrimary"==e.metaData.controlType||"controlSubFormPrimaryCPYD"==e.metaData.controlType?t(e.metaData.controlType,{ref:"subform",tag:"component",attrs:{formMeta:e.formMeta.subform[e.metaData.metaId],"meta-data":e.metaData,formData:e.formData.multinfos[e.metaData.metaId],formId:e.metaData.metaId,"form-params":e.formParams,foreign:e.formMeta.parameters.pk,topformData:e.topformData,topformMeta:e.topformMeta}}):"nestedForm"==e.formType&&"controlCheckBox"==e.metaData.controlType?t("controlCheckBoxPC",{ref:"control",tag:"component",class:{"readonly-font":!e.metaData.privilege.editable},attrs:{allFile:e.allFile,"meta-data":e.metaData,formId:e.formId,subFormIndex:e.subFormIndex,parameters:e.parameters,topformData:e.topformData,topformMeta:e.topformMeta,relationList:e.relationList},on:{controlEditOpinion:e.controlEditOpinion,controlShareOpinion:e.controlShareOpinion,input:e.inpFn,confirm:e.confirmFn,selectuser:e.selectuser,getOptions:e.getOptions},model:{value:e.controlData,callback:function(t){e.controlData=t},expression:"controlData"}}):t(e.metaData.controlType,{ref:"control",tag:"component",class:{"readonly-font":!e.metaData.privilege.editable},attrs:{allFile:e.allFile,"meta-data":e.metaData,subFormIndex:e.subFormIndex,parameters:e.parameters,formData:e.formData,formMeta:e.formMeta,formId:e.formId,pformData:e.pformData,pformMeta:e.pformMeta,topformData:e.topformData,topformMeta:e.topformMeta,relationList:e.relationList},on:{controlEditOpinion:e.controlEditOpinion,controlShareOpinion:e.controlShareOpinion,input:e.inpFn,confirm:e.confirmFn,selectuser:e.selectuser,getOptions:e.getOptions},model:{value:e.controlData,callback:function(t){e.controlData=t},expression:"controlData"}})],1)],1)]],2)},[],!1,null,"156ac5b4",null).exports},5491:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return d}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(45604),l=o(81926),c=o(25108);function u(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}var e={name:"formLayout",props:["metaData","controlData","isSubForm","subFormIndex","parameters","allFile"],components:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):u(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}({},e.Z),data:function(){return{testValue:l.Z.controls[0],ifRowLayout:!0,textLayout:"right",defaultVal:"",fileCode:!0,configlayout:"col"}},created:function(){var e=this;c.log("菜品");this.ifRowLayout=["controlEditor","controlTextarea"].filter(function(t){return t==e.metaData.controlType}).length,this.configlayout=dsf.config.commonForm.layout,this.textLayout=dsf.config.commonForm.textlayout||"right"},computed:{isTitleField:function(){var t=!1;return t=this.metaData.defaultValue.value&&(-1<this.metaData.defaultValue.value.indexOf("$title$")||-1<this.metaData.defaultValue.value.indexOf("$tend$"))?!0:t},getClass:function(){return"right"==this.textLayout?"layout_box rowLayout":"layout_box_left rowLayout_left"},rowSpanLable:function(){return dsf.config.commonForm.WangStyle?4:8},rowSpanText:function(){return dsf.config.commonForm.WangStyle?20:16},isShowLable:function(){return null==this.metaData.showLable||null==this.metaData.showLable||1==this.metaData.showLable}},methods:{confirmFn:function(t){c.log(this.controlData)},inpFn:function(t){this.controlData=t},selectuser:function(t){},getOptions:function(t){c.log("意见赋值",this.controlData)},controlAction:function(){this.$refs.control.showPicker()},changeFileCode:function(t){this.fileCode=t},controlEditOpinion:function(t){c.log(t),this.$emit("controlEditOpinion",t)}}},d=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"formLayoutCPYD",staticStyle:{width:"100%"}},[t(e.metaData.controlType,{ref:"control",tag:"component",class:{"readonly-font":!e.metaData.privilege.editable},attrs:{allFile:e.allFile,"meta-data":e.metaData,parameters:e.parameters,subFormIndex:e.subFormIndex},on:{input:e.inpFn,confirm:e.confirmFn,selectuser:e.selectuser,getOptions:e.getOptions},model:{value:e.controlData,callback:function(t){e.controlData=t},expression:"controlData"}})],1)},[],!1,null,"07f531ea",null).exports},7045:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(88561),e={name:"chatFrame",props:["formData","formMeta"],data:function(){return{pk:this.$route.params.pk,moduleId:this.$route.params.moduleId,chatLocation:dsf.config.formChat.chatLocation,chaturl:""}},mounted:function(){this.chaturl=this.chatLocation+"?userid="+n.Z.loadSessionStore("user").user_id+"#/app/groupchat?targetId="+this.pk+"&type=3"}},a=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",{staticClass:"ds-enclosure-pre"},[this.chaturl&&0<this.chaturl.length?t("iframe",{attrs:{id:"filePreview",src:this.chaturl,frameborder:"0"}}):t("commonempty",{attrs:{description:"暂无预览"}})],1)},[],!1,null,null,null).exports},6236:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var e=a(18428),i=a.n(e),e=a(8450),s=a.n(e),l=a(25108),e={name:"feedbackHandle",components:{EnclosurePreview:function(){return Promise.all([a.e(97805),a.e(82060)]).then(a.bind(a,82060))}},props:{formMeta:{default:function(){return{}},type:Object},formParams:{default:function(){return{}},type:Object}},data:function(){return{ExtraPageList:{},videoPreview:!1,previewVideo:null,imgPreview:!1,previewImg:[],fileUrl:"",isShow:!1,fileType:{pdf:["pdf"],img:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],txt:["txt","sql","xml","html","css","js","java","php","bat","log"],word:["docx","docm","doc","dotx","dotm","dot"],xls:["xlsx","xlsm","xlsb","xls","xltx","xltm","xlt","xlam","xla","ods"],ppt:["pptx","pptm","ppt","potx","potm","pot","ppsx","ppsm","pps","ppam","ppa"]},hasFilePng:["ai","cloud","html","img","jpg","mp3","mp4","pdf","png","ppt","psd","rar","txt","word","wps","xls","zip","ofd"],fileData:{},popFile:{},RouteLeave:!0}},created:function(){this.fileData={info_id:this.$route.params.pk||this.formMeta.parameters.pk||this.formData.main.A0001.value||"",moduleId:this.$route.params.moduleId||this.formMeta.parameters.moduleId,nodeId:this.formMeta.parameters.nodeId||"",nodeName:this.formMeta.parameters.nodeName||"",flowId:this.formMeta.parameters.flowId||"",pId:this.formMeta.parameters.pId||"",pnId:this.formMeta.parameters.pnId||"",uploadAttach:this.formMeta.parameters.uploadAttach||""};var o=this,t={moduleId:this.formParams.moduleId,pk:this.formParams.pk};null!=this.formParams.solicitMode&&(t.solicitMode=this.formParams.solicitMode),null!=this.formParams.viewMode&&(t.viewMode=this.formParams.viewMode),null!=this.formParams.showFileTypes&&(t.showFileTypes=this.formParams.showFileTypes),dsf.http.post("/fn/extraPage/getExtraPageList",t).then(function(t){t=t.data,l.log(t),o.ExtraPageList=t.data,t=o.ExtraPageList[0].fileList.findIndex(function(t){return t.fileName.includes(".ofd")});o.ExtraPageList[0].fileList.splice(t,1),o.ExtraPageList.forEach(function(t){0==t.number&&(t.title="初始办理"),t.fileList.forEach(function(t){var e=o.getIconClass(t.fileName);o.$set(t,"imgType",e)})})})},methods:{closed:function(){this.fileData={info_id:this.$route.params.pk||this.formMeta.parameters.pk||this.formData.main.A0001.value||"",moduleId:this.$route.params.moduleId||this.formMeta.parameters.moduleId,nodeId:this.formMeta.parameters.nodeId||"",nodeName:this.formMeta.parameters.nodeName||"",flowId:this.formMeta.parameters.flowId||"",pId:this.formMeta.parameters.pId||"",pnId:this.formMeta.parameters.pnId||"",uploadAttach:this.formMeta.parameters.uploadAttach||""}},openFile:function(t,e,o){l.log(e);var n=t.split(".").pop(),a=(new Date).getTime(),a="fn/file/download?infoId=".concat(e.infoId,"&fileId=").concat(e.id,"&fileName=").concat(e.fileName,"&nrType=").concat(n,"&moduleId=").concat(this.formParams.moduleId,"&x-auth-token=").concat(dsf.util.loadSessionStore("loginToken"),"&fullfilename=").concat(a).concat(e.fileName),i="?fileId=".concat(e.id,"&moduleId=").concat(this.formParams.moduleId,"&nodeId=").concat(this.formMeta.parameters.nodeId,"&flowId=").concat(this.formMeta.parameters.flowId,"&x-auth-token=").concat(dsf.util.loadSessionStore("loginToken")),r=dsf.url.getServerUrl("fn/office/openMobileOffice"+i);-1<["rar","zip","7z","mov"].indexOf(n)?dsf.layer.toast("该文件无法在移动端预览"):"mp4"==n?(this.videoPreview=!0,this.previewVideo=r):0==t.indexOf("http")&&-1<t.indexOf("response-content-type=image")?this.localImgPreview(t):-1<["png","jpg","jpeg","bmp","gif"].indexOf(n)?this.localImgPreview(dsf.url.getServerUrl("fn/mobileFileDownload/download"+i)):navigator.userAgent.includes("DreamSoft")?dsf.config.commonForm.xsfWPSofd&&"ofd"==n?this.XsfOpenFile(a,e):dsf.config.commonForm.nativeWps?dsf.config.commonForm.LocalPdfPreview||"ofd"==n?this.localFilePreviewOrEdit(r,e):this.wpsOpen(e,a,n,r):null==(t=dsf.config.commonForm.dianJu)||!t.isEnable||"ofd"!=n||dsf.config.commonForm.LocalPdfPreview?this.localFilePreviewOrEdit(r,e):this.dianJuFileOpen(e,a,n,r):this.localFilePreviewOrEdit(r,e)},localImgPreview:function(t){this.imgPreview=!0,this.previewImg=[t]},localFilePreviewOrEdit:function(t,e,o){var n;dsf.config.commonForm.webViewPreview?(n=dsf.url.getRootPath()+t.replace("../",""),xsfWindow.openWebView({title:e.title,url:n,colorString:"#111111"})):(dsf.config.commonForm.LocalDocPreview?(n={moduleId:e.relaModuleId,flowId:this.formMeta.parameters.flowId||"",nodeId:this.formMeta.parameters.nodeId||"",isHandwrite:-1},n=i()(e,n),this.popFile=n,this.fileUrl=""):this.fileUrl=t,this.isShow=!0)},XsfOpenFile:function(t,e){xsfWPS.open(dsf.url.getRootPath()+t,e.fileName,!0,!1,function(t){},function(t){})},wpsOpen:function(t,e,o,n){l.log("wpssss");var a=this,i=dsf.url.getRootPath(),e={keepCallback:!0,downUrl:i+e,saveUrl:i+"fn/mobileOffice/upload?fileId=".concat(t.id,"&moduleId=").concat(this.formParams.moduleId,"&pnId=").concat(this.formMeta.parameters.pnId||"","&nodeName=").concat(this.formMeta.parameters.nodeName||"","&fileType=1&infoId=").concat(t.infoId,"&extension=").concat(o,"&x-auth-token=").concat(dsf.util.loadSessionStore("loginToken")),fileName:t.fileName,openWithWPS:!0,uploadFile:!0,openMode:"readOnly",enterReviseMode:!1,showReviewingPaneRightDefault:!0,userName:dsf.util.loadSessionStore("user").name};a.$route.query.isdjOpen?window.androidMethod.openNative(s()({action:"$WPS.downAndOpen",data:e})):$WPS.downAndOpen(e,function(t){l.log(t),"success"==t.result&&"upload"==t.action&&(a.fileUrl="",setTimeout(function(){a.fileUrl=n+"&temp="+new Date,l.log(a.fileUrl,"重置url成功")},500))},function(t){l.log("错误回调",t)})},dianJuFileOpen:function(t,e,o,n){var a=this,i=dsf.url.getRootPath(),o=i+"fn/mobileOffice/upload?fileId=".concat(t.id,"&moduleId=").concat(this.formParams.moduleId,"&pnId=").concat(this.formMeta.parameters.pnId||"","&nodeName=").concat(this.formMeta.parameters.nodeName||"","&fileType=1&infoId=").concat(t.infoId,"&extension=").concat(o,"&x-auth-token=").concat(dsf.util.loadSessionStore("loginToken")),r=i+e,i={fileUrl:r,title:t.fileName,canEdit:!1,uploadUrl:o,keyId:t.id,userName:dsf.util.loadSessionStore("user").name};l.log("点聚参数",i),xsfCommon.dianJuSdk(s()(i),function(t){t=JSON.parse(t),l.log("打开点聚的回调参数",t),"dianjuUploadSuccess"==t.message?(a.fileUrl="",setTimeout(function(){a.fileUrl=n+"&temp="+new Date,l.log(a.fileUrl,"重置url成功")},500),a.$bus.emit("iSignatureSend",{act:"send"})):"dianjuOpenSuccess"!=t.message&&"dianjuOpenError"==t.message&&dsf.layer.alert({message:"文件打开失败:"+r})},function(t){})},downFile:function(t,e,o){l.log(e);var t=t.split(".").pop(),n=(new Date).getTime(),a=dsf.layer.loading("下载中..."),t="fn/file/download?infoId=".concat(e.infoId,"&fileId=").concat(e.id,"&fileName=").concat(e.fileName,"&nrType=").concat(t,"&moduleId=").concat(this.formParams.moduleId,"&x-auth-token=").concat(dsf.util.loadSessionStore("loginToken"),"&fullfilename=").concat(n).concat(e.fileName),n=encodeURI(dsf.url.getRootPath()+t),i=e.fileName.substr(0,e.fileName.indexOf("."))+moment(new Date).format("YYYYMMDDHHss")+e.fileName.substr(e.fileName.indexOf(".")),r="/Download/item/"+i;this.$route.query.isdjOpen?(window.openNativeResult=function(t){dsf.layer.closeLoading(a),"FileTransfer.download"==t.action&&(t=JSON.parse(t),l.log(t),"source"in t?(dsf.layer.toast("下载失败！",!1),l.log("download error source "+t.source),l.log("download error target "+t.target),l.log("upload error code"+t.code)):dsf.layer.alert({message:"文件已下载到 "+r}))},t={array:[n,r,!1,"id",{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}]},window.androidMethod.openNative(s()({action:"FileTransfer.download",data:t}))):(e=new FileTransfer,r=cordova.file.externalRootDirectory+"/Download/item/"+i,e.download(n,r,function(t){dsf.layer.alert({message:"文件已下载到 /Download/item/"+i})},function(t){l.log("download error source "+t.source),l.log("download error target "+t.target),l.log("upload error code"+t.code)},!1,{headers:{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}}))},getIconClass:function(t){var e,o=t.lastIndexOf("."),n=-1<o?t.substring(o+1,t.length).toLowerCase():"";if(-1<this.hasFilePng.indexOf(n))return a(83887)("./".concat(n,".png"));for(e in this.fileType)if(-1<this.fileType[e].indexOf(n))return a(83887)("./".concat(e,".png"));return a(26206)},openRela:function(o){var n=this,t={moduleId:o.relaModuleId,pk:o.relaId,relaId:o.relaId,isEnterTodo:-1},e="iPad"==dsf.config.clientType?"fn/xform/getInfo?hd=1":"fn/xform/getInfo";dsf.http.get(e,t).then(function(t){var e=t.data.struct.parameters;n.fileData={info_id:e.pk,moduleId:e.moduleId,nodeId:e.nodeId||"",nodeName:e.nodeName||"",flowId:e.flowId||"",pId:e.pId||"",pnId:e.pnId||"",uploadAttach:e.uploadAttach||""},dsf.http.post("ctrl/mobileAttachmentFile/getMobileFormAttachmentType3",{moduleId:o.relaModuleId,infoId:o.relaId}).then(function(t){l.log(t);t=t.data,t="?fileId=".concat(t.id,"&moduleId=").concat(t.moduleId,"&nodeId=").concat(e.nodeId,"&flowId=").concat(e.flowId,"&x-auth-token=").concat(dsf.util.loadSessionStore("loginToken")),t=dsf.url.getServerUrl("fn/office/openMobileOffice"+t);n.fileUrl=t,n.isShow=!0})})}}},o=(0,a(51900).Z)(e,function(){var n=this,a=n._self._c;return a("div",{staticClass:"feedbackHandle"},[n._l(n.ExtraPageList,function(o,t){return[a("div",{staticClass:"header"},[a("span",[n._v(n._s(o.title))])]),n._v(" "),n._l(o.fileList,function(e){return a("div",{key:e.id,staticClass:"center"},[a("div",{staticClass:"r_l",on:{click:function(t){return n.openFile(e.filePath,e,o)}}},[a("img",{attrs:{src:e.imgType,alt:""}}),n._v(" "),a("div",{staticClass:"t_b"},[a("div",{staticClass:"filename"},[n._v(n._s(e.fileName))]),n._v(" "),e.showFileSize?a("div",{staticClass:"filesize"},[n._v(n._s(e.showFileSize))]):n._e()])]),n._v(" "),a("div",{staticClass:"fileBtn"},[a("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.openFile(e.filePath,e)}}},[n._v("\n          预览\n        ")]),n._v(" "),"app"!=n.dsf.util.getClientName()||"ios"==n.dsf.util.checkSystem()||n.dsf.config.commonForm.NoDownload?n._e():a("div",{staticClass:"fileButton",on:{click:function(t){return t.stopPropagation(),n.downFile(e.filePath,e,"downFile")}}},[n._v("\n          下载\n        ")])])])}),n._v(" "),n._l(o.relationList,function(e){return a("div",{key:e.id,staticClass:"center"},[a("div",{staticClass:"r_l",on:{click:function(t){return n.openRela(e)}}},[a("i",{staticClass:"iconfont iconfile iconType"}),n._v(" "),a("div",{staticClass:"relabt"},[n._v(n._s(e.relaBt))])])])})]}),n._v(" "),a("van-popup",{style:{height:"100%"},attrs:{position:"bottom","get-container":"#app"},model:{value:n.videoPreview,callback:function(t){n.videoPreview=t},expression:"videoPreview"}},[a("van-nav-bar",{on:{"click-left":function(t){n.videoPreview=!1}},scopedSlots:n._u([{key:"left",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}}),a("span",[n._v("返回")])]},proxy:!0}])}),n._v(" "),a("div",{staticClass:"videoBox",on:{click:function(t){n.videoPreview=!1}}},[n.videoPreview?a("video",{staticStyle:{width:"100%",height:"200px"},attrs:{autoplay:"",name:"media",controls:""}},[a("source",{attrs:{src:n.previewVideo,type:"video/mp4"}})]):n._e()])],1),n._v(" "),a("van-image-preview",{attrs:{images:n.previewImg,closeable:""},model:{value:n.imgPreview,callback:function(t){n.imgPreview=t},expression:"imgPreview"}}),n._v(" "),a("van-popup",{style:{height:"100%"},attrs:{position:"bottom","get-container":"#app",closed:"closed"},model:{value:n.isShow,callback:function(t){n.isShow=t},expression:"isShow"}},[n.dsf.config.commonForm.LocalDocPreview&&""==n.fileUrl?a("div",[n.isShow?a("enclosure-preview",{attrs:{file:n.popFile,isPreview:!0,"form-info":n.fileData,formMeta:n.formMeta,RouteLeave:n.isShow},on:{goPreview:function(t){},goHandWrite:function(t){},closePop:function(t){}}}):n._e()],1):a("div",{staticStyle:{height:"100%",width:"100%"}},[a("van-nav-bar",{on:{"click-left":function(t){n.isShow=!1}},scopedSlots:n._u([{key:"left",fn:function(){return[a("van-icon",{attrs:{name:"arrow-left"}}),a("span",[n._v("返回")])]},proxy:!0}])}),n._v(" "),a("iframe",{key:n.fileUrl,attrs:{id:"filePreview",src:n.fileUrl,frameborder:"0"}})],1)])],2)},[],!1,null,"14a89ee5",null).exports},50073:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return h}});var e=o(62680),a=o.n(e),e=o(95366),i=o.n(e),e=o(6919),n=o.n(e),r=o(77193),e=o(26243),s=o.n(e),e=o(33259),l=o(21864),c=o(37738),u={},d=o(9226),f=(d.keys().forEach(function(t){var e=d(t);u[t.replace(/^\.\/(.*)\.\w+$/,"$1")]=e.default}),u),m=o(25108);function p(e,t){var o,n=s()(e);return a()&&(o=a()(e),t&&(o=o.filter(function(t){return i()(e,t).enumerable})),n.push.apply(n,o)),n}var e={name:"formTab",props:["formData","formMeta","allFile","relationList","isFromList","formParams"],provide:function(){return{isMobileForm:this.isMobileForm}},components:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(Object(o),!0).forEach(function(t){(0,r.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):p(Object(o)).forEach(function(t){Object.defineProperty(e,t,i()(o,t))})}return e}({formLayout:e.default,dsfFab:l.Z,specialTitle:c.default},f),data:function(){return{blocks:[],controlRows:[],btn:[{icon:"iconhuidaodingbu",title:"置顶",type:"event",action:"goTop"}],isShowTop:!1,timeout:null,scrollTop:0,scrollContainer:"",templateComponent:"",labelSpan:dsf.config.commonForm.padLabelSpan||4}},watch:{formMeta:{deep:!0,immediate:!0,handler:function(a,t){var i=this;a.rows?a.rows.forEach(function(n){i.controlRows[n.rowindex]=[],n.controlsNew?n.controlsNew.forEach(function(t,o){i.controlRows[n.rowindex].push([]),t.forEach(function(e){i.controlRows[n.rowindex][o].push(a.controls.find(function(t){return t.controlId==e}))})}):n.controls.forEach(function(e){i.controlRows[n.rowindex].push([a.controls.find(function(t){return t.controlId==e})])})}):null==t&&(this.controlRows=[],a.controls.forEach(function(t){i.controlRows.push([[t]])}))}},controlRows:{deep:!0,immediate:!0,handler:function(t,e){this.$nextTick(function(){$(".formLayout > .rowWrap").each(function(){$(this).find(".controlMobileFl").length&&($(this).addClass("flRow"),$(this).removeClass("rowWrap")),$(this).find(".controlSubFormPrimary").length&&($(this).addClass("SubFormRow"),$(this).removeClass("rowWrap")),$(this).find(".hideDiv").length!=$(this).find(".controlDiv").length&&$(this).find(".controlDiv").length||$(this).find(".card").length?$(this).removeClass("noWrap"):$(this).addClass("noWrap")});var i=[];$(".formLayout>.flRow").each(function(){$(this).find(".hideDiv").length!=$(this).find(".controlDiv").length&&$(this).find(".controlDiv").length||$(this).find(".card").length?$(this).removeClass("noWrap"):$(this).addClass("noWrap"),i.push($(".formLayout>div").index(this))}),$(".formLayout>div").each(function(){$(this).removeClass("onlyOne")}),0<i.length&&(i=(i=0!=i[0]?[0].concat(i):i)[i.length-1]!=$(".formLayout>div.van-row ").length-1?i.concat([$(".formLayout>div.van-row ").length-1]):i).forEach(function(t,e){var o,n,a={};i[e+1]&&(a.start=t,a.end=i[e+1]),o=a,n=0,$(".formLayout>div").each(function(){var t=$(".formLayout>div").index(this);!$(this).hasClass("noWrap")&&!$(this).hasClass("flRow")&&!$(this).hasClass("fab-container")&&t>=o.start&&t<=o.end&&(n+=1)}),1==n&&$(".formLayout>div").each(function(){var t=$(".formLayout>div").index(this);!$(this).hasClass("noWrap")&&!$(this).hasClass("flRow")&&!$(this).hasClass("fab-container")&&t>=o.start&&t<=o.end&&$(this).addClass("onlyOne")})})})}}},computed:{isMobileForm:function(){return"mobile"==dsf.config.clientType||this.formMeta.parameters.hasOwnProperty("formType")&&2==this.formMeta.parameters.formType},classDivider:function(){var a=this;return function(t,e,o){var n=[];return a.isMobileForm?(e.slice(o+1).some(function(t){return(null==t?void 0:t.show)&&(null==t?void 0:t.propertyShow)})&&n.push("divider"),t.show&&t.propertyShow||n.push("hideDiv")):n.push("padDivider"),n}},getRowClass:function(){return function(t,e){}}},created:function(){var t,e=s()(f);null!=(t=this.formMeta.parameters)&&t.formTemplate&&e.includes("formTab".concat(this.formMeta.parameters.formTemplate))&&(this.templateComponent="formTab".concat(this.formMeta.parameters.formTemplate))},mounted:function(){var t=this;document.querySelector(".van-tabs__content")?this.scrollContainer=document.querySelector(".van-tabs__content"):document.querySelector(".formBox")&&(this.scrollContainer=document.querySelector(".formBox")),this.scrollContainer&&(m.log(this.scrollContainer),this.scrollContainer.addEventListener("scroll",function(){clearTimeout(t.timeout),t.isShowTop=!0,t.timeout=setTimeout(function(){return t.isShowTop=!1},2e3)},!1))},updated:function(){},methods:{getNextCtronl:function(t,e){var o;return t==this.controlRows.length-1||"controlMobileFl"==(null==(o=this.controlRows[t+1][0][0])?void 0:o.controlType)&&o.show?null:null!=o&&o.propertyShow&&null!=o&&o.show?o:this.getNextCtronl(t+1)},btnAction:function(t){m.log(t),this[t.action]()},getData:function(t){return this.formData.main[t.metaId]},controlEditOpinion:function(t){this.formData.flowinfo||this.$set(this.formData,"flowinfo",{}),this.formData.flowinfo[t.key]=t.value},controlShareOpinion:function(t){this.formData.distribinfo=t},goTop:function(){var t=this;this.$nextTick(function(){t.scrollContainer.scrollTop=0,t.isShowTop=!1,clearTimeout(t.timeout)})}},beforeDestroy:function(){var t=this;this.scrollContainer&&this.scrollContainer.removeEventListener("scroll",function(){clearTimeout(t.timeout),t.isShowTop=!0,t.timeout=setTimeout(function(){return t.isShowTop=!1},2e3)})}},h=(0,o(51900).Z)(e,function(){var a=this,i=a._self._c;return a.templateComponent?i(a.templateComponent,{tag:"component",attrs:{formData:a.formData,formMeta:a.formMeta,allFile:a.allFile,relationList:a.relationList,isFromList:a.isFromList,formParams:a.formParams}}):null!=a.formData.main&&null!=a.formMeta.controls?i("van-form",{ref:"commonForm",staticClass:"commonForm",attrs:{"validate-trigger":"onChange"}},[a.dsf.config.commonForm.specialTitle&&a.$route.params.pk&&!a.isFromList?i("specialTitle",{attrs:{formData:a.formData,formMeta:a.formMeta}}):a._e(),a._v(" "),i("div",{ref:"form",staticClass:"formLayout",style:{margin:a.isMobileForm?a.dsf.config.commonForm.formPadding||"":"0.32rem",borderTop:a.isMobileForm?"":"1px solid #f5f5f5"}},[a._l(a.controlRows,function(n,e){return i("van-row",{key:n.rowindex,class:["box",{rowWrap:a.isMobileForm},a.getRowClass(n,e)],attrs:{type:"flex"}},[a._l(n,function(o,t){return[i("van-col",{class:{padLeftRight:!a.isMobileForm},style:{backgroundColor:a.isMobileForm?"":"#fff"},attrs:{span:24/n.length,id:"row".concat(e+1,"_col").concat(t+1)}},a._l(o,function(t,e){return t?i("div",{key:t.controlId,class:["controlDiv",t.controlType,a.classDivider(t,o,e)],style:{height:1==o.length?"100%":"",padding:0},attrs:{id:"ctr_".concat(t.controlId)}},[i("transition",{attrs:{name:"fade"}},[i("form-layout",{directives:[{name:"show",rawName:"v-show",value:t.show&&t.propertyShow,expression:"item.show && item.propertyShow"}],ref:t.metaId,refInFor:!0,attrs:{isMobileForm:a.isMobileForm,rowCteNum:n.length,allFile:a.allFile,parameters:a.formMeta.parameters,controlData:a.getData(t),metaData:t,formData:a.formData,formMeta:a.formMeta,topformData:a.formData,topformMeta:a.formMeta,relationList:a.relationList,"form-params":a.formParams,labelSpan:a.labelSpan},on:{controlEditOpinion:a.controlEditOpinion,controlShareOpinion:a.controlShareOpinion}})],1)],1):a._e()}),0)]})],2)}),a._v(" "),a.dsf.config.commonForm.noShowDsfFab?a._e():i("transition",{attrs:{name:"hide"}},[i("dsf-fab",{directives:[{name:"show",rawName:"v-show",value:a.isShowTop,expression:"isShowTop"}],staticStyle:{right:"0.2rem"},attrs:{"fab-items":a.btn},on:{clickItem:a.btnAction}})],1)],2)],1):a._e()},[],!1,null,"6238eb9d",null).exports},43220:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(33259),n=o(21864),a=o(25108),e={name:"formTab",props:["formData","formMeta","allFile","relationList","isFromList","formParams"],components:{formLayout:e.default,dsfFab:n.Z},provide:function(){return{isMobileForm:this.isMobileForm}},data:function(){return{blocks:[],controlRows:[],btn:[{icon:"iconchevron-double-up",title:"置顶",type:"event",action:"goTop"}],isShowTop:!1,timeout:null,scrollTop:0,scrollContainer:""}},watch:{formMeta:{deep:!0,immediate:!0,handler:function(a,t){var i=this;a.rows?a.rows.forEach(function(n){i.controlRows[n.rowindex]=[],n.controlsNew?n.controlsNew.forEach(function(t,o){i.controlRows[n.rowindex].push([]),t.forEach(function(e){i.controlRows[n.rowindex][o].push(a.controls.find(function(t){return t.controlId==e}))})}):n.controls.forEach(function(e){i.controlRows[n.rowindex].push([a.controls.find(function(t){return t.controlId==e})])})}):null==t&&(this.controlRows=[],a.controls.forEach(function(t){i.controlRows.push([[t]])}))}}},computed:{isMobileForm:function(){return!1},classDivider:function(){var o=this;return function(t,e){return o.isMobileForm?"controlMobileFl"!=t.controlType&&e<o.controlRows.length-1&&o.getNextCtronl(e)?"divider":void 0:"padDivider"}},labelSpan:function(){return"mobile"==this.$store.state.clientType?7:5}},created:function(){},mounted:function(){var t=this;document.querySelector(".van-tabs__content")?this.scrollContainer=document.querySelector(".van-tabs__content"):document.querySelector(".formBox")&&(this.scrollContainer=document.querySelector(".formBox")),this.scrollContainer&&this.scrollContainer.addEventListener("scroll",function(){clearTimeout(t.timeout),t.isShowTop=!0,t.timeout=setTimeout(function(){return t.isShowTop=!1},2e3)}),this.handleHeaderLabel()},updated:function(){},methods:{handleControlEditOpinion:function(){var t=this.formMeta.controls.find(function(t){return"controlEditOpinion"==t.controlType&&t.privilege.editable});t&&($("#ctr_".concat(t.controlId)).addClass("fixedOpinion"),$(".formTab230816161708J15RZ0436CLcJnmnJCF").css("margin-bottom","3.2rem"))},handleHeaderLabel:function(){var t;this.controlRows[0]&&this.controlRows[0][0]&&"LabelForTextControl"==(null==(t=this.controlRows[0][0][0])?void 0:t.controlType)&&($("#row1_col1").removeClass("padLeftRight").addClass("title"),$(".formTab230816161708J15RZ0436CLcJnmnJCF").addClass("noborder")),$("#row2_col1").find(".controlFileCode").length&&1==$("#row2_col1").children().length&&($("#row1_col1").find(".padDivider").addClass("noAfter"),$("#row2_col1").removeClass("padLeftRight").addClass("noDivider"))},getNextCtronl:function(t){var e;return t==this.controlRows.length-1||"controlMobileFl"==(null==(e=this.controlRows[t+1][0][0])?void 0:e.controlType)&&e.show?null:null!=e&&e.propertyShow&&null!=e&&e.show?e:this.getNextCtronl(t+1)},btnAction:function(t){a.log(t),this[t.action]()},getData:function(t){return this.formData.main[t.metaId]},controlEditOpinion:function(t){this.formData.flowinfo||this.$set(this.formData,"flowinfo",{}),this.formData.flowinfo[t.key]=t.value},controlShareOpinion:function(t){this.formData.distribinfo=t},goTop:function(){var t=this;this.$nextTick(function(){t.scrollContainer.scrollTop=0,t.isShowTop=!1,clearTimeout(t.timeout)})}},beforeDestroy:function(){var t=this;this.scrollContainer&&this.scrollContainer.removeEventListener("scroll",function(){clearTimeout(t.timeout),t.isShowTop=!0,t.timeout=setTimeout(function(){return t.isShowTop=!1},2e3)})}},i=(0,o(51900).Z)(e,function(){var a=this,i=a._self._c;return null!=a.formData.main&&null!=a.formMeta.controls?i("van-form",{ref:"commonForm",staticClass:"commonForm",attrs:{"validate-trigger":"onChange"}},[i("div",{ref:"form",staticClass:"formLayout formTab230816161708J15RZ0436CLcJnmnJCF",style:{margin:a.isMobileForm?a.dsf.config.commonForm.formPadding||"":"0.32rem",borderTop:a.isMobileForm?"":"1px solid #333"}},[a._l(a.controlRows,function(o,n){return i("van-row",{key:o.rowindex,staticClass:"box",attrs:{type:"flex"}},[a._l(o,function(e,t){return[i("van-col",{class:{padLeftRight:!a.isMobileForm},style:{backgroundColor:a.isMobileForm?"":"#fff"},attrs:{span:24/o.length,id:"row".concat(n+1,"_col").concat(t+1)}},a._l(e,function(t){return t?i("div",{key:t.controlId,class:a.classDivider(t,n),staticStyle:{padding:"0"},style:{height:1==e.length?"100%":""},attrs:{id:"ctr_".concat(t.controlId)}},[i("transition",{attrs:{name:"fade"}},[i("form-layout",{directives:[{name:"show",rawName:"v-show",value:t.show&&t.propertyShow,expression:"item.show && item.propertyShow"}],ref:t.metaId,refInFor:!0,attrs:{isMobileForm:a.isMobileForm,rowCteNum:o.length,allFile:a.allFile,parameters:a.formMeta.parameters,controlData:a.getData(t),metaData:t,formData:a.formData,formMeta:a.formMeta,topformData:a.formData,topformMeta:a.formMeta,relationList:a.relationList,"form-params":a.formParams,labelSpan:a.labelSpan},on:{controlEditOpinion:a.controlEditOpinion,controlShareOpinion:a.controlShareOpinion}})],1)],1):a._e()}),0)]})],2)}),a._v(" "),i("transition",{attrs:{name:"hide"}},[i("dsf-fab",{directives:[{name:"show",rawName:"v-show",value:a.isShowTop,expression:"isShowTop"}],attrs:{"fab-items":a.btn},on:{clickItem:a.btnAction}})],1)],2)]):a._e()},[],!1,null,"8efcb870",null).exports},95346:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(33259),n=o(21864),a=o(25108),e={name:"formTab",props:["formData","formMeta","allFile","relationList","isFromList","formParams"],components:{formLayout:e.default,dsfFab:n.Z},provide:function(){return{isMobileForm:this.isMobileForm}},data:function(){return{blocks:[],controlRows:[],btn:[{icon:"iconchevron-double-up",title:"置顶",type:"event",action:"goTop"}],isShowTop:!1,timeout:null,scrollTop:0,scrollContainer:""}},watch:{formMeta:{deep:!0,immediate:!0,handler:function(a,t){var i=this;a.rows?a.rows.forEach(function(n){i.controlRows[n.rowindex]=[],n.controlsNew?n.controlsNew.forEach(function(t,o){i.controlRows[n.rowindex].push([]),t.forEach(function(e){i.controlRows[n.rowindex][o].push(a.controls.find(function(t){return t.controlId==e}))})}):n.controls.forEach(function(e){i.controlRows[n.rowindex].push([a.controls.find(function(t){return t.controlId==e})])})}):null==t&&(this.controlRows=[],a.controls.forEach(function(t){i.controlRows.push([[t]])}))}}},computed:{isMobileForm:function(){return!1},classDivider:function(){var o=this;return function(t,e){return o.isMobileForm?"controlMobileFl"!=t.controlType&&e<o.controlRows.length-1&&o.getNextCtronl(e)?"divider":void 0:"padDivider"}},rowFlex:function(){return function(t,e){return 24/t.length}}},created:function(){},mounted:function(){var t=this;document.querySelector(".van-tabs__content")?this.scrollContainer=document.querySelector(".van-tabs__content"):document.querySelector(".formBox")&&(this.scrollContainer=document.querySelector(".formBox")),this.scrollContainer&&this.scrollContainer.addEventListener("scroll",function(){clearTimeout(t.timeout),t.isShowTop=!0,t.timeout=setTimeout(function(){return t.isShowTop=!1},2e3)}),this.handleHeaderLabel()},updated:function(){},methods:{handleControlEditOpinion:function(){var t=this.formMeta.controls.find(function(t){return"controlEditOpinion"==t.controlType&&t.privilege.editable});t&&($("#ctr_".concat(t.controlId)).addClass("fixedOpinion"),$(".formTab240301193112kvs0JVTvSPA0a02QMPy").css("margin-bottom","3.2rem"))},handleHeaderLabel:function(){var t;this.controlRows[0]&&this.controlRows[0][0]&&"LabelForTextControl"==(null==(t=this.controlRows[0][0][0])?void 0:t.controlType)&&($("#row1_col1").removeClass("padLeftRight").addClass("title"),$(".formTab240301193112kvs0JVTvSPA0a02QMPy").addClass("noborder")),$("#row2_col1").find(".controlFileCode").length&&$("#row2_col1").children().length,$(".noDivider").addClass("padLeftRight"),$(".controlOpinionView").parent().parent().addClass("bac"),$(".controlOpinionView").parent().parent().parent().parent().parent().removeClass("padDivider"),$(".controlOpinionView").parent().parent().parent().parent().parent().parent().removeClass("padLeftRight"),$(".control_mobile_fl").parent().parent().parent().parent().removeClass("padDivider"),$(".control_mobile_fl").parent().parent().parent().parent().parent().removeClass("padLeftRight"),$(".control_mobile_fl").parent().addClass("bac")},getNextCtronl:function(t){var e;return t==this.controlRows.length-1||"controlMobileFl"==(null==(e=this.controlRows[t+1][0][0])?void 0:e.controlType)&&e.show?null:null!=e&&e.propertyShow&&null!=e&&e.show?e:this.getNextCtronl(t+1)},btnAction:function(t){a.log(t),this[t.action]()},getData:function(t){return this.formData.main[t.metaId]},controlEditOpinion:function(t){this.formData.flowinfo||this.$set(this.formData,"flowinfo",{}),this.formData.flowinfo[t.key]=t.value},controlShareOpinion:function(t){this.formData.distribinfo=t},goTop:function(){var t=this;this.$nextTick(function(){t.scrollContainer.scrollTop=0,t.isShowTop=!1,clearTimeout(t.timeout)})}},beforeDestroy:function(){var t=this;this.scrollContainer&&this.scrollContainer.removeEventListener("scroll",function(){clearTimeout(t.timeout),t.isShowTop=!0,t.timeout=setTimeout(function(){return t.isShowTop=!1},2e3)})}},i=(0,o(51900).Z)(e,function(){var a=this,i=a._self._c;return null!=a.formData.main&&null!=a.formMeta.controls?i("van-form",{ref:"commonForm",staticClass:"commonForm",attrs:{"validate-trigger":"onChange"}},[i("div",{ref:"form",staticClass:"formLayout formTab240301193112kvs0JVTvSPA0a02QMPy",style:{margin:a.isMobileForm?a.dsf.config.commonForm.formPadding||"":"0.32rem",borderTop:a.isMobileForm?"":"1px solid #333"}},[a._l(a.controlRows,function(o,n){return i("van-row",{key:o.rowindex,staticClass:"box",attrs:{type:"flex"}},[a._l(o,function(e,t){return[i("van-col",{class:{padLeftRight:!a.isMobileForm},style:{backgroundColor:a.isMobileForm?"":"#fff"},attrs:{span:a.rowFlex(o,t),id:"row".concat(n+1,"_col").concat(t+1)}},a._l(e,function(t){return t?i("div",{key:t.controlId,class:a.classDivider(t,n),staticStyle:{padding:"0"},style:{height:1==e.length?"100%":""},attrs:{id:"ctr_".concat(t.controlId)}},[i("transition",{attrs:{name:"fade"}},[i("form-layout",{directives:[{name:"show",rawName:"v-show",value:t.show&&t.propertyShow,expression:"item.show && item.propertyShow"}],ref:t.metaId,refInFor:!0,attrs:{isMobileForm:a.isMobileForm,rowCteNum:o.length,allFile:a.allFile,parameters:a.formMeta.parameters,controlData:a.getData(t),metaData:t,formData:a.formData,formMeta:a.formMeta,topformData:a.formData,topformMeta:a.formMeta,relationList:a.relationList,"form-params":a.formParams},on:{controlEditOpinion:a.controlEditOpinion,controlShareOpinion:a.controlShareOpinion}})],1)],1):a._e()}),0)]})],2)}),a._v(" "),i("transition",{attrs:{name:"hide"}},[i("dsf-fab",{directives:[{name:"show",rawName:"v-show",value:a.isShowTop,expression:"isShowTop"}],attrs:{"fab-items":a.btn},on:{clickItem:a.btnAction}})],1)],2)]):a._e()},[],!1,null,"a6c31dc4",null).exports},89223:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"hljFileVerify",props:{formData:{default:function(){return{}},type:Object},formMeta:{default:function(){return{}},type:Object},allFile:{default:function(){return[]},type:Array},params:{default:function(){return{}},type:Object}},data:function(){return{tcqId:"",moduleId:"",nodeId:"",flowId:"",files:[]}},created:function(){var t=this.params[this.formMeta.parameters.moduleId];t||dsf.layer.toast("该模块未配置统筹区ID！",!1),this.tcqId=t,this.moduleId=this.formMeta.parameters.moduleId,this.nodeId=this.formMeta.parameters.nodeId,this.flowId=this.formMeta.parameters.flowId,this.init()},methods:{init:function(){var e=this;dsf.http.post("ctrl/mobile/getFileReviewInfo",{pk:this.formMeta.parameters.pk,moduleId:this.moduleId,nodeId:this.nodeId,tcq:this.formData.main[this.tcqId].value}).then(function(t){t=t.data;e.files=t.data})},filePreview:function(t){var e=dsf.util.loadSessionStore("loginToken"),o=t.fileName,t=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.fileId,"&moduleId=").concat(this.moduleId,"&fileName=").concat(o,"&nodeId=").concat(this.nodeId,"&flowId=").concat(this.flowId,"&x-auth-token=").concat(e));this.$router.push({path:"/iframe",query:{url:t,title:o}})},pass:function(t,e){var o=this;this.$eventBus.DoSaveForm(this,""),setTimeout(function(){o.init()},1e3)}}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"hljFileVerify"},o._l(o.files,function(e,t){return n("div",{key:e.fileId,staticClass:"card"},[n("div",{staticClass:"header"},[n("span",{staticClass:"title"},[o._v(o._s(t+1)+"、"+o._s(e.fileName))]),o._v(" "),"通过"==e.statusText?n("span",{staticClass:"status",staticStyle:{color:"green"}},[o._v(o._s(e.statusText))]):o._e(),o._v(" "),"审核中"==e.statusText?n("span",{staticClass:"status",staticStyle:{color:"orange"}},[o._v(o._s(e.statusText))]):o._e(),o._v(" "),"未通过"==e.statusText?n("span",{staticClass:"status",staticStyle:{color:"red"}},[o._v(o._s(e.statusText))]):o._e()]),o._v(" "),n("div",{staticClass:"footer-btn"},[n("button",{on:{click:function(t){return o.filePreview(e)}}},[o._v("预览")]),o._v(" "),"审核中"!=e.statusText&&1==e.isExamine?n("button",{on:{click:function(t){return o.pass(0,e)}}},[o._v("通过")]):o._e(),o._v(" "),"审核中"!=e.statusText&&1==e.isExamine?n("button",{on:{click:function(t){return o.pass(1,e)}}},[o._v("不通过")]):o._e()])])}),0)},[],!1,null,"3efd18b2",null).exports},34097:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return u}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(14355),l=o(20629);function c(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}var e={name:"inspectionList",props:["formData","formMeta","clickTabIndex"],components:{defaultList:e.default},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):c(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}({},(0,l.rn)({isShowAppHeader:function(t){return t.isShowAppHeader}})),data:function(){return{tabsPage:!1,routeKey:"",item:{name:"巡检日志列表",icon:"",goRoute:"defaultList",url:"",params:{pk:this.formMeta.parameters.pk,FORM_DUTY_DATE:this.formData.main.B0013.value},moduleId:"2205101043337PHtfjCsy9hZmA3AdES",listId:"220510114721TfVE0ibmbRAlrV6WPjY",badgeUrl:"",count:""}}},created:function(){},methods:{}},u=(0,o(51900).Z)(e,function(){return(0,this._self._c)("default-list",{attrs:{params:this.item,tabsPage:this.tabsPage,oppsetTop:this.isShowAppHeader?"1.8rem":"0.88rem"}})},[],!1,null,null,null).exports},53783:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var n=o(5044),e=o(18868),a=o(25108),e={name:"instructionList",components:{DebounceClick:e.Z},props:["formData","formMeta"],data:function(){return{active:0,showOpinionPopup:!1,showPSBtn:-1<dsf.util.loadSessionStore("user").privileges.findIndex(function(t){return"移动批示"==t.name}),opinionValue:"",errorMessage:"",noRecord:!1,loading:!1,finished:!1,refreshing:!1,start:0,startindex:0,limit:10,list:[],user:dsf.util.loadSessionStore("user"),Interval:""}},created:function(){var t=this,e=this;dsf.http.post("fn/sx/schedule/addViewLog",{pk:this.formMeta.parameters.pk,type:"yqps",userId:this.user.user_id,userName:this.user.name}).then(function(t){"success"==t.data.type&&(a.log("批示添加访问记录"),e.$bus.emit("emitPs",{pk:e.formMeta.parameters.pk}))}),this.getViewLog(),this.Interval=setInterval(function(){t.getViewLog()},1e4)},beforeDestroy:function(){clearInterval(this.Interval)},methods:{getViewLog:function(){var e=this;dsf.http.post("fn/sx/schedule/showScheduleYqPS",{start:0,limit:(this.startindex+1)*this.limit,pk:this.formMeta.parameters.pk}).then(function(t){t.data&&0!=t.data.data.length?e.list=t.data.data:(e.finished=!0,clearInterval(e.Interval))})},postDataHandle:function(){var e=this,t={start:e.start,limit:e.limit,pk:e.formMeta.parameters.pk};dsf.http.post("fn/sx/schedule/showScheduleYqPS",t).then(function(t){t&&(e.refreshing&&(e.list=[],e.refreshing=!1),"success"==t.data.type?0<e.list.length?e.list=[].concat((0,n.Z)(e.list),(0,n.Z)(t.data.data)):e.list=t.data.data:e.dsf.layer.toast(t.message),e.loading=!1,t.data&&0!=t.data.data.length||(e.finished=!0))}).catch(function(t){e.dsf.layer.toast(t.message)}).finally(function(){})},onLoad:function(){this.startindex++,this.start=this.startindex*this.limit,this.postDataHandle()},initData:function(){this.finished=!1,this.loading=!0,this.start=0,this.startindex=-1,this.list=[],this.onLoad()},onRefresh:function(){this.initData()},hiddenPopup:function(){this.showOpinionPopup=!1},showOpinion:function(){var e=this;e.showOpinionPopup=!0,dsf.http.post("fn/sx/schedule/showScheduleYqPS",{pk:e.formMeta.parameters.pk,userId:e.user.user_id}).then(function(t){e.opinionValue="","success"==t.data.type&&(e.opinionValue=t.data.data[0].content)})},sumbmitOpinion:function(){var e=this;e.opinionValue&&""!=e.opinionValue?(dsf.layer.loading("提交中"),dsf.http.post("fn/sx/schedule/mobileAddScheduleYqPs",{fid:e.formMeta.parameters.pk,content:e.opinionValue,userId:e.user.user_id,userName:e.user.name}).then(function(t){"success"==t.data.type?(e.showOpinionPopup=!1,setTimeout(function(){dsf.layer.toast("提交成功")},500),e.initData()):e.dsf.layer.toast(t.data.message,!1)})):dsf.layer.toast("请输入批示内容")}}},i=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"instruction-list"},[n("van-pull-refresh",{staticClass:"pushContainer",on:{refresh:o.onRefresh},model:{value:o.refreshing,callback:function(t){o.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:o.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:o.onLoad},model:{value:o.loading,callback:function(t){o.loading=t},expression:"loading"}},[o._l(o.list,function(t,e){return n("div",{key:e,staticClass:"instruction-item"},[n("van-row",{staticClass:"instruction-data-header"},[n("van-col",{staticClass:"instruction-header-col"},[o._v(o._s(t.leaderNameText)+"批示:")])],1),o._v(" "),n("van-row",{staticClass:"instruction-data-item"},[n("van-col",{staticClass:"instruction-col"},[o._v(o._s(t.postilContent))])],1)],1)}),o._v(" "),o.noRecord?n("commonempty",{attrs:{description:"暂无记录"}}):o._e()],2)],1),o._v(" "),n("div",{staticClass:"stickyContainer"},[o.showPSBtn?n("van-button",{attrs:{type:"primary",block:""},on:{click:function(t){return o.showOpinion()}}},[o._v("批示")]):o._e()],1),o._v(" "),n("van-popup",{attrs:{position:"bottom","get-container":"#app",round:""},model:{value:o.showOpinionPopup,callback:function(t){o.showOpinionPopup=t},expression:"showOpinionPopup"}},[n("van-nav-bar",{attrs:{title:"填写批示","left-text":"取消"},on:{"click-left":function(t){return o.hiddenPopup()}}}),o._v(" "),n("van-cell-group",{staticClass:"_file"},[n("van-field",{ref:"editOpinion",staticClass:"psInput",attrs:{"error-message":o.errorMessage,type:"textarea",rows:"10",autofocus:"",autosize:"",placeholder:"请输入批示"},model:{value:o.opinionValue,callback:function(t){o.opinionValue=t},expression:"opinionValue"}})],1),o._v(" "),n("div",{staticStyle:{"text-align":"center",width:"90%",margin:"0 auto","padding-bottom":"10px"}},[n("debounce-click",[n("van-button",{attrs:{type:"primary",block:""},on:{click:function(t){return o.sumbmitOpinion()}}},[o._v("确定")])],1)],1)],1)],1)},[],!1,null,"657a62e6",null).exports},48440:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e=a(18428),o=a.n(e),e=a(62689),i=a(25108),e={props:{formData:{type:Object,default:{}}},name:"meettingTopic",components:{file:e.default,EnclosurePreview:function(){return Promise.all([a.e(97805),a.e(82060)]).then(a.bind(a,82060))}},data:function(){return{lists:[],imgType:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],imgPreview:!1,previewImg:[],showFile:!1,filename:"",fileUrl:"",fileType:"",popFile:{},appTopMenu:dsf.config.appTopMenu.value,params:dsf.util.loadSessionStore("meetingTopicParams")||{}}},computed:{},watch:{},methods:{toggle:function(t){this.$set(this.lists[t],"show",!this.lists[t].show)},initTopicData:function(){var e=this,t=(i.log(this.params),{pk:this.formData.main.A0001.value}),t=o()(t,this.params);dsf.http.post("/fn/meetingNotice/getTopic",t).then(function(t){i.log(t.data.data),200==t.data.code&&0<t.data.data.length&&(t.data.data.forEach(function(t,e){t.show=0==e,t.attach&&0<t.attach.length&&t.attach.forEach(function(t){t.ext="",t.ext=t.fileName.substr(t.fileName.lastIndexOf(".")+1).toLowerCase()}),t.tag&&(t.tag=t.tag.split(","),t.tag.push(t.reportTime+"min")),i.log(t.attach)}),e.lists=t.data.data)})},openFile:function(t){var e=this,o=(i.log(t),this.filename=t.fileName,this.fileType=t.fileName.substr(t.fileName.lastIndexOf(".")+1),dsf.util.loadSessionStore("loginToken")),n="";-1<this.imgType.indexOf(this.fileType)?(n=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.fileId,"&moduleId=").concat(this.moduleId,"&fileName=").concat(t.fileName)),this.imgPreview=!0,this.previewImg=[n]):(n=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.fileId,"&moduleId=").concat(this.moduleId,"&x-auth-token=").concat(o)),4==dsf.config.previewSetting.previewType?dsf.http.post("fn/office/mobile/wpsPreview",{fileId:t.fileId,readOnly:0<t.canEdit}).then(function(t){t=t.data;e.showFile=!0,e.fileUrl=t.data}):dsf.config.commonForm.webViewPreview?(o=dsf.config.serverUrl+dsf.config.webRoot+n.replace("../",""),i.log(o),xsfWindow.openWebView({title:t.fileName,url:o,colorString:"#111111"})):(this.showFile=!0,this.fileUrl=n,this.popFile={id:t.fileId,name:t.filename,infoId:t.infoId,moduleId:t.moduleId,flowId:t.flowId,nodeId:t.nodeId}))},closeFile:function(){this.showFile=!1}},created:function(){},mounted:function(){this.initTopicData()},destroyed:function(){}},n=(0,a(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"meettingTopic"},[o._l(o.lists,function(t,e){return n("div",{key:e,staticClass:"lists"},[n("div",{staticClass:"title",class:{active:t.show},on:{click:function(t){return o.toggle(e)}}},[n("span",[o._v("议题"+o._s(e+1)+"："+o._s(t.title))]),o._v(" "),0<t.attach.length?n("van-icon",{class:{active:t.show},attrs:{name:"arrow"}}):o._e()],1),o._v(" "),n("div",{staticClass:"texts"},[t.ytkssj&&t.ytjssj?n("div",{staticClass:"inputs"},[n("span",[o._v("议题时间：")]),o._v(" "),n("p",[n("label",{attrs:{for:""}},[o._v(o._s(t.ytkssj.substr(11)))]),o._v("\n           - \n          "),n("label",{attrs:{for:""}},[o._v(o._s(t.ytjssj.substr(11)))])])]):o._e(),o._v(" "),t.reporter?n("div",{staticClass:"inputs"},[n("span",[o._v("汇报人员：")]),o._v(" "),n("p",[o._v(o._s(t.reporter))])]):o._e(),o._v(" "),t.cyldText?n("div",{staticClass:"inputs"},[n("span",[o._v("参与领导：")]),o._v(" "),n("p",[o._v(o._s(t.cyldText))])]):o._e(),o._v(" "),t.cydwText?n("div",{staticClass:"inputs"},[n("span",[o._v("参与单位：")]),o._v(" "),n("p",[o._v(o._s(t.cydwText))])]):o._e(),o._v(" "),t.attendDept?n("div",{staticClass:"inputs"},[n("span",[o._v("参会部门：")]),o._v(" "),n("p",[o._v(o._s(t.attendDept))])]):o._e(),o._v(" "),t.ycnrValue?n("div",{staticClass:"inputs"},[n("span",[o._v("议程内容：")]),o._v(" "),n("p",[o._v(o._s(t.ycnrValue))])]):o._e(),o._v(" "),n("ol",{staticClass:"inputs2",class:{active:t.show}},o._l(t.tag,function(t,e){return n("li",{key:e},[o._v(o._s(t))])}),0),o._v(" "),0<t.attach.length?n("div",{staticClass:"inputs3",class:{active:t.show},staticStyle:{border:"none"}},[n("span",[o._v("议题材料：")])]):o._e(),o._v(" "),n("div",{staticClass:"files",class:{active:t.show}},o._l(t.attach,function(e){return n("div",{key:e.id,on:{click:function(t){return o.openFile(e)}}},[n("span",[n("van-image",{attrs:{src:"../../../../static/images/fileType/"+e.ext+".png"},scopedSlots:o._u([{key:"error",fn:function(){return[n("img",{attrs:{src:a(54073),alt:"",srcset:""}})]},proxy:!0}],null,!0)})],1),o._v(" "),n("p",[o._v(o._s(e.fileName))])])}),0)])])}),o._v(" "),n("van-image-preview",{attrs:{images:o.previewImg,closeable:""},model:{value:o.imgPreview,callback:function(t){o.imgPreview=t},expression:"imgPreview"}}),o._v(" "),n("van-popup",{staticClass:"file-preview",staticStyle:{height:"100vh"},attrs:{"close-on-click-overlay":!0,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:o.showFile,callback:function(t){o.showFile=t},expression:"showFile"}},[n("van-nav-bar",{attrs:{title:o.filename},on:{"click-left":function(t){return o.closeFile()},"click-right":function(t){return o.closeFile()}},scopedSlots:o._u([o.appTopMenu?{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"arrow-left"}}),n("span",[o._v("返回")])]},proxy:!0}:{key:"right",fn:function(){return[n("span",[o._v("关闭文件")])]},proxy:!0}],null,!0)}),o._v(" "),o.dsf.config.commonForm.LocalDocPreview?n("enclosure-preview",{attrs:{file:o.popFile,"is-preview":!0,"is-show-cur-person":!0}}):n("iframe",{key:"".concat(o.popFile.id,"_").concat(new Date),attrs:{id:"filePreview",src:o.fileUrl,frameborder:"0"}})],1)],2)},[],!1,null,"2da73395",null).exports},15513:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"moveStatus",props:["formData","formMeta"],components:{movingSituation:o(86720).Z},data:function(){return{pk:this.formMeta.parameters.pk}}},n=(0,o(51900).Z)(e,function(){return(0,this._self._c)("moving-situation",{attrs:{"form-data":{info_id:this.pk},parameters:this.formMeta.parameters}})},[],!1,null,null,null).exports},88965:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var o=a(77193),e=a(62689),i=a(25108),e={props:{formData:{type:Object,default:{}}},name:"meettingTopic",components:{file:e.default,EnclosurePreview:function(){return Promise.all([a.e(97805),a.e(82060)]).then(a.bind(a,82060))}},data:function(){var t={lists:[],imgType:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],imgPreview:!1,previewImg:[],showFile:!1,filename:"",fileUrl:"",fileType:"",popFile:{},appTopMenu:dsf.config.appTopMenu.value};return(0,o.Z)(t,"fileType",{pdf:["pdf"],img:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],txt:["txt","sql","xml","html","css","js","java","php","bat","log"],word:["docx","docm","doc","dotx","dotm","dot"],xls:["xlsx","xlsm","xlsb","xls","xltx","xltm","xlt","xlam","xla","ods"],ppt:["pptx","pptm","ppt","potx","potm","pot","ppsx","ppsm","pps","ppam","ppa"]}),(0,o.Z)(t,"hasFilePng",["ai","cloud","html","img","jpg","mp3","mp4","pdf","png","ppt","psd","rar","txt","word","wps","xls","zip","ofd"]),t},computed:{},watch:{},methods:{toggle:function(t){this.$set(this.lists[t],"show",!this.lists[t].show)},initTopicData:function(){var e=this;dsf.http.post("/fn/meetingNotice/getTopic",{pk:this.formData.main.A0001.value}).then(function(t){i.log(t.data.data),200==t.data.code&&0<t.data.data.length&&(t.data.data.forEach(function(t,e){t.show=0==e,t.attach&&0<t.attach.length&&t.attach.forEach(function(t){t.ext="",t.ext=t.fileName.substr(t.fileName.lastIndexOf(".")+1).toLowerCase()}),t.tag&&(t.tag=t.tag.split(","),t.tag.push(t.reportTime+"min")),i.log(t.attach)}),e.lists=t.data.data)})},openFile:function(t){var e=this,o=(i.log(t),this.filename=t.fileName,this.fileType=t.fileName.substr(t.fileName.lastIndexOf(".")+1),dsf.util.loadSessionStore("loginToken")),n="";-1<this.imgType.indexOf(this.fileType)?(n=dsf.url.getServerUrl("fn/mobileFileDownload/download?fileId=".concat(t.fileId,"&moduleId=").concat(this.moduleId,"&fileName=").concat(t.fileName)),this.imgPreview=!0,this.previewImg=[n]):(n=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t.fileId,"&moduleId=").concat(this.moduleId,"&x-auth-token=").concat(o)),4==dsf.config.previewSetting.previewType?dsf.http.post("fn/office/mobile/wpsPreview",{fileId:t.fileId,readOnly:0<t.canEdit}).then(function(t){t=t.data;e.showFile=!0,e.fileUrl=t.data}):dsf.config.commonForm.webViewPreview?(o=dsf.config.serverUrl+dsf.config.webRoot+n.replace("../",""),i.log(o),xsfWindow.openWebView({title:t.fileName,url:o,colorString:"#111111"})):(this.showFile=!0,this.fileUrl=n,this.popFile={id:t.fileId,name:t.filename,infoId:t.infoId,moduleId:t.moduleId,flowId:t.flowId,nodeId:t.nodeId}))},closeFile:function(){this.showFile=!1},getIconClass:function(t){var e,o=t.lastIndexOf("."),n=-1<o?t.substring(o+1,t.length).toLowerCase():"";if(-1<this.hasFilePng.indexOf(n))return a(32380)("./".concat(n,".png"));for(e in this.fileType)if(-1<this.fileType[e].indexOf(n))return a(32380)("./".concat(e,".png"));return a(25555)}},created:function(){},mounted:function(){this.initTopicData()},destroyed:function(){}},n=(0,a(51900).Z)(e,function(){var n=this,t=n._self._c;return t("div",{staticClass:"meettingTopic"},[n._l(n.lists,function(e,o){return t("div",{key:o,staticClass:"lists"},[t("div",{staticClass:"title",class:{active:e.show},on:{click:function(t){return n.toggle(o)}}},[t("span",{class:{active:e.show}},[n._v(n._s(e.title))]),n._v(" "),t("van-icon",{class:{active:e.show},attrs:{name:"arrow"}})],1),n._v(" "),t("div",{staticClass:"texts",staticStyle:{display:"none"}},[t("div",{staticClass:"inputs"},[t("span",[n._v("汇报人员：")]),n._v(" "),t("p",[n._v(n._s(e.reporter))])]),n._v(" "),t("div",{staticClass:"inputs"},[t("span",[n._v("汇报部门：")]),n._v(" "),t("p",[n._v(n._s(e.reporterDept))])]),n._v(" "),t("div",{staticClass:"inputs"},[t("span",[n._v("汇报时长：")]),n._v(" "),t("p",[n._v(n._s(e.reportTime?e.reportTime+"(分钟)":""))])]),n._v(" "),t("div",{staticClass:"inputs3",class:{active:e.show},staticStyle:{border:"none"}},[t("span",[n._v("议题材料：")])]),n._v(" "),0<e.attach.length?t("div",{staticClass:"files",class:{active:e.show}},n._l(e.attach,function(e){return t("div",{key:e.id,on:{click:function(t){return n.openFile(e)}}},[t("span",[t("van-image",{attrs:{src:"../../../../static/images/fileType/"+e.ext+".png"},scopedSlots:n._u([{key:"error",fn:function(){return[t("img",{attrs:{src:a(54073),alt:"",srcset:""}})]},proxy:!0}],null,!0)})],1),n._v(" "),t("p",[n._v(n._s(e.fileName))])])}),0):n._e()]),n._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],staticClass:"field-box"},[t("van-field",{attrs:{label:"汇报人",readonly:""},model:{value:e.reporter,callback:function(t){n.$set(e,"reporter",t)},expression:"item.reporter"}}),n._v(" "),t("van-field",{attrs:{label:"汇报部门",readonly:""},model:{value:e.reporterDept,callback:function(t){n.$set(e,"reporterDept",t)},expression:"item.reporterDept"}}),n._v(" "),t("van-field",{attrs:{label:"汇报时长（分钟）",readonly:""},model:{value:e.reportTime,callback:function(t){n.$set(e,"reportTime",t)},expression:"item.reportTime"}}),n._v(" "),t("div",{staticClass:"field-file"},[t("div",{staticClass:"field-title"},[n._v("议题材料")]),n._v(" "),0<e.attach.length?t("div",{staticClass:"files"},n._l(e.attach,function(e){return t("div",{key:e.id,staticClass:"file",on:{click:function(t){return n.openFile(e)}}},[t("div",{staticClass:"fileIcon"},[t("img",{attrs:{src:n.getIconClass(e.fileName),alt:""}})]),n._v(" "),t("div",{staticClass:"fileBody"},[t("div",{staticClass:"fileTitle"},[n._v("\n                                "+n._s(e.fileName)+"\n                            ")]),n._v(" "),t("div",{staticClass:"fileSize"},[t("span",[n._v(n._s(e.showFileSize||""))])])])])}),0):n._e()])],1)])}),n._v(" "),t("van-image-preview",{attrs:{images:n.previewImg,closeable:""},model:{value:n.imgPreview,callback:function(t){n.imgPreview=t},expression:"imgPreview"}}),n._v(" "),t("van-popup",{staticClass:"file-preview",staticStyle:{height:"100vh"},attrs:{"close-on-click-overlay":!0,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:n.showFile,callback:function(t){n.showFile=t},expression:"showFile"}},[t("van-nav-bar",{attrs:{title:n.filename},on:{"click-left":function(t){return n.closeFile()},"click-right":function(t){return n.closeFile()}},scopedSlots:n._u([n.appTopMenu?{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}}),t("span",[n._v("返回")])]},proxy:!0}:{key:"right",fn:function(){return[t("span",[n._v("关闭文件")])]},proxy:!0}],null,!0)}),n._v(" "),n.dsf.config.commonForm.LocalDocPreview?t("enclosure-preview",{attrs:{file:n.popFile,"is-preview":!0,"is-show-cur-person":!0}}):t("iframe",{key:"".concat(n.popFile.id,"_").concat(new Date),attrs:{id:"filePreview",src:n.fileUrl,frameborder:"0"}})],1)],2)},[],!1,null,"75d1114a",null).exports},27343:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(8450),n=o.n(e),a=o(25108),e={components:{EnclosurePreview:function(){return Promise.all([o.e(97805),o.e(82060)]).then(o.bind(o,82060))}},props:{fileData:{type:Object,default:function(){}},allFile:{type:Array,default:function(){return[]}},formMeta:{type:Object,default:function(){}},headTab:{type:String,default:""},tabName:{type:String,default:""},formData:{type:Object,default:function(){}},metaData:{type:Object}},data:function(){return{fileObj:{},list:[],fileUrl:"",isdisabled:!1,showUpload:!1,urlIndex:"0",fileList:[],imgPreview:!1,previewImg:[],videoPreview:!1,previewVideo:null,inDreasSoft:navigator.userAgent.includes("DreamSoft"),currentFile:null,fileShow:!1,popFile:{},canPopFileEdit:!1,writeFile:{},writeShow:!1,isFullScreen:!1,isPreview:!0,showPopover:!1,personScreen:[],instructorsList:[],fileTimer:null,isShowFileBtn:!0}},created:function(){var e=this;a.log("headTab"+this.headTab),this.list=this.allFile,a.log("全部的呈批文件",this.allFile),this.list.forEach(function(t){e.fileList=e.fileList.concat(t.file)}),0<this.fileList.length&&(this.fileList[0],this.popFile=this.fileList[0],this.fileObj=this.fileList[0],0==this.fileObj.navtiveUrl.indexOf("http")?this.fileUrl=this.fileObj.navtiveUrl:this.fileUrl=this.fileObj.url,this.fileObj.actived=!0)},methods:{ifFile:function(t){return!(t.includes(".png")||t.includes(".jpg")||t.includes(".mp4")||t.includes(".jpeg")||t.includes(".bmp")||t.includes(".gif"))},closePop:function(){this.isShow=!1},goPreview:function(){this.isPreview=!0,this.isFullScreen=!1},fullScreen:function(){this.isFullScreen=!this.isFullScreen;var t,e=0;null!=(t=dsf.config.appTopMenu)&&t.value&&(e=46),document.querySelector(".smt-tab")&&(document.querySelector(".smt-tab").style.top=n()(this.isFullScreen?0:e+50)+"px")},closeFileShow:function(){this.fileShow=!1,this.$refs.enclosurePreview&&this.$refs.enclosurePreview.destroyInterval()},isShowEnclosureBtn:function(t){this.isShowFileBtn=t}}},i=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"100%"}},[0<e.fileList.length&&e.ifFile(e.fileUrl)?t("div",{class:{fullScreen:e.isFullScreen},style:{position:e.isFullScreen?"":"relative",width:"100%",height:e.dsf.config.commonForm.btnToggleShowFile?"calc(100% - 0.76rem)":"100%",overflow:"auto"}},[e.dsf.config.commonForm.LocalDocPreview?t("enclosure-preview",{ref:"tabEnclosurePreview",attrs:{file:e.popFile,isPreview:e.isPreview,"form-info":e.fileData,formMeta:e.formMeta,isShowFullScreen:!0,isTabType:!0},on:{fullScreen:e.fullScreen,goPreview:e.goPreview,closePop:e.closePop,isShowEnclosureBtn:e.isShowEnclosureBtn}}):e._e(),e._v(" "),e.dsf.config.commonForm.LocalDocPreview?e._e():t("iframe",{key:e.fileUrl,staticStyle:{width:"100%",height:"100%"},attrs:{src:e.fileUrl,frameborder:"0"},on:{load:function(t){return e.changeFrameHeight()}}})],1):e.ifFile(e.fileUrl)?t("commonempty",{attrs:{description:"暂无文件预览"}}):t("div",[t("img",{attrs:{src:e.fileUrl,alt:""}})])],1)},[],!1,null,"909677fc",null).exports},42517:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(26243),n=o.n(e),a=o(25108),e={name:"PcForm",props:["formData","formMeta"],data:function(){return{url:"",iframeIndex:0,temUrl:""}},created:function(){this.initUrl()},mounted:function(){},methods:{initUrl:function(){var e=this,o=(this.url=dsf.config.formTab.filter(function(t){return"pcForm"==t.name})[0].pcFormUrl||"",{moduleId:this.$route.params.moduleId,flowId:this.formMeta.parameters.flowId,nodeId:this.formMeta.parameters.nodeId,userId:dsf.util.loadLocalStore("user").user_id,pk:this.$route.params.pk});this.url&&n()(o).forEach(function(t){-1==e.url.search(/\?/)?e.url+="?".concat(t,"=").concat(o[t]):e.url+="&".concat(t,"=").concat(o[t])}),this.temUrl=this.url,a.log(this.url)},refreshIframe:function(){-1==this.url.search(/\?/)?this.temUrl="".concat(this.url,"?number=").concat(Math.random()):this.temUrl="".concat(this.url,"&number=").concat(Math.random())}}},i=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",{attrs:{id:"pc-form"}},[t("div",{ref:"content",staticClass:"content"},[t("iframe",{key:this.temUrl,ref:"iframe",attrs:{id:"pcIframe",src:this.temUrl,frameborder:"0",scrolling:"yes"}})])])},[],!1,null,"15e4ce8e",null).exports},29762:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(5044),e={name:"readedList",props:["formData","formMeta"],data:function(){return{active:0,yq_refreshing:!1,yq_noRecord:!1,yq_loading:!1,yq_finished:!1,yq_list:[],yq_start:0,yq_startindex:0,yq_limit:20,yqps_refreshing:!1,yqps_noRecord:!1,yqps_loading:!1,yqps_finished:!1,yqps_list:[],yqps_start:0,yqps_startindex:0,yqps_limit:20,Interval:""}},filters:{dateFormat:function(t){return dsf.date.format(t,"yyyy-mm-dd hh:ii")}},created:function(){var t=this;this.$bus.on("emitYq",function(){t.yq_initData()}),this.$bus.on("emitPs",function(){t.yqps_initData()}),this.onClick()},methods:{onClick:function(t){var e=this,o=(clearInterval(this.Interval),t?"yqps":"yq");this.getViewLog(o),this.Interval=setInterval(function(){e.getViewLog(o)},1e4)},getViewLog:function(e){var o=this;dsf.http.post("fn/sx/schedule/getViewLog",{start:0,limit:(this["".concat(e,"_startindex")]+1)*this["".concat(e,"_limit")],type:e,pk:this.formMeta.parameters.pk}).then(function(t){t.data&&0!=t.data.data.length?o["".concat(e,"_list")]=t.data.data:(o["".concat(e,"_finished")]=!0,clearInterval(o.Interval))})},yq_onLoadHandle:function(){var e=this,t={start:e.yq_start,limit:e.yq_limit,type:"yq",pk:e.formMeta.parameters.pk};dsf.http.post("fn/sx/schedule/getViewLog",t).then(function(t){t&&(e.yq_refreshing&&(e.yq_list=[],e.yq_refreshing=!1),"success"==t.data.type?0<e.yq_list.length?e.yq_list=[].concat((0,n.Z)(e.yq_list),(0,n.Z)(t.data.data)):e.yq_list=t.data.data:e.dsf.layer.toast(t.message),e.yq_loading=!1,t.data&&0!=t.data.data.length||(e.yq_finished=!0))}).catch(function(t){e.dsf.layer.toast(t.message)}).finally(function(){})},yq_onLoad:function(){this.yq_startindex++,this.yq_start=this.yq_startindex*this.yq_limit,this.yq_onLoadHandle()},yq_initData:function(){this.yq_loading=!0,this.yq_finished=!1,this.yq_start=0,this.yq_startindex=-1,this.yq_list=[],this.yq_onLoad()},yq_onRefresh:function(){this.yq_initData()},yqps_onLoadHandle:function(){var e=this,t={start:e.yqps_start,limit:e.yqps_limit,type:"yqps",pk:e.formMeta.parameters.pk};dsf.http.post("fn/sx/schedule/getViewLog",t).then(function(t){e.yqps_loading=!1,t&&(e.yqps_refreshing&&(e.yqps_list=[],e.yqps_refreshing=!1),t.data&&0!=t.data.data.length?"success"==t.data.type?0<e.yqps_list.length?e.yqps_list=[].concat((0,n.Z)(e.yqps_list),(0,n.Z)(t.data.data)):e.yqps_list=t.data.data:e.dsf.layer.toast(t.message):e.yqps_finished=!0)}).catch(function(t){e.dsf.layer.toast(t.message)}).finally(function(){})},yqps_onLoad:function(){this.yqps_startindex++,this.yqps_start=this.yqps_startindex*this.yqps_limit,this.yqps_onLoadHandle()},yqps_initData:function(){this.yqps_loading=!0,this.yqps_finished=!1,this.yqps_start=0,this.yqps_startindex=-1,this.yqps_list=[],this.yqps_onLoad()},yqps_onRefresh:function(){this.yqps_initData()}},beforeDestroy:function(){clearInterval(this.Interval)}},a=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"readed-list"},[n("van-tabs",{staticClass:"tabsContainer",on:{click:function(t){return o.onClick(o.active)}},model:{value:o.active,callback:function(t){o.active=t},expression:"active"}},[n("van-tab",{attrs:{title:"要情访问记录"}},[n("van-pull-refresh",{staticClass:"pushContainer",on:{refresh:o.yq_onRefresh},model:{value:o.yq_refreshing,callback:function(t){o.yq_refreshing=t},expression:"yq_refreshing"}},[n("van-list",{attrs:{finished:o.yq_finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:o.yq_onLoad},model:{value:o.yq_loading,callback:function(t){o.yq_loading=t},expression:"yq_loading"}},[0<o.yq_list.length?n("van-row",{staticClass:"readed-data-header"},[n("van-col",{staticClass:"readed-header-col",attrs:{span:"6"}},[o._v("访问人")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("首次访问")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("最新访问")])],1):o._e(),o._v(" "),o._l(o.yq_list,function(t,e){return n("van-row",{key:e,staticClass:"readed-data-item"},[n("van-col",{staticClass:"readed-col",staticStyle:{"padding-left":"5px"},attrs:{span:"6"}},[o._v(o._s(t.sourceName))]),o._v(" "),n("van-col",{staticClass:"readed-col",attrs:{span:"9"}},[o._v(o._s(o._f("dateFormat")(t.createTime)))]),o._v(" "),n("van-col",{staticClass:"readed-col",attrs:{span:"9"}},[o._v(o._s(o._f("dateFormat")(t.actTime)))])],1)}),o._v(" "),o.yq_noRecord?n("commonempty",{attrs:{description:"暂无记录"}}):o._e()],2)],1)],1),o._v(" "),n("van-tab",{attrs:{title:"批示访问记录"}},[n("van-pull-refresh",{staticClass:"pushContainer",on:{refresh:o.yqps_onRefresh},model:{value:o.yqps_refreshing,callback:function(t){o.yqps_refreshing=t},expression:"yqps_refreshing"}},[n("van-list",{attrs:{finished:o.yqps_finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:o.yqps_onLoad},model:{value:o.yqps_loading,callback:function(t){o.yqps_loading=t},expression:"yqps_loading"}},[0<o.yqps_list.length?n("van-row",{staticClass:"readed-data-header"},[n("van-col",{staticClass:"readed-header-col",attrs:{span:"6"}},[o._v("访问人")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("首次访问")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("最新访问")])],1):o._e(),o._v(" "),o._l(o.yqps_list,function(t,e){return n("van-row",{key:e,staticClass:"readed-data-item"},[n("van-col",{staticClass:"readed-col",staticStyle:{"padding-left":"5px"},attrs:{span:"6"}},[o._v(o._s(t.sourceName))]),o._v(" "),n("van-col",{staticClass:"readed-col",attrs:{span:"9"}},[o._v(o._s(o._f("dateFormat")(t.createTime)))]),o._v(" "),n("van-col",{staticClass:"readed-col",attrs:{span:"9"}},[o._v(o._s(o._f("dateFormat")(t.actTime)))])],1)}),o._v(" "),o.yqps_noRecord?n("commonempty",{attrs:{description:"暂无记录"}}):o._e()],2)],1)],1)],1)],1)},[],!1,null,"b07d3eac",null).exports},25580:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return l}});o(73747);var a=o(9980),e=o(21864),n={props:{fabItem:{type:Object,default:function(){}},titleKey:{type:String,default:"title"}},data:function(){return{}},computed:{title:function(){return this.fabItem.title||this.fabItem[this.titleKey]}},methods:{clickItem:function(t){"go"==t.type?t.url?this.$router.push({path:t.url}):dsf.layer.toast("未传入跳转地址"):this.$emit("clickItem",t)}}},i=o(51900),n=(0,i.Z)(n,function(){var e=this,t=e._self._c;return t("div",{staticClass:"dsf-fab-item",on:{click:function(t){return e.clickItem(e.fabItem)}}},[t("i",{staticClass:"iconfont",class:e.fabItem.icon}),e._v(" "),t("span",[e._v(e._s(e.title))])])},[],!1,null,"122e792a",null).exports,r=o(14355),s=o(25108),r={name:"announcement",components:{Dialog:a.Z,defaultList:r.default,dsfFab:e.Z,dsfFabItem:n,commonForm:function(){return Promise.resolve().then(o.bind(o,32444))}},props:["relationList","parameters","isControl","metaData"],data:function(){return{list:this.relationList,value:"",data:{},obj_hei:{height:""},show:!1,checkable:!0,oppsetTop:"0px",activeIcon:"add",fabIcon:"add",params:{moduleId:null,infoId:null,fileRelaId:0},relaIds:[],relaForm:{},showForm:!1}},beforeCreate:function(){this.$options.components.commonForm=o(32444).default},created:function(){this.params.moduleId=this.$route.params.moduleId,this.params.infoId=this.parameters.pk},computed:{},watch:{"params.fileRelaId":function(e,t){0!=e&&(this.relaIds=this.list.find(function(t){return t.fileRelaId==e}).document.map(function(t){return t.pk}))},relationList:function(t,e){this.list=t}},methods:{getList:function(){var n=this;dsf.http.get("fn/mobileRelationFile/getFormRelationFiles",{pk:this.parameters.pk,moduleId:this.$route.params.moduleId,nodeId:this.parameters.nodeId,flowId:this.parameters.flowId}).then(function(o){n.list.forEach(function(e,t){n.list.splice(t,1,o.data.rows.find(function(t){return e.fileRelaId==t.fileRelaId}))})})},toDtail:function(t){this.showForm=!0,this.relaForm={moduleId:t.moduleId,pk:t.info_id,params:{relaId:t.relaId,isShowRela:t.isShowRela}}},showList:function(e){var t=this;function o(){t.metaData&&window[t.metaData.metaId+"_beforeOpenCode"]?window[t.metaData.metaId+"_beforeOpenCode"](e,t.parameters,t.metaData,t):(t.params.fileRelaId=e,t.show=!0)}1==t.list.find(function(t){return t.fileRelaId==e}).isCreatenew?t.$bus.emit("saveFormBus",{metaData:t.metaData,callback:o,isTemp:!0}):o()},confirmRelation:function(e,t){var o=this,n=e.map(function(t){return t.dataValue.relaId}),a=e.map(function(t){return t.dataValue.relaModuleId});1==this.list.find(function(t){return t.fileRelaId==o.params.fileRelaId}).isCreatenew?1<e.length?dsf.layer.toast("关联个数不能超过1个"):(dsf.layer.loading(),dsf.http.post("fn/filerelation/select/updateInfo",{fromPk:n.join(","),toPk:this.parameters.pk,fromModule:a.join(","),toModule:this.parameters.moduleId}).then(function(t){200==t.data.code?(dsf.layer.clear(),o.$route.params.pk?(o.show=!1,o.$bus.emit("refreshFormBus")):o.$router.replace({path:"/commonForm/".concat(o.parameters.moduleId,"/").concat(o.parameters.pk),query:o.$route.query})):dsf.layer.toast(t.data.message)})):(dsf.http.post("fn/mobileRelationFile/save",{relaMode:t,relaIds:n.join(","),pk:this.parameters.pk,moduleId:this.$route.params.moduleId,fileRelaId:this.params.fileRelaId}).then(function(t){o.getList(),o.params.fileRelaId=0,o.$bus.emit("relationListAdd",{metaData:o.metaData,list:e})}),this.show=!1)},delRelation:function(t,e,o){var n=this;a.Z.confirm({message:"是否确认不再关联该文件"}).then(function(){s.log(t),dsf.http.post("fn/mobileRelationFile/delete",{pk:n.parameters.pk,moduleId:n.$route.params.moduleId,fileRelaId:t.fileRelaId,fileId:t.fileId}).then(function(t){o.splice(e,1),n.params.fileRelaId=0})}).catch(function(){})}}},l=(0,i.Z)(r,function(){var a=this,t=a._self._c;return t("div",[t("div",{staticClass:"relation-list"},a._l(a.list,function(n){return t("div",{key:n.relaValue,staticClass:"relation-type",style:{padding:a.isControl?"".concat(a.dsf.config.commonForm.controlPadding||"0.3rem"," 0"):"0.2rem"}},[n.canShow?[t("div",{staticClass:"type-name",style:{fontWeight:a.isControl?"normal":"bold"}},[t("span",{class:["size-".concat(a.dsf.config.commonForm.fontLevel||3)]},[a.metaData&&a.metaData.showLabel?t("span",[a._v(a._s(n.name))]):a._e()]),a._v(" "),0<n.canEdit?t("van-icon",{staticClass:"fileIcon",attrs:{size:"0.42rem",name:"add-o"},on:{click:function(t){return a.showList(n.fileRelaId)}}}):a._e()],1),a._v(" "),a._l(n.document,function(e,o){return t("div",{key:e.info_id,staticClass:"fileList",on:{click:function(t){return a.toDtail(e)}}},[t("div",{staticClass:"fileBody flex1"},[t("div",{staticClass:"fileTitle flex ac"},[t("img",{attrs:{src:"static/images/platform/relation.png",alt:""}}),a._v(" "),t("span",{staticClass:"ellipsis",staticStyle:{flex:"1"}},[a._v(a._s(e.itemsContents))]),a._v(" "),0<n.canEdit?t("i",{staticClass:"iconfont iconguanbi1",on:{click:function(t){return t.stopPropagation(),a.delRelation(e,o,n.document)}}}):a._e()])])])})]:a._e()],2)}),0),a._v(" "),t("van-popup",{style:{height:"100%"},attrs:{position:"bottom","get-container":"#app"},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[t("default-list",{attrs:{params:a.params,checkable:a.checkable,oppsetTop:a.oppsetTop,checkIds:a.relaIds},on:{cancelCheck:function(t){a.show=!1},confirmCheck:a.confirmRelation}})],1),a._v(" "),t("van-popup",{style:{height:"100%"},attrs:{position:"bottom","get-container":"#app"},model:{value:a.showForm,callback:function(t){a.showForm=t},expression:"showForm"}},[t("van-nav-bar",{attrs:{title:"关联文件"},on:{"click-left":function(t){a.showForm=!1}},scopedSlots:a._u([{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}}),t("span",[a._v("返回")])]},proxy:!0}])}),a._v(" "),a.showForm?t("common-form",{attrs:{_moduleId:a.relaForm.moduleId,_pk:a.relaForm.pk,_params:a.relaForm.params||{},isPop:!0}}):a._e()],1)],1)},[],!1,null,"5c3a4d88",null).exports},448:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"relevantFile",props:["formData","formMeta","allFile","headTab","tabName"],components:{enclosure:o(58930).default},data:function(){return{fileData:null}},created:function(){this.fileData={info_id:this.$route.params.pk||this.formMeta.parameters.pk||this.formData.main.A0001.value||"",moduleId:this.$route.params.moduleId||this.formMeta.parameters.moduleId,nodeId:this.formMeta.parameters.nodeId||"",nodeName:this.formMeta.parameters.nodeName||"",flowId:this.formMeta.parameters.flowId||"",pId:this.formMeta.parameters.pId||"",pnId:this.formMeta.parameters.pnId||"",uploadAttach:this.formMeta.parameters.uploadAttach||""}}},n=(0,o(51900).Z)(e,function(){return(0,this._self._c)("enclosure",{ref:"enclosure",attrs:{headTab:this.headTab,tabName:this.tabName,fileData:this.fileData,formData:this.formData,allFile:this.allFile,formMeta:this.formMeta}})},[],!1,null,null,null).exports},20812:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var n=o(90541),a=o(25108),e={name:"shanxiLnstructionList",props:["formData","formMeta","headTab"],data:function(){return{refreshing:!1,listValue:[]}},watch:{headTab:function(t,e){"shanxiLnstructionList"==t&&this.getVisit()}},created:function(){this.initData(),this.getVisit()},mounted:function(){var e=this;this.$bus.emit("shanxiListValue",this.formMeta.parameters.pk),this.$bus.on("refreshValue",function(t){e.initData()})},activated:function(){a.log(111)},methods:{onRefresh:function(){var t=this;this.initData(),setTimeout(function(){t.refreshing=!1},500)},getVisit:function(){var t={infoId:this.formMeta.parameters.pk,type:1};n.Z.http.post("fn/informationDataController/updReadStatus",t).then(function(t){a.log(t)})},initData:function(){var e=this,t=(e.listValue,{moduleId:"230607142130GwCL67ds9AIrvcVx17M",formId:"231128094740X4wsVlQr8Q6x4CRyxEj",sourceId:this.formMeta.parameters.pk,isPublic:"",limit:50});n.Z.http.post("fn/list/query?",t).then(function(t){a.log(t),"200"==t.status&&(a.log(t.data.data),e.listValue=t.data.data)})}}},i=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"readed-list"},[n("van-pull-refresh",{staticClass:"pushContainer",on:{refresh:o.onRefresh},model:{value:o.refreshing,callback:function(t){o.refreshing=t},expression:"refreshing"}},o._l(o.listValue,function(t,e){return n("div",{key:e,staticClass:"box"},[n("p",{staticClass:"box_text"},[o._v(o._s(t["LDPSZB.C-REPORT-LDPS-SUB-0003"])+"批示：")]),o._v(" "),n("span",{staticClass:"box_text2"},[o._v(o._s(t["LDPSZB.C-REPORT-LDPS-SUB-0002"]))])])}),0)],1)},[],!1,null,"51df361e",null).exports},82754:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"shanxiReadeList",props:["formData","formMeta","headTab"],data:function(){return{active:0,refreshing:!1,finished:!1,loading:!1,listValue:[],refreshing_pi:!1,finished_pi:!1,loading_pi:!1,listValue_pi:[]}},watch:{headTab:function(t,e){"shanxiReadeList"==t&&this.onClick(this.active)}},created:function(){},mounted:function(){this.onClick(0)},methods:{onClick:function(t){var e,o=this;0==t?(this.listValue=[],e={moduleId:"220317155454bLRlymvwV3f69UMhUCe",formId:"231030151953UI7WVpttrb3tggJ2UJM",FID:this.formMeta.parameters.pk,limit:50},dsf.http.post("fn/list/query?",e).then(function(t){"200"==t.status&&(o.listValue=t.data.data)})):1==t&&(this.listValue_pi=[],e={moduleId:"220317155454bLRlymvwV3f69UMhUCe",formId:"231030152256Es1kCfmFx0zzfYAtPYV",FID:this.formMeta.parameters.pk,limit:50},dsf.http.post("fn/list/query?",e).then(function(t){"200"==t.status&&(o.listValue_pi=t.data.data)}))},onRefresh:function(){this.onClick(this.active),this.refreshing=!1},onLoad:function(){this.loading=!1},onLoad_pi:function(){this.loading_pi=!1},onRefresh_pi:function(){this.onClick(this.active),this.refreshing_pi=!1}}},n=(0,o(51900).Z)(e,function(){var o=this,n=o._self._c;return n("div",{staticClass:"readed-list"},[n("van-tabs",{staticClass:"tabsContainer",on:{click:function(t){return o.onClick(o.active)}},model:{value:o.active,callback:function(t){o.active=t},expression:"active"}},[n("van-tab",{attrs:{title:"信息访问记录"}},[n("van-pull-refresh",{staticClass:"pushContainer",on:{refresh:o.onRefresh},model:{value:o.refreshing,callback:function(t){o.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:o.finished,"finished-text":"没有更多了"},on:{load:o.onLoad},model:{value:o.loading,callback:function(t){o.loading=t},expression:"loading"}},[0<o.listValue.length?n("van-row",{staticClass:"readed-data-header"},[n("van-col",{staticClass:"readed-header-col",attrs:{span:"6"}},[o._v("访问人")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("首次访问")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("最新访问")])],1):o._e(),o._v(" "),o._l(o.listValue,function(t,e){return n("van-row",{key:e,staticClass:"readed-data-item"},[n("van-col",{staticClass:"readed-header-col",staticStyle:{"padding-left":"5px"},attrs:{span:"6"}},[o._v(o._s(t["C-OA-ZBYQ-REC-0002"]))]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v(o._s(t["23110116452072yOD5Jd5wJRYBrELbe"]))]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v(o._s(t["231101164624StuGKtMb14EDbL946vO"]))])],1)})],2)],1)],1),o._v(" "),n("van-tab",{attrs:{title:"批示访问记录"}},[n("van-pull-refresh",{staticClass:"pushContainer",on:{refresh:o.onRefresh_pi},model:{value:o.refreshing_pi,callback:function(t){o.refreshing_pi=t},expression:"refreshing_pi"}},[n("van-list",{attrs:{finished_pi:o.finished_pi,"finished-text":"没有更多了"},on:{load:o.onLoad_pi},model:{value:o.loading_pi,callback:function(t){o.loading_pi=t},expression:"loading_pi"}},[0<o.listValue.length?n("van-row",{staticClass:"readed-data-header"},[n("van-col",{staticClass:"readed-header-col",attrs:{span:"6"}},[o._v("访问人")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("首次访问")]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v("最新访问")])],1):o._e(),o._v(" "),o._l(o.listValue_pi,function(t,e){return n("van-row",{key:e,staticClass:"readed-data-item"},[n("van-col",{staticClass:"readed-header-col",staticStyle:{"padding-left":"5px"},attrs:{span:"6"}},[o._v(o._s(t["C-OA-ZBYQ-REC-0002"]))]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v(o._s(t["231101164658l2lz2GoTaHOa0fYb3kO"]))]),o._v(" "),n("van-col",{staticClass:"readed-header-col",attrs:{span:"9"}},[o._v(o._s(t["231101164727cXKGnmT3cKmv4bjNPvU"]))])],1)})],2)],1)],1)],1)],1)},[],!1,null,"39a82fe0",null).exports},64394:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"supervising",components:{defaultList:o(14355).default},props:{"form-data":{type:Object}},data:function(){return{item:{listId:"2108231603007SHLatwkCjnZRDaNaYn",moduleId:"210812165721b8aVEBBOB8sKpsbzNaK",name:"反馈情况",params:{moduleId:"210812165721b8aVEBBOB8sKpsbzNaK",listId:"2108231603007SHLatwkCjnZRDaNaYn",pk:this.formData.main.A0001.value}}}}},n=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",[t("keep-alive",[t("default-list",{attrs:{params:this.item}})],1)],1)},[],!1,null,null,null).exports},69179:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(77193),n={name:"supervision",props:{},components:{CommonTabs:o(56229).default}};(0,e.Z)(n,"props",{}),(0,e.Z)(n,"data",function(){return{}});var e=n,a=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",[t("CommonTabs",{attrs:{tabKey:"yddb"}})],1)},[],!1,null,null,null).exports},56535:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return n}});var e={name:"LockPage",data:function(){return{}},created:function(){},mounted:function(){},methods:{}},n=(0,o(51900).Z)(e,function(){this._self._c;return this._m(0)},[function(){var t=this._self._c;return t("div",{attrs:{id:"lock-page"}},[t("div",{staticClass:"message"},[t("i",{staticClass:"iconfont lock"},[this._v("")]),this._v(" "),t("span",{staticClass:"title"},[this._v("本设备已锁定")]),this._v(" "),t("span",[this._v("为了保护设备安全,请联系管理员解锁")])])])}],!1,null,"02f1e8d6",null).exports},4812:function(t,e,o){"use strict";o.d(e,{Z:function(){return n}});var e={name:"OpintionSign",components:{},props:{signName:{type:String,default:""},signTime:{type:String,default:""}},data:function(){return{}},mounted:function(){},computed:{},methods:{}},n=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",{staticClass:"opintionView"},[t("span",{staticClass:"name"},[this._v(this._s(this.signName))]),this._v(" "),t("span",{staticClass:"date"},[this._v(this._s(this.signTime))])])},[],!1,null,"6ba78af2",null).exports},5453:function(t,e,o){"use strict";o.d(e,{Z:function(){return d}});var e=o(26243),a=o.n(e),e=o(62680),i=o.n(e),e=o(95366),r=o.n(e),e=o(6919),n=o.n(e),s=o(77193),e=o(59655),l=o(25108);function c(e,t){var o,n=a()(e);return i()&&(o=i()(e),t&&(o=o.filter(function(t){return r()(e,t).enumerable})),n.push.apply(n,o)),n}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach(function(t){(0,s.Z)(e,t,o[t])}):n()?Object.defineProperties(e,n()(o)):c(Object(o)).forEach(function(t){Object.defineProperty(e,t,r()(o,t))})}return e}var e={name:"EnclosureButton",components:{EnclosureItem:e.Z},props:["fileData"],data:function(){return{dataValue:{info_id:"",moduleId:""},isShow:!1,overflow:document.body.style.overflow,typeConfig:{img:"iconpicture",text:"iconfile"},loading:!1,isLast:!1,isError:!1,params:{info_id:"",infoId:"",moduleId:"",nodeId:"",start:0,limit:10},list:[]}},watch:{isShow:function(t){document.body.style.overflow=t?"hidden":this.overflow}},mounted:function(){var t={},e="200517191343bubbMI4Pg5IyFs0BvPV"==(t=this.$route.params.formData?this.$route.params.formData.dataValue:this.fileData).masterId;this.params.info_id=this.params.infoId=e?t.masterId:t.info_id||t.fid||t.id||t.A0001||t["SW_XZD.A0001"],this.params.moduleId=e?t.masterModuleId:t.moduleId||t.A0004||t["SW_XZD.A0004"],this.postData()},destroyed:function(){document.body.style.overflow=this.overflow},methods:{emptyEvent:function(){},showBox:function(){this.isShow=!0},closeBox:function(){this.isShow=!1},openFile:function(t){this.$emit("open-file",t),this.isShow=!1},scrollEvent:function(t){var t=t.target,e=t.offsetHeight,o=t.scrollHeight,t=t.scrollTop;0===t?l.log("到顶了"):o<t+e+100&&this.postData()},postData:function(){var e=this;this.loading||this.isLast||(this.loading=!0,dsf.http.post("fn/mobileAttachment/getFormAttachment",u(u({},this.params),{},{start:this.params.start+1})).done(function(t){e.postDataSuccess(t)}).error(function(t){e.isError=!0,e.dsf.layer.toast("请求异常")}).always(function(){e.loading=!1}))},postDataSuccess:function(t){var s,l=this,t=t.rows;t.length?(t.length<this.params.limit&&(this.isLast=!0),this.$set(this.params,"start",this.params.start+1),s=(new Date).getTime(),t.map(function(t){t=t.document;return t&&t.forEach(function(t){var e=t.id,o=t.infoId,n=t.title,a=t.type,i=t.moduleId,t=t.size,r=dsf.util.loadSessionStore("loginToken");l.list.push({id:e,title:n,size:t||"",url:dsf.url.getServerUrl("fn/file/download?infoId=".concat(o,"&fileId=").concat(e,"&fileName=").concat(n,"&nrType=").concat(a,"&moduleId=").concat(i,"&x-auth-token=").concat(r,"&fullfilename=").concat(s).concat(n))})})}),this.$emit("fileList",this.list),1===this.params.start&&0<this.list.length&&this.$emit("open-file",this.list[0].url)):this.isLast=!0}}},d=(0,o(51900).Z)(e,function(){var e=this,o=e._self._c;return o("div",{staticClass:"ds-enclosure-button"},[o("div",{staticClass:"__e_button",on:{click:e.showBox}},[o("i",{staticClass:"iconfont iconqiehuanfujian"}),e._v(" 附件\n  ")]),e._v(" "),o("transition",{attrs:{name:"__e_box"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"__e_box",on:{click:e.closeBox}},[o("div",{ref:"main",staticClass:"__e_box_main",on:{scroll:e.scrollEvent,click:function(t){return t.stopPropagation(),e.emptyEvent.apply(null,arguments)}}},[e.isError&&!e.list.length?o("div",{staticClass:"__file_empty"},[o("commonempty",{attrs:{image:"network",description:"请求异常"}})],1):e._e(),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.list.length&&e.isLast,expression:"!list.length && isLast"}],staticClass:"__file_empty"},[o("commonempty",{attrs:{description:"暂无附件"}})],1),e._v(" "),o("div",{staticClass:"__file_list"},e._l(e.list,function(t){return o("enclosure-item",{key:t.id,attrs:{name:t.title,size:t.size,url:t.url},on:{open:e.openFile}})}),1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.loading&&!e.isLast,expression:"loading && !isLast"}],staticClass:"__list_loading"},[o("van-loading",{attrs:{type:"spinner",size:"24px"}})],1)])])])],1)},[],!1,null,"6053d58c",null).exports},17649:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var n=o(25108),e={name:"EnclosurePre",props:{fileUrl:{type:String,default:""}},data:function(){return{}},mounted:function(){window.filePreview.onhashchange=function(t){n.log("tag",window.filePreview.location.href)}},computed:{fullUrl:function(){return dsf.url.openOffice(encodeURIComponent(this.fileUrl))}},methods:{}},a=(0,o(51900).Z)(e,function(){var t=this._self._c;return t("div",{staticClass:"ds-enclosure-pre"},[this.fileUrl&&0<this.fileUrl.length?t("iframe",{attrs:{id:"filePreview",src:this.fullUrl,frameborder:"0"}}):t("commonempty",{attrs:{description:"暂无预览"}})],1)},[],!1,null,null,null).exports},7843:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return i}});var e=o(73473),n=o.n(e),e=o(63560),a=o(88561),e={name:"AskLeave",components:{selectPerson:e.default},data:function(){return{isShow:!1,resolve:function(){},reject:function(){},data:null,showPerson:!1,congressPersons:[],congressPersonIds:"",congressPerson:"",leaveReason:""}},methods:{init:function(){var t=a.Z.loadSessionStore("user"),t=[{id:t.user_id,pid:t.deptId,name:t.name}];this.data=null,this.showPerson=!1,this.congressPersons=t,this.congressPersonIds=t[0].id,this.congressPerson=t[0].name,this.leaveReason=""},show:function(t){var o=this;return this.init(),this.data=t,this.isShow=!0,new(n())(function(t,e){o.resolve=t,o.reject=e})},cancel:function(){this.isShow=!1,this.reject("流程被中断")},submit:function(){var t,e=this;this.congressPersons.length?this.leaveReason.length?(t=dsf.layer.loading(),dsf.http.post("fn/mobilePDMeeting/attendMeeting",{attendance:-1,meetingtzId:this.data.meetingtzId,leaveReason:this.leaveReason,userName:this.congressPerson,userId:this.congressPersonIds,"x-auth-token":a.Z.loadSessionStore("loginToken")}).done(function(t){"200"===t.code?(e.isShow=!1,e.resolve(t)):dsf.layer.toast("请求异常")}).error(function(){dsf.layer.toast("请求异常")}).always(function(){dsf.layer.closeLoading(t)})):dsf.layer.toast("请填写请假理由"):dsf.layer.toast("请选择代会人员")},getUserNames:function(t){var e=[],o=[],t=t.map(function(t){return e.push(t.name),o.push(t.attrs.idValue),{id:t.attrs.idValue,pid:t.attrs.pidValue,name:t.name}});return{names:e.join(","),ids:o.join(","),persons:t}},getSelectUser:function(t){var e,o;0<t.length&&(e=(t=this.getUserNames(t)).names,o=t.ids,t=t.persons,this.congressPerson=e,this.congressPersonIds=o,this.congressPersons=t)}}},i=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-ask-leave"},[t("van-popup",{staticClass:"ds-ask-leave-pop",attrs:{position:"bottom","get-container":"#app",round:""},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("div",{staticClass:"header"},[t("van-nav-bar",{attrs:{title:"请假","left-text":"取消"},on:{"click-left":e.cancel}})],1),e._v(" "),t("div",{staticClass:"body"},[t("div",{staticClass:"congressPerson"},[t("van-field",{attrs:{readyonly:"","input-align":"left",label:"代会人员:",placeholder:"请选择"},on:{click:function(t){e.showPerson=!0}},scopedSlots:e._u([{key:"label",fn:function(){return[t("span",[t("label",{staticClass:"mast-input"}),e._v("代会人员：\n          ")])]},proxy:!0}]),model:{value:e.congressPerson,callback:function(t){e.congressPerson=t},expression:"congressPerson"}})],1),e._v(" "),t("van-field",{attrs:{rows:"2",autosize:"",label:"请假理由:",type:"textarea",placeholder:"请输入请假理由"},model:{value:e.leaveReason,callback:function(t){e.leaveReason=t},expression:"leaveReason"}})],1),e._v(" "),t("div",{staticClass:"footer"},[t("van-button",{attrs:{type:"theme"},on:{click:e.submit}},[e._v("提交")])],1)]),e._v(" "),t("van-popup",{style:{height:"90%"},attrs:{"close-on-click-overlay":!1,position:"bottom","get-container":"#app",round:""},model:{value:e.showPerson,callback:function(t){e.showPerson=t},expression:"showPerson"}},[t("selectPerson",{on:{getSelectUser:e.getSelectUser,cancePerson:function(t){e.showPerson=!1}}})],1)],1)},[],!1,null,null,null).exports},86261:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return a}});var e=o(18868),n=o(25108),e={name:"yuebi",components:{DebounceClick:e.Z},props:{formData:{type:Object,default:function(){return{}}}},data:function(){return{isShow:!1,value:"",errorMessage:""}},created:function(){},computed:{},watch:{value:function(t){0<t.length&&(this.errorMessage="")}},mounted:function(){},methods:{btnYueBi:function(){var o=this,t={infoIds:o.formData.main.A0001.value,distribIds:o.formData.distribId,shareContent:o.value};dsf.http.post("fn/mobileToReadOperation/readed",t).then(function(t){var t=t.data,e=t.message;t.result,t.type;dsf.layer.toast(e),n.log(o),o.$emit("golist")}).error(function(t){dsf.layer.toast(t)})},Show:function(){this.isShow=!this.isShow}}},a=(0,o(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"yuebi"},[t("van-popup",{attrs:{position:"bottom","get-container":"#app",round:""},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[t("van-nav-bar",{attrs:{title:"填写意见","left-text":"取消"},on:{"click-left":function(t){return e.Show()}}}),e._v(" "),t("van-cell-group",{staticClass:"_file"},[t("van-field",{ref:"editOpinion",attrs:{"error-message":e.errorMessage,type:"textarea",rows:"10",autofocus:"",autosize:"",placeholder:"请输入意见"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),t("van-goods-action",[t("debounce-click",[t("van-goods-action-button",{attrs:{type:"theme",text:"阅毕"},on:{click:function(t){return e.btnYueBi()}}})],1)],1)],1)],1)},[],!1,null,"a5816bc4",null).exports},33959:function(t,e,n){var a={"./chengduyitihua.js":[78303,290],"./shGovYth.js":[74037,50661],"./sxXTBG.js":[63002,74336]};function o(e){var t,o;return n.o(a,e)?(o=(t=a[e])[0],n.e(t[1]).then(function(){return n(o)})):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}o.keys=function(){return Object.keys(a)},o.id=33959,t.exports=o},5589:function(t,e,o){var n={"./template230726164311FBRjWDImwCDoT2nzsyv.vue":62662,"./template230817155702XtKGgwFMW9O0vuh4fHz.vue":29078,"./template2308182053268yuAvyQjqpqJZSTy8kI.vue":76806,"./template231016235403euGcNCykKCFxKOF7Wb4.vue":54156,"./template2311211938339jQKcHf7O0tx0dJfzoA.vue":41558,"./template231127203925T91BOEVAFLJOchdKoHI.vue":53695,"./template231212100715TDMlyAQFArSt1Yc0VMm.vue":78817,"./template231215151447jCfNhFJH759FPmS3CCr.vue":68419,"./template240110144445C1AABllirEtw5m84c0r.vue":75381,"./template240112092427rjkMrPDtbcuMiHhkA1C.vue":48321};function a(t){t=i(t);return o(t)}function i(t){if(o.o(n,t))return n[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(n)},a.resolve=i,(t.exports=a).id=5589},33684:function(t,e,o){var n={"./LabelForTextControl.vue":81505,"./aoxiongFileOpen.vue":51842,"./controlCheckBox.vue":87232,"./controlCheckBoxPC.vue":18317,"./controlCityPickerA.vue":16929,"./controlCode.vue":91733,"./controlComboBox.vue":84140,"./controlDateTime.vue":44266,"./controlDateTimeTask.vue":99056,"./controlDialog.vue":11650,"./controlEditOpinion.vue":19063,"./controlEditor.vue":60174,"./controlFileCode.vue":53575,"./controlFileRelation.vue":39743,"./controlFileSec.vue":36022,"./controlFileUpload.vue":53271,"./controlFormAttchView.vue":36438,"./controlHandleTipsMessage.vue":12820,"./controlHidden.vue":72402,"./controlHtml.vue":27017,"./controlImage.vue":41242,"./controlLabel.vue":98653,"./controlMap.vue":56133,"./controlMergeFile.vue":9742,"./controlMobileAlink.vue":97965,"./controlMobileDateShow.vue":82076,"./controlMobileFl.vue":66696,"./controlMobileFlowInfo.vue":91850,"./controlMobileShareInfo.vue":71043,"./controlMultiDeptOpinion.vue":35698,"./controlNestedForm.vue":7456,"./controlNestedFormlSub.vue":95426,"./controlNewAmountThreeFirstOrder.vue":83911,"./controlNotePaperToAndGo.vue":94629,"./controlNumberBox.vue":81312,"./controlOpinionSign.vue":21422,"./controlOpinionTagView.vue":2644,"./controlOpinionView.vue":86052,"./controlOpintionView.vue":28472,"./controlProposedOpinion.vue":36941,"./controlRadio.vue":39765,"./controlRate.vue":29207,"./controlRightFileList.vue":31428,"./controlShareOpinion.vue":74871,"./controlShareRead.vue":96777,"./controlShareView.vue":57844,"./controlSign.vue":5518,"./controlSubFormPrimary.vue":28798,"./controlSubFormPrimaryCPYD.vue":87003,"./controlSwitcher.vue":18115,"./controlTemplateCode.vue":44491,"./controlTextBox.vue":91298,"./controlTextarea.vue":58448,"./controlTitle.vue":65639,"./controlUser.vue":59146,"./controlUserByData.vue":6838,"./controlUserChecked.vue":24672,"./controlUserList.vue":63450,"./controlUserNew.vue":49658,"./controlUserSearchList.vue":71403,"./controlUserTree.vue":70680,"./controlUserTreeByData.vue":43882,"./controlconvertopinionview.vue":98869,"./enclosure.vue":58930,"./extraPageNotInitView.vue":8260,"./flowHandle.vue":62562,"./formProcessingTime.vue":29282,"./formTitle.vue":40708,"./goodsList.vue":21265,"./goodsListChild.vue":24921,"./handleRrecordsControl.vue":40847,"./handleTips.vue":12928,"./meetingRoomControl.vue":42661,"./opinionControlP2433.vue":67126,"./proxyOpinionMobileControl.vue":14622,"./signForm.vue":47769,"./specialTitle.vue":37738,"./superviseV6StatusBottom.vue":97430,"./testController.vue":77869,"./textbox.vue":91938,"./transactionActionSheet.vue":37460,"./wdztFileOpen.vue":15264};function a(t){t=i(t);return o(t)}function i(t){if(o.o(n,t))return n[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(n)},a.resolve=i,(t.exports=a).id=33684},81807:function(t,e,o){var n={"./chengduyitihua.js":81688,"./index.js":35902,"./shGovYth.js":2549};function a(t){t=i(t);return o(t)}function i(t){if(o.o(n,t))return n[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(n)},a.resolve=i,(t.exports=a).id=81807},75493:function(t,e,n){var a={"./1804271601209XUy0mZV0m2aJE4XrTZ_220322142021dWYbTdP9oncussS6dID.js":[73198,68800],"./1804271601209XUy0mZV0m2aJE4XrTZ_220328100718jEPOPX5dM5fkaR69WgU.js":[61686,35581],"./180427160129OpjvceEWZTBZ3ftTG4C_220328101018ZuEOQk2kpXe4K01AaFk.js":[52196,7791],"./180427160129OpjvceEWZTBZ3ftTG4C_220408133543J7AX47AehSXK2Gn1mSS.js":[9159,53611],"./180719094152MnF6C2hEPtqIvhjJIxo_180813170915hyxE8CfuBKSqZhlvZg5.js":[67657,15842],"./180719094152MnF6C2hEPtqIvhjJIxo_210629154303wR90c2wgtV8q5RWHtS4.js":[58581,57456],"./180719094152MnF6C2hEPtqIvhjJIxo_220920212445JaqFtt1jJ3Kouag2iMe.js":[62469,29734],"./180725205942uc2zjrqnTt5sg7ReWmV_200815143625nxHRge04GJwjvH7gMWn.js":[24507,88388],"./180725205942uc2zjrqnTt5sg7ReWmV_220602111902GYv9vii4S2qwtICYK7R.js":[65045,93393],"./180725205942uc2zjrqnTt5sg7ReWmV_2208262207462ZXggFglZynBVD1UDdv.js":[17150,34896],"./180805175628RK7ixI1IyrjDuG4njD5_180917210016aPGAUUBSNgRnxNwcqZn.js":[77332,14231],"./180805175628RK7ixI1IyrjDuG4njD5_200827194705FRBR9creSLC68ZNU7AY.js":[90841,68068],"./180805175628RK7ixI1IyrjDuG4njD5_210703194953IQNSGNLjs3cEXs8E07M.js":[13414,92219],"./180805175628RK7ixI1IyrjDuG4njD5_220609100046nUzuCvYEOgp0gHAEOpN.js":[51211,57956],"./180805175628RK7ixI1IyrjDuG4njD5_220727150217OYlNbw5UGx2lfLTTcUD.js":[15891,10082],"./190111184257QgSNR8cW92akDpqeWMA_200821093359011tCwl4lDlD2260fBe.js":[98566,69060],"./190111184257QgSNR8cW92akDpqeWMA_2108111628341FuIHJingX7w89bD3g0.js":[15839,32795],"./190111184257QgSNR8cW92akDpqeWMA_211125150032cdTwrphRKzR2MbnrsKY.js":[56894,57239],"./190121161348OthBI4s3sEhvfuDJ5FD_200118164310DGZSzIMn22FLeSTXAQz.js":[44558,52914],"./190121161348OthBI4s3sEhvfuDJ5FD_200118164310DGZSzIMn22FLeSTXAQz1.js":[53677,63308],"./190121161348OthBI4s3sEhvfuDJ5FD_200829134537S77oLUO4iktVZoHG2aM.js":[85617,49405],"./190121161348OthBI4s3sEhvfuDJ5FD_2112200044028UbQ3qryOUAr9T9VWAN.js":[2774,25712],"./190121161348OthBI4s3sEhvfuDJ5FD_220803144617OWeKsIk5pTs2VoboatE.js":[97143,54472],"./190121161348OthBI4s3sEhvfuDJ5FD_220827185533tqPOTMr28FvOh6ZJhsr.js":[7107,66071],"./190121161348OthBI4s3sEhvfuDJ5FD_230624211627Rdd8FQScsRsOEz4XyQ5.js":[20508,91868],"./190121161348OthBI4s3sEhvfuDJ5FD_230719111910h6yI2Q7LQEnrcI8molv.js":[39292,51326],"./190121161348OthBI4s3sEhvfuDJ5FD_230908204011C4hGQRvQfzUiLhcJbC8.js":[83390,54985],"./190121161348OthBI4s3sEhvfuDJ5FD_231027192725cZPXY9XsrCl5A17bR3j.js":[70702,32088],"./190124141646LItUeOALbpPENBwTyMm_200821141607iUZBot5lhQkjMdYXLjo.js":[17311,49711],"./190124141646LItUeOALbpPENBwTyMm_220804192333HIgPoIMMT25FnSSszdj.js":[9933,69695],"./190124141646LItUeOALbpPENBwTyMm_230802175112KbeOrQJQQFLbw1taJ4h.js":[81075,45718],"./190124141646LItUeOALbpPENBwTyMm_230802175112jsOJ2r5dPqbRPFFLJWo.js":[90947,83126],"./190314094242VQ9wScyToHKiCEnz45L_220505161503VmyyTl3xj7iH9dAF7hy.js":[74897,77905],"./190323145209SuSc9CTjs9rg88i22T1_200820200821Pgxh3OjDMGJ9BJgYnKw.js":[98562,96910],"./190323160728t7fGwtjvQyVf8pQATUC_2008291329155LQRNMOxH9YcUZiw5ma.js":[47334,43257],"./190326163643A2kqaNa59H8vqHitU53_200821105140TwugFS1anWv3Fgbsuho.js":[88916,48936],"./1905311647221BSf1doWPYLsr8nAdqB_2008210952540onIMne6iNPSfX79R1T.js":[39954,62652],"./1905311647221BSf1doWPYLsr8nAdqB_210811165454MC7PGNcjYfMYkRcucCk.js":[31255,96396],"./1906261422364oh1kT8fYFKA3iaZcfT_211029110235hMHzyEJtwGwXGRjLye0.js":[28691,37216],"./190813144418OyeMDrjBj1ytos8cARM_220813105625kGDgOQrhdLOuVhBkEgo.js":[50351,85566],"./191017155313FhhVNpnRSCB9hg4KOWP_2007081511479VJBAsOovRRzRkJHxi9.js":[76697,61236],"./191017161345R6Q0lOvlCxxziL9ctrB_211118145657B7sHFHsYuls3GD3QQ8Z.js":[19452,2698],"./19102514345571GZEAKETYwxBNavEet_200708152006Jt9bVLa4tP6VtiYjIkr.js":[25052,26310],"./191121145307mVAk05bmov3iec5DBob_211018154722l7h7JvXvzrwFhosFjCy.js":[88019,53462],"./200109155312EtVKrJuVvIB2uxR216j_2007081529482MJAwA125lrpff5Quuf.js":[60774,86800],"./200221114238lEoLwhX0QupTY41bB7o_20072210023541NSo4Av4tTk0RTgPiw.js":[23160,11863],"./200414192551YCEq2Vh03aAklm1Ztub_210111152337iVQMDeZx5tEjHNHsthX.js":[59698,17939],"./200415172523EB7RMKVEE5kZzkwkpbm_211130135403NvZY4owzi5liOlBkLsv.js":[81822,56134],"./200415172921sp242dORpySzwFfsKWk_211130142003i8qdWZmaiChmHwTnNL5.js":[56188,83051],"./200415172937Z8Iak8h9NEIXeGVlHcE_210111171903t010YV0dYC1HdfWgxEh.js":[42815,4929],"./200415173000fVrMSCdh4IfvdORNj7r_210112095640KcnIt0K5JSwi2IZ0oVg.js":[2084,99815],"./200416091205SrBChYuLYMdih44Iybn_210112102829WgPWkCJgDY9r4qwmN7s.js":[24646,32429],"./200416091226sul95j2TsopFitIkEoW_210112145648hp9ItG5gjYFiAPZkgJG.js":[27477,760],"./200416091239k97WWNyHDbh8p4wB8Rl_210112151008MhFw8AaDQzFPHgw4kG4.js":[91120,16066],"./200514112152rWCht6hUiXVRuSKXPMZ_200514112152KGRx7Upkgv9WKgwWCs6.js":[1789,43939],"./200715104703uowNRLyY9jeo5chSWDT_200814101858TpMk9MjuIFKHAz1NUiI.js":[55670,60238],"./200715104703uowNRLyY9jeo5chSWDT_210514140355kKQ0A4REjbCqoHgjtT9.js":[59202,54312],"./200715104703uowNRLyY9jeo5chSWDT_21071216151437pn3l1gcSKEJyeroTZ.js":[14689,11717],"./200715104703uowNRLyY9jeo5chSWDT_220311155131sCm3JqicY7HmZhiyYXO.js":[60822,99978],"./200728183226QygPb3CGYwfr9L5HvWU_2008141622120tlorcaQlFJdgw0zaKB.js":[1734,25482],"./200801181621stvy8De68zNVAglWxUP_201203112812pBvTNPiBd4UwdoptPFZ.js":[61421,398],"./200803141511IcArMd7poNl5inCkM2T_210116145004qyfXIvpcBhX3AtlUP99.js":[66831,17857],"./2008141512560A0gaW41zHbqzFrHj2K_2111181342213qnkErkas75Ck2onMhq.js":[7882,36877],"./200818141651EXrwqNQT1dygxNNosTB_230430075942V51ewUGWMVtuYjQQp8z.js":[5257,39978],"./200819103404M68aBaOHQCJpEAaAES2_210817153749CQyQe6bj8nnloyGLBR2.js":[33722,75717],"./2008281406518GJRlHQpZXhLVj7G0Go_221128162740g0pyYWvPj57yLB974M8.js":[82240,67526],"./200907163859djtGhpdPuMtaYiVa5iO_2009071705324ZOiYJyy06XkzWvsBXT.js":[46381,91154],"./200910163553dOPeZXSHV7QsMuQZH9S_201127143426D0ETurA3vjqK6f2TfDu.js":[98639,99287],"./200911190106qDyH3EPfpH7vcYFOU8F_200912172802mgzr0cds03kEReMZReW.js":[96913,82615],"./200912110701H1Y11d4ZWMAJvthnX6D_2009121219139RjMkJbcrdXuTaKJQrW.js":[15688,67292],"./200912122212DsOns1wI5Q4eJ1VbUnd_210914220148UUmk9IxGUhKA3BQ6ixB.js":[47335,45970],"./200914095600BFEsWub1atCjcldfNMn_210820103729kLJUwZBpAQVasytmjot.js":[25191,86525],"./200917155723dFumxIwmk8PcyyKI68Y_210713154446D1FWwgMcuVUzQSftkPp.js":[4349,95125],"./2009181706506PnC3rQesHDfJySP8vh_210714172449GuyP2Lnoz42v3AC5X7q.js":[4904,2393],"./200921170218dMlK5UVnsi1jkA5F35N_2011061351207XYZqAzJAu9s4pHN4v7.js":[95272,31485],"./200921190145XTL0rZRpHuGvRYirsLS_20110614304689uFdAEUk6jn7DzNgcv.js":[1199,41297],"./200922134125sB7nQHSKDJToL5XGMlk_2201201105388mt09mLvp9qxoUnuc7L.js":[59852,88898],"./2009221438319K1lPaTGwMBYwfpllZ5_201106144813KF1tAhPerfylVNWcsmF.js":[19935,78251],"./200922165827GJmUdFOIYNHiqef4oLD_220120102236zBG9bCQLNxVzB8xsXMV.js":[46328,39935],"./200923151300vQWTBHu8OJ2U9qmLLsg_210113194339h9OW4Vy9fHDmFK72Jra.js":[46185,658],"./201024172651QzjzMrjOyx8yysk19Om_210625142100mezsDPX3Cvq8A8GYwf1.js":[46916,42511],"./201026102729YrEKnSyguqp21kVOSs9_210820094109XHBiIVOk46ngWAxqYWl.js":[15307,91314],"./201026103954iINLGXrVoDPrDWZiF1D_210820173247lDa4D33jOOD1pGmsjzk.js":[41997,31372],"./2010281907337wnklNyjv4Lt920iT7g_210818172519AWGR5pXUORNEJO80Zar.js":[79126,50913],"./201029113526damR5rEUNDplfctxXXS_210820142929pxKs5EFBn3jjQKE1yzv.js":[87708,92090],"./201029140953Ibh5ytuC7H9hInvERkL_210312163249BKCOdem3rdx1v5Uvfm3.js":[41988,91263],"./2010291513469IRetLV1nf8CLvC9Mxd_210322102929AtAq1psn2dkvycUj5gy.js":[98827,51066],"./2010311157000osPdCynOMZor3jmhFN_210625144650G20SEt32OJZkAXY5Kqx.js":[72889,6712],"./201031174501TyBNwEPgautddSJDMmK_210818104016F0qRVMOWr6HnUc9PwRC.js":[13261,40032],"./201102112751ae8s3raggIFjk8qrJDL_220810142800Okfky12AqLMZYXqQKBO.js":[99995,31488],"./201103144954hRTqFmQU5VBkU2IH0iH_220510093151BHodujExdYOpfYsfx6Z.js":[12429,4098],"./2011171020421sIR4XojqH1j0SML1c3_211220102421UVaV1FAlQsOpML5qQHc.js":[40343,35816],"./2011251622514OfwWKislZu9g54F3LS_201126162252dTW9T4FkVh7r1Q9By80.js":[73658,28114],"./201125171531HhP41e8lrLw0T7kuFXK_201126164450upCsnxmZFWOhi04ObxQ.js":[61121,76022],"./201204172016SOZR23CmNnExLAub9Qn_2012051700437b6uKQ7n2t6rpCcMKuC.js":[90778,58790],"./201207170700pKAH76bjreMv3ryage1_201208182043UA0wYg9PgN30859073i.js":[93474,54768],"./201207170738e1bgZQpvnxts0pt99In_201208192425LHRAxUgGuryzuk4rflT.js":[83567,87141],"./201208111223GHQwIx3kfSIpGU0OH0P_210402151440RIp6hR7vtgRvGYEAMhT.js":[72800,34345],"./2012101418089O5CTabPvP6g5XF24ET_201210141808zAmJmdZl30YgYVUM9aR.js":[98214,46494],"./2012101418089O5CTabPvP6g5XF24ET_2203111616406YYuRaVY01Q9grPHERB.js":[41611,55904],"./201217143917KUDuW2jHKTYSdwR2I3R_22051314263905dCPpFkRSiv6d3yH6e.js":[99841,3742],"./201221193816VjUKLYT0YROqWdPhQZS_201222092032aHLeSjLmX009CwgBxJe.js":[39219,27231],"./201230170107FTM46tEGeG4rwLX9mDr_2103091347418PyIHGAz84hO8SDC4ak.js":[96875,81142],"./210122161532ZODXeJ5wnDGwpjeGdVR_210228152823bAZ7lPRsWk2JK5E45pW.js":[82815,3531],"./210123173423DN3Sa5vWuC9dhxDmltw_210228144302AflanlLUYYqLS6zsrgF.js":[1834,71558],"./210202144200a6hFT4QWrGbmmP4dSy1_210202144955E2zXmVkdaDdxmOpVWgJ.js":[34838,14134],"./210204173326Wha9PmqgePoJ8JSIZWX_2102041839501VaZpjiLCceRIP3uLkh.js":[5253,25410],"./210303143634UyF7M3RpHKoyVspJn5n_220114134906C2tZim01hLrk7WlVsBX.js":[15182,98921],"./2103031709401WDEdN3HhFiNNkWUE3o_220112104658cdr34Avf3Y9hMGnJZeN.js":[79663,97526],"./210312144908u6OjNlRJ2GHZlPgYvUl_2103121449088lJLuGY0v2fYQxg6y2f.js":[28351,33014],"./2103161044139ndn6tPM0bdSbwIdwMO_220418151942nKCXHWhi1zKFnwKKiM0.js":[18482,79851],"./210331150137QZ0Zdm5LqT9saEc3cYC_210331150335vb4eC41ugr2qWFBFTEc.js":[56943,87818],"./210409135647usEHhFfZusny6i8zfhe_210823105331cYfZ25SjqYuYAObEWDi.js":[81638,40027],"./210409154920LLKWkreZ53xqcVLa9EJ_210823104308uvG9GqXnxI5y9smN2NJ.js":[21273,24364],"./2104141606331OznBwa4xmtnxhSqh0a_210414170142Mp5ojbeGNU4gvgMj2E4.js":[61759,87604],"./2105100929557pzdfQvUjTYUmZOxdnS_2105101535010QQUII7BxdeS0qVBH53.js":[37055,3433],"./210511092947c3WMaj5INEm5UcajZXW_210512152201Bxpb4rZacd3L2dS4WFC.js":[14233,31537],"./210511112523cowxdBzNkVzmqyazHR5_210517175504ipukgB4yUxChnUTSx3f.js":[60063,20399],"./210511201305RglsTUVfzUZXaWSH41I_2105121808356BnO7YJoflp4Q5uMdin.js":[82184,84261],"./2105161353307tFlVhyjYdZGNT4AQ88_210516190615aoZU8BQHVcWyu6oiCAr.js":[29037,87553],"./2105281432308rt3Ond89DvuKSSj2U1_210528143230BLh6KMxsvR0uVKUX6HS.js":[16001,80289],"./210530201047MpZAzdGmjg9bKD5t76C_210530201047XiXBpzQSDTmkPCHjILV.js":[35150,3709],"./2106021016102xjgjpCc6tqdMZkrX20_210811160010bnCI2CV4zrvjD56VJCe.js":[66130,22051],"./2106021016102xjgjpCc6tqdMZkrX20_220728163210x4gM7QlAmfnYYMWK55M.js":[84045,3494],"./210604100447Y3oPTVUtClWjMlAjnVs_220521102714FofxeKuSHY1f1aSEtp7.js":[18897,19988],"./210604144527JntE2LI7dWrpBLsluZz_220801112935XETHTC65GxzELTsChxA.js":[9667,85519],"./210607181937YJxUC5fve4y7q3SH5hJ_220110155527aF6Ff5tPp0DaY58Ro4h.js":[92292,48536],"./210607181937YJxUC5fve4y7q3SH5hJ_220808150304lWJwn4CaAhmq9Cz1T8h.js":[45620,89681],"./210607181937YJxUC5fve4y7q3SH5hJ_221128152011MkXgHxP6RNOgENsw1su.js":[99640,52264],"./210608105939mkuTUSzHdhowHPHxlY8_220802103654cprTKTvRBFsmW949iSq.js":[40891,84909],"./210608110103C6GcXVjp2CINCSidUNL_220802135409sfgoz3FcsgyJbPNPcI4.js":[14372,31786],"./210608110235Q8owCkGMCRwFP4lOIpQ_220802143206Jyw4xacE993XTl9ptzk.js":[39609,16422],"./210608170514WIMJTtfk1KkrJz8YF3P_220802145405YIikXJS8cAPuxd3hCDo.js":[40876,34105],"./210610144533Ba7o21gYTySmN6nF4IC_210611165604JxTmdWGkzL2x08PEkBD.js":[31069,50787],"./2106101524463gGQUYHcr4HhAWo8RDG_210610155104rRdjmjgmcBQwSRLSbg7.js":[80793,10458],"./2106181403258aA6hQpCl3AqIVzLa2g_210621210458I6WudZyN6mVLeWuJUDJ_subform.js":[12089,30926],"./2106181403258aA6hQpCl3AqIVzLa2g_210907110221M9FbM3HmixeqdTU0eI9_subform.js":[28205,19371],"./210619120033HrZVQSEmNPh2tieIuAj_220420175622t3pVDStJU2IKzQmUMBL.js":[34386,50923],"./210621105913XKsqGKhoTt4jkn3PvK2_220802152546fWHirqFuXzHTfDoGghe.js":[4095,71771],"./210702162251JctrQjIDfAM6D1aIPYJ_22080215411933L9NHQHZ6A1Ydd3j0j.js":[40650,2896],"./210709145421nNCphPlBbdkgXjpaVqh_220301093011ZZA6j6hvZkOubyZte42.js":[90244,12506],"./210715170238rbhfknVk6Go6KemwFCs_220125184640zPBPZxDOOH7DRdsUhmI.js":[98052,47872],"./210723164628N6ZfKTUlQtwXLTT7Mrg_210811161323SleKFgVe7E7gbqr8cbA.js":[46644,75417],"./210723164628N6ZfKTUlQtwXLTT7Mrg_2111091718255VteCCTTfNgHnjsAjj9.js":[60643,82876],"./2107281541233KWWeIfQKZ21Vn4ab88_210804111941bItbrYbrJvdy7jsTsY2.js":[63895,57044],"./210802122849Uy0bHKGiZrmaNoXVBTV_220314184833geA1WAzgM16ITRqN8FD.js":[13727,62317],"./210807171451XEifue4SFdPGbdj2Y3P_220804173346Gc6TBu49r2FTwnibsrW.js":[9294,60028],"./2108111125432kKqafy2UaRbYNPQBqU_210910002457PTEzgUkrnLQz8WKbeUn.js":[86254,60627],"./2108111125432kKqafy2UaRbYNPQBqU_2206011028080Pi0493BWweRkgQGNbd.js":[2141,93583],"./210820172950Xh8YOlmQHxiBM4ZqUwf_2111071738040Jkaiz8tiMeU4YZ5pFE.js":[61309,81329],"./210824151257cBZiKZP383jY0jUASSO_220224094248bYgSpuSj3hJOt3eFF9s.js":[82446,69015],"./210825144555mZVMP3V1EA2NwKHsnvJ_220224094248bYgSpuSj3hJOt3eFF9s.js":[32529,95599],"./210825144555mZVMP3V1EA2NwKHsnvJ_220224100020272BdV2E8T7xgooCUWf.js":[4807,32954],"./210830113828dAuqesMkJLDvc7quNBX_220824104757M8P4wY71eDN0bobfogw.js":[42077,61816],"./2109081041590Heba0s0Xvnfm1LB57q_220418111454OgG3RdEOOBjKRKsQgRI.js":[57868,60647],"./2109101725572xJe7v4lwnJwwv2OmEZ_211118152156Xr9zktJLME0f3gG7BDz.js":[85511,44091],"./2109101725572xJe7v4lwnJwwv2OmEZ_220330221300hUHqOGFNcay7flbe74J.js":[28336,13878],"./210918141338rQaNjCLUYiZJkHKxW3B_211107170646JtUfrXTM3ZjJtvxBrHd.js":[8258,66481],"./211026160337WA4njkw5gy5g2YRhfeE_2110261610071DU1fuAmwbCBM9bjJpA.js":[90240,68698],"./2111031517181yP9oQrkIKzjrzyZkwo_211104103904dMLGzyIiUDpZi0kM7vk.js":[69907,56129],"./2111041117586iYYtgUyvc1cMI3rwQZ_211104163900bolc5niU4iS4K9cxHtM.js":[94016,63447],"./211220145057dRDEzWsLtVnT8DtynZ4_220610095344I3OiVGNagMqYVVgWcX8.js":[9776,93644],"./211225173830UUSU1BZDaNmvtjLzmEp_211225202721k151j0ZTdqcWtxlNyIC.js":[68688,40743],"./2201111459470bsEO9ZhaLsZZeoHY33_220623160239a923sSlGlcmBvLLUPoP.js":[15095,96319],"./220115180631zC5pgq9RhIc6oEND2rQ_220823152045c97NEnpCWpIeehB95gG.js":[80766,55177],"./220117155640xxgo0WFBPLqRWw3rq6Y_220211141901lEk2U10EOV17PKNFWtG.js":[1267,86977],"./220119160204Ki0mHV4X7GFcNUMcktb_220920133915NEVwPkQzZvrwi2bLqZ5.js":[7948,16465],"./220125092832yYhfdwRLwicBHrPDGM9_220223194216oW8y67kjSBmDAF6UlYx.js":[86011,96194],"./220216153829YKuzKF4NHWtoURD6yr1_220524094811ksEQCqGdcDU295dyiut.js":[97705,60705],"./220302191054ercGdT9naLMCIxW0gN0_2203022201438hdXtAq8Q9vr9y03YGH.js":[74359,18776],"./220303113130omuV4PLAr9v5Th2d34D_2203051314047kwYcLZMsXvrCW4KwB2.js":[72408,74938],"./220303113130omuV4PLAr9v5Th2d34D_220503152120YgXPzWyiK3LK1WN8WLo.js":[89626,82947],"./220307163345QmmSCbaLqbxf8G4yXc6_2203071633457oI6lYzPXQdnP75CGB1.js":[89826,21819],"./220310171636BTnLG4qnA0XIvILi4vJ_220418191503TxmMdkFHwxIso6H8jps.js":[26991,47094],"./220317175747dleuT8ffDHmcbcz0aHg_220317180236WPY410fdiiAtqmPizxT.js":[92280,58220],"./220318003240v6lfgedJqtRp8y09D5V_220418192729a9PjBXgijOvNhtJEAK9.js":[41221,46606],"./220318135143AMb3ecYycO76Kftaac7_220318145710iN7hQBV4fRguktdo5OU.js":[22866,32700],"./220319161951C1yU9QKfTJAvq2nIEF7_2203191716258kGN8bfPDV9isp0XvHJ.js":[37057,58455],"./220319161951C1yU9QKfTJAvq2nIEF7_220406201147rVA7eCOsQ0tTsNGCkH8.js":[9046,43280],"./220319194130l6pirMZJe74yeqvID8I_220319200113iNqdPowpLvDaf0my9Gy.js":[66240,46797],"./220322154355adLEdmkADFhIgMN8N9M_220322154355WfdMO3jDn0kKQUpIvAt.js":[79128,29811],"./220325152726LGGTAsROCDczCUFx2FQ_220325153002mKMGgs9tzxMyabN2AdI.js":[69032,51593],"./220325162328QOkKhkcCVakYuVx5NbZ_220325162430fZ6QSx420pSsd33E9RS.js":[34182,6292],"./220326160532ApZg5bYNk7Lpuh36D7r_220326161635smk8TVzL10hzcNCAvVi.js":[61360,99162],"./22033014375337NhNauH4hQTI1epXTB_220415164936ieVus5qQcNVoeeCC7Ud.js":[56753,89611],"./220401101744dfdsGX6lJoVuDOW0Z6s_220728165113XZhRfog6FEgxrRXir9m.js":[53706,53192],"./220405162139n0I5f23XnQayBPWs21m_2204062121431ej37l4mcV6kmuEFvKX.js":[13624,33457],"./220408140943LvGf0iRvUFfpgGT8KYx_2204081442313XZGcEqycDLpeh8iqbL.js":[91306,40304],"./2204102227133TloRrVksDmMP9KBTIh_220410222713xg2fdIzNPQ5u9qQMjuf.js":[71993,20935],"./220411114447V7B7QmtfWY4EQUMys4D_220411123516xhrdt0fR3Y2R6d8CmGu.js":[67892,70470],"./220411141258ClUsA7VgrGgqjXa1a5q_220411143403JNRiV27ymaBsBVduSba.js":[81657,33661],"./220414124355xpDYp09lybeSzz66pLx_220414124356fnnpLDsPYtGVCObwE5y.js":[88180,59722],"./2204271747271slhX8kXtQoXDyAskg7_220427174727TT4pVoRdXrqsDpDOyFl.js":[60884,48526],"./22042915014665Ajm5uropByFhz4SEO_220608095950VtsHpgMcyTg9UXjEapc.js":[45663,17505],"./220509160329v0uQ3UQ62mWy6vIPtws_220509160329z6bO9i1l3400gb9DcPE.js":[9094,66136],"./220509172517m6bynFnIjv7yMk28uzq_220509174142sCEZVLCHI6o4hAkSK6e.js":[31007,24043],"./220509172517m6bynFnIjv7yMk28uzq_220606162920FTobh3lnhUQA2pLfPq7.js":[55578,25822],"./220510141612XXk0pQvr41LAnlBjFkm_22081914212618jJNrnxWguKCvhf85s.js":[85490,6876],"./220511171738HyEzWpmLY8fFKKMBZDM_220615093046XG4csRrg2I3nad5tk40.js":[4882,32215],"./220516212506AmrCr63VtBOJPxQkJf4_2205162148519QIYT22wyRt3Z8BRFHR.js":[20803,11301],"./220518105358gKONpNnVhEnL8SEgmIz_220518105832EIpEuEiTaV2U01Uvrb2.js":[14825,54904],"./220523102318aS3z9dFawF474W9jGfb_220613194840csj99rmfQJ90GbdJCzv.js":[69899,50843],"./220523103829QdivWfmws21vgeen5ez_220606113623J1CCKpt9QZvpEmVBQLn.js":[24185,11177],"./220523142343pESh4X7kWbu0f2l4gqO_220601152801YgGoUeFcd41V0IaW8mE.js":[61769,90555],"./220524121453sGBwz87rlD6QuIWkdNs_220524123942LMj4duHEnhv1SlkoIqC.js":[45827,32541],"./220524150837JMHTpd4Fjf4qQDfXtee_220524150837IUwwgvVsQYfwpkgBUDm.js":[93183,19571],"./220525100102hLapfGuUyADwWNfmYsh_220525101220lOfDtpd5ovZNxKk4Ega.js":[21516,32797],"./220528195846HDnSpbcDZr1L2fZ42QU_220528200102UV2XbtnVBfKKgcZp7OP.js":[35765,90385],"./220530165354opL26ojAk7Zo0SIp0G4_220530165354kXc4fhdxiPekgjExHeW.js":[22683,94052],"./2205301733107kuHCa2qypom6EhmRQN_220530175228HJ1rLbUZqfqAiCx3mbr.js":[49795,50372],"./220601192152cn9h0jVIqKOD3vaaxsR_220601192152XVnNFHW00VGCWMBv9r6.js":[28331,21083],"./220608180745zuQ8lLZiYfrnYauh2wh_220610183749D74QVFi6yYMlFY1H9J3.js":[47505,69933],"./220608190008MBSejU0mdHuGBsXMPoQ_220610191112BKyD5gu1RxRg6GiSP6M.js":[11899,57303],"./2206111015248zPjoAGO8jdei91mR3B_220611162453F2Grg1qlCoWqr53R8mA copy.js":[20743,41352],"./2206111015248zPjoAGO8jdei91mR3B_220611195941tnO9IvFGyJUOVcyOR3W.js":[81743,31862],"./2206121049197uLuyZGVU0oo7rJBy2M_220612104919lHrOhpdElD9OnTMuqN8.js":[62788,85178],"./220612105048cUowwxNbJRsuyVueoOQ_220612105048vUPJWFskXAtCDTQjTpL.js":[30232,74213],"./220612105217UTDLs2Ez1Fb9DD8SrXi_2206121052173tt2iFzLEDQh0UxRV9P.js":[46530,41966],"./220612105313kgBavvQFjJoyiLLiGg9_220612105313O8nE1HWWWy9llWSA2xe.js":[57527,18360],"./220613095028p7Kj3ib2p85tG6iWWyE_220613202444PVc5IjQ5wNuSFIyBzzx.js":[95562,28183],"./220614091200at03kIvnP9XXiNQOTKZ_2206141440567TpgCixR5NksxF2qxqS.js":[83487,78967],"./220614112946zgDDUdc31c8haANqADR_2206141423390bHRnsDJrDlVxd6PMJ9.js":[40127,64147],"./220614133853o8cND03veAmqU9y4LnC_220614180853ZvrZrfmEExfsko2BSQ6.js":[41272,97381],"./220614154827gxAnoN1MmMhOWYlo2Ca_220614184622H8tX3nAzyPjROfjVMvE.js":[8509,56731],"./220614195558OKstRlPrsC4G66Ll1nX_2206142015325GrIHSJ3g3eGKiIp6tx.js":[81033,41674],"./220615103633L2NVagzmpBAl3KyY7ea_2206151545162GP2Vvo2kR02wojmRdB.js":[87037,13589],"./220616111003P1p8t4gGXKktsvAJ8IB_220622110255Oh8WqeGgEQNhWxjXUD8.js":[29807,4894],"./220616172755CKZVn3xmwdIlxTsAv59_2206161919200P2yULqPnuxpW8xXU4n.js":[83234,12663],"./220620094618gtoil5i8NpamcigKM9W_220620185147ng6QYNenJiO2uLzoqgm.js":[39207,93614],"./220620110343krYZcQXlNsDNqWLZ9wF_220620173229SQilGukvFyEX6NTYAa7.js":[73049,44864],"./220620195242jvyqYf9qXuGzWAYYkBZ_220621102151i75zIr1kKlWXzWTjZMz.js":[786,7178],"./220630135311tDX4giuEx0ontWbcctf_220701180314a06eAbHpSIjiPbfohT5.js":[57152,60771],"./2207011346432kHM7MDW6Yhk6GIPB3o_220701174342YtCwvPv2rPS6M4aOWxQ.js":[93395,79019],"./220704100814GTLxe3SjvNVJEGHKLXI_220704153619YgjkaWGrfxyQ3If04lP.js":[96800,59699],"./220705111517yIIbJVieCHSVHTisP6L_220708185937wdjB9s8kTz7u20HVRrA.js":[48077,74570],"./220711092349sQmvEFDyhH0Wq9X9GPU_220711095132PSyuSTrzzMjB52g1UfZ.js":[6005,25680],"./2207151034495XndlK688USXdV4LVws_220715103449i3ixcIqFcJCaK9g6uEe.js":[88650,82113],"./220715152514w1HBaQS3MhWnqXPoqgu_220715152514EvWlBw7Osb2uwdwYFvy.js":[47618,45015],"./220720141001Rpc4Sj9uw637otU3imj_220720155918svU8fEwpYryuUvmITbg.js":[58307,26902],"./220725170345HwZe2ej2767Lgn0MiMb_2207260936521h3ZS2MhU7C8WaxRtwH.js":[78655,71828],"./220726150846lcZFPnBCcJfzCEkdZF2_220726153029xN76c8KNZ8DT6QqYhwW.js":[812,73056],"./220726164355ZEW0cZ7ob0ulnGvecin_220726170957zewIIsqiJTHqBnsOnfF.js":[45014,16832],"./220727103439egVcOCLR2OWyTo7yQlM_220727105324sgHBIRINBhcLJ7LOkQ1.js":[29481,49070],"./220805142201Z2JRY83u6rPqYsQk1uk_220806122100ZoIBJIUy3uGdS9V5qKa.js":[46093,82885],"./220805151202oTlKLwuSgzTJpHYtsr5_220808172750UCoT2gzGe5UTHCRrdSU.js":[27918,80304],"./2208051552351e2MmiXguiJL5Zh5QGN_220808174448fM3XtxBzcJ5MbJkuWau.js":[18306,16671],"./220815152939OLWYLIRls1HbYiMRvMW_220815155800IKLAnHH9ZEMkq13lStq.js":[99305,97020],"./220815152939OLWYLIRls1HbYiMRvMW_2208151725490F6RBQoUiv6jKQslkDs.js":[12492,18881],"./220815153643et5dnNi9Dfqeh9UitKI_220815153643l3OazHL9qgEwrzLoVDH.js":[15551,73319],"./2208241450567Dd6ZRLEUjlkoJVNcTD_2209161427244YXGtDNKtrur2wZjgQa.js":[95450,9182],"./22083016432124DPxWEBFDJiNmYpJlO_220916160157kvSSCj6e4jXsFCKKciD.js":[47902,63670],"./220914095231bcNY8eTobwhhRE8PPb8_220926160218iRWX51dVzupFaUx1ifQ.js":[84604,60393],"./220914095525ROQhgPTWU7gPu3UioJn_220914134412nqIS9K0lvDU7hbJM5Bg.js":[34690,36286],"./220926133814Z4MViKRLjNbJFgBKW0H_220926161913XZlpJbVH8thitHO4wcl.js":[98840,41097],"./220926133904pdHNdLHLmNuTIzfxIBf_2209271529168WVZ8nkPfRgNz4mlnGk.js":[43257,80117],"./2210081534207E51os47sEX6eOlItjA_221009105143cqx6FLPZH5czJTylUIO.js":[71261,91517],"./221107203644pUMxweuuKLBufEivLEi_230407163416AUgN3nMDoa3q0XZz2O5.js":[67509,37561],"./230104170607NJUdW5LiG1FiLh3VAbu_230105151036KO4v8nqmnBEQzAGOpS3.js":[45964,81354],"./230517224206lQszMtXvkQGlirGaxBu_230603000520cul0lSNWcPvHm248kLG.js":[54377,11050],"./230517224206lQszMtXvkQGlirGaxBu_230603000903YhuPIxN0fH1JJHUbrj0.js":[81631,31395],"./2305181732545eWpU6ESTFnvts0srPh_2305191056185uHFPk0bzI4LUxmwi7x.js":[53589,53199],"./2309261533084McuxrMrlgFwifxwlxT_230926164412inrCUZh7BFqLtgX3H2M.js":[89748,70421],"./index.js":[53411]};function o(e){var t,o;return n.o(a,e)?(o=(t=a[e])[0],Promise.all(t.slice(1).map(n.e)).then(function(){return n(o)})):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}o.keys=function(){return Object.keys(a)},o.id=75493,t.exports=o},5845:function(t,e,n){var a={"./2106181403258aA6hQpCl3AqIVzLa2g_210621210458I6WudZyN6mVLeWuJUDJ_subform.js":[12089,68800],"./2106181403258aA6hQpCl3AqIVzLa2g_210907110221M9FbM3HmixeqdTU0eI9_subform.js":[28205,35581]};function o(e){var t,o;return n.o(a,e)?(o=(t=a[e])[0],n.e(t[1]).then(function(){return n(o)})):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}o.keys=function(){return Object.keys(a)},o.id=5845,t.exports=o},9226:function(t,e,o){var n={"./formTab230816161708J15RZ0436CLcJnmnJCF.vue":43220,"./formTab240301193112kvs0JVTvSPA0a02QMPy.vue":95346};function a(t){t=i(t);return o(t)}function i(t){if(o.o(n,t))return n[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(n)},a.resolve=i,(t.exports=a).id=9226},72:function(t,e,o){var n={"./chatFrame.vue":7045,"./commonDialog.vue":40954,"./feedbackHandle.vue":6236,"./formTab.vue":50073,"./hljFileVerify.vue":89223,"./inspectionList.vue":34097,"./instructionList.vue":53783,"./meettingTopic.vue":48440,"./moveStatus.vue":15513,"./newMeettingTopic.vue":88965,"./newMoveStatus.vue":69601,"./onlyOnefilePreview.vue":27343,"./pcForm.vue":42517,"./readedList.vue":29762,"./relationList.vue":25580,"./relevantFile.vue":448,"./shanxiLnstructionList.vue":20812,"./shanxiReadeList.vue":82754,"./supervising.vue":64394,"./supervision.vue":69179};function a(t){t=i(t);return o(t)}function i(t){if(o.o(n,t))return n[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(n)},a.resolve=i,(t.exports=a).id=72},25540:function(t,e){"use strict";const o="0.3s height ease-in-out",n={beforeEnter(t){t.style.transition=o,t.dataset||(t.dataset={}),t.style.height=0},enter(t){0!==t.scrollHeight?t.style.height=t.scrollHeight+"px":t.style.height="",t.style.overflow="hidden"},afterEnter(t){t.style.transition="",t.style.height=""},beforeLeave(t){t.dataset||(t.dataset={}),"flex"!==t.style.display&&(t.style.display="block"),t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},leave(t){0!==t.scrollHeight&&(t.style.transition=o,t.style.height=0)},afterLeave(t){t.style.transition="",t.style.height=""}};e.Z={name:"CollapseTransition",functional:!0,render(t,{children:e}){return t("transition",{on:n},e)}}},83887:function(t,e,o){var n={"./ai.png":44936,"./cloud.png":54073,"./doc.png":39636,"./docx.png":70071,"./folder-team.png":36556,"./folder.png":7818,"./html.png":97744,"./img.png":32954,"./jpeg.png":90699,"./jpg.png":84693,"./mp3.png":77957,"./mp4.png":96128,"./ofd.png":88825,"./pdf.png":46616,"./png.png":95742,"./ppt.png":68985,"./psd.png":89041,"./rar.png":45074,"./txt.png":48339,"./word.png":26206,"./wps.png":83392,"./xls.png":49472,"./xlsx.png":81682,"./xml.png":66874,"./zip.png":99021};function a(t){t=i(t);return o(t)}function i(t){if(o.o(n,t))return n[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(n)},a.resolve=i,(t.exports=a).id=83887},86722:function(t,e,o){"use strict";t.exports=o.p+"static/img/meetingRoom.aaf68c7..jpg"},60710:function(t,e,o){"use strict";t.exports=o.p+"static/img/zj_avatar.2072ed9..png"},44936:function(t,e,o){"use strict";t.exports=o.p+"static/img/ai.692fadd..png"},54073:function(t,e,o){"use strict";t.exports=o.p+"static/img/cloud.e0e5c0c..png"},39636:function(t,e,o){"use strict";t.exports=o.p+"static/img/doc.178d734..png"},70071:function(t,e,o){"use strict";t.exports=o.p+"static/img/docx.178d734..png"},36556:function(t,e,o){"use strict";t.exports=o.p+"static/img/folder-team.256a132..png"},7818:function(t,e,o){"use strict";t.exports=o.p+"static/img/folder.b74dd1f..png"},97744:function(t,e,o){"use strict";t.exports=o.p+"static/img/html.aed4382..png"},32954:function(t,e,o){"use strict";t.exports=o.p+"static/img/img.1e66416..png"},90699:function(t,e,o){"use strict";t.exports=o.p+"static/img/jpeg.6690b6f..png"},84693:function(t,e,o){"use strict";t.exports=o.p+"static/img/jpg.6690b6f..png"},77957:function(t,e,o){"use strict";t.exports=o.p+"static/img/mp3.11779e9..png"},96128:function(t,e,o){"use strict";t.exports=o.p+"static/img/mp4.bf3626d..png"},88825:function(t,e,o){"use strict";t.exports=o.p+"static/img/ofd.aa35dda..png"},46616:function(t,e,o){"use strict";t.exports=o.p+"static/img/pdf.0431c10..png"},95742:function(t,e,o){"use strict";t.exports=o.p+"static/img/png.99cbe3b..png"},68985:function(t,e,o){"use strict";t.exports=o.p+"static/img/ppt.2dcd0da..png"},89041:function(t,e,o){"use strict";t.exports=o.p+"static/img/psd.10d45f5..png"},45074:function(t,e,o){"use strict";t.exports=o.p+"static/img/rar.5ca3e88..png"},48339:function(t,e,o){"use strict";t.exports=o.p+"static/img/txt.9b1d964..png"},26206:function(t,e,o){"use strict";t.exports=o.p+"static/img/word.178d734..png"},83392:function(t,e,o){"use strict";t.exports=o.p+"static/img/wps.d841695..png"},49472:function(t,e,o){"use strict";t.exports=o.p+"static/img/xls.e136da2..png"},81682:function(t,e,o){"use strict";t.exports=o.p+"static/img/xlsx.e136da2..png"},66874:function(t,e,o){"use strict";t.exports=o.p+"static/img/xml.aed4382..png"},99021:function(t,e,o){"use strict";t.exports=o.p+"static/img/zip.4b7a304..png"},64830:function(t,e,o){t.exports=o(48056)}}]);