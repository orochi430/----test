"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[36097],{36097:function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var n=i(25108),t={data:function(){return{keywords:"",venue:"",venues:[{text:"全部",value:""},{text:"A馆",value:"A"},{text:"B馆",value:"B"},{text:"C馆",value:"C"},{text:"D馆",value:"D"},{text:"R馆",value:"R"}],list:[],floor:"",floors:[{text:"全部",value:""},{text:"一楼",value:"1"},{text:"二楼",value:"2"},{text:"三楼及以上",value:"3"}],fType:"3",fTypes:[],rank:"0",ranks:[{text:"降序",value:"0"},{text:"升序",value:"1"}],loading:!1,finished:!1,finishedTips:"没有更多了",page:1,pageSize:10}},methods:{onLoad:function(){var e=this;0==e.fTypes.length?e.getDataByOpts():e.getData()},getDataByOpts:function(){var a=this;dsf.http.get("list").done(function(e){var t;if(0==e.code)return a.fTypes=null==(t=e.data.find(function(e){return"3"==e.id}))?void 0:t.children.map(function(e){return{text:e.name,value:e.id}}),0<a.fTypes.length&&a.fTypes.unshift({text:"全部",value:"3"}),dsf.http.get("api/business/pageList",{page:a.page,limit:a.pageSize,type:a.fType,building:a.venue,floor:a.floor,rank:a.rank,keyword:a.keywords});throw e.msg}).done(function(e){if(0!=e.code)throw e.msg;a.page++,a.list=a.list.concat(e.page.list),e.page.list.length<a.pageSize&&(a.finished=!0)}).error(function(e){a.list=null,n.log("food-error",e),dsf.layer.toast(e.message)}).always(function(){a.loading=!1})},getData:function(){var t=this;dsf.http.get("api/business/pageList",{page:t.page,limit:t.pageSize,type:t.fType,building:t.venue,floor:t.floor,rank:t.rank,keyword:t.keywords}).done(function(e){if(0!=e.code)throw e.msg;t.page++,t.list=t.list.concat(e.page.list),e.page.list.length<t.pageSize&&(t.finished=!0)}).error(function(e){t.list=null,n.log("food-list-error",e),dsf.layer.toast(e.message)}).always(function(){t.loading=!1})},filterChange:function(){var e=this;e.page=1,e.list=[],e.loading=!0,e.finished=!1,e.onLoad()},onSearch:function(e){var t=this;t.page=1,t.list=[],t.loading=!0,t.finished=!1,t.onLoad()}}},a=(0,i(51900).Z)(t,function(){var a=this,n=a._self._c;return n("div",{staticClass:"page-food"},[n("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:a.onSearch},model:{value:a.keywords,callback:function(e){a.keywords=e},expression:"keywords"}}),a._v(" "),n("img",{staticClass:"banner",attrs:{src:i(17679),alt:""}}),a._v(" "),n("div",{staticClass:"menu-container"},[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{title:"场馆",options:a.venues},on:{change:a.filterChange},model:{value:a.venue,callback:function(e){a.venue=e},expression:"venue"}}),a._v(" "),n("van-dropdown-item",{attrs:{title:"楼层",options:a.floors},on:{change:a.filterChange},model:{value:a.floor,callback:function(e){a.floor=e},expression:"floor"}}),a._v(" "),n("van-dropdown-item",{attrs:{title:"美食",options:a.fTypes},on:{change:a.filterChange},model:{value:a.fType,callback:function(e){a.fType=e},expression:"fType"}}),a._v(" "),n("van-dropdown-item",{attrs:{title:"清闲排行",options:a.ranks},on:{change:a.filterChange},model:{value:a.rank,callback:function(e){a.rank=e},expression:"rank"}})],1)],1),a._v(" "),n("div",{staticClass:"list-container"},[n("van-list",{attrs:{finished:a.finished,"finished-text":a.finishedTips},on:{load:a.onLoad},model:{value:a.loading,callback:function(e){a.loading=e},expression:"loading"}},a._l(a.list,function(e,t){return n("div",{key:t,staticClass:"flex item"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"https://www.ciie.org/appapi/api/merchant/upload/file/name/".concat(e.image),expression:"\n            `https://www.ciie.org/appapi/api/merchant/upload/file/name/${item.image}`\n          "}],attrs:{alt:""}}),a._v(" "),n("div",{staticStyle:{flex:"1",width:"0"}},[n("div",{staticClass:"flex jb as title"},[n("span",{staticClass:"elps"},[a._v(a._s(e.businessName))]),a._v(" "),0==e.lineUpTime?n("span",{staticClass:"tag"},[a._v("无需排队")]):a._e()]),a._v(" "),n("div",{staticClass:"sub"},[a._v("营业时间："+a._s(e.openTime))]),a._v(" "),n("div",{staticClass:"sub"},[a._v(a._s(e.address))])])])}),0)],1)],1)},[],!1,null,"bea36cca",null).exports},17679:function(e,t,a){e.exports=a.p+"static/img/food.9195a16..png"}}]);