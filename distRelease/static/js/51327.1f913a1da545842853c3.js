"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[51327],{51327:function(t,a,e){e.r(a),e.d(a,{default:function(){return r}});var s=e(70596),i=e(25108),a={data:function(){return{data:[],arr:[],newarr:[],table_companydata:[],table_othercompany:[],newdata:[],max:0,orderkey:"",order:"",number:0,currentDate:new Date,show:!1,showDate:moment(new Date).format("YYYY年MM月")}},watch:{number:{handler:function(t,a){0==t?i.log("不传参",t):i.log("传参",t),this.ajaxfun(this.orderkey,this.order)},immediate:!0}},mounted:function(){this.getTotalData(),this.getScoreTotal()},methods:{getScoreTotal:function(){var e=this;dsf.http.get("ctrl/editor/scoreSummaryData",{orderkey:this.orderkey,order:this.order}).then(function(t){e.arr=t.data.data.echarts.data,e.table_companydata=t.data.data.table.company,e.table_othercompany=t.data.data.table.othercompany;for(var a=0;a<e.arr.length;a++)e.newarr.push(Number(e.arr[a])),e.newdata.push(Number(e.arr[a]));e.max=e.newarr.sort(function(t,a){return a-t})[0],e.echartsinit()})},getTotalData:function(){var a=this;dsf.http.get("ctrl/editor/collectionStatisticsData",{dateValue:moment(this.currentDate).format("YYYY-MM")}).then(function(t){a.data=t.data.data})},confirm:function(t){i.log(t),this.currentDate=new Date(t),this.showDate=moment(this.currentDate).format("YYYY年MM月"),this.show=!1,this.getTotalData()},formatter:function(t,a){return"year"===t?"".concat(a,"年"):"month"===t?"".concat(a,"月"):a},echartsinit:function(){var t=s.init(this.$refs.echarts1),a={tooltip:{trigger:"axis",axisPointer:{type:"none"},lineStyle:{opacity:0}},grid:{left:"5%",right:"5%",bottom:"5%",top:"20%",containLabel:!0,z:22},xAxis:{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisTick:{show:!1},axisLabel:{show:!0,interval:0,fontSize:12},axisLine:{lineStyle:{color:"#999999"}}},yAxis:{min:0,max:10*Math.round((+this.max+5)/10),type:"value",axisTick:{show:!1},name:"条",splitLine:{show:!0,lineStyle:{color:"#999999",width:1,type:"dashed"}},axisLine:{show:!1,lineStyle:{color:"#999999"}}},series:[{name:"条数",type:"bar",data:this.newdata,itemStyle:{normal:{color:function(t){return["#0091FF","#0091FF","#0091FF","#0091FF","#0091FF","#0091FF","#0091FF","#0091FF","#0091FF","#0091FF","#0091FF","#0091FF"][t.dataIndex]}}}}]};t.clear(),t.setOption(a)},ajaxfun:function(a,e){var s=this;dsf.http.post("ctrl/editor/echartsdata",{orderkey:0==this.number?"":a,order:0==this.number?"":e}).then(function(t){i.log(t),"up"==e?"company"!=a&&"month"!=a&&"year"!=a||(s.table_companydata=t.data.data.table.company,s.table_othercompany=t.data.data.table.othercompany):"down"!=e||"company"!=a&&"month"!=a&&"year"!=a||(s.table_companydata=t.data.data.table.company,s.table_othercompany=t.data.data.table.othercompany)})},up:function(t){this.order="up",this.orderkey=t,i.log(t,this.order),this.number++,this.ajaxfun(this.orderkey,this.order),this.$forceUpdate()},down:function(t){this.order="down",this.orderkey=t,i.log(t,this.order),this.number++,this.ajaxfun(this.orderkey,this.order),this.$forceUpdate()}}},r=(0,e(51900).Z)(a,function(){var e=this,s=e._self._c;return s("div",{staticClass:"big",staticStyle:{width:"100%",height:"100%"}},[s("div",{staticClass:"editor_box"},[s("div",{staticClass:"in-chart"},[s("div",{staticClass:"echarts_summarydata"},[s("div",{staticClass:"echarts_head"},[s("span",[e._v("本月数据概况")]),e._v(" "),s("span",{on:{click:function(t){e.show=!0}}},[s("label",{attrs:{for:""}},[e._v(e._s(e.showDate))]),e._v(" "),s("van-icon",{attrs:{name:"play"}})],1)]),e._v(" "),s("div",{staticClass:"echarts_box"},e._l(e.data,function(t,a){return s("div",{key:a,staticClass:"echarts_smallbox"},[s("p",{staticClass:"echarts_blacktext"},[e._v(e._s(t.title))]),e._v(" "),s("p",{staticClass:"echarts_redtext"},[e._v(e._s(t.number))])])}),0)]),e._v(" "),s("div",{staticClass:"echarts_monthreceive"},[s("p",{staticClass:"echarts_head"},[e._v("每月接收投稿")]),e._v(" "),s("div",{staticStyle:{width:"100%","margin-top":"1.4%"}},[s("div",{ref:"echarts1",staticClass:"charts"})])]),e._v(" "),s("div",{staticClass:"echarts_monthscore"},[s("p",{staticClass:"echarts_head"},[e._v("得分汇总")]),e._v(" "),s("div",{staticClass:"echarts_table"},[s("table",[s("tr",{staticClass:"table_title",attrs:{height:"50px"}},[s("td",{staticClass:"table_name"},[s("div",{staticClass:"mscore_title"},[e._v("部门名称")]),e._v(" "),s("div",{staticClass:"mscore_photo"},[s("div",{staticClass:"table_sanjiao3",on:{click:function(t){return e.up("company")}}}),e._v(" "),s("div",{staticClass:"table_sanjiao4",on:{click:function(t){return e.down("company")}}})])]),e._v(" "),s("td",{staticClass:"table_mscore"},[s("div",{staticClass:"mscore_title"},[e._v("本月得分")]),e._v(" "),s("div",{staticClass:"mscore_photo"},[s("div",{staticClass:"table_sanjiao1",on:{click:function(t){return e.up("month")}}}),e._v(" "),s("div",{staticClass:"table_sanjiao2",on:{click:function(t){return e.down("month")}}})])]),e._v(" "),s("td",{staticClass:"table_yscore"},[s("div",{staticClass:"mscore_title"},[e._v("本年度总得分")]),e._v(" "),s("div",{staticClass:"mscore_photo"},[s("div",{staticClass:"table_sanjiao3",on:{click:function(t){return e.up("year")}}}),e._v(" "),s("div",{staticClass:"table_sanjiao4",on:{click:function(t){return e.down("year")}}})])])]),e._v(" "),e._l(e.table_companydata,function(t,a){return s("tr",{key:a,attrs:{height:"60px"}},[s("td",{staticStyle:{width:"22%:padding:0 10px"}},[e._v(e._s(t.name))]),e._v(" "),s("td",{staticStyle:{width:"28%"}},[e._v(e._s(t.monthscore))]),e._v(" "),s("td",{staticStyle:{width:"40%"}},[e._v(e._s(t.yearscore))])])})],2)])])])]),e._v(" "),s("van-popup",{attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月",formatter:e.formatter},on:{confirm:e.confirm,cancel:function(t){e.show=!1}},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},[],!1,null,"25eaf612",null).exports}}]);