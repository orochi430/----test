(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[28114],{73658:function(t,e,n){"use strict";n.r(e);var c=n(522),a=n(13682),o=n(66411),r=n.n(o),o=n(68522),u=n.n(o),o=n(43562),d=n.n(o),o=n(73473),l=n.n(o),v=n(90541),R=(n(88561),n(25108)),o={handle:function(t,e){},formHandle:{get:function(t,e,n){return R.log("get",e),"object"===(0,a.Z)(t[e])&&null!==t[e]?new Proxy(t[e],handler):r()(t,e,n)},set:function(t,e,n,a){return R.log("set",e,n),u()(t,e,n,a)}},subFormHandle:{get:function(t,e,n){return R.log("get",e),"object"===(0,a.Z)(t[e])&&null!==t[e]?new Proxy(t[e],handler):r()(t,e,n)},set:function(t,e,n,a){return R.log("set",e,n),u()(t,e,n,a)}}};o.initHandle=function(s,f,i){function m(t){return R.log(t),t.replace(/-/g,"/")}R.log("外出报备80"),i.$bus.on("checkVal",function(a){if(R.log(a),null!=a.subFormIndex){for(var o,e=0,r=d()(f.subform);e<r.length;e++)!function(){var t=(0,c.Z)(r[e],2),n=t[0];t[1].controls.forEach(function(t,e){t.controlId==a.metaData.controlId&&(o=n)})}();var t=Date.parse(m(s.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-001"].value)),n=s.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-005"].value,u=Date.parse(m(s.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-002"].value)),l=s.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-006"].value;t==u&&n&&l&&(R.log(n,l),l<n)&&(v.Z.layer.toast("开始时间段不能大于结束时间段"),i.$set(i.formData.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-005"],"value",""),i.$set(i.formData.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-006"],"value",""))}}),i.$bus.on("selectDateTime",function(a){if(null!=a.subFormIndex){for(var o,e=0,r=d()(f.subform);e<r.length;e++)!function(){var t=(0,c.Z)(r[e],2),n=t[0];t[1].controls.forEach(function(t,e){t.controlId==a.metaData.controlId&&(o=n)})}();R.log(o,a.subFormIndex);var t=Date.parse(m(a.value)),n=s.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-005"].value,u=Date.parse(m(s.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-002"].value)),l=s.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-006"].value;if(u<t){if(v.Z.layer.toast("开始时间不能大于结束时间"),"G-REPORT-SUB-001"==a.metaData.metaId)return void i.$set(i.formData.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-001"],"value","");if("G-REPORT-SUB-002"==a.metaData.metaId)return void i.$set(i.formData.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-002"],"value","")}t==u&&(R.log("5555"),l<n)&&(v.Z.layer.toast("开始时间段不能大于结束时间段"),i.$set(i.formData.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-005"],"value",""),i.$set(i.formData.multinfos[o].rows[a.subFormIndex]["G-REPORT-SUB-006"],"value",""))}}),i.$bus.on("selectUserBus",function(r){R.log(r),R.log(),v.Z.http.post("fn/report/getUser?userid=".concat(r.value)).then(function(t){t=t.data;if(null==r.subFormIndex)i.$set(i.formData.main.B0036,"value",t.data.zj),i.$set(i.formData.main["201204111545Im1HxYsoy6DPCKJlcwt"],"value",t.data.mobile);else{for(var a,e=0,o=d()(f.subform);e<o.length;e++)!function(){var t=(0,c.Z)(o[e],2),n=t[0];t[1].controls.forEach(function(t,e){t.controlId==r.metaData.controlId&&(a=n)})}();i.$set(i.formData.multinfos[a].rows[r.subFormIndex].B0036,"value",t.data.zj),i.$set(i.formData.multinfos[a].rows[r.subFormIndex].B0012,"value",t.data.mobile)}})}),s.main["G-REPORT-001"]||v.Z.http.post("fn/report/getUser").then(function(t){var t=t.data,e=void 0;e=t.data,i.$set(i.formData.main,"G-REPORT-001",{value:e.dlqy,text:e.dlqyText}),i.$set(i.formData.main,"B0024",{value:e.fbcc,text:e.fbcc}),i.$set(i.formData.main,"B0036",{value:e.zj}),i.$set(i.formData.main,"B0012",{value:e.mobile}),s.main["G-REPORT-003"]&&i.$set(i.formData.main,"G-REPORT-002",{value:v.Z.date.format(new Date,"yyyy-mm-dd")}),s.main["G-REPORT-003"]||(i.$set(i.formData.main,"G-REPORT-003",{value:"1",text:"未上报"}),i.$set(i.formData.main,"G-REPORT-002",{value:v.Z.date.format(new Date,"yyyy-mm-dd")}))}),R.log(i.formData)},o.saveFilter=function(c,t,d,v){return new(l())(function(t,e){try{for(var n,a,o,r=c.multinfos["201125162630QutnSBMPdaduhwBGfpp"].rows,u=0,l=0;l<r.length;l++)"Deleted"!=r[l].action&&(n=r[l]["G-REPORT-SUB-001"].value,a=a||new Date(n),(o=new Date(n))<a&&(a=o),u++);for(var s=c.multinfos["201125163543B0OGv18khGZrN0mWosa"].rows,f=0,l=0;l<s.length;l++)"Deleted"!=s[l].action&&f++;if(0==f&&0==u)return e("行程和主持工作必须添加一条!"),!1;if(0==u)return e("行程必须添加一条!"),!1;if(0==f)return e("主持工作必须添加一条!"),!1;if(i=(new Date).getTime(),m=a.getTime(),m-=i,Math.abs(m)/864e5<3)if(!c.main.B0060.value)return e("3天内行程需要写备注！"),!1;"custom1"==v&&d.$set(c.main,"G-REPORT-003",{value:"3",text:"已上报"}),t()}catch(t){R.log(t),e(t)}var i,m})},e.default=o},99137:function(t,e,n){n(26917),t.exports=n(34579).Reflect.get},28812:function(t,e,n){n(64894),t.exports=n(34579).Reflect.set},26917:function(t,e,n){var r=n(76183),u=n(95089),l=n(27069),a=n(83856),s=n(36727),f=n(12159);a(a.S,"Reflect",{get:function t(e,n){var a,o=arguments.length<3?e:arguments[2];return f(e)===o?e[n]:(a=r.f(e,n))?l(a,"value")?a.value:void 0!==a.get?a.get.call(o):void 0:s(a=u(e))?t(a,n,o):void 0}})},64894:function(t,e,n){var l=n(4743),s=n(76183),f=n(95089),i=n(27069),a=n(83856),m=n(83101),c=n(12159),d=n(36727);a(a.S,"Reflect",{set:function t(e,n,a){var o,r=arguments.length<4?e:arguments[3],u=s.f(c(e),n);if(!u){if(d(o=f(e)))return t(o,n,a,r);u=m(0)}if(i(u,"value")){if(!1===u.writable||!d(r))return!1;if(o=s.f(r,n)){if(o.get||o.set||!1===o.writable)return!1;o.value=a,l.f(r,n,o)}else l.f(r,n,m(0,a));return!0}return void 0!==u.set&&(u.set.call(r,a),!0)}})},66411:function(t,e,n){t.exports=n(99137)},68522:function(t,e,n){t.exports=n(28812)}}]);