"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[90146],{44266:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var e=a(26243),r=a.n(e),e=a(62680),n=a.n(e),e=a(95366),s=a.n(e),e=a(6919),i=a.n(e),o=a(77193),e=a(8450),l=a.n(e),e=a(13852),c=a(25108);function u(e,t){var a,i=r()(e);return n()&&(a=n()(e),t&&(a=a.filter(function(t){return s()(e,t).enumerable})),i.push.apply(i,a)),i}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach(function(t){(0,o.Z)(e,t,a[t])}):i()?Object.defineProperties(e,i()(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,s()(a,t))})}return e}var e={name:"controlDateTime",mixins:[e.Z],model:{prop:"value",event:"input"},props:{subFormIndex:{type:Number,default:null}},computed:{showValue:function(){return this.metaData.format?this.changeFormat(this.value.value.trim()):this.value.value}},data:function(){var t;return{show:!1,controlData:{defaultDate:new Date,inputAlign:"right",rules:[],type:"single",title:"日期选择",placeholder:"时间选择",color:"",minDate:new Date((new Date).getFullYear()-5,0,1),maxDate:new Date((new Date).getFullYear()+5,11,31),confirmText:"确定",confirmDisText:"请选择",position:"bottom",maxRange:"5",showMark:!0,showConfirm:!0,round:!0,rangePrompt:"超出可选范围",allowSameDay:!0,arrFormatter:[]},successValue:this.value,showPicker:!1,currentTime:"",nowTime:"",allowHours:!0,currentDate:new Date,currentDateTitle:"选择年月",currentDateType:"year-month",timePop:!1,minDate:new Date((new Date).getFullYear()-100,0,1),maxDate:new Date((new Date).getFullYear()+10,11,31),onlyShowTime:"hh:mm"==(null==(t=this.metaData.format)?void 0:t.toLowerCase())||!1}},watch:{value:{handler:function(t,e){var a;null!=t&&t.value&&null!=(a=this.metaData.format)&&a.toLowerCase().includes("hh:mm")&&(this.currentTime=t.value.substring(this.metaData.format.toLowerCase().indexOf("hh:mm")),c.log(this.currentTime))},deep:!0,immediate:!0}},mounted:function(){var t,e;this.metaData.extra.minDate&&(this.controlData.minDate=this.metaData.extra.minDate),this.metaData.extra.maxDate&&(this.controlData.maxDate=this.metaData.extra.maxDate),this.controlData.type=this.metaData.DateType||"single","{}"==l()(this.metaData.defaultValue)||this.value.value||(t=this.metaData.defaultValue,(e=this.value).value=t.value,this.$emit("input",e)),this.metaData.format?this.metaData.format&&(-1<this.metaData.format.indexOf("HH")?this.allowHours=!0:this.allowHours=!1,t=this.metaData.defaultValue,e=this.value,"yyyy"==this.metaData.format&&(this.currentDateTitle="选择年份",e.value=dsf.date.format(t.value+"-01-01","yyyy-mm-dd")),"yyyy-MM"==this.metaData.format&&(this.currentDateTitle="选择年月",e.value=dsf.date.format(t.value+"-01","yyyy-mm-dd")),this.$emit("confirm",e)):this.allowHours=!1,"200921170218dMlK5UVnsi1jkA5F35N"==this.$route.params.moduleId&&(this.allowHours=!1),"2011251622514OfwWKislZu9g54F3LS"==this.$route.params.moduleId&&(this.allowHours=!1),"201125171531HhP41e8lrLw0T7kuFXK"==this.$route.params.moduleId&&(this.allowHours=!1)},methods:{selectYear:function(){var a=this;this.$nextTick(function(){a.$refs.currentDate.$el.querySelectorAll(".van-picker-column").forEach(function(t,e){("yyyy"!==a.metaData.format||0==e)&&(t.style.display="block")})})},changeFormat:function(t){var e=-1<this.metaData.format.indexOf("|")?this.metaData.format.split("|")[1]:this.metaData.format;return-1<(e=-1<(e=-1<e.indexOf("mm")?e.replace("mm","ii"):e).indexOf("HH")?e.replace("HH","hh"):e).indexOf("MM")&&(e=e.replace("MM","mm")),dsf.date.format(t,e)},confirmTime:function(){var t,e=this;this.timePop=!1,"yyyy"==this.metaData.format||"yyyy-MM"==this.metaData.format?((t=this.value).value=dsf.date.format(this.currentDate,"yyyy-mm-dd"),this.$bus.emit("selectDateTime",d(d({},t),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",t)):(this.currentDate<new Date?this.controlData.minDate=new Date(this.currentDate.getFullYear()-5,0,1):this.controlData.maxDate=new Date(this.currentDate.getFullYear()+5,0,1),this.$nextTick(function(){e.$refs.calendarRef.scrollToDate(e.currentDate)}))},cancelTime:function(){this.timePop=!1},scrollDate:function(){this.timePop=!0},clearDate:function(){this.value.value="",this.timePop=!1,this.showPicker=!1,this.show=!1},formatDate:function(t){return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},formatter:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.controlData.arrFormatter,i=a.date.getMonth()+1,r=a.date.getDate();return t&&t.forEach(function(t,e){i==t.month&&r==t.date&&(t.topInfo&&(a.topInfo=t.topInfo),t.text&&(a.text=t.text),t.bottomInfo&&(a.bottomInfo=t.bottomInfo),t.type)&&(a.type=t.type)}),a},onConfirm:function(a){var t;"single"==this.controlData.type||""==this.controlData.type?(a=dsf.date.format(a,"yyyy-mm-dd"),c.log(a),this.allowHours?(this.nowTime=a,this.showPicker=!0):(this.show=!this.show,(t=this.value).value=a,this.$bus.emit("selectDateTime",d(d({},t),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",t))):(a=a.map(function(t,e){return dsf.date.format(a,"yyyy-mm-dd")}),t.value=a.join())},confirmDate:function(t){var e=this.value;e.value=this.onlyShowTime?t:this.nowTime+=" "+t,c.log(t),this.showPicker=!1,this.show=!1,this.$bus.emit("selectDateTime",d(d({},e),{},{metaData:this.metaData,subFormIndex:this.subFormIndex})),this.$emit("confirm",e)},resetFn:function(){this.$refs.calendarRef.reset()},closeFn:function(){},inClickFn:function(){this.metaData.privilege.editable&&(this.metaData.extra.eatraClass?this.$bus.emit("clickDateTime",{metaData:this.metaData,subFormIndex:this.subFormIndex}):(this.showValue&&(this.controlData.defaultDate=new Date(this.showValue.replace(/-/g,"/"))),"yyyy"==this.metaData.format||"yyyy-MM"==this.metaData.format?this.timePop=!this.timePop:this.onlyShowTime?this.showPicker=!0:this.show=!this.show))},filter:function(t,e){var a=this;return"minute"===t?e.filter(function(t){return t%(a.metaData.extra.minuteAccuracy||15)==0}):e}}},m=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return!e.readonly||e.readonly&&e.value.value?t("div",{staticClass:"controlDateTimeBox",attrs:{id:e.metaData.metaId}},[t("van-popup",{style:{height:"500px"},attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("van-calendar",{ref:"calendarRef",attrs:{poppable:!1,type:e.controlData.type,title:e.controlData.title,"default-date":e.controlData.defaultDate,"show-mark":e.controlData.showMark,"show-confirm":e.controlData.showConfirm,color:e.controlData.color,"min-date":e.controlData.minDate,"max-date":e.controlData.maxDate,"confirm-text":e.controlData.confirmText,"confirm-disabled-text":e.controlData.confirmDisText,formatter:e.formatter,position:e.controlData.position,"max-range":e.controlData.maxRange,round:e.controlData.round,"range-prompt":e.controlData.rangePrompt,"allow-same-day":e.controlData.allowSameDay,"first-day-of-week":"1"},on:{confirm:e.onConfirm},scopedSlots:e._u([{key:"footer",fn:function(){return[e._t("footer")]},proxy:!0},{key:"title",fn:function(){return[t("div",{staticStyle:{padding:"0 15px","text-align":"left",height:"80px"}},[t("div",{staticClass:"btnleft"},[t("van-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:e.scrollDate}},[e._v("年月选择")])],1),e._v(" "),t("div",{staticClass:"btnright"},[t("van-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:e.clearDate}},[e._v("清空日期")])],1)])]},proxy:!0}],null,!0)})],1),e._v(" "),t("van-field",{attrs:{readonly:!0,placeholder:e.controlData.placeholder,"input-align":e.controlData.inputAlign,rules:e.controlData.rules,name:e.metaData&&e.metaData.metaId?e.metaData.metaId:""},on:{click:e.inClickFn},scopedSlots:e._u([e.readonly?null:{key:"right-icon",fn:function(){return[t("i",{staticClass:"iconfont iconriqi"})]},proxy:!0}],null,!0),model:{value:e.showValue,callback:function(t){e.showValue=t},expression:"showValue"}}),e._v(" "),t("van-popup",{attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[t("van-datetime-picker",{attrs:{type:"time",title:"选择时间","min-hour":0,"max-hour":23,filter:e.filter},on:{confirm:e.confirmDate,cancel:function(t){e.showPicker=!e.showPicker}},model:{value:e.currentTime,callback:function(t){e.currentTime=t},expression:"currentTime"}})],1),e._v(" "),t("van-popup",{staticClass:"currentDate",staticStyle:{width:"80%"},attrs:{"get-container":"#app",round:""},on:{opened:e.selectYear},model:{value:e.timePop,callback:function(t){e.timePop=t},expression:"timePop"}},[t("van-datetime-picker",{ref:"currentDate",attrs:{type:e.currentDateType,title:e.currentDateTitle,"min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirmTime,cancel:e.cancelTime},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1):e._e()},[],!1,null,"4f3b7a88",null).exports},36403:function(t,e,a){a.r(e),a.d(e,{default:function(){return T}});var e=a(62680),r=a.n(e),e=a(95366),n=a.n(e),e=a(6919),i=a.n(e),o=a(66250),u=a(77193),e=a(33453),l=a.n(e),e=a(26243),d=a.n(e),e=a(73473),m=a.n(e),e=a(8450),f=a.n(e),e=a(18428),c=a.n(e),e=a(20629),s=a(63450),h=a(44266),p=(a(23336),a(25108));function v(e,t){var a,i=d()(e);return r()&&(a=r()(e),t&&(a=a.filter(function(t){return n()(e,t).enumerable})),i.push.apply(i,a)),i}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach(function(t){(0,u.Z)(e,t,a[t])}):i()?Object.defineProperties(e,i()(a)):v(Object(a)).forEach(function(t){Object.defineProperty(e,t,n()(a,t))})}return e}var s={name:"addTask",components:{controlUserList:s.default,controlDateTime:h.default},data:function(){return{showTip:!1,showPickerStart:!1,showPickerEnd:!1,start_timer:new Date,end_timer:new Date,showRemark:!0,showRemind:!1,average:!1,remindList:[],topformMeta:{},moduleId:"230103192045EncoYZoaQ9Zee0afJmh",listId:"230105153446TgUC3NjwR3polqywEQp",formId:"",pk:"",value:5,typeIndex:3,xtUserList:[],mainInfo:{},remind:[],remindSourceList:[],taskType:[],multinfos:{},subform:{},remindform:{},subFormPk:"230104141614cpP7QzEu7EOo9EVnjCV",remindPk:"23011315492100HEvTzuBArvJJpPekU",attaches:{"attach-1":{rows:[]}},remark:"",xietongText:"",fileList:[],formData:{"C-TASKMAN-TASK-0006":{value:""},"C-TASKMAN-TASK-0009":{value:""},"C-TASKMAN-TASK-0010":{value:""},"C-TASKMAN-TASK-0001":{value:"",text:"",schema:""},"C-TASKMAN-TASK-0002":{value:"",text:"",schema:""},"C-TASKMAN-TASK-0003":{value:"",text:"",schema:""},"C-TASKMAN-TASK-0005":{value:"",text:""},"C-TASKMAN-TASK-0012":{value:"",text:""},"C-TASKMAN-TASK-0011":{value:""},"C-TASKMAN-TASK-0014":{value:""}},show:!1,showXt:!1,zrrMetaData:{metaId:"",extra:{}},zrrDefaultSelectArray:[],xtrMetaData:{metaId:"",extra:{}},xtrDefaultSelectArray:[],usertext:{},isApp:!1,user:dsf.util.loadSessionStore("user"),isIm:!1,startMetaData:{},endMetaData:{}}},computed:A({},(0,e.rn)({iframeHistory:function(t){return t.iframeHistory}})),watch:{},methods:{goBack:function(){var e,a,t,i,r=this;window.native&&window.native.isNative()?window.native.back():(a=(e=this).$route.fullPath,this.$route.query.backTo?location.href=this.$route.query.backTo:(t=-1,(i=this.iframeHistory[this.$route.fullPath])&&(t=i-history.length,this.$vuex.commit("clearHistory",{url:this.$route.fullPath}),t=t<0?t-1:-1),this.$router.go(t)),setTimeout(function(){var t=r.$route.fullPath;p.log(a,t),a==t&&e.$router.go(-1)},100))},getContainer:function(){return document.body},initUpdateForamData:function(){var u=this;dsf.http.get("/fn/xform/getInfo?listId="+this.listId+"&validateByList=1&method=edit&pk="+this.pk+"&moduleId="+this.moduleId+"&timer="+(new Date).getTime(),{}).then(function(t){if(p.log(t),t.data&&t.data.data){u.topformMeta=t.data.struct,u.mainInfo=t.data.data.main,u.formId=t.data.struct.parameters.formId,u.subform=t.data.struct.subform[u.subFormPk].controls[0].defaultValue,u.remindform=t.data.struct.subform[u.remindPk].controls[0].defaultValue,t.data.struct.controls.forEach(function(t){"C-TASKMAN-TASK-0001"==t.metaId&&(u.zrrMetaData=t),"C-TASKMAN-TASK-0002"==t.metaId&&(u.xtrMetaData=t),"C-TASKMAN-TASK-0009"==t.metaId&&(u.startMetaData=t),"C-TASKMAN-TASK-0010"==t.metaId&&(u.endMetaData=t)});var e,o,a,i,r=t.data.data;if(r.attach&&r.attach["attach-1"]&&(e=[],r.attach["attach-1"].forEach(function(t){e.push(A(A({},t),{},{title:t.fileName,fileType:t.fileName.split(".")[t.fileName.split(".").length-1]}))}),u.fileList=e),r.main){u.mainInfo=r.main,u.typeIndex=r.main["C-TASKMAN-TASK-0005"].value,u.start_timer=new Date(r.main["C-TASKMAN-TASK-0009"].value),u.end_timer=new Date(r.main["C-TASKMAN-TASK-0010"].value),u.setType(r.main["C-TASKMAN-TASK-0005"].value),d()(r.main).forEach(function(t){u.formData[t]&&(u.formData[t]=r.main[t])}),p.log(u.formData);for(var t=r.main["C-TASKMAN-TASK-0001"],n=t.value.split(","),s=t.text.split(","),l=t.schema?t.schema.split(","):"",c=0;c<n.length;c++)n[c]&&u.zrrDefaultSelectArray.push({name:s[c],showName:s[c],id:n[c],pid:l[c]?l[c].split("::")[1]:"",type:1,checked:!0,attrs:{orgNameLV1Text:s[c],deptId:l[c]?l[c].split("::")[1]:"",pidValue:l[c]?l[c].split("::")[1]:"",idValue:n[c]}});p.log(u.zrrDefaultSelectArray)}r.subform&&r.subform[u.subFormPk]&&(o="",r.subform[u.subFormPk].forEach(function(t){for(var e,a=t["C-TASKINFO-COLLABORATE-0001"],i=a.value.split(","),r=a.text.split(","),n=a.schema?a.schema.split(","):"",s=0;s<i.length;s++)i[s]&&(o?o+=","+r[s]:o=r[s],e={name:r[s],showName:r[s],id:i[s],pid:n[s]?n[s].split("::")[1]:"",type:1,checked:!0,attrs:{orgNameLV1Text:t.A0025.value,deptId:t.A0017.value,pidValue:t.A0017.value,idValue:i[s]},action:"Updated",value:t[u.subFormPk].value,"C-TASKINFO-COLLABORATE-0006":{values:[{key:"value",value:t["C-TASKINFO-COLLABORATE-0006"].value},{key:"text",value:t["C-TASKINFO-COLLABORATE-0006"].text}]}},u.xtrDefaultSelectArray.push(e),u.xtUserList.push(A({percent:t["C-TASKINFO-COLLABORATE-0004"].value},e)))}),u.xietongText=o),r.subform&&r.subform[u.remindPk]&&(a=[],i=[],r.subform[u.remindPk].forEach(function(t){a.push(t["C-TASKMAN-REMIND-0001"].value),i.push(t["C-TASKMAN-REMIND-0001"].text),u.remindSourceList.push({id:t[u.remindPk].value,action:"Updated",text:t["C-TASKMAN-REMIND-0001"].text,value:t["C-TASKMAN-REMIND-0001"].value,readText:t["C-TASKMAN-REMIND-0002"].text,readValue:t["C-TASKMAN-REMIND-0002"].value})}),u.remindList=a,u.$set(u.formData["C-TASKMAN-TASK-0012"],"value",a.join(",")),u.$set(u.formData["C-TASKMAN-TASK-0012"],"text",i.join(",")))}})},initMainInfo:function(){var a=this;dsf.http.get("/fn/xform/getInfo?listId=".concat(this.listId,"&moduleId=").concat(this.moduleId,"&isEnterTodo=-1&timer=")+(new Date).getTime()).then(function(t){var e;p.log(t),t.data.data&&(e=t.data.data,a.topformMeta=t.data.struct,a.mainInfo=e.main,a.pk=t.data.struct.parameters.pk,a.formId=t.data.struct.parameters.formId,a.subform=t.data.struct.subform[a.subFormPk].controls[0].defaultValue,a.remindform=t.data.struct.subform[a.remindPk].controls[0].defaultValue,t.data.struct.controls.forEach(function(t){"C-TASKMAN-TASK-0001"==t.metaId&&(a.zrrMetaData=t),"C-TASKMAN-TASK-0002"==t.metaId&&(a.xtrMetaData=t),"C-TASKMAN-TASK-0005"==t.metaId&&a.setType(t.defaultValue.value),"C-TASKMAN-TASK-0009"==t.metaId&&(a.startMetaData=t),"C-TASKMAN-TASK-0010"==t.metaId&&(a.endMetaData=t)}))})},initDataSource:function(){var e=this;dsf.http.get("/fn/codemanage/getCodeListByFId?fId=230104142110La7JQ4v2916ZAF6zHo8&timer="+(new Date).getTime()).then(function(t){p.log(t),200==t.data.code&&(e.taskType=t.data.data)}),dsf.http.get("/fn/codemanage/getCodeListByFId?fId=230104142538xOGp2Q50ICw9Cp3oNsv&timer="+(new Date).getTime()).then(function(t){p.log(t),200==t.data.code&&(e.remind=t.data.data)})},confirmStart:function(t){this.$set(this.formData["C-TASKMAN-TASK-0009"],"value",moment(new Date(t)).format("YYYY-MM-DD HH:mm")),this.showPickerStart=!1},confirmEnd:function(t){this.$set(this.formData["C-TASKMAN-TASK-0010"],"value",moment(new Date(t)).format("YYYY-MM-DD HH:mm")),this.showPickerEnd=!1},setType:function(e){var a=this;this.typeIndex=e,this.taskType.forEach(function(t){t.codeValue==e&&(a.$set(a.formData["C-TASKMAN-TASK-0005"],"value",t.codeValue),a.$set(a.formData["C-TASKMAN-TASK-0005"],"text",t.codeName))})},cancelPopup:function(){this.showPickerStart=!1,this.showPickerEnd=!1},checkReminExist:function(e){return this.remind.findIndex(function(t){return t.codeValue==e})},remindChange:function(t,e){"1"==t.codeValue&&this.remindList.includes("1")?this.remindList=["1"]:this.remindList=this.remindList.filter(function(t){return"1"!=t})},remindHandder:function(){var a,i=this,r=[];this.$route.params.pk?(this.remindSourceList.forEach(function(e){i.remindList.some(function(t){return t==e.value})?"Added"!=e.action&&(e.action="Updated"):e.action="Deleted"}),this.remindList.forEach(function(e){var t=i.remindSourceList.some(function(t){return t.value==e}),a=i.remind.findIndex(function(t){return t.codeValue==e});t||i.remindSourceList.push({action:"Added",text:i.remind[a].codeName,value:e,readText:"否",readValue:"-1"}),r.push(i.remind[a].codeName)})):(a=[],this.remind.forEach(function(e){i.remindList.forEach(function(t){t==e.codeValue&&(r.push(e.codeName),a.push({action:"Added",text:e.codeName,value:t,readText:"否",readValue:"-1"}))})}),this.remindSourceList=a),p.log(this.remindSourceList),this.$set(this.formData["C-TASKMAN-TASK-0012"],"value",this.remindList.join(",")),this.$set(this.formData["C-TASKMAN-TASK-0012"],"text",r.join(",")),p.log(this.formData["C-TASKMAN-TASK-0012"])},afterRead:function(i){var r=this;return(0,o.Z)(l().mark(function t(){var e,a;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.$toast.loading({message:"上传中...",forbidClick:!0,duration:0,overlay:!0}),Array.isArray(i)||(i=[i]),e=[],i.forEach(function(t){e.push(r.doFileRead(t))}),t.next=6,m().all(e);case 6:a=t.sent,p.log(a),a.length==i.length?dsf.layer.toast("上传成功！"):dsf.layer.toast("上传失败！");case 9:case"end":return t.stop()}},t)}))()},doFileRead:function(e){var n=this;return(0,o.Z)(l().mark(function t(){var r;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n,t.abrupt("return",new(m())(function(a,i){var t="/fn/mobileAttachment/upload?fileId=&moduleId="+n.moduleId+"&mid="+n.moduleId+"&pId=&pnId=&nodeName="+encodeURI("拟稿")+"&nrType=1&pk="+n.pk+"&mainPk=&newFileFlag=0";dsf.http.upload(t,{},e).then(function(t){var e;p.log("uploaded",t.data),t.data.result?((e={id:(t=t.data.data).fileId,title:t.fileName,size:t.showFileSize||"",infoId:r.pk,moduleId:r.moduleId,isHandwrite:-1,canDelete:1,canDownLoad:1,canEdit:1,type:1,name:"附件".concat(r.fileList.length+1),fileType:t.fileName.split(".")[t.fileName.split(".").length-1]}).navtiveUrl=t.filePath,r.fileList.push(e),p.log("fileData",e),a(!0)):i(!1)})}));case 2:case"end":return t.stop()}},t)}))()},deleteFile:function(e,a){var i=this,r=(p.log(e),this);dsf.layer.confirm({message:"是否确认删除",confirmButtonText:"确认"},function(){var t={pk:i.pk,fileId:e.id,nrType:1,moduleId:i.moduleId,fileName:e.title,nodeName:"",pnId:"",pId:""};dsf.http.post("/fn/mobileFileUpload/delete",t).then(function(t){p.log(t),200==t.data.code&&r.fileList.splice(a,1),dsf.layer.toast(t.data.message)})})},close:function(t){this.show=t},getSelectUserZrr:function(t){var e=this,a=(p.log(t),{});t.forEach(function(t){a={name:t.name,showName:t.showName,id:t.id.replace("person_",""),pid:t.pid,type:1,checked:!0,attrs:{orgNameLV1Text:t.attrs.orgNameLV1Text,deptId:t.attrs.deptId,pidValue:t.attrs.pidValue,idValue:t.attrs.idValue}},e.$set(e.formData["C-TASKMAN-TASK-0001"],"value",t.id.replace("person_","")),e.$set(e.formData["C-TASKMAN-TASK-0001"],"text",t.name),e.$set(e.formData["C-TASKMAN-TASK-0001"],"schema","1::"+t.pid)}),p.log(f()(a)),this.zrrDefaultSelectArray=[a],this.show=!1},initRespons:function(){var t=dsf.util.loadSessionStore("user");p.log(t),this.zrrDefaultSelectArray=[{name:t.name,showName:t.name,id:t.user_id.replace("person_",""),pid:t.deptId,type:1,checked:!0,attrs:{orgNameLV1Text:t.deptName,deptId:t.deptId,pidValue:t.deptId,idValue:t.user_id.replace("person_","")}}],this.$set(this.formData["C-TASKMAN-TASK-0001"],"value",t.user_id.replace("person_","")),this.$set(this.formData["C-TASKMAN-TASK-0001"],"text",t.name),this.$set(this.formData["C-TASKMAN-TASK-0001"],"schema","1::"+t.deptId),this.xtrDefaultSelectArray=[{name:t.name,showName:t.name,id:t.user_id.replace("person_",""),pid:t.deptId,type:1,checked:!0,attrs:{orgNameLV1Text:t.deptName,deptId:t.deptId,pidValue:t.deptId,idValue:t.user_id.replace("person_","")}}],this.xtUserList=[{name:t.name,showName:t.name,id:t.user_id.replace("person_",""),pid:t.deptId,type:1,checked:!0,attrs:{orgNameLV1Text:t.deptName,deptId:t.deptId,pidValue:t.deptId,idValue:t.user_id.replace("person_","")},percent:5,action:"Added",value:""}],this.xietongText=t.name},checkUserExit:function(t){},getSelectUserXtr:function(t){var a,i,r=this;this.$route.params.pk?(this.xtrDefaultSelectArray=[],a="",this.xtUserList.forEach(function(e){t.some(function(t){return t.id==e.id})?"Added"!=e.action&&(e.action="Updated"):e.action="Deleted"}),t.forEach(function(e){var t=e.id.replace("person_",""),t={name:e.name,showName:e.showName,id:t,pid:e.pid,type:1,checked:!0,attrs:{orgNameLV1Text:e.attrs.orgNameLV1Text||e.attrs.orgNameLV1Text,deptId:e.attrs.deptId,pidValue:e.attrs.pidValue,idValue:e.attrs.idValue}};r.xtrDefaultSelectArray.push(t),r.xtUserList.some(function(t){return t.id==e.id})||r.xtUserList.push(A(A({percent:5},e),{},{action:"Added",value:""})),a?a+=","+e.name:a=e.name}),this.xietongText=a):(this.xtUserList=[],this.xtrDefaultSelectArray=[],i="",t.forEach(function(t,e){var a=t.id.replace("person_",""),a={name:t.name,showName:t.showName,id:a,pid:t.pid,type:1,checked:!0,attrs:{orgNameLV1Text:t.attrs.orgNameLV1Text||t.attrs.orgNameLV1Text,deptId:t.attrs.deptId,pidValue:t.attrs.pidValue,idValue:t.attrs.idValue}};r.xtUserList.push(A(A({percent:5},t),{},{action:"Added",value:""})),r.xtrDefaultSelectArray.push(a),i?i+=","+t.name:i=t.name}),this.xietongText=i),this.showXt=!1},removeUser:function(e,t){this.$route.params.pk?this.$set(this.xtUserList[t],"action","Deleted"):this.xtUserList.splice(t,1),this.xtrDefaultSelectArray.splice(t,1);t=this.xietongText.split(",").filter(function(t){return t!=e.name});this.xietongText=t.join(",")},doAverage:function(){var a=this;this.average=!this.average,this.xtUserList.forEach(function(t,e){a.average&&a.$set(t,"percent",5)})},getXtUserSource:function(){var o=this,l={"C-TASKINFO-COLLABORATE-0001":{},"C-TASKINFO-COLLABORATE-0004":{values:[{key:"value",value:"0"}]},"C-TASKINFO-COLLABORATE-0008":{values:[{key:"value",value:"1"}]}},c=(d()(this.subform).forEach(function(t){t==o.subFormPk?l[t]={values:[{key:"foreign",value:o.subform[t].foreign},{key:"value",value:""}]}:l[t]={values:[{key:"value",value:o.subform[t].value}]}}),(0,u.Z)({},this.subFormPk,{rows:[]}));return new(m())(function(e,t){var a={size:o.xtUserList.length,multiple:!0};dsf.http.get("fn/common/generateUUID?timer="+(new Date).getTime(),a).then(function(t){var i=t.data.data.UUID,r="",n="",s="";o.xtUserList.forEach(function(t,e){var a=JSON.parse(f()(l));"Added"==t.action?(a[o.subFormPk].values[1].value=i[e],a["C-TASKINFO-COLLABORATE-0006"]={values:[{key:"value",value:"1"},{key:"text",value:"未查看"}]}):(a[o.subFormPk].values[1].value=t.value,a["C-TASKINFO-COLLABORATE-0006"]=t["C-TASKINFO-COLLABORATE-0006"]),p.log(i[e]),a["C-TASKINFO-COLLABORATE-0004"].values[0].value=t.percent,a["C-TASKINFO-COLLABORATE-0001"]={values:[{key:"value",value:t.id},{key:"text",value:t.name},{key:"schema",value:"1::"+t.pid}]},a["C-TASKINFO-COLLABORATE-0002"]={values:[{key:"text",value:t.attrs.orgNameLV1Text}]},a.action=t.action,c[o.subFormPk].rows.push(a),p.log(a["C-TASKINFO-COLLABORATE-0006"]),"Deleted"!=a.action&&(""==r?(r=t.id,n=t.name,s="1::"+t.pid):(r+=","+t.id,n+=","+t.name,s+=",1::"+t.pid))}),o.$set(o.formData["C-TASKMAN-TASK-0002"],"value",r),o.$set(o.formData["C-TASKMAN-TASK-0002"],"text",n),o.$set(o.formData["C-TASKMAN-TASK-0002"],"schema",s),e(c)})})},getRemindSource:function(){var r=this,n={},s=(d()(this.remindform).forEach(function(t){t==r.remindPk?n[t]={values:[{key:"foreign",value:r.remindform[t].foreign},{key:"value",value:""}]}:n[t]={values:[{key:"value",value:r.remindform[t].value}]}}),(0,u.Z)({},this.remindPk,{rows:[]}));return new(m())(function(e,t){var a={size:r.remindSourceList.length,multiple:!0};dsf.http.get("/fn/common/generateUUID?timer="+(new Date).getTime(),a).then(function(t){var i=t.data.data.UUID;r.remindSourceList.forEach(function(t,e){var a=JSON.parse(f()(n));a["C-TASKMAN-REMIND-0001"]={values:[{key:"value",value:t.value},{key:"text",value:t.text}]},a["C-TASKMAN-REMIND-0002"]={values:[{key:"value",value:t.readValue},{key:"text",value:t.readText}]},a.action=t.action,"Added"==t.action?a[r.remindPk].values[1].value=i[e]:a[r.remindPk].values[1].value=t.id,s[r.remindPk].rows.push(a)}),e(s)})})},saveData:function(){var s=this;return(0,o.Z)(l().mark(function t(){var e,a,i,r,n;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=s).formData["C-TASKMAN-TASK-0006"].value){t.next=4;break}return s.$toast.fail("请输入任务名称"),t.abrupt("return");case 4:if(s.formData["C-TASKMAN-TASK-0009"].value){t.next=7;break}return s.$toast.fail("请选择开始时间"),t.abrupt("return");case 7:if(s.formData["C-TASKMAN-TASK-0010"].value){t.next=10;break}return s.$toast.fail("请选择结束时间"),t.abrupt("return");case 10:if(new Date(s.formData["C-TASKMAN-TASK-0009"].value).getTime()>=new Date(s.formData["C-TASKMAN-TASK-0010"].value).getTime())return s.$toast.fail("结束时间必须大于开始时间"),t.abrupt("return");t.next=13;break;case 13:return t.next=15,s.getXtUserSource();case 15:return a=t.sent,t.next=18,s.getRemindSource();case 18:n=t.sent,a=c()(a,n),p.log(a),i=c()(s.mainInfo,s.formData),p.log(i),r={},d()(i).forEach(function(e){r[e]={values:[]},d()(i[e]).forEach(function(t){r[e].values.push({key:t,value:i[e][t]})})}),n={moduleId:s.moduleId,formId:s.formId,pk:s.pk,__DATA:f()({maininfo:r,multinfos:a})},s.$toast.loading({message:"保存中...",forbidClick:!0,duration:0,overlay:!0}),dsf.http.post("/fn/xform/save",n).then(function(t){"success"==t.data.type?e.saveRemark():e.$toast.fail("保存失败")}),p.log(n);case 29:case"end":return t.stop()}},t)}))()},saveRemark:function(){var e=this;dsf.http.post("/fn//taskman/collaborate/saveRemark",{taskId:this.pk,remark:this.formData["C-TASKMAN-TASK-0014"].value}).then(function(t){"success"==t.data.type?(e.$eventBus.refresh(e),e.$toast.success("保存成功"),setTimeout(function(){e.isApp?window.native&&window.native.isNative()?window.native.back():e.goBack():e.closeWindow()},1500)):e.$toast.fail("保存失败")})},closeWindow:function(){var t;window.native?window.native.hidePanel():window.top.closeLastTaskLayer?window.top.closeLastTaskLayer():window.top.layer?(t=top.layer.getFrameIndex(window.name),top.layer&&top.layer.close(t)):this.goBack()}},created:function(){navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?this.isApp=!0:this.isApp=!1,0<=navigator.userAgent.indexOf("mobileIM")&&(this.isApp=!0,this.isIm=!0)},mounted:function(){var t;this.initDataSource(),this.$route.params.pk?(this.pk=this.$route.params.pk,this.initUpdateForamData()):(this.initRespons(),this.$set(this.formData["C-TASKMAN-TASK-0003"],"value",this.user.user_id),this.$set(this.formData["C-TASKMAN-TASK-0003"],"text",this.user.name),this.$set(this.formData["C-TASKMAN-TASK-0003"],"schema","1::"+this.user.deptId),this.$set(this.formData["C-TASKMAN-TASK-0012"],"text","任务截止时,截止前1小时,截止前1天"),this.$set(this.formData["C-TASKMAN-TASK-0012"],"value","2,7,9"),this.remindSourceList=[{text:"任务截止时",value:"2",action:"Added",readText:"否",readValue:"-1"},{text:"截止前1小时",value:"7",action:"Added",readText:"否",readValue:"-1"},{text:"截止前1天",value:"9",action:"Added",readText:"否",readValue:"-1"}],this.remindList=["2","7","9"],this.$route.params.title&&"null"!=this.$route.params.title&&(t=JSON.parse(decodeURIComponent(this.$route.params.title)),this.$set(this.formData["C-TASKMAN-TASK-0006"],"value",t.text)),this.initMainInfo())},destroyed:function(){}},T=(0,a(51900).Z)(s,function(){var i=this,t=i._self._c;return t("div",{staticClass:"addTask"},[i.isApp?t("van-nav-bar",{attrs:{title:i.$route.params.pk?"修改任务":"新建任务"},on:{"click-left":i.goBack},scopedSlots:i._u([{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0}],null,!1,669704712)}):i._e(),i._v(" "),i.isApp?i._e():t("div",{staticClass:"header"},[t("span",[i._v(i._s(i.$route.params.pk?"修改任务":"新建任务"))]),i._v(" "),t("van-icon",{attrs:{name:"cross"},on:{click:i.closeWindow}})],1),i._v(" "),t("div",{staticClass:"formData"},[t("div",{staticClass:"task_title"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.formData["C-TASKMAN-TASK-0006"].value,expression:"formData['C-TASKMAN-TASK-0006'].value"}],attrs:{spellcheck:"false",type:"text",placeholder:"请输入任务名称",maxlength:"50"},domProps:{value:i.formData["C-TASKMAN-TASK-0006"].value},on:{input:function(t){t.target.composing||i.$set(i.formData["C-TASKMAN-TASK-0006"],"value",t.target.value)}}})]),i._v(" "),t("div",{staticClass:"fileds"},[t("div",{staticClass:"title required"},[i._v("负责人")]),i._v(" "),t("div",{staticClass:"right"},[i.formData["C-TASKMAN-TASK-0001"].text?t("span",{staticClass:"text"},[i._v(i._s(i.formData["C-TASKMAN-TASK-0001"].text))]):i._e(),i._v(" "),t("span",{staticClass:"btn",on:{click:function(t){i.show=!0}}},[i._v("更改")])])]),i._v(" "),t("div",{staticClass:"fileds"},[t("div",{staticClass:"title"},[i._v("协同人")]),i._v(" "),t("div",{staticClass:"right"},[i.xietongText?t("span",{staticClass:"text"},[i._v(i._s(i.xietongText))]):i._e(),i._v(" "),t("span",{staticClass:"btn",on:{click:function(t){i.showXt=!0}}},[t("van-icon",{attrs:{name:"add-o"}}),i._v("\n                    添加协同人\n                ")],1)])]),i._v(" "),t("div",{staticClass:"xietong"},[t("div",{staticClass:"xt_top"},[t("div",{staticClass:"pingjun",class:{active:i.average},on:{click:i.doAverage}},[i._v("平均分配")]),i._v(" "),t("div",{staticClass:"tips",on:{click:function(t){i.showTip=!0}}},[t("span",[i._v("任务权重分配")]),i._v(" "),t("van-icon",{attrs:{name:"question-o"}})],1)]),i._v(" "),t("div",{staticClass:"xtList"},i._l(i.xtUserList,function(e,a){return t("div",{directives:[{name:"show",rawName:"v-show",value:"Deleted"!=e.action,expression:"item.action!='Deleted'"}],key:a},[t("span",{staticClass:"username"},[i._v(i._s(e.name)+"（"+i._s(e.attrs.orgNameLV1Text)+"）")]),i._v(" "),t("van-stepper",{attrs:{min:"0",max:"10",disabled:i.average},model:{value:e.percent,callback:function(t){i.$set(e,"percent",t)},expression:"item.percent"}}),i._v(" "),t("van-icon",{attrs:{name:"cross"},on:{click:function(t){return i.removeUser(e,a)}}})],1)}),0)]),i._v(" "),t("div",{staticClass:"fileds"},[t("div",{staticClass:"title required"},[i._v("类型")]),i._v(" "),t("div",{staticClass:"types"},[t("div",{class:{active:1==i.typeIndex},on:{click:function(t){return i.setType(1)}}},[t("van-image",{attrs:{src:"./static/images/taskManager/icon1.png"}})],1),i._v(" "),t("div",{class:{active:2==i.typeIndex},on:{click:function(t){return i.setType(2)}}},[t("van-image",{attrs:{src:"./static/images/taskManager/icon2.png"}})],1),i._v(" "),t("div",{class:{active:3==i.typeIndex},on:{click:function(t){return i.setType(3)}}},[t("van-image",{attrs:{src:"./static/images/taskManager/icon3.png"}})],1),i._v(" "),t("div",{class:{active:4==i.typeIndex},on:{click:function(t){return i.setType(4)}}},[t("van-image",{attrs:{src:"./static/images/taskManager/icon4.png"}})],1)])]),i._v(" "),t("div",{staticClass:"fileds"},[t("div",{staticClass:"title required"},[i._v("开始时间")]),i._v(" "),t("div",{staticClass:"timers"},[t("div",{on:{click:function(t){i.showPickerStart=!0}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.formData["C-TASKMAN-TASK-0009"].value,expression:"formData['C-TASKMAN-TASK-0009'].value"}],attrs:{spellcheck:"false",type:"text",readonly:"",placeholder:"开始时间"},domProps:{value:i.formData["C-TASKMAN-TASK-0009"].value},on:{input:function(t){t.target.composing||i.$set(i.formData["C-TASKMAN-TASK-0009"],"value",t.target.value)}}}),i._v(" "),t("van-image",{attrs:{src:"./static/images/taskManager/timer.png"}})],1)])]),i._v(" "),t("div",{staticClass:"fileds"},[t("div",{staticClass:"title required"},[i._v("结束时间")]),i._v(" "),t("div",{staticClass:"timers"},[t("div",{on:{click:function(t){i.showPickerEnd=!0}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.formData["C-TASKMAN-TASK-0010"].value,expression:"formData['C-TASKMAN-TASK-0010'].value"}],attrs:{spellcheck:"false",type:"text",readonly:"",placeholder:"结束时间"},domProps:{value:i.formData["C-TASKMAN-TASK-0010"].value},on:{input:function(t){t.target.composing||i.$set(i.formData["C-TASKMAN-TASK-0010"],"value",t.target.value)}}}),i._v(" "),t("van-image",{attrs:{src:"./static/images/taskManager/timer.png"}})],1)])]),i._v(" "),t("div",{staticClass:"fileds"},[t("div",{staticClass:"title"},[i._v("逾期提醒")]),i._v(" "),t("div",{staticClass:"right"},[i.formData["C-TASKMAN-TASK-0012"].text?t("span",{staticClass:"text"},[i._v("\n                    "+i._s(i.formData["C-TASKMAN-TASK-0012"].text)+"\n                ")]):i._e(),i._v(" "),t("span",{staticClass:"btn",on:{click:function(t){i.showRemind=!0}}},[t("van-icon",{attrs:{name:"add-o"}}),i._v("\n                    添加提醒\n                ")],1)])]),i._v(" "),t("div",{staticClass:"fileds"},[t("div",{staticClass:"title"},[i._v("任务描述")]),i._v(" "),t("div",{staticClass:"right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.formData["C-TASKMAN-TASK-0011"].value,expression:"formData['C-TASKMAN-TASK-0011'].value"}],attrs:{spellcheck:"false",type:"text",placeholder:"请输入",maxlength:"200"},domProps:{value:i.formData["C-TASKMAN-TASK-0011"].value},on:{input:function(t){t.target.composing||i.$set(i.formData["C-TASKMAN-TASK-0011"],"value",t.target.value)}}})])]),i._v(" "),t("div",{staticClass:"fileds fileds1"},[t("div",{staticClass:"title"},[i._v("附件("+i._s(i.fileList.length)+")")]),i._v(" "),t("div",{staticClass:"right"},[t("div",{staticClass:"files"},[t("div",{staticClass:"fileList"},i._l(i.fileList,function(e,a){return t("div",{key:a},[t("van-image",{attrs:{src:"./static/images/fileType/"+e.fileType+".png"},scopedSlots:i._u([{key:"error",fn:function(){return[t("img",{attrs:{src:"./static/images/fileType/cloud.png"}})]},proxy:!0}],null,!0)}),i._v(" "),t("span",[i._v(i._s(e.title))]),i._v(" "),t("van-icon",{attrs:{name:"delete-o"},on:{click:function(t){return i.deleteFile(e,a)}}})],1)}),0),i._v(" "),t("van-uploader",{attrs:{"after-read":i.afterRead,multiple:!0,accept:"*"}},[t("span",{staticClass:"btn"},[t("van-icon",{attrs:{name:"add-o"}}),i._v("\n                            添加附件\n                        ")],1)])],1)])]),i._v(" "),t("div",{staticClass:"fileds_remark"},[t("div",{staticClass:"title"},[t("div",{staticClass:"title_text"},[i._v("我的备注(仅您自己可见)")]),i._v(" "),t("van-icon",{class:{active:i.showRemark},attrs:{name:"arrow-up"},on:{click:function(t){i.showRemark=!i.showRemark}}})],1),i._v(" "),t("input",{directives:[{name:"show",rawName:"v-show",value:i.showRemark,expression:"showRemark"},{name:"model",rawName:"v-model",value:i.formData["C-TASKMAN-TASK-0014"].value,expression:"formData['C-TASKMAN-TASK-0014'].value"}],attrs:{spellcheck:"false",type:"text",placeholder:"请输入",maxlength:"150"},domProps:{value:i.formData["C-TASKMAN-TASK-0014"].value},on:{input:function(t){t.target.composing||i.$set(i.formData["C-TASKMAN-TASK-0014"],"value",t.target.value)}}})])]),i._v(" "),t("div",{staticClass:"footerbtn"},[t("van-button",{attrs:{type:"info",color:"#1064CD",size:"small"},on:{click:i.saveData}},[i._v("确定")])],1),i._v(" "),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:i.showPickerStart,callback:function(t){i.showPickerStart=t},expression:"showPickerStart"}},[t("van-datetime-picker",{attrs:{type:"datetime",title:"选择完整时间"},on:{confirm:i.confirmStart,cancel:i.cancelPopup},model:{value:i.start_timer,callback:function(t){i.start_timer=t},expression:"start_timer"}})],1),i._v(" "),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:i.showPickerEnd,callback:function(t){i.showPickerEnd=t},expression:"showPickerEnd"}},[t("van-datetime-picker",{attrs:{type:"datetime",title:"选择完整时间"},on:{confirm:i.confirmEnd,cancel:i.cancelPopup},model:{value:i.end_timer,callback:function(t){i.end_timer=t},expression:"end_timer"}})],1),i._v(" "),t("van-dialog",{attrs:{title:"逾期提醒"},on:{confirm:i.remindHandder},model:{value:i.showRemind,callback:function(t){i.showRemind=t},expression:"showRemind"}},[t("div",{staticClass:"remList"},[t("van-checkbox-group",{model:{value:i.remindList,callback:function(t){i.remindList=t},expression:"remindList"}},i._l(i.remind,function(e,a){return t("van-checkbox",{key:e.id,attrs:{name:e.codeValue},on:{click:function(t){return i.remindChange(e,a)}}},[i._v(i._s(e.codeName))])}),1)],1)]),i._v(" "),t("van-popup",{style:{height:"100%"},attrs:{"get-container":i.getContainer,position:"bottom"},model:{value:i.show,callback:function(t){i.show=t},expression:"show"}},[t("control-user-list",{attrs:{showBack:!1,metaId:i.zrrMetaData.metaId,extra:i.zrrMetaData.extra,selectType:0,"default-select-array":i.zrrDefaultSelectArray,topformMeta:i.topformMeta},on:{close:i.close,getSelectUser:i.getSelectUserZrr}})],1),i._v(" "),t("van-popup",{style:{height:"100%"},attrs:{"get-container":i.getContainer,position:"bottom"},model:{value:i.showXt,callback:function(t){i.showXt=t},expression:"showXt"}},[i.showXt?t("control-user-list",{attrs:{showBack:!1,metaId:i.xtrMetaData.metaId,extra:i.xtrMetaData.extra,selectType:0,"default-select-array":i.xtrDefaultSelectArray,topformMeta:i.topformMeta},on:{close:i.close,getSelectUser:i.getSelectUserXtr}}):i._e()],1),i._v(" "),t("van-popup",{staticClass:"tipdiog",attrs:{round:"",overlay:!1},model:{value:i.showTip,callback:function(t){i.showTip=t},expression:"showTip"}},[t("div",{staticClass:"tian"},[t("div",{staticClass:"pop_header"},[t("span",[i._v("协同人管理")]),i._v(" "),t("van-icon",{attrs:{name:"cross"},on:{click:function(t){i.showTip=!1}}})],1),i._v(" "),t("div",{staticClass:"contains"},[t("p",[i._v("通过任务负责人设置执行权重、协同人设置个人进度、系统自动\n                    计算任务总;进度三个步聚来实现任务可视化进度管理，从而高效助力\n                    任务目标的达成。")]),i._v(" "),t("p",{staticClass:"tit"},[i._v("一、如何分配任务执行权重")]),i._v(" "),t("p",[i._v("仅任务负麦人可以调整任务协同人的执行权重。系統默认所有协\n                    同人的进度对任务总进度的影响是一致的，权重均是5，即同一任务下\n                    所有协同人执行权重占比保持相同。任务负责人可根据协同人对任务\n                    总进度的影响大小，调整协同人的权重。分为0-10一共11个档位，其\n                    中0代表该协同人的推进进度对任务总进度无影响，10代表该协同人的\n                    准进进度对任务总进度的影响最大。")]),i._v(" "),t("p",{staticClass:"tit"},[i._v("二、协同人标记个人推进进度数据")]),i._v(" "),t("p",[i._v("协同人可根据实际进展，从0%-100%标记推进进度。")]),i._v(" "),t("p",{staticClass:"tit"},[i._v("三、系统自动计算任务总进度数据")]),i._v(" "),t("p",[i._v("任务总进度=协同人1的进度*协同人1的权重占比＋协同人2的进度\n                    *协同人2的权重占比+…十协同人n的进度*协同人n的权重占比。")])])])])],1)},[],!1,null,"054daee4",null).exports},79156:function(t,e,a){a.d(e,{Z:function(){return r}});var i=a(78149);function r(t){if(i(t))return t}},26511:function(t,e,a){function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}a.d(e,{Z:function(){return i}})},522:function(t,e,a){a.d(e,{Z:function(){return s}});var i=a(79156),u=a(85579),d=a(22013);var r=a(33422),n=a(26511);function s(t,e){return(0,i.Z)(t)||function(t,e){var a=null==t?null:void 0!==u&&t[d]||t["@@iterator"];if(null!=a){var i,r,n,s,o=[],l=!0,c=!1;try{if(n=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;l=!1}else for(;!(l=(i=n.call(a)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(c)throw r}}return o}}(t,e)||(0,r.Z)(t,e)||(0,n.Z)()}}}]);