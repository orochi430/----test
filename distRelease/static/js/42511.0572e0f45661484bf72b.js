"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[42511],{46916:function(a,e,t){t.r(e);var n=t(73473),o=t.n(n),E=t(90541),l=(t(88561),t(25108)),n={handle:function(a,e){},initHandle:function(n,a,m){function i(a){a=a.replace(/-/g,"/");return Date.parse(a)}l.log("请假审批"),l.log(m.formData),m.$bus.on("selectDateTime",function(a){var e,t;"C-LEAVE-0003"!=a.metaData.metaId&&"C-LEAVE-0002"!=a.metaData.metaId||m.formData.main["C-LEAVE-0003"].value&&m.formData.main["C-LEAVE-0002"].value&&(t=i(n.main["C-LEAVE-0002"].value),e=i(n.main["C-LEAVE-0003"].value),l.log(t,e),l.log(e=e-t),t=Math.floor(e/864e5)+1,l.log(t),0<t?m.$set(m.formData.main,"C-LEAVE-0006",{value:t}):(m.$set(m.formData.main,"C-LEAVE-0006",{value:""}),m.$set(m.formData.main,"C-LEAVE-0003",{value:""}),m.$set(m.formData.main,"C-LEAVE-0002",{value:""}),E.Z.layer.toast("结束时间必须晚于开始时间")),m.formData.main["C-LEAVE-0004"].value)&&m.formData.main["C-LEAVE-0005"].value&&E.Z.http.post("fn/leaveApplication/existsLeaveTime",{pk:m.formParams.pk,startTime:n.main["C-LEAVE-0002"].value,endTime:n.main["C-LEAVE-0003"].value,startPeriod:m.formData.main["C-LEAVE-0004"].value,endPeriod:m.formData.main["C-LEAVE-0005"].value}).then(function(a){1==a.data.data&&(m.$set(m.formData.main,"C-LEAVE-0003",{value:""}),m.$set(m.formData.main,"C-LEAVE-0002",{value:""}),E.Z.layer.toast(a.data.message))}),l.log(a),l.log(m.formData)})},saveFilter:function(t,a,n,m){function i(a){a=a.replace(/-/g,"/");return Date.parse(a)}return new(o())(function(a,e){"save"==m||"send"==m?i(t.main["C-LEAVE-0003"].value)<i(t.main["C-LEAVE-0002"].value)?e("请假结束时间不能早于请假开始时间"):(e="".concat(n.formData.main.A0011.value,"的").concat(n.formData.main.A0005.value,"(").concat(n.formData.main["C-LEAVE-0001"].text).concat(n.formData.main["C-LEAVE-0006"].value,"天)"),n.$set(n.formData.main,"B0001",{value:e}),a()):a()})}};e.default=n}}]);