"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[82641],{82641:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});var n=e(66250),a=e(33453),i=e.n(a),a=e(8450),l=e.n(a),a=e(73473),o=e.n(a),a=e(79529),s=e.n(a),a=e(70596),r=e.n(a),c=e(25108),a={components:{},data:function(){return{showStreet:!1,streets:[],streetsIndex:0,showArea:!1,areas:[],areaIndex:0,totalData:{all_nuclein_late_num:0,all_nuclein_num:0,all_num:0,all_red_num:0,all_vaccin_num:0,all_yellow_num:0},showChart1:!0,showChart2:!0}},methods:{toTotalList:function(){this.totalData.all_num&&this.$router.push({path:"commonlist/220330142018zVPxmR3EO0HoyRoRS5O/220319194130l6pirMZJe74yeqvID8I"})},toList:function(t,a){t&&this.$router.push({path:"commonlist/220330142037OJwEqORfSPc2O1T1aD5/220319194130l6pirMZJe74yeqvID8I",query:{secQuery:l()(a)}})},initChart1:function(t){0==t.xAxis.length?this.showChart1=!1:this.showChart1=!0;var a=r().init(this.$refs.chart1),t={color:["#FA6400","#E02020","#F7B500"],tooltip:{trigger:"axis",position:function(t,a,e,n,i){return t[0]>=i.viewSize[0]/2?[t[0]-i.contentSize[0],"10%"]:[t[0],"10%"]},axisPointer:{type:"shadow"}},legend:{icon:"roundRect",itemWidth:15,data:t.legend,show:!0,right:0,textStyle:{fontSize:"12px",color:"#666"}},xAxis:{type:"category",boundaryGap:!1,data:t.xAxis,axisLine:{show:!0,lineStyle:{color:"#ccc"}}},grid:{top:85,bottom:30,left:50,right:15},yAxis:{type:"value",name:"(单位:人)",minInterval:1,nameTextStyle:{align:"right",color:"#666",fontSize:"12px"},axisLine:{show:!0,lineStyle:{color:"#ccc"}},splitLine:{show:!1}},series:[{name:t.legend[0],data:t.values1,type:"line",symbolSize:6},{name:t.legend[1],data:t.values2,type:"line",symbolSize:6},{name:t.legend[2],data:t.values3,type:"line",symbolSize:6},{name:t.legend[3],data:t.values4,type:"line",symbolSize:6}]};a.setOption(t,!0)},initChart2:function(a){var e,n=this,t=(0==a.xAxis.length?this.showChart2=!1:this.showChart2=!0,r().init(this.$refs.chart2)),i={color:["#E02020","#F7B500","#FA6400","#F66C6C"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},triggerOn:"click",formatter:function(t){c.log(t),e=t[0].dataIndex}},legend:{data:a.legend,icon:"roundRect",itemWidth:15,show:!0,right:0,textStyle:{fontSize:"12px",color:"#666"}},grid:{top:60,bottom:50,left:60,right:15},xAxis:{name:"单位:人",minInterval:1,nameTextStyle:{align:"right",color:"#666",fontSize:"12px",verticalAlign:"top",lineHeight:60},type:"value",boundaryGap:[0,"10%"],axisLine:{show:!0,lineStyle:{color:"#ccc"}},axisLabel:{color:"#666"}},yAxis:{type:"category",data:a.xAxis,axisLine:{show:!0,lineStyle:{color:"#ccc"}},splitLine:{show:!1},axisLabel:{color:"#666"}},series:[{name:a.legend[0],data:a.values1,type:"bar",barWidth:15,label:{show:!0,color:"inherit",position:"right"}},{name:a.legend[1],data:a.values2,type:"bar",barWidth:15,label:{show:!0,color:"inherit",position:"right"}},{name:a.legend[2],data:a.values3,type:"bar",barWidth:15,label:{show:!0,color:"inherit",position:"right"}},{name:a.legend[3],data:a.values4,type:"bar",barWidth:15,label:{show:!0,color:"inherit",position:"right"}}]};t.resize({height:120*a.xAxis.length+50}),t.getZr().on("click",function(t){c.log(e),void 0!==e&&(n.$router.push({path:"commonlist/220327050407Q71XVhrYzoh0Q9qbE75/220319194130l6pirMZJe74yeqvID8I",query:{secQuery:l()({unitId:a.ids[e],nuclein_Status:"-1",nuclein_Overdue:"1",vaccin_Result:"-1",redCode:"10",yellowCode:"01"})}}),e=void 0)}),t.setOption(i,!0)},onAreaConfirm:function(t,a){this.showArea=!1,vant.Toast("当前值：".concat(t,", 当前索引：").concat(a))},onCancel:function(){this.showArea=!1,this.showStreet=!1},haddleStreetClick:function(){this.onCancel(),this.showStreet=!0},haddleAreaClick:function(){this.onCancel(),this.showArea=!0},initData:function(){var e=this;return(0,n.Z)(i().mark(function t(){var a;return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=dsf.layer.loading(),o().all([e.loadTotalData("",4),e.getHistoryCharts("",4),e.getChartsByArea("",4)]).then(function(t){dsf.layer.closeLoading(a)}).catch(function(t){dsf.layer.toast(t),c.log(t)});case 2:case"end":return t.stop()}},t)}))()},loadTotalData:function(t,a){var e=this;return dsf.http.post("/ctrl/sqa/getRealTopData?id="+t+"&type="+a).then(function(t){t&&"200"===t.data.code&&(e.totalData=t.data.data.data[0])}).error(function(t){})},getHistoryCharts:function(t,a){var n=this;return dsf.http.post("/ctrl/sqa/getHistoryCharts?id="+t+"&type="+a).then(function(t){var e;t&&"200"===t.data.code&&(t=t.data.data.data,e={legend:["核酸阳性","未按要求接种疫苗","核酸超期","健康码异常"],xAxis:[],values1:[],values2:[],values3:[],values4:[]},t.map(function(t,a){e.xAxis.push(t.tj_date.substr(5).replace("-",".")),e.values1.push(s()(t.nuclein_num)),e.values2.push(s()(t.vaccin_num)),e.values3.push(s()(t.nuclein_late_num)),e.values4.push(s()(t.health_num))}),n.initChart1(e))}).catch(function(t){})},getChartsByArea:function(t,a){var n=this;return dsf.http.post("/ctrl/sqa/getChartsByArea?id="+t+"&type="+a).then(function(t){var e;c.log(t),t&&"200"===t.data.code&&(t=t.data.data.data,e={legend:["核酸阳性","未按要求接种疫苗","健康码异常","未按时核酸检测"],ids:[],xAxis:[],values1:[],values2:[],values3:[],values4:[]},t.map(function(t,a){!t.bt&&t.name&&(t.bt=t.name),e.xAxis.push(t.bt.substr(0,4)+"\n"+t.bt.substr(4)),e.ids.push(t.id),e.values1.push(s()(t.nuclein_num)),e.values2.push(s()(t.vaccin_num)),e.values3.push(s()(t.health_num)),e.values4.push(s()(t.nuclein_late_num))}),n.initChart2(e),c.log(e))}).catch(function(t){})}},mounted:function(){this.initData()},beforeRouteEnter:function(t,a,e){e(function(t){"commonList"!=a.name&&(t.areaIndex=0,t.streetsIndex=0,t.totalData.all_nuclein_late_num=0,t.totalData.all_nuclein_num=0,t.totalData.all_num=0,t.totalData.all_red_num=0,t.totalData.all_vaccin_num=0,t.totalData.all_yellow_num=0,r().init(t.$refs.chart1).clear(),r().init(t.$refs.chart2).clear(),t.initData())})}},u=(0,e(51900).Z)(a,function(){var a=this,t=a._self._c;return t("div",{staticClass:"warpbox"},[t("div",{staticClass:"totals"},[t("div",{on:{click:function(t){return a.toTotalList()}}},[t("span",[a._v("总人数")]),a._v(" "),t("span",{staticStyle:{color:"#0073CA"}},[a._v(a._s(a.totalData.all_num||0))])]),a._v(" "),t("div",{on:{click:function(t){return a.toList(a.totalData.all_nuclein_num,{nuclein_Status:"-1",nuclein_Overdue:"-99",vaccin_Result:"-99",redCode:"-99",yellowCode:"-99"})}}},[t("span",[a._v("核酸阳性")]),a._v(" "),t("span",{staticStyle:{color:"#F66C6C"}},[a._v(a._s(a.totalData.all_nuclein_num||0))])]),a._v(" "),t("div",{on:{click:function(t){return a.toList(a.totalData.all_nuclein_late_num,{nuclein_Status:"-99",nuclein_Overdue:"1",vaccin_Result:"-99",redCode:"-99",yellowCode:"-99"})}}},[t("span",[a._v("核酸超期")]),a._v(" "),t("span",{staticStyle:{color:"#FA6400"}},[a._v(a._s(a.totalData.all_nuclein_late_num||0))])]),a._v(" "),t("div",{on:{click:function(t){return a.toList(a.totalData.all_vaccin_num,{nuclein_Status:"-99",nuclein_Overdue:"-99",vaccin_Result:"-1",redCode:"-99",yellowCode:"-99"})}}},[t("span",[a._v("未按要求接种疫苗")]),a._v(" "),t("span",{staticStyle:{color:"#F7B500"}},[a._v(a._s(a.totalData.all_vaccin_num||0))])]),a._v(" "),t("div",{staticStyle:{"border-bottom":"none"},on:{click:function(t){return a.toList(a.totalData.all_red_num,{nuclein_Status:"-99",nuclein_Overdue:"-99",vaccin_Result:"-99",redCode:"10",yellowCode:"-99"})}}},[t("span",[a._v("健康码（红码）")]),a._v(" "),t("span",{staticStyle:{color:"#E02020"}},[a._v(a._s(a.totalData.all_red_num||0))])]),a._v(" "),t("div",{staticStyle:{"border-bottom":"none"},on:{click:function(t){return a.toList(a.totalData.all_yellow_num,{nuclein_Status:"-99",nuclein_Overdue:"-99",vaccin_Result:"-99",redCode:"-99",yellowCode:"01"})}}},[t("span",[a._v("健康码（黄码）")]),a._v(" "),t("span",{staticStyle:{color:"#FA6400"}},[a._v(a._s(a.totalData.all_yellow_num||0))])])]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.showChart1,expression:"showChart1"}],staticClass:"chartBox"},[t("div",{staticClass:"title"},[a._v("异常情况趋势")]),a._v(" "),t("div",{ref:"chart1",staticClass:"chart2"})]),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:a.showChart2,expression:"showChart2"}],staticClass:"chartBox"},[t("div",{staticClass:"title"},[a._v("异常情况分布")]),a._v(" "),t("div",{ref:"chart2",staticClass:"chart3",staticStyle:{width:"85vw"}})])])},[],!1,null,null,null).exports}}]);