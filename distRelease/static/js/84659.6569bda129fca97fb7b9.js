"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[84659,18868],{51129:function(e,t,o){o.r(t),o.d(t,{default:function(){return i}});var t=o(8450),a=o.n(t),n=o(88561),s=o(62596),t=o(63560),t={components:{controlUserList:o(63450).default,selectPerson:t.default},data:function(){return{logname:"",autoLogin:!1,selectPeople:!1,isSelect:!1,extra:{multiple:!1,rootObject:"1",typesString:"person",customRoot:"2203181435142nt6l5V7JhAuMyRBZKe",tabs:[{name:"本机构",action:"fn/user/select/data?types=person&rootObject=1&action=self_org&async=true&moduleId=220317175747dleuT8ffDHmcbcz0aHg",subTabKey:"department"}]},isChangeUser:!1}},computed:{},mounted:function(){},created:function(){this.isSelect=!1,this.$route.query.changUser?(this.isChangeUser=!0,this.selectPeople=!0):n.Z.loadLocalStore("check_passWord")&&(n.Z.loadLocalStore("autoLogin")?this.login2():this.selectPeople=!0)},methods:{cancePerson:function(){this.$route.query.changUser&&!this.isSelect?this.$router.back():this.selectPeople=!1},getSelectUser:function(e){this.isSelect=!0,n.Z.saveToLocalStore("userName",s.Z.encode(e[0].attrs.logName)),n.Z.saveToLocalStore("passWord",s.Z.encode("111111")),n.Z.saveToLocalStore("autoLogin",!0),this.login2()},goUrl:function(){var o=this;dsf.http.post("/fn/covidProtect/toadyForm").then(function(e){var t;200!=e.data.code?dsf.layer.toast(e.data.message):(t={name:"commonForm",params:{moduleId:(e=e.data.data).moduleId}},e.pk&&(t.params.pk=e.pk),e.initDataSource&&(t.query={initDataSource:e.initDataSource,listId:"191101180952ZBvw3u1nGer5IvYN5M0"}),o.$router.push(t))}).error(function(e){dsf.layer.toast(e)})},login2:function(){var t=this,e=s.Z.decode(n.Z.loadLocalStore("userName")),o=s.Z.decode(n.Z.loadLocalStore("passWord")),e={__DATA:a()({logname:e,password:o,device_id:"device_id",device_desc:"device_desc"})};dsf.http.post("/fn/mobileAuth/login",e).then(function(e){1==e.data.rcode?(n.Z.saveToSessionStore("user",e.data.data),n.Z.saveToSessionStore("loginToken",e.data.data.auth.token),n.Z.saveToLocalStore("loginToken",e.data.data.auth.token),n.Z.saveToLocalStore("user",e.data.data),t.goUrl()):n.Z.saveToLocalStore("autoLogin",!1),dsf.layer.toast(e.data.message)}).error(function(e){-1<e.message.indexOf("404")&&dsf.layer.toast("登录接口异常，请联系系统管理员！")}).always(function(){dsf.layer.closeLoading(t.loading)})},login:function(){var e=this;"fgw123456"==e.logname?(n.Z.saveToLocalStore("check_passWord",s.Z.encode("fgw123456")),e.selectPeople=!0):(dsf.layer.toast("验证码不正确"),e.logname="")}}},i=(0,o(51900).Z)(t,function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("div",{staticClass:"banner"}),t._v(" "),t.isChangeUser?t._e():e("div",{staticClass:"formbox loginForm"},[e("div",{staticClass:"login_title"},[t._v("请输入验证密码")]),t._v(" "),e("van-form",{on:{submit:t.login}},[e("van-field",{attrs:{type:"password",rules:[{required:!0}],name:"验证密码",placeholder:"请输入验证密码",center:""},model:{value:t.logname,callback:function(e){t.logname=e},expression:"logname"}}),t._v(" "),e("div",{staticClass:"btnbox",staticStyle:{"margin-top":"30px"}},[t.autoLogin?e("van-button",{staticStyle:{width:"100%","font-size":"19px"},attrs:{disabled:t.autoLogin,round:"",type:"info","native-type":"submit"}},[t._v("登录中...")]):e("van-button",{staticStyle:{width:"100%","font-size":"19px"},attrs:{round:"",type:"info","native-type":"submit"}},[t._v("确定")])],1)],1)],1),t._v(" "),e("van-popup",{ref:"popref",style:{height:"100%"},attrs:{"close-on-click-overlay":!0,"lock-scroll":"",position:"bottom"},model:{value:t.selectPeople,callback:function(e){t.selectPeople=e},expression:"selectPeople"}},[t.selectPeople?e("selectPerson",{attrs:{type:0,extra:t.extra},on:{getSelectUser:t.getSelectUser,cancePerson:t.cancePerson}}):t._e()],1)],1)},[],!1,null,"3b80603e",null).exports},18868:function(e,t,o){var s=o(25108);const i=(a,n=500,s=!0)=>{let i,l=0,c,r,d=o=>{i=setTimeout(()=>{var e=(new Date).getTime(),t=e-l;t<o?(l=e,d(n-t)):(s||a.apply(c,r),clearTimeout(i),i=null)},o)};return function(){c=this,r=arguments;var e=(new Date).getTime();l=e,i||(s&&a.apply(c,r),d(n))}};t.Z={name:"DebounceClick",functional:!0,render(e,t){var o,a=t.props.time,n=t.props.immediate,t=t.slots().default;return void 0===t?(s.warn("<debounce> 组件必须要有子元素"),null):((t=t[0]||null).data.on&&t.data.on.click?(o=t.data.on.click,o=i(o,a,n),t.data.on.click=o):t.componentOptions&&t.componentOptions.listeners.click&&(o=t.componentOptions.listeners.click,o=i(o,a,n),t.componentOptions.listeners.click=o),t)}}}}]);