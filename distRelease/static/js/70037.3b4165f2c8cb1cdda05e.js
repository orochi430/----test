"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[70037],{70037:function(t,a,e){e.r(a),e.d(a,{default:function(){return s}});var a=e(54258),i=(e(46295),e(94859),e(40451),e(21865),e(78511),e(83062),e(25108)),a={name:"dataAnalysis",components:{VChart:a.Z},data:function(){return{currentChart:null,isShowPlaceSelectPopup:!1,isShowTimeSelectPopup:!1,chartPlaceList:[{text:"全部地区",id:""},{text:"全部地区",id:""},{text:"全部地区",id:""},{text:"全部地区",id:""}],appealStaSelectTime:{text:"日",type:"1"},timeColumns:[{text:"日",type:"1"},{text:"周",type:"2"},{text:"月",type:"3"}],placeColumns:[{text:"上海市",children:[{text:"全部地区",id:""}]}],baseData:[{title:"企业数",num:0},{title:"专员数",num:0},{title:"诉求新增数",num:0},{title:"走访数",num:0},{title:"赋能数",num:0}],companiesStatisticsChart:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["专员数","企业数"],bottom:0,itemWidth:10,itemHeight:10},color:["#FFCD00","#2E91F6"],grid:{left:"1%",right:"8%",top:"1%",bottom:"8%",containLabel:!0},xAxis:{type:"value",axisLine:{lineStyle:{width:0}},axisTick:{show:!1}},yAxis:{type:"category",data:[],axisTick:{show:!1},axisLine:{lineStyle:{color:"#CCC"}},axisLabel:{interval:0,color:"#333",formatter:function(t){return t.length<=5?t:t.substr(0,5)+"..."}}},series:[{name:"专员数",type:"bar",barWidth:"40%",stack:"total",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{name:"企业数",type:"bar",barWidth:"40%",stack:"total",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},loginStatisticsChart_row:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["日","周","月"],bottom:0,itemWidth:10,itemHeight:10},color:["#6EC8EB","#56DCA5","#2E91F6"],grid:{left:"1%",right:"8%",top:"1%",bottom:"8%",containLabel:!0},xAxis:{type:"value",axisLine:{lineStyle:{width:0}},axisTick:{show:!1}},yAxis:{type:"category",data:[],axisTick:{show:!1},axisLine:{lineStyle:{color:"#CCC"}},axisLabel:{interval:0,color:"#333",formatter:function(t){return t.length<=5?t:t.substr(0,5)+"..."}}},series:[{name:"日",type:"bar",barWidth:"25%",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{name:"周",type:"bar",barWidth:"25%",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{name:"月",type:"bar",barWidth:"25%",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}]},loginStatisticsChart_column:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["日","周","月"],bottom:0,itemWidth:10,itemHeight:10},color:["#2E91F6","#FF8E01","#F56B6B"],grid:{left:"3%",right:"8%",top:"8%",bottom:"11%",containLabel:!0},xAxis:{type:"category",data:["联席办公室"],axisTick:{show:!1},axisLine:{lineStyle:{color:"#CCC"}},axisLabel:{color:"#333"}},yAxis:{type:"value",axisLine:{lineStyle:{width:0}},axisTick:{show:!1}},series:[{name:"日",type:"bar",data:[0],label:{show:!0,position:"top",textStyle:{color:"#333"}}},{name:"周",type:"bar",data:[0],label:{show:!0,position:"top",textStyle:{color:"#333"}}},{name:"月",type:"bar",data:[0],label:{show:!0,position:"top",textStyle:{color:"#333"}}}]},appealStatisticsChart:{title:{show:!1},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},color:["#0D8CED","#4DC981","#FFCD01"],series:[{name:"诉求统计",type:"pie",radius:"80%",center:["50%","45%"],data:[{value:0,name:"新增诉求"},{value:0,name:"完成诉求"},{value:0,name:"回复诉求"}],itemStyle:{normal:{label:{show:!0,position:"inner",formatter:function(t){return t.name+"\n"+t.percent.toFixed(0)+"%"},textStyle:{color:"#FFF",fontSize:15}}}}}]},interviewStatisticsChart:{title:{show:!1},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:["日","周","月"],bottom:0,itemWidth:10,itemHeight:10},color:["#0D8CED","#FF8E01","#F56B6B"],series:[{name:"走访统计",type:"pie",radius:"80%",center:["50%","45%"],data:[{value:0,name:"日"},{value:0,name:"周"},{value:0,name:"月"}],itemStyle:{normal:{label:{show:!0,position:"inner",formatter:"{c}",textStyle:{color:"#FFF",fontSize:15}}}}}]},hitsStatisticsChart:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["线上赋能","营销力赋能","融通对接"],bottom:0,itemWidth:10,itemHeight:10},color:["#5B90FA","#5AD9A6","#C33531"],grid:{left:"3%",right:"8%",top:"8%",bottom:"11%",containLabel:!0},xAxis:{type:"category",data:["日","周","月"],axisTick:{show:!1},axisLine:{lineStyle:{color:"#CCC"}},axisLabel:{color:"#333"}},yAxis:{type:"value",axisLine:{lineStyle:{width:0}},axisTick:{show:!1}},series:[{name:"线上赋能",type:"bar",data:[0,0,0],label:{show:!0,position:"top",textStyle:{color:"#333"}}},{name:"营销力赋能",type:"bar",data:[0,0,0],label:{show:!0,position:"top",textStyle:{color:"#333"}}},{name:"融通对接",type:"bar",data:[0,0,0],label:{show:!0,position:"top",textStyle:{color:"#333"}}}]}}},created:function(){this.initPage()},mounted:function(){},methods:{initPage:function(){this.getAllDept(),this.getHeadData(),this.getBusandCommData(),this.getCommLoginCount(),this.getCommLoginCountBydeptid(""),this.getVisitCount(""),this.getAppealCount("",this.appealStaSelectTime.type),this.getEmpowermentCount("")},getAllDept:function(){var a=this;dsf.http.post("fn//mobileDataAnalyze/getAllDept",{}).then(function(t){200==t.data.code?t.data.data.forEach(function(t){a.placeColumns[0].children.push({text:t.deptname,id:t.deptid})}):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},getHeadData:function(){var a=this;dsf.http.post("fn/mobileDataAnalyze/headData",{}).then(function(t){200==t.data.code?(t=t.data.data,a.baseData=[{title:"企业数",num:t.businessCount},{title:"专员数",num:t.commissionerCount},{title:"诉求新增数",num:t.appealNewCount},{title:"走访数",num:t.visitCount},{title:"赋能数",num:t.empowermentCount}]):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},getBusandCommData:function(){var s=this;dsf.http.post("fn/mobileDataAnalyze/busandcommData",{}).then(function(t){var a,e,i;200==t.data.code?(t=t.data.data,a=[],e=[],i=[],t.forEach(function(t){a.includes(t.name)||(a.push(t.name),e.push(Number(t.commissionerCount)),i.push(Number(t.businessCount)))}),s.companiesStatisticsChart.yAxis.data=a,s.companiesStatisticsChart.series[0].data=e,s.companiesStatisticsChart.series[1].data=i):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},getCommLoginCount:function(){var o=this;dsf.http.post("fn/mobileDataAnalyze/commLoginCount",{}).then(function(t){var a,e,i,s;200==t.data.code?(t=t.data.data,a=[],e=[],i=[],s=[],t.forEach(function(t){a.includes(t.name)||(a.push(t.name),e.push(Number(t.daycount)),i.push(Number(t.weekcount)),s.push(Number(t.monthcount)))}),o.loginStatisticsChart_row.yAxis.data=a,o.loginStatisticsChart_row.series[0].data=e,o.loginStatisticsChart_row.series[1].data=i,o.loginStatisticsChart_row.series[2].data=s):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},getCommLoginCountBydeptid:function(t){var a=this;dsf.http.post("fn/mobileDataAnalyze/commLoginCountBydeptid",{deptid:t}).then(function(t){200==t.data.code?(t=t.data.data,a.loginStatisticsChart_column.series[0].data=[t.daycount],a.loginStatisticsChart_column.series[1].data=[t.weekcount],a.loginStatisticsChart_column.series[2].data=[t.monthcount]):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},getAppealCount:function(t,a){var e=this;dsf.http.post("fn/mobileDataAnalyze/appealCount",{deptid:t,type:a}).then(function(t){200==t.data.code?(t=t.data.data,e.appealStatisticsChart.series[0].data[0].value=[Number(t.newcount)],e.appealStatisticsChart.series[0].data[1].value=[Number(t.finishcount)],e.appealStatisticsChart.series[0].data[2].value=[Number(t.replycount)]):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},getVisitCount:function(t){var a=this;dsf.http.post("fn/mobileDataAnalyze/visitCount",{deptid:t}).then(function(t){200==t.data.code?(t=t.data.data,a.interviewStatisticsChart.series[0].data[0].value=[Number(t.daycount)],a.interviewStatisticsChart.series[0].data[1].value=[Number(t.weekcount)],a.interviewStatisticsChart.series[0].data[2].value=[Number(t.monthcount)]):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},getEmpowermentCount:function(t){var s=this;dsf.http.post("fn/mobileDataAnalyze/empowermentCount",{deptid:t}).then(function(t){var a,e,i;200==t.data.code?(t=t.data.data,a=[0,0,0],e=[0,0,0],i=[0,0,0],t.forEach(function(t){a[Number(t.type)-1]=t["上线赋能"],e[Number(t.type)-1]=t["营销力赋能"],i[Number(t.type)-1]=t["融通对接"]}),s.hitsStatisticsChart.series[0].data=a,s.hitsStatisticsChart.series[1].data=e,s.hitsStatisticsChart.series[2].data=i):dsf.layer.toast("获取数据失败,请稍后再试")}).catch(function(t){return i.log(t)})},openPlaceSelectPopup:function(t){this.currentChart=t,this.isShowPlaceSelectPopup=!0},placePickerConfirm:function(t,a){switch(this.chartPlaceList[this.currentChart]=this.placeColumns[0].children[a[1]],this.currentChart){case 0:this.getCommLoginCountBydeptid(this.chartPlaceList[this.currentChart].id);break;case 1:this.getAppealCount(this.chartPlaceList[this.currentChart].id,this.appealStaSelectTime.type);break;case 2:this.getVisitCount(this.chartPlaceList[this.currentChart].id);break;case 3:this.getEmpowermentCount(this.chartPlaceList[this.currentChart].id)}this.isShowPlaceSelectPopup=!1,this.currentChart=null},timePickerConfirm:function(t,a){this.appealStaSelectTime=this.timeColumns[a],this.getAppealCount(this.chartPlaceList[1].id,this.appealStaSelectTime.type),this.isShowTimeSelectPopup=!1}}},s=(0,e(51900).Z)(a,function(){var e=this,i=e._self._c;return i("div",{attrs:{id:"data-analysis"}},[i("van-nav-bar",{attrs:{title:"驾驶舱","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}}),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"bg-circle"}),e._v(" "),i("van-tabs",[i("van-tab",{attrs:{title:"数据看板"}},[i("div",{staticClass:"header-container"},e._l(e.baseData,function(t,a){return i("div",{key:a},[i("p",{staticClass:"header-item-title"},[e._v(e._s(t.title))]),e._v(" "),i("p",{staticClass:"font_18"},[e._v(e._s(t.num))])])}),0),e._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"title"},[i("span",[e._v("专员企业统计")])]),e._v(" "),i("div",{staticClass:"chart-container-long"},[i("v-chart",{attrs:{options:e.companiesStatisticsChart}})],1)]),e._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"title"},[i("span",[e._v("专员登录统计")])]),e._v(" "),i("div",{staticClass:"chart-container-long"},[i("v-chart",{attrs:{options:e.loginStatisticsChart_row}})],1)]),e._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"flex jb ac"},[i("div",{staticClass:"title"},[i("span",[e._v("专员登录统计")])]),e._v(" "),i("div",{staticClass:"flex ac mar-bottom_10 color_blue font_15",on:{click:function(t){return e.openPlaceSelectPopup(0)}}},[i("span",[e._v(e._s("全部地区"==e.chartPlaceList[0].text?"上海市":e.chartPlaceList[0].text))]),e._v(" "),e.isShowPlaceSelectPopup&&0==e.currentChart?i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-up"}}):i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-down"}})],1)]),e._v(" "),i("div",{staticClass:"chart-container-normal"},[i("v-chart",{attrs:{options:e.loginStatisticsChart_column}})],1)]),e._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"flex jb ac"},[i("div",{staticClass:"title"},[i("span",[e._v("诉求统计")])]),e._v(" "),i("div",{staticClass:"flex"},[i("div",{staticClass:"flex ac mar-bottom_10 color_blue font_15",on:{click:function(t){e.isShowTimeSelectPopup=!0}}},[i("span",[e._v(e._s(e.appealStaSelectTime.text))]),e._v(" "),e.isShowTimeSelectPopup?i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-up"}}):i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-down"}})],1),e._v(" "),i("div",{staticClass:"flex ac mar-bottom_10 color_blue font_15 mar-left_3",on:{click:function(t){return e.openPlaceSelectPopup(1)}}},[i("span",[e._v(e._s("全部地区"==e.chartPlaceList[1].text?"上海市":e.chartPlaceList[1].text))]),e._v(" "),e.isShowPlaceSelectPopup&&1==e.currentChart?i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-up"}}):i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-down"}})],1)])]),e._v(" "),i("div",{staticClass:"chart-container-normal"},[i("v-chart",{attrs:{options:e.appealStatisticsChart}})],1)]),e._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"flex jb ac"},[i("div",{staticClass:"title"},[i("span",[e._v("走访统计")])]),e._v(" "),i("div",{staticClass:"flex ac mar-bottom_10 color_blue font_15",on:{click:function(t){return e.openPlaceSelectPopup(2)}}},[i("span",[e._v(e._s("全部地区"==e.chartPlaceList[2].text?"上海市":e.chartPlaceList[2].text))]),e._v(" "),e.isShowPlaceSelectPopup&&2==e.currentChart?i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-up"}}):i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-down"}})],1)]),e._v(" "),i("div",{staticClass:"chart-container-normal"},[i("v-chart",{attrs:{options:e.interviewStatisticsChart}})],1)]),e._v(" "),i("div",{staticClass:"card"},[i("div",{staticClass:"flex jb ac"},[i("div",{staticClass:"title"},[i("span",[e._v("赋能点击量统计")])]),e._v(" "),i("div",{staticClass:"flex ac mar-bottom_10 color_blue font_15",on:{click:function(t){return e.openPlaceSelectPopup(3)}}},[i("span",[e._v(e._s("全部地区"==e.chartPlaceList[3].text?"上海市":e.chartPlaceList[3].text))]),e._v(" "),e.isShowPlaceSelectPopup&&3==e.currentChart?i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-up"}}):i("van-icon",{staticClass:"mar-left_3",attrs:{name:"arrow-down"}})],1)]),e._v(" "),i("div",{staticClass:"chart-container-normal"},[i("v-chart",{attrs:{options:e.hitsStatisticsChart}})],1)])]),e._v(" "),i("van-tab",{attrs:{title:"政策看板"}},[i("iframe",{staticClass:"my-iframe",attrs:{src:"http://101.227.181.59/dingding/#/Kanban",frameborder:"0"}})])],1)],1),e._v(" "),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowPlaceSelectPopup,callback:function(t){e.isShowPlaceSelectPopup=t},expression:"isShowPlaceSelectPopup"}},[i("van-picker",{attrs:{"show-toolbar":"",title:"修改市区",columns:e.placeColumns},on:{cancel:function(t){e.isShowPlaceSelectPopup=!1},confirm:e.placePickerConfirm}})],1),e._v(" "),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.isShowTimeSelectPopup,callback:function(t){e.isShowTimeSelectPopup=t},expression:"isShowTimeSelectPopup"}},[i("van-picker",{attrs:{"show-toolbar":"",title:"修改时间",columns:e.timeColumns},on:{cancel:function(t){e.isShowTimeSelectPopup=!1},confirm:e.timePickerConfirm}})],1)],1)},[],!1,null,"031bd3d6",null).exports}}]);