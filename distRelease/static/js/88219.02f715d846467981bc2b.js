"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[88219],{88219:function(t,e,i){i.r(e),i.d(e,{default:function(){return a}});var e=i(79529),n=i.n(e),e=i(30007),s=i(25108),e={name:"fgwNews",components:{fgwheader:e.Z},data:function(){return{kind:1,commNews:[],imgnews:[],tongzhi:[],weinei:[],wnIndex:0,tzIndex:0,listId:"",moduleId:"",picNewsId:"",picNewsName:"",vertical:!1,showSwiper:!0}},computed:{},watch:{},methods:{checkScreen:function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;this.vertical=!(e<t)},changeTab:function(t,e){this.tabIndex=e},initNews:function(){this.commNews=[],this.imgnews=[],this.tongzhi=[],this.weinei=[];var e=this;dsf.http.post("fn/developmentOffice/insiderNews",{kind:this.kind}).done(function(t){s.log(t),"200"==t.code&&(e.commNews=t.data.commNews,e.imgnews=t.data.imgnews,e.picNewsId=t.data.picNewsId,e.picNewsName=t.data.picNewsName,t.data.tongzhi.forEach(function(t){t.arcList.forEach(function(t){t.time=moment(new Date(t.time)).format("YYYY-MM-DD")})}),e.tongzhi=t.data.tongzhi,t.data.weinei.forEach(function(t){t.arcList.forEach(function(t){t.time=moment(new Date(t.time)).format("YYYY-MM-DD")})}),e.weinei=t.data.weinei,e.listId=t.data.listId,e.moduleId=t.data.moduleId)}).error(function(t){})},goDetail:function(t){this.$router.push({name:"commonForm",params:{pk:t.id,moduleId:this.moduleId},query:{listId:this.listId}})},goTzDetail:function(){this.$router.push({name:"commonList",params:{listId:this.listId,moduleId:this.moduleId},query:{LMTYPE:this.tongzhi[this.tzIndex].id,title:this.tongzhi[this.tzIndex].tabName}})},haddleNewsClick:function(){this.$router.push({name:"commonList",params:{listId:this.listId,moduleId:this.moduleId},query:{LMTYPE:this.picNewsId,title:this.picNewsName}})},goWnDetail:function(){this.$router.push({name:"commonList",params:{listId:this.listId,moduleId:this.moduleId},query:{LMTYPE:this.weinei[this.wnIndex].id,title:this.weinei[this.wnIndex].tabName}})},initData:function(){var e=this;dsf.http.post("/fn/developmentOffice/getUserInfo",{},{headers:{"Content-Type":"application/json"}}).done(function(t){t=t.data;t&&t.roleIds&&(0<=t.roleIds.indexOf("230627095759f5cY667vnP31Rv0eK8c")?e.leaderType=3:0<=t.roleIds.indexOf("230627095352FHXYAXqiebsqC4ARTHS")?e.leaderType=2:e.leaderType=1,e.kind=n()(e.leaderType)-1),e.initNews()}).error(function(t){alert("未获取到用户信息")})}},created:function(){},mounted:function(){var t=this;this.initData(),this.checkScreen(),window.addEventListener("resize",function(){t.checkScreen(),t.showSwiper=!1,setTimeout(function(){t.showSwiper=!0,t.$nextTick()},500)})},activated:function(){this.initData()},destroyed:function(){}},a=(0,i(51900).Z)(e,function(){var i=this,n=i._self._c;return n("div",{staticClass:"fgwDB",class:{verticalx:i.vertical}},[n("fgwheader",{on:{reflush:i.initNews}}),i._v(" "),n("div",{staticClass:"fcontain",class:{vertical:i.vertical}},[n("div",{staticClass:"swipernews"},[i.showSwiper?n("div",{staticClass:"swiperbox"},[n("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"white"}},i._l(i.imgnews,function(e,t){return n("van-swipe-item",{key:"imgnews"+t,on:{click:function(t){return i.goDetail(e)}}},[n("img",{attrs:{src:i.dsf.url.getWebPath(e.IMAGEURL)}}),i._v(" "),n("p",[n("span",[i._v(i._s(e.TITLE))])])])}),1),i._v(" "),n("div",{staticClass:"swipermore",on:{click:i.haddleNewsClick}},[i._v("更多")])],1):i._e(),i._v(" "),n("div",{staticClass:"newslist"},[n("div",{staticClass:"newsTab"},[n("p",{staticClass:"tab"},i._l(i.weinei,function(t,e){return n("span",{key:t.id,class:{active:i.wnIndex==e},on:{click:function(t){i.wnIndex=e}}},[i._v(i._s(t.tabName))])}),0),i._v(" "),n("p",{staticClass:"more",on:{click:i.goWnDetail}},[n("img",{attrs:{src:"static/images/project/fgwPad/more.png",alt:""}}),i._v(" "),n("span",[i._v("更多")])])]),i._v(" "),i._l(i.weinei,function(t,e){return n("div",{directives:[{name:"show",rawName:"v-show",value:i.wnIndex==e,expression:"wnIndex==index"}],key:"w"+e,staticClass:"newsArt"},i._l(t.arcList,function(e,t){return n("div",{key:e.id,staticClass:"newsArtItem",on:{click:function(t){return i.goDetail(e)}}},[n("div",{staticClass:"title",class:{new:e.whetherNew}},[n("span",{staticClass:"bt"},[i._v(i._s(e.bt))]),i._v(" "),n("span",{staticClass:"timer"},[i._v(i._s(e.time))])])])}),0)})],2)]),i._v(" "),n("div",{staticClass:"newsRight bomarc"},[n("div",{staticClass:"newslist"},[n("div",{staticClass:"newsTab"},[n("p",{staticClass:"tab"},i._l(i.tongzhi,function(t,e){return n("span",{key:t.id,class:{active:i.tzIndex==e},on:{click:function(t){i.tzIndex=e}}},[i._v(i._s(t.tabName))])}),0),i._v(" "),n("p",{staticClass:"more",on:{click:i.goTzDetail}},[n("img",{attrs:{src:"static/images/project/fgwPad/more.png",alt:""}}),i._v(" "),n("span",[i._v("更多")])])]),i._v(" "),i._l(i.tongzhi,function(t,e){return n("div",{directives:[{name:"show",rawName:"v-show",value:i.tzIndex==e,expression:"tzIndex==index"}],key:"tz"+e,staticClass:"newsArt"},i._l(t.arcList,function(e,t){return n("div",{key:e.id,staticClass:"newsArtItem",on:{click:function(t){return i.goDetail(e)}}},[n("div",{staticClass:"title",class:{new:e.whetherNew}},[e.TYPE?n("label",[i._v("["+i._s(e.TYPE)+"]")]):i._e(),i._v(" "),n("span",{staticClass:"bt"},[i._v(i._s(e.bt))]),i._v(" "),n("span",{staticClass:"timer"},[i._v(i._s(e.time))])])])}),0)})],2)])])],1)},[],!1,null,"4378b806",null).exports},30007:function(t,e,i){i.d(e,{Z:function(){return n}});var e=i(79529),c=i.n(e),o=i(25108),e={name:"headerimg",props:{showBack:{type:!1,default:!1}},components:{},data:function(){return{vertical:!1}},computed:{},watch:{},methods:{goBack:function(){this.$router.go(-1)},checkScreen:function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;this.vertical=!(e<t)},initSize:function(){var t,e=window.document,s=e.documentElement,i="orientationchange"in window?"orientationchange":"resize",a="",n=function t(){var e,i,n=s.getBoundingClientRect().width;return a&&a==n||(a=n,n=dsf.util.loadLocalStore("multiple")||dsf.util.loadLocalStore("fontSizeMultiple")||5,e=document.documentElement.clientWidth,i=document.documentElement.clientHeight,-1<window.location.href.indexOf("meetingPad")?s.style.fontSize=a/51.2+"px":-1<window.location.href.indexOf("shGovSM")||i<e&&(-1<window.location.href.indexOf("deptNews")||-1<window.location.href.indexOf("fgwStaging")||-1<window.location.href.indexOf("fgwPad"))?(i=s.clientWidth/128*5,s.style.fontSize=i+"px"):s.style.fontSize=Math.max(Math.min(a/750*20,11.2),8.55)*n+"px"),t}();try{s.setAttribute("data-dpr",window.navigator.appVersion.match(/iphone/gi)?window.devicePixelRatio:1),1<window.navigator.userAgent.indexOf("like Mac OS X")&&(e.documentElement.classList.add("ios"),1<(t=navigator.appVersion?navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/):[]).length)&&8<=c()(t[1],10)&&e.documentElement.classList.add("hairline"),e.addEventListener&&(window.addEventListener(i,n,!1),e.addEventListener("DOMContentLoaded",n,!1))}catch(t){o.log(t)}}},created:function(){},mounted:function(){var t=this;this.checkScreen(),window.addEventListener("resize",function(){t.initSize(),t.checkScreen()})},destroyed:function(){}},n=(0,i(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"headerimg",class:{vertical:e.vertical}},[e._m(0),e._v(" "),t("div",{staticClass:"btns"},[t("span",{staticClass:"reflush",on:{click:function(t){return e.$emit("reflush")}}},[e._v("刷新")]),e._v(" "),e.showBack?t("span",{staticClass:"reflush",on:{click:e.goBack}},[e._v("返回")]):e._e()])])},[function(){var t=this._self._c;return t("div",{staticClass:"logoDiv"},[t("img",{staticClass:"logo",attrs:{src:"static/images/project/fgwPad/gh.png",alt:"",srcset:""}}),this._v(" "),t("img",{staticClass:"logo",attrs:{src:"static/images/project/fgwPad/title.png",alt:"",srcset:""}})])}],!1,null,"09294748",null).exports}}]);