"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[89200],{89200:function(e,o,a){a.r(o),a.d(o,{default:function(){return s}});var o=a(8450),t=a.n(o),n=a(88561),i=a(62596),r=a(25108),o={name:"hljPad_login",data:function(){return{username:"",password:"",remember_login:!1,DeviceId:"postman",DeviceName:"postman",style_focus:""}},created:function(){this.remember_login=n.Z.loadLocalStore("autoLogin"),this.remember_login&&(this.username=i.Z.decode(n.Z.loadLocalStore("userName")),this.password=i.Z.decode(n.Z.loadLocalStore("passWord")),this.login())},mounted:function(){var a=this;window.onresize=function(){r.log("窗口变化了",document.body.clientHeight,document.documentElement.clientHeight,window.innerHeight,window.screen.height);var e=window.innerHeight,o=window.screen.height;a.style_focus=100<o-e?" transform: translateY(0);top:".concat(a.top_px+5,"px"):""},this.$nextTick(function(){r.log(a.$refs.logImg.offsetHeight),a.top_px=a.$refs.logImg.offsetHeight})},methods:{login:function(){var e,a,s;this.username?this.password?(e={__DATA:t()({logname:this.username,password:this.password,device_id:this.DeviceId,device_desc:this.DeviceName})},a=dsf.layer.loading("登录中..."),s=this,dsf.http.post("/fn/mobileAuth/login",e).then(function(e){var o;dsf.layer.closeLoading(a),n.Z.saveToLocalStore("lastLoginType","user"),1==e.data.rcode?(n.Z.saveToLocalStore("uid",i.Z.encode(s.username)),n.Z.saveToLocalStore("pid",i.Z.encode(s.password)),n.Z.saveToLocalStore("autoLogin",s.remember_login),n.Z.saveToLocalStore("userName",i.Z.encode(s.username)),n.Z.saveToLocalStore("passWord",i.Z.encode(s.password)),r.log(s.username,s.password),o=e.data,s.loginSuccessDeal(o)):2==e.data.rcode?(dsf.util.saveToSessionStore("user",{user_id:e.data.data}),dsf.util.saveToSessionStore("homePage","/changePassWord"),s.$router.replace("/changePassWord")):s.autoLogin=!1,dsf.layer.toast(e.data.message)}).error(function(e){dsf.layer.closeLoading(s.loading),-1<e.message.indexOf("404")&&dsf.layer.toast("登录接口异常，请联系系统管理员！")}).always(function(){})):dsf.layer.toast("请输入密码"):dsf.layer.toast("请输入用户名")},loginSuccessDeal:function(e){var o=e.data;n.Z.saveToSessionStore("user",o),n.Z.saveToSessionStore("loginToken",o.auth.token),n.Z.saveToLocalStore("loginToken",o.auth.token),n.Z.saveToLocalStore("user",o),n.Z.saveToLocalStore("loginData",e),this.goUrl()},goUrl:function(){dsf.config.login.defaultUrl?this.$router.replace(dsf.config.login.defaultUrl):this.$router.replace("/hljPadIndex")}}},s=(0,a(51900).Z)(o,function(){var o=this,e=o._self._c;return e("div",{attrs:{id:"hljPad_login"}},[e("img",{ref:"logImg",attrs:{src:"static/images/hljMedicine/login_logo.png",alt:""}}),o._v(" "),e("div",{staticClass:"login_body",style:o.style_focus},[e("span",{staticClass:"welcome"},[o._v("欢迎登录")]),o._v(" "),e("p",[o._v("登录")]),o._v(" "),e("van-field",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:o.username,callback:function(e){o.username=e},expression:"username"}}),o._v(" "),e("van-field",{staticClass:"pass_box",attrs:{type:"password",placeholder:"请输入密码",clearable:""},model:{value:o.password,callback:function(e){o.password=e},expression:"password"}}),o._v(" "),e("van-checkbox",{staticClass:"check_login",attrs:{"checked-color":"#1989fa"},model:{value:o.remember_login,callback:function(e){o.remember_login=e},expression:"remember_login"}},[o._v("\n            自动登录\n        ")]),o._v(" "),e("button",{staticClass:"login_button",on:{click:o.login}},[o._v("立即登录")])],1)])},[],!1,null,"705aae2c",null).exports}}]);