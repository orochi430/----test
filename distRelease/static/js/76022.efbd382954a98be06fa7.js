"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[76022],{61121:function(t,a,e){e.r(a);var s=e(522),o=e(43562),f=e.n(o),o=e(8450),i=e.n(o),o=e(73473),n=e.n(o),m=e(90541),l=(e(88561),e(25108)),o={handle:function(t,a,e,o,n){}};o.initHandle=function(t,e,u,a){l.log("假日带班"),u.$bus.on("selectUserBus",function(o){l.log(o);for(var n,a=0,r=f()(e.subform);a<r.length;a++)!function(){var t=(0,s.Z)(r[a],2),e=t[0];t[1].controls.forEach(function(t,a){t.controlId==o.metaData.controlId&&(n=e)})}();m.Z.http.post("fn/report/getUser?userid=".concat(o.value)).then(function(t){t=t.data;l.log(t),l.log(n),"201125171940SLO7uHSPxNyiAZ3sh1O"==n?u.$set(u.formData.multinfos[n].rows[o.subFormIndex].B0038,"value",t.data.fax):(u.$set(u.formData.multinfos[n].rows[o.subFormIndex].B0036,"value",t.data.zj),u.$set(u.formData.multinfos[n].rows[o.subFormIndex].B0038,"value",t.data.mobile)),u.$set(u.formData.multinfos[n].rows[o.subFormIndex].B0012,"value",t.data.tel)})}),m.Z.http.post("fn/report/getJrabSubTitle").then(function(t){var e,t=t.data;"200"==t.code&&(u.$set(u.formData.main,"B0025",{value:t.message}),e=t.message.split(","),u.formData.subformKeys.forEach(function(t,a){u.$set(u.formMeta.subform[t],"name",e[a])}))}),t.main["G-REPORT-005"]||(m.Z.http.post("fn/report/getUser?userid=".concat(m.Z.util.loadSessionStore("user").user_id)).then(function(t){t=t.data;l.log(t),u.$set(u.formData.main,"B0038",{value:t.data.mobile}),u.$set(u.formData.main,"B0012",{value:t.data.tel})}),l.log(u.formData.main),m.Z.http.post("fn/report/getZbinit").then(function(t){var a=t.data;if((a=a.data).holidayId){u.$set(u.formData.main,"G-REPORT-001",{value:a.dlqy,text:a.dlqyText}),u.$set(u.formData.main,"B0024",{value:a.fbcc,text:a.fbcc}),u.$set(u.formData.main,"G-REPORT-007",{value:a.start}),u.$set(u.formData.main,"G-REPORT-008",{value:a.end}),u.$set(u.formData.main,"B0001",{value:u.formData.main.A0024.value+a.year+"年"+a.holidayName+"值班带班表"}),u.$set(u.formData.main,"G-REPORT-005",{value:a.holidayId,text:a.holidayName});for(var e=function(){var t=(0,s.Z)(l[o],2),n=t[0],r=(t[1],u.allformMeta.subform[n].controls.filter(function(t){return"controlSubFormPrimary"==t.controlType})[0]);a.dates.forEach(function(o,t){m.Z.http.get("fn/common/generateUUID?size=1").then(function(t){var a,t=t.data,e={};a=r.defaultValue,(e=JSON.parse(i()(a)))[n]={},e[n].value=t.data.UUID,e[n].foreign=u.formData.main.A0001.value,e["G-REPORT-SUB-001"]={value:o},e["G-REPORT-SUB-003"]={value:""},u.allformMeta.subform[n].controls.filter(function(t){return"controlSubFormPrimary"!=t.controlType}).forEach(function(t){e[t.metaId]||(e[t.metaId]={value:""})}),e.action="Added",u.$set(u.multinfos[n].rows,u.multinfos[n].rows.length,e)})})},o=0,l=f()(u.formData.multinfos);o<l.length;o++)e()}else m.Z.layer.toast("暂无最新节假日需要安排值班，请联系管理员!"),u.$router.go(-1)}))},o.saveFilter=function(t,a,e,o){return new(n())(function(t,a){try{t()}catch(t){l.log(t),a(t)}})},a.default=o}}]);