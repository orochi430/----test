"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[69642,56229,51669],{56229:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n,t=a(62680),s=a.n(t),t=a(95366),r=a.n(t),t=a(6919),i=a.n(t),o=a(66250),c=a(77193),t=a(33453),l=a.n(t),t=a(8450),u=a.n(t),t=a(26243),p=a.n(t),t=a(20629),h=a(2728),d=a(25108);function f(t,e){var a,i=p()(t);return s()&&(a=s()(t),e&&(a=a.filter(function(e){return r()(t,e).enumerable})),i.push.apply(i,a)),i}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach(function(e){(0,c.Z)(t,e,a[e])}):i()?Object.defineProperties(t,i()(a)):f(Object(a)).forEach(function(e){Object.defineProperty(t,e,r()(a,e))})}return t}var t={props:["value","tabKey","checkable","checkType","oppsetTop","tabOppsetTop"],name:"customTabs",model:{prop:"value",event:"input"},components:{defaultList:function(){return Promise.all([a.e(17672),a.e(50856),a.e(63560),a.e(63450),a.e(9303),a.e(74023),a.e(96345),a.e(39946),a.e(1696),a.e(14355)]).then(a.bind(a,14355))},tabTodo:function(){return Promise.all([a.e(17672),a.e(50856),a.e(63560),a.e(9303),a.e(74023),a.e(96345),a.e(33274),a.e(28038)]).then(a.bind(a,33274))},jiangsuyancaoTable:function(){return Promise.all([a.e(26573),a.e(9193)]).then(a.bind(a,26573))},commonForm:function(){return Promise.all([a.e(17672),a.e(42152),a.e(50856),a.e(63560),a.e(63450),a.e(9303),a.e(74023),a.e(96345),a.e(49852),a.e(39946),a.e(1696),a.e(14355),a.e(59655),a.e(86720),a.e(40954),a.e(58930),a.e(13852),a.e(85027),a.e(59146),a.e(80809)]).then(a.bind(a,32444))},ElecHomePage:function(){return a.e(16848).then(a.bind(a,16848))},diskFile:function(){return Promise.all([a.e(97805),a.e(82060),a.e(89590)]).then(a.bind(a,45411))},cdReportIndex:function(){return a.e(8124).then(a.bind(a,8124))}},data:function(){return{active:0,tabParams:{},tabsPage:!1,clickTabIndex:0,routeKey:"",tabsConfig:null,tempKeyWord:"",realKeyWord:"",docTitle:"",showDetailBadge:!1,sticky:!0,goSearchRoute:this.$route.query.goSearch}},computed:m({},(0,t.rn)({isShowAppFooter:function(e){return e.isShowAppFooter},isShowAppHeader:function(e){return e.isShowAppHeader}})),activated:function(){h.Z.setTitle(this.docTitle),this.refreshBadge(this.active),this.tabsConfig.url&&1==this.tabsConfig.tabslist.length&&(this.oppsetTop=dsf.util.getOffsetTop("0.92rem"))},created:function(){var i=this;return(0,o.Z)(l().mark(function e(){var t,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=i).$route.query.active&&(i.active=Number(i.$route.query.active)),t=dsf.config.commonTabs,i.routeKey=i.tabKey||i.$route.params.key,i.tabsConfig=t[i.routeKey],i.tabsConfig.url)return e.next=8,dsf.http.post(i.tabsConfig.url).then(function(e){200==e.data.code&&(i.tabsConfig.tabslist=e.data.data,1==i.tabsConfig.tabslist.length)&&(i.sticky=!1,setTimeout(function(){$(".commontabs > .van-tabs__wrap").css("display","none"),i.oppsetTop=dsf.util.getOffsetTop("0.92rem")},100))});e.next=8;break;case 8:i.tabsConfig&&(i.docTitle=i.$route.query.title||i.tabsConfig.remark,i.showDetailBadge=i.tabsConfig.showDetailBadge||!1,h.Z.setTitle(i.docTitle),i.tabParams=JSON.parse(u()(i.tabsConfig)),a=[],i.tabParams.tabslist.forEach(function(e){var t=m({},e);t.params&&p()(t.params).forEach(function(e){t.params[e]=dsf.util.getReplaceUrl(t.params[e])}),t.badgeUrl&&(t.badgeUrl=dsf.util.getReplaceUrl(t.badgeUrl),dsf.http.get(t.badgeUrl).then(function(e){i.$delete(t,"badge");e=e.data.total||e.data.badge||e.data.data;i.$set(t,"badge",e)})),t.countUrl&&(t.countUrl=dsf.util.getReplaceUrl(t.countUrl),dsf.http.get(t.countUrl).then(function(e){i.$delete(t,"count");e=e.data.total||e.data.badge||e.data.data;i.$set(t,"count",e)})),t.privilege?null!=(e=dsf.util.loadSessionStore("user"))&&e.privileges.some(function(e){return e.name==t.privilege})&&a.push(t):null!=(e=dsf.util.loadSessionStore("user"))&&e.privileges.some(function(e){return e.name==t.noPrivilege})||a.push(t)}),i.tabParams.tabslist=a),i.$eventBus.onRefreshBadge(i,function(e){i.refreshBadge(e)});case 10:case"end":return e.stop()}},e)}))()},filters:{badgeCount:function(e){return 100<e?n.showDetailBadge?e:"99+":e<1?"":e}},methods:{refreshBadge:function(a){var i=this;this.tabParams.tabslist.forEach(function(t,e){!t.badgeUrl||null!=a&&a!=e||dsf.http.get(t.badgeUrl).then(function(e){e=e.data.total||e.data.badge||e.data.data;i.$set(t,"badge",e)}),!t.countUrl||null!=a&&a!=e||dsf.http.get(t.countUrl,{}).then(function(e){e=e.data.total||e.data.badge||e.data.data;i.$set(t,"count",e)})})},tabChange:function(e,t){d.log(e+"---"+t),this.clickTabIndex=e},onSearch:function(){this.realKeyWord=this.tempKeyWord},onFocus:function(){this.goSearchRoute&&this.$router.push({name:this.goSearchRoute})},cancelCheck:function(){this.$emit("cancelCheck")},confirmCheck:function(e){this.$emit("confirmCheck",e)}},deactivated:function(){var e,t,a=this,i=this;["jiangsuyancaoNewsDetail"].filter(function(e){return e==a.$route.name}).length,dsf.config.setting["SYS-MOBILE-FORM-0020"]&&(e=dsf.config.setting["SYS-MOBILE-FORM-0020"].split(","),t=!1,e.forEach(function(e){i.$route.path.toLowerCase()==e&&(t=!0)}),t)&&(i.$eventBus.Off(this,"refreshBadge"),i.$deleteCache(this))},beforeRouteLeave:function(e,t,a){var i;"commonList"!=e.name&&"index"!=e.name&&"wanHome"!=e.name&&!e.name.toLowerCase().includes("index")||(this.$eventBus.Off(this,"refreshBadge"),i=this,setTimeout(function(){i.$deleteCache(i)},500)),a()}},g=(0,a(51900).Z)(t,function(){var a=this,i=a._self._c;return i("div",{attrs:{id:"common-tabs"}},[a.tabsConfig&&a.tabsConfig.showSearchBox?i("van-search",{attrs:{"show-action":"",placeholder:"请输入查询信息","left-icon":"",clearable:!1},on:{search:a.onSearch,focus:a.onFocus},scopedSlots:a._u([{key:"right-icon",fn:function(){return[i("div",{staticClass:"flex ac",on:{click:a.onSearch}},[i("van-icon",{attrs:{name:"search",size:"0.44rem"}})],1)]},proxy:!0},{key:"action",fn:function(){},proxy:!0}],null,!1,2275234293),model:{value:a.tempKeyWord,callback:function(e){a.tempKeyWord=e},expression:"tempKeyWord"}}):a._e(),a._v(" "),i("van-tabs",{staticClass:"commontabs",attrs:{sticky:a.sticky,"offset-top":a.tabOppsetTop?a.dsf.util.getOffsetTop(a.tabOppsetTop):a.dsf.util.getOffsetTop(),swipeable:"","swipe-threshold":""},on:{change:a.tabChange},model:{value:a.active,callback:function(e){a.active=e},expression:"active"}},a._l(a.tabParams.tabslist,function(e,t){return i("van-tab",{key:t,attrs:{title:"tabs"+e.name,badge:a._f("badgeCount")(e.badge),name:t},scopedSlots:a._u([{key:"title",fn:function(){return[e.icon?i("van-icon",{attrs:{name:e.icon}}):a._e(),a._v(" "),i("span",[a._v(a._s(e.name))]),e.count?i("span",[a._v("("+a._s(a._f("badgeCount")(e.count))+")")]):a._e()]},proxy:!0}],null,!0)},[a._v(" "),"defaultList"==e.goRoute?i("keep-alive",[i("default-list",{attrs:{currentTabs:t,params:e,tabsPage:a.tabsPage,clickTabIndex:a.clickTabIndex,routeKey:a.routeKey,mainKeyWord:a.realKeyWord,oppsetTop:a.oppsetTop||(a.isShowAppHeader?"1.8rem":"0.88rem"),checkable:a.checkable,"check-type-pop":a.checkType},on:{cancelCheck:a.cancelCheck,confirmCheck:a.confirmCheck}})],1):"jiangsuyancaoTable"==e.goRoute?i("jiangsuyancao-table",{attrs:{params:e,oppsetTop:a.isShowAppHeader?"1.8rem":"0.88rem"}}):"elecHomePage"==e.goRoute?i("keep-alive",[i("ElecHomePage",{attrs:{clickTabIndex:a.clickTabIndex,currentTabs:t,tabParams:a.tabParams.tabslist[a.clickTabIndex]}})],1):"commonForm"==e.goRoute?i("commonForm",{attrs:{currentTabs:t,clickTabIndex:a.clickTabIndex,_moduleId:e.params.moduleId,_pk:e.params.pk,_formId:e.params.formId,_params:e.params||{}}}):"diskFile"==e.goRoute?i("diskFile",{attrs:{currentTabs:t,clickTabIndex:a.clickTabIndex,params:e,mainKeyWord:a.realKeyWord}}):"cdReportIndex"==e.goRoute?i("keep-alive",[i("cdReportIndex",{attrs:{currentTabs:t,clickTabIndex:a.clickTabIndex,params:e,mainKeyWord:a.realKeyWord}})],1):i("tab-todo",{attrs:{params:e}})],1)}),1)],1)},[],!1,null,"e00f8b7e",null).exports},7300:function(e,t,a){a.d(t,{Z:function(){return i}});var t={name:"appSwiper",props:{swiper:{type:Object}},data:function(){return{isShow:!1,isShowSetting:!1,isShowUrl:!1,swipeImages:[],swipeItems:[],autoplay:3e3,height:"30vh",currentText:""}},mounted:function(){var t=this;this.swiper.percent?this.height=document.documentElement.clientWidth/this.swiper.percent.split(":")[0]*this.swiper.percent.split(":")[1]+"px":this.height=this.swiper.height?"".concat(this.swiper.height).concat(this.swiper.isPercent?"vh":"px"):this.height,this.autoplay=this.swiper.autoplay||this.autoplay,this.swiper.url?(this.isShowUrl=!0,dsf.http.get(this.swiper.url).then(function(e){t.swipeItems=e.data.data,t.swipeItems.forEach(function(e){e.imgSrcShow=t.getPhotoSrc(e.imgSrc)}),t.isShow=t.swiper.isShow&&0<t.swipeItems.length,t.currentText=0<t.swipeItems.length?t.swipeItems[0].title:""})):(this.swipeImages=this.swiper.imgUrls,this.isShowSetting=!0,this.isShow=this.swiper.isShow&&0<this.swipeImages.length)},methods:{onChange:function(e){this.currentText=this.swipeItems[e].title},getPhotoSrc:function(e){return-1<(e=dsf.url.getWebPath(e)).indexOf("?")?e+="&time=".concat((new Date).getTime()):e+="?time=".concat((new Date).getTime()),e},openUrl:function(e){var t;""!=e.address&&(0==e.address.indexOf("http")||0==e.address.indexOf("https")?(t=dsf.util.getReplaceUrl(e.address),this.$router.push({name:"dsfIframe",params:{url:t,title:e.title},query:{url:t,title:e.title}})):0==e.address.indexOf("SDDYNewsDetail")?this.$router.push({path:"/SDDYNewsDetail",query:{infoId:e.infoId}}):this.$router.push({path:e.address}))}}},i=(0,a(51900).Z)(t,function(){var a=this,i=a._self._c;return a.isShow?i("div",{staticClass:"my-swipe",class:{hasPadding:a.swiper.hasPadding}},[a.isShowSetting&&a.swipeImages&&0<a.swipeImages.length?i("van-swipe",{attrs:{autoplay:a.autoplay,"indicator-color":a.swiper.indicatorColor||"white"}},a._l(a.swipeImages,function(e,t){return i("van-swipe-item",{key:t},[i("img",{style:{height:a.height,objectFit:"fill"},attrs:{src:e}})])}),1):a._e(),a._v(" "),a.isShowUrl&&a.swipeItems.length?i("van-swipe",{attrs:{autoplay:a.autoplay,"indicator-color":a.swiper.indicatorColor||"white"},on:{change:a.onChange},scopedSlots:a._u([a.currentText.length?{key:"indicator",fn:function(){return[i("div",{staticClass:"custom-indicator"},[a._v(a._s(a.currentText))])]},proxy:!0}:null],null,!0)},a._l(a.swipeItems,function(t,e){return i("van-swipe-item",{key:e},[i("img",{style:{height:a.height,objectFit:"fill"},attrs:{src:t.imgSrcShow},on:{click:function(e){return a.openUrl(t)}}})])}),1):a._e()],1):a._e()},[],!1,null,"49402814",null).exports},69642:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var t=a(56229),i=a(7300),t={components:{CommonTabs:t.default,AppSwiper:i.Z},data:function(){return{appSwiper:{isShow:!0,autoplay:3e3,isPercent:!0,height:30,percent:"390:200",hasPadding:!1,imgUrls:["https://n.sinaimg.cn/gongyi/transform/116/w550h366/20210607/4994-kracxer0817763.jpg","./static/images/bg-mine.png","./static/images/bg-mine.png"],url:"/fn/mobilecarousel/getcarousel?lbkz=V002"},tabOppsetTop:0,height:""}},created:function(){this.appSwiper.percent?this.height=document.documentElement.clientWidth/this.appSwiper.percent.split(":")[0]*this.appSwiper.percent.split(":")[1]+"px":this.height=this.appSwiper.height?"".concat(this.appSwiper.height).concat(this.appSwiper.isPercent?"vh":"px"):this.height},mounted:function(){var e=this;this.$nextTick(function(){e.tabOppsetTop=document.getElementsByClassName("topTab")[0].clientHeight+document.getElementsByClassName("search-wrap")[0].clientHeight+Number(e.$refs.divSwiper.height.slice(0,-2))})}},n=(0,a(51900).Z)(t,function(){var e=this,t=e._self._c;return t("div",{staticClass:"news"},[t("div",{staticClass:"topTab"},[e._v("中国电气装备")]),e._v(" "),t("div",{staticClass:"search-wrap"},[t("router-link",{staticClass:"search",attrs:{to:"/commonList/230313162526hUNhyRQmhkVwxfD4zNk/220803111621B521Wfaj0JHZLp0lbpU"}},[t("i",{staticClass:"iconfont iconsousuo i1"}),e._v(" "),t("span",[e._v("请输入关键词")])])],1),e._v(" "),t("div",{style:{height:e.height}},[t("app-swiper",{ref:"divSwiper",attrs:{swiper:e.appSwiper}})],1),e._v(" "),t("div",{staticClass:"newsTab"},[t("CommonTabs",{ref:"commonTabs",attrs:{value:"elec",tabKey:"elec",tabOppsetTop:e.tabOppsetTop}})],1)])},[],!1,null,"e1c6d1cc",null).exports}}]);