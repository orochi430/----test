"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[64147],{40127:function(t,e,a){a.r(e);var u,n=a(73473),i=a.n(n),a={};a.initHandle=function(e,a,n){function o(t){var e=a.controls.find(function(t){return"RQ-SPACE-CUSTOMER-004"==t.metaId}).validator;"其他"!==t.text?n.$set(e,"required",{}):n.$delete(e,"required")}o(e.main["RQ-SPACE-CUSTOMER-002"]),n.$bus.on("blurBus",function(t){"RQ-SPACE-CUSTOMER-001"===t.metaData.metaId&&"1"==e.main["RQ-SPACE-CUSTOMER-002"].value&&dsf.http.post("fn/customerDb/getQiXinBaoData",{content:t.value}).then(function(t){t=t.data.data;""==t?(e.main["RQ-SPACE-CUSTOMER-004"].value="",e.main["RQ-SPACE-CUSTOMER-001"].value=""):e.main["RQ-SPACE-CUSTOMER-004"].value=t})}),n.$bus.on("selectUserBus",function(t){"RQ-SPACCE-CUSTOMER-005"===t.metaData.metaId&&(u=t.selectArr[0].attrs.shxydm)}),n.$bus.on("checkVal",function(t){"RQ-SPACE-CUSTOMER-002"===t.metaData.metaId&&o(t)})},a.saveFilter=function(n,o,d){return new(i())(function(a,e){"1"==n.main["RQ-SPACE-CUSTOMER-002"].value&&u&&!(u==n.main["RQ-SPACE-CUSTOMER-004"].value)&&e("社会信用代码和主数据平台不相同"),dsf.http.post("fn/customerDb/checkExists",{socialNo:n.main["RQ-SPACE-CUSTOMER-004"].value}).then(function(t){"true"==t.data.data&&e("社会信用代码重复")}),d.pk?dsf.http.post("fn/UpdateGNRInfoController/updateInfo",{oldId:d.pk,newId:d.pk,moduleId:o.parameters.moduleId}).then(function(t){t.data;a()}):dsf.http.post("fn/commonTool/getIdByTableName",{tableName:"rq_space_customer",dbName:"ImBzServiceConnection"}).then(function(t){var e=t.data.data.id;dsf.http.post("fn/UpdateGNRInfoController/updateInfo",{oldId:d.formParams.pk,newId:e,moduleId:o.parameters.moduleId}).then(function(t){t.data;d.pk=e,d.formParams.pk=e,d.$set(o.parameters,"pk",e),d.$set(n.main,"A0001",{value:e}),a()})})})},e.default=a}}]);