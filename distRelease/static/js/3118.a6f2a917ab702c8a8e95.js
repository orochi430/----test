"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[3118],{3118:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var o=i(5044),e=i(8450),s=i.n(e),e=i(18428),c=i.n(e),r=i(25108),e={name:"catalogSearch",data:function(){return{keyword:"",type_value:"",type_id:"",sort_active:"effect",page_size:10,page:0,sort_type:1,result_list:[],file_icon:"ascending",time_icon:"ascending",count:0}},created:function(){this.index_obj=this.$route.query.index_obj,r.log(this.index_obj),this.keyword=this.index_obj.gjzname,this.type_value=this.index_obj.type_value,this.type_id=this.index_obj.wjjbvalue,r.log(this.keyword,this.type_value,this.type_id)},activated:function(){'"[object Object]"'!==s()(this.$route.query.index_obj)&&(this.index_obj=this.$route.query.index_obj,r.log(this.index_obj),this.keyword=this.index_obj.gjzname,this.type_value=this.index_obj.type_value,this.type_id=this.index_obj.wjjbvalue,r.log(this.keyword,this.type_value,this.type_id),this.getData())},methods:{refresh:function(t){this.page=1,this.getData(t)},infinite:function(t){this.page++,this.getData(t)},sortData:function(t){"effect"===(this.sort_active=t)?"ascending"==this.file_icon?(this.file_icon="descending",this.sort_type=2):(this.file_icon="ascending",this.sort_type=1):"ascending"===this.time_icon?(this.time_icon="descending",this.sort_type=4):(this.time_icon="ascending",this.sort_type=3),this.page=1,r.log(this.sort_type),this.getData("","refresh")},getData:function(e,n){var a=this;r.log(this.keyword),dsf.http.post("fn/flfgyd/flfgquerygjzcx?wjjbvalue=".concat(this.type_id,"&gjzname=").concat(this.keyword,"&limit=").concat(this.page_size,"&page=").concat(this.page,"&type=").concat(this.sort_type)).then(function(i){r.log(i);var t,s=a.keyword;s&&i.data.data.forEach(function(t,e){t.fbbt.includes(s)&&(t=t.fbbt.split(s),t="<span>".concat(t[0],'</span><span style="color: #ff7070;">').concat(s,"</span><span>").concat(t[1],"</span>"),i.data.data[e].title_obj=t)}),"search"===n&&(a.result_list=[],a.$refs.scroller.scrollTo(0,0,!0)),"1"==a.page?a.result_list=i.data.data:(t=a.result_list).push.apply(t,(0,o.Z)(i.data.data)),a.count=i.data.count,a.result_list=c()([],a.result_list),r.log(a.result_list),i.data.data.length<a.page_size?e?e(!0):a.$refs.scroller.finishPullToRefresh(!0):e?e():a.$refs.scroller.finishPullToRefresh(),"refresh"==n&&a.$nextTick(function(){setTimeout(function(){r.log("刷新了"),a.$refs.scroller.scrollTo(0,0,!0)},200)})})},skipToDetail:function(t){r.log(t),this.$router.push({path:"/contentDetail",query:{wjid:t.fbid,title:t.fbbt,from:"one"}})}}},n=(0,i(51900).Z)(e,function(){var i=this,s=i._self._c;return s("div",{staticClass:"catalog_search"},[s("div",{staticClass:"search_body"},[s("van-search",{attrs:{"show-action":"","action-text":"搜索","right-icon":"search","left-icon":"",placeholder:"请输入搜索关键词"},on:{search:function(t){i.page=1,i.getData("","search")}},scopedSlots:i._u([{key:"action",fn:function(){return[s("div",{on:{click:function(t){i.page=1,i.getData("","search")}}},[i._v("搜索")])]},proxy:!0}]),model:{value:i.keyword,callback:function(t){i.keyword=t},expression:"keyword"}})],1),i._v(" "),s("div",{staticClass:"result_overview"},[s("span",[i._v("共 "),s("span",{staticClass:"text_color2"},[i._v(i._s(i.count))]),i._v(" 条")]),i._v(" "),s("div",[s("span",{class:{text_color:"effect"===i.sort_active},on:{click:function(t){return i.sortData("effect")}}},[i._v("文件排序\n                "),s("van-icon",{attrs:{name:i.file_icon}})],1),i._v(" "),s("span",{class:{text_color:"time"===i.sort_active},staticStyle:{"margin-left":"5px"},on:{click:function(t){return i.sortData("time")}}},[i._v("时间排序\n                "),s("van-icon",{attrs:{name:i.time_icon}})],1)])]),i._v(" "),s("scroller",{ref:"scroller",staticClass:"contents",attrs:{"on-refresh":i.refresh,"on-infinite":i.infinite}},i._l(i.result_list,function(e,t){return s("div",{key:t,staticClass:"content",on:{click:function(t){return i.skipToDetail(e)}}},[s("span",{staticClass:"left text_color"},[i._v(i._s(t+1))]),i._v(" "),s("div",{staticClass:"right"},[s("p",{domProps:{innerHTML:i._s(e.title_obj||e.fbbt)}}),i._v(" "),s("p",{staticClass:"text_color3"},[s("span",{staticStyle:{flex:"1"}},[i._v("发布单位："),s("span",[i._v(i._s(e.fbdw))])]),i._v(" "),s("span",{staticStyle:{flex:"1"}},[i._v("发布时间："+i._s(e.fbrq))])])])])}),0)],1)},[],!1,null,"1f95a4e4",null).exports}}]);