"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[50834],{50834:function(t,e,n){n.r(e),n.d(e,{default:function(){return a}});var o=n(66250),e=n(33453),s=n.n(e),r=n(25108),e={data:function(){return{id:this.$route.params.memoId,title:"",text:"",user:dsf.util.loadSessionStore("user")}},created:function(){this.id&&this.getData()},methods:{save:function(){var r=this;return(0,o.Z)(s().mark(function t(){var e,n,a;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=r).title){t.next=4;break}return dsf.layer.toast("标题不能为空！",!1),t.abrupt("return");case 4:return n=!1,e.id||(n=!0,e.id=dsf.util.guid()),a="",a=n?"insert into memo(id,fid,name,updatetime,content) values('".concat(e.id,"','").concat(e.user.ID,"','").concat(e.title,"','").concat(dsf.date.format(new Date,"yyyy-mm-dd hh:ii:ss"),"','").concat(e.text,"')"):"update memo set name='".concat(e.title,"',content='").concat(e.text,"',updatetime='").concat(dsf.date.format(new Date,"yyyy-mm-dd hh:ii:ss"),"' where id='").concat(e.id,"'"),t.next=10,e.operateDB(a);case 10:1==t.sent?dsf.layer.toast("已保存！",!0,function(){e.$router.go(-1)}):dsf.layer.toast("系统错误，请稍后重试！",!1);case 12:case"end":return t.stop()}},t)}))()},del:function(){var a=this;return(0,o.Z)(s().mark(function t(){var e,n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a,n="delete from memo where id='".concat(e.id,"'"),t.next=4,e.operateDB(n);case 4:1==t.sent?dsf.layer.toast("已删除！",!0,function(){return e.$router.back()}):dsf.layer.toast("系统错误，请稍后重试！",!1);case 6:case"end":return t.stop()}},t)}))()},getData:function(){var a=this;return(0,o.Z)(s().mark(function t(){var e,n;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a,n="select name,content from memo where id='".concat(e.id,"'"),t.next=4,e.queryDB(n);case 4:n=t.sent,r.log("res == ",n),n?0<n.length&&(e.title=n[0].NAME,e.text=n[0].CONTENT):dsf.layer.toast("系统错误，请稍后重试！",!1);case 7:case"end":return t.stop()}},t)}))()}}},a=(0,n(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"memoEdit-container"},[t("div",{staticClass:"top"},[t("van-cell",{attrs:{title:"会议备忘录",icon:"arrow-left",center:""},on:{click:function(t){return e.$router.back()}},scopedSlots:e._u([{key:"default",fn:function(){return[t("van-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.save()}}},[e._v("保存")])]},proxy:!0}])}),e._v(" "),t("van-field",{attrs:{name:"标题",center:"",placeholder:"请输入标题"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),t("div",{staticClass:"content"},[t("van-field",{attrs:{type:"textarea",autosize:"",rows:"15",name:"正文",border:"",placeholder:"请输入正文"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)])},[],!1,null,"92f1efc8",null).exports}}]);