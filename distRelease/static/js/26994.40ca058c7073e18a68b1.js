"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[26994,18868],{7843:function(e,s,n){n.r(s),n.d(s,{default:function(){return a}});var s=n(73473),t=n.n(s),s=n(63560),o=n(88561),s={name:"AskLeave",components:{selectPerson:s.default},data:function(){return{isShow:!1,resolve:function(){},reject:function(){},data:null,showPerson:!1,congressPersons:[],congressPersonIds:"",congressPerson:"",leaveReason:""}},methods:{init:function(){var e=o.Z.loadSessionStore("user"),e=[{id:e.user_id,pid:e.deptId,name:e.name}];this.data=null,this.showPerson=!1,this.congressPersons=e,this.congressPersonIds=e[0].id,this.congressPerson=e[0].name,this.leaveReason=""},show:function(e){var n=this;return this.init(),this.data=e,this.isShow=!0,new(t())(function(e,s){n.resolve=e,n.reject=s})},cancel:function(){this.isShow=!1,this.reject("流程被中断")},submit:function(){var e,s=this;this.congressPersons.length?this.leaveReason.length?(e=dsf.layer.loading(),dsf.http.post("fn/mobilePDMeeting/attendMeeting",{attendance:-1,meetingtzId:this.data.meetingtzId,leaveReason:this.leaveReason,userName:this.congressPerson,userId:this.congressPersonIds,"x-auth-token":o.Z.loadSessionStore("loginToken")}).done(function(e){"200"===e.code?(s.isShow=!1,s.resolve(e)):dsf.layer.toast("请求异常")}).error(function(){dsf.layer.toast("请求异常")}).always(function(){dsf.layer.closeLoading(e)})):dsf.layer.toast("请填写请假理由"):dsf.layer.toast("请选择代会人员")},getUserNames:function(e){var s=[],n=[],e=e.map(function(e){return s.push(e.name),n.push(e.attrs.idValue),{id:e.attrs.idValue,pid:e.attrs.pidValue,name:e.name}});return{names:s.join(","),ids:n.join(","),persons:e}},getSelectUser:function(e){var s,n;0<e.length&&(s=(e=this.getUserNames(e)).names,n=e.ids,e=e.persons,this.congressPerson=s,this.congressPersonIds=n,this.congressPersons=e)}}},a=(0,n(51900).Z)(s,function(){var s=this,e=s._self._c;return e("div",{staticClass:"ds-ask-leave"},[e("van-popup",{staticClass:"ds-ask-leave-pop",attrs:{position:"bottom","get-container":"#app",round:""},model:{value:s.isShow,callback:function(e){s.isShow=e},expression:"isShow"}},[e("div",{staticClass:"header"},[e("van-nav-bar",{attrs:{title:"请假","left-text":"取消"},on:{"click-left":s.cancel}})],1),s._v(" "),e("div",{staticClass:"body"},[e("div",{staticClass:"congressPerson"},[e("van-field",{attrs:{readyonly:"","input-align":"left",label:"代会人员:",placeholder:"请选择"},on:{click:function(e){s.showPerson=!0}},scopedSlots:s._u([{key:"label",fn:function(){return[e("span",[e("label",{staticClass:"mast-input"}),s._v("代会人员：\n          ")])]},proxy:!0}]),model:{value:s.congressPerson,callback:function(e){s.congressPerson=e},expression:"congressPerson"}})],1),s._v(" "),e("van-field",{attrs:{rows:"2",autosize:"",label:"请假理由:",type:"textarea",placeholder:"请输入请假理由"},model:{value:s.leaveReason,callback:function(e){s.leaveReason=e},expression:"leaveReason"}})],1),s._v(" "),e("div",{staticClass:"footer"},[e("van-button",{attrs:{type:"theme"},on:{click:s.submit}},[s._v("提交")])],1)]),s._v(" "),e("van-popup",{style:{height:"90%"},attrs:{"close-on-click-overlay":!1,position:"bottom","get-container":"#app",round:""},model:{value:s.showPerson,callback:function(e){s.showPerson=e},expression:"showPerson"}},[e("selectPerson",{on:{getSelectUser:s.getSelectUser,cancePerson:function(e){s.showPerson=!1}}})],1)],1)},[],!1,null,null,null).exports},18868:function(e,s,n){var a=n(25108);const i=(t,o=500,a=!0)=>{let i,r=0,l,c,u=n=>{i=setTimeout(()=>{var e=(new Date).getTime(),s=e-r;s<n?(r=e,u(o-s)):(a||t.apply(l,c),clearTimeout(i),i=null)},n)};return function(){l=this,c=arguments;var e=(new Date).getTime();r=e,i||(a&&t.apply(l,c),u(o))}};s.Z={name:"DebounceClick",functional:!0,render(e,s){var n,t=s.props.time,o=s.props.immediate,s=s.slots().default;return void 0===s?(a.warn("<debounce> 组件必须要有子元素"),null):((s=s[0]||null).data.on&&s.data.on.click?(n=s.data.on.click,n=i(n,t,o),s.data.on.click=n):s.componentOptions&&s.componentOptions.listeners.click&&(n=s.componentOptions.listeners.click,n=i(n,t,o),s.componentOptions.listeners.click=n),s)}}}}]);