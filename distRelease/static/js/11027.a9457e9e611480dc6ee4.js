"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[11027],{11027:function(t,a,e){e.r(a),e.d(a,{default:function(){return n}});var i=e(522),a=e(8450),s=e.n(a),a=e(54258),r=(e(94859),e(40451),e(25108)),a={components:{VChart:a.Z},data:function(){return{active:0,currentTime:"1",currentDept:"0",time:[{label:"一个月",value:"1"},{label:"三个月",value:"2"},{label:"一年",value:"3"}],zbrw:[{label:"总任务数",color:"#000",num:"0"},{label:"  办理中",color:"#000",num:"0"},{label:"  待接收",color:"#3389E0",num:"0"}],dbrw:[{label:"总计",color:"#15D48E",icon:"iconjiahao",img:"./static/images/duban/heji.png",num:"0"},{label:"待接收",color:"#1688FA",icon:"iconjiahao",img:"./static/images/duban/daijieshou.png",num:"0"},{label:"办理中",color:"#FF8926",icon:"iconjiahao",img:"./static/images/duban/banlizhong_cd.png",num:"0"},{label:"已办结",color:"#1ACAD4",icon:"iconjiahao",img:"./static/images/duban/banjie.png",num:"0"},{label:"已超期",color:"#DE1010",icon:"iconjiahao",img:"./static/images/duban/yichaoqi.png",num:"0"}],fkqk:[{label:"正常反馈",color:"#1ACAD4",num:"0"},{label:"超期反馈",color:"#FF8926",num:"0"},{label:"超期未反馈",color:"#DE1010",num:"0"}],labels:["部门","总计项目","当前项目","在办","已办","超期"],blfkqk:[],completion:[{label:"领导批示",num:50},{label:"重要文件",num:60},{label:"重点工作",num:75},{label:"紧急事项",num:20}],xmqk:[{label:"项目",color:"#1688FA",icon:"iconjiahao",img:"./static/images/duban/xiangmu.png",num:"0"},{label:"办结",color:"#1ACAD4",icon:"iconjiahao",img:"./static/images/duban/banjie.png",num:"0"},[{label:"在办",color:"#FF8926",num:"0"},{label:"超期",color:"#DE1010",num:"0"}]],allPieChart:{title:{show:!1},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",position:[10,10]},color:["#3389E0","#C3E3FF"],series:[{name:"在办任务",type:"pie",radius:"80%",center:["40%","50%"],data:[{value:25,name:"待接收"},{value:75,name:"办理中"}],itemStyle:{normal:{label:{show:!1}}}}]},deptBarChart:{color:["#3389E0","#C3E3FF"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{right:"0",bottom:"3%",height:"90%",width:"100%",containLabel:!0},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],bottom:0,height:20,showDetail:!1,startValue:0,endValue:9},{type:"inside",show:!0,xAxisIndex:[0],startValue:0,endValue:9}],yAxis:{type:"value"},xAxis:{type:"category",data:[],axisLabel:{show:!0,interval:0,formatter:function(t){return t.split("").join("\n")}}},series:[{name:"待接收",type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]},{name:"办理中",type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}]},dateShow:!1,minDate:new Date((new Date).getFullYear()-5,0,1),startDate:"",endDate:"",pstj:!1,dbtj:!1,bmtj:!1,power:!1}},created:function(){var t;this.getProjectStatistics(),this.init(),this.power=null==(t=dsf.util.loadSessionStore("user"))?void 0:t.privileges.some(function(t){return"是否显示督办立项"===t.name})},methods:{chooseTime:function(t){this.currentTime=t.value,this.getProjectStatistics()},init:function(){var s=this,n=dsf.layer.loading(),l=this;dsf.http.post("fn/customStatic/getApprovalType").then(function(t){var a,e,i;dsf.layer.closeLoading(n),"success"===t.data.type?((i=t.data.data).codeList,a=i.endDate,e=i.showType,i=i.startDate,l.power||(s.active=1),e.includes("pstj")?l.pstj=!0:e.includes("dbtj")?l.dbtj=!0:e.includes("bmtj")&&(l.bmtj=!0),l.endDate=a,l.startDate=i):dsf.layer.toast(t.data.message)}).catch(function(t){dsf.layer.closeLoading(n),r.log(t)})},getProjectStatistics:function(){var i=this,t=dsf.layer.loading();dsf.http.post("/ctrl/superviseV6/m/statistics/project",{dateType:this.currentTime}).then(function(t){var a,e;200==t.data.code&&(a=(t=t.data.data).feedBack,e=t.pInfo,t=t.task,i.fkqk[0].num=a.normal,i.fkqk[1].num=a.over,i.fkqk[2].num=a.overNo,i.xmqk[0].num=e.sum,i.xmqk[1].num=e.close,i.xmqk[2][0].num=e.process,i.xmqk[2][1].num=e.over,i.completion[0].num=Number(e.ldps.split("%")[0]),i.completion[1].num=Number(e.zywj.split("%")[0]),i.completion[2].num=Number(e.zysx.split("%")[0]),i.completion[3].num=Number(e.jjsx.split("%")[0]),i.deptBarChart.xAxis.data=t.dept.map(function(t){return t.deptName}),i.deptBarChart.series[0].data=t.dept.map(function(t){return t.wait}),i.deptBarChart.series[1].data=t.dept.map(function(t){return t.process}),i.allPieChart.series[0].data[0].value=t.wait,i.allPieChart.series[0].data[1].value=t.process,i.zbrw[0].num=t.sum,i.zbrw[1].num=t.process,i.zbrw[2].num=t.wait)}).always(function(){dsf.layer.closeLoading(t)})},getTaskStatistics:function(){var e=this,i=dsf.layer.loading();dsf.http.post("/ctrl/superviseV6/m/statistics/task",{dateType:this.currentTime,deptId:this.currentDept}).then(function(t){var a;dsf.layer.closeLoading(i),200==t.data.code&&(a=(t=t.data.data).feedBack,t=t.task,e.blfkqk[0].num=a.normalNo,e.blfkqk[1].num=a.normal,e.blfkqk[2].num=a.over,e.blfkqk[3].num=a.overNo,e.dbrw[0].num=t.wait,e.dbrw[1].num=t.process,e.dbrw[2].num=t.close,e.dbrw[3].num=t.over)})},toDefaultlist:function(t){r.log(t,"item");var a=1,e="",i="",t=("总计"==t.label?(a=0,e="240112104602H9GKxWSPL5yk5Y8nlek",i="督办立项跟踪"):"项目"==t.label?(a=1,e="240112104602H9GKxWSPL5yk5Y8nlek",i="督办立项跟踪"):"办结"==t.label?(a=2,i="督办任务管理",e="240112104602H9GKxWSPL5yk5Y8nlek"):"在办"==t.label?(a=3,i="督办立项跟踪",e="240112104602H9GKxWSPL5yk5Y8nlek"):"超期"==t.label?(a=4,i="督办立项跟踪",e="240112104602H9GKxWSPL5yk5Y8nlek"):"待接收"==t.label?(a=1,i="督办任务管理",e="240112105555B3MI0kM3usDwJA4Pzfy"):"已办结"==t.label?(a=3,i="督办任务管理",e="240112105555B3MI0kM3usDwJA4Pzfy"):"办理中"==t.label?(a=2,i="督办任务管理",e="240112105555B3MI0kM3usDwJA4Pzfy"):"已超期"==t.label&&(a=4,i="督办任务管理",e="240112105555B3MI0kM3usDwJA4Pzfy"),s()({type:a,dateType:this.startDate,deptId:this.endDate,mobile:1}));this.$router.push({path:"/commonList/".concat(e,"/2106021016102xjgjpCc6tqdMZkrX20?title=").concat(i),query:{secQuery:t}})},confirmDate:function(t){var t=(0,i.Z)(t,2),a=t[0],t=t[1];this.dateShow=!this.dateShow,this.startDate=dsf.date.format(a,"yyyy-mm-dd"),this.endDate=dsf.date.format(t,"yyyy-mm-dd"),this.getDbStatis(),this.getBmStatis(),this.getPsStatis()},chooseDate:function(){var t=this;this.dateShow=!this.dateShow,this.$nextTick(function(){t.$refs.calendar.scrollToDate(new Date)})},chartsStatisticsLE:function(t){var a=document.getElementById("chartsStatisticsLE"),t={tooltip:{trigger:"item"},legend:{left:"center"},series:[{name:"",type:"pie",radius:"50%",data:t,bottom:"-20%",emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};echarts.init(a).setOption(t)},chartsStatisticsRI:function(t){var a=document.getElementById("chartsStatisticsRI"),t={tooltip:{trigger:"item"},legend:{left:"center"},series:[{name:"",type:"pie",radius:"50%",bottom:"-20%",data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};echarts.init(a).setOption(t)},getPsStatis:function(){var i=dsf.layer.loading(),s=this;dsf.http.post("fn/customStatic/getPsStatis",{startDate:s.startDate,endDate:s.endDate,type:-1}).then(function(t){var a,e;dsf.layer.closeLoading(i),"success"===t.data.type?(s.pstj=!0,a=(e=t.data.data).psData,e=e.dbData,s.chartsStatisticsLE([{value:a[0].value,name:a[0].name,itemStyle:{color:"#5087EC"}},{value:a[1].value,name:a[1].name,itemStyle:{color:"#68BAC5"}}]),s.chartsStatisticsRI([{value:e[0].value,name:e[0].name,itemStyle:{color:"#008CFF"}},{value:e[1].value,name:e[1].name,itemStyle:{color:"#FEAC00"}},{value:e[2].value,name:e[2].name,itemStyle:{color:"#FFE286"}}])):dsf.layer.toast(t.data.message)}).catch(function(t){dsf.layer.closeLoading(i),r.log(t)})},getDbStatis:function(){var o=dsf.layer.loading(),c=this;dsf.http.post("fn/customStatic/getDbStatis",{startDate:c.startDate,endDate:c.endDate,type:-1}).then(function(t){var a,e,i,s,n,l;dsf.layer.closeLoading(o),"success"===t.data.type?(c.dbtj=!0,a=t.data.data,e=a.allNum,i=a.djsNum,s=a.zbNum,n=a.ybNum,l=a.cqNum,c.dbrw.forEach(function(t){"总计"==t.label?t.num=e:"待接收"==t.label?t.num=i:"办理中"==t.label?t.num=s:"已办结"==t.label?t.num=n:t.num=l})):dsf.layer.toast(t.data.message)}).catch(function(t){dsf.layer.closeLoading(o),r.log(t)})},getBmStatis:function(){var e=dsf.layer.loading(),i=this;dsf.http.post("fn/customStatic/getBmStatis",{startDate:i.startDate,endDate:i.endDate,type:-1}).then(function(t){var a;dsf.layer.closeLoading(e),"success"===t.data.type?(i.bmtj=!0,a=t.data.data,i.blfkqk=[],a.forEach(function(t){i.blfkqk.push({label:t.orgName,totalApp:t.allNum,curApp:t.djsNum,zb:t.zbNum,yb:t.ybNum,cq:t.cqNum})})):dsf.layer.toast(t.data.message)}).catch(function(t){dsf.layer.closeLoading(e),r.log(t)})}},watch:{active:function(t,a){var e=this;1==t&&(this.getDbStatis(),this.getBmStatis(),setTimeout(function(){e.getPsStatis()},10))}},mounted:function(){}},n=(0,e(51900).Z)(a,function(){var e=this,i=e._self._c;return i("div",{staticClass:"container"},[i("div",{staticClass:"screen"},[i("div",{staticClass:"title"},[e._v("时间选择")]),e._v(" "),0==e.active?i("div",{staticClass:"time"},e._l(e.time,function(a,t){return i("span",{key:t,staticClass:"screen-item",class:{"choose-item":a.value==e.currentTime},on:{click:function(t){return e.chooseTime(a)}}},[e._v(e._s(a.label))])}),0):i("div",{staticClass:"dateRange"},[i("van-field",{attrs:{readonly:"",clearable:"",placeholder:"选择日期"},on:{click:e.chooseDate},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("van-field",{attrs:{readonly:"",clearable:"",placeholder:"选择日期"},on:{click:e.chooseDate},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)]),e._v(" "),i("div",{staticClass:"charts"},[0==e.active?[i("div",{staticClass:"module"},[i("div",{staticClass:"title"},[e._v("项目情况")]),e._v(" "),i("div",{staticClass:"blocks"},[e._l(e.xmqk,function(a,t){return[Array.isArray(a)?i("div",{key:t,staticStyle:{width:"30%"}},e._l(a,function(a,t){return i("div",{key:t,staticClass:"grey-block",staticStyle:{padding:"5px 8px"},on:{click:function(t){return e.toDefaultlist(a)}}},[i("div",[e._v(e._s(a.label))]),e._v(" "),i("span",{style:{color:a.color,fontSize:"25px"}},[e._v(e._s(a.num))])])}),0):i("div",{key:t,staticClass:"grey-block",staticStyle:{width:"30%",padding:"10px"},on:{click:function(t){return e.toDefaultlist(a)}}},[i("div",[i("img",{staticStyle:{width:"0.5rem",height:"0.5rem",display:"inline-block","margin-bottom":"10px"},attrs:{src:a.img,alt:""}}),e._v(" "),i("div",[e._v(e._s(a.label))])]),e._v(" "),i("span",{staticClass:"num",style:{color:a.color}},[e._v(e._s(a.num))])])]})],2),e._v(" "),i("div",{staticClass:"feedback-block"},[i("div",{staticStyle:{color:"#3389e0","padding-bottom":"10px"}},[e._v("办结率")]),e._v(" "),i("van-row",e._l(e.completion,function(a,t){return i("van-col",{key:t,attrs:{span:"6"}},[i("van-circle",{attrs:{size:"60px",rate:a.num,"stroke-width":130,"layer-color":"#e5e5e5",color:"#FF8926",text:"".concat(a.num,"%"),"stroke-linecap":"butt"},model:{value:a.num,callback:function(t){e.$set(a,"num",t)},expression:"item.num"}}),e._v(" "),i("div",[e._v(e._s(a.label))])],1)}),1)],1)]),e._v(" "),i("div",{staticClass:"module"},[i("div",{staticClass:"title"},[e._v("在办任务")]),e._v(" "),i("div",{staticClass:"charts-container"},[i("div",[i("v-chart",{staticStyle:{width:"2.4rem",height:"2.4rem"},attrs:{options:e.allPieChart}}),e._v(" "),e._l(e.zbrw,function(t,a){return i("div",{key:a,style:{color:t.color,paddingBottom:"10px"}},[e._v("\n              "+e._s(t.label)+"："+e._s(t.num)+"\n            ")])})],2),e._v(" "),i("v-chart",{staticStyle:{width:"4rem",height:"6rem",flex:"1","text-align":"right"},attrs:{options:e.deptBarChart}})],1),e._v(" "),i("div",{staticClass:"feedback-block"},[i("div",{staticStyle:{color:"#3389e0"}},[e._v("反馈情况")]),e._v(" "),i("div",{staticClass:"flex"},e._l(e.fkqk,function(t,a){return i("div",{key:a},[i("div",{staticClass:"num",style:{color:t.color}},[e._v("\n                "+e._s(t.num)+"\n              ")]),e._v(" "),i("div",[e._v(e._s(t.label))])])}),0)])])]:[e.pstj?i("div",{staticClass:"taizhang"},[i("div",{staticClass:"title"},[e._v("批示台账")]),e._v(" "),e._m(0)]):e._e(),e._v(" "),e.dbtj?i("div",{staticClass:"module"},[i("div",{staticClass:"title"},[e._v("督办任务")]),e._v(" "),i("div",{staticClass:"blocks"},e._l(e.dbrw,function(a,t){return i("div",{key:t,staticClass:"grey-block",style:{width:1<t?"30%":"48%"},on:{click:function(t){return e.toDefaultlist(a)}}},[i("div",[i("img",{staticStyle:{width:"0.5rem",height:"0.5rem",display:"inline-block","margin-bottom":"10px"},attrs:{src:a.img,alt:""}}),e._v(" "),i("div",[e._v(e._s(a.label))])]),e._v(" "),i("span",{staticClass:"num",style:{color:a.color}},[e._v(e._s(a.num))])])}),0)]):e._e(),e._v(" "),e.bmtj?i("div",{staticClass:"bmtj"},[i("div",{staticClass:"title"},[e._v("按部门统计")]),e._v(" "),i("div",{staticClass:"box"},[i("div",{staticClass:"keys"},e._l(e.labels,function(t,a){return i("div",{key:a,staticClass:"item",style:{flex:a<3?2:1,textAlign:0==a?"left":"center"}},[e._v("\n              "+e._s(t)+"\n            ")])}),0),e._v(" "),e._l(e.blfkqk,function(t,a){return i("div",{key:a,staticClass:"values"},[i("div",{staticClass:"item clamp",staticStyle:{flex:"2",textalign:"left"}},[e._v("\n              "+e._s(t.label)+"\n            ")]),e._v(" "),i("div",{staticClass:"item",staticStyle:{flex:"2"}},[e._v(e._s(t.totalApp))]),e._v(" "),i("div",{staticClass:"item",staticStyle:{flex:"2"}},[e._v(e._s(t.curApp))]),e._v(" "),i("div",{staticClass:"item",staticStyle:{flex:"1"}},[e._v(e._s(t.zb))]),e._v(" "),i("div",{staticClass:"item",staticStyle:{flex:"1"}},[e._v(e._s(t.yb))]),e._v(" "),i("div",{staticClass:"item",staticStyle:{flex:"1"}},[e._v(e._s(t.cq))])])})],2)]):e._e()],e._v(" "),e.power?i("div",{staticStyle:{height:"60px"}}):e._e()],2),e._v(" "),e.power?i("van-tabbar",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[i("van-tabbar-item",{scopedSlots:e._u([{key:"icon",fn:function(){return[i("img",{attrs:{src:0==e.active?"./static/images/duban/lixiang.png":"./static/images/duban/lixiang2.png",alt:""}})]},proxy:!0}],null,!1,3262941866)},[e._v("\n      督办立项\n      ")]),e._v(" "),i("van-tabbar-item",{scopedSlots:e._u([{key:"icon",fn:function(){return[i("img",{attrs:{src:0==e.active?"./static/images/duban/banli.png":"./static/images/duban/banli2.png",alt:""}})]},proxy:!0}],null,!1,768332266)},[e._v("\n      督办统计\n      ")])],1):e._e(),e._v(" "),i("van-popup",{style:{height:"500px"},attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:e.dateShow,callback:function(t){e.dateShow=t},expression:"dateShow"}},[i("van-calendar",{ref:"calendar",attrs:{poppable:!1,"min-date":e.minDate,type:"range","first-day-of-week":"1","default-date":[new Date(e.startDate),new Date(e.endDate)],"allow-same-day":""},on:{confirm:e.confirmDate}})],1)],1)},[function(){var t=this._self._c;return t("div",{staticClass:"box"},[t("div",{staticClass:"left",attrs:{id:"chartsStatisticsLE"}}),this._v(" "),t("div",{staticClass:"right",staticStyle:{height:"240px"},attrs:{id:"chartsStatisticsRI"}})])}],!1,null,"0c31478e",null).exports},79156:function(t,a,e){e.d(a,{Z:function(){return s}});var i=e(78149);function s(t){if(i(t))return t}},26511:function(t,a,e){function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.d(a,{Z:function(){return i}})},522:function(t,a,e){e.d(a,{Z:function(){return l}});var i=e(79156),d=e(85579),u=e(22013);var s=e(33422),n=e(26511);function l(t,a){return(0,i.Z)(t)||function(t,a){var e=null==t?null:void 0!==d&&t[u]||t["@@iterator"];if(null!=e){var i,s,n,l,o=[],c=!0,r=!1;try{if(n=(e=e.call(t)).next,0===a){if(Object(e)!==e)return;c=!1}else for(;!(c=(i=n.call(e)).done)&&(o.push(i.value),o.length!==a);c=!0);}catch(t){r=!0,s=t}finally{try{if(!c&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(r)throw s}}return o}}(t,a)||(0,s.Z)(t,a)||(0,n.Z)()}}}]);