"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[91727],{91727:function(t,n,e){e.r(n),e.d(n,{default:function(){return r}});var o=e(66250),n=e(73473),i=e.n(n),n=e(33453),a=e.n(n),s=e(25108),n={name:"MyInfo",data:function(){return{default_avatar:'this.src="'+e(11727)+'"',avatar:"",userInfo:dsf.util.loadSessionStore("user"),exitButton:{isShow:!1,buttonName:"退出登录"},menuList:[],isAutoLogin:dsf.util.loadLocalStore("autoLogin"),isOpenFingerprint:dsf.util.loadLocalStore("openFingerprint"),phone_system:dsf.util.checkSystem(),clientName:dsf.util.getClientName(),version:""}},computed:{autoLogin:{get:function(){return this.isAutoLogin},set:function(t){dsf.util.saveToLocalStore("autoLogin",t),this.isAutoLogin=t}},openFingerprint:{get:function(){return this.isOpenFingerprint},set:function(n){var e=this;"app"==e.clientName?n?xsfCommon.setFingerprint("",function(t){dsf.util.saveToLocalStore("openFingerprint",n),e.isOpenFingerprint=n,s.log("openFingerprint res",t)},function(t){alert(t)}):xsfCommon.cancerFingerprint("",function(t){dsf.util.saveToLocalStore("openFingerprint",n),e.isOpenFingerprint=n},function(t){}):dsf.layer.toast("当前菜单仅支持在App中使用")}}},created:function(){this.init()},activated:function(){this.userInfo=dsf.util.loadSessionStore("user"),this.init()},mounted:function(){var n=this;"mobileIM"==dsf.util.getClientName()&&(window.native.onNoticeCallback=function(t){s.log("收到消息",t),"OA-NOTICE"==t.type&&"updateImg"==t.action&&n.getavatar()})},methods:{getavatar:function(){var t;null!=(t=dsf.config.myInfo)&&t.interGetImg?this.avatar=dsf.url.getWebPath("/fn/mobilePhoto/download?id=".concat(this.userInfo.user_id,"&time=").concat((new Date).getTime())):this.avatar=(null==(t=this.userInfo)?void 0:t.photo)||e(11727)},init:function(){var n=this;return(0,o.Z)(a().mark(function t(){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.exitButton=dsf.config.myInfo.exitButton,n.menuList=dsf.config.myInfo.menus,n.getavatar(),n.getVersion();case 4:case"end":return t.stop()}},t)}))()},goRoute:function(t,n){"function"==t?(s.log(n),this[n.params.name]&&this[n.params.name](n)):t.toLowerCase().startsWith("http")?this.$router.push({path:"/iframe",query:{url:t}}):this.$router.push(dsf.util.getReplaceUrl(t))},getstationinfo:function(t){var n=this;dsf.http.post("fn/mobile/getstationinfo",{userId:this.$user.user_id}).then(function(t){t=t.data,s.log(t),200==t.code&&n.$router.push({path:"/commonForm/".concat(t.data.moduleID,"/").concat(t.data.pk),query:{formId:t.data.formId,listId:"openForm",method:"view",validateByList:1}})})},updateVpnData:function(t){"app"==this.clientName?xsfCommon.changeVPNPassword("",function(t){},function(t){}):dsf.layer.toast("当前菜单仅支持在App中使用")},clearCache:function(t){var n,e;"app"==this.clientName?"android"==this.phone_system?null!=(e=$iaction)&&null!=(n=e.execute)&&n.call(e,{method:"clearCache",param:{}},function(t){s.log("clearCache",t),dsf.layer.toast("操作成功")},function(t){s.log("clearCache-err",t),dsf.layer.toast("操作失败")}):"ios"==this.phone_system&&null!=(n=$iaction)&&null!=(e=n.encrypt)&&e.call(n,{action:"clearCache"},function(t){s.log("clearCache",t),dsf.layer.toast("操作成功")},function(t){s.log("clearCache-err",t),dsf.layer.toast("操作失败")}):dsf.layer.toast("当前菜单仅支持在App中使用")},editAvatar:function(){this.$router.push({path:"/userImgChange"})},exit:function(){dsf.layer.confirm({message:"是否确认退出登录",confirmButtonText:"确认"},function(){dsf.util.logOut()})},getVersion:function(){var t,n=this;"app"==n.clientName?"android"==n.phone_system?new(i())(function(n,e){cordova.getAppVersion.getVersionNumber(function(t){n(t)},function(t){e(t)})}).then(function(t){n.version=t}):"ios"==n.phone_system&&new(i())(function(n,e){$iaction.encrypt({action:"getAppVersion"},function(t){n(t)},function(t){e(t)})}).then(function(t){n.version=t}):"mobileIM"==n.clientName?null!=(t=window.native)&&t.getAppVersion(function(t){return n.version=t}):n.version="请于App中查看"}}},r=(0,e(51900).Z)(n,function(){var o=this,i=o._self._c;return i("div",{attrs:{id:"my-info"}},[i("div",{staticClass:"content"},[i("div",{staticClass:"info-container"},[i("div",{staticClass:"avatar"},[i("img",{attrs:{src:o.avatar,onerror:o.default_avatar},on:{click:function(t){return o.editAvatar()}}})]),o._v(" "),o.userInfo?i("span",{staticClass:"m-top_10 font_17",staticStyle:{"font-weight":"bold"}},[o._v(o._s(o.userInfo.name))]):o._e(),o._v(" "),o.userInfo?i("span",{staticClass:"m-top_10"},[o._v(o._s(o.dsf.config.login.showField?o.userInfo[o.dsf.config.login.showField]:o.userInfo.deptName))]):o._e()]),o._v(" "),o._l(o.menuList,function(t,e){return i("van-list",{key:e,staticClass:"m-top_10"},o._l(t,function(n,t){return i("van-cell",{key:"".concat(e,"_").concat(t)},["route"==n.type?i("div",{staticClass:"flex ac jb",on:{click:function(t){return o.goRoute(n.routeUrl,n)}}},[i("i",{staticClass:"iconfont font_20",class:[n.icon],style:{padding:"0 10px",color:n.color}}),o._v(" "),i("span",{staticClass:"font_16",staticStyle:{flex:"1"}},[o._v(o._s(n.menuText))]),o._v(" "),i("van-icon",{staticClass:"font_14",attrs:{color:"#999",name:"arrow"}})],1):"switch"==n.type?i("div",{staticClass:"flex ac jb"},[i("i",{staticClass:"iconfont font_20",class:[n.icon],style:{padding:"0 10px",color:n.color}}),o._v(" "),i("span",{staticClass:"font_16",staticStyle:{flex:"1"}},[o._v(o._s(n.menuText))]),o._v(" "),"autoLogin"==n.model?i("van-switch",{attrs:{size:"24px"},model:{value:o.autoLogin,callback:function(t){o.autoLogin=t},expression:"autoLogin"}}):o._e(),o._v(" "),"openFingerprint"==n.model?i("van-switch",{attrs:{size:"24px"},model:{value:o.openFingerprint,callback:function(t){o.openFingerprint=t},expression:"openFingerprint"}}):o._e()],1):"normal"==n.type?i("div",{staticClass:"flex ac jb"},[i("i",{staticClass:"iconfont font_20",class:[n.icon],style:{padding:"0 10px",color:n.color}}),o._v(" "),i("span",{staticClass:"font_16",staticStyle:{flex:"1"}},[o._v(o._s(n.menuText))]),o._v(" "),i("span",[o._v(o._s(o.version)+" ")])]):o._e()])}),1)})],2),o._v(" "),o.exitButton.isShow?i("div",{staticClass:"exit-btn-container"},[i("div",{staticClass:"exitButton",style:{bottom:o.$store.state.isShowAppFooter?"1.2rem":0}},[i("van-button",{attrs:{type:"info"},on:{click:o.exit}},[o._v(o._s(o.exitButton.buttonName))])],1)]):o._e()])},[],!1,null,"23f0d94e",null).exports},11727:function(t,n,e){t.exports=e.p+"static/img/default-avatar.ad3a581..png"}}]);