"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[97842],{97842:function(t,e,n){n.r(e),n.d(e,{default:function(){return r}});var e=n(8450),i=n.n(e),e={data:function(){return{weatherdata:{city:"上海",date:"2014年03月21日",week:"星期五",temperature:"8℃~20℃",weather:"晴转霾",air_quality:"良"}}},created:function(){}},s=n(51900),e=(0,s.Z)(e,function(){this._self._c;return this._m(0)},[function(){var t=this._self._c;return t("div",{attrs:{id:"weather-info"}},[t("iframe",{staticClass:"tianqi_a",attrs:{width:"350",scrolling:"no",height:"25",frameborder:"0",src:"https://i.tianqi.com?c=code&id=34&bgc=%23&icon=1&site=12"}})])}],!1,null,"8c868baa",null).exports,a=n(25108),r=(0,s.Z)({name:"moduleIndex",data:function(){return{title_css:{},user:dsf.util.loadSessionStore("user")||{},settingModel:!1,mainMenu:[],myMenus:[],searchVal:"",page_title:["企业服务专员工作平台","上海市企业服务云平台","企业服务专员管理平台"],actions:[],actionIndex:0,isShowChildMenuPopup:!1,currentChildMenu:null}},created:function(){this.title_css={backgroundImage:"url('./static/images/EnterpriseServices/bg2.png')"},0<this.user.privileges.filter(function(t){return"专员"==t.privilegeName}).length&&this.actions.push({name:"专员",id:0}),0<this.user.privileges.filter(function(t){return"服务中心管理员"==t.privilegeName}).length&&this.actions.push({name:"服务中心管理员",id:2}),0<this.user.privileges.filter(function(t){return"企业管理员"==t.privilegeName}).length&&this.actions.push({name:"企业管理员",id:1}),0<this.user.privileges.filter(function(t){return"市区府办"==t.privilegeName}).length&&this.actions.push({name:"市区府办",id:3}),this.actionIndex=0<this.actions.length?this.actions[0].id:0},watch:{searchVal:function(t){}},methods:{onSelect:function(t){this.settingModel=!1,this.actionIndex!=t.id&&(this.actionIndex=t.id,dsf.layer.toast("切换角色成功"))},getMenu:function(){var n=this,e=[];dsf.http.post("fn/newFile/shortcutDing",{}).then(function(t){t.data.data.forEach(function(t){var i={name:t.shortcutName,id:t.id,isOpen:!1,child:[]};t.children.forEach(function(t){var e=t.agentid;try{""!=e&&(e=JSON.parse(e))}catch(t){e={}}var n={id:t.id,isOpen:!1,name:t.shortcutName,badge:t.tip,router:t.actUrl,img:t.shortcutIcon,props:e,type:t.shortcutType,child:[]};t.children.forEach(function(t){t={id:t.id,isOpen:!1,name:t.shortcutName,badge:t.tip,router:t.actUrl,img:t.shortcutIcon,props:e,type:t.shortcutType,child:[]};n.child.push(t)}),i.child.push(n)}),e.push(i)}),e.forEach(function(t){t.child.forEach(function(e){e.badgeNum=0,e.isshow=!0;var t=n.myMenus.filter(function(t){return t.name==e.name});e.hasMyMenu=t.length,e.badge&&""!=e.badge&&dsf.http.post(e.badge,{}).then(function(t){e.badgeNum=t.data.badge})})}),n.mainMenu=e,a.log(n.mainMenu,t)})},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},openDDApp:function(t){dd.biz.microApp.openApp({agentId:t,onSuccess:function(t){},onFail:function(t){}})},addClick:function(t){dsf.http.post("fn/mobileDataAnalyze/addEmpowerment",{menuid:t.id,userid:this.user.user_id}).then(function(t){a.log(t)})},goRoute:function(t){"营销力赋能"!=t.name&&"上线赋能"!=t.name&&"融通对接"!=t.name||this.addClick(t),t.child.length?(this.currentChildMenu=t,this.isShowChildMenuPopup=!0,a.log(this.currentChildMenu)):t.type&&3==t.type?this.openDDApp(t.router):2==t.type?dsf.config.ddSetting.isDing?dd.biz.util.openLink({url:t.router,onSuccess:function(t){},onFail:function(t){}}):this.$router.push({path:"iframe",params:{url:t.router}}):t.props?t.props.props?this.$router.push({path:t.router,query:JSON.parse(i()(t.props))}):this.$router.push({name:t.router,params:JSON.parse(i()(t.props))}):this.$router.push({path:t.router})}},components:{weather:e},mounted:function(){this.getMenu()}},function(){var n=this,i=n._self._c;return i("div",{staticClass:"ds-moduleIndex"},[i("div",{staticClass:"appBox"},[i("div",{staticClass:"page_title",style:n.title_css},[i("p",[n._v(n._s(n.page_title[n.actionIndex]))]),n._v(" "),i("van-search",{attrs:{clearable:!1,"show-action":!0,offset:100,placeholder:"搜索服务、事项等"},scopedSlots:n._u([{key:"left-icon",fn:function(){return[i("van-icon",{attrs:{name:"search",color:"#FFF"}})]},proxy:!0},{key:"action",fn:function(){return[i("div",{staticClass:"flex ac"},[i("van-icon",{attrs:{name:"wap-nav",color:"#FFF",size:"0.48rem"},on:{click:function(t){n.settingModel=!0}}})],1)]},proxy:!0}]),model:{value:n.searchVal,callback:function(t){n.searchVal=t},expression:"searchVal"}})],1),n._v(" "),1==n.actionIndex?i("img",{attrs:{src:"static/images/EnterpriseServices/banner.png",alt:""}}):n._e(),n._v(" "),i("weather"),n._v(" "),n._l(n.mainMenu,function(t,e){return i("div",{key:e,staticClass:"item-cell",class:{card:t.child.length},style:{"margin-top":e?"":"0"}},[0<t.child.length?i("div",{staticClass:"title"},[i("span",[n._v(n._s(t.name))])]):n._e(),n._v(" "),0<t.child.length?i("div",{staticClass:"dsf-list"},n._l(t.child,function(e,t){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isshow&&0==e.hasMyMenu,expression:"subItem.isshow && subItem.hasMyMenu == 0"}],key:t,staticClass:"menu",on:{click:function(t){return n.goRoute(e)}}},[i("img",{attrs:{src:e.img,alt:""}}),n._v(" "),i("p",[n._v(n._s(e.name))])])}),0):n._e()])}),n._v(" "),1==n.actionIndex?i("div",{staticClass:"item-cell card"},[n._m(0),n._v(" "),n._m(1)]):n._e()],2),n._v(" "),n.isShowChildMenuPopup&&n.currentChildMenu?i("div",{staticClass:"my-popup"},[i("van-nav-bar",{attrs:{title:n.currentChildMenu.name,"left-arrow":""},on:{"click-left":function(t){n.isShowChildMenuPopup=!1}}}),n._v(" "),i("div",{staticClass:"child-menu-container mar-top_10"},n._l(n.currentChildMenu.child,function(e,t){return i("div",{key:t,staticClass:"child-menu",on:{click:function(t){return n.goRoute(e)}}},[i("img",{attrs:{src:e.img,alt:""}}),n._v(" "),i("p",[n._v(n._s(e.name))])])}),0)],1):n._e(),n._v(" "),i("van-popup",{attrs:{round:"",position:"bottom"},model:{value:n.settingModel,callback:function(t){n.settingModel=t},expression:"settingModel"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:n.actions,"default-index":n.actionIndex,"value-key":"name"},on:{confirm:n.onSelect,cancel:function(t){n.settingModel=!1}}})],1)],1)},[function(){var t=this._self._c;return t("div",{staticClass:"title"},[t("span",[this._v("最新活动")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"img-container mar-bottom_10"},[e("img",{attrs:{src:"static/images/EnterpriseServices/footer_1.png",alt:""}}),t._v(" "),e("img",{attrs:{src:"static/images/EnterpriseServices/footer_2.png",alt:""}}),t._v(" "),e("img",{attrs:{src:"static/images/EnterpriseServices/footer_3.png",alt:""}})])}],!1,null,"3deb4f99",null).exports}}]);