"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[93214],{93214:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});a(34837);var s=a(36689),e=a(77193),i=(a(41762),a(41956)),n=a(79529),o=a.n(n),r=a(25108),n={name:"Pswiper",data:function(){return{show:!0,count:30,count1:6,isShow:!1,dis:!0,list:["2","4","6","8"],selected:2,dataList:[],isSrc:"",autoplay:2e3,showPop:!0,Inter:function(){}}},props:{hljConfig:{type:Object,default:function(){return{}}}},created:function(){var e=this;dsf.http.get("ctrl/material/getFileInfor").then(function(t){e.isSrc=t.data.data.sclxText,e.dataList=t.data.data.idList.map(function(t){return e.getPhotoSrc("/ctrl/material/fileFlow?fileId=".concat(t))})})},methods:{getPhotoSrc:function(t){return dsf.url.getWebPath(t)},changeTime:function(){this.autoplay=1e3*o()(this.selected),dsf.util.saveToLocalStore("swiperSet",this.selected)}},mounted:function(){this.list=this.hljConfig.swiperSelect,this.selected=Number(dsf.util.loadLocalStore("swiperSet")?dsf.util.loadLocalStore("swiperSet"):2),this.autoplay=1e3*o()(this.selected)},watch:{showPop:{handler:function(t){var e=this;r.log(t),t?this.Inter=setInterval(function(){0<e.count?e.count--:(e.show=!1,e.isShow=!1,clearInterval(e.Inter)),0<e.count1?e.count1--:e.dis=!1},1e3):clearInterval(this.Inter)},immediate:!0}}},c=a(51900),n=(0,c.Z)(n,function(){var s=this,i=s._self._c;return i("van-popup",{style:{height:"100%"},attrs:{overlay:!1},model:{value:s.show,callback:function(t){s.show=t},expression:"show"}},[i("van-button",{staticClass:"p-close",attrs:{disabled:s.dis},on:{click:function(t){s.show=!1}}},[s._v("关闭")]),s._v(" "),i("div",{staticClass:"pswiper-container"},[i("div",{staticClass:"main"},[s.showPop?i("div",{staticClass:"toptips"},[i("span",[s._v("观看"+s._s(s.count)+"秒后自动关闭，"+s._s(s.count1)+"秒后可点击关闭")])]):s._e(),s._v(" "),"图片"!=s.isSrc&&s.isSrc?i("video",{staticStyle:{height:"500px","object-fit":"cover"},attrs:{loop:"",controls:"",muted:"",autoplay:"",src:s.dataList[0]},domProps:{muted:!0}}):i("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:s.autoplay,"indicator-color":"white"}},s._l(s.dataList,function(t,e){return i("van-swipe-item",{key:e},[i("img",{attrs:{src:t}})])}),1),s._v(" "),i("div",{staticClass:"pimg",on:{click:function(t){s.isShow=!0}}},[i("img",{attrs:{src:a(92141),alt:""}})]),s._v(" "),i("van-popup",{attrs:{overlay:!1,round:"",closeable:"","close-icon":"close"},model:{value:s.isShow,callback:function(t){s.isShow=t},expression:"isShow"}},[i("div",{staticClass:"change"},[i("div",{staticClass:"content"},[i("p",[s._v("设置")]),s._v(" "),i("div",{staticClass:"lb"},[i("span",[s._v("轮播频率")]),s._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:s.selected,expression:"selected"}],on:{change:[function(t){var e=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});s.selected=t.target.multiple?e:e[0]},s.changeTime]}},s._l(s.list,function(t,e){return i("option",{key:e,domProps:{value:t}},[s._v("\n                                    "+s._s(t)+"\n                                ")])}),0),s._v(" "),i("span",[s._v("秒")])])])])])],1)])],1)},[],!1,null,"6da43313",null).exports,l=a(25108),i={name:"hljPad_index",components:((0,e.Z)(n={Pswiper:n},i.Z.name,i.Z),(0,e.Z)(n,"MyInfo",function(){return a.e(91727).then(a.bind(a,91727))}),n),data:function(){return{tab_list:[],tab_active:"service",index_list:[],show_content:!1,school_url:"",school_load:!1,sign_popup:!1,current_time:{year:(new Date).getFullYear(),mounth:9<(new Date).getMonth()+1?(new Date).getMonth()+1:"0"+((new Date).getMonth()+1),day:9<(new Date).getDate()?(new Date).getDate():"0"+(new Date).getDate(),hour:9<(new Date).getHours()?(new Date).getHours():"0"+(new Date).getHours(),minutes:9<(new Date).getMinutes()?(new Date).getMinutes():"0"+(new Date).getMinutes()},issign:0,signstae:"签到",hljConfig:{}}},watch:{tab_active:function(t,e){"service"===t&&this.getBadge({},"request"),"service"==t&&this.getBadge({},"request")}},created:function(){var i=this;s.Z.loading({message:"加载中...",forbidClick:!0,duration:1e3,onClose:function(){i.show_content=!0}}),dsf.http.get("static/hljMedicine.json").then(function(t){dsf.config.hlj=t.data,i.hljConfig=t.data,l.log(111),l.log(dsf.config.hlj),i.tab_list=t.data.tab_list,i.tab_active=t.data.tab_active,i.index_list=t.data.index_list;var e=t.data.school_url.match(/\[.*?.\]/gi),s=(l.log(e),t.data.school_url);e.forEach(function(t){var e=t.substring(1).replace("]","");s=s.replace(t,i.$user[e])}),i.school_url=s,l.log(i.school_url,t),i.getBadge({},"request")})},activated:function(){this.getBadge({},"request")},mounted:function(){},methods:{tabClick:function(t){"school"==t.active_name?"app"==dsf.util.getClientName()?xsfWindow.openWebView({title:t.name,url:this.school_url,colorString:"#111111",show_loading:!0,orientation:0},function(){}):this.$router.push({name:"dsfIframe",params:{url:this.school_url,title:t.name},query:{url:encodeURIComponent(this.school_url)}}):this.tab_active=t.active_name},sign:function(){var e=this,t={userName:this.$user.name,userId:this.$user.user_id,state:"1"};1==e.issign?t.state="-1":-1==e.issign&&dsf.layer.toast("请勿重复操作！"),dsf.http.post("fn/mobile/sign",t).then(function(t){e.sign_popup=!1,dsf.layer.toast(t.data.message)})},checkSign:function(e){var s=this,i=this;dsf.http.post("fn/mobile/checksign",{userName:this.$user.name,userId:this.$user.user_id,state:"1"}).then(function(t){if(200==t.data.code){if(t.data.data.status)return i.issign=1,dsf.http.post("fn/mobile/checksign",{userName:s.$user.name,userId:s.$user.user_id,state:"-1"});i.issign=0,e()}}).then(function(t){200==t.data.code&&(t.data.data.status?i.issign=-1:i.signstae="签退",e(t.data.data))})},getBadge:function(e,t){var s=this;"request"==t?this.index_list.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t.badge_url&&s.getBadge(t)})})}):dsf.http.post(e.badge_url,{}).then(function(t){e.badge=99<t.data.badge?"99+":t.data.badge}).error(function(t){return-1<t.message.indexOf("404")&&dsf.layer.toast("登录接口异常，请联系系统管理员！"),0})},skipTo:function(e){var s=this;if(!e.router&&e.toast)dsf.layer.toast(e.toast);else switch(String(e.type)){case"1":this.$router.push({path:e.router});break;case"2":if(l.log("进入到了"),-1<e.name.indexOf("地图")){l.log("服务地图");var i=this;try{$BaiduLocation.getLocation({},function(t){l.log("插件方法体",t);t=JSON.parse(t),t=e.router.replace("[latitude]",t.latitude).replace("[longitude]",t.longitude);i.$router.push({name:"dsfIframe",params:{url:t,title:e.name},query:{url:t,title:e.name}})},function(t){alert(t)})}catch(t){dsf.layer.toast("定位失败")}}else e.confirm?dsf.layer.toast(e.confirm,0,function(){t(s,e)}):t(this,e);break;case"3":"showPopup"==e.operate?(this.current_time.hour=9<(new Date).getHours()?(new Date).getHours():"0"+(new Date).getHours(),this.current_time.minutes=9<(new Date).getMinutes()?(new Date).getMinutes():"0"+(new Date).getMinutes(),this.checkSign(function(t){-1==s.issign?dsf.layer.toast("您已在：".concat(t.sign_time,"签退成功！")):s.sign_popup=!0})):"showSwiper"==e.operate&&(this.$refs.popSwiper.show=!0,this.$refs.popSwiper.showPop=!1);break;default:dsf.layer.toast("当前功能正在建设。。。")}function t(t,e){t.$router.push({name:"dsfIframe",params:{url:e.router,title:e.name},query:{url:e.router,title:e.name}})}}}},u=(0,c.Z)(i,function(){var i=this,a=i._self._c;return a("div",{attrs:{id:"hljPad_index"}},[a("img",{attrs:{src:"static/images/hljMedicine/login_logo.png",alt:""}}),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:i.show_content&&"service"==i.tab_active,expression:"show_content && tab_active == 'service'"}],ref:"indexService",staticClass:"index_body index_one"},[a("div",{staticClass:"contents"},i._l(i.index_list,function(t,s){return a("div",{key:s,staticClass:"content"},i._l(t,function(t,e){return a("div",{key:e,class:"single_content single_content"+s,style:{width:t[0].width}},i._l(t,function(e,t){return a("div",{key:t,staticClass:"single_item",style:{"background-image":"url("+e.img+")",height:e.height},on:{click:function(t){return i.skipTo(e)}}},[a("div",{staticClass:"word"},[a("p",[i._v(i._s(e.name))]),i._v(" "),e.subname?a("p",{staticClass:"subname"},[i._v(i._s(e.subname))]):i._e(),i._v(" "),e.button?a("van-button",{attrs:{round:"",size:"normal"}},[i._v("\n                查看\n              ")]):i._e(),i._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[i._v(i._s(e.badge))]),i._v(" "),e.badge?a("van-badge",{attrs:{content:e.badge}}):i._e()],1)])}),0)}),0)}),0)]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:i.show_content&&"school"==i.tab_active,expression:"show_content && tab_active == 'school'"}],staticClass:"index_body index_school"}),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:i.show_content&&"mine"==i.tab_active,expression:"show_content && tab_active == 'mine'"}],staticClass:"index_body index_mine"},[a("MyInfo",{staticStyle:{height:"100% !important"}})],1),i._v(" "),a("div",{staticClass:"test"},i._l(i.tab_list,function(e,t){return a("div",{key:t,class:{tab_item:!0,tab_active:i.tab_active==e.active_name}},[a("div",{staticStyle:{height:"100%",display:"inline-block",padding:"5px 0"},on:{click:function(t){return i.tabClick(e)}}},[a("img",{attrs:{src:e.img,alt:""}}),i._v(" "),a("span",[i._v(i._s(e.name))])])])}),0),i._v(" "),a("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:i.sign_popup,callback:function(t){i.sign_popup=t},expression:"sign_popup"}},[a("div",{staticClass:"sign_popup"},[a("p",{staticStyle:{color:"#666"}},[i._v("当前时间")]),i._v(" "),a("p",{staticClass:"time"},[i._v("\n        "+i._s(i.current_time.year)+"年"+i._s(i.current_time.mounth)+"月"+i._s(i.current_time.day)+"日\n      ")]),i._v(" "),a("p",{staticClass:"time"},[i._v(i._s(i.current_time.hour)+":"+i._s(i.current_time.minutes))]),i._v(" "),a("p",{staticStyle:{color:"#333"}},[i._v("是否"+i._s(i.signstae))]),i._v(" "),a("div",[a("van-button",{staticStyle:{color:"#666","margin-right":"15px"},attrs:{color:"#BFC9D6"},on:{click:function(t){i.sign_popup=!1}}},[i._v("\n          否\n        ")]),i._v(" "),a("van-button",{attrs:{color:"#3E8BEC"},on:{click:function(t){return i.sign()}}},[i._v("是")])],1)])]),i._v(" "),i.hljConfig.swiperSelect?a("div",[a("Pswiper",{ref:"popSwiper",attrs:{hljConfig:i.hljConfig}})],1):i._e()],1)},[],!1,null,"9c79aff2",null).exports},92141:function(t,e,s){t.exports=s.p+"static/img/site.7856a06..png"}}]);