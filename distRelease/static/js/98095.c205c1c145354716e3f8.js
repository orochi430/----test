(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[98095],{23263:function(t,a,e){var i=e(55623),n=e(87587),e=e(33051),o=e.extend,r=e.isArray;t.exports=function(t,a,e){a=r(a)?{coordDimensions:a}:o({},a);var s=t.getSource(),a=i(s,a);return(a=new n(a,t)).initData(s,e),a}},58086:function(t,a,e){"use strict";function s(t,a){return JSON.stringify(t)===JSON.stringify(a)}var i=e(35976),u=e(40216),n=e(78054),o=e(95566),r=e(18169),l=e(94611),e=e(12098),i=(0,i.d)("slider"),c=i[0],d=i[1];a.Z=c({mixins:[l.D,e.f],props:{disabled:Boolean,vertical:Boolean,range:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},value:{type:[Number,Array],default:0}},data:function(){return{dragStatus:""}},computed:{scope:function(){return this.max-this.min},buttonStyle:function(){var t;if(this.buttonSize)return{width:t=(0,u.N)(this.buttonSize),height:t}}},created:function(){this.updateValue(this.value)},mounted:function(){this.range?(this.bindTouchEvent(this.$refs.wrapper0),this.bindTouchEvent(this.$refs.wrapper1)):this.bindTouchEvent(this.$refs.wrapper)},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.currentValue=this.value,this.range?this.startValue=this.value.map(this.format):this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){this.disabled||("start"===this.dragStatus&&this.$emit("drag-start"),(0,o.PF)(t,!0),this.touchMove(t),this.dragStatus="draging",t=this.$el.getBoundingClientRect(),t=(this.vertical?this.deltaY:this.deltaX)/(this.vertical?t.height:t.width)*this.scope,this.range?this.currentValue[this.index]=this.startValue[this.index]+t:this.currentValue=this.startValue+t,this.updateValue(this.currentValue))},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.currentValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){var a,e;t.stopPropagation(),this.disabled||(e=this.$el.getBoundingClientRect(),t=this.vertical?t.clientY-e.top:t.clientX-e.left,e=this.vertical?e.height:e.width,t=+this.min+t/e*this.scope,this.range&&(t<=((a=(e=this.value)[0])+(e=e[1]))/2?a=t:e=t,t=[a,e]),this.startValue=this.value,this.updateValue(t,!0))},handleOverlap:function(t){return t[0]>t[1]?(t=(0,n.I)(t)).reverse():t},updateValue:function(t,a){t=this.range?this.handleOverlap(t).map(this.format):this.format(t),s(t,this.value)||this.$emit("input",t),a&&!s(t,this.startValue)&&this.$emit("change",t)},format:function(t){var a=+this.min,e=+this.max,s=+this.step,e=(t=(0,r.w6)(t,a,e),Math.round((t-a)/s)*s);return(0,r.Ft)(a,e)}},render:function(){function t(){var t=o.value,a=o.min,e=o.range,s=o.scope;return e?100*(t[0]-a)/s+"%":null}function a(a){var e="number"==typeof a,s=e?o.value[a]:o.value;return r("div",{ref:e?"wrapper"+a:"wrapper",attrs:{role:"slider",tabindex:o.disabled?-1:0,"aria-valuemin":o.min,"aria-valuenow":o.value,"aria-valuemax":o.max,"aria-orientation":o.vertical?"vertical":"horizontal"},class:d(e?"button-wrapper-"+["left","right"][a]:"button-wrapper"),on:{touchstart:function(){e&&(o.index=a)},click:function(t){return t.stopPropagation()}}},[function(){if(e){var t=o.slots(0===a?"left-button":"right-button",{value:s});if(t)return t}return o.slots("button")?o.slots("button"):r("div",{class:d("button"),style:o.buttonStyle})}()])}var e,s,i,n,o=this,r=arguments[0],l=this.vertical,c=l?"height":"width",h=((n={background:this.inactiveColor})[l?"width":"height"]=(0,u.N)(this.barHeight),(e={})[c]=(c=o.value,s=o.min,h=o.range,i=o.scope,h?100*(c[1]-c[0])/i+"%":100*(c-s)/i+"%"),e.left=this.vertical?null:t(),e.top=this.vertical?t():null,e.background=this.activeColor,e);this.dragStatus&&(h.transition="none");return r("div",{style:n,class:d({disabled:this.disabled,vertical:l}),on:{click:this.onClick}},[r("div",{class:d("bar"),style:h},[this.range?[a(0),a(1)]:a()])])}})},88152:function(t,a,e){"use strict";e(99780)},69823:function(t,a,e){"use strict";e.d(a,{Z:function(){return i}});var o=e(5044),a=e(77193),s=(e(88152),e(58086)),r=e(25108),a={components:(0,a.Z)({},s.Z.name,s.Z),props:{data:{type:Array,default:function(){return[]}},showDefault:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},showSlider:{type:Boolean,default:!1},adjoinGrey:{type:Boolean,default:!1},tbHighLight:{type:Boolean,default:!1},title:{type:String,default:""}},data:function(){return{slider:0,isShow:!1,dataList:this.data.slice(),order:"original"}},watch:{data:function(t){this.dataList=t}},computed:{tableWidth:function(){return 100+this.slider},tableSize:function(){return.28+this.slider/1e3}},mounted:function(){var t=this;this.$refs.dsfTable&&this.$refs.dsfTable.addEventListener("touchend",function(){clearTimeout(t.timeout),t.isShow=!0,t.timeout=setTimeout(function(){return t.isShow=!1},2e3)})},methods:{onChange:function(t){},sort:function(s){r.log("1111111111111111");var i,t,n=this;"showArrow"==s.showCategory&&(i=function(t,a){for(var e=[];0<t.length&&0<a.length;)Number(t[0].dataValue[s.showMetaColumn])<Number(a[0].dataValue[s.showMetaColumn])?"up"==n.order?e.push(t.shift()):e.push(a.shift()):"up"==n.order?e.push(a.shift()):e.push(t.shift());return[].concat(e,(0,o.Z)(t),(0,o.Z)(a))},t=function t(a){var e,s;return 1==a.length?a:(e=Math.floor(a.length/2),s=a.slice(0,e),a=a.slice(e),i(t(s),t(a)))},"up"==this.order?this.order="down":"down"==this.order?this.order="original":this.order="up","original"==this.order?this.dataList=this.data:this.dataList=t(this.dataList))}}},i=(0,e(51900).Z)(a,function(){var e=this,s=e._self._c;return s("div",[0<e.showDefault.length?s("div",{staticClass:"top"},[e._l(e.showDefault,function(t,a){return[t.showName?s("div",{key:a},[t.showName?s("span",[e._v(e._s(t.showName))]):e._e(),e._v(" "),t.text?s("span",[e._v(":"+e._s(t.text))]):e._e()]):e._e()]})],2):e._e(),e._v(" "),e.columns.length?s("div",{ref:"dsfTable",staticClass:"dsf-table"},[s("div",{staticClass:"table",style:{width:e.tableWidth+"vw",fontSize:e.tableSize+"rem"}},[e.title?s("van-row",{staticStyle:{"font-size":"var(--font_size_2)"}},[s("van-col",{class:{highLight:e.tbHighLight},style:{color:e.tbHighLight?"#fff":"",padding:"0.2rem 0"},attrs:{span:"24"}},[e._v(e._s(e.title))])],1):e._e(),e._v(" "),s("van-row",{attrs:{type:"flex",justify:"space-between"}},e._l(e.columns,function(a){return s("van-col",{key:a.showMetaColumn,staticClass:"flex jc ac",class:{highLight:e.tbHighLight},style:{width:100/e.columns.length+"%"},on:{click:function(t){return e.sort(a)}}},[s("span",{style:{color:e.tbHighLight?"#fff":"",verticalAlign:"center"}},[e._v(e._s(a.showName))])])}),1),e._v(" "),e._l(e.dataList,function(a,t){return s("van-row",{key:t,class:{highLight:a.dataValue.isHighLight},style:{backgroundColor:e.adjoinGrey&&t%2==0?"#f1f1f1":""},attrs:{type:"flex",justify:"space-between"}},e._l(e.columns,function(t){return s("van-col",{key:t.showMetaColumn,style:{width:100/e.columns.length+"%",textAlign:"showArrow"==t.showCategory?"right":""}},[s("span",[e._v(e._s(a.dataValue[t.showMetaColumn]))]),e._v(" "),"showArrow"==t.showCategory?s("van-icon",{style:{transform:0<a.dataValue[t.showMetaColumn]?"rotate(180deg)":""},attrs:{name:"down",color:0<a.dataValue[t.showMetaColumn]?"#4daf7b":"#e32416"}}):e._e()],1)}),1)})],2),e._v(" "),e.isShow&&e.showSlider?s("div",{staticClass:"slider"},[s("van-slider",{attrs:{vertical:""},on:{change:e.onChange},model:{value:e.slider,callback:function(t){e.slider=t},expression:"slider"}})],1):e._e()]):e._e()])},[],!1,null,"a637e0f6",null).exports},9117:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return n}});var a=e(54258),s=(e(46295),e(27539),e(40451),e(21865),e(78511),e(83062),e(69823)),i=e(25108),a={components:{VChart:a.Z,DsfListTable:s.Z},data:function(){return{date:"",chooseTime:"",showPicker:!1,active:0,columns0:[],data0:[],columns1:[],data1:[],inventoryChart:{color:["#fc8452","#73c0de","#3ba272","#5470c6","#91cc75","#fac858","#ee6666","#9a60b4","#ea7ccc"],tooltip:{},legend:{data:["购进量","销售量","库存量"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{},xAxis:{type:"category",data:[],splitLine:{show:!0}},yAxis:{type:"value",name:"(万箱)"},series:[{name:"购进量",type:"line",label:{show:!1},data:[]},{name:"销售量",type:"line",label:{show:!1},data:[]},{name:"库存量",type:"line",label:{show:!1},data:[]}]},targetGaugeChart:{color:["#73c0de","#fc8452","#3ba272","#5470c6","#91cc75","#fac858","#ee6666","#9a60b4","#ea7ccc"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",name:"(进度%)"},xAxis:{type:"category",data:["销量进度","时间进度"]},series:[{name:"已完成",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]},{name:"剩余",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]}]},monthSalesChart:{color:["#fc8452","#73c0de","#3ba272","#5470c6","#91cc75","#fac858","#ee6666","#9a60b4","#ea7ccc"],tooltip:{},legend:{data:["增幅"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{},xAxis:{type:"category",data:[],splitLine:{show:!0}},yAxis:{type:"value",name:"(增幅%)"},series:[{name:"增幅",type:"line",label:{show:!0,color:"#000"},data:[]}]},citySalesChart:{color:["#73c0de","#fc8452","#3ba272","#5470c6","#91cc75","#fac858","#ee6666","#9a60b4","#ea7ccc"],xAxis:{type:"category",data:[],axisLabel:{interval:0,formatter:function(t){return t.split("").join("\n")}}},yAxis:{type:"value",name:"(增幅%)"},series:[{data:[],type:"bar"}]}}},computed:{selectColumns:function(){var t=[],a=new Date;a.getFullYear();a.setMonth(a.getMonth()+1,1);for(var e=0;e<12;e++){a.setMonth(a.getMonth()-1);var s=(s=a.getMonth()+1)<10?"0"+s:s;t.push(a.getFullYear()+"年"+s+"月")}return t}},watch:{chooseTime:function(t,a){i.log(t);var e=t==this.selectColumns[0]?new Date(new Date-864e5):new Date(t.slice(0,4),t.slice(5,7),0);i.log(new Date(t.slice(0,4),t.slice(5,7),0)),this.date=dsf.date.format(e,"mm月dd日"),this.init()}},created:function(){this.chooseTime=this.selectColumns[0]},methods:{changeFn:function(t){i.log(t),this.chooseTime=t,this.showPicker=!1},init:function(){this.getInventoryChart(),this.getTargetGaugeChart(),this.getMonthSalesChart(),this.getCitySalesChart()},getInventoryChart:function(){var a=this,t=dsf.layer.loading();dsf.http.post("ctrl/news/tableList",{type:"qsjyxlfx0",from:"".concat(this.chooseTime.slice(0,4),"-01"),to:"".concat(this.chooseTime.slice(0,4),"-").concat(this.chooseTime.slice(5,7))}).then(function(t){a.columns0=t.data.showColumn,a.data0=t.data.datas,a.inventoryChart.xAxis.data=t.data.datas.map(function(t,a){return"".concat(a+1,"月")}),a.inventoryChart.series[0].data=t.data.datas.map(function(t){return t.dataValue.col2}),a.inventoryChart.series[1].data=t.data.datas.map(function(t){return t.dataValue.col3}),a.inventoryChart.series[2].data=t.data.datas.map(function(t){return t.dataValue.col4})}).finally(function(){dsf.layer.closeLoading(t)})},getTargetGaugeChart:function(){var s=this,t=dsf.layer.loading();dsf.http.post("fn/news/specialChart",{type:"qsjyxlfx1",from:"".concat(this.chooseTime.slice(0,4),"-01"),to:"".concat(this.chooseTime.slice(0,4),"-").concat(this.chooseTime.slice(5,7))}).then(function(t){var a,e;200==t.data.code&&(a=0<100-t.data.data.salesProgress?(100-t.data.data.salesProgress).toFixed(2):0,e=0<100-t.data.data.timeProgress?(100-t.data.data.timeProgress).toFixed(2):0,s.targetGaugeChart.series[0].data=[t.data.data.salesProgress,t.data.data.timeProgress],s.targetGaugeChart.series[1].data=[a,e])}).finally(function(){dsf.layer.closeLoading(t)})},getMonthSalesChart:function(){var a=this,t=dsf.layer.loading();dsf.http.post("fn/news/specialChart",{type:"qsjyxlfx2",from:"".concat(this.chooseTime.slice(0,4),"-01"),to:"".concat(this.chooseTime.slice(0,4),"-").concat(this.chooseTime.slice(5,7))}).then(function(t){200==t.data.code&&(a.monthSalesChart.xAxis.data=t.data.data.growth.map(function(t,a){return"".concat(a+1,"月")}),a.monthSalesChart.series[0].data=t.data.data.growth)}).finally(function(){dsf.layer.closeLoading(t)})},getCitySalesChart:function(){var a=this,t=dsf.layer.loading();dsf.http.post("ctrl/news/tableList",{type:"qsjyxlfx3",from:"".concat(this.chooseTime.slice(0,4),"-01"),to:"".concat(this.chooseTime.slice(0,4),"-").concat(this.chooseTime.slice(5,7))}).then(function(t){a.columns1=t.data.showColumn,a.data1=t.data.datas,a.citySalesChart.xAxis.data=t.data.datas.map(function(t){return t.dataValue.col1}),a.citySalesChart.series[0].data=t.data.datas.map(function(t){return t.dataValue.col4})}).finally(function(){dsf.layer.closeLoading(t)})}}},n=(0,e(51900).Z)(a,function(){var a=this,t=a._self._c;return t("div",[t("van-tabs",{attrs:{swipeable:"",sticky:"","offset-top":a.$store.state.isShowAppHeader?"0.92rem":"0px"},model:{value:a.active,callback:function(t){a.active=t},expression:"active"}},[t("van-tab",{attrs:{title:"进销存趋势"}},[t("div",{staticClass:"allTab"},[t("span",{staticClass:"choose",on:{click:function(t){a.showPicker=!0}}},[a._v(a._s(a.chooseTime)),t("van-icon",{attrs:{name:"arrow-down"}})],1),a._v(" "),t("span",[t("span",{staticClass:"tabIndex"},[a._v(a._s(a.active+1))]),a._v(" / 3")])]),a._v(" "),t("div",{staticClass:"flex jb ac",staticStyle:{margin:"8px 16px"}},[t("span",[a._v("全年累计至"+a._s(a.date))])]),a._v(" "),t("div",{staticClass:"title"},[a._v("进销存趋势")]),a._v(" "),t("div",{staticClass:"chart-container"},[t("v-chart",{attrs:{options:a.inventoryChart}})],1),a._v(" "),t("DsfListTable",{attrs:{columns:a.columns0,data:a.data0,showSlider:!0,adjoinGrey:!0,tbHighLight:!0}})],1),a._v(" "),t("van-tab",{attrs:{title:"销量与序时进度对比"}},[t("div",{staticClass:"allTab"},[t("span",{staticClass:"choose",on:{click:function(t){a.showPicker=!0}}},[a._v(a._s(a.chooseTime)),t("van-icon",{attrs:{name:"arrow-down"}})],1),a._v(" "),t("span",[t("span",{staticClass:"tabIndex"},[a._v(a._s(a.active+1))]),a._v(" / 3")])]),a._v(" "),t("div",{staticClass:"flex jb ac",staticStyle:{margin:"8px 16px"}},[t("span",[a._v("全年累计至"+a._s(a.date))])]),a._v(" "),t("div",{staticClass:"title"},[a._v("销量与序时进度对比")]),a._v(" "),t("div",{staticClass:"chart-container"},[t("v-chart",{attrs:{options:a.targetGaugeChart}})],1),a._v(" "),t("div",{staticClass:"title"},[a._v("每月销量同比增幅图")]),a._v(" "),t("div",{staticClass:"chart-container"},[t("v-chart",{attrs:{options:a.monthSalesChart}})],1)]),a._v(" "),t("van-tab",{attrs:{title:"各地市销量同比增幅"}},[t("div",{staticClass:"allTab"},[t("span",{staticClass:"choose",on:{click:function(t){a.showPicker=!0}}},[a._v(a._s(a.chooseTime)),t("van-icon",{attrs:{name:"arrow-down"}})],1),a._v(" "),t("span",[t("span",{staticClass:"tabIndex"},[a._v(a._s(a.active+1))]),a._v(" / 3")])]),a._v(" "),t("div",{staticClass:"flex jb ac",staticStyle:{margin:"8px 16px"}},[t("span",[a._v("全年累计至"+a._s(a.date))])]),a._v(" "),t("div",{staticClass:"title"},[a._v("各地市销量同比增幅")]),a._v(" "),t("div",{staticClass:"chart-container"},[t("v-chart",{attrs:{options:a.citySalesChart}})],1),a._v(" "),t("DsfListTable",{attrs:{columns:a.columns1,data:a.data1,showSlider:!0,adjoinGrey:!0,tbHighLight:!0}})],1)],1),a._v(" "),t("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:a.showPicker,callback:function(t){a.showPicker=t},expression:"showPicker"}},[t("van-picker",{attrs:{title:"选择年月","show-toolbar":"",columns:a.selectColumns},on:{confirm:a.changeFn,cancel:function(t){a.showPicker=!1}}})],1)],1)},[],!1,null,"578ee2d8",null).exports}}]);