"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[93725],{93725:function(t,i,s){s.r(i),s.d(i,{default:function(){return n}});var a=s(88561),i=s(84528),e=s(25108),i={name:"InspectorCondition",components:{DingBtn:i.default},data:function(){return{alreadyFeedbackTotal:0,noFeedbackTotal:0,isActive:"left",isConditionActive:"fkqs2",listData:[],listDataMock:{},type:1,dingObj:{},params:{pk:""}}},mounted:function(){if(this.$route.params.data)a.Z.saveToSessionStore("formData",this.$route.params.data);else{if(!a.Z.loadSessionStore("formData"))return this.$toast.fail("参数错误"),void this.$router.go(-1);this.$route.params.data=a.Z.loadSessionStore("formData")}this.params.pk=this.$route.params.data.dataValue.A0001,this.initList()},methods:{initList:function(){var s=this;dsf.http.get("fn/supervise/approval/detail",s.params).then(function(t){var i=t.data;200===t.status?(s.listDataMock=i,s.clickCondition("fkqs2")):s.dsf.layer.toast(t.message||"获取数据异常")})},clickHeader:function(t){this.isActive=t,this.filtersData()},clickCondition:function(t){this.isConditionActive=t,this.filtersData()},filtersData:function(){"fkqs0"==this.isConditionActive?(this.noFeedbackTotal=this.listDataMock.fkqs0.fkzt01.length,this.alreadyFeedbackTotal=this.listDataMock.fkqs0.fkzt02.length):"fkqs1"==this.isConditionActive?(this.noFeedbackTotal=this.listDataMock.fkqs1.fkzt11.length,this.alreadyFeedbackTotal=this.listDataMock.fkqs1.fkzt12.length):(this.noFeedbackTotal=this.listDataMock.fkqs2.fkzt21.length,this.alreadyFeedbackTotal=this.listDataMock.fkqs2.fkzt22.length),"fkqs0"==this.isConditionActive&&"left"==this.isActive&&(this.listData=this.listDataMock.fkqs0.fkzt01),"fkqs0"==this.isConditionActive&&"right"==this.isActive&&(this.listData=this.listDataMock.fkqs0.fkzt02),"fkqs1"==this.isConditionActive&&"left"==this.isActive&&(this.listData=this.listDataMock.fkqs1.fkzt11),"fkqs1"==this.isConditionActive&&"right"==this.isActive&&(this.listData=this.listDataMock.fkqs1.fkzt12),"fkqs2"==this.isConditionActive&&"left"==this.isActive&&(this.listData=this.listDataMock.fkqs2.fkzt21),"fkqs2"==this.isConditionActive&&"right"==this.isActive&&(this.listData=this.listDataMock.fkqs2.fkzt22);var s=[],a=/(\d{4})-(\d{2})-(\d{2})(\s)(\d{2}):(\d{2})/;this.listData.forEach(function(t){var i;t.time="",t.sjfksj&&(i=a.exec(t.sjfksj),t.time=i[2]+"-"+i[3]+" "+i[5]+":"+i[6]),s.indexOf(t.foreignId)<0&&s.push(t.foreignId)}),e.log("users==>",s),this.$set(this.dingObj,"users",s)},handleClick:function(t){this.$router.push({name:"feedbackReadonly",params:{pk:t.id,moduleId:t.moduleId}})}}},n=(0,s(51900).Z)(i,function(){var s=this,a=s._self._c;return a("div",{staticClass:"inspector-condition"},[a("div",{staticClass:"_header"},[a("div",{staticClass:"_btn",class:"left"==s.isActive?"_active":"",on:{click:function(t){return s.clickHeader("left")}}},[s._v("\n      未反馈"),s.noFeedbackTotal?a("span",[s._v("("+s._s(s.noFeedbackTotal)+")")]):s._e()]),s._v(" "),a("div",{staticClass:"_btn",class:"right"==s.isActive?"_active":"",on:{click:function(t){return s.clickHeader("right")}}},[s._v("\n      已反馈"),s.alreadyFeedbackTotal?a("span",[s._v("("+s._s(s.alreadyFeedbackTotal)+")")]):s._e()])]),s._v(" "),"left"==s.isActive?a("div",{class:{_content:!0,_weifankui:"fkqs2"==s.isConditionActive,_yifanhui:"fkqs2"!=s.isConditionActive}},[a("ul",s._l(s.listData,function(t,i){return a("li",{key:i,staticClass:"_cell"},[a("span",{staticClass:"icon iconfont icontouxiang"}),s._v(" "),a("span",{staticClass:"_cell__title"},[s._v(s._s(t.fkbm))]),s._v(" "),a("span",{class:1==t.status?"_yi _cell__value":"_wei _cell__value"},[s._v(s._s(1==t.status?"已读":"未读"))])])}),0),s._v(" "),a("div",{staticClass:"_footer"},[a("Ding-btn",{attrs:{prarms:s.dingObj,options:{size:"large",type:"info"},text:"DING一下"}})],1)]):s._e(),s._v(" "),"right"==s.isActive?a("div",{staticClass:"_content _yifanhui"},[a("ul",s._l(s.listData,function(i,t){return a("li",{key:t,staticClass:"_cell",class:{cell_li:"right"==s.isActive},on:{click:function(t){return s.handleClick(i)}}},[a("div",{staticClass:"cell_line"},[a("div",{staticClass:"cell_name"},[a("span",{staticClass:"icon iconfont icontouxiang"}),s._v(" "),a("span",{staticClass:"_cell__title"},[s._v(s._s(i.fkbm))])]),s._v(" "),a("div",{staticClass:"cell_time"},[a("span",{staticClass:"_yi _cell__value"},[s._v(s._s(i.time))])])]),s._v(" "),a("div",{staticClass:"cell_content"},[s._v("反馈情况:"+s._s(i.fkqk))])])}),0)]):s._e()])},[],!1,null,"e968a942",null).exports}}]);