"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[89912],{89912:function(t,a,s){s.r(a),s.d(a,{default:function(){return n}});var a=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-title"},[a("p",[a("img",{attrs:{src:s(58405),alt:""}}),t._v(" "),a("span",[t._v("值班人数")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-title"},[a("p",[a("img",{attrs:{src:s(58405),alt:""}}),t._v(" "),a("span",[t._v("各部门值班人数")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"card-title"},[a("p",[a("img",{attrs:{src:s(58405),alt:""}}),t._v(" "),a("span",[t._v("值班次数排行")])])])}],e={name:"dutyStatistics",components:{},props:{},data:function(){return{curTab:1,baseInfo:{},deptDutyData:{names:[],values:[{name:"值班人数",type:"bar",barMaxWidth:25,data:[]}]},dutyNumData:{names:[],values:[{name:"值班天数",type:"bar",barMaxWidth:25,data:[]}]}}},computed:{},watch:{},created:function(){},mounted:function(){this.getDutyInfo(),this.getDeptDutyInfo(),this.getDutyRank()},methods:{changeTab:function(t){this.curTab=t,this.getDutyInfo(),this.getDeptDutyInfo(),this.getDutyRank()},barEchart:function(t,a){var s=echarts.init(this.$refs[t]),t={color:["#0091FF","#E93F3F"],legend:{bottom:"3%",show:1<a.values.length},tooltip:{trigger:"axis",axisPointer:{type:"none"},lineStyle:{opacity:0}},grid:{left:"5%",right:"5%",bottom:"10%",top:"10%",containLabel:!0,z:22},xAxis:{type:"category",data:a.names,axisTick:{show:!1},axisLabel:{show:!0,interval:0,fontSize:12},axisLine:{lineStyle:{color:"#999999"}}},yAxis:{min:0,type:"value",axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#999999",width:1,type:"dashed"}},axisLine:{show:!1,lineStyle:{color:"#999999"}}},series:a.values};s.clear(),s.setOption(t),window.onresize=function(){s.resize()}},getDutyInfo:function(){var a=this;dsf.http.post("ctrl/DutyForMobiles/getDutyInfo",{type:this.curTab}).then(function(t){t&&t.data&&200==t.data.code&&t.data.data&&(a.baseInfo=t.data.data)})},getDeptDutyInfo:function(){var a=this;a.deptDutyData.names=[],a.deptDutyData.values[0].data=[],dsf.http.post("ctrl/DutyForMobiles/getDeptDutyInfo",{type:this.curTab}).then(function(t){t&&t.data&&200==t.data.code&&t.data.data&&(t.data.data.forEach(function(t){a.deptDutyData.names.push(t.orgName),a.deptDutyData.values[0].data.push(t.userNum)}),a.$nextTick(function(){a.barEchart("personBar",a.deptDutyData)}))})},getDutyRank:function(){var a=this;a.dutyNumData.names=[],a.dutyNumData.values[0].data=[],dsf.http.post("ctrl/DutyForMobiles/getDutyRank",{type:this.curTab}).then(function(t){t&&t.data&&200==t.data.code&&t.data.data&&(t.data.data.forEach(function(t){a.dutyNumData.names.push(t.zbrText),a.dutyNumData.values[0].data.push(t.dayNum)}),a.$nextTick(function(){a.barEchart("daysBar",a.dutyNumData)}))})}}},n=(0,s(51900).Z)(e,function(){var a=this,t=a._self._c;return t("div",{staticClass:"dutyStatistics",style:{height:"calc(100vh - ".concat(a.$store.state.isShowAppHeader?"0.92rem":"0px"," - ").concat(a.$store.state.isShowAppFooter?"1.2rem":"0px",")")}},[t("div",{staticClass:"btn-list"},[t("p",{class:1==a.curTab?"active":"",on:{click:function(t){return a.changeTab(1)}}},[a._v("一个月")]),a._v(" "),t("p",{class:2==a.curTab?"active":"",on:{click:function(t){return a.changeTab(2)}}},[a._v("三个月")]),a._v(" "),t("p",{class:3==a.curTab?"active":"",on:{click:function(t){return a.changeTab(3)}}},[a._v("一年")])]),a._v(" "),t("div",{staticClass:"common-card",staticStyle:{"margin-top":"50px"}},[a._m(0),a._v(" "),t("div",{staticClass:"common-content"},[t("ul",{staticClass:"info-list"},[t("li",[t("p",[a._v("总值班人数")]),a._v(" "),t("label",[a._v(a._s(a.baseInfo.total||0))])]),a._v(" "),t("li",[t("p",[a._v("节假日值班人数")]),a._v(" "),t("label",[a._v(a._s(a.baseInfo.jjr||0))])]),a._v(" "),t("li",[t("p",[a._v("工作日值班人数")]),a._v(" "),t("label",[a._v(a._s(a.baseInfo.rc||0))])])])])]),a._v(" "),t("div",{staticClass:"common-card"},[a._m(1),a._v(" "),t("div",{staticClass:"common-content"},[t("div",{ref:"personBar",staticClass:"echart-box"})])]),a._v(" "),t("div",{staticClass:"common-card"},[a._m(2),a._v(" "),t("div",{staticClass:"common-content"},[t("div",{ref:"daysBar",staticClass:"echart-box"})])])])},a,!1,null,"3fda998e",null).exports},58405:function(t,a,s){t.exports=s.p+"static/img/titlebg.bdca99b..png"}}]);