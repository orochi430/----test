"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[54549],{54549:function(t,s,n){n.r(s),n.d(s,{default:function(){return e}});var i=n(25108),s={name:"wisdom_application",props:{bottom_active:{type:String,default:""}},data:function(){return{application_list:[],notice_list:"--",current_session:{},show_session:!1,session_column:[],application_error:!1}},watch:{bottom_active:function(t,s){"application"==t&&this.createdQuest()}},created:function(){this.createdQuest()},mounted:function(){var t=this;this.$nextTick(function(){t.isSkipControl()})},activated:function(){this.createdQuest()},methods:{createdQuest:function(){this.getSession(),this.getNotice()},isSkipControl:function(){var s=this;dsf.http.get("action?EpidemicAppAction=9",{userId:dsf.util.loadSessionStore("user").user_id}).then(function(t){t=t.data;200==t.code&&t.data&&s.$dialog.confirm({title:"提示",message:t.message,confirmButtonText:"去处理",confirmButtonColor:"#DA1C21",cancelButtonText:"忽略",cancelButtonColor:"#999"}).then(function(){s.$router.push({path:"/situationControl",query:{}})}).catch(function(){})})},getSession:function(){var s=this;dsf.http.get("action?peoplesCongressInterfaceAction=2",{},{headers:{userId:dsf.util.loadSessionStore("user").user_id}}).then(function(t){var t=t.data;200==t.code&&(s.session_list=t.data,s.session_column=[],t.data.forEach(function(t){s.session_column.push(t.name)}),dsf.util.loadSessionStore("current_session")?s.current_session=dsf.util.loadSessionStore("current_session"):(t=s.session_list.length-1,s.current_session=s.session_list[t],dsf.util.saveToSessionStore("current_session",s.current_session)),s.getApplication())})},changeSession:function(){this.show_session=!0},sessionConfirm:function(s){var t=this.session_list.filter(function(t){return t.name==s});this.current_session=t[0],dsf.util.saveToSessionStore("current_session",this.current_session),this.getApplication(),i.log(s,this.current_session,this.session_list),this.show_session=!1},getNotice:function(){var s=this;dsf.http.get("action?EpidemicAppAction=13&moduleType=4",{}).then(function(t){i.log(t),s.notice_list=t.data.content})},getApplication:function(){var s=this;this.application_error=!1,dsf.http.get("action?peoplesCongressInterfaceAction=3",{type:this.current_session.type}).then(function(t){t=t.data;200==t.code?s.application_list=t.data[0].children:(s.application_error=!0,dsf.layer.alert({title:"温馨提示",message:t.message},function(){s.$router.back()}))})},skipModule:function(t){this.$router.push({path:t.actUrl,query:{jc:this.current_session.type,menuType:t.menuType}})}}},e=(0,n(51900).Z)(s,function(){var n=this,t=n._self._c;return t("div",{staticClass:"wisdom_application"},[t("img",{attrs:{src:"static/images/greatWisdom/application_bg.png",alt:""}}),n._v(" "),t("div",{staticClass:"body_content"},[t("div",{staticClass:"header"},[t("p",{staticClass:"user"},[t("img",{attrs:{src:"static/images/greatWisdom/head_icon.png",alt:""}}),n._v(" "),t("span",[n._v("早上好！"+n._s(n.$user.name)+"同志")])]),n._v(" "),t("p",{staticClass:"meeting"},[t("span",[n._v(n._s(n.current_session.name))]),n._v(" "),t("img",{attrs:{src:"static/images/greatWisdom/application_exchange.png",alt:""},on:{click:n.changeSession}})])]),n._v(" "),t("div",{staticClass:"contents"},[t("div",{staticClass:"notice"},[t("span",{staticClass:"notice_word"},[n._v("温馨提示")]),n._v(" "),t("p",[t("van-notice-bar",{attrs:{text:n.notice_list}})],1)]),n._v(" "),t("div",{staticClass:"application"},[n._l(n.application_list,function(s){return t("div",{key:s.menuType,staticClass:"single_item",on:{click:function(t){return n.skipModule(s)}}},[t("img",{attrs:{src:s.shortcutIcon,alt:""},on:{error:function(t){t.target.src="static/squMenu/menuNew/dywj.png"}}}),n._v(" "),t("span",[n._v(n._s(s.shortcutName))])])}),n._v(" "),n.application_error||n.application_list.length?n._e():t("van-loading",{staticStyle:{margin:"auto"},attrs:{type:"spinner",color:"#1989fa"}})],2)])]),n._v(" "),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:n.show_session,callback:function(t){n.show_session=t},expression:"show_session"}},[t("van-picker",{attrs:{columns:n.session_column,"show-toolbar":""},on:{cancel:function(t){n.show_session=!1},confirm:n.sessionConfirm}})],1)],1)},[],!1,null,"10cba669",null).exports}}]);