"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[47465],{47465:function(t,e,a){a.r(e),a.d(e,{default:function(){return o}});var s=a(5044),e=a(8450),n=a.n(e),e=a(39946),i=a(25108),e={components:{DsList:e.Z},data:function(){return{isLoading:!1,show:!1,cardType:"1",cardNo:"",signStatus:"",currentExamId:"",datas:[],columns:[{showCategory:"mainTitle",showName:"考试名称",showMetaColumn:"examName"},{showCategory:"needTitle",showName:"考试开始时间",icon:"",showMetaColumn:"examBeginTime"},{showCategory:"needTitle",showName:"考试结束时间",icon:"",showMetaColumn:"examEndTime"},{showCategory:"needTitle",showName:"允许入场时间",icon:"",showMetaColumn:"enterStartTime"},{showCategory:"needTitle",showName:"截止入场时间",icon:"",showMetaColumn:"enterDeadline"}],spHandleJS:{},result:{allowPass:!0,nuclein:{},exam:{},vaccin:{},name:"",antigen:{},idNumber:"31010419820306681X",healthCode:{}},resultShow:!1}},created:function(){this.getDatas(),this.spHandleJS.link=function(t,e,a,s,n){}},computed:{backgroundUrl:function(){return this.result.allowPass?"url(".concat(a(97723),")"):"url(".concat(a(31504),")")}},methods:{getDatas:function(){var e=this;this.datas=[],dsf.http.post("/ctrl/guard/exam/data/getCommunityExam",{communityId:dsf.util.loadSessionStore("user").communityId}).then(function(t){200==t.data.code&&t.data.data.forEach(function(t){e.datas.push({buttons:{commonButton:[],mainButtons:[{action:"enter",condition:"",icon:"",name:"签到",showIndex:0},{action:"enterSaturation",condition:"",icon:"",name:"签到情况",showIndex:0}]},dataValue:t})}),e.isLoading=!1})},onRefresh:function(){this.getDatas()},handleActionClick:function(){(this["action-".concat(arguments[0])]||function(){}).apply(void 0,(0,s.Z)(Array.prototype.slice.call(arguments,1)))},"action-enter":function(t,e){this.currentExamId=t.dataValue.id,new Date<dsf.date.parse(t.dataValue.enterStartTime)||new Date>dsf.date.parse(t.dataValue.enterDeadline)?dsf.layer.toast("目前不允许入场签到"):this.show=!0},"action-enterSaturation":function(t,e){this.$router.push({path:"/commonList/220513115624errdeKH9p6nCAZM1Drh/2205131145208PlD0YmKiZzwmBNOEHe",query:{secQuery:n()({sceneCode:t.dataValue.sceneCode,communityId:dsf.util.loadSessionStore("user").communityId,examId:t.dataValue.id})}})},enter:function(){var e,t;this.cardNo?this.signStatus?(t={examId:(e=this).currentExamId,communityId:dsf.util.loadSessionStore("user").communityId,cardNo:this.cardNo,cardType:this.cardType,signStatus:this.signStatus},$iaction.encrypt({proName:"YQFKCX",encryptKey:n()(t),encryptType:"sm4"},function(t){dsf.http.Axios.post(dsf.url.getWebPath("/ctrl/guard/exam/data/sign"),t,{headers:{"x-auth-token":dsf.util.loadSessionStore("loginToken"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){200==t.data.code?(e.closeDialog(),dsf.layer.toast(t.data.message),$iaction.decode({proName:"YQFKCX",decodeKey:t.data.data,decodeType:"sm4"},function(t){e.result=JSON.parse(t),e.resultShow=!0},function(t){alert(t)})):dsf.layer.toast(t.data.message)}).error(function(t){dsf.layer.toast("签到失败，请重试")})},function(t){alert(t)})):dsf.layer.toast("请选择签到类型"):dsf.layer.toast("请输入证件号或准考证号")},closeDialog:function(){this.show=!1,this.cardNo="",this.signStatus=""},scanCode:function(){var e;"app"==dsf.util.getClientName()?(e=this,xsfBarcode.scan(function(t){i.log(t),t.text&&(e.cardNo=t.text)},function(t){dsf.layer.toast("扫码失败")})):dsf.layer.toast("需在app中进行扫码")},setStyle:function(t,e){return 0==t?{backgroundColor:"#a1a1a1",boxShadow:"3px 7px 12px 0px #ddd"}:"2"==e?{backgroundColor:"#EBAE30",boxShadow:"3px 7px 12px 0px #decca3"}:"1"==t?{backgroundColor:"#29B93D",boxShadow:"3px 7px 12px 0px rgba(163,222,171,1)"}:{backgroundColor:"#DE4B2D",boxShadow:"3px 7px 12px 0px #DEA3A3"}}}},o=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",[t("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[t("DsList",{ref:"dslist",attrs:{data:e.datas,columns:e.columns,spHandleJs:e.spHandleJS},on:{mainClick:e.handleActionClick,commonClick:e.handleActionClick}})],1),e._v(" "),t("van-dialog",{attrs:{title:"入场签到","show-confirm-button":!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("van-form",{ref:"enter"},[t("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.cardType,callback:function(t){e.cardType=t},expression:"cardType"}},[t("van-radio",{attrs:{name:"1"}},[e._v("证件号")]),e._v(" "),t("van-radio",{attrs:{name:"2"}},[e._v("准考证号")])],1),e._v(" "),t("van-field",{attrs:{rules:[{required:!0}],name:"证件号",placeholder:"请输入证件号或准考证号",center:""},on:{"click-right-icon":function(t){return e.scanCode()}},scopedSlots:e._u([2==e.cardType?{key:"right-icon",fn:function(){return[t("img",{staticStyle:{width:"0.44rem"},attrs:{src:a(10291),alt:""}})]},proxy:!0}:null],null,!0),model:{value:e.cardNo,callback:function(t){e.cardNo=t},expression:"cardNo"}}),e._v(" "),t("van-radio-group",{staticClass:"jb signStatus",attrs:{direction:"horizontal"},model:{value:e.signStatus,callback:function(t){e.signStatus=t},expression:"signStatus"}},[t("van-radio",{staticStyle:{"padding-bottom":"0.16rem"},attrs:{name:"10"}},[e._v("正常签到")]),e._v(" "),t("van-radio",{staticStyle:{"padding-bottom":"0.16rem"},attrs:{name:"11"}},[e._v("人证比对存疑")]),e._v(" "),t("van-radio",{staticStyle:{"padding-bottom":"0.16rem"},attrs:{name:"12"}},[e._v("健康码存疑")]),e._v(" "),t("van-radio",{staticStyle:{"padding-bottom":"0.16rem"},attrs:{name:"13"}},[e._v("温度存疑")]),e._v(" "),t("van-radio",{staticStyle:{"padding-bottom":"0.16rem"},attrs:{name:"14"}},[e._v("核酸存疑")]),e._v(" "),t("van-radio",{staticStyle:{"padding-bottom":"0.16rem"},attrs:{name:"19"}},[e._v("其他存疑")])],1),e._v(" "),t("van-button",{staticStyle:{width:"100%","font-size":"var(--font_size_3)"},attrs:{type:"info"},on:{click:function(t){return e.enter()}}},[e._v("签到")])],1),e._v(" "),t("div",{staticClass:"close-icon",on:{click:function(t){return e.closeDialog()}}},[t("van-icon",{attrs:{name:"close",size:"30px"}})],1)],1),e._v(" "),t("van-popup",{staticClass:"resultPop",staticStyle:{height:"100vh"},attrs:{"get-container":"#app",position:"bottom"},model:{value:e.resultShow,callback:function(t){e.resultShow=t},expression:"resultShow"}},[t("div",{staticClass:"epidemicPrevention",style:{minHeight:"100vh",background:e.backgroundUrl}},[t("div",{staticStyle:{position:"absolute",top:"0.32rem",right:"0.32rem",color:"#fff"},on:{click:function(t){e.resultShow=!1}}},[t("van-icon",{attrs:{name:"close",size:"30px"}})],1),e._v(" "),t("div",{staticClass:"box"},[t("div",{staticClass:"top",style:{color:e.result.allowPass?"#29B93D":"#DE4B2D"}},[t("div",{staticClass:"title flex jc ac"},[t("i",{class:["iconfont",e.result.allowPass?"iconchoose":"iconguanbi"],staticStyle:{"font-size":"0.8rem","padding-right":"0.2rem"}}),e._v("\n              "+e._s(e.result.allowPass?"通过":"不通过")+"\n            ")])]),e._v(" "),t("div",{staticClass:"ao"},[t("div",{staticClass:"line",style:{borderColor:e.result.allowPass?"#29B93D":"#DE4B2D"}}),e._v(" "),t("img",{attrs:{src:a(91747),alt:""}})]),e._v(" "),t("div",{staticClass:"bottom"},[t("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.result.requestTime))]),e._v(" "),t("div",{staticClass:"flex jc"},[t("div",{staticClass:"info"},[t("div",[t("span",[e._v("姓         名：")]),e._v(" "),t("span",[e._v(e._s(e.result.name))])]),e._v(" "),t("div",[t("span",[e._v("证  件  号：")]),e._v(" "),t("span",[e._v(e._s(e.result.idNumber))])]),e._v(" "),t("div",[t("span",[e._v("准考证号：")]),e._v(" "),t("span",[e._v(e._s(e.result.exam.cardNo))])]),e._v(" "),t("div",[t("span",[e._v("考  场  号：")]),e._v(" "),t("span",[e._v(e._s(e.result.exam.examRoomId))])]),e._v(" "),t("div",[t("span",[e._v("座  位  号：")]),e._v(" "),t("span",[e._v(e._s(e.result.exam.seatNo))])])])]),e._v(" "),t("div",{staticClass:"sub-box flex jc",style:e.setStyle(e.result.nuclein.result)},[t("div",{staticClass:"left flex jc ac tc"},[e._v(e._s(e.result.nuclein.effectiveTime)+"小时"),t("br"),e._v("核酸检测")]),e._v(" "),t("div",{staticClass:"right flex dc jc"},[t("span",{staticStyle:{"font-size":"var(--font_size_3)"}},[e._v(e._s(e.result.nuclein.resultDesc))]),e._v(" "),e.result.nuclein.time?t("div",{staticStyle:{"font-size":"var(--font_size_3)"}},[e._v(e._s(e.result.nuclein.time))]):e._e()])]),e._v(" "),t("div",{staticClass:"sub-box flex jc",style:e.setStyle(e.result.healthCode.result,e.result.healthCode.status)},[t("div",{staticClass:"left flex jc ac"},[e._v("健康码")]),e._v(" "),t("div",{staticClass:"right flex jb ac"},[e.result.healthCode.statusDesc?t("span",{staticStyle:{"font-size":"var(--font_size_3)"}},[e._v(e._s(e.result.healthCode.statusDesc))]):t("span",{staticStyle:{"font-size":"var(--font_size_3)"}},[e._v("未查询到健康码")])])]),e._v(" "),t("div",{staticClass:"sub-box flex jc",style:e.setStyle(e.result.antigen.result)},[t("div",{staticClass:"left flex jc ac"},[e._v(e._s(e.result.antigen.effectiveTime)+"小时"),t("br"),e._v("抗原检测")]),e._v(" "),t("div",{staticClass:"right flex dc jc"},[t("span",{staticStyle:{"font-size":"var(--font_size_3)"}},[e._v(e._s(-1==e.result.antigen.result&&1==e.result.antigen.status?e.result.antigen.resultDesc:e.result.antigen.statusDesc))]),e._v(" "),e.result.antigen.time?t("div",{staticStyle:{"font-size":"var(--font_size_3)"}},[e._v(e._s(e.result.antigen.time))]):e._e()])]),e._v(" "),t("div",{staticClass:"sub-box flex jc",style:e.setStyle(e.result.vaccin.result)},[t("div",{staticClass:"left flex dc jc ac"},[e._v("\n                疫苗接种\n              ")]),e._v(" "),t("div",{staticClass:"right flex jb ac"},[t("span",{staticStyle:{"font-size":"var(--font_size_3)"}},[e._v(e._s(0!=e.result.vaccin.times?"接种".concat(e.result.vaccin.times,"次"):e.result.vaccin.resultDesc))])])])])])])])],1)},[],!1,null,"c04aa5b2",null).exports},91747:function(t,e,a){t.exports=a.p+"static/img/ao.08e0938..png"},97723:function(t,e,a){t.exports=a.p+"static/img/greenBg.79c492d..png"},31504:function(t,e,a){t.exports=a.p+"static/img/redBg.b982971..png"},10291:function(t,e,a){t.exports=a.p+"static/img/saomiao.0fdab77..svg"}}]);