"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[76242],{97084:function(t,n,e){e.d(n,{Z:function(){return i}});var n={name:"filepre",props:{name:{type:String,require:!0},size:{type:String,default:""},url:{type:Object,require:!0}},data:function(){return{typeConfig:{IMAGE:"iconIMAGE",TXT:"iconTXT",PDF:"iconPDF",WORD:"iconWORD",EXCEL:"iconEXCEL",PPT:"iconPPT",OTHER:"iconOTHER"},fileType:{IMAGE:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],PDF:["pdf"],TXT:["txt","sql","xml","html","css","js","java","php","bat","log"],WORD:["docx","docm","doc","dotx","dotm","dot"],EXCEL:["xlsx","xlsm","xlsb","xls","xltx","xltm","xlt","xlam","xla","ods"],PPT:["pptx","pptm","ppt","potx","potm","pot","ppsx","ppsm","pps","ppam","ppa"]}}},computed:{suffix:function(){var t=this.name.lastIndexOf(".");return-1!==t?this.name.substring(t+1,this.name.length).toLowerCase():""},type:function(){for(var t in this.fileType)if(-1<this.fileType[t].indexOf(this.suffix))return t;return"OTHER"}},methods:{openFile:function(){this.$emit("open",this.url)}}},i=(0,e(51900).Z)(n,function(){var t=this,n=t._self._c;return n("div",{staticClass:"ds-enclosure-item",on:{click:t.openFile}},[n("div",{staticClass:"__file_icon"},[n("i",{staticClass:"iconfont",class:[t.typeConfig[t.type]]})]),t._v(" "),n("div",{staticClass:"__file_body"},[n("div",{staticClass:"__file_title"},[n("div",{staticClass:"elps"},[t._v(t._s(t.name))])])])])},[],!1,null,"55181dfe",null).exports},76242:function(t,n,e){e.r(n),e.d(n,{default:function(){return i}});var n=e(27921),l=e.n(n),n=e(85579),s=e.n(n),n=e(22013),c=e.n(n),a=e(66250),n=e(33453),r=e.n(n),n=e(97084),f=e(25108);function u(t,n){var e,i,o,a,r=void 0!==s()&&t[c()]||t["@@iterator"];if(r)return i=!(e=!0),{s:function(){r=r.call(t)},n:function(){var t=r.next();return e=t.done,t},e:function(t){i=!0,o=t},f:function(){try{e||null==r.return||r.return()}finally{if(i)throw o}}};if(Array.isArray(t)||(r=function(t,n){var e;if(t)return"string"==typeof t?p(t,n):"Map"===(e="Object"===(e=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:e)||"Set"===e?l()(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(t,n):void 0}(t))||n&&t&&"number"==typeof t.length)return r&&(t=r),a=0,{s:n=function(){},n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var n={components:{filepre:n.Z},name:"feedbackReadonly",data:function(){return{info:{},maininfo:{},attach:[],msg:"",docurl:""}},mounted:function(){this.load()},methods:{load:function(){var s=this;dsf.http.get("/fn/xform/data?pk="+this.$route.params.pk+"&moduleId="+this.$route.params.moduleId,{}).then(function(t){s.maininfo=t.data.main,s.info=s.maininfo,f.log(s.maininfo),dsf.http.get("fn/mobileAttachment/getFormAttachment",{info_id:s.$route.params.pk,infoId:s.$route.params.pk,moduleId:s.$route.params.moduleId,start:0,limit:1e3}).then(function(t){var n=[];if(0<t.data.rows.length){var e,i=u(t.data.rows);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.document){var a,r=u(o.document);try{for(r.s();!(a=r.n()).done;){var l=a.value;n.push(l)}}catch(t){r.e(t)}finally{r.f()}}}}catch(t){i.e(t)}finally{i.f()}}f.log(n),s.attach=n})})},openFile:function(i){var o=this;return(0,a.Z)(r().mark(function t(){var n,e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(new Date).getTime(),n=dsf.util.loadSessionStore("loginToken"),n=dsf.url.getServerUrl("fn/file/download?infoId=".concat(i.infoId,"&fileId=").concat(i.id,"&fileName=").concat(i.title,"&nrType=").concat(i.type,"&moduleId=").concat(i.moduleId,"&x-auth-token=").concat(n,"&fullfilename=").concat(e).concat(i.title)),f.log(n),o.docurl=dsf.url.openOffice(encodeURIComponent(n)),4==dsf.config.previewSetting.previewType)return t.next=8,dsf.http.post("fn/office/mobile/wpsPreview",{fileId:i.id,readOnly:0<i.canEdit});t.next=10;break;case 8:e=t.sent,o.docurl=e.data.data;case 10:o.$router.push({name:"dsfIframe",params:{url:o.docurl}});case 11:case"end":return t.stop()}},t)}))()},getVal:function(t){if(this.info.opinionList&&this.info.opinionList[t]){var n,e=this.info.opinionList[t],i="";for(n in e){var o=e[n];i+="\n          <span>".concat(o.opinionContent,'</span>\n          <p style="text-align:left">').concat(o.userName," ").concat(o.opinionDate,"</p>")}return i||""}return this.msg}}},i=(0,e(51900).Z)(n,function(){var n=this,e=n._self._c;return e("div",{staticClass:"receipt-readonly"},[n.info?e("van-cell-group",[e("van-cell",{attrs:{value:n.info["C-DB-FK-0002"]&&n.info["C-DB-FK-0002"].text||n.msg,title:""},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{staticClass:"custom-title"},[n._v("反馈单位")])]},proxy:!0}],null,!1,1077397123)}),n._v(" "),e("van-cell",{attrs:{value:n.info["C-DB-FK-0001"]&&n.info["C-DB-FK-0001"].text||n.msg,title:"反馈人"}}),n._v(" "),e("van-cell",{attrs:{value:n.info["C-DB-FK-0004"]&&n.info["C-DB-FK-0004"].value||n.msg,title:"反馈时间"}}),n._v(" "),e("van-cell",{attrs:{value:n.info["C-DB-FK-0006"]&&n.info["C-DB-FK-0006"].value||n.msg,title:"反馈情况"}}),n._v(" "),e("van-cell",{attrs:{value:n.info["C-DB-FK-0007"]&&n.info["C-DB-FK-0007"].value||n.msg,title:"下一步工作"}}),n._v(" "),e("van-cell",{attrs:{title:"附件"},scopedSlots:n._u([{key:"default",fn:function(){return n._l(n.attach,function(t){return e("filepre",{key:t.id,staticStyle:{height:"0.7rem"},attrs:{name:t.title,size:t.size,url:t},on:{open:n.openFile}})})},proxy:!0}],null,!1,1771582156)})],1):n._e()],1)},[],!1,null,null,null).exports}}]);