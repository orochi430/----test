"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[92379],{41775:function(t,n,e){e.d(n,{Z:function(){return r}});e(23307);var n=e(81392),i=e(26243),o=e.n(i),i=e(79529),l=e.n(i),i=e(46297),s=e(84628),a=e(50856),c=e(25108),i={components:{DsCard:i.Z,DsButtonGroup:s.Z,DsButtonToolbox:a.Z,Icon:n.Z},props:{tabObj:{type:Object},data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},type:{type:String},keyColumn:{type:String},formMethod:{type:String},isHiddenBtn:{type:Boolean,default:function(){}}},data:function(){return{}},created:function(){},computed:{aSubTitles:function(){return c.log(this.columns.filter(function(t){return/^subTitle\w?$/i.test(t.showCategory)})),this.columns.filter(function(t){return/^subTitle\w?$/i.test(t.showCategory)})},bSubTitles:function(){return this.columns.filter(function(t){return/^content$/i.test(t.showCategory)})},needTitles:function(){return this.columns.filter(function(t){return/^needTitle\w?$/i.test(t.showCategory)})},titleIcon:function(){return this.columns.filter(function(t){return/^titleIcon\w?$/i.test(t.showCategory)})}},mounted:function(){c.log(this.bSubTitles)},methods:{isShowColumn:function(t,n){return n.dataValue[t.showMetaColumn]||0===n.dataValue[t.showMetaColumn]},isShowListBtn:function(t){var n=null==this.isHiddenBtn,e=!1,e=!(!t.buttons||!(t.buttons.commonButtons&&0<t.buttons.commonButtons.length||t.buttons.mainButtons&&0<t.buttons.mainButtons.length));return n&&e},link:function(t){var n,e,i,o;t.dataValue.allowMobile&&1!=t.dataValue.allowMobile?dsf.layer.toast("该文件只能在电脑端处理"):("isRead"in t.dataValue&&!t.dataValue.isRead&&(t.dataValue.isRead=!0),n=(t=t.dataValue)[this.keyColumn]||t.info_id||t.id||t.A0001||t.fid||t["SW_XZD.A0001"],e=this.keyColumn?this.keyColumn.split(".")[0]+".A0004":"",e=t.moduleId||t.A0004||t["SW_XZD.A0004"]||t[e],"db"==this.type&&(e=t.masterModuleId||t.moduleId||t.A0004),o=t.masterId||"",e=e+"/"+n,i={},"gw"==this.type&&(e+="/1",i.todoId=t.todoId),this.type&&(e+="?type=".concat(this.type)),"SigninList"==this.$route.name&&(e+="?&listId=1903161124289nXBk8iVSmTMGYxn9bi&exchangeList=signedList"),"db"==this.type&&(o&&(e+="&masterId=".concat(o)),c.log(this.formMethod),this.formMethod)&&(e+="&formMethod=info"),"dy"==this.type&&(e+="&distribId=".concat(t.distribId),dsf.http.post("fn/mobileToRead/markRead",{pks:t.distribId}).then(function(t){c.log(t)})),this.tabObj&&this.tabObj.targetUrl?(o=this.tabObj.targetUrl.replace("[pk]",n),this.$router.push({path:o})):this.$router.push({path:"/commonForm/"+e,query:i}))},getTitle:function(){return this.columns.find(function(t){return"mainTitle"===t.showCategory})||{}},handleCommonClick:function(t,n,e){n.dataValue.allowMobile&&1!=n.dataValue.allowMobile?dsf.layer.toast("该文件只能在电脑端处理"):this.$emit("commonClick",t,n,e)},handleMainClick:function(t,n,e){n.dataValue.allowMobile&&1!=n.dataValue.allowMobile?dsf.layer.toast("该文件只能在电脑端处理"):this.$emit("mainClick",t,n,e)},titleIconColor:function(t,n){t=t.dataValue[n.showMetaColumn].substr(0,1);return dsf.config.listTitleIcon&&-1<o()(dsf.config.listTitleIcon).indexOf(t)?(n=dsf.config.listTitleIcon[t],{backgroundColor:this.colorRgba(n,.12),color:n,borderColor:n}):""},colorRgba:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,e=t.toLowerCase();if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var i="#",o=1;o<4;o+=1)i+=e.slice(o,o+1).concat(e.slice(o,o+1));e=i}for(var s=[],a=1;a<7;a+=2)s.push(l()("0x"+e.slice(a,a+2)));return"rgba("+s.join(",")+","+n+")"}return e}}},r=(0,e(51900).Z)(i,function(){var i=this,o=i._self._c;return o("div",{staticClass:"ds-list"},[i._l(i.data,function(e,n){return o("div",{key:e.id||"item-".concat(n),staticClass:"ds-item"},[o("DsCard",["isRead"in e.dataValue&&!e.dataValue.isRead?o("span",{staticClass:"isStatus"}):i._e(),i._v(" "),"readStatus"in e.dataValue&&"2"!=e.dataValue.readStatus?o("span",{staticClass:"isStatus"}):i._e(),i._v(" "),e.dataValue[i.getTitle().showMetaColumn]?o("div",{class:{ellipsis:i.dsf.config.commonList&&i.dsf.config.commonList.titleEllipsis},attrs:{slot:"header"},on:{click:function(t){return i.link(e)}},slot:"header"},[o("span",{class:{"col-title":"isRead"in e.dataValue&&!e.dataValue.isRead||"readStatus"in e.dataValue&&"2"!=e.dataValue.readStatus},style:{color:i.getTitle().color||"","word-wrap":"break-word","word-break":"break-all"}},[i._v("\n                "+i._s(e.dataValue[i.getTitle().showMetaColumn]))])]):i._e(),i._v(" "),o("div",{staticClass:"content",attrs:{slot:"content"},on:{click:function(t){return i.link(e)}},slot:"content"},[i._t("item-content",function(){return[o("div",{staticClass:"flex1"},[0<i.aSubTitles.length?o("div",{staticClass:"aSubTitles"},[i._l(i.aSubTitles,function(t,n){return[i.isShowColumn(t,e)?o("div",{key:"aSubTitles-".concat(n),staticClass:"subTitle"},[t.icon?o("Icon",{class:["iconfont",t.icon]}):i._e(),i._v(" "),o("span",{staticClass:"label",style:{color:t.color}},[i._v(i._s(e.dataValue[t.showMetaColumn]))])],1):i._e()]})],2):i._e(),i._v(" "),0<i.bSubTitles.length?o("div",{staticClass:"bSubTitles"},[i._l(i.bSubTitles,function(t,n){return[i.isShowColumn(t,e)?o("div",{key:"bSubTitles-".concat(n),staticClass:"subTitle"},[t.icon?o("Icon",{class:["iconfont",t.icon]}):i._e(),i._v(" "),o("span",{class:["label","ds-elips-".concat(t.showRows||1)],style:{color:t.color}},[i._v(i._s(e.dataValue[t.showMetaColumn]))])],1):i._e()]})],2):i._e(),i._v(" "),0<i.needTitles.length?o("div",{staticClass:"needTitles"},[i._l(i.needTitles,function(t,n){return[i.isShowColumn(t,e)?o("div",{key:"needTitles-".concat(n),staticClass:"subTitle"},[o("span",{staticClass:"name label ellipsis"},[i._v(i._s(t.showName))]),i._v(" "),o("span",{staticClass:"label val elips",style:{color:t.color}},[i._v(i._s(e.dataValue[t.showMetaColumn]))])]):i._e()]})],2):i._e()]),i._v(" "),0<i.titleIcon.length?o("div",[i._l(i.titleIcon,function(t,n){return[i.isShowColumn(t,e)?o("div",{key:"titleIcon-".concat(n),staticClass:"moduleIcon",style:i.titleIconColor(e,t)},[o("span",[i._v(i._s(e.dataValue[t.showMetaColumn].substr(0,1)))])]):i._e()]})],2):i._e()]},{item:e}),i._v(" "),i._t("item-extend",null,{item:e})],2),i._v(" "),i.isShowListBtn(e)?o("div",{attrs:{slot:"footer"},slot:"footer"},[i._t("item-footer",function(){return[o("DsButtonToolbox",{attrs:{buttons:e.buttons||{},more:!0,size:"small"},on:{commonClick:function(t){i.handleCommonClick(t,e,n)},mainClick:function(t){i.handleMainClick(t,e,n)}}})]},{item:{}})],2):i._e()])],1)}),i._v(" "),i.data.length||i.$parent.loading?i._e():o("commonempty")],2)},[],!1,null,"7d9709ac",null).exports},46297:function(t,n,e){e.d(n,{Z:function(){return i}});var i=(0,e(51900).Z)({},function(t,n){return t("div",{staticClass:"ds-card"},[n._t("default"),n._v(" "),t("div",{staticClass:"tabspage"},[n.$slots.tabspageCheck?t("div",{staticClass:"tabspageCheck"},[n._t("tabspageCheck")],2):n._e(),n._v(" "),t("div",{staticStyle:{flex:"1",overflow:"hidden"}},[n.$slots.header?t("div",{staticClass:"ds-card-header"},[n._t("header")],2):n._e(),n._v(" "),n.$slots.content?t("div",{staticClass:"ds-card-content"},[n._t("content")],2):n._e()]),n._v(" "),n.$slots.rightIcon?t("div",{staticClass:"rightIcon"},[n._t("rightIcon")],2):n._e()]),n._v(" "),n.$slots.footer?t("div",{staticClass:"ds-card-footer"},[n._t("footer")],2):n._e(),n._v(" "),n.$slots.footermin?t("div",{staticClass:"ds-card-footer ds-card-footer2"},[n._t("footermin")],2):n._e()],2)},[],!0,null,"1b02e7ea",null).exports},92379:function(t,n,e){e.r(n),e.d(n,{default:function(){return s}});var a=e(5044),n=e(79529),i=e.n(n),n=e(41775),o=e(9303),n={name:"InspectorList",components:{DsList:n.Z},mixins:[o.Z],data:function(){return{finished:!1,loading:!1,isLoading:!1,finishedTips:"",searchValue:"",formMethod:"info",listData:[{dataValue:{bt:"已按要求做好相关工作,请毅松、志强、联姘同志阅示",wj:"文件种类",zt:"进行中",bjrq:"5天",progress:"progressprogress",status:"going"},buttons:{commonButton:[{icon:"iconguanzhu",action:"gz",name:"关注"},{icon:"iconzhiding",action:"zd",name:"置顶"},{icon:"iconshijian",action:"yqcl",name:"延期处理"}],mainButtons:[{action:"bj",name:"办结"},{action:"fk",name:"反馈"}]}},{dataValue:{bt:"已按要求做好相关工作,请毅松、志强、联姘同志阅示",wj:"文件种类",zt:"进行中",bjrq:"5天",progress:"progressprogress",status:"finish"},buttons:{commonButton:[{icon:"iconguanzhu",action:"gz",name:"关注"},{icon:"iconzhiding",action:"zd",name:"置顶"},{icon:"iconshijian",action:"yqcl",name:"延期处理"}],mainButtons:[{action:"bj",name:"办结"},{action:"fk",name:"反馈"}]}}],columns:[{showCategory:"mainTitle",showMetaColumn:"bt"},{showCategory:"subTitle",showMetaColumn:"wj",icon:"iconwenjianleixing"},{showCategory:"subTitle",showMetaColumn:"zt",icon:"iconzhuangtai",color:""},{showCategory:"subTitle",showMetaColumn:"bjrq",icon:"iconriqi",color:""}],colorStyle:["#F66C6C","#67C23B"],data:[],tab:"db",start:1,searchPararms:{page:1,limit:15,content:""},keyword:""}},mounted:function(){},methods:{onSearch:function(){this.onRefresh()},getPercent:function(t){t=(t.item.dataValue||{}).process||"";return i()(t.replace("%",""),10)||0},getColor:function(t){t=t.item.dataValue||{},t=new Date(t.bjrq).getTime();return(new Date).getTime()<t?"#F66C6C":"#67C23B"},fetchData:function(){var s=this;this.loading=!0,dsf.http.post("fn/supervise/approval/getSuperviceList",{start:this.start,page:this.start,key:this.keyword,limit:15,fileType:"db"}).then(function(t){var n=t.status,t=t.data,e=t.showColumn,i=t.datas,i=void 0===i?[]:i,o=t.listButtons,t=t.total;200===n?(s.start+=1,s.data=[].concat((0,a.Z)(s.data),(0,a.Z)(i)),s.columns=e||[],s.listButtons=o||{},(null==i||s.data.length===t||0===i.length||i.length<15)&&(s.finished=!0),i.length<s.start&&((null==i||0===i.length)&&0===s.start?s.finishedTips="暂无数据":s.finishedTips="没有更多了")):(s.dsf.layer.toast(message),s.finished=!0,s.finishedTips=message)}).catch(function(t){t=t.message;s.finished=!0,s.dsf.layer.toast(t),s.finishedTips=t}).finally(function(){s.loading=!1,s.isLoading=!1})},handleActionClick:function(t,n,e){"doBanQingKuang"==t?this.$router.push({name:"InspectorCondition",params:{data:n}}):(this["action-".concat(t)]||function(){}).apply(void 0,(0,a.Z)(Array.prototype.slice.call(arguments,1)))},onLoad:function(){this.fetchData()},onRefresh:function(){this.finished=!1,this.loading=!0,this.data=[],this.start=1,this.fetchData()}}},s=(0,e(51900).Z)(n,function(){var n=this,e=n._self._c;return e("div",{staticClass:"inspector-list"},[e("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:n.onRefresh},model:{value:n.isLoading,callback:function(t){n.isLoading=t},expression:"isLoading"}},[e("van-list",{attrs:{finished:n.finished,"finished-text":n.data.length?n.finishedTips:"",offset:10},on:{load:n.onLoad},model:{value:n.loading,callback:function(t){n.loading=t},expression:"loading"}},[e("DsList",{attrs:{type:n.tab,data:n.data,columns:n.columns},on:{mainClick:n.handleActionClick,commonClick:n.handleActionClick},scopedSlots:n._u([{key:"item-extend",fn:function(t){return[e("div",{staticClass:"progress-wrap"})]}}])})],1)],1)],1)},[],!1,null,"ef95f98a",null).exports}}]);