"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[55915],{58086:function(t,e,i){function a(t,e){return JSON.stringify(t)===JSON.stringify(e)}var s=i(35976),c=i(40216),n=i(78054),o=i(95566),r=i(18169),h=i(94611),i=i(12098),s=(0,s.d)("slider"),l=s[0],d=s[1];e.Z=l({mixins:[h.D,i.f],props:{disabled:Boolean,vertical:Boolean,range:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},value:{type:[Number,Array],default:0}},data:function(){return{dragStatus:""}},computed:{scope:function(){return this.max-this.min},buttonStyle:function(){var t;if(this.buttonSize)return{width:t=(0,c.N)(this.buttonSize),height:t}}},created:function(){this.updateValue(this.value)},mounted:function(){this.range?(this.bindTouchEvent(this.$refs.wrapper0),this.bindTouchEvent(this.$refs.wrapper1)):this.bindTouchEvent(this.$refs.wrapper)},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.currentValue=this.value,this.range?this.startValue=this.value.map(this.format):this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){this.disabled||("start"===this.dragStatus&&this.$emit("drag-start"),(0,o.PF)(t,!0),this.touchMove(t),this.dragStatus="draging",t=this.$el.getBoundingClientRect(),t=(this.vertical?this.deltaY:this.deltaX)/(this.vertical?t.height:t.width)*this.scope,this.range?this.currentValue[this.index]=this.startValue[this.index]+t:this.currentValue=this.startValue+t,this.updateValue(this.currentValue))},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.currentValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){var e,i;t.stopPropagation(),this.disabled||(i=this.$el.getBoundingClientRect(),t=this.vertical?t.clientY-i.top:t.clientX-i.left,i=this.vertical?i.height:i.width,t=+this.min+t/i*this.scope,this.range&&(t<=((e=(i=this.value)[0])+(i=i[1]))/2?e=t:i=t,t=[e,i]),this.startValue=this.value,this.updateValue(t,!0))},handleOverlap:function(t){return t[0]>t[1]?(t=(0,n.I)(t)).reverse():t},updateValue:function(t,e){t=this.range?this.handleOverlap(t).map(this.format):this.format(t),a(t,this.value)||this.$emit("input",t),e&&!a(t,this.startValue)&&this.$emit("change",t)},format:function(t){var e=+this.min,i=+this.max,a=+this.step,i=(t=(0,r.w6)(t,e,i),Math.round((t-e)/a)*a);return(0,r.Ft)(e,i)}},render:function(){function t(){var t=o.value,e=o.min,i=o.range,a=o.scope;return i?100*(t[0]-e)/a+"%":null}function e(e){var i="number"==typeof e,a=i?o.value[e]:o.value;return r("div",{ref:i?"wrapper"+e:"wrapper",attrs:{role:"slider",tabindex:o.disabled?-1:0,"aria-valuemin":o.min,"aria-valuenow":o.value,"aria-valuemax":o.max,"aria-orientation":o.vertical?"vertical":"horizontal"},class:d(i?"button-wrapper-"+["left","right"][e]:"button-wrapper"),on:{touchstart:function(){i&&(o.index=e)},click:function(t){return t.stopPropagation()}}},[function(){if(i){var t=o.slots(0===e?"left-button":"right-button",{value:a});if(t)return t}return o.slots("button")?o.slots("button"):r("div",{class:d("button"),style:o.buttonStyle})}()])}var i,a,s,n,o=this,r=arguments[0],h=this.vertical,l=h?"height":"width",u=((n={background:this.inactiveColor})[h?"width":"height"]=(0,c.N)(this.barHeight),(i={})[l]=(l=o.value,a=o.min,u=o.range,s=o.scope,u?100*(l[1]-l[0])/s+"%":100*(l-a)/s+"%"),i.left=this.vertical?null:t(),i.top=this.vertical?t():null,i.background=this.activeColor,i);this.dragStatus&&(u.transition="none");return r("div",{style:n,class:d({disabled:this.disabled,vertical:h}),on:{click:this.onClick}},[r("div",{class:d("bar"),style:u},[this.range?[e(0),e(1)]:e()])])}})},88152:function(t,e,i){i(99780)},69823:function(t,e,i){i.d(e,{Z:function(){return s}});var o=i(5044),e=i(77193),a=(i(88152),i(58086)),r=i(25108),e={components:(0,e.Z)({},a.Z.name,a.Z),props:{data:{type:Array,default:function(){return[]}},showDefault:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},showSlider:{type:Boolean,default:!1},adjoinGrey:{type:Boolean,default:!1},tbHighLight:{type:Boolean,default:!1},title:{type:String,default:""}},data:function(){return{slider:0,isShow:!1,dataList:this.data.slice(),order:"original"}},watch:{data:function(t){this.dataList=t}},computed:{tableWidth:function(){return 100+this.slider},tableSize:function(){return.28+this.slider/1e3}},mounted:function(){var t=this;this.$refs.dsfTable&&this.$refs.dsfTable.addEventListener("touchend",function(){clearTimeout(t.timeout),t.isShow=!0,t.timeout=setTimeout(function(){return t.isShow=!1},2e3)})},methods:{onChange:function(t){},sort:function(a){r.log("1111111111111111");var s,t,n=this;"showArrow"==a.showCategory&&(s=function(t,e){for(var i=[];0<t.length&&0<e.length;)Number(t[0].dataValue[a.showMetaColumn])<Number(e[0].dataValue[a.showMetaColumn])?"up"==n.order?i.push(t.shift()):i.push(e.shift()):"up"==n.order?i.push(e.shift()):i.push(t.shift());return[].concat(i,(0,o.Z)(t),(0,o.Z)(e))},t=function t(e){var i,a;return 1==e.length?e:(i=Math.floor(e.length/2),a=e.slice(0,i),e=e.slice(i),s(t(a),t(e)))},"up"==this.order?this.order="down":"down"==this.order?this.order="original":this.order="up","original"==this.order?this.dataList=this.data:this.dataList=t(this.dataList))}}},s=(0,i(51900).Z)(e,function(){var i=this,a=i._self._c;return a("div",[0<i.showDefault.length?a("div",{staticClass:"top"},[i._l(i.showDefault,function(t,e){return[t.showName?a("div",{key:e},[t.showName?a("span",[i._v(i._s(t.showName))]):i._e(),i._v(" "),t.text?a("span",[i._v(":"+i._s(t.text))]):i._e()]):i._e()]})],2):i._e(),i._v(" "),i.columns.length?a("div",{ref:"dsfTable",staticClass:"dsf-table"},[a("div",{staticClass:"table",style:{width:i.tableWidth+"vw",fontSize:i.tableSize+"rem"}},[i.title?a("van-row",{staticStyle:{"font-size":"var(--font_size_2)"}},[a("van-col",{class:{highLight:i.tbHighLight},style:{color:i.tbHighLight?"#fff":"",padding:"0.2rem 0"},attrs:{span:"24"}},[i._v(i._s(i.title))])],1):i._e(),i._v(" "),a("van-row",{attrs:{type:"flex",justify:"space-between"}},i._l(i.columns,function(e){return a("van-col",{key:e.showMetaColumn,staticClass:"flex jc ac",class:{highLight:i.tbHighLight},style:{width:100/i.columns.length+"%"},on:{click:function(t){return i.sort(e)}}},[a("span",{style:{color:i.tbHighLight?"#fff":"",verticalAlign:"center"}},[i._v(i._s(e.showName))])])}),1),i._v(" "),i._l(i.dataList,function(e,t){return a("van-row",{key:t,class:{highLight:e.dataValue.isHighLight},style:{backgroundColor:i.adjoinGrey&&t%2==0?"#f1f1f1":""},attrs:{type:"flex",justify:"space-between"}},i._l(i.columns,function(t){return a("van-col",{key:t.showMetaColumn,style:{width:100/i.columns.length+"%",textAlign:"showArrow"==t.showCategory?"right":""}},[a("span",[i._v(i._s(e.dataValue[t.showMetaColumn]))]),i._v(" "),"showArrow"==t.showCategory?a("van-icon",{style:{transform:0<e.dataValue[t.showMetaColumn]?"rotate(180deg)":""},attrs:{name:"down",color:0<e.dataValue[t.showMetaColumn]?"#4daf7b":"#e32416"}}):i._e()],1)}),1)})],2),i._v(" "),i.isShow&&i.showSlider?a("div",{staticClass:"slider"},[a("van-slider",{attrs:{vertical:""},on:{change:i.onChange},model:{value:i.slider,callback:function(t){i.slider=t},expression:"slider"}})],1):i._e()]):i._e()])},[],!1,null,"a637e0f6",null).exports},55915:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});var e=i(79529),a=i.n(e),e={components:{DsfListTable:i(69823).Z},data:function(){return{keyword:"",columns:[{showCategory:"mergeRow",showName:"日期",showMetaColumn:"ZBRQ"},{showCategory:"subTitleA",showName:"值班人",showMetaColumn:"ZBR_TEXT"},{showCategory:"subTitleA",showName:"值班时间",showMetaColumn:"ZBKSSJ"}],data:[],showDefault:[],showPicker:!1,chooseTime:dsf.date.format(new Date,"yyyy-mm"),loading:!0,previous:null}},computed:{},watch:{chooseTime:{handler:function(t){this.init()}}},created:function(){this.$route.query.date&&(this.chooseTime=this.$route.query.date),this.init()},methods:{preMonth:function(){var t=this.chooseTime.split("-")[0],e=this.chooseTime.split("-")[1],e=a()(e)-1;0==e&&(t=a()(t)-1,e=12),e<10&&(e="0"+e),this.chooseTime="".concat(t,"-").concat(e)},nextMonth:function(){var t=this.chooseTime.split("-")[0],e=this.chooseTime.split("-")[1],e=a()(e)+1;13==e&&(t=a()(t)+1,e=1),e<10&&(e="0"+e),this.chooseTime="".concat(t,"-").concat(e)},init:function(){var e=this;this.loading=!0,dsf.http.post("ctrl/DutyForMobiles/getSchedule",{year:this.chooseTime.split("-")[0],month:this.chooseTime.split("-")[1]}).then(function(t){200==t.data.code&&(e.data=t.data.data.datas)}).error(function(t){dsf.layer.toast("系统出错，请再次尝试")}).always(function(){e.loading=!1})}}},s=(0,i(51900).Z)(e,function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"allTab"},[e("span",{staticClass:"choose"},[e("van-icon",{attrs:{name:"arrow-left"},on:{click:t.preMonth}}),t._v(t._s(t.chooseTime)),e("van-icon",{attrs:{name:"arrow"},on:{click:t.nextMonth}})],1)]),t._v(" "),t.loading?e("van-loading",{attrs:{size:"24px",vertical:""}},[t._v("加载中...")]):[e("DsfListTable",{attrs:{columns:t.columns,data:t.data,"show-default":t.showDefault,tbHighLight:!0}}),t._v(" "),0==t.data.length?e("commonempty"):t._e()]],2)},[],!1,null,"14d91e2e",null).exports}}]);