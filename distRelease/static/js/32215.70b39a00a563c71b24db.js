"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[32215],{4882:function(a,e,n){n.r(e);var t=n(73473),f=n.n(t),l=n(25108),t={initHandle:function(t,e,i){function n(){var a,e,n;t.main.B0020.value.length&&(isNaN(t.main.B0020.value)?(dsf.layer.toast("请正确输入外出天数"),i.$set(t.main,"B0020",{value:0})):(a=Math.ceil(Number(t.main.B0020.value)),n=[50],null!=(e=t.main["C-XXFB-0001"].text)&&e.length&&(-1<e.indexOf("崇明")&&n.push(180),-1<e.indexOf("市内区外")&&n.push(120),(-1<e.indexOf("奉城镇")||-1<e.indexOf("四团镇")||-1<e.indexOf("海港开发区")||-1<e.indexOf("头桥公司")||-1<e.indexOf("海湾旅游区"))&&n.push(80),n=Math.max.apply(Math,n),i.$set(t.main,"B0036",{value:n*a})),"市外"!=e&&"金汇镇"!=e&&"金汇镇,市外"!=e&&"市外,金汇镇"!=e||i.$set(t.main,"B0036",{value:"0"})))}n(),i.$bus.on("blurBus",function(a){"B0020"==a.metaData.metaId&&n()}),i.$bus.on("checkVal",function(a){"C-XXFB-0001"==a.metaData.metaId&&n()}),i.$bus.on("blurBus",function(a){l.log(a,"//")}),i.$bus.on("inputRadio",function(a){l.log(a),"B0030"!=a.metaData.metaId&&"Bw99bBeIzUF8zg9"!=e.parameters.nodeId||("调研"==a.text||"授课"==a.text?i.allFile.find(function(a){return"差旅反馈表"==a.name}).allowVerify="1":i.allFile.find(function(a){return"差旅反馈表"==a.name}).allowVerify="-1")}),i.$bus.on("selectUserBus",function(a){var e,n;"P39mQe61sPV4iwBy"==a.metaData.controlId&&(e=[],n=[],a.selectArr.forEach(function(a){-1==n.indexOf(a.attrs.deptId)&&(e.push(a.attrs.orgNameLV1Text),n.push(a.attrs.deptId))}),n=n.join(","),e=e.join(","),i.$set(t.main,"B0072",{text:e,value:n}))})},saveFilter:function(a,e,t){var i={pk:t.formParams.pk,startTime:a.main.B0005.value,startTimeWB:a.main.B0054.value,endTime:a.main.B0021.value,endTimeWB:a.main["C-XXFB-0002"].value,userValue:a.main.B0051.value,type:a.main.B0030.value,address:a.main["C-XXFB-0001"].value},n=a.main.B0005.value.split("-"),l=a.main.B0021.value.split("-"),n=n[1]+"月"+n[2]+"日",l=l[1]+"月"+l[2]+"日",u="系统分析到"+a.main.B0009.value+"老师已填写关于"+a.main.B0051.text+n+a.main.B0054.text+"至"+l+a.main["C-XXFB-0002"].text+"到"+a.main["C-XXFB-0001"].text+"的"+a.main.B0030.text+"活动,请核对是否是同一公务活动,是否进行填写。",m=Number(a.main.B0005.value.slice(0,4)),s=Number(a.main.B0013.value.slice(0,4)),r=Number(a.main.B0005.value.slice(5,7)),B=Number(a.main.B0013.value.slice(5,7));return new(f())(function(e,n){s<=m&&B<=r?e():n("禁止申报当前时间公务外出"),"返回申请人"==t.formData.main.A0040.value&&("调研"==a.main.B0030.text||"授课"==a.main.B0030.text?"差旅反馈表"==t.allFile[1].name&&(0<t.allFile[1].file.length?(t.formData.main["C-XXFB-0003"].value=1,e()):n("差旅反馈表不能为空,请上传文件")):(t.formData.main["C-XXFB-0003"].value=0,e())),dsf.http.post("ctrl/businessTravel/validate",i).then(function(a){0==a.data.data?dsf.layer.confirm({message:u,title:"提示",confirmButtonText:"确定"},function(){e()},function(){n("取消了该行程!")}):e()})})}};e.default=t}}]);