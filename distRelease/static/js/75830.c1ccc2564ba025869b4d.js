"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[75830],{75830:function(t,s,n){n.r(s),n.d(s,{default:function(){return i}});var e=n(88561),s=(n(25108),{data:function(){var t;return{dragOptions:{delay:50,scrollFn:this.scrollFn},isShaky:!1,myMenus:[],mainMenu:[],myMenusTemp:[],mainMenuTemp:[],isRepeatShow:!(null==(t=dsf.config.appSelect)||!t.isRepeatShow),isSetUserShortcutDing:!!dsf.config.appSelect.setUserShortcutDing,myMenusName:(null==(t=dsf.config.appSelect)?void 0:t.selectName)||"我的应用"}},components:{draggable:function(){return n.e(9980).then(n.t.bind(n,82021,23))}},computed:{rowNum:function(){return this.$store.state.applications.rowNum},countTotal:function(){return this.$route.query.num||2*this.rowNum}},mounted:function(){this.isSetUserShortcutDing?this.myMenus=dsf.util.deepCopy(this.$store.state.applications.myMenus):e.Z.loadLocalStore("mySetting")&&(this.myMenus=e.Z.loadLocalStore("mySetting")),this.myMenusTemp=dsf.util.deepCopy(this.myMenus),this.mainMenu=dsf.util.deepCopy(this.$store.state.applications.menus),this.mainMenuTemp=dsf.util.deepCopy(this.mainMenu)},methods:{restore:function(){this.mainMenu=dsf.util.deepCopy(this.mainMenuTemp),this.myMenus=dsf.util.deepCopy(this.myMenusTemp)},scrollFn:function(t,s,n,e,i){},onMove:function(t){var s=t.relatedContext,t=t.draggedContext,s=s.element,t=t.element;return!(s&&s.fixed||t.fixed)},chooseFn:function(){this.isShaky=!this.isShaky},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var s=16*Math.random()|0;return("x"==t?s:3&s|8).toString(16)})},deleteSelect:function(s,t){this.myMenus.splice(t,1),s.isshow=!0,this.mainMenu.forEach(function(t){t.child.forEach(function(t){t.name==s.name&&(t.hasMyMenu=!1,t.isshow=!0)})})},add:function(t,s,n){t.hasMyMenu||(this.myMenus.length==this.countTotal?dsf.layer.toast("最多新增".concat(this.countTotal,"个自定义菜单"),!1):(this.myMenus.push(dsf.util.deepCopy(t)),t.hasMyMenu=!0,t.isshow=this.isRepeatShow))},done:function(){var s=this;this.isSetUserShortcutDing?(dsf.http.post("fn/newFile/setUserShortcutDing",{ids:this.myMenus.map(function(t){return t.id}).join(",")}).then(function(t){200==t.data.code&&s.$router.back()}),this.$store.dispatch("applications/setMyMenus",this.myMenus)):(e.Z.saveToLocalStore("mySetting",this.myMenus),this.$router.back()),this.$store.dispatch("applications/setMenus",this.mainMenu)}}}),i=(0,n(51900).Z)(s,function(){var i=this,a=i._self._c;return a("div",{staticClass:"selectAppBox"},[a("div",{staticClass:"card"},[a("div",{staticClass:"title showIcon"},[a("span",[i._v(i._s(i.myMenusName))]),i._v(" "),a("span",{staticClass:"flex ac",staticStyle:{float:"right","font-size":"var(--font_size_3)",color:"#666"},on:{click:i.done}},[a("van-icon",{attrs:{name:"success"}}),i._v("完成\n        ")],1),i._v(" "),a("span",{staticClass:"flex ac",staticStyle:{float:"right","font-size":"var(--font_size_3)",color:"#666","padding-right":"0.2rem"},on:{click:i.restore}},[a("van-icon",{attrs:{name:"replay"}}),i._v("恢复默认\n        ")],1)]),i._v(" "),a("div",{staticClass:"myAppBox"},[a("draggable",{attrs:{move:i.onMove,options:i.dragOptions},on:{start:i.chooseFn,end:i.chooseFn},model:{value:i.myMenus,callback:function(t){i.myMenus=t},expression:"myMenus"}},[a("transition-group",{staticClass:"dsf-list cells",attrs:{type:"transition",tag:"div",name:"flip-list"}},i._l(i.myMenus,function(s,n){return a("div",{key:s.guid,class:["menu","menu_".concat(i.rowNum)],style:{width:"".concat(100/i.rowNum,"%")}},[a("img",{class:{shaky:i.isShaky},attrs:{src:s.img}}),i._v(" "),a("p",[i._v(i._s(s.name))]),i._v(" "),a("div",{staticClass:"icon-container",staticStyle:{"background-color":"#cfcfcf"}},[a("van-icon",{attrs:{name:"minus",color:"#fff"},on:{mousedown:function(t){return t.stopPropagation(),i.deleteSelect(s,n)}}})],1)])}),0)],1)],1)]),i._v(" "),a("div",{staticClass:"f_b"},i._l(i.mainMenu,function(e,t){return 0<e.child.length?a("div",{key:t,staticClass:"card candan-item"},[a("div",{staticClass:"title showIcon"},[a("span",[i._v(i._s(e.name))])]),i._v(" "),a("div",{staticClass:"dsf-list cells"},i._l(e.child,function(s,n){return a("div",{key:n,class:["menu","menu_".concat(i.rowNum)],style:{width:"".concat(100/i.rowNum,"%")},on:{click:function(t){return i.add(s,n,e)}}},[a("img",{attrs:{src:s.img}}),i._v(" "),a("p",[i._v(i._s(s.name))]),i._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!s.hasMyMenu,expression:"!subItem.hasMyMenu"}],staticClass:"icon-container"},[a("van-icon",{attrs:{name:"plus",color:"#fff"}})],1)])}),0)]):i._e()}),0)])},[],!1,null,"8a69dcfc",null).exports}}]);