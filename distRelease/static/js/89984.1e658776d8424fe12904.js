"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[89984],{99759:function(t,e,n){n.r(e),n.d(e,{default:function(){return r}});var e=n(16257),i=n(25108),a={name:"DayDutyList",props:{},data:function(){return{list:[],error:!1,loading:!1,finished:!1}},watch:{},created:function(){},methods:{onLoad:function(t,e){},initfn:function(t,e){i.log("initfn",t,e),this.onLoad(t,e)}}},c=n(51900),a=(0,c.Z)(a,function(){var n=this,i=n._self._c;return i("div",[i("van-list",{staticClass:"list_wrap",attrs:{error:n.error,"error-text":"请求失败，点击重新加载",offset:10,finished:n.finished,"immediate-check":!1},on:{"update:error":function(t){n.error=t},load:n.onLoad},model:{value:n.loading,callback:function(t){n.loading=t},expression:"loading"}},n._l(n.list,function(t,e){return i("van-row",{key:e,attrs:{gutter:"20"}},[i("van-col",{attrs:{span:"8"}},[n._v(n._s(t.userName))]),n._v(" "),i("van-col",{attrs:{span:"16"}},[n._v(n._s(t.deptName))])],1)}),1),n._v(" "),0==n.list.length&&n.finished?i("commonempty"):n._e()],1)},[],!1,null,null,null).exports,o=n(25108),n={name:"DayDuty",components:{timePicker:e.Z,dayDutyList:a},data:function(){return{dutyDefaultDate:moment(new Date).format("YYYY-MM-DD"),endSliderCallBack:null,activeBgcolor:"#FF6A00",activeTextcolor:"#FFFFFF",todayDotcolor:"#FFFFFF",startNumber:1,clickMode:"month",cancelChecked:!1,havaSch:[],week:[],month:[]}},mounted:function(){},created:function(){this.checkedDate(this.dutyDefaultDate)},methods:{thisWeek:function(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.week=e,t&&this.$refs.timePicker.reGetprev_now_next(e[0].date),this.$nextTick(function(){var t=e.filter(function(t){return t.date==n.$refs.timePicker.checkedDate});t.length&&"week"==n.defaultShowType?(n.$refs.timePicker.defaultDateShow(t[0]),n.selectedDate=t[0].date):n.selectedDate=""})},thisMonth:function(t){var i=this;this.month=t,this.$nextTick(function(){var e=!1,n="";t.forEach(function(t){t.forEach(function(t){t.isToday&&(e=!0,n=t)})}),e&&"month"==i.defaultShowType?(i.$refs.timePicker.defaultDateShow(n),i.selectedDate=n.date):i.selectedDate=""})},checkedDate:function(t){var e=this;o.log("checkedDate",t),this.cancelChecked=!1,this.selectedDate=t,this.$nextTick(function(){""!=t?e.listGetData(t,t):"week"==e.defaultShowType?e.listGetData(e.week[0].date,e.week[6].date):e.listGetData(e.month[0][0].date,e.month[e.month.length-1][6].date)})},toggleShowType:function(t){var e=t[0],t=t[1],n=(this.defaultShowType=e,this.$refs.timePicker.checkedDate),i=n?this.month.filter(function(t){return t.find(function(t){return t.date==n})})[0]:this.week;this.$refs.timePicker.checkedDate="","week"==e?this.thisWeek(i,t):this.thisMonth(this.month)},listGetData:function(t,e){o.log(t,e),this.$refs.dutyList.initfn(t,e)}}},r=(0,c.Z)(n,function(){var e=this,t=e._self._c;return t("div",[t("div",[t("time-picker",{ref:"timePicker",attrs:{"end-slider-call-back":e.endSliderCallBack,"active-bgcolor":e.activeBgcolor,"active-textcolor":e.activeTextcolor,"today-dotcolor":e.todayDotcolor,"start-number":e.startNumber,defaultDate:e.dutyDefaultDate,"click-mode":e.clickMode,"hava-sch":e.havaSch,"cancel-checked":e.cancelChecked},on:{"update:havaSch":function(t){e.havaSch=t},"update:hava-sch":function(t){e.havaSch=t},thisWeek:e.thisWeek,thisMonth:e.thisMonth,checkedDate:e.checkedDate,toggleShowType:function(t){return e.toggleShowType(arguments)}}})],1),e._v(" "),t("div",[t("day-duty-list",{ref:"dutyList"})],1)])},[],!1,null,null,null).exports}}]);