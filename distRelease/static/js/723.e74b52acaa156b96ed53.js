"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[723],{723:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var i=o(44321),t={data:function(){return{meeting:{}}},mounted:function(){var e=this;this.$nextTick(function(){e.getData()})},methods:{getData:function(){var t=this;dsf.http.post("fn/conferenceMobile/meetingInfo",{meetingId:this.$route.query.meetingId}).done(function(e){200==e.code&&e.data&&(t.meeting=e.data,dsf.util.saveToSessionStore("meeting",e.data),i.Z.commit("setMeetingName",t.meeting.title))})}}},n=o(51900),t=(0,n.Z)(t,function(){var e=this,t=e._self._c;return t("div",{staticClass:"meeting-info"},[t("ul",{staticClass:"tab"},[t("li",[t("label",{attrs:{for:""}}),e._v(" "),t("div",[t("span",[e._v("会议名称")]),e._v(" "),t("i",[e._v(e._s(e.meeting.title))])])]),e._v(" "),t("li",[t("label",{attrs:{for:""}}),e._v(" "),t("div",[t("span",[e._v("会议地点")]),e._v(" "),t("i",[e._v(e._s(e.meeting.address))])])]),e._v(" "),t("li",[t("label",{attrs:{for:""}}),e._v(" "),t("div",[t("span",[e._v("主持人")]),e._v(" "),t("i",[e._v(e._s(e.meeting.moderator))])])]),e._v(" "),t("li",[t("label",{attrs:{for:""}}),e._v(" "),t("div",[t("span",[e._v("开始时间")]),e._v(" "),t("i",[e._v(e._s(e.dsf.date.format(e.meeting.startDateTime,"yyyy-mm-dd hh:ii")))])])])]),e._v(" "),t("div",{staticClass:"tit"},[e._v("会议内容")]),e._v(" "),t("textarea",{attrs:{name:"",id:"",cols:"30",rows:"10"}},[e._v(e._s(e.meeting.meetingContent))])])},[],!1,null,"bf2bce2a",null).exports,s=o(71937),s=o.n(s),a=o(22428),a=o.n(a),l=o(82060),r=o(70538),c=o(25108),a=(r.default.use(a()),r.default.use(s()),{components:{EnclosurePreview:l.default},data:function(){return{meeting:{},activeNames:[],topics:[],hasFilePng:["ai","cloud","html","img","jpg","mp3","mp4","pdf","png","ppt","psd","rar","txt","word","wps","xls","zip","folder"],fileType:{pdf:["pdf"],img:["jpeg","bmp","webp","svgz","svg","gif","jpg","ico","png","tif"],txt:["txt","sql","xml","html","css","js","java","php","bat","log"],word:["docx","docm","doc","dotx","dotm","dot"],xls:["xlsx","xlsm","xlsb","xls","xltx","xltm","xlt","xlam","xla","ods"],ppt:["pptx","pptm","ppt","potx","potm","pot","ppsx","ppsm","pps","ppam","ppa"]},imgPreview:!1,previewImg:[],popFile:{},showFile:!1,filename:"",isPreview:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.getMeetData(),e.getData()})},methods:{getStyle:function(e){return{height:66*e+"px"}},getMeetData:function(){var t=this;dsf.http.post("fn/conferenceMobile/meetingInfo",{meetingId:this.$route.query.meetingId}).done(function(e){200==e.code&&e.data&&(t.meeting=e.data)})},goPreview:function(){this.isPreview=!0},goHandWrite:function(){this.isPreview=!1},goto:function(e){this.$router.push({path:"/meetingPad/index/topic/".concat(e.id)})},moreClick:function(){this.$router.push({name:"meetingPadTopic",query:{meetingId:this.meeting.id}})},openClick:function(e){this.$set(e,"open",!e.open)},getData:function(){var i=this,t=this;dsf.http.post("fn/conferenceMobile/meetingTopics",{meetingId:this.$route.query.meetingId}).done(function(e){200==e.code&&0<e.data.length&&(t.topics=e.data,i.activeNames=[],t.topics.forEach(function(e,t){i.$set(e,"open",!0),i.activeNames.push(t)}))}).error(function(e){dsf.layer.toast("数据获取失败！",!1)}).always(function(){})},typeClass:function(e){var t,i=e.fileName.substr(e.fileName.lastIndexOf(".")+1).toLowerCase();for(t in this.hasFilePng.includes(i)&&"static/images/fileType/".concat(i,".png"),this.fileType)if(this.fileType[t].includes(i))return"static/images/fileType/".concat(t,".png")},previewFile:function(e){this.setRead(e),this.popFile={id:e.fileId,name:e.fileName,infoId:e.infoId,moduleId:e.moduleId,isHandwrite:"1",flowId:e.flowId,nodeId:e.nodeId},navigator.userAgent.includes("DreamSoft")&&dsf.config.commonForm.nativeWps?this.wpsOpen(this.popFile):(this.isPreview=!0,this.filename=e.fileName,this.showFile=!0)},wpsOpen:function(e){var t=dsf.url.getRootPath(),i=dsf.util.loadSessionStore("user").auth.token,t={keepCallback:!0,downUrl:t+"fn/file/download?infoId=".concat(e.infoId,"&fileId=").concat(e.id,"&fileName=").concat(e.name,"&moduleId=").concat(e.moduleId,"&x-auth-token=").concat(i,"&fullfilename=").concat(e.name),saveUrl:"",fileName:e.name,openWithWPS:!0,uploadFile:!0,openMode:"readOnly",enterReviseMode:!1,showReviewingPaneRightDefault:!1,userName:dsf.util.loadSessionStore("user").name};c.log(t),$WPS.downAndOpen(t,function(e){c.log(e)},function(e){c.log("错误回调",e)})},closeFile:function(){this.showFile=!1,this.$refs.enclosurePreview.destroyInterval()},setRead:function(e){dsf.http.post("fn/conferenceMobile/setRead",{pk:e.fileId,moduleId:e.moduleId}).done(function(e){c.log("打开文件",e)}).error(function(e){c.log("error",e)}).always(function(){})}}}),r=(0,n.Z)(a,function(){var i=this,n=i._self._c;return n("div",{staticClass:"home-topic"},[n("div",{staticClass:"com-tit"},[n("span",[i._v("会议议题")]),i._v(" "),n("span",{staticClass:"more",on:{click:i.moreClick}},[i._v("更多")])]),i._v(" "),0<i.topics.length?n("div",{staticClass:"topic-container"},[i._l(i.topics,function(t,e){return n("div",{key:e,staticClass:"list"},[n("div",{staticClass:"title"},[n("span",[i._v(i._s(t.title))]),i._v(" "),n("i",{staticClass:"morere",class:{retotal:t.open},on:{click:function(e){return i.openClick(t)}}})]),i._v(" "),n("div",{staticClass:"item__content",class:{files:!t.open},style:i.getStyle(t.files.length)},i._l(t.files,function(t,e){return n("div",{key:e,staticClass:"file-item",on:{click:function(e){return i.previewFile(t)}}},[n("div",{staticClass:"file-icon",style:"background-image:url(".concat(i.typeClass(t),")")}),i._v(" "),n("div",{staticClass:"file-desc"},[n("div",{staticClass:"file-desc-name"},[i._v(i._s(t.fileName))])])])}),0)])}),i._v(" "),n("van-popup",{staticClass:"file-preview",staticStyle:{height:"100vh"},attrs:{"close-on-click-overlay":!0,"lock-scroll":"",position:"bottom"},model:{value:i.showFile,callback:function(e){i.showFile=e},expression:"showFile"}},[n("van-cell",{staticClass:"top-back",attrs:{title:i.filename,icon:"arrow-left",center:""},on:{click:i.closeFile}}),i._v(" "),n("div",{staticClass:"preview-outer"},[n("enclosure-preview",{ref:"enclosurePreview",attrs:{file:i.popFile,"is-show-cur-person":!0,"is-preview":i.isPreview,"is-signature":!0},on:{goPreview:i.goPreview,goHandWrite:i.goHandWrite}})],1)],1)],2):n("commonempty",{staticClass:"opinion-empty",attrs:{image:o(46290),description:"暂无议题数据"}})],1)},[],!1,null,"942bbb1a",null).exports,d=o(25108),s={components:{EnclosurePreview:l.default},data:function(){return{configMenus:dsf.config.meetingConfig.homePage.padMenu,menus:[],msgUnReadCount:0,ishiddenTitle:!1,popFile:{},showFile:!1,filename:"",isPreview:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.getData()})},methods:{getData:function(){var i=this;dsf.http.post("fn/conferenceMobile/meetingInfo",{meetingId:this.$route.query.meetingId}).done(function(e){var t;200==e.code&&e.data&&(i.meeting=e.data,i.msgUnReadCount=e.data.msgUnReadCount,t=i.meeting.showModule.split(","),i.menus=i.configMenus.filter(function(e){return t.includes(e.id)}),i.meeting.isSendMessage)&&t.includes("hyxx")&&i.menus.push({id:"xxfb",name:"消息发布",img:"static/images/meetingPad/xxfb.png",url:"/meetingPad/index/publish"})}).error(function(e){dsf.layer.toast("数据获取失败！",!1)}).always(function(){})},goPreview:function(){this.isPreview=!0},goHandWrite:function(){this.isPreview=!1},closeFile:function(){this.showFile=!1,this.$refs.enclosurePreview.destroyInterval()},goUrl:function(e){if("czzn"===e.id){var t=this.meeting;if(t.znFileId){if(t.flowId=0,t.nodeId=-1,this.popFile={id:t.znFileId,name:t.znFileName,infoId:t.znFileId,moduleId:t.moduleId,isHandwrite:"1",flowId:t.flowId,nodeId:t.nodeId},navigator.userAgent.includes("DreamSoft")&&dsf.config.commonForm.nativeWps)return void this.wpsOpen(this.popFile);this.showFile=!0,this.filename=t.znFileName}else dsf.layer.toast("请先上传".concat(e.name,"！"))}else e.url?this.$router.push("".concat(e.url,"?meetingId=").concat(this.$route.query.meetingId)):dsf.layer.toast("功能开发中！")},wpsOpen:function(e){var t=dsf.url.getRootPath(),i=dsf.util.loadSessionStore("user").auth.token,t={keepCallback:!0,downUrl:t+"fn/file/download?infoId=".concat(e.infoId,"&fileId=").concat(e.id,"&fileName=").concat(e.name,"&moduleId=").concat(e.moduleId,"&x-auth-token=").concat(i,"&fullfilename=").concat(e.name),saveUrl:"",fileName:e.name,openWithWPS:!0,uploadFile:!0,openMode:"readOnly",enterReviseMode:!1,showReviewingPaneRightDefault:!1,userName:dsf.util.loadSessionStore("user").name};d.log(t),$WPS.downAndOpen(t,function(e){d.log(e)},function(e){d.log("错误回调",e)})}}},a={components:{homeInfo:t,homeTopic:r,homeMore:(0,n.Z)(s,function(){var i=this,n=i._self._c;return n("div",{staticClass:"menus"},[i._l(i.menus,function(t,e){return n("div",{key:e,on:{click:function(e){return i.goUrl(t)}}},[0<i.msgUnReadCount&&"hyxx"===t.id?n("span",{staticClass:"sign"},[i._v(i._s(i.msgUnReadCount))]):i._e(),i._v(" "),n("img",{attrs:{src:t.img,alt:""}}),i._v(" "),n("p",[i._v(i._s(t.name))])])}),i._v(" "),n("van-popup",{staticClass:"file-preview",staticStyle:{height:"100vh"},attrs:{"close-on-click-overlay":!0,"lock-scroll":"",position:"bottom"},model:{value:i.showFile,callback:function(e){i.showFile=e},expression:"showFile"}},[n("van-nav-bar",{attrs:{title:i.filename,"left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":i.closeFile}}),i._v(" "),n("div",{staticClass:"preview-outer"},[n("enclosure-preview",{ref:"enclosurePreview",attrs:{file:i.popFile,"is-preview":i.isPreview,"is-signature":!0,isShowCurPerson:!0,isSignature:!1},on:{goPreview:i.goPreview,goHandWrite:i.goHandWrite}})],1)],1)],2)},[],!1,null,"36a492dc",null).exports,screenPerson:o(69448).Z},data:function(){return{meeting:{},tabNum:dsf.util.loadSessionStore("meetingPadTabnum")||"1"}},mounted:function(){var t=this;this.$bus.$on("meetingPadTabnum",function(e){dsf.util.saveToSessionStore("meetingPadTabnum",e),t.tabNum=e})},methods:{}},u=(0,n.Z)(a,function(){var e=this._self._c;return e("div",{staticClass:"meeting"},[e("screen-person")],1)},[],!1,null,"4cd454e2",null).exports},46290:function(e,t,i){e.exports=i.p+"static/img/img_zwfk.26c4673..png"}}]);