(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[72496],{23263:function(t,e,a){var s=a(55623),n=a(87587),a=a(33051),o=a.extend,r=a.isArray;t.exports=function(t,e,a){e=r(e)?{coordDimensions:e}:o({},e);var i=t.getSource(),e=s(i,e);return(e=new n(e,t)).initData(i,a),e}},58086:function(t,e,a){"use strict";function i(t,e){return JSON.stringify(t)===JSON.stringify(e)}var s=a(35976),u=a(40216),n=a(78054),o=a(95566),r=a(18169),l=a(94611),a=a(12098),s=(0,s.d)("slider"),c=s[0],d=s[1];e.Z=c({mixins:[l.D,a.f],props:{disabled:Boolean,vertical:Boolean,range:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},value:{type:[Number,Array],default:0}},data:function(){return{dragStatus:""}},computed:{scope:function(){return this.max-this.min},buttonStyle:function(){var t;if(this.buttonSize)return{width:t=(0,u.N)(this.buttonSize),height:t}}},created:function(){this.updateValue(this.value)},mounted:function(){this.range?(this.bindTouchEvent(this.$refs.wrapper0),this.bindTouchEvent(this.$refs.wrapper1)):this.bindTouchEvent(this.$refs.wrapper)},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.currentValue=this.value,this.range?this.startValue=this.value.map(this.format):this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){this.disabled||("start"===this.dragStatus&&this.$emit("drag-start"),(0,o.PF)(t,!0),this.touchMove(t),this.dragStatus="draging",t=this.$el.getBoundingClientRect(),t=(this.vertical?this.deltaY:this.deltaX)/(this.vertical?t.height:t.width)*this.scope,this.range?this.currentValue[this.index]=this.startValue[this.index]+t:this.currentValue=this.startValue+t,this.updateValue(this.currentValue))},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.currentValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){var e,a;t.stopPropagation(),this.disabled||(a=this.$el.getBoundingClientRect(),t=this.vertical?t.clientY-a.top:t.clientX-a.left,a=this.vertical?a.height:a.width,t=+this.min+t/a*this.scope,this.range&&(t<=((e=(a=this.value)[0])+(a=a[1]))/2?e=t:a=t,t=[e,a]),this.startValue=this.value,this.updateValue(t,!0))},handleOverlap:function(t){return t[0]>t[1]?(t=(0,n.I)(t)).reverse():t},updateValue:function(t,e){t=this.range?this.handleOverlap(t).map(this.format):this.format(t),i(t,this.value)||this.$emit("input",t),e&&!i(t,this.startValue)&&this.$emit("change",t)},format:function(t){var e=+this.min,a=+this.max,i=+this.step,a=(t=(0,r.w6)(t,e,a),Math.round((t-e)/i)*i);return(0,r.Ft)(e,a)}},render:function(){function t(){var t=o.value,e=o.min,a=o.range,i=o.scope;return a?100*(t[0]-e)/i+"%":null}function e(e){var a="number"==typeof e,i=a?o.value[e]:o.value;return r("div",{ref:a?"wrapper"+e:"wrapper",attrs:{role:"slider",tabindex:o.disabled?-1:0,"aria-valuemin":o.min,"aria-valuenow":o.value,"aria-valuemax":o.max,"aria-orientation":o.vertical?"vertical":"horizontal"},class:d(a?"button-wrapper-"+["left","right"][e]:"button-wrapper"),on:{touchstart:function(){a&&(o.index=e)},click:function(t){return t.stopPropagation()}}},[function(){if(a){var t=o.slots(0===e?"left-button":"right-button",{value:i});if(t)return t}return o.slots("button")?o.slots("button"):r("div",{class:d("button"),style:o.buttonStyle})}()])}var a,i,s,n,o=this,r=arguments[0],l=this.vertical,c=l?"height":"width",h=((n={background:this.inactiveColor})[l?"width":"height"]=(0,u.N)(this.barHeight),(a={})[c]=(c=o.value,i=o.min,h=o.range,s=o.scope,h?100*(c[1]-c[0])/s+"%":100*(c-i)/s+"%"),a.left=this.vertical?null:t(),a.top=this.vertical?t():null,a.background=this.activeColor,a);this.dragStatus&&(h.transition="none");return r("div",{style:n,class:d({disabled:this.disabled,vertical:l}),on:{click:this.onClick}},[r("div",{class:d("bar"),style:h},[this.range?[e(0),e(1)]:e()])])}})},88152:function(t,e,a){"use strict";a(99780)},69823:function(t,e,a){"use strict";a.d(e,{Z:function(){return s}});var o=a(5044),e=a(77193),i=(a(88152),a(58086)),r=a(25108),e={components:(0,e.Z)({},i.Z.name,i.Z),props:{data:{type:Array,default:function(){return[]}},showDefault:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},showSlider:{type:Boolean,default:!1},adjoinGrey:{type:Boolean,default:!1},tbHighLight:{type:Boolean,default:!1},title:{type:String,default:""}},data:function(){return{slider:0,isShow:!1,dataList:this.data.slice(),order:"original"}},watch:{data:function(t){this.dataList=t}},computed:{tableWidth:function(){return 100+this.slider},tableSize:function(){return.28+this.slider/1e3}},mounted:function(){var t=this;this.$refs.dsfTable&&this.$refs.dsfTable.addEventListener("touchend",function(){clearTimeout(t.timeout),t.isShow=!0,t.timeout=setTimeout(function(){return t.isShow=!1},2e3)})},methods:{onChange:function(t){},sort:function(i){r.log("1111111111111111");var s,t,n=this;"showArrow"==i.showCategory&&(s=function(t,e){for(var a=[];0<t.length&&0<e.length;)Number(t[0].dataValue[i.showMetaColumn])<Number(e[0].dataValue[i.showMetaColumn])?"up"==n.order?a.push(t.shift()):a.push(e.shift()):"up"==n.order?a.push(e.shift()):a.push(t.shift());return[].concat(a,(0,o.Z)(t),(0,o.Z)(e))},t=function t(e){var a,i;return 1==e.length?e:(a=Math.floor(e.length/2),i=e.slice(0,a),e=e.slice(a),s(t(i),t(e)))},"up"==this.order?this.order="down":"down"==this.order?this.order="original":this.order="up","original"==this.order?this.dataList=this.data:this.dataList=t(this.dataList))}}},s=(0,a(51900).Z)(e,function(){var a=this,i=a._self._c;return i("div",[0<a.showDefault.length?i("div",{staticClass:"top"},[a._l(a.showDefault,function(t,e){return[t.showName?i("div",{key:e},[t.showName?i("span",[a._v(a._s(t.showName))]):a._e(),a._v(" "),t.text?i("span",[a._v(":"+a._s(t.text))]):a._e()]):a._e()]})],2):a._e(),a._v(" "),a.columns.length?i("div",{ref:"dsfTable",staticClass:"dsf-table"},[i("div",{staticClass:"table",style:{width:a.tableWidth+"vw",fontSize:a.tableSize+"rem"}},[a.title?i("van-row",{staticStyle:{"font-size":"var(--font_size_2)"}},[i("van-col",{class:{highLight:a.tbHighLight},style:{color:a.tbHighLight?"#fff":"",padding:"0.2rem 0"},attrs:{span:"24"}},[a._v(a._s(a.title))])],1):a._e(),a._v(" "),i("van-row",{attrs:{type:"flex",justify:"space-between"}},a._l(a.columns,function(e){return i("van-col",{key:e.showMetaColumn,staticClass:"flex jc ac",class:{highLight:a.tbHighLight},style:{width:100/a.columns.length+"%"},on:{click:function(t){return a.sort(e)}}},[i("span",{style:{color:a.tbHighLight?"#fff":"",verticalAlign:"center"}},[a._v(a._s(e.showName))])])}),1),a._v(" "),a._l(a.dataList,function(e,t){return i("van-row",{key:t,class:{highLight:e.dataValue.isHighLight},style:{backgroundColor:a.adjoinGrey&&t%2==0?"#f1f1f1":""},attrs:{type:"flex",justify:"space-between"}},a._l(a.columns,function(t){return i("van-col",{key:t.showMetaColumn,style:{width:100/a.columns.length+"%",textAlign:"showArrow"==t.showCategory?"right":""}},[i("span",[a._v(a._s(e.dataValue[t.showMetaColumn]))]),a._v(" "),"showArrow"==t.showCategory?i("van-icon",{style:{transform:0<e.dataValue[t.showMetaColumn]?"rotate(180deg)":""},attrs:{name:"down",color:0<e.dataValue[t.showMetaColumn]?"#4daf7b":"#e32416"}}):a._e()],1)}),1)})],2),a._v(" "),a.isShow&&a.showSlider?i("div",{staticClass:"slider"},[i("van-slider",{attrs:{vertical:""},on:{change:a.onChange},model:{value:a.slider,callback:function(t){a.slider=t},expression:"slider"}})],1):a._e()]):a._e()])},[],!1,null,"a637e0f6",null).exports},78730:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e=a(54258),i=(a(46295),a(27539),a(40451),a(21865),a(78511),a(83062),a(69823)),s=a(25108),e={components:{VChart:e.Z,DsfListTable:i.Z},data:function(){return{date:"",chooseTime:"",showPicker:!1,active:0,target:"",columns:[],data:[],targetGaugeChart:{series:[{type:"gauge",startAngle:225,endAngle:-45,min:0,max:5,splitNumber:10,progress:{show:!0,roundCap:!0,width:18},pointer:{itemStyle:{color:"auto"}},axisLine:{roundCap:!0,lineStyle:{width:20,color:[[.2,"#3ba272"],[.8,"#3ba272"],[1,"#fc8452"]]}},axisTick:{splitNumber:5,lineStyle:{width:2,color:"#fff"}},splitLine:{length:12,lineStyle:{width:3,color:"#fff"}},axisLabel:{distance:20,fontSize:16},title:{show:!1},detail:{offsetCenter:[0,"55%"],valueAnimation:!0,formatter:function(t){return"{value|"+t+"}{unit|万元/箱}"},rich:{value:{fontSize:18,fontWeight:"bolder",color:"#777"},unit:{fontSize:14,color:"#999",padding:[0,0,0,0]}}},data:[{value:0}]}]},monthSalesChart:{color:["#73c0de","#fc8452","#3ba272","#5470c6","#91cc75","#fac858","#ee6666","#9a60b4","#ea7ccc"],tooltip:{},legend:{data:["目标值","增长率"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{},xAxis:{type:"category",data:[],splitLine:{show:!0}},yAxis:{type:"value",name:"(万箱)"},series:[{name:"目标值",type:"line",label:{show:!0},data:[]},{name:"增长率",type:"line",label:{show:!0,color:"#000"},data:[]}]},citySalesChart:{color:["#73c0de","#fc8452","#3ba272","#5470c6","#91cc75","#fac858","#ee6666","#9a60b4","#ea7ccc"],xAxis:{type:"category",data:[],axisLabel:{interval:0,formatter:function(t){return t.split("").join("\n")}}},yAxis:{type:"value",name:"(增幅%)"},series:[{data:[],type:"bar"}]}}},computed:{selectColumns:function(){var t=[],e=new Date;e.getFullYear();e.setMonth(e.getMonth()+1,1);for(var a=0;a<12;a++){e.setMonth(e.getMonth()-1);var i=(i=e.getMonth()+1)<10?"0"+i:i;t.push(e.getFullYear()+"年"+i+"月")}return t}},watch:{chooseTime:function(t,e){t=t==this.selectColumns[0]?new Date(new Date-864e5):new Date(t.slice(0,4),t.slice(5,7),0);this.date=dsf.date.format(t,"mm月dd日"),this.init()}},created:function(){this.chooseTime=this.selectColumns[0]},methods:{changeFn:function(t){s.log(t),this.chooseTime=t,this.showPicker=!1},init:function(){this.getTargetGaugeChart(),this.getMonthSalesChart(),this.getCitySalesChart()},getTargetGaugeChart:function(){var e=this,t=dsf.layer.loading();dsf.http.post("fn/news/specialChart",{type:"qsjyjgfx0",from:"".concat(this.chooseTime.slice(0,4),"-01"),to:"".concat(this.chooseTime.slice(0,4),"-").concat(this.chooseTime.slice(5,7))}).then(function(t){200==t.data.code&&(e.targetGaugeChart.series[0].data[0].value=t.data.data.complete,e.target=t.data.data.target)}).finally(function(){dsf.layer.closeLoading(t)})},getMonthSalesChart:function(){var t=this,e=dsf.layer.loading();dsf.http.post("fn/news/specialChart",{type:"qsjyjgfx1",from:"".concat(this.chooseTime.slice(0,4),"-01"),to:"".concat(this.chooseTime.slice(0,4),"-").concat(this.chooseTime.slice(5,7))}).then(function(e){200==e.data.code&&(t.monthSalesChart.xAxis.data=e.data.data.growth.map(function(t,e){return"".concat(e+1,"月")}),t.monthSalesChart.series[0].data=e.data.data.growth.map(function(t){return e.data.data.target}),t.monthSalesChart.series[1].data=e.data.data.growth)}).finally(function(){dsf.layer.closeLoading(e)})},getCitySalesChart:function(){var e=this,t=dsf.layer.loading();dsf.http.post("ctrl/news/tableList",{type:"qsjyjgfx2",from:"".concat(this.chooseTime.slice(0,4),"-01"),to:"".concat(this.chooseTime.slice(0,4),"-").concat(this.chooseTime.slice(5,7))}).then(function(t){e.columns=t.data.showColumn,e.data=t.data.datas,e.citySalesChart.xAxis.data=t.data.datas.map(function(t){return t.dataValue.col1}),e.citySalesChart.series[0].data=t.data.datas.map(function(t){return t.dataValue.col4})}).finally(function(){dsf.layer.closeLoading(t)})}}},n=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",[t("van-tabs",{attrs:{swipeable:"",sticky:"","offset-top":e.$store.state.isShowAppHeader?"0.92rem":"0px"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[t("van-tab",{attrs:{title:"目标完成仪表图"}},[t("div",{staticClass:"allTab"},[t("span",{staticClass:"choose",on:{click:function(t){e.showPicker=!0}}},[e._v(e._s(e.chooseTime)),t("van-icon",{attrs:{name:"arrow-down"}})],1),e._v(" "),t("span",[t("span",{staticClass:"tabIndex"},[e._v(e._s(e.active+1))]),e._v(" / 3")])]),e._v(" "),t("div",{staticClass:"flex jb ac",staticStyle:{margin:"8px 16px"}},[t("span",[e._v("全年累计至"+e._s(e.date))])]),e._v(" "),t("div",{staticClass:"title"},[e._v("目标完成仪表图")]),e._v(" "),t("div",{staticClass:"chart-container"},[t("v-chart",{attrs:{options:e.targetGaugeChart}})],1),e._v(" "),t("div",{staticStyle:{"text-align":"center"}},[e._v("年度单箱结构目标值："+e._s(e.target))])]),e._v(" "),t("van-tab",{attrs:{title:"每月销售结构同比增幅图"}},[t("div",{staticClass:"allTab"},[t("span",{staticClass:"choose",on:{click:function(t){e.showPicker=!0}}},[e._v(e._s(e.chooseTime)),t("van-icon",{attrs:{name:"arrow-down"}})],1),e._v(" "),t("span",[t("span",{staticClass:"tabIndex"},[e._v(e._s(e.active+1))]),e._v(" / 3")])]),e._v(" "),t("div",{staticClass:"flex jb ac",staticStyle:{margin:"8px 16px"}},[t("span",[e._v("全年累计至"+e._s(e.date))])]),e._v(" "),t("div",{staticClass:"title"},[e._v("每月销售结构同比增幅图")]),e._v(" "),t("div",{staticClass:"chart-container"},[t("v-chart",{attrs:{options:e.monthSalesChart}})],1)]),e._v(" "),t("van-tab",{attrs:{title:"各地市销售结构同比增幅"}},[t("div",{staticClass:"allTab"},[t("span",{staticClass:"choose",on:{click:function(t){e.showPicker=!0}}},[e._v(e._s(e.chooseTime)),t("van-icon",{attrs:{name:"arrow-down"}})],1),e._v(" "),t("span",[t("span",{staticClass:"tabIndex"},[e._v(e._s(e.active+1))]),e._v(" / 3")])]),e._v(" "),t("div",{staticClass:"flex jb ac",staticStyle:{margin:"8px 16px"}},[t("span",[e._v("全年累计至"+e._s(e.date))])]),e._v(" "),t("div",{staticClass:"title"},[e._v("各地市销售结构同比增幅")]),e._v(" "),t("div",{staticClass:"chart-container"},[t("v-chart",{attrs:{options:e.citySalesChart}})],1),e._v(" "),t("DsfListTable",{attrs:{columns:e.columns,data:e.data,showSlider:!0,adjoinGrey:!0,tbHighLight:!0}})],1)],1),e._v(" "),t("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[t("van-picker",{attrs:{title:"选择年月","show-toolbar":"",columns:e.selectColumns},on:{confirm:e.changeFn,cancel:function(t){e.showPicker=!1}}})],1)],1)},[],!1,null,"76dc9e6b",null).exports}}]);