"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[98682],{98682:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var e=n(8450),o=n.n(e),a=n(88561),i=n(62596),c=n(25108),e={data:function(){return{}},created:function(){a.Z.clearSession();var e=this,n=this.$route.params.state,t=document.createElement("script");t.type="text/javascript",t.src="static/js/kinggrid/dingtalk.js",document.body.appendChild(t),t.onload=function(){dd.ready(function(){dd.runtime.permission.requestAuthCode({corpId:dsf.config.ddSetting.ddCoprId,onSuccess:function(t){c.log(t);t=t.code;dsf.http.post("/fn/mobileProjectAuth/auth?authCode=".concat(t),{}).then(function(t){c.log(t),1==t.data.rcode?(a.Z.saveToSessionStore("user",t.data.data),a.Z.saveToSessionStore("loginToken",t.data.data.auth.token),a.Z.saveToSessionStore("Role",t.data.data.role),a.Z.logIn(function(){var t;c.log(n),n?(t=i.Z.decode(n.replace(new RegExp("@","gm"),"/")),c.log(t),e.$router.replace(t)):e.$router.replace("/qixiangjuHome?backTo=http%3A%2F%2Fddydbg.nmic.cn%2Fhtml%2Findex.html")})):0==t.rcode?dd.device.notification.alert({message:t.message,title:"温馨提示",buttonName:"确定",onSuccess:function(){},onFail:function(t){}}):dd.device.notification.alert({message:"登录失败!",title:"温馨提示",buttonName:"确定",onSuccess:function(){},onFail:function(t){}})})},onFail:function(t){t=o()(t);alert("失败"+t)}})})}},methods:{randomString:function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,o="",a=0;a<t;a++)o+=e.charAt(Math.floor(Math.random()*n));return o}}},d=(0,n(51900).Z)(e,function(){return(0,this._self._c)("div",{staticClass:"init-div"})},[],!1,null,null,null).exports}}]);