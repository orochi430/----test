"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[75717],{33722:function(e,t,a){a.r(t);var n=a(73473),s=a.n(n),u=a(90541),r=a(25108),n={};n.initHandle=function(n,e,s){var t;s.formData.main.opinionView.value||"2o3sbXeCYmEMkA8"==e.parameters.nodeId||(t=["opinionView","opinionFiles"],e.controls.forEach(function(e){t.includes(e.metaId)&&s.$set(e,"show",0)})),s.formData.main["c-meetingsqbg-012"].value||e.controls.forEach(function(e){"c-meetingsqbg-012"==e.metaId&&s.$set(e,"show",0)}),"11"==e.parameters.nodeId&&(s.$set(s.formData.main,"c-meetingsqbg-024",{value:2,text:"不提醒"}),s.formData.main["c-meetingsqbg-013"].value||e.controls.forEach(function(e){"c-meetingsqbg-013"==e.metaId&&s.$set(e,"show",0)})),0==e.parameters.nodeId&&(u.Z.http.post("/fn/meetingRoomOccupy/getData",{pk:s.$route.query.fid}).then(function(e){var t;r.log(e),"200"==e.data.code&&e.data.data?(t=e.data.data,s.$set(s.formData.main,"c-meetingsqbg-001",{value:t.bt}),s.$set(s.formData.main,"c-meetingsqbg-005",{value:t.hykssj}),s.$set(s.formData.main,"c-meetingsqbg-006",{value:t.hyjssj}),s.$set(s.formData.main,"c-meetingsqbg-003",{value:t.roomId,text:t.roomText}),s.$set(s.formData.main,"c-meetingsqbg-004",{value:t.roomId,text:t.roomText}),s.$set(s.formData.main,"c-meetingsqbg-007",{value:t.hykssj}),s.$set(s.formData.main,"c-meetingsqbg-008",{value:t.hyjssj}),s.$set(s.formData.main,"c-meetingsqbg-012",{value:t.hydz}),s.$set(s.formData.main,"c-meetingsqbg-013",{value:t.hydz}),s.$set(s.formData.main,"B0001",{value:t.bt}),s.$set(s.formData.main,"c-meetingsqbg-002",{value:"1",text:"修改"}),s.$set(s.formData.main,"c-meetingsqbg-024",{value:"1",text:"提醒参会人"}),t.resourceArr.forEach(function(a){for(var e in r.log(a),n.multinfos)s.$refs.formTab[0].$refs[e][0].$refs.subform.addCard(!1).then(function(e){var t;e=e,t=a,s.$set(e,"C-MEETING-RESOURCE-001",{value:t.resourceTypeMc}),s.$set(e,"C-MEETING-RESOURCE-003",{value:t.resourceMc}),s.$set(e,"C-MEETING-RESOURCE-002",{value:t.resourceTypeId}),s.$set(e,"C-MEETING-RESOURCE-004",{value:t.resourceId}),s.$set(e,"C-MEETING-RESOURCE-005",{value:t.resourceNum}),s.$set(e,"C-MEETING-RESOURCE-006",{value:t.isWriteNum,text:0<t.isWriteNum?"是":"否"})})}),s.$set(s.formData.main,"A0031",{value:s.$route.query.fid})):r.log(e.data.message)}),r.log(n),u.Z.http.post("fn/meetingRoom/getHysSqzyLimitAmount",{roomId:n.main}).then(function(e){r.log(e)}));s.$bus.on("subFormTreeSelect",function(a){r.log(a),a.selectArr.forEach(function(t,e){r.log(t),"220726170139N9GeFDJFnyFoRhSCVyu"==a.subFormId&&(n.multinfos["220726170139N9GeFDJFnyFoRhSCVyu"].rows.find(function(e){return e["C-MEETING-RESOURCE-004"].value==t.id})?r.log("有重复"):s.$refs.formTab[0]&&s.$refs.formTab[0].$refs["220726170139N9GeFDJFnyFoRhSCVyu"][0].$refs.subform.addCard(!1).then(function(e){s.$set(e,"C-MEETING-RESOURCE-001",{value:t.attrs.resourceTypeText}),s.$set(e,"C-MEETING-RESOURCE-003",{value:t.name}),s.$set(e,"C-MEETING-RESOURCE-002",{value:t.attrs.resourceTypeId}),s.$set(e,"C-MEETING-RESOURCE-004",{value:t.id}),s.$set(e,"C-MEETING-RESOURCE-006",{value:t.attrs.isWriteNum,text:0<t.attrs.isWriteNum?"是":"否"}),t.attrs.isWriteNum<0&&(e.structControl.find(function(e){return"C-MEETING-RESOURCE-005"==e.metaId}).show=!1)}))})}),s.$bus.on("checkVal",function(e){r.log(e),e.value!=n.main["c-meetingsqbg-003"].value&&s.$set(n.multinfos["220726170139N9GeFDJFnyFoRhSCVyu"],"rows",[]),"c-meetingsqbg-004"==e.metaData.metaId&&u.Z.http.post("/fn/meetingRoom/getMeetingRoomDefaultResource",{roomId:e.value}).then(function(e){r.log(e),e&&e.data&&e.data.data&&e.data.data.dzValue&&s.$set(n.main,"c-meetingsqbg-013",{value:e.data.data.dzValue})})}),s.$bus.on("blurBus",function(e){})},n.saveFilter=function(a,e,n,t){return new(s())(function(e,t){"2"==a.main["c-meetingsqbg-002"].value&&(n.$set(n.formData.main,"c-meetingsqbg-007",{value:""}),n.$set(n.formData.main,"c-meetingsqbg-008",{value:""}),n.$set(n.formData.main,"c-meetingsqbg-013",{value:""}),n.$set(n.formData.main,"c-meetingsqbg-004",{value:"",text:""})),e()})},n.sureChange=function(s,e,o){r.log(s,e,o);var i,e=!0,t=s.main["c-meetingsqbg-008"].value,a=s.main["c-meetingsqbg-007"].value,n=s.main["c-meetingsqbg-006"].value,m=s.main["c-meetingsqbg-005"].value;""==t||""==a||""==n||""==m?u.Z.layer.toast("会议时间为空！"):(t=new Date(t).getTime(),a=new Date(a).getTime(),n=new Date(n).getTime(),m=new Date(m).getTime(),(t<=a||n<=m)&&(e=!1,u.Z.layer.toast("会议结束时间小于开始时间，请重新选择会议时间！")),e&&(i=s.main["c-meetingsqbg-002"].value,u.Z.layer.confirm({message:"确认"+(1==i?"变更":"取消")+"会议吗?",confirmButtonText:"确认"},function(){var e,t,a,n;1==i&&(e=o.$route.query.fid||s.main.A0031.value,"QT"!=(t=s.main["c-meetingsqbg-004"].value||s.main["c-meetingsqbg-003"].value))&&(a=s.main["c-meetingsqbg-007"].value||s.main["c-meetingsqbg-005"].value,n=s.main["c-meetingsqbg-008"].value||s.main["c-meetingsqbg-006"].value,u.Z.http.post("ctrl/meetingRoomOccupy/checkRoomOccupy",{pk:e,hys:t,sdate:a,edate:n}).then(function(e){"success"==e.data.type?(r.log(e),o.saveNoTip(function(e){u.Z.http.post("ctrl/meetingNotice/changeMeetingInfo",{pk:o.formParams.pk}).then(function(e){"success"==e.data.type?(u.Z.layer.toast("操作成功！"),o.$eventBus.refresh(o)):u.Z.layer.toast("操作失败")})})):u.Z.layer.toast(e.data.message)}))})))},t.default=n}}]);