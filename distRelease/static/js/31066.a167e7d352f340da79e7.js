"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[31066],{31066:function(e,a,t){t.r(a),t.d(a,{default:function(){return n}});var i=t(5044),s=t(25108),a={name:"hasReadList",data:function(){return{loading:!1,finished:!1,isLoading:!1,finishedTips:"没有更多了",searchValue:"",start:0,pageSize:10,items:[],moreDataCanBeLoaded:!0}},watch:{searchValue:function(e,a){this.searchValue=e,this.doRefresh()}},created:function(){this.doRefresh()},mounted:function(){},methods:{back:function(){this.$router.go(-1)},doRefresh:function(){var a=this;this.finished=!1,this.loading=!0,dsf.http.get("fn/mobileToRead/getReadQueryList?key="+this.searchValue+"&start=0&limit="+this.pageSize,{}).then(function(e){e=e.data;s.log("========已阅列表========"),s.log(e),a.items=e.rows,a.items.length<a.pageSize?(a.finished=!0,a.moreDataCanBeLoaded=!1):(a.moreDataCanBeLoaded=!0,a.start=a.pageSize)}).catch(function(e){e=e.message;a.finished=!0,a.dsf.layer.toast(e),a.finishedTips=e}).finally(function(){a.loading=!1,a.isLoading=!1})},infinite:function(){var a=this;this.moreDataCanBeLoaded&&dsf.http.get("fn/mobileToRead/getReadQueryList?key="+this.searchValue+"&start="+this.start+"&limit="+this.pageSize,{}).then(function(e){e=e.data;s.log("[已阅-loadMore] "),s.log(e),e&&e.rows&&0<e.rows.length&&(a.items=[].concat((0,i.Z)(a.items),(0,i.Z)(e.rows)),a.start=a.start+a.pageSize,!(e.rows.length<a.pageSize))||(a.finished=!0,a.moreDataCanBeLoaded=!1)}).catch(function(e){e=e.message;a.finished=!0,a.dsf.layer.toast(e),a.finishedTips=e}).finally(function(){a.loading=!1,a.isLoading=!1})},clearSearchValue:function(){this.searchValue=""},goForm:function(e){this.$router.push({name:"commonForm",params:{pk:e.agendaId||e.id||e.pk,moduleId:e.moduleId}})}}},n=(0,t(51900).Z)(a,function(){var t=this,i=t._self._c;return i("div",{attrs:{id:"has-read-list"}},[i("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:t.doRefresh,clear:t.clearSearchValue},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),i("div",{staticClass:"content"},[i("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.doRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[i("van-list",{attrs:{finished:t.finished,"finished-text":t.moreDataCanBeLoaded?"":t.finishedTips,offset:500,"immediate-check":!1},on:{load:t.infinite},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.items,function(a,e){return i("div",{staticClass:"card",style:{"margin-bottom":e==t.items.length-1?"0":""},on:{click:function(e){return t.goForm(a)}}},[i("p",{staticClass:"title"},[t._v(t._s(a.itemsContent))]),t._v(" "),i("div",{staticClass:"info"},[i("p",[i("van-icon",{staticClass:"mar-right_5",attrs:{name:"contact"}}),t._v(" "),i("span",[t._v(t._s(a.name))])],1),t._v(" "),i("p",[i("van-icon",{staticClass:"mar-right_5",attrs:{name:"underway-o"}}),t._v(" "),i("span",[t._v(t._s(a.time))])],1)])])}),0)],1)],1)],1)},[],!1,null,"335605dc",null).exports}}]);