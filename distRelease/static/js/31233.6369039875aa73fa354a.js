"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[31233],{31233:function(t,e,a){a.r(e),a.d(e,{default:function(){return o}});var e=a(8450),i=a.n(e),e=a(18428),s=a.n(e),n=a(25108),e={name:"HealthStatistics",data:function(){return{isShowStartTimePicker:!1,isShowEndTimePicker:!1,tabIndex:"unit",startDate:new Date((new Date).toLocaleDateString()),endDate:new Date((new Date).toLocaleDateString()),tempStartDate:new Date,tempEndDate:new Date,minDate:new Date((new Date).getFullYear()-2,0,1),maxDate:new Date,tabs:[{title:"本单位情况",value:"unit"},{title:"本部门情况",value:"dept"}],healthData:{},color:["#0089FF","#67C23B","#F66C6C","#E6A23D"]}},created:function(){var t=dsf.util.loadLocalStore("user");-1<t.privileges.findIndex(function(t){return"单位主要领导"==t.name||"单位领导"==t.name})?(this.tabIndex="unit",this.tabs=[{title:t.unitName||"本单位情况",value:"unit"}],this.getStatisticalInfo()):-1<t.privileges.findIndex(function(t){return"部门领导"==t.name})&&(this.tabIndex="dept",this.tabs=[{title:t.deptName||"本部门情况",value:"dept"}],this.getStatisticalInfo())},mounted:function(){},methods:{toList:function(t,e){var a;3==t?(a={startTime:dsf.date.format(this.startDate,"yyyy-mm-dd"),endTime:dsf.date.format(this.endDate,"yyyy-mm-dd"),org:this.tabIndex},this.tabIndex,this.$router.push({path:"/commonList?fileType=weidaka",query:{secQuery:i()(a)}})):1==t?(a={query_A0014:"".concat(dsf.date.format(this.startDate,"yyyy-mm-dd")," - ").concat(dsf.date.format(this.endDate,"yyyy-mm-dd"))},e&&(a=JSON.parse(i()(s()(a,e)))),n.log(a),"dept"==this.tabIndex?this.$router.push({path:"/commonList/2102042214385hLGTopijGsu7am1uwU/210202144200a6hFT4QWrGbmmP4dSy1",query:{secQuery:i()(a)}}):this.$router.push({path:"/commonList/210202144709rE5QO2dYn1nqs4R4TR6/210202144200a6hFT4QWrGbmmP4dSy1",query:{secQuery:i()(a)}})):(t={query_A0014:"".concat(dsf.date.format(this.startDate,"yyyy-mm-dd")," - ").concat(dsf.date.format(this.endDate,"yyyy-mm-dd"))},"dept"==this.tabIndex?this.$router.push({path:"/commonList/210202191342WVy9e4IRDVgexvuvUSp/210202190424cbnhcSkB8vZow0JzifQ",query:{secQuery:i()(t)}}):this.$router.push({path:"/commonList/210204221350w1IEf19kz4gi7x0KM41/210202190424cbnhcSkB8vZow0JzifQ",query:{secQuery:i()(t)}}))},getStatisticalInfo:function(){var i=this,e=dsf.layer.loading(),t={startTime:dsf.date.format(this.startDate,"yyyy-mm-dd"),endTime:dsf.date.format(this.endDate,"yyyy-mm-dd"),org:this.tabIndex};dsf.http.get("fn//epidemic/statistical",t).then(function(t){var a,t=t.data;n.log(t),"success"==t.type&&(a=0,t.data.cityStatisticalVos.forEach(function(t,e){3<a&&(a=0),t.color=i.color[a],a++}),i.healthData=t.data,dsf.layer.closeLoading(e))})},openStartTimePicker:function(){this.tempStartDate=this.startDate,this.isShowStartTimePicker=!0},openEndTimePicker:function(){this.tempEndDate=this.endDate,this.isShowEndTimePicker=!0},startDateConfirm:function(t){new Date(t).getTime()>new Date(this.endDate).getTime()?dsf.layer.toast("开始日期不能大于结束日期"):(this.startDate=t,n.log(dsf.date.format(this.startDate,"yyyy-mm-dd"),dsf.date.format(this.endDate,"yyyy-mm-dd")),this.getStatisticalInfo(),this.isShowStartTimePicker=!1)},endDateConfirm:function(t){new Date(t).getTime()<new Date(this.startDate).getTime()?dsf.layer.toast("结束日期不能小于起始日期"):(this.endDate=t,this.getStatisticalInfo(),this.isShowEndTimePicker=!1)},dateFormat:function(t,e){var a,i={"M+":(t=new Date(t)).getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()},t=4<=(t=t.getFullYear().toString()).length?t:"0000".substr(0,4-t.length)+t;for(a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return e}}},o=(0,a(51900).Z)(e,function(){var a=this,i=a._self._c;return i("div",{attrs:{id:"health-statistics"}},[i("div",{staticClass:"time-container"},[i("span",[a._v("统计时间:")]),a._v(" "),i("div",{staticClass:"color_grey mar-left_10"},[i("span",{on:{click:a.openStartTimePicker}},[a._v(a._s(a.dateFormat(a.startDate,"MM月dd日")))]),a._v(" "),i("span",[a._v("-")]),a._v(" "),i("span",{on:{click:a.openEndTimePicker}},[a._v(a._s(a.dateFormat(a.endDate,"MM月dd日")))])])]),a._v(" "),i("div",{staticClass:"mar-top_10"},[i("van-tabs",{staticClass:"top-tabs",on:{change:a.getStatisticalInfo},model:{value:a.tabIndex,callback:function(t){a.tabIndex=t},expression:"tabIndex"}},a._l(a.tabs,function(t,e){return i("van-tab",{key:e,attrs:{title:t.title,name:t.value}},[i("div",{staticClass:"info-container mar-top_10"},[i("p",{staticClass:"title"},[a._v("健康情况")]),a._v(" "),i("div",{staticClass:"item-container mar-top_10"},[i("div",{staticClass:"pad_10"},[i("div",{staticClass:"item-info",on:{click:function(t){return a.toList(1)}}},[i("span",{staticStyle:{color:"#0089FF"}},[a._v(a._s(a.healthData.clockInCount))]),a._v(" "),i("span",[a._v("打卡人数")]),a._v(" "),i("div",{staticClass:"line"})]),a._v(" "),i("div",{staticClass:"item-info",on:{click:function(t){return a.toList(3)}}},[i("span",{staticStyle:{color:"#F66C6C"}},[a._v(a._s(a.healthData.unClockInCount))]),a._v(" "),i("span",[a._v("未打卡人数")])]),a._v(" "),i("div",{staticClass:"line_bottom"})]),a._v(" "),i("div",{staticClass:"mar-top_15"},[i("div",{staticClass:"item-info",on:{click:function(t){return a.toList(1,{"query_C-EPIDEMIC-0001":"1"})}}},[i("span",{staticStyle:{color:"#67C23B"}},[a._v(a._s(a.healthData.healthCount))]),a._v(" "),i("span",[a._v("健康人数")]),a._v(" "),i("div",{staticClass:"line"})]),a._v(" "),i("div",{staticClass:"item-info",on:{click:function(t){return a.toList(1,{"query_C-EPIDEMIC-0001":"2,3"})}}},[i("span",{staticStyle:{color:"#F66C6C"}},[a._v(a._s(a.healthData.unHealthCount))]),a._v(" "),i("span",[a._v("非健康人数")]),a._v(" "),i("div",{staticClass:"line"})]),a._v(" "),i("div",{staticClass:"item-info",on:{click:function(t){return a.toList(1,{"query_C-EPIDEMIC-0003":"1"})}}},[i("span",{staticStyle:{color:"#E6A23D"}},[a._v(a._s(a.healthData.contactCount))]),a._v(" "),i("span",[a._v("接触人数")])])])])]),a._v(" "),a.healthData.cityStatisticalVos&&a.healthData.cityStatisticalVos.length?i("div",{staticClass:"info-container mar-top_10"},[i("p",{staticClass:"title"},[a._v("所在城市")]),a._v(" "),a._l(a.healthData.cityStatisticalVos,function(t,e){return i("div",{key:e,staticClass:"progress-container"},[i("div",{staticClass:"progress-info"},[i("span",{style:{color:t.color}},[a._v(a._s(t.city))]),a._v(" "),i("span",{staticClass:"color_grey"},[a._v(a._s(t.count))])]),a._v(" "),i("van-progress",{attrs:{percentage:10,"stroke-width":"8","show-pivot":!1,color:t.color}})],1)})],2):a._e(),a._v(" "),i("div",{staticClass:"info-container mar-top_10"},[i("p",{staticClass:"title"},[a._v("报备情况")]),a._v(" "),i("div",{staticClass:"baobeiContent",on:{click:function(t){return a.toList(2)}}},[i("p",[a._v(a._s(a.healthData.reportCount))]),a._v(" "),i("p",[a._v("报备人数")])])])])}),1)],1),a._v(" "),i("van-popup",{attrs:{position:"bottom",round:""},model:{value:a.isShowStartTimePicker,callback:function(t){a.isShowStartTimePicker=t},expression:"isShowStartTimePicker"}},[i("van-datetime-picker",{attrs:{type:"date",title:"选择起始时间","min-date":a.minDate,"max-date":a.maxDate},on:{cancel:function(t){a.isShowStartTimePicker=!1},confirm:a.startDateConfirm},model:{value:a.tempStartDate,callback:function(t){a.tempStartDate=t},expression:"tempStartDate"}})],1),a._v(" "),i("van-popup",{attrs:{position:"bottom",round:""},model:{value:a.isShowEndTimePicker,callback:function(t){a.isShowEndTimePicker=t},expression:"isShowEndTimePicker"}},[i("van-datetime-picker",{attrs:{type:"date",title:"选择结束时间","min-date":a.minDate,"max-date":a.maxDate},on:{cancel:function(t){a.isShowEndTimePicker=!1},confirm:a.endDateConfirm},model:{value:a.tempEndDate,callback:function(t){a.tempEndDate=t},expression:"tempEndDate"}})],1)],1)},[],!1,null,"7469a748",null).exports}}]);