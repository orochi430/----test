"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[40304],{91306:function(e,t,a){a.r(t);a(85684);var n=a(43567),u=a(73473),i=a.n(u),o=a(90541),r=a(25108),u={initHandle:function(t,e,a){a.pk||a.$set(a.formData.main,"C-VISITOR-RGT-0010",{value:a.$route.query.fid}),0==a.$route.query.examineState&&(a.$set(a.formData.main,"C-VISITOR-RGT-0011",{value:a.$route.query.examineState,text:"待审核"}),e.buttons.mainButtons.find(function(e){return"保存"==e.name}).name="提交"),a.$bus.on("blurBus",function(e){r.log(e),"C-VISITOR-RGT-0005"!=e.metaData.metaId||1!=t.main["C-VISITOR-RGT-0004"].value||/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e.value)||(o.Z.layer.toast("身份证号码不正确，请重新输入"),a.$set(a.formData.main,"C-VISITOR-RGT-0005",{value:""}))})},saveFilter:function(a,e,t,n){return new(i())(function(e,t){"save"!=n&&"send"!=n||1!=a.main["C-VISITOR-RGT-0004"].value||/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(a.main["C-VISITOR-RGT-0005"].value)?e():t("身份证号码不正确，请重新输入")})},saveAfter:function(e,t,a){0==e.$route.query.examineState?o.Z.layer.toast("提交成功"):(o.Z.layer.toast("保存成功"),e.backSucces())},generateCode:function(e,t,a){r.log(a),o.Z.http.post("ctrl/register/visitorCode",{fid:e.main["C-VISITOR-RGT-0010"].value,checkItems:e.main.A0001.value}).then(function(e){0<e.data.data.length&&o.Z.http.Axios.get(o.Z.url.getWebPath(e.data.data[0].path),{responseType:"blob",headers:{"x-auth-token":o.Z.util.loadSessionStore("loginToken")}}).then(function(e){e=new Blob([e.data],{type:"image/jpeg"}),e=window.URL.createObjectURL(e);(0,n.Z)([e])})})}};t.default=u}}]);