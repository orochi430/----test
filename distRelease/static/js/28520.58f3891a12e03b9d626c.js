"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[28520],{28520:function(e,o,a){a.r(o),a.d(o,{default:function(){return r}});var o=a(8450),t=a.n(o),n=a(88561),s=a(62596),i=a(25108),o={data:function(){return{errored:!1,errorMsg:"",paras:this.$route.query.paras,logname:"lfry",txtpassword:"111111",DeviceId:"postman",DeviceName:"postman"}},created:function(){encodeURI("人民日报演示组织"),encodeURI("系统管理员");this.getDeviceInfo(),this.login()},mounted:function(){},methods:{login:function(){var a=this,e={__DATA:t()({logname:a.logname,password:a.txtpassword,device_id:a.DeviceId,device_desc:a.DeviceName})};dsf.http.post("/fn/mobileAuth/login",e).then(function(o){1==o.data.rcode?(n.Z.saveToLocalStore("uid",s.Z.encode(a.logname)),n.Z.saveToLocalStore("pid",s.Z.encode(a.txtpassword)),n.Z.saveToSessionStore("user",o.data.data),n.Z.saveToSessionStore("loginToken",o.data.data.auth.token),n.Z.saveToLocalStore("loginToken",o.data.data.auth.token),n.Z.saveToLocalStore("user",o.data.data),n.Z.logIn(function(){var e=o.data.data.user_id;dsf.config.login.loginSaveUUID?(e="fn/sso/devicesave?DeviceId="+a.DeviceId+"&DeviceName="+a.DeviceName+"&userId="+e,dsf.http.get(e).then(function(e){a.goUrl()}).catch(function(e){dsf.layer.toast(e.message)})):a.goUrl()})):(a.errored=!0,a.errorMsg=o.data.message,dsf.layer.toast(o.data.message))}).error(function(e){-1<e.message.indexOf("404")&&dsf.layer.toast("登录接口异常，请联系系统管理员！")}).always(function(){})},getDeviceInfo:function(){var o=this;"app"==n.Z.getClientName()&&document.addEventListener("deviceready",function(){i.log("deviceready_testlogin"),i.log(xsfCommon),xsfCommon.SystemTools(["DeviceId"],function(e){i.log(e),o.DeviceId=JSON.parse(e).DeviceId},function(e){alert("open failed: "+e)}),xsfCommon.SystemTools(["DeviceName"],function(e){i.log(e),o.DeviceName=JSON.parse(e).DeviceName},function(e){alert("open failed: "+e)})})},goUrl:function(){this.$router.replace("/PeopleDaily/Pre?paras=".concat(this.paras))}}},r=(0,a(51900).Z)(o,function(){var e=this,o=e._self._c;return o("div",[e.errored?o("div",{staticClass:"init-div"},[e._v(e._s(e.errorMsg))]):e._e()])},[],!1,null,"41b64b5e",null).exports}}]);