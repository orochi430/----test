"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[71741],{71741:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var i=a(25108),t={components:{},data:function(){return{fontSize:.32,loading:null,news:{title:null,time:null,viewsCount:null,image:null,content:null,publisher:null,files:null,images:null},counts:0,imgPreview:!1,previewImg:[]}},created:function(){this.getNewsDetail()},mounted:function(){var a=this,l={scale:1},e=this.$refs.newsdetail;e.addEventListener("touchstart",function(e){var t=e.touches,n=t[0],t=t[1];l.pageX=n.pageX,l.pageY=n.pageY,l.moveable=!0,t&&(e.preventDefault(),l.pageX2=t.pageX,l.pageY2=t.pageY),l.originScale=l.scale||1}),e.addEventListener("touchmove",function(e){var t,n;l.moveable&&(t=(n=e.touches)[0],n=n[1])&&(e.preventDefault(),l.pageX2||(l.pageX2=n.pageX),l.pageY2||(l.pageY2=n.pageY),t=(e=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)})({x:t.pageX,y:t.pageY},{x:n.pageX,y:n.pageY})/e({x:l.pageX,y:l.pageY},{x:l.pageX2,y:l.pageY2}),l.scale=n=2<(n=l.originScale*t)?2:n,a.fontSize=.32*n)}),e.addEventListener("touchend",function(){l.moveable=!1,delete l.pageX2,delete l.pageY2}),e.addEventListener("touchcancel",function(){l.moveable=!1,delete l.pageX2,delete l.pageY2})},methods:{getNewsDetail:function(){var a=this,l=dsf.layer.loading();dsf.http.post("fn/mobileSwdc/newsDetail",{infoId:this.$route.query.infoId,key:this.$route.query.key||""}).then(function(e){var t,n;i.log(e),200==e.data.code&&(a.news=e.data.data,n=0,n=null!=(t=e.data.data)&&null!=(t=t.images)&&t.length?null==(t=e.data.data)||null==(t=t.images)?void 0:t.length:0,n+=null!=(t=e.data.data)&&null!=(t=t.files)&&t.length?null==(t=e.data.data)||null==(e=t.files)?void 0:e.length:0,a.counts=n),dsf.layer.closeLoading(l),a.$nextTick(function(){a.$el.querySelector(".content");for(var e=a.$el.querySelectorAll(".content p"),t=0;t<e.length;t++)"center"==e[t].style.textAlign&&(e[t].style.textIndent=0)})}).error(function(e){dsf.layer.toast("数据获取失败！")})},goForm:function(e,t,n,a,l){i.log(111);t=dsf.url.getServerUrl("fn/office/openMobileOffice?fileId=".concat(t,"&moduleId=").concat(e,"&nodeId=").concat(n,"&flowId=").concat(l,"&x-auth-token=").concat(dsf.util.loadSessionStore("loginToken")));this.$router.push({name:"dsfIframe",params:{url:t,title:a},query:{url:t,title:a}})}}},n=(0,a(51900).Z)(t,function(){var n=this,e=n._self._c;return e("div",{ref:"newsdetail"},[1==n.$route.query.showHeader?e("van-nav-bar",{attrs:{title:"新闻详情","left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":function(e){return n.$router.go(-1)}}}):n._e(),n._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"title",domProps:{innerHTML:n._s(n.news.title)}}),n._v(" "),e("div",{staticClass:"time"},[e("span",[n._v("作者："+n._s(n.news.publisher))]),n._v(" "),e("span",[n._v("发布日期："+n._s(n.news.time))]),n._v(" "),n.news.viewsCount?e("span",[n._v("浏览："+n._s(n.news.viewsCount))]):n._e()]),n._v(" "),e("div",{staticClass:"content",style:{fontSize:n.fontSize+"rem"},domProps:{innerHTML:n._s(n.news.content)}}),n._v(" "),e("div",{staticClass:"fujian"},[n._v("相关附件("+n._s(n.counts)+")")]),n._v(" "),n._l(n.news.files,function(t){return e("div",{key:t.id,staticClass:"file"},[e("img",{attrs:{src:a(94605),alt:""}}),n._v(" "),e("span",{on:{click:function(e){return n.goForm(t.moduleId,t.fileId,t.nodeId,t.fileName,t.flowId)}}},[n._v(n._s(t.fileName))])])}),n._v(" "),n._l(n.news.images,function(t){return e("div",{key:t.id,staticClass:"file"},[e("img",{attrs:{src:a(94605),alt:""}}),n._v(" "),e("span",{on:{click:function(e){return n.goForm(t.moduleId,t.fileId,t.nodeId,t.fileName,t.flowIdm)}}},[n._v(n._s(t.fileName))])])})],2)],1)},[],!1,null,"5c9b2d62",null).exports},94605:function(e,t,n){e.exports=n.p+"static/img/attacIcon.1106cd5..png"}}]);