"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[49711],{17311:function(e,t,a){a.r(t);var o=a(73473),s=a.n(o),d=a(90541),n=a(2728),u=a(25108),o={beforeInitAsync:function(e,t,a){t.parameters.todoId&&(a.isShowForm=!1,n.Z.setTitle("会议通知"),d.Z.http.post("/fn/meetingNotice/getNoticeDataByInbox",{pk:e.main.A0001.value,pnId:t.parameters.pId}).then(function(e){e&&e.data&&"200"==e.data.code&&e.data.data&&"190121161348OthBI4s3sEhvfuDJ5FD"==e.data.data.noticeModuleId&&t.parameters.todoId?(u.log("跳转到通知单"),a.$router.replace({path:"/commonForm/".concat(e.data.data.noticeModuleId,"/").concat(e.data.data.noticeId,"?listId=MeetingList&method=viewTzD&validateByList=1&bmStatus=1"),query:{signUpPk:e.data.data.id,signUpModuleId:e.data.data.moduleId,sendStatus:e.data.data.sendStatus?1:-1,noticeType:e.data.data.noticeType,hyTzlx:e.data.data.noticeType,hytzStatus:e.data.data.hytzStatus}}),a.isShowForm=!0):u.log("不用跳转")}))}};o.initHandle=function(c,s,m){u.log("个人报名"),m.$bus.on("getUser",function(e){"c-meetingtz-071"==e.metaData.metaId&&m.$bus.emit("codeSelect","&excludeIds=".concat(d.Z.util.loadSessionStore("user").user_id))}),m.formTabs&&0<=(e=m.formTabs.findIndex(function(e){return"流转情况"==e.title}))&&m.formTabs.splice(e,1);var e,n="";function i(){var e,o=["c-meetingchry-003","c-meetingchry-004","c-meetingchry-002","c-meetingchry-0010"];for(e in c&&c.main["c-meetingtz-057"].value&&(o=c.main["c-meetingtz-057"].value.split(",")),m.$set(s.subform["200820104728nFPSM393YR9lLLDqjVy"].controls[0].privilege,"editable",!1),s.subform)"210812180520LFh4HCmmYKhau77Bubo"!=e&&s.subform[e].controls.forEach(function(e){e.privilege.visible=!!o.includes(e.metaId)});for(var t in s.subform)!function(a){m.formData.multinfos[a]&&m.$watch(function(){return m.formData.multinfos[a].rows},function(e,t){u.log(e),"210812180520LFh4HCmmYKhau77Bubo"!=(n=a)&&c.multinfos[a].rows.forEach(function(e){e.structControl.forEach(function(e){e.show=o.includes(e.metaId)?1:0})})},{deep:!0,immediate:!0})}(t);"15"==m.formMeta.parameters.nodeId&&m.$set(s.subform["22072016505548iml1jHscuhcmr562k"].controls[0].privilege,"editable",!1)}function r(e,t){u.log(e),m.$set(e,"c-meetingchry-002",{value:t.userId,text:t.userName,schema:"1::"+t.deptId}),m.$set(e,"c-meetingchry-004",{value:t.deptId,text:t.deptName,schema:"5::"+t.deptId}),m.$set(e,"c-meetingchry-003",{value:t.unitId,text:t.unitName,schema:"5::"+t.unitId}),m.$set(e,"c-meetingchry-0010",{value:t.userMobile}),m.$set(e,"c-meetingchry-0011",{value:t.deptUserOrder}),m.$set(e,"c-meetingchry-0017",{value:t.deptGlobalShoworder}),m.$set(e,"B0001",{value:t.zw||""}),t.orgIdLV1&&m.$set(e,"c-meetingchry-0012",{value:t.orgIdLV1,text:t.orgNameLV1,schema:"5::"+t.orgIdLV1}),t.orgIdLV2&&m.$set(e,"c-meetingchry-0013",{value:t.orgIdLV2,text:t.orgNameLV2,schema:"5::"+t.orgIdLV2}),t.orgIdLV3&&m.$set(e,"c-meetingchry-0014",{value:t.orgIdLV3,text:t.orgNameLV3,schema:"5::"+t.orgIdLV3}),t.orgIdLV4&&m.$set(e,"c-meetingchry-0015",{value:t.orgIdLV4,text:t.orgNameLV4,schema:"5::"+t.orgIdLV4}),t.orgIdLV5&&m.$set(e,"c-meetingchry-0016",{value:t.orgIdLV5,text:t.orgNameLV5,schema:"5::"+t.orgIdLV5})}function t(e){1==e?s.controls.forEach(function(e){"c-meetingtz-029"==e.metaId&&m.$set(e,"label","说明"),"c-meetingtz-071"==e.metaId&&m.$set(e,"label","参会人"),"委托人"==e.label&&m.$set(e,"label","参会人"),"c-meetingtz-018"==e.metaId&&m.$set(e,"show",1),"attach-3"==e.metaId&&m.$set(e,"show",1),"c-meetingtz-015"==e.metaId&&m.$set(e,"show",1),"c-meetingtz-070"==e.metaId&&m.$set(e,"show",0),"c-meetingtz-071"==e.metaId&&m.$set(e,"show",0),"200820104728nFPSM393YR9lLLDqjVy"==e.metaId&&m.$set(e,"show",1),"controlMobileFl"==e.metaId&&m.$set(e,"show",1),"22072016505548iml1jHscuhcmr562k"==e.metaId&&m.$set(e,"show",1),"c-meetingtz-015"==e.metaId&&m.$set(e,"show",1),"210812180520LFh4HCmmYKhau77Bubo"==e.metaId&&m.$set(e,"show",1)}):2==e?s.controls.forEach(function(e){"c-meetingtz-029"==e.metaId&&m.$set(e,"label","请假理由"),"c-meetingtz-018"==e.metaId&&m.$set(e,"show",0),"attach-3"==e.metaId&&m.$set(e,"show",0),"c-meetingtz-015"==e.metaId&&m.$set(e,"show",0),"c-meetingtz-070"==e.metaId&&m.$set(e,"show",0),"c-meetingtz-071"==e.metaId&&m.$set(e,"show",0),"200820104728nFPSM393YR9lLLDqjVy"==e.metaId&&m.$set(e,"show",0),"controlMobileFl"==e.metaId&&m.$set(e,"show",0),"22072016505548iml1jHscuhcmr562k"==e.metaId&&m.$set(e,"show",0),"c-meetingtz-015"==e.metaId&&m.$set(e,"show",0),"210812180520LFh4HCmmYKhau77Bubo"==e.metaId&&m.$set(e,"show",0)}):s.controls.forEach(function(e){"c-meetingtz-029"==e.metaId&&m.$set(e,"label","委托原因"),"c-meetingtz-071"==e.metaId&&m.$set(e,"label","委托人"),"c-meetingtz-018"==e.metaId&&m.$set(e,"show",0),"attach-3"==e.metaId&&m.$set(e,"show",1),"c-meetingtz-015"==e.metaId&&m.$set(e,"show",0),"c-meetingtz-070"==e.metaId&&m.$set(e,"show",0),"c-meetingtz-071"==e.metaId&&m.$set(e,"show",1),"200820104728nFPSM393YR9lLLDqjVy"==e.metaId&&m.$set(e,"show",0),"controlMobileFl"==e.metaId&&m.$set(e,"show",1),"参会人"==e.label&&m.$set(e,"label","委托人"),"22072016505548iml1jHscuhcmr562k"==e.metaId&&m.$set(e,"show",1),"c-meetingtz-015"==e.metaId&&m.$set(e,"show",1),"210812180520LFh4HCmmYKhau77Bubo"==e.metaId&&m.$set(e,"show",1)})}m&&m.$route.query&&(1==m.$route.query.type?(m.$set(c.main["c-meetingtz-070"],"value",1),m.$set(c.main["c-meetingtz-070"],"text","参会"),t(1)):2==m.$route.query.type?(m.$set(c.main["c-meetingtz-070"],"value",2),m.$set(c.main["c-meetingtz-070"],"text","请假"),t(2)):3==m.$route.query.type&&(m.$set(c.main["c-meetingtz-070"],"value",3),m.$set(c.main["c-meetingtz-070"],"text","委托他人"),t(3))),"-2"==c.main["C-MEETINGTZ-044"].value&&m.$set(c.main["c-meetingtz-070"],"text","参会"),i(),m.$bus.on("selectUserBus",function(e){var t;"c-meetingchry-002"==e.metaData.metaId&&(t=e.value,d.Z.http.post("fn/meetingNotice/getUserDept",{userId:t}).then(function(a){c.multinfos[n].rows.forEach(function(e,t){e["c-meetingchry-002"].value==a.data.data.userId&&c.multinfos[n].rows.splice(t,1)}),r(c.multinfos[n].rows[e.subFormIndex],a.data.data)}))}),m.$bus.on("subFormTreeSelect",function(n){n.selectArr.forEach(function(e,t){d.Z.http.post("fn/meetingNotice/getUserDept",{userId:e.id,deptId:e.attrs.deptId}).then(function(t){if(u.log(t.data),"200"==t.data.code){var e,a,o=t.data.data,s=!0;for(a in c.multinfos)c.multinfos[a].rows.forEach(function(e){e["c-meetingchry-002"].value==t.data.data.userId&&(d.Z.layer.toast("重复选择，请重新选择"),s=!1)});s&&null!=(e=m.$refs)&&null!=(e=e.formTab[0])&&e.$refs[n.subFormId][0]&&m.$refs.formTab[0].$refs[n.subFormId][0].$refs.subform.addCard(!1).then(function(e){r(e,o)}).then(function(){i()})}})})}),m.$bus.on("getSelectUser",function(e){u.log(e)}),m.$bus.on("selectUserBus",function(e,t){var a;"c-meetingtz-071"==e.metaData.metaId&&((a=d.Z.util.loadLocalStore("user").user_id)==e.value?(m.$set(c.main,"c-meetingtz-071",{value:"",text:"",schema:""}),d.Z.layer.toast("委托人员不可选择自己，请重新选择"),s.controls.forEach(function(e){"200820104728nFPSM393YR9lLLDqjVy"==e.metaId&&m.$set(e,"show",0)})):(s.controls.forEach(function(e){"200820104728nFPSM393YR9lLLDqjVy"==e.metaId&&m.$set(e,"show",1)}),u.log(a),d.Z.http.post("fn/meetingNotice/getUserDept",{userId:e.selectArr[0].id,deptId:e.selectArr[0].attrs.deptId}).then(function(e){"200"==e.data.code&&r(c.multinfos["200820104728nFPSM393YR9lLLDqjVy"].rows[0],e.data.data)})))})},o.saveFilter=function(e,t,a){if(0!=e.multinfos["200820104728nFPSM393YR9lLLDqjVy"].rows.length)return new(s())(function(t,e){try{t()}catch(e){t()}});d.Z.layer.toast("请选择参会人员！")},t.default=o}}]);