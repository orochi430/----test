"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[50856,18868],{84628:function(t,n,o){o.d(n,{Z:function(){return c}});o(84832);var n=o(59978),i=(o(16779),o(67763)),e=(o(73474),o(74755)),s=(o(23307),o(81392)),s={components:{DebounceClick:o(18868).Z,Icon:s.Z,Popup:e.Z,Grid:i.Z,GridItem:n.Z},props:{isFormBtn:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}},justify:{type:String,default:"center"},direction:{type:String,default:"row"},more:{type:Boolean,default:!1},size:{type:String,default:"normal"},showNum:{type:Number,default:3},btnStyle:{type:String,default:""}},data:function(){return{show:!1,showPopover:!1}},computed:{iconSize:function(){return"iconTile"==dsf.config.commonForm.btnStyle&&this.isFormBtn?"0.52rem":"small"===this.size?"0.4rem":"0.48rem"},styles:function(){return{justifyContent:this.justify,flexDirection:this.direction}},showData:function(){var o=[],t=0<this.showNum?this.showNum:1;return this.data.slice(0,t-1).forEach(function(t,n){o.push(t)}),this.showMore?o:this.data},moreData:function(){var o=[],t=0<this.showNum?this.showNum:1;return this.data.slice(t-1).forEach(function(t,n){o.push(t)}),o},showMore:function(){return this.more&&this.data.length>this.showNum}},methods:{handleButtonClick:function(t){var n=this;setTimeout(function(){n.$emit("click",t)},200)},handleShowMore:function(){this.show=!0},getContainer:function(){return document.body},getIconColor:function(t){return 0<=["已关注","已置顶","取消关注","取消置顶","取消收藏","已收藏","取消"].indexOf(t.name)||-1<t.name.indexOf("已")?{color:"#F1B902"}:t.parameters&&t.parameters.find(function(t){return"color"==t.key})?{color:t.parameters.find(function(t){return"color"==t.key}).value}:void 0}}},c=(0,o(51900).Z)(s,function(){var o=this,t=o._self._c;return t("div",{class:["ds-button-group",o.size,o.dsf.config.commonForm.showPopoverMore&&o.isFormBtn?"showDivider":"",o.isFormBtn?"":"list-button","showNum_".concat(o.showNum),o.btnStyle],style:o.styles},[o._l(o.showData,function(n){return t("debounce-click",{key:n.action},["liuChengShiPin"!=n.action||o.dsf.config.ddSetting.isDing?t("div",{class:!o.isFormBtn&&o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?"ds-button ds-button2":"ds-button",style:{color:1==o.showNum?"var(--normal)":""},on:{click:function(t){return o.handleButtonClick(n)}}},[t("Icon",{class:["iconfont",n.icon],style:o.getIconColor(n),attrs:{size:o.iconSize}}),o._v(" "),t("span",{class:!o.isFormBtn&&o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?"":"btn-text"},[o._v(o._s(n.name))])],1):o._e()])}),o._v(" "),o.showMore?[o.dsf.config.commonForm.showPopoverMore&&o.isFormBtn?t("div",{class:!o.isFormBtn&&o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?"ds-button ds-button2":"ds-button"},[t("van-popover",{attrs:{trigger:"click",actions:o.moreData,placement:"top"},scopedSlots:o._u([{key:"reference",fn:function(){return[!o.isFormBtn||o.isFormBtn&&!o.dsf.config.commonForm.hideMoreBtnIcon?t("Icon",{attrs:{size:o.iconSize,name:"apps-o"}}):o._e(),o._v(" "),t("span",{class:!o.isFormBtn&&o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?"":"btn-text"},[o._v("更多")])]},proxy:!0}],null,!1,1129681324),model:{value:o.showPopover,callback:function(t){o.showPopover=t},expression:"showPopover"}},o._l(o.moreData,function(n){return t("div",{key:n.action,staticStyle:{padding:"0.32rem"},on:{click:function(t){o.handleButtonClick(n),o.showPopover=!1}}},[t("span",{class:!o.isFormBtn&&o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?"":"btn-text"},[o._v(o._s(n.name))])])}),0)],1):t("div",{class:!o.isFormBtn&&o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?"ds-button ds-button2":"ds-button",style:{color:"var(--normal)"},on:{click:o.handleShowMore}},[!o.isFormBtn||o.isFormBtn&&!o.dsf.config.commonForm.hideMoreBtnIcon?t("Icon",{attrs:{size:o.iconSize,name:"apps-o"}}):o._e(),o._v(" "),t("span",{class:!o.isFormBtn&&o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?"":"btn-text"},[o._v("更多")])],1)]:o._e(),o._v(" "),t("van-popup",{attrs:{"get-container":o.getContainer,"lock-scroll":!0,round:"","close-icon-position":"top-right",position:"bottom"},model:{value:o.show,callback:function(t){o.show=t},expression:"show"}},[t("div",{staticClass:"popup-title"},[t("Icon",{staticClass:"iconfont iconxialajiantou",attrs:{slot:"icon",size:"0.4rem",color:"#000000"},on:{click:function(t){o.show=!1}},slot:"icon"}),o._v("更多\n    ")],1),o._v(" "),t("div",{staticClass:"popup-btn"},[t("Grid",{attrs:{"column-num":4,clickable:"",border:!1}},o._l(o.moreData,function(n){return"liuChengShiPin"!=n.action||o.dsf.config.ddSetting.isDing?t("GridItem",{key:n.action,on:{click:function(t){o.show=!1,o.handleButtonClick(n)}}},[t("Icon",{class:["iconfont",n.icon],style:o.getIconColor(n),attrs:{slot:"icon",size:o.iconSize},slot:"icon"}),o._v(" "),t("span",{staticClass:"grid-text",attrs:{slot:"text"},slot:"text"},[o._v(o._s(n.name))])],1):o._e()}),1)],1)])],2)},[],!1,null,"73374aec",null).exports},50856:function(t,n,o){o.d(n,{Z:function(){return d}});function i(t,n){var o=!0;return function(){o&&(o=!1,t.apply(this,arguments),setTimeout(function(){o=!0},n))}}var e=o(5044),n=(o(84832),o(59978)),s=(o(16779),o(67763)),c=(o(73474),o(74755)),u=(o(23307),o(81392)),a=o(73473),r=o.n(a),a=o(18868),m=o(84628),l=o(25108),a={data:function(){return{btnSty:!1,moreBtn:[],isShowMoreBtn:!1,isShowSub:!1,subButtons:[],isShowIntroductionImage:!1,introductionImage:[],isShowCoverBtn:!1,newButton:null,introductionImageIndex:0}},components:{DebounceClick:a.Z,DsfButtonGroup:m.Z,Icon:u.Z,Popup:c.Z,Grid:s.Z,GridItem:n.Z},props:{buttons:{type:Object,default:function(){}},single:{type:Boolean,default:!1},size:{type:String,default:"normal"},more:{type:Boolean,default:!1},isFormBtn:{type:Boolean,default:!1},isShowYoZoHandWriteBtn:{type:Boolean,default:!1},isShowWriteOpintionBtn:{type:Boolean},isShowQiXiangJuEditOpinion:{type:Boolean},isListBtn:{type:Boolean,default:!1}},mounted:function(){this.btnSty=!0,this.isFormBtn&&null!=this.isShowWriteOpintionBtn&&this.checkIsShowWriteOpintionBtn(),this.showIntroductionImage()},computed:{commonButtons:function(){var t=this.buttons.commonButton||this.buttons.commonButtons?(0,e.Z)(this.buttons.commonButton||this.buttons.commonButtons):[],n=this.buttons.mainButtons;if(n&&2<n.length)for(var o=n.length-1;2<=o;o--)t.unshift(n[o]);return t},mainButtons:function(){this.buttons.mainButtons&&(0,e.Z)(this.buttons.mainButtons);var t=[];return(t=this.buttons.mainButtons?this.buttons.mainButtons.filter(function(t,n){return n<2}):t).reverse()}},methods:{onCommonClick:i(function(t){var n=this;this.isListBtn?this.$emit("listBtnClick",t):"subBtnPopup"==t.action?this.showSubButtons(t):this.comfirmDialog(t).then(function(){n.$emit("getNowButton",t),n.$emit("commonClick",t.action)})},1e3),onMainClick:i(function(t){var n=this;this.isListBtn?this.$emit("listBtnClick",t):"subBtnPopup"==t.action?this.showSubButtons(t):this.comfirmDialog(t).then(function(){n.$emit("getNowButton",t),n.$emit("mainClick",t.action)})},1e3),getContainer:function(){return document.body},comfirmDialog:function(o){return new(r())(function(t,n){o.parameters&&o.parameters.find(function(t){return"isComfirm"==t.key&&1==t.value})?dsf.layer.confirm({message:o.parameters.find(function(t){return"comfirmText"==t.key}).value.replace(/\\n/gm,"<br/>"),confirmButtonText:"确认"},function(){t()}):t()})},showSubButtons:function(t){t.parameters&&t.parameters.find(function(t){return"subButtons"==t.key})&&(this.subButtons=t.parameters.find(function(t){return"subButtons"==t.key}).value.split(";").map(function(t){return JSON.parse(t.replace(/'/g,'"'))}),this.isShowSub=!0)},onSubButton:function(t){l.log(t),this.isShowSub=!1,this.$emit("getNowButton",t),this.$emit("commonClick",t.action)},checkIsShowWriteOpintionBtn:function(){var o=this,t=this.commonButtons.concat(this.mainButtons),i=["BtnWriteOpinion","qxjEditOpinion"];t.forEach(function(t){var n;"qxjEditOpinion"==t.action&&o.$emit("update:isShowQiXiangJuEditOpinion",!0),-1<i.indexOf(t.action)&&o.$emit("update:isShowWriteOpintionBtn",!0),"subBtnPopup"==t.action&&(n=t.parameters.find(function(t){return"subButtons"==t.key}).value)&&(-1<n.indexOf("qxjEditOpinion")&&o.$emit("update:isShowQiXiangJuEditOpinion",!0),0<i.filter(function(t){return-1<n.indexOf(t)}).length)&&o.$emit("update:isShowWriteOpintionBtn",!0)})},showIntroductionImage:function(){this.introductionImageIndex=0;var t=this.mainButtons.concat(this.commonButtons).find(function(t){return Array.isArray(t.introductionImage)&&0<t.introductionImage.length});t&&(this.newButton=t,this.introductionImage=t.introductionImage.map(function(t){return dsf.url.getServerUrl(t)}),this.isShowIntroductionImage=!0,1==this.introductionImage.length)&&(this.isShowCoverBtn=!0)},updateGuidanceModule:function(){var n=this;this.isShowIntroductionImage=!1,dsf.http.post("/fn/updateGuidanceModule/saveUserInfo",{type:1,objId:this.newButton.buttonId,objName:this.newButton.name}).then(function(t){n.newButton.introductionImage="",n.showIntroductionImage()})},clickintroductionImage:function(){this.introductionImageIndex==this.introductionImage.length-1?this.updateGuidanceModule():this.introductionImageIndex+=1}}},d=(0,o(51900).Z)(a,function(){var o=this,i=o._self._c;return i("div",{staticStyle:{width:"100%"}},[o.isFormBtn?i("div",{staticClass:"ds-button-toolbox"},[o.dsf.config.commonForm.btnStyle?i("div",{staticStyle:{width:"100%"}},[i("DsfButtonGroup",{attrs:{isFormBtn:o.isFormBtn,more:o.more,data:o.mainButtons.reverse().concat(o.commonButtons),size:o.size,showNum:"mobile"==o.dsf.config.clientType?o.dsf.config.commonForm.btnNum||4:5,btnStyle:o.dsf.config.commonForm.btnStyle,justify:"space-around",direction:o.dsf.config.commonForm.btnDirection||"row"},on:{click:o.onCommonClick}})],1):o.commonButtons.length+o.mainButtons.length<=2?i("div",{staticClass:"flex1 ds-button-center"},[o._l(o.commonButtons,function(n,t){return i("debounce-click",{key:n.action},[i("van-button",{staticClass:"flex1",attrs:{size:"middle",icon:n.icon,type:n.type||(t!=o.commonButtons.length-1||o.mainButtons.length?"default":"primary"),disabled:n.disabled},on:{click:function(t){return o.onCommonClick(n)}}},[o._v(o._s(n.name)+"\n        ")])],1)}),o._v(" "),o._l(o.mainButtons,function(n,t){return i("debounce-click",{key:n.action},[i("van-button",{staticClass:"flex1",attrs:{size:"middle",icon:n.icon,type:n.type||(t==o.mainButtons.length-1?"primary":"default"),disabled:n.disabled},on:{click:function(t){return o.onMainClick(n)}}},[o._v(o._s(n.name)+"\n        ")])],1)})],2):i("div",{staticClass:"ds-button-toolbox"},[o.commonButtons&&0<o.commonButtons.length||o.btnSty?i("DsfButtonGroup",{staticClass:"ds-button-left",staticStyle:{width:"auto"},attrs:{isFormBtn:o.isFormBtn,more:o.more,data:o.commonButtons,size:o.size,showNum:0,justify:"flex-start"},on:{click:o.onCommonClick}}):o._e(),o._v(" "),o.mainButtons.length||o.btnSty?i("div",{class:[o.btnSty?"flex1":"",o.commonButtons&&0!=o.commonButtons.length?"":"full","ds-button-right",1===o.mainButtons.length?"ds-button-single":"ds-button-many"]},o._l(o.mainButtons,function(n,t){return i("debounce-click",{key:n.action},[i("van-button",{class:["flex1",{single:o.single&&1===o.mainButtons.length}],attrs:{size:"middle",type:t===o.mainButtons.length-1?"primary":"default"},on:{click:function(t){return o.onMainClick(n)}}},[o._v(o._s(n.name)+"\n          ")])],1)}),1):o._e()],1)]):i("div",{staticClass:"ds-button-toolbox"},[o.commonButtons&&0<o.commonButtons.length||o.btnSty?i("DsfButtonGroup",{staticClass:"ds-button-left",class:{flex1:o.btnSty},staticStyle:{"margin-left":"-0.2rem"},attrs:{isFormBtn:o.isFormBtn,more:o.more,data:o.commonButtons,size:o.size,showNum:o.dsf.config.commonList&&o.dsf.config.commonList.btnToggleShow?2:3,justify:"flex-start"},on:{click:o.onCommonClick}}):o._e(),o._v(" "),o.mainButtons.length||o.btnSty?i("div",{class:[o.btnSty?"flex1":"",o.commonButtons&&0!=o.commonButtons.length?"":"full","ds-button-right",1===o.mainButtons.length?"ds-button-single":"ds-button-many"]},o._l(o.mainButtons,function(n,t){return i("debounce-click",{key:n.action},[i("van-button",{class:{single:o.single&&1===o.mainButtons.length},staticStyle:{width:"45%"},attrs:{size:"middle",type:t===o.mainButtons.length-1?"primary":"default"},on:{click:function(t){return o.onMainClick(n)}}},[o._v(o._s(n.name))])],1)}),1):o._e()],1),o._v(" "),i("van-action-sheet",{attrs:{value:o.isShowSub,actions:o.subButtons,"get-container":"#app"},on:{select:o.onSubButton,"click-overlay":function(t){o.isShowSub=!1}}}),o._v(" "),i("van-popup",{staticClass:"introductionImagePopup",attrs:{position:"bottom","get-container":"#app","overlay-class":"introductionImageOverlay",round:""},model:{value:o.isShowIntroductionImage,callback:function(t){o.isShowIntroductionImage=t},expression:"isShowIntroductionImage"}},[i("img",{attrs:{src:o.introductionImage[o.introductionImageIndex],alt:""},on:{click:o.clickintroductionImage}}),o._v(" "),i("div",{staticClass:"coverBtn",on:{click:o.updateGuidanceModule}},[o._v("已知晓")])])],1)},[],!1,null,"f00e9b3c",null).exports},18868:function(t,n,o){var s=o(25108);const c=(i,e=500,s=!0)=>{let c,u=0,a,r,m=o=>{c=setTimeout(()=>{var t=(new Date).getTime(),n=t-u;n<o?(u=t,m(e-n)):(s||i.apply(a,r),clearTimeout(c),c=null)},o)};return function(){a=this,r=arguments;var t=(new Date).getTime();u=t,c||(s&&i.apply(a,r),m(e))}};n.Z={name:"DebounceClick",functional:!0,render(t,n){var o,i=n.props.time,e=n.props.immediate,n=n.slots().default;return void 0===n?(s.warn("<debounce> 组件必须要有子元素"),null):((n=n[0]||null).data.on&&n.data.on.click?(o=n.data.on.click,o=c(o,i,e),n.data.on.click=o):n.componentOptions&&n.componentOptions.listeners.click&&(o=n.componentOptions.listeners.click,o=c(o,i,e),n.componentOptions.listeners.click=o),n)}}}}]);