"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[56265],{56265:function(t,n,e){e.r(n),e.d(n,{default:function(){return g}});var n=e(26243),a=e.n(n),n=e(62680),s=e.n(n),n=e(95366),o=e.n(n),n=e(6919),i=e.n(n),d=e(77193),n=e(27921),r=e.n(n),n=e(90487),l=e.n(n),n=e(84528),c=e(20629),f=e(25108);function u(n,t){var e,i=a()(n);return s()&&(e=s()(n),t&&(e=e.filter(function(t){return o()(n,t).enumerable})),i.push.apply(i,e)),i}var n={name:"announcementStatus",components:{dingBtn:n.default},data:function(){return{bt:this.$route.query.bt,id:this.$route.query.pk||"",noticeId:"",dingObj:{users:["100","101"]},dingObjbaoming:{},tabIndex:0,tabData1:{count:0,loading:!1,finished:!0,list:[]},tabData2:{count:0,loading:!1,finished:!0,list:[]}}},filters:{badgeCount:function(t){return 100<t?"99+":t<1?"":t}},computed:function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?u(Object(e),!0).forEach(function(t){(0,d.Z)(n,t,e[t])}):i()?Object.defineProperties(n,i()(e)):u(Object(e)).forEach(function(t){Object.defineProperty(n,t,o()(e,t))})}return n}({},(0,c.rn)({isShowAppFooter:function(t){return t.isShowAppFooter},isShowAppHeader:function(t){return t.isShowAppHeader}})),created:function(){f.log(this.id),this.getMeetingTZTODO(),this.getMeetingTZUNTODO()},methods:{onLoad1:function(){},onLoad2:function(){},onLoad3:function(){},getMeetingTZTODO:function(){var n=this,t=this.dsf.layer.loading();dsf.http.post("fn/notice/getReadUsers",{pk:this.id,type:"read"}).done(function(t){f.log(t),n.tabData1.list=t}).error(function(t){n.dsf.layer.toast(t.message)}).always(function(){n.dsf.layer.closeLoading(t)})},getMeetingTZUNTODO:function(){var n=this;dsf.http.post("fn/notice/getReadUsers",{pk:this.id,type:"unread"}).done(function(t){f.log(t),(n.tabData2.list=t).forEach(function(t){t.user_name=t.userName});var e=[],i=(t.forEach(function(t){var n;e.indexOf(t.foreignId)<0&&(0<=t.foreignId.indexOf(",")?(n=t.foreignId.split(",").filter(function(t){if(0<t.length)return t}),e=e.concat(n)):e.push(t.foreignId))}),dsf.util.loadSessionStore("user")),e=r()(new(l())(e)).filter(function(t){if(t.length&&t!=i.foreignId)return t}),a={},t=t.reduce(function(t,n){return a[n.foreignId]||n.foreignId==i.foreignId||(a[n.foreignId]=t.push(n)),t},[]);t.forEach(function(t){t.foreign_id=t.foreignId}),f.log(t),n.$set(n.dingObj,"users",e),n.$set(n.dingObj,"selectPerson",t)}).error(function(t){n.dsf.layer.toast(t.message)}).always(function(){})}}},g=(0,e(51900).Z)(n,function(){var e=this,i=e._self._c;return i("div",{staticClass:"ds-meeting-sign-up-status"},[i("van-tabs",{attrs:{animated:"",sticky:"","offset-top":e.dsf.util.getOffsetTop()},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[i("van-tab",{style:e.isShowAppHeader?{height:"calc(100vh - 1.84rem)"}:{height:"calc(100vh - ".concat(e.dsf.util.getOffsetTop("0.92rem"),")")},attrs:{title:"未阅读",badge:e._f("badgeCount")(e.tabData2.list.length)}},[i("div",{staticClass:"not-sign common"},[i("van-list",{attrs:{finished:e.tabData2.finished,"finished-text":""},on:{load:e.onLoad2},model:{value:e.tabData2.loading,callback:function(t){e.$set(e.tabData2,"loading",t)},expression:"tabData2.loading"}},[i("div",{staticClass:"not-sign-list common-list"},[e._l(e.tabData2.list,function(t,n){return i("div",{key:n,staticClass:"common-list-item"},[i("i",{staticClass:"iconfont icontouxiang"}),e._v(" "),i("span",{staticClass:"common-list-item-name"},[e._v(e._s(t.userName))])])}),e._v(" "),0===e.tabData2.list.length?i("commonempty"):e._e()],2)]),e._v(" "),e.tabData2.list.length&&e.dsf.config.ddSetting&&"dingding"==e.dsf.config.ddSetting.dingdingType?i("div",{staticClass:"not-sign-footer"},[i("dingBtn",{attrs:{pk:e.id,btntype:"ding",bt:e.bt,prarms:e.dingObj,text:"DING一下"}})],1):e._e()],1)]),e._v(" "),i("van-tab",{attrs:{title:"已阅读",badge:e._f("badgeCount")(e.tabData1.list.length)}},[i("van-list",{attrs:{finished:e.tabData1.finished,"finished-text":""},on:{load:e.onLoad1},model:{value:e.tabData1.loading,callback:function(t){e.$set(e.tabData1,"loading",t)},expression:"tabData1.loading"}},[i("div",{staticClass:"signed-list common-list"},e._l(e.tabData1.list,function(t){return i("div",{key:t.id,staticClass:"common-list-item comment_item"},[i("div",{staticClass:"common_title"},[i("span",{staticClass:"common-list-item-name common_title_span"},[e._v(e._s(t.userName))]),e._v(" "),i("span",{staticClass:"signed-list-item-time common_title_spanr"},[e._v(e._s(t.readTime))])])])}),0),e._v(" "),0===e.tabData1.list.length?i("commonempty"):e._e()],1)],1)],1)],1)},[],!1,null,"5f5a34d9",null).exports}}]);