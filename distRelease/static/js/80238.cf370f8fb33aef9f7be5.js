"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[80238,18868,31204],{8449:function(e,n,t){var i=t(8167),a=t(31314),o=t(77193),s=t(8450),c=t.n(s),l=t(25108),s=function(){function s(){(0,i.Z)(this,s),(0,o.Z)(this,"ws",null),(0,o.Z)(this,"userid",""),(0,o.Z)(this,"ponReceivedTodo",null),(0,o.Z)(this,"ponScanCodeAfter",null),(0,o.Z)(this,"setIntervalWesocketPush",null)}return(0,a.Z)(s,[{key:"open",value:function(e){var n=dsf.url.getRootPath(),t=dsf.util.loadSessionStore("user").user_id||dsf.util.loadSessionStore("user").userId;n.startsWith("http:")?n=n.replace("http","ws")+"servletWebsocket/"+t:n.startsWith("https:")&&(n=n.replace("https","wss")+"servletWebsocket/"+t),this.ws=new WebSocket(n),this.ws.onopen=function(){e&&e()},this.ws.onmessage=function(e){var n;"pong"!=e.data&&(l.log(e),e=JSON.parse(e.data),n=s.getInstance(),-1<e.badgeType.indexOf("inbox")&&0<e.userIds.filter(function(e){return e==n.userid}).length?null!=n.ponReceivedTodo&&n.ponReceivedTodo({badgeType:e.badgeType,refresh:!0}):"qrCodeMessag"==e.badgeType&&e.userIds==n.userid?null!=n.ponScanCodeAfter&&n.ponScanCodeAfter({data:e.data}):"sameScreenMessage"==e.badgeType&&e.userIds.includes(n.userid)&&null!=n.ponmeettingSameScreen&&n.ponmeettingSameScreen({data:e.data}))},this.ws.onerror=function(e){l.log(e)},this.ws.onclose=function(){s.getInstance()}}},{key:"sendMessage",value:function(e){this.ws.send(c()(e))}},{key:"onReceivedTodo",value:function(e,n){this.userid=e,this.ponReceivedTodo=n}},{key:"onScanCodeAfter",value:function(e,n){this.userid=e,this.ponScanCodeAfter=n}},{key:"onmeettingSameScreen",value:function(e,n){this.userid=e,this.ponmeettingSameScreen=n}},{key:"clearFunction",value:function(){this.ponReceivedTodo=null,this.ponScanCodeAfter=null}},{key:"sendPing",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:6e4,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"ping";clearInterval(this.setIntervalWesocketPush),this.ws&&1==this.ws.readyState&&this.ws.send(t),this.setIntervalWesocketPush=setInterval(function(){e.ws&&1==e.ws.readyState?e.ws.send(t):clearInterval(e.setIntervalWesocketPush)},n)}},{key:"getWsReadyState",value:function(){return s.instance.ws.readyState}}],[{key:"getInstance",value:function(e,n,t){return s.instance||(s.instance=new s).open(function(){s.instance.sendPing(),n&&t&&s.instance[n](t)}),s.instance}},{key:"close",value:function(e){s.instance&&s.instance.ws&&(clearInterval(s.instance.setIntervalWesocketPush),1==s.instance.ws.readyState&&s.instance.ws.close(),s.instance=null,e)&&e()}}]),s}();n.Z=s},80238:function(e,n,t){t.r(n),t.d(n,{default:function(){return c}});var s=t(5044),i=t(77193),a=t(88561),o=t(8449),n={components:{DebounceClick:t(18868).Z},props:{},data:function(){var e={isLoading:!1,finished:!1,finishedTips:"",loading:!1,start:1,list:[],showFlowSend:!1,selected:{},movingInfoId:"",canOpen:!1,showMoving:!1};return(0,i.Z)(e,"canOpen",!1),(0,i.Z)(e,"checkall",!1),(0,i.Z)(e,"showCheckAll",!1),(0,i.Z)(e,"checkedArr",[]),(0,i.Z)(e,"oaScoket",{}),e},created:function(){},mounted:function(){var n=this;o.Z.close(),this.oaScoket=o.Z.getInstance(this),this.oaScoket.onReceivedTodo(a.Z.loadSessionStore("user").user_id,function(e){n.onRefresh()})},activated:function(){this.onRefresh()},methods:{openSwipe:function(e){e.canOpen=!1},showJinJi:function(e){var n="static/squMenu/jinji.png";return 2==e.urgent||3==e.urgent||1==e.isUrgent||2==e.isUrgent||10==e.isUrgent?n:3==e.isUrgent||4==e.isUrgent?"static/squMenu/teji.png":""},onRefresh:function(){this.finishedTips="",this.finished=!1,this.loading=!0,this.list=[],this.start=1,this.getList()},onLoad:function(){this.getList()},getList:function(){var t=this,e={limit:15,page:this.start,showTotal:!0};dsf.http.get("/fn/list/20012015444389JJL1Af0XRDv0xWYmy/mobile/q?moduleId=190620203722hdlBjofE3g9kzT1h4ct",e).then(function(e){var n=e.data.total,e=e.data.datas?e.data.datas.map(function(e){return e.dataValue.canOpen=!0,e.dataValue}):[];t.start+=1,t.total=n||0,t.list=[].concat((0,s.Z)(t.list),(0,s.Z)(e)),t.list.length===n&&(t.finished=!0)}).finally(function(){t.loading=!1,t.isLoading=!1})},goForm:function(e){this.$router.push({name:"commonForm",params:{moduleId:e["MAININFO.A0004"]||e["MAININFO.A0004.value"],pk:e["MAININFO.A0001"]}})}}},c=(0,t(51900).Z)(n,function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"list-content"},[s("van-list",{attrs:{finished:t.finished,"finished-text":t.finishedTips},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(n,e){return s("debounce-click",{key:e},[s("div",{class:["flex","ac","list-item"],on:{click:function(e){return t.goForm(n)}}},[t.showCheckAll?s("van-checkbox",{attrs:{shape:"square","icon-size":"16px"},model:{value:n.checked,callback:function(e){t.$set(n,"checked",e)},expression:"item.checked"}}):t._e(),t._v(" "),s("span",{staticClass:"icon iconfont iconfawen",staticStyle:{"font-size":"38px",margin:"0px 10px",color:"#087FE3"}}),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"ellipsis title",class:{bold:!n.isRead}},[t.showJinJi(n)?s("img",{staticClass:"jinji",attrs:{src:t.showJinJi(n)}}):t._e(),t._v(" "),s("span",[t._v(t._s(n["MAININFO.B0001"]))])]),t._v(" "),s("div",{staticClass:"flex jb sub-title"},[n.opinion?s("span",{staticStyle:{width:"10rem"}},[s("span",{staticStyle:{overflow:"hidden"}},[t._v(t._s(n.opinion))])]):t._e(),t._v(" "),n["MAININFO.A0022"]?s("span",{staticStyle:{flex:"1"}},[s("img",{attrs:{src:"static/images/project/fgwPad/person.png",alt:""}}),t._v("\n                                "+t._s(n["MAININFO.A0022"])+"\n                            ")]):t._e(),t._v(" "),s("span",[s("img",{attrs:{src:"static/images/project/fgwPad/timer.png",alt:""}}),t._v("\n                                "+t._s(n["MAININFO.A0014"])+"\n                            ")])])])],1)])}),1),t._v(" "),s("commonempty",{directives:[{name:"show",rawName:"v-show",value:!t.list.length&&!t.loading,expression:"!list.length && !loading"}]})],1)])},[],!1,null,"3fdd7195",null).exports},18868:function(e,n,t){var a=t(25108);const o=(s,i=500,a=!0)=>{let o,c=0,l,r,u=t=>{o=setTimeout(()=>{var e=(new Date).getTime(),n=e-c;n<t?(c=e,u(i-n)):(a||s.apply(l,r),clearTimeout(o),o=null)},t)};return function(){l=this,r=arguments;var e=(new Date).getTime();c=e,o||(a&&s.apply(l,r),u(i))}};n.Z={name:"DebounceClick",functional:!0,render(e,n){var t,s=n.props.time,i=n.props.immediate,n=n.slots().default;return void 0===n?(a.warn("<debounce> 组件必须要有子元素"),null):((n=n[0]||null).data.on&&n.data.on.click?(t=n.data.on.click,t=o(t,s,i),n.data.on.click=t):n.componentOptions&&n.componentOptions.listeners.click&&(t=n.componentOptions.listeners.click,t=o(t,s,i),n.componentOptions.listeners.click=t),n)}}},8167:function(e,n,t){function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t.d(n,{Z:function(){return s}})},31314:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(26771),a=t(44660);function s(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),i(e,(0,a.Z)(s.key),s)}}function o(e,n,t){return n&&s(e.prototype,n),t&&s(e,t),i(e,"prototype",{writable:!1}),e}}}]);