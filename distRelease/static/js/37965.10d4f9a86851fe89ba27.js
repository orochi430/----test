"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[37965,17649],{37965:function(t,n,i){i.r(n),i.d(n,{default:function(){return o}});var n=i(5453),e=i(17649),s=i(25108),n={name:"announceDetail",components:{EnclosureButton:n.Z,EnclosurePre:e.default},data:function(){return{notSp:!1,active:0,actives:0,fileUrl:"",obj_hei:{height:""},docurl:""}},computed:{contentHeight:function(){var t=document.body.clientHeight;return this.obj_hei.height=t-170+"px",this.obj_hei}},created:function(){this.docurl=this.$route.query.url},mounted:function(){},methods:{onChange:function(t){s.log(t)},openFile:function(t){this.fileUrl="http://116.230.14.120:9031/DreamMobile/fn/file/download?infoId=200227153051zzr9X8OtgDJqoM6KP6Q&fileId=200227154106XJvaPsmVe2lQ4UkHDsT&fileName=测试正文.docx&nrType=1&moduleId=200201134851eEu0uTZ7flLMglxhn1I&x-auth-token=191213191439W7tOGuTwd4Rl7M5i3BQ-61ddb2074b3c492d8e205bf7d7f79d0d"},dayinClick:function(){},goutongClick:function(){}}},o=(0,i(51900).Z)(n,function(){var n=this,t=n._self._c;return t("div",{staticClass:"ds-announceDetail"},[t("div",{staticClass:"announcement-header"},[t("van-nav-bar",{attrs:{title:"通知公告"}})],1),n._v(" "),t("div",{staticClass:"announceDetail-tab"},[t("van-tabs",{model:{value:n.active,callback:function(t){n.active=t},expression:"active"}},[t("van-tab",{style:n.contentHeight,attrs:{title:"基本信息"}},[t("div",{staticClass:"announceDetail-tab-content"},[t("div",{staticClass:"announceDetail-tab-content-tit"},[n._v("\n            中共中央政治局常务委员会召开会议\n            听取疫情防控工作中央指导组工作汇报的通知\n          ")]),n._v(" "),t("div",{staticClass:"announcement-list-time"},[t("div",{staticClass:"announcement-list-time-left"},[t("i",[n._v("发布者:")]),n._v(" "),t("span",[n._v("张三")])]),n._v(" "),t("div",{staticClass:"announcement-list-time-right"},[t("i",[n._v("发布时间:")]),n._v(" "),t("span",[n._v("2020-05-04")])])]),n._v(" "),t("div",{staticClass:"announceDetail-tab-content-datail"},[n._v("\n            习近平指出，党中央决定向湖北等疫情严重地区派出指导组，督促贯彻落实党中央关于疫情防控工作各项决策部署，\n            全面加强疫情防控第一线工作指导。在党中央坚强领导和全国各族人民大力支持下，中央指导组同湖北人民和武汉人民并肩作战，\n            突出抓好源头防控、患者救治、物资保障三项重点，下最大气力控制疫情流行，努力守住全国疫情防控第一道防线，\n            展现了中国力量、中国精神、中国效率，为打赢疫情防控的人民战争、总体战、阻击战作出了重要贡献。\n            习近平强调，当前，境外疫情扩散蔓延势头并没有得到有效遏制，国内个别地区出现聚集性疫情，新冠肺炎疫情还有很大不确定性。\n            湖北省疫情防控已由应急性超常规防控向常态化防控转变，但并不意味着防控措施可以松一松、歇一歇。党中央决定继续派出联络组，\n            加强对湖北省和武汉市疫情防控后续工作指导支持。要继续指导做好治愈患者康复和心理疏导工作，督促落实常态化疫情防控举措，\n            外防输入、内防反弹，要毫不懈怠抓好各项工作，巩固疫情防控成果，决不能前功尽弃。要协调推动湖北省和武汉市在做好常态化疫情防控工作的同时，\n            推动支持湖北省经济社会发展一揽子政策落实到位，加快恢复生产生活正常秩序。\n          ")])])]),n._v(" "),t("van-tab",{style:n.contentHeight,attrs:{title:"相关文件"}},[t("enclosure-button",{on:{"open-file":n.openFile}}),n._v(" "),t("enclosure-pre",{attrs:{"file-url":n.fileUrl}})],1)],1)],1),n._v(" "),t("div",{staticClass:"announceDetail-tabbar"},[t("div",{staticClass:"announceDetail-tabbar-left",on:{click:n.dayinClick}},[t("i",{staticClass:"iconfont"},[n._v("")]),n._v(" "),t("span",[n._v("打印")])]),n._v(" "),t("div",{staticClass:"announceDetail-tabbar-right",on:{click:n.goutongClick}},[t("i",{staticClass:"iconfont"},[n._v("")]),n._v(" "),t("span",[n._v("沟通")])])])])},[],!1,null,"0d62371b",null).exports},5453:function(t,n,i){i.d(n,{Z:function(){return d}});var n=i(26243),s=i.n(n),n=i(62680),o=i.n(n),n=i(95366),a=i.n(n),n=i(6919),e=i.n(n),l=i(77193),n=i(59655),r=i(25108);function c(n,t){var i,e=s()(n);return o()&&(i=o()(n),t&&(i=i.filter(function(t){return a()(n,t).enumerable})),e.push.apply(e,i)),e}function u(n){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,l.Z)(n,t,i[t])}):e()?Object.defineProperties(n,e()(i)):c(Object(i)).forEach(function(t){Object.defineProperty(n,t,a()(i,t))})}return n}var n={name:"EnclosureButton",components:{EnclosureItem:n.Z},props:["fileData"],data:function(){return{dataValue:{info_id:"",moduleId:""},isShow:!1,overflow:document.body.style.overflow,typeConfig:{img:"iconpicture",text:"iconfile"},loading:!1,isLast:!1,isError:!1,params:{info_id:"",infoId:"",moduleId:"",nodeId:"",start:0,limit:10},list:[]}},watch:{isShow:function(t){document.body.style.overflow=t?"hidden":this.overflow}},mounted:function(){var t={},n="200517191343bubbMI4Pg5IyFs0BvPV"==(t=this.$route.params.formData?this.$route.params.formData.dataValue:this.fileData).masterId;this.params.info_id=this.params.infoId=n?t.masterId:t.info_id||t.fid||t.id||t.A0001||t["SW_XZD.A0001"],this.params.moduleId=n?t.masterModuleId:t.moduleId||t.A0004||t["SW_XZD.A0004"],this.postData()},destroyed:function(){document.body.style.overflow=this.overflow},methods:{emptyEvent:function(){},showBox:function(){this.isShow=!0},closeBox:function(){this.isShow=!1},openFile:function(t){this.$emit("open-file",t),this.isShow=!1},scrollEvent:function(t){var t=t.target,n=t.offsetHeight,i=t.scrollHeight,t=t.scrollTop;0===t?r.log("到顶了"):i<t+n+100&&this.postData()},postData:function(){var n=this;this.loading||this.isLast||(this.loading=!0,dsf.http.post("fn/mobileAttachment/getFormAttachment",u(u({},this.params),{},{start:this.params.start+1})).done(function(t){n.postDataSuccess(t)}).error(function(t){n.isError=!0,n.dsf.layer.toast("请求异常")}).always(function(){n.loading=!1}))},postDataSuccess:function(t){var l,r=this,t=t.rows;t.length?(t.length<this.params.limit&&(this.isLast=!0),this.$set(this.params,"start",this.params.start+1),l=(new Date).getTime(),t.map(function(t){t=t.document;return t&&t.forEach(function(t){var n=t.id,i=t.infoId,e=t.title,s=t.type,o=t.moduleId,t=t.size,a=dsf.util.loadSessionStore("loginToken");r.list.push({id:n,title:e,size:t||"",url:dsf.url.getServerUrl("fn/file/download?infoId=".concat(i,"&fileId=").concat(n,"&fileName=").concat(e,"&nrType=").concat(s,"&moduleId=").concat(o,"&x-auth-token=").concat(a,"&fullfilename=").concat(l).concat(e))})})}),this.$emit("fileList",this.list),1===this.params.start&&0<this.list.length&&this.$emit("open-file",this.list[0].url)):this.isLast=!0}}},d=(0,i(51900).Z)(n,function(){var n=this,i=n._self._c;return i("div",{staticClass:"ds-enclosure-button"},[i("div",{staticClass:"__e_button",on:{click:n.showBox}},[i("i",{staticClass:"iconfont iconqiehuanfujian"}),n._v(" 附件\n  ")]),n._v(" "),i("transition",{attrs:{name:"__e_box"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:n.isShow,expression:"isShow"}],staticClass:"__e_box",on:{click:n.closeBox}},[i("div",{ref:"main",staticClass:"__e_box_main",on:{scroll:n.scrollEvent,click:function(t){return t.stopPropagation(),n.emptyEvent.apply(null,arguments)}}},[n.isError&&!n.list.length?i("div",{staticClass:"__file_empty"},[i("commonempty",{attrs:{image:"network",description:"请求异常"}})],1):n._e(),n._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!n.list.length&&n.isLast,expression:"!list.length && isLast"}],staticClass:"__file_empty"},[i("commonempty",{attrs:{description:"暂无附件"}})],1),n._v(" "),i("div",{staticClass:"__file_list"},n._l(n.list,function(t){return i("enclosure-item",{key:t.id,attrs:{name:t.title,size:t.size,url:t.url},on:{open:n.openFile}})}),1),n._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:n.loading&&!n.isLast,expression:"loading && !isLast"}],staticClass:"__list_loading"},[i("van-loading",{attrs:{type:"spinner",size:"24px"}})],1)])])])],1)},[],!1,null,"6053d58c",null).exports},17649:function(t,n,i){i.r(n),i.d(n,{default:function(){return s}});var e=i(25108),n={name:"EnclosurePre",props:{fileUrl:{type:String,default:""}},data:function(){return{}},mounted:function(){window.filePreview.onhashchange=function(t){e.log("tag",window.filePreview.location.href)}},computed:{fullUrl:function(){return dsf.url.openOffice(encodeURIComponent(this.fileUrl))}},methods:{}},s=(0,i(51900).Z)(n,function(){var t=this._self._c;return t("div",{staticClass:"ds-enclosure-pre"},[this.fileUrl&&0<this.fileUrl.length?t("iframe",{attrs:{id:"filePreview",src:this.fullUrl,frameborder:"0"}}):t("commonempty",{attrs:{description:"暂无预览"}})],1)},[],!1,null,null,null).exports}}]);