(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[40954],{54397:function(t,e,a){"use strict";a.d(e,{b:function(){return o}});var e=a(8450),n=a.n(e),s=a(25108),o=function(e){function a(e){$XYLink.execute(["joinMeeting",e],function(t){s.log(4),t.status||dsf.layer.toast("加入会议：".concat(e.meetingNum,"失败,").concat(t.msg),!1)},function(t){s.log(t)})}s.log(1),$XYLink.execute(["getConnectStatus",{}],function(t){s.log(2),t.connected?a(e):(t={userName:(t=dsf.util.loadSessionStore("user")).name,userId:t.user_id,userData:[{user:t},{loginToken:dsf.util.loadSessionStore("loginToken")}]},$XYLink.execute(["loginById",t],function(t){s.log(3),a(e)},function(t){s.log(t)}))},function(t){s.log(n()(t)),alert(n()(t))})}},44174:function(t){t.exports=function(t,e,a,n){for(var s=-1,o=null==t?0:t.length;++s<o;){var i=t[s];e(n,i,a(i),t)}return n}},81119:function(t){t.exports=function(t,e,a,n){for(var s=-1,o=null==t?0:t.length;++s<o;){var i=t[s];e(n,i,a(i),t)}return n}},89465:function(t,e,a){var n=a(38777);t.exports=function(t,e,a){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}},67206:function(t){t.exports=function(t){return t}},55189:function(t,e,a){var i=a(44174),r=a(81119),c=a(67206),l=a(1469);t.exports=function(s,o){return function(t,e){var a=l(t)?i:r,n=o?o():{};return a(t,s,c(e,2),n)}}},38777:function(t,e,a){var n=a(10852),a=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=a},10852:function(t){t.exports=function(t,e){return null==t?void 0:t[e]}},7739:function(t,e,a){var n=a(89465),a=a(55189),s=Object.prototype.hasOwnProperty,a=a(function(t,e,a){s.call(t,a)?t[a].push(e):n(t,a,[e])});t.exports=a},1469:function(t){var e=Array.isArray;t.exports=e},11542:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var n=a(90541),s=a(25108),e={name:"DYzhuanshouwen",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{show:!0,optionData:[{fileId:0,fileName:"请选择"}],id:0}},computed:{},watch:{},methods:{close:function(){this.show=!1,this.$emit("closeCallback",this.value)},handle:function(){var e=this;this.id?n.Z.http.post("/fn/notepaper/emailConvertLw",{emailId:this.formParams.pk,fileId:this.id,sourceModule:this.formParams.moduleId}).then(function(t){e.close(),"success"==t.data.type?e.$router.push({path:"/commonForm/".concat(t.data.data.moduleId,"/").concat(t.data.data.lwId)}):n.Z.layer.toast(t.data.message)}):n.Z.layer.toast("请选择文件。")}},created:function(){var a=this;0==this.metaData.parameters.nodeId?(n.Z.layer.toast("该邮件未收，不可转收文。"),this.show=!1,this.$emit("closeCallback",this.value)):n.Z.http.post("/fn/notepaper/getAllFileByEmailId",{pk:this.formParams.pk,table:"g_notepaper"}).then(function(t){var e;s.log("data",t),200==t.data.code?0!=t.data.data.length&&(e=[{fileId:0,fileName:"请选择"}],t.data.data.forEach(function(t){e.push({fileId:t.fileId,fileName:t.fileName})}),a.optionData=e):n.Z.layer.toast(t.data.message)})},mounted:function(){},destroyed:function(){}},o=(0,a(51900).Z)(e,function(){var a=this,e=a._self._c;return e("div",{staticClass:"DYzhuanshouwen"},[e("van-popup",{style:{width:"76vw"},attrs:{closeable:""},on:{close:function(t){a.show=!1}},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[e("div",{staticClass:"title"},[a._v("请选择一个文件作为正文")]),a._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:a.id,expression:"id"}],on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});a.id=t.target.multiple?e:e[0]}}},a._l(a.optionData,function(t){return e("option",{key:t.fileId,domProps:{value:t.fileId}},[a._v("\n        "+a._s(t.fileName)+"\n      ")])}),0),a._v(" "),e("div",{staticClass:"btn"},[e("button",{on:{click:a.handle}},[a._v("确定")]),a._v(" "),e("button",{on:{click:function(t){a.show=!a.show}}},[a._v("取消")])])])],1)},[],!1,null,"320534a9",null).exports},67270:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return f}});var e=a(8450),s=a.n(e),e=a(27921),r=a.n(e),e=a(85579),c=a.n(e),e=a(22013),l=a.n(e),e=a(19290),n=a(24672),o=a(71403),i=a(90625),u=a(25108);function d(t,e){var a,n,s,o,i=void 0!==c()&&t[l()]||t["@@iterator"];if(i)return n=!(a=!0),{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){n=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(n)throw s}}};if(Array.isArray(t)||(i=function(t,e){var a;if(t)return"string"==typeof t?h(t,e):"Map"===(a="Object"===(a=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:a)||"Set"===a?r()(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return i&&(t=i),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var e={name:"ExCenterSend",components:{controlUserTree:e.default,controlUserChecked:n.default,controlUserSearchList:o.default,roundPopup:i.Z},props:{metaId:{type:String,default:""},extra:{type:Object,default:{}},selectType:{type:Number,default:1},pageTitle:{type:String,default:null},defaultSelectArray:{type:Array,default:function(){return[]}},topformMeta:{type:Object,default:function(){return{}}},showBack:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0}},data:function(){return{tab:0,tabsLoad:[],multiple:!1,allCount:0,searchValue:"",tabs:[],show:!1,selectList:[],personSelectData:[],oldV:[],type:0,param:{allowEdit:!1,containUnit:"-1",data:"",displayFullPath:"-1",fullOrganize:!1,key:"C-RC-0008",multiple:!0,roles:"",rootObject:"2",schema:"",separator:",",tabs:[{key:"self_org",list:[{key:"department",name:"本机构"}],name:"本单位"}],title:"选择参与人员",type:"userselect",types:["person","department","post"],typesString:"person,department,post",value:""},selectArr:[],selectper:[],navBarSticky:!1,selectIdArr:[],ifDataGood:!0,showSearch:!1,showSearchBox:!1,tabsOffsetTop:0,showAppTopMenu:dsf.config.appTopMenu.value,currentTab:{},personMultiple:!1,personAddList:[],showTree:!1,renameData:{},activeName:0,showPerson:!0,attachArr:[],fileRelationArr:[],urlParams:{}}},computed:{selectObj:function(){var e,a,n,t="";return 0==this.selectType?(n=a=e=0,this.selectArr.forEach(function(t){"5"==t.type?a++:"1"==t.type?e++:n++}),0<e&&(t+=e+"人,"),0<a&&(t+=a+"组织,"),0<n&&(t+=n+"项,"),t=(t=t.trim(",")).substring(0,t.lastIndexOf(","))):this.selectArr.length&&(t=this.selectArr.length+"项"),t},btnDisable:function(){return 0==this.selectArr.length}},watch:{extra:{handler:function(t,e){t&&e&&this.initData()},deep:!0,immediate:!0},checkData:{handler:function(t){this.addcheckData=t},deep:!0,immediate:!0},showPerson:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback")})}},created:function(){this.initData(),this.initAttachData(),this.initFileRelationData()},mounted:function(){this.$parent.$el.onscroll=this.handleScroll;var t=document.documentElement.style.fontSize.split("px")[0],e=this.$refs.search?this.$refs.search.offsetHeight:0,t=this.showAppTopMenu?.92*t:0;this.tabsOffsetTop=e+t},methods:{strToObj:function(t){var n={},t=t.split("&");return 0<t.length&&t.forEach(function(t){var e=t.indexOf("="),a=t.substr(0,e),t=t.substr(e+1);n[a]=t||""}),n},initAttachData:function(){var e=this,a=this.urlParams.selectAtt,t=this.urlParams.moduleId,n=this.urlParams.pk;dsf.http.post("fn/remoteExchangeView/attachmentData",{moduleId:t,pk:n,selectAtt:a}).then(function(t){t.data&&t.data.data&&t.data.data.length&&((t=t.data.data).forEach(function(t){"-1000"==t.id?t.flag?t.checked=!0:t.checked=!1:!a||-1<a.split(";")[0].split(",").indexOf(""+t.attValue)?t.checked=!0:t.checked=!1}),e.attachArr=t)})},initFileRelationData:function(){var e=this,a=this.urlParams.selectFileRelationValue,t=this.urlParams.moduleId,n=this.urlParams.pk;dsf.http.post("fn/remoteExchangeView/fileRelationData",{moduleId:t,pk:n,selectFileRelationValue:a}).then(function(t){t.data&&t.data.data&&t.data.data.length&&((t=t.data.data).forEach(function(t){var e;t.checked=!1,a&&(e=a.split(";")[0])&&-1<e.split(",").indexOf(""+t.relaType)&&(t.checked=!0)}),e.fileRelationArr=t)})},initData:function(){u.log(this.extra);this.selectArr=this.selectper=this.personAddList=this.defaultSelectArray.concat()||[],this.searchValue="";var t=this.extra,e=(this.multiple=t,this.tabs=t.tabs,t.tabs[0].action);this.urlParams=this.strToObj(e),this.showSearchBox=!0,this.getPersonList(t,e,{}),this.currentTab=this.tabs[0]},handleScroll:function(){0<this.$parent.$el.scrollTop?this.navBarSticky=!0:this.navBarSticky=!1},close:function(t){this.show=t},showCheckUsers:function(){this.show=!0},onSearch:function(t){this.showSearch=!0},onSearchClose:function(){u.log("关闭人员检索层"),this.showSearch=!1},back:function(){this.showPerson=!1},mapCodeList:function(t){var e=this;t.forEach(function(t){t.attr||(t.attrs={}),t.attrs.noselect=!1,t.attrs.childrenCount=t.children?t.children.length:0,t.children?t.children.length&&(t.attrs.noselect=!0,e.mapCodeList(t.children)):t.children=[]})},getPersonList:function(t,e,a){var n=dsf.layer.loading("获取中"),s=(this.personMultiple=t.multiple,this),t=a||{};"0"!=this.selectType&&((t=dsf.util.deepCopy(this.$route.query)).pk=(null==(a=this.$route.params)?void 0:a.pk)||(null==(a=this.$route.query)?void 0:a.pk)||(null==(a=this.topformMeta)||null==(a=a.parameters)?void 0:a.pk),t.customCode=1),dsf.http.post(e,t).then(function(t){t="0"==s.selectType?t.data.data.departmentList:t.data.data.codeList;"0"==s.selectType||"1"==s.selectType?t.forEach(function(t){s.addPersonDeep(t,1),s.sumPerson(t)}):(t[0].isopen=!0,s.mapCodeList(t)),t.length&&(t.forEach(function(t){s.$set(t,"checked",!1)}),s.extra.filterSelf&&-1<t[0].children.findIndex(function(t){return t.attrs.idValue==dsf.util.loadSessionStore("user").user_id})&&t[0].children.splice(t[0].children.findIndex(function(t){return t.attrs.idValue==dsf.util.loadSessionStore("user").user_id}),1),t[0].children.forEach(function(t,e){s.$set(t,"checked",!1)})),s.personSelectData=t,s.showTree=!0,s.ifDataGood=!0,s.tabsLoad.push({dataurl:e,datalist:t}),u.log("人员选择控件",s.personSelectData)}).finally(function(){s.$nextTick(function(){dsf.layer.closeLoading(n)})})},addPersonDeep:function(t,e){var a=this;this.$set(t,"deep",e),this.$set(t,"isopen",e<=1),t.children&&0<t.children.length&&(this.$set(t,"personChildrenLen",t.children.filter(function(t){return 1==t.type}).length),t.children.forEach(function(t){a.addPersonDeep(t,e+1)}))},sumPerson:function(t){var e=this;0<t.children.length&&(t.children[0].children&&0<t.children[0].children.length?t.children.forEach(function(t){e.sumPerson(t)}):(t.ChildCount=t.children.length,this.allCount+=t.ChildCount))},addPerson:function(){var t,e=[],a=[],n=[],s=d(this.selectArr);try{for(s.s();!(t=s.n()).done;){var o=t.value;e.push(o.name),a.push(o.attrs.idValue),n.push(o.type+"::"+o.attrs.pidValue)}}catch(t){s.e(t)}finally{s.f()}r=e.join(","),a.join(","),n.join(","),this.person=r,this.show=!1,this.oldV=this.selectList,this.show=!1,this.selectIdArr=this.selectArr,u.log("最终选择=====>",this.person);var i,r=this.onBeforeCodeSelectCallback(),c=this.extra.tabs[0].params;r&&(r.moduleId=this.urlParams.moduleId,$.extend(r,c),"normal"!==c.sealType&&"new"!==c.sealType&&"reseal"!==c.sealType||!this.selectArr.length||(r.sealUnit=(null==(i=this.selectArr[0])?void 0:i.id)||""),"convert"==c.remoteSendPaper&&(c.remoteSendPaper=null,c.convertId=null),r.filterFileList=r.selectedAttachments||"",this.doSend(r,c))},onBeforeCodeSelectCallback:function(){var t,e,a,n;return 0==this.selectArr.length?(dsf.layer.toast("请选择需要发送的单位"),null):(t=this.attachArr.filter(function(t){return t.checked}).map(function(t){return t.id}),e=this.fileRelationArr.filter(function(t){return t.checked}).map(function(t){return t.id}),a=this.fileRelationArr.filter(function(t){return t.checked}).map(function(t){return{id:t.id,name:t.name}}),0==t.length&&t.push("-1"),0==e.length&&e.push("-1"),n=this.selectArr.map(function(t){var e=t.attrs,a={id:t.id,name:t.name,domain:(null==(a=t.attrs)?void 0:a.domain)||""};return t.hasOwnProperty("copy")&&(a.copy=t.copy),t.hasOwnProperty("page")&&(a.page=t.page),t.hasOwnProperty("down")&&(a.down=t.down),e&&"user"===e.exchNodeType&&(a.nodeType="user",a.orgId=e.orgId||"",a.orgName=e.orgName||""),a}),{pk:this.urlParams.pk,targets:s()(n),desc:"",selectedAttachments:t.join(","),filerelationFileIds:e.join(","),filerelationFileDatas:s()(a)})},doSend:function(t,e){var a=this,n=e.exchangeDocType,s="fn/exchangeCenterCaller/sendDoc",n=("EXCENTER-HY"==n?s="fn/remoteMeeting/sendMeetingTz":"exchangeNote"==n&&(s="fn/remoteNoteController/sendNotes"),6==e.vendor&&(s="fn/exRemoteInterfaceController/sendDoc",t.typeclass=e.typeclass,t.typeclassName=e.typeclassName,t.typemethod=e.typemethod,t.typemethodname=e.typemethodname),e.projectUrl);null!=n&&""!=n&&(s=n),dsf.http.post(s,t).then(function(t){200==t.data.code?(dsf.layer.toast("发送成功"),a.showPerson=!1):dsf.layer.toast(t.data.message)})},changeData:function(t){this.selectArr=t},getSelect:function(t){t=this.formatData(t);var n=this,a=(n.selectArr=[],n.selectper=[],{});n.selectper=t.reduce(function(t,e){return a[e.id]||(a[e.id]=t.push(e)),t},[]),n.selectper.forEach(function(a,t){a.checked?n.multiple.multiple?n.selectArr.find(function(t){return t.id==a.id})||n.selectArr.push(a):n.selectArr.splice(0,n.selectArr.length,a):n.selectArr.forEach(function(t,e){t.id==a.id&&n.selectArr.splice(e,1)})})},formatData:function(t){var n={};return t.reduce(function(t,e){var a;return 1<e.id.split("_").length?(a=e.id.split("_")[e.id.split("_").length-1],n[a]||(n[a]=t.push(e))):n[e.id]||(n[e.id]=t.push(e)),t},[])},loopUser:function(t,a){var n=this;return t.forEach(function(t){var e;a.push(t),0<(null==t||null==(e=t.children)?void 0:e.length)&&n.loopUser(t.children,a)}),a}}},f=(0,a(51900).Z)(e,function(){var a=this,t=a._self._c;return t("van-popup",{style:{height:"100%"},attrs:{"close-on-click-overlay":!1,"lock-scroll":"",position:"bottom","get-container":"#app"},model:{value:a.showPerson,callback:function(t){a.showPerson=t},expression:"showPerson"}},[t("div",{staticClass:"dsf-select-person"},[!a.showSearch&&a.showAppTopMenu&&a.showHeader?t("van-nav-bar",{class:{navBarSticky:a.navBarSticky},attrs:{title:"远程发送","left-arrow":a.showBack},on:{"click-left":a.back},scopedSlots:a._u([a.showBack?{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}}),a._v(" "),t("span",[a._v("返回")])]},proxy:!0}:null],null,!0)}):a._e(),a._v(" "),!a.showSearch&&a.showSearchBox&&a.showHeader?t("form",{attrs:{action:"/"}},[t("van-search",{ref:"search",attrs:{placeholder:"搜索"},on:{click:a.onSearch},model:{value:a.searchValue,callback:function(t){a.searchValue=t},expression:"searchValue"}})],1):a._e(),a._v(" "),a.showSearch?t("div",{staticStyle:{flex:"1",overflow:"auto"}},[t("control-user-search-list",{attrs:{currentTab:a.currentTab,selectper:a.selectper,"person-select-data":a.personSelectData,"person-add-list":a.personAddList,multiple:a.personMultiple},on:{searchClose:a.onSearchClose,select:a.getSelect,onChangePerson:function(t){return a.personAddList=t}}})],1):t("div",{staticClass:"tabs"},[t("control-user-tree",{ref:"controlUserTree",staticClass:"_add_tree",attrs:{metaId:a.metaId,selectper:a.selectper,"person-select-data":a.personSelectData,multiple:a.personMultiple,currentTab:a.currentTab,"person-add-list":a.personAddList,extra:a.extra},on:{select:a.getSelect,initData:a.initData,onChangePerson:function(t){return a.personAddList=t}}})],1),a._v(" "),t("van-collapse",{staticClass:"attachCollapse",attrs:{accordion:""},model:{value:a.activeName,callback:function(t){a.activeName=t},expression:"activeName"}},[t("van-collapse-item",{attrs:{name:1},scopedSlots:a._u([{key:"title",fn:function(){return[t("span",[a._v("附件与关联文件")]),a._v(" "),t("span",[a._v("("+a._s(a.attachArr.filter(function(t){return t.checked}).length+a.fileRelationArr.filter(function(t){return t.checked}).length)+"/"+a._s(a.attachArr.length+a.fileRelationArr.length)+")")])]},proxy:!0}])},[a._v(" "),a._l(a.attachArr,function(e){return t("van-checkbox",{key:e.id,attrs:{shape:"square"},model:{value:e.checked,callback:function(t){a.$set(e,"checked",t)},expression:"attach.checked"}},[t("img",{staticStyle:{width:"16px",height:"auto",display:"inline-block"},attrs:{src:a.dsf.util.getFileTypeIcon(e.fileName),alt:""}}),a._v("\n          "+a._s(e.attValueText)+"：\n          "+a._s(e.fileName)+"\n        ")])}),a._v(" "),a._l(a.fileRelationArr,function(e){return t("van-checkbox",{key:e.id,attrs:{shape:"square"},model:{value:e.checked,callback:function(t){a.$set(e,"checked",t)},expression:"fileRelation.checked"}},[a._v(a._s(e.fileName))])})],2)],1),a._v(" "),t("van-tabbar",{attrs:{placeholder:""}},[t("van-tabbar-item",{staticClass:"_btns"},[t("div",{staticClass:"tree_l",on:{click:a.showCheckUsers}},[t("span",[a._v("已选择："+a._s(a.selectObj))]),a._v(" "),t("van-icon",{directives:[{name:"show",rawName:"v-show",value:0<a.selectArr.length,expression:"selectArr.length > 0"}],staticClass:"tree_icon",attrs:{size:"0.32rem",name:"arrow-up"}})],1),a._v(" "),a.showAppTopMenu?a._e():t("van-button",{staticClass:"tree_r",attrs:{type:"default",size:"middle"},on:{click:a.back}},[a._v("取 消")]),a._v(" "),t("van-button",{staticClass:"tree_r",attrs:{type:"info",size:"middle"},on:{click:a.addPerson}},[a._v("确 定")])],1)],1),a._v(" "),t("van-popup",{style:{height:"90%"},attrs:{round:"",position:"bottom"},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[t("control-user-checked",{attrs:{"select-arr":a.selectArr,commonGroup:[],orgType:!1,"person-add-list":a.personAddList},on:{close:a.close,changeData:a.changeData,onChangePerson:function(t){return a.personAddList=t}}})],1)],1)])},[],!1,null,"0da090d3",null).exports},19290:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e=a(18428),c=a.n(e),l=a(25108),e={name:"addTree",props:["personSelectData","selectper","extra","multiple","currentTab","personAddList","metaId","checkTotal","commonGroup"],data:function(){return{isHidden:!1,selectIds:[],UserAll:[],isShowManual:!1,manualValue:"",isManual:!1,checkData:{}}},computed:{personAddList_:{get:function(){return this.personAddList},set:function(t){this.$emit("on-change-person",t)}}},created:function(){this.isHidden=void 0},mounted:function(){this.selectper&&0<this.selectper.length&&this.initState(this.personSelectData)},destroyed:function(){},methods:{initState:function(t){var s=this;this.selectIds=this.selectper.map(function(t){return t.id}),t.forEach(function(e){var t,a=1<e.id.split("_").length?e.id.split("_")[1]:e.id.split("_")[0],n=1<e.pid.split("_").length?e.pid.split("_")[1]:e.pid.split("_")[0];s.selectper.find(function(t){return-1<t.id.indexOf(a)&&(t.showName==e.showName||t.name==e.name)&&(1==t.type&&-1<t.pid.indexOf(n)||1!=t.type)})?(e.checked=!0,s.personAddList_.find(function(t){return-1<t.id.indexOf(a)})?(t=s.personAddList_.findIndex(function(t){return-1<t.id.indexOf(a)}),s.personAddList_.splice(t,1,e)):s.personAddList_.push(e)):e.checked=!1,e.children&&0<e.children.length&&e.children.forEach(function(t){1!=t.type&&null!=t.type||s.initState([t])})})},usercheckAll:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.$bus.emit("usercheckAllBus",{user:t,metaId:this.metaId,callback:this.checkAll}),this.checkAll(t,e)},checkAll:function(a){var n=this,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=a.isopen;t&&a.isopen||this.$set(a,"isopen",!a.isopen),0<a.attrs.childrenCount&&0<!a.children.length||(0<!a.children.length?(a.checked?this.personAddList_.forEach(function(t,e){t.pid==a.pid&&n.personAddList_.splice(e,1)}):this.personAddList_.push(a),this.userClick(a)):t&&e&&this.setSelectUser(a,t))},addPersonDeep:function(t,e){var a=this;this.$set(t,"deep",e),this.$set(t,"isopen",e<=1),t.children&&0<t.children.length&&(this.$set(t,"personChildrenLen",t.children.filter(function(t){return 1==t.type}).length),t.children.forEach(function(t){a.addPersonDeep(t,e+1)}))},selectAll:function(t){t=this.formatData(t),this.$emit("select",t)},fncLoad:function(){this.$emit("fncLoad")},initData:function(t){this.$emit("initData")},getStyle:function(t){return{"padding-left":30*(t-1)+"px","box-sizing":"border-box"}},itemClick:function(t){this.$set(t,"checked",!t.checked),l.log(t)},loadChildData:function(e,a){l.log(this.selectper);var n=[];if(this.selectper.forEach(function(t){t.groupId&&t.children.forEach(function(t){n.push(t.id)})}),n.includes(e.id))e.checked=!1,dsf.layer.toast("已有小组选中".concat(e.showName,"，不可操作！"));else{if(a){var s=!1,o="";if(e.children.forEach(function(t){n.includes(t.id)&&(s=!0,o=t.showName)}),s)return e.checked=!1,void dsf.layer.toast("已有小组选中该单位下".concat(o,"，请手动操作！"))}var t,i,r=this;0<e.attrs.childrenCount&&e.children.length<=0?(t=c()({},this.currentTab),this.checkTotal&&(t.action=t.action.replace("async=true","async=false")),i=1<e.id.split("_").length?e.id.split("_")[e.id.split("_").length-1]:e.id,dsf.http.get(t.action+"&doType=".concat(t.subTabKey,"&asyncRequest=true&customRoot=").concat(i,"&nodeType=").concat(e.type),t.urlParams||{}).then(function(t){t.data.data.departmentList.forEach(function(t){r.addPersonDeep(t,e.deep+1),e.children.push(t)}),r.setSelectUser(e,a)})):(l.log("load child"),this.checkTotal?r.selectAllUser(e,a):r.setSelectUser(e,a))}},selectAllUser:function(t,e){0<t.attrs.childrenCount&&t.children.length<=0||this.setSelectUser(t,e)},loopUser:function(t){var a=this;t.forEach(function(t){var e;t.attrs.noselect?0<(null==(e=t.children)?void 0:e.length)&&a.loopUser(t.children):a.UserAll.push(t)})},syncData:function(t){var a=this;t.forEach(function(t){var e;a.$set(t,"checked",!1),0<(null==(e=t.children)?void 0:e.length)&&a.syncData(t.children)})},userClick:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e&&!t.isopen&&this.$set(t,"isopen",!t.isopen),this.loadChildData(t,e)},setSelectUser:function(e,t){var a,n=this,s=this;this.multiple?t?e.children&&0<e.children.length&&(a=[],e.children.forEach(function(t){t.attrs.noselect||a.push(t)}),a.every(function(t){return 0==!!t.checked})?this.checkTotal?(this.UserAll=[],this.loopUser(e.children),e.children.forEach(function(t){t.attrs.noselect||s.$set(t,"checked",!0)}),l.log(this.UserAll),this.UserAll.forEach(function(t){s.$set(t,"checked",!0),n.personAddList_.push(t)})):e.children.forEach(function(t){t.attrs.noselect||t.checked||(s.$set(t,"checked",!0),n.personAddList_.push(t))}):this.checkTotal?(this.UserAll=[],this.loopUser(e.children),this.syncData(e.children),l.log(e.children),this.UserAll.forEach(function(e){var t=n.personAddList_.findIndex(function(t){return e.id.split("_")[e.id.split("_").length-1]==t.id});-1<t&&n.personAddList_.splice(t,1)})):e.children.forEach(function(e){s.$set(e,"checked",!1);var t=n.personAddList_.findIndex(function(t){return e.id.split("_")[e.id.split("_").length-1]==t.id});-1<t&&n.personAddList_.splice(t,1)})):e.checked?this.personAddList_.push(e):-1<(t=this.personAddList_.findIndex(function(t){return e.id.split("_")[e.id.split("_").length-1]==t.id}))&&this.personAddList_.splice(t,1):e.checked?(this.personAddList_.forEach(function(t){t.id!=e.id&&s.$set(t,"checked",!1)}),this.personAddList_.splice(0,this.personAddList_.length,e)):(this.personAddList_.forEach(function(t,e){s.$set(t,"checked",!1)}),this.personAddList_.splice(0,this.personAddList_.length)),l.log(this.personAddList_),this.personAddList_=this.formatData(this.personAddList_),this.$emit("select",this.personAddList_),this.$forceUpdate()},showDialogClick1:function(t){this.$emit("showDialogClick1",t)},deleteGroup:function(t){l.log(t);var e=this;this.$dialog.confirm({title:"提示",message:"是否删除小组--"+t.showName}).then(function(){dsf.http.post("/ctrl/org/select/groupRemove",{groupId:t.groupId}).then(function(t){l.log(t),"200"==t.status&&(dsf.layer.toast(t.data.message),e.$emit("initData"))})}).catch(function(){})},formatData:function(t){var n={},t=t.reduce(function(t,e){var a;return 1<e.id.split("_").length?(a=e.id.split("_")[1],n[a]||(n[a]=t.push(e))):n[e.id]||(n[e.id]=t.push(e)),t},[]);return t.forEach(function(t){1<t.id.split("_").length&&t.id.split("_")[1]&&(t.id=t.id.split("_")[1],t.pid=1<t.pid.split("_").length?t.pid.split("_")[1]:t.pid.split("_")[0],t.children)&&0<t.children.length&&t.children.forEach(function(t){t.id=1<t.id.split("_").length?t.id.split("_")[1]:t.id.split("_")[0],t.pid=1<t.pid.split("_").length?t.pid.split("_")[1]:t.pid.split("_")[0]})}),t}}},n=(0,a(51900).Z)(e,function(){var n=this,s=n._self._c;return s("div",{staticClass:"dsf-tree",staticStyle:{width:"100%",height:"100%"}},n._l(n.personSelectData,function(a,t){return s("div",{key:"index1"+t,staticStyle:{"overflow-y":"hidden","overflow-x":"auto"}},[a.groupId?n._e():s("div",{staticClass:"flex-box",class:{treeMargin:1==a.deep,tree_line:a.isopen&&1==a.deep}},[a.attrs.noselect||!1===a.attrs.subNodeSelect||0!=!a.itemIndex?s("div",{staticClass:"tree_tit w_normal",style:n.getStyle(a.deep),on:{click:function(t){return n.usercheckAll(a,!0)}}},[n._v("\n        "+n._s(a.showName||a.name)+"\n      ")]):s("van-checkbox",{ref:"check",refInFor:!0,staticStyle:{flex:"1"},style:n.getStyle(a.deep),attrs:{"icon-size":"18px",shape:"".concat(n.multiple?"square":"round")},on:{click:function(t){return n.userClick(a)}},model:{value:a.checked,callback:function(t){n.$set(a,"checked",t)},expression:"item.checked"}},[s("div",{staticClass:"tree_tit",class:{w_normal:!a.attrs.noselect}},[n._v("\n          "+n._s(a.showName||a.name)+"\n        ")])]),n._v(" "),0<a.attrs.childrenCount||0<a.children.length?s("div",{staticClass:"isShowChiled",on:{click:function(t){return n.checkAll(a)}}},[a.isopen?s("van-icon",{attrs:{name:"arrow-up"}}):s("van-icon",{attrs:{name:"arrow-down"}}),n._v(" "),s("span",{staticClass:"r_span"},[n._v(n._s(a.isopen?"收起":"展开"))]),n._v(" "),n.multiple?s("i",{staticClass:"icon iconfont iconcheckAll",on:{click:function(t){return t.stopPropagation(),n.userClick(a,!0)}}}):n._e()],1):n._e()],1),n._v(" "),n._l(a.children,function(e,t){return s("div",{key:"index2"+t,style:{display:a.isopen?"block":"none"}},[e.children?s("div",[s("add-tree",{attrs:{metaId:n.metaId,selectper:n.selectper,personSelectData:[e],extra:n.extra,currentTab:n.currentTab,multiple:n.multiple,checkTotal:n.checkTotal,"person-add-list":n.personAddList},on:{select:n.selectAll,initData:n.initData,showDialogClick1:n.showDialogClick1,fncLoad:n.fncLoad,onChangePerson:function(t){return n.personAddList=t}}})],1):s("div",{staticClass:"person",style:n.getStyle(a.deep+1)},[s("div",{staticClass:"flex-box person_child"},[s("van-checkbox",{staticClass:"child_check",staticStyle:{flex:"1"},attrs:{"icon-size":"0.32rem",shape:"".concat(n.multiple?"square":"round")},on:{click:function(t){return n.userClick(e)}},model:{value:e.checked,callback:function(t){n.$set(e,"checked",t)},expression:"cell.checked"}},[s("div",{staticClass:"user-logo"},[s("i",{staticClass:"icon iconfont iconyonghu"})]),n._v(" "),s("div",{staticClass:"user-name"},[n._v(n._s(e.showName||e.name))])])],1)])])})],2)}),0)},[],!1,null,"7bce96c2",null).exports},42389:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return v}});var e=a(8601),n=a(522),s=a(73473),o=a.n(s),s={name:"movingSituationSimple",props:{flowInfo:{type:Object,default:function(){return{}}}},data:function(){return{list:[],active:3,flowStatus:[],flowList:[]}},created:function(){},mounted:function(){},methods:{judgeStatus:function(t){return"yes"==t?1:"now"==t?2:"no"==t?0:void 0}},watch:{flowInfo:{handler:function(t,e){var a=this,n=this;t.passedNodes&&t.passedNodes.forEach(function(t){n.flowStatus.push(t.nodeName)}),t.stageList&&t.stageList.forEach(function(t){n.flowList.push({name:t.nodeName,status:a.judgeStatus(t.selected)})})},deep:!0,immediate:!0}}},i=a(51900),s=(0,i.Z)(s,function(){var a=this,n=a._self._c;return n("div",{staticClass:"ds-moving-situation-simple"},[a._m(0),a._v(" "),n("div",{staticClass:"_content"},a._l(a.flowList,function(t,e){return n("div",{key:e,staticClass:"_item",class:{_active:2==t.status,_finish:1==t.status,_not_faqi:0==t.status}},[n("div",{staticClass:"_title ds_font6"},[a._v(a._s(e+1))]),a._v(" "),n("div",{staticClass:"_con"},[a._v(a._s(t.name))])])}),0)])},[function(){var t=this,e=t._self._c;return e("div",{staticClass:"_header"},[e("div",{staticClass:"_huanjie _finish"},[e("i"),t._v(" "),e("span",[t._v("完成环节")])]),t._v(" "),e("div",{staticClass:"_huanjie _current"},[e("i"),t._v(" "),e("span",[t._v("当前环节")])]),t._v(" "),e("div",{staticClass:"_huanjie _not_faqi"},[e("i"),t._v(" "),e("span",[t._v("未发起环节")])])])}],!1,null,null,null).exports,r=a(26243),c=a.n(r),r=a(42152),l=a.n(r),u=a(25108),r={name:"movingSituationDetails",data:function(){return{active:2,contentData:[],defaultIcon:a(47122),showCB:!1,message:"",result:[],typeList:[],defaultText:"",curNode:{}}},created:function(){},mounted:function(){},methods:{cuiban:function(t){var a=this,t=(this.curNode=t,u.log(this.parameters),this.parameters.pk),e=this.parameters.moduleId;dsf.http.post("ctrl/flowmonitor/getUrgeRemindConfig",{infoId:t,moduleId:e}).then(function(t){var e,t=t.data;u.log(t),"success"==t.type?t.data&&(e=t.data.smsMethodType,a.message=t.data.sms,e&&(a.typeList=e,a.result=e.map(function(t){return t.codeValue})),a.showCB=!0):u.log("get urge config error!")})},doCBAction:function(){var e=this,t=this.parameters.pk,a=this.parameters.moduleId,n=this.message,s=this.result,o=this.curNode.id||this.parameters.pnId;if(!n)return dsf.layer.toast("请输入催办内容！"),!0;dsf.http.post("fn/remind2512/remindTodo",{moduleId:a,pk:t,content:n,remindModes:s.join(","),pnIds:o,nodeId:this.curNode.nodeId,userId:this.curNode.userId}).then(function(t){t=t.data;u.log(t),"success"==t.type?(dsf.layer.toast("催办成功！"),e.closePop()):u.log("get urge config error!")})},getStatus:function(t){return"7"==t.nodeType?"(抄送)":0<t.status&&dsf.config.commonForm.moveingDetailText?"("+dsf.config.commonForm.moveingDetailText+")":""},handleClick:function(t,e){t=new(l())("."+t,{text:function(){return e}});t.on("success",function(t){dsf.layer.toast("复制成功")}),t.on("error",function(t){dsf.layer.toast("复制失败")}),t.onClick(event)},closePop:function(){this.showCB=!1,this.message="",this.result=[],this.typeList=[],this.defaultText="",this.curNode={}}},props:{flowInfo:{type:Object,default:function(){return{}}},parameters:{type:Object}},watch:{flowInfo:{handler:function(t,e){var a,n=this;t.passedNodes&&(t.passedNodes.filter(function(t){return 7==t.nodeType}),a={},t.passedNodes.forEach(function(t,e){7!=t.nodeType?n.contentData.push(t):0<e&&(a[t.fid]?a[t.fid].children.push(t):a[t.fid]={children:[t],nodeName:"抄送人："+t.fduserName,nodeId:t.nodeId,nodeType:7,content:"",deptId:"",deptName:"",eDate:"",hasHandWrite:!1,orgNameLv1:"",orgNameLv2:"",orgNameLv3:"",orgNameLv4:"",orgNameLv5:"",pDate:"",photoImg:"",rDate:"",signImg:"",userId:""})}),u.log(a),c()(a).forEach(function(t){t=a[t];t.userName="接收人："+t.children.map(function(t){return t.userName}).join("、"),t.status=t.children.every(function(t){return t.pDate})?"-1":"1",n.contentData.push(t)})),this.active=n.contentData.length},deep:!0,immediate:!0}}},r=(0,i.Z)(r,function(){var n=this,s=n._self._c;return s("div",{staticStyle:{height:"100%"}},[s("div",{staticClass:"moving-situation-details"},["移动表单带表格线"==n.parameters.formTemplateName?s("van-row",[s("van-col",{attrs:{span:"mobile"==n.$store.state.clientType?7:4}},[s("div",{staticStyle:{"font-weight":"800","font-size":"var(--font_size_2)",padding:"0 0.12rem 0.3rem","text-align":"center"}},[n._v("\n          流转情况\n        ")])])],1):n._e(),n._v(" "),s("div",{staticClass:"_content"},n._l(n.contentData,function(e,a){return s("div",{key:a,staticClass:"_item"},[s("div",{staticClass:"_head"},[s("img",{attrs:{src:n.dsf.url.getWebPath(e.photoImg)||n.defaultIcon,alt:"",onerror:"this.src='".concat(n.defaultIcon,"'")}}),n._v(" "),e.status<0?s("van-icon",{attrs:{name:"checked",color:"#13BA84"}}):s("van-icon",{attrs:{name:"more",color:"#e30000"}})],1),n._v(" "),s("div",{staticClass:"_con",class:{red:0<e.status&&n.dsf.config.commonFlow.showUrgingBtn&&(!e.children||0==e.children.length)}},[s("span",{staticClass:"_titles"},[s("i",{staticClass:"_title ds_font4"},[n._v(n._s(e.nodeName))]),n._v(" "),s("i",{staticClass:"_time ds_font6"},[n._v(n._s(e.eDate.substring(5)))])]),n._v(" "),e.fduserName?s("span",{staticStyle:{color:"#999"}},[n._v("发送人："+n._s(e.fduserName)+"("+n._s(e.rDate.substring(5))+")")]):n._e(),n._v(" "),s("div",{staticClass:"btn"},[s("span",{staticClass:"_name ds_font6"},[e.fduserName?s("span",[n._v("接收人：")]):n._e(),n._v(n._s(e.userName))]),n._v(" "),0<e.status&&n.dsf.config.commonFlow.showUrgingBtn&&(!e.children||0==e.children.length)?s("van-button",{staticClass:"cuiban",attrs:{type:"warning",size:"small"},on:{click:function(t){return n.cuiban(e)}}},[s("img",{staticClass:"cuibanimg",attrs:{src:"static/images/project/chengduyitihua/cuiban.png",alt:""}}),n._v("\n              催办")]):n._e()],1),n._v(" "),s("span",{staticClass:"_detail ds_font6",style:{color:n.parameters.nodeId==e.nodeId?"#e30000":""}},[n._v(n._s(n.getStatus(e)))]),n._v(" "),s("p",[e.content?s("span",{staticClass:"_detail ds_font6"},[n._v('"'+n._s(e.content)+'"')]):n._e(),n._v(" "),e.content&&n.dsf.config.commonFlow.showCopyOpinionBtn?s("a",{class:"copyel copyel_"+a,on:{click:function(t){return n.handleClick("copyel_"+a,e.content)}}},[n._v("复制意见")]):n._e()]),n._v(" "),e.preContent?s("span",{staticClass:"_detail ds_font6"},[n._v(n._s(e.preContent))]):n._e(),n._v(" "),e.hasHandWriteImg&&e.hasHandWrite?s("div",{staticClass:"content"},[s("img",{staticStyle:{width:"150px"},attrs:{src:n.dsf.url.getWebPath(e.hasHandWriteImg),alt:""}})]):n._e(),n._v(" "),e.children?s("div",{staticClass:"_content _content-children"},n._l(e.children,function(e,a){return s("div",{key:a,staticClass:"_item subitem"},[s("div",{staticClass:"_head"},[s("img",{attrs:{src:n.dsf.url.getWebPath(e.photoImg)||n.defaultIcon,alt:"",onerror:"this.src='".concat(n.defaultIcon,"'")}})]),n._v(" "),s("div",{staticClass:"_con",class:{red:0<e.status&&n.dsf.config.commonFlow.showUrgingBtn}},[s("span",{staticClass:"_titles"},[s("i",{staticClass:"_title ds_font4 flex ac"},[n._v("\n                    "+n._s(e.userName)+"\n                    "),s("div",{staticClass:"status"},[n._v("\n                      "+n._s(e.status<0||0<e.pDate.length?"已读":"未读")+"\n                    ")])]),n._v(" "),s("i",{staticClass:"_time ds_font6"},[n._v(n._s(e.pDate.substring(5)))])]),n._v(" "),s("p",[e.content?s("span",{staticClass:"_detail ds_font6"},[n._v('"'+n._s(e.content)+'"')]):n._e(),n._v(" "),e.content&&n.dsf.config.commonFlow.showCopyOpinionBtn?s("a",{class:"copyel copyel1_"+a,on:{click:function(t){return n.handleClick("copyel1_"+a,e.content)}}},[n._v("复制意见")]):n._e()]),n._v(" "),e.preContent?s("span",{staticClass:"_detail ds_font6"},[n._v(n._s(e.preContent))]):n._e(),n._v(" "),e.hasHandWriteImg&&e.hasHandWrite?s("div",{staticClass:"content"},[s("img",{staticStyle:{width:"150px"},attrs:{src:n.dsf.url.getWebPath(e.hasHandWriteImg),alt:""}})]):n._e(),n._v(" "),0<e.status&&n.dsf.config.commonFlow.showUrgingBtn?s("van-button",{staticClass:"cuiban",attrs:{type:"warning",size:"small"},on:{click:function(t){return n.cuiban(e)}}},[s("img",{staticClass:"cuibanimg",attrs:{src:"static/images/project/chengduyitihua/cuiban.png",alt:""}}),n._v("\n                  催办")]):n._e()],1)])}),0):n._e()])])}),0)],1),n._v(" "),s("van-popup",{style:{height:"70%"},attrs:{position:"bottom",round:""},model:{value:n.showCB,callback:function(t){n.showCB=t},expression:"showCB"}},[s("div",{staticClass:"cb_contain"},[s("van-nav-bar",{staticClass:"cbnav",attrs:{title:"催办信息发送","right-text":"关闭"},on:{"click-right":n.closePop}}),n._v(" "),s("div",{staticClass:"cbinfo"},[s("van-field",{attrs:{rows:"1",autosize:{maxHeight:175},label:"",type:"textarea",placeholder:"请输入催办信息"},model:{value:n.message,callback:function(t){n.message="string"==typeof t?t.trim():t},expression:"message"}}),n._v(" "),s("div",{staticClass:"tipText"},[n._v("催办消息将以下面的形式发送：")]),n._v(" "),s("div",{staticClass:"cbtype"},[s("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:n.result,callback:function(t){n.result=t},expression:"result"}},n._l(n.typeList,function(t){return s("van-checkbox",{key:t.codeValue,attrs:{"icon-size":"16px",name:t.codeValue}},[n._v(n._s(t.codeName))])}),1)],1)],1),n._v(" "),s("div",{staticClass:"btoms"},[s("van-button",{attrs:{type:"primary",size:"small"},on:{click:n.doCBAction}},[s("img",{staticClass:"cuibanimg",attrs:{src:"static/images/project/chengduyitihua/cuiban.png",alt:""}}),n._v("\n          催办")])],1)],1)])],1)},[],!1,null,"57ed64ef",null).exports,d=a(25108),h={name:"movingSituationDetails_new",props:{formData:{type:Object,default:function(){return{}}}},components:{},data:function(){return{defaultIcon:a(47122),contentData:[]}},computed:{},watch:{},methods:{changeState:function(t,e){this.$set(this.contentData[t].children[e],"active",!this.contentData[t].children[e].active)},getNodeName:function(t){return t.children&&0<t.children.length?this.getNodeName(t.children[0]):t},getPersonList:function(){var t=dsf.layer.loading("流程获取中"),a=this;dsf.http.post("fn/mobileFormComment/showPnodesTree",{sourceType:16,isShowAbn:-1,infoId:this.formData.info_id}).then(function(t){t&&200==t.status&&(t.data.data.forEach(function(t){var e;t.children&&0<t.children.length&&(t.userName="多人处理",e=a.getNodeName(t),t.actName=e.actName,t.deptName=e.deptName,t.children.forEach(function(t){var e=a.getNodeName(t);t.deptName=e.deptName,t.active=!1}))}),d.log(t.data.data),a.contentData=t.data.data)}).finally(function(){a.$nextTick(function(){dsf.layer.closeLoading(t)})})},getStatus:function(t){return"7"==t.nodeType?"(抄送)":0<t.status?"(审批中)":""}},created:function(){},mounted:function(){d.log(this.data),this.getPersonList()},destroyed:function(){}},h=(0,i.Z)(h,function(){var n=this,s=n._self._c;return s("div",{staticClass:"movingSituationDetails_new"},n._l(n.contentData,function(t,a){return s("div",{key:a,staticClass:"flows"},[s("div",{staticClass:"photo"},[s("img",{staticClass:"img",attrs:{src:"xxx",alt:"",onerror:"this.src='".concat(n.defaultIcon,"'")}}),n._v(" "),t.status<0||t.pDate?s("van-icon",{attrs:{name:"checked",color:"#13BA84"}}):s("van-icon",{attrs:{name:"more",color:"#E6A23C"}})],1),n._v(" "),s("div",{staticClass:"texts"},[s("div",{staticClass:"title"},[s("span",[n._v(n._s(t.actName))]),n._v(" "),t.pDate?s("span",[n._v(n._s(t.pDate.substring(5)))]):n._e()]),n._v(" "),t.children&&0<t.children.length?s("div",{staticClass:"username"},[s("div",[s("p",[s("span",[n._v(n._s(t.userName))])])])]):n._e(),n._v(" "),t.children&&0!=t.children.length?n._e():s("div",{staticClass:"username"},[s("div",[s("p",[s("span",[n._v(n._s(t.userName))]),n._v(" "),s("span",[n._v(n._s(n.getStatus(t)))])]),n._v(" "),t.content?s("span",[n._v('"'+n._s(t.content)+'"')]):n._e()])]),n._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.children||0<t.children.length,expression:"!item.children || item.children.length > 0"}]},n._l(t.children,function(t,e){return s("div",{key:"node"+e,staticClass:"duoren"},[s("div",{staticClass:"dept"},[s("span",[n._v(n._s(e+1)+"、并行处理【"+n._s(t.deptName)+"】")]),n._v(" "),s("van-icon",{class:{active:t.active},attrs:{name:"arrow"},on:{click:function(t){return n.changeState(a,e)}}})],1),n._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"node.active"}],staticClass:"details"},n._l(t.children,function(t,e){return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.children,expression:"!detail.children"}],key:"detail"+e},[s("p",[s("span",[n._v("发件人：")]),n._v(" "),s("span",[n._v(n._s(t.fDUserName))])]),n._v(" "),s("p",[s("span",[n._v("接收人：")]),n._v(" "),s("span",[n._v(n._s(t.dUserName))])]),n._v(" "),s("p",[s("span",[n._v("接收部门：")]),n._v(" "),s("span",[n._v(n._s(t.deptName))])]),n._v(" "),s("p",[s("span",[n._v("阅读时间：")]),n._v(" "),s("span",[n._v(n._s(t.pDate))])])])}),0)])}),0)])])}),0)},[],!1,null,"1e5e97f4",null).exports,f=a(84528),p=a(25108),s={name:"movingSituation",components:{movingSituationSimple:s,movingSituationDetails:r,DingBtn:f.default,movingSituationDetailsNew:h},props:{formData:{type:Object,default:function(){return{}}},isControl:{type:Boolean,default:!1},parameters:{type:Object,default:function(){return{}}}},data:function(){return{active:0,isActive:"right",hasYongDao:!1,flowInfo:{},dingObj:{},showNewFlow:dsf.config.commonFlow.useNewFlowPage}},mounted:function(){p.log(this.parameters)},created:function(){this.loadData(),dsf.config.ddSetting.isDing&&this.Ding(),this.isActive=dsf.config.commonFlow.isDefaultShowDetail?"right":"left"},methods:{handClickBtn:function(t){this.isActive=t},loadData:function(){var a=this;dsf.flow.getWorkFlowNodes({param:{infoId:a.formData.info_id||a.formData.A0001||a.formData.id},thenFun:function(t,e){(a.flowInfo=e).stageList&&0!=e.stageList.length?a.hasYongDao=!0:(a.isActive="right",a.hasYongDao=!1)}})},Ding:function(){var a=this,t=dsf.http.get("fn/common/getFileInfo?pk=".concat(this.formData.info_id)),e=dsf.http.get("fn/mobileNote/getMeetingUsersByNotepaper?pk=".concat(this.formData.info_id));o().all([t,e]).then(function(t){var t=(0,n.Z)(t,2),e=t[0].data,t=t[1].data.data;t.length&&(e="您有一份标题为【".concat(e.bt,"】的文件未处理，请及时处理！"),a.dingObj={users:t,text:e})}).catch(function(t){p.log(t)})}}},r=(0,i.Z)(s,function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-workflow ds-moving-situation",class:{"control-workflow":e.isControl}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasYongDao,expression:"hasYongDao"}],class:["_btn",{_controlBtn:e.isControl}]},[t("span",{class:"left"==e.isActive?"_active":"",on:{click:function(t){return e.handClickBtn("left")}}},[e._v("简约")]),e._v(" "),t("span",{class:"right"==e.isActive?"_active":"",on:{click:function(t){return e.handClickBtn("right")}}},[e._v("详细")])]),e._v(" "),t("movingSituationSimple",{directives:[{name:"show",rawName:"v-show",value:"left"==e.isActive&&e.hasYongDao,expression:"isActive=='left' && hasYongDao"}],attrs:{flowInfo:e.flowInfo}}),e._v(" "),[e.showNewFlow?t("movingSituationDetailsNew",{attrs:{formData:e.formData}}):t("movingSituationDetails",{attrs:{flowInfo:e.flowInfo,parameters:e.parameters}})],e._v(" "),t("Ding-btn",{class:[e.isControl?"controlDingBtn":"dingBtn"],attrs:{pk:e.formData.info_id,styleOptions:{width:"0.9rem",height:"0.9rem","border-radius":"50%"},prarms:e.dingObj,options:{size:"small",type:"info"},text:"提醒"}})],2)},[],!1,null,"6e0df023",null).exports,m=a(25108),f={name:"TabsMovingDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{dsfIframe:e.Z,movingSituation:r},data:function(){return{show:!0,value:"",active:0,url:this.formParams.url||"",showCB:!1,message:"",result:[],typeList:[],defaultText:"",curNode:{}}},computed:{},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})},active:{handler:function(t,e){0==t&&(this.url.includes("timer")?this.url=this.url.replace(/timer=\d+/i,"timer=".concat(+new Date)):this.url+="&timer=".concat(+new Date))},deep:!0,immediate:!0}},methods:{cuiban:function(t){var a=this,t=(this.curNode=t,m.log(this.formParams),this.formParams.pk),e=this.formParams.moduleId;dsf.http.post("ctrl/flowmonitor/getUrgeRemindConfig",{infoId:t,moduleId:e}).then(function(t){var e,t=t.data;m.log(t),"success"==t.type?t.data&&(e=t.data.smsMethodType,a.message=t.data.sms,e&&(a.typeList=e,a.result=e.map(function(t){return t.codeValue})),a.showCB=!0):m.log("get urge config error!")})},doCBAction:function(){var e=this,t=this.metaData.parameters.pk,a=this.metaData.parameters.moduleId,n=this.message,s=this.result,o=this.metaData.parameters.pnId;if(!n)return dsf.layer.toast("请输入催办内容！"),!0;dsf.http.post("fn/remind2512/remindTodo",{moduleId:a,pk:t,content:n,remindModes:s.join(","),pnIds:o,nodeId:this.curNode.nodeId,userId:this.curNode.userId}).then(function(t){t=t.data;m.log(t),"success"==t.type?(dsf.layer.toast("催办成功！"),e.closePop()):m.log("get urge config error!")})},close:function(){var t=this;this.show=!1,this.$nextTick(function(){t.$emit("closeCallback",t.value)})},closePop:function(){this.showCB=!1,this.message="",this.result=[],this.typeList=[],this.defaultText="",this.curNode={}}},created:function(){},mounted:function(){window.cuiban=this.cuiban},destroyed:function(){}},v=(0,i.Z)(f,function(){var e=this,a=e._self._c;return a("div",{staticClass:"TabsMovingDialog"},[a("van-popup",{staticStyle:{height:"100vh",width:"100%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":"",title:"流转情况"},on:{"click-left":e.close}}),e._v(" "),a("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("van-tab",{attrs:{title:"办理情况"}},[0==e.active?a("dsf-iframe",{attrs:{src:e.url}}):e._e()],1),e._v(" "),a("van-tab",{attrs:{title:"意见列表"}},[a("moving-situation",{attrs:{"form-data":{info_id:e.metaData.parameters.pk},parameters:e.metaData.parameters}})],1)],1)],1),e._v(" "),a("van-popup",{style:{height:"70%"},attrs:{position:"bottom",round:""},model:{value:e.showCB,callback:function(t){e.showCB=t},expression:"showCB"}},[a("div",{staticClass:"cb_contain"},[a("van-nav-bar",{staticClass:"cbnav",attrs:{title:"催办信息发送","right-text":"关闭"},on:{"click-right":e.closePop}}),e._v(" "),a("div",{staticClass:"cbinfo"},[a("van-field",{attrs:{rows:"1",autosize:{maxHeight:175},label:"",type:"textarea",placeholder:"请输入催办信息"},model:{value:e.message,callback:function(t){e.message="string"==typeof t?t.trim():t},expression:"message"}}),e._v(" "),a("div",{staticClass:"tipText"},[e._v("催办消息将以下面的形式发送：")]),e._v(" "),a("div",{staticClass:"cbtype"},[a("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.typeList,function(t){return a("van-checkbox",{key:t.codeValue,attrs:{"icon-size":"16px",name:t.codeValue}},[e._v(e._s(t.codeName))])}),1)],1)],1),e._v(" "),a("div",{staticClass:"btoms"},[a("van-button",{attrs:{type:"primary",size:"small"},on:{click:e.doCBAction}},[a("img",{staticClass:"cuibanimg",attrs:{src:"static/images/project/chengduyitihua/cuiban.png",alt:""}}),e._v("\n          催办")])],1)],1)])],1)},[],!1,null,"ffde4ddc",null).exports},30999:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return i}});var e=a(77193),n=a(88561),s=a(25108),o={name:"TopicFill",components:{},props:{vueData:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}}};(0,e.Z)(o,"components",{}),(0,e.Z)(o,"data",function(){return{show0:!1,item:{listId:"",moduleId:"",name:"",params:{moduleId:"",listId:"",pk:""}}}}),(0,e.Z)(o,"mounted",function(){this.checkRoom(),n.Z.saveToSessionStore("ytText",{value:this.formData.main["C-MEETINGAGENDA-0012"].value,text:this.formData.main["C-MEETINGAGENDA-0012"].text}),n.Z.saveToSessionStore("topicPk",{value:this.formData.main.A0001.value})}),(0,e.Z)(o,"beforeCreate",function(){this.$options.components.DefaultList=a(14355).default}),(0,e.Z)(o,"watch",{formParams:function(t){s.log(t)},"vueData.DioMounted":{handler:function(t){s.log(t)}}}),(0,e.Z)(o,"methods",{checkRoom:function(){this.show0=!0},back:function(){this.show0=!1,s.log("关闭",this.show0),this.$emit("closeCallback","")}}),(0,e.Z)(o,"created",function(){var t="",e="";s.log(this.metaData),e="230530201203Mch5WXbue5t6Fa2KdYe"==this.metaData.parameters.moduleId?(t="17"==this.metaData.parameters.nodeId||"-7"==this.metaData.parameters.nodeId||"-1"==this.metaData.parameters.nodeId||"meeting"==this.metaData.parameters.nodeId?"230530194204JrKaVHEkvtvPyGjDYRl":"230530194204evzlwXfg991ByLQg3Mv","230530194203oCZOzSJSoCVZFi1J8gL"):(t=this.metaData.parameters.todoId?"210731153816nI4Ajx2pjB2mnhXB76o":"210803152651ysvjiVvXwDx6GPRxN7E","210607181937YJxUC5fve4y7q3SH5hJ"),this.item={listId:t,moduleId:e,name:"议题填报",params:{listId:t,moduleId:e,pk:this.formData.main.A0001.value}}}),(0,e.Z)(o,"destroyed",function(){});var e=o,i=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"TopicFill",class:{active:e.show0}},[t("div",{staticClass:"in-box"},[t("div",{staticClass:"back"},[t("div",{on:{click:function(t){return e.back()}}},[t("van-icon",{attrs:{name:"arrow-left"}}),e._v(" "),t("span",[e._v("返回")])],1),e._v(" "),t("span",[e._v("议题填报")])]),e._v(" "),t("div",{staticClass:"content"},[t("default-list",{attrs:{params:e.item}})],1)])])},[],!1,null,"097b9792",null).exports},77741:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var n=a(25108),e={name:"calendarDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}}},data:function(){return{show:!0,value:"",minDate:new Date((new Date).getFullYear()-5,0,1),maxDate:new Date((new Date).getFullYear()+5,11,31)}},computed:{},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}},methods:{onConfirm:function(t){this.show=!1,this.value=moment(t).format("yyyy-MM-DD")}},created:function(){n.log(this)},mounted:function(){},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var e=this;return(0,e._self._c)("van-calendar",{attrs:{"get-container":"#app","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.onConfirm},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})},[],!1,null,null,null).exports},46552:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var s=a(25108),e={name:"chooseWeek",data:function(){return{show:!0,value:"",year:moment().year(),month:moment().month(),weeks:[]}},created:function(){this.getWeek(this.year,this.month)},methods:{getWeek:function(t,e){this.weeks.splice(0);for(var t=moment().year(t).month(e).date(1).day(8),a=(7<t.date()&&t.day(-6),s.log(t),1),n=(s.log(moment(t).month()),t);moment(n).month()==e;)s.log(n),this.weeks.push({week:"第".concat(a,"周"),sdate:n.format("YYYY-MM-DD"),edate:moment(n).add(6,"days").format("YYYY-MM-DD")}),n.add(7,"days"),a++;s.log(this.weeks)},lastMonth:function(){0<this.month?this.month--:(this.month=11,this.year--),this.getWeek(this.year,this.month)},nextMonth:function(){this.month<11?this.month++:(this.month=0,this.year++),this.getWeek(this.year,this.month)},chooseWeek:function(t){this.$bus.emit("chooseWeek",{week:t}),this.close()},close:function(){this.show=!1,this.$emit("closeCallback",this.value)}}},n=(0,a(51900).Z)(e,function(){var a=this,t=a._self._c;return t("div",[t("van-popup",{staticClass:"flex dc",attrs:{position:"bottom",round:""},on:{close:a.close},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[t("van-nav-bar",{staticStyle:{"border-bottom":"5px solid #F1F2F4"},attrs:{"left-text":"取消"},on:{"click-left":a.close},scopedSlots:a._u([{key:"title",fn:function(){return[t("div",[t("van-icon",{attrs:{name:"arrow-left",color:"#666"},on:{click:a.lastMonth}}),a._v(" "),t("span",[a._v(a._s(a.year)+"年"+a._s(a.month+1)+"月")]),a._v(" "),t("van-icon",{attrs:{name:"arrow",color:"#666"},on:{click:a.nextMonth}})],1)]},proxy:!0}])}),a._v(" "),t("div",{staticClass:"weeks"},a._l(a.weeks,function(e){return t("div",{staticClass:"week",on:{click:function(t){return a.chooseWeek(e)}}},[t("div",[a._v(a._s(e.week))]),a._v(" "),t("div",[a._v(a._s(e.sdate.slice(5))+"至"+a._s(e.edate.slice(5)))])])}),0)],1)],1)},[],!1,null,"54f7336b",null).exports},3624:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return h}});var o=a(5044),i=a(66250),n=a(79156),s=a(3722),r=a(33422),c=a(26511);var e=a(73473),l=a.n(e),e=a(33453),u=a.n(e),d=a(25108),e={name:"commentDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:function(){return{}}},formParams:{type:Object,default:function(){return{}}}},directives:{handleSend:{inserted:function(t,e){e=e.value;e=(0,n.Z)(e)||(0,s.Z)(e)||(0,r.Z)(e)||(0,c.Z)(),e=function(e){var a,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:800,s=2<arguments.length?arguments[2]:void 0;return function(){var t=this;a&&clearTimeout(a),a=setTimeout(function(){e.apply(t,s)},n)}}(e[0],e[1],e.slice(2));t.addEventListener("click",e)},unbind:function(t){t.removeEventListener("click",function(){})}}},components:{},data:function(){return{loading:!1,finished:!1,content:"",chidrenLoading:!1,chidrenFinished:!1,childrenContent:"",headDate:{},start:0,total:0,more:!0,comments:[],commentDialog:!0,params:{content:"",typeId:"",subTypeId:"",contentId:this.formParams.pk,orgCommentId:"",fid:""},childrenParams:{content:"",typeId:"",subTypeId:"",contentId:"",orgCommentId:"",fid:""},placeholder:"写评论"}},created:function(){this.fetchData()},mounted:function(){},activated:function(){},computed:{},watch:{},methods:{onLoad:function(){this.fetchData()},chidrenOnLoad:function(t){this.initData(t)},fetchData:function(){var e=this,t={contentId:this.formParams.pk,pageSize:5,start:this.start,shieldState:1,enableState:1};dsf.http.post("/ctrl/partyComment/commentList",t).then(function(t){var n;d.log("res",t.data),200==t.data.code?(e.loading=!1,e.start+=5,n=[],e.total=t.data.data.total,t.data.data.list.forEach(function(){var e=(0,i.Z)(u().mark(function t(e){var a;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={createUname:e.createUname,id:e.id,commentsContent:e.commentsContent,contentId:e.contentId,createTime:e.createTime,imgPath:e.imgPath,open:!1,total:e.total,showInput:!1,chidrenStart:0,enableState:e.enableState,shieldState:e.shieldState,replys:[]},n.push(a);case 2:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()),e.comments=[].concat((0,o.Z)(e.comments),n),(0==t.data.data.list.length||t.data.data.list.length<5||e.total==e.comments.length)&&(e.finished=!0)):d.log(t.data.message)}).catch(function(t){e.loading=!1,e.finished=!0,d.log(t)})},initData:function(n){var s=this;return(0,i.Z)(u().mark(function t(){var a;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={commentId:n.id,pageSize:5,start:n.chidrenStart,shieldState:1,enableState:1},t.abrupt("return",new(l())(function(e,t){dsf.http.get("/ctrl/partyComment/commentDetail",a).then(function(t){var a;d.log("res",t.data),200==t.data.code?(a=[],s.chidrenLoading=!1,n.chidrenStart+=5,t.data.data.list.forEach(function(){var e=(0,i.Z)(u().mark(function t(e){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.push({createUname:e.createUName,id:e.id,content:e.content,contentId:e.contentId,createTime:e.createTime,imgPath:e.imgPath,fid:e.fid,reply:e.reply,showInput:!1,orgCommentId:e.orgCommentId,enableState:e.enableState,shieldState:e.shieldState});case 1:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()),n.replys=[].concat((0,o.Z)(n.replys),a),(0==t.data.data.list.length||t.data.data.list.length<5)&&(s.chidrenFinished=!0)):(d.log(t.data.message),s.chidrenLoading=!1,s.chidrenFinished=!0),e()}).catch(function(t){d.log(t),e()})}));case 2:case"end":return t.stop()}},t)}))()},reply:function(e){var a=this;this.comments.forEach(function(t){t.replys.forEach(function(t){t.id==e.id?(a.childrenContent="",t.showInput=!t.showInput):t.showInput=!1}),t.id==e.id?(a.childrenContent="",t.showInput=!t.showInput):t.showInput=!1}),this.$nextTick(function(){a.$refs[e.id][0].focus(),a.placeholder="回复@"+e.createUname,a.childrenParams={content:"",typeId:"",subTypeId:"",contentId:e.contentId||a.formParams.pk,orgCommentId:e.orgCommentId||e.id||"",fid:e.id||""}})},send:function(){var t,e=this,a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=1<arguments.length?arguments[1]:void 0;if(a){if((t=this.childrenParams).content=this.childrenContent,""==this.childrenContent)return void dsf.layer.toast("回复不能为空")}else if((t=this.params).content=this.content,""==this.content)return void dsf.layer.toast("回复不能为空");dsf.http.post("/ctrl/partyComment/comment",t,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){d.log("res",t.data),200==t.data.code?a?(e.initData(n),e.start=0,e.comments=[],e.finished=!1,e.loading=!0,e.fetchData(),e.childrenContent=""):(e.start=0,e.finished=!1,e.loading=!0,e.comments=[],e.fetchData(),e.content=""):d.log(t.data.message)}).catch(function(t){e.loading=!1,e.finished=!0,d.log(t)})},clickToReply:function(e){var a=this;return(0,i.Z)(u().mark(function t(){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.open||0!=e.replys.length){t.next=3;break}return t.next=3,a.initData(e);case 3:a.comments.forEach(function(t){t.id==e.id&&(t.open=!t.open)});case 4:case"end":return t.stop()}},t)}))()}}},h=(0,a(51900).Z)(e,function(){var n=this,t=n._self._c;return t("van-popup",{staticStyle:{height:"100vh"},attrs:{"get-container":"#app","lock-scroll":"",position:"bottom",closeable:""},on:{close:function(t){return n.$emit("closeCallback")}},model:{value:n.commentDialog,callback:function(t){n.commentDialog=t},expression:"commentDialog"}},[t("div",{staticClass:"gray title"},[n._v("评论")]),n._v(" "),t("div",{staticClass:"commentDialog"},[0!=n.comments.length?t("div",{staticClass:"commentList"},[t("van-list",{attrs:{finished:n.finished,"finished-text":"数据已全部加载",offset:"80"},on:{load:n.onLoad},model:{value:n.loading,callback:function(t){n.loading=t},expression:"loading"}},[n._l(n.comments,function(a){return[1==a.enableState&&1==a.shieldState?t("div",{key:a.id,staticClass:"box"},[t("div",{staticClass:"firstFloor"},[t("img",{attrs:{src:a.imgPath,alt:""}}),n._v(" "),t("div",{staticClass:"header_right"},[t("div",{staticClass:"name gray"},[n._v(n._s(a.createUname))]),n._v(" "),t("div",{staticClass:"content"},[n._v(n._s(a.commentsContent))]),n._v(" "),t("div",{staticClass:"timer flex jb ac"},[t("div",{staticClass:"timer_left gray"},[n._v("\n                    "+n._s(a.createTime)+"\n                    "),t("span",{staticClass:"normal",on:{click:function(t){return n.reply(a)}}},[n._v("  回复")])]),n._v(" "),0!=a.total?t("div",{class:a.open?"normal":"gray",on:{click:function(t){return n.clickToReply(a)}}},[t("van-icon",{attrs:{name:"chat-o",badge:a.total,size:"28"}})],1):n._e()])])]),n._v(" "),a.showInput?t("div",{staticClass:"chidrenComment"},[t("van-field",{ref:a.id,refInFor:!0,attrs:{center:"",placeholder:n.placeholder},scopedSlots:n._u([{key:"button",fn:function(){return[t("van-button",{directives:[{name:"handleSend",rawName:"v-handleSend",value:[n.send,800,!0,a],expression:"[send, 800, true, item]"}],attrs:{size:"small",type:"primary"}},[n._v("发送")])]},proxy:!0}],null,!0),model:{value:n.childrenContent,callback:function(t){n.childrenContent=t},expression:"childrenContent"}})],1):n._e(),n._v(" "),a.open?t("div",{staticClass:"layer"},[t("van-list",{attrs:{finished:n.chidrenFinished,"finished-text":"数据已全部加载"},on:{load:function(t){return n.chidrenOnLoad(a)}},model:{value:n.chidrenLoading,callback:function(t){n.chidrenLoading=t},expression:"chidrenLoading"}},[n._l(a.replys,function(e){return[1==e.enableState&&1==e.shieldState?t("div",{key:e.id,staticClass:"list_item"},[t("img",{attrs:{src:e.imgPath,alt:""}}),n._v(" "),t("div",{staticClass:"list_right"},[t("div",{staticClass:"name gray"},[n._v(n._s(e.createUname))]),n._v(" "),t("div",{staticClass:"reply"},[t("span",[n._v("回复")]),n._v(" "),t("span",{staticClass:"normal"},[n._v(n._s(e.reply)+":")]),n._v(" "),t("span",{staticClass:"replyContent"},[n._v(n._s(e.content))])]),n._v(" "),t("div",[t("span",{staticClass:"gray"},[n._v(n._s(e.createTime))]),n._v(" "),t("span",{staticClass:"normal",on:{click:function(t){return n.reply(e)}}},[n._v("  回复")])]),n._v(" "),e.showInput?t("div",{staticClass:"chidrenComment"},[t("van-field",{ref:e.id,refInFor:!0,attrs:{center:"",placeholder:n.placeholder},scopedSlots:n._u([{key:"button",fn:function(){return[t("van-button",{directives:[{name:"handleSend",rawName:"v-handleSend",value:[n.send,800,!0,a],expression:"[send, 800, true, item]"}],attrs:{size:"small",type:"primary"}},[n._v("发送")])]},proxy:!0}],null,!0),model:{value:n.childrenContent,callback:function(t){n.childrenContent=t},expression:"childrenContent"}})],1):n._e()])]):n._e()]})],2)],1):n._e()]):n._e()]})],2)],1):t("commonempty",{attrs:{description:"暂无评论数据"}}),n._v(" "),t("div",{staticClass:"comment"},[t("van-field",{ref:"input",attrs:{center:"",placeholder:"写评论"},scopedSlots:n._u([{key:"button",fn:function(){return[t("van-button",{directives:[{name:"handleSend",rawName:"v-handleSend",value:[n.send,800,!1],expression:"[send, 800, false]"}],attrs:{size:"small",type:"primary"}},[n._v("发送")])]},proxy:!0}]),model:{value:n.content,callback:function(t){n.content=t},expression:"content"}})],1)],1)])},[],!1,null,"110e5ae6",null).exports},36940:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var e=a(26243),n=a.n(e),e=a(18428),u=a.n(e),e=a(79529),d=a.n(e),e=a(90625),s=a(25108),e={name:"comprehensiveBack",components:{roundPopup:e.Z},props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}},isFromList:{type:Boolean,default:!1},listData:{type:Object}},data:function(){return{returnWays:[{name:"1",text:"退回上一环节"},{name:"2",text:"退回修改"},{name:"3",text:"退回审批"},{name:"4",text:"退回重办"}],radio:"1",showPicker:!1,columnsPicker:[],show:!0,message:"",showUser:"",curUser:{},tips:"",needPicker:!0}},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}},created:function(){this.getUsersForReturn()},methods:{changeWay:function(t){var e=this;e.curUser={},e.showUser="",e.tips="",e.needPicker=!0,e.columnsPicker=[],"1"==t?e.getUsersForReturn():"2"==t?(e.tips="退回修改：当前文件退回至【被退用户】修改，修改完成后可直接回送到当前用户继续办理！",e.getNodesForReturn()):"3"==t?(e.tips="退回审批：当前文件退回至【被退用户】修改，修改完成后按照流程节点顺序重新办理！",e.getNodesForReturn()):(e.tips="退回重办：此操作将删除当前文件的意见、流程信息，同时文件将退回至拟稿人待办列表，修改完成后按照流程节点顺序重新办理！",e.needPicker=!1)},onConfirmPicker:function(t,e){s.log("当前值：",t,"当前索引：",e),this.showUser=t.showText,this.curUser=t,this.showPicker=!1},onCancelPicker:function(){s.log("取消")},getUsersForReturn:function(){var a=this;dsf.http.get("fn/flow/getGPNodeProcess",{pId:a.metaData.parameters.pId,flowId:a.metaData.parameters.flowId,pk:a.metaData.parameters.pk,pnId:a.metaData.parameters.pnId}).done(function(e){var t;"success"==e.type&&(1==e.data.processArray.length?(t=e.data.processArray[0],a.tips="上一环节为：".concat(t.PARENT_NODE_NAME,"节点，办理人员为：").concat(t.Sender.UserName),a.needPicker=!1,a.curUser={userId:t.Sender.UserID,uName:t.Sender.UserName,actName:t.PARENT_NODE_NAME,showText:"".concat(t.Sender.UserName,"(").concat(t.PARENT_NODE_NAME,")"),TPID:t.TPID,LinkID:t.LinkID,WFID:t.WFID,MultSendBackMod:e.data.SendRequest.multSendBackMod,IsMergeTodo:e.data.SendRequest.isMergeTodo,SendBackTo:e.data.SendRequest.sendBackTo}):e.data.processArray.forEach(function(t){a.columnsPicker.push({userId:t.Sender.UserID,uName:t.Sender.UserName,actName:t.PARENT_NODE_NAME,showText:"".concat(t.Sender.UserName,"(").concat(t.PARENT_NODE_NAME,")"),TPID:t.TPID,LinkID:t.LinkID,WFID:t.WFID,MultSendBackMod:e.data.SendRequest.multSendBackMod,IsMergeTodo:e.data.SendRequest.isMergeTodo,SendBackTo:e.data.SendRequest.sendBackTo})}))})},getNodesForReturn:function(){var e=this;dsf.http.get("fn/flow/getGPNodeList",{pId:e.metaData.parameters.pId,returnNodeId:-1}).done(function(t){"success"==t.type&&t.data.forEach(function(t){e.columnsPicker.push({wfNodeId:t.wfNodeId,userId:t.userId,uName:t.uName,deptId:t.deptId,deptName:t.deptName,actName:t.actName,showText:"".concat(t.uName,"(").concat(t.actName,")")})})})},confirm:function(){var t=this;t.needPicker&&0==n()(t.curUser).length?dsf.layer.toast("请选择被退用户",!1):t.message?"2"==t.radio||"3"==t.radio?t.sendBackToNode():t.sendBackToUser():dsf.layer.toast("请输入退回意见",!1)},sendBackToUser:function(){var e=this,a=this,t={backType:4,pk:a.metaData.parameters.pk,Remark:a.message,inherit:""};"1"==a.radio&&(t={TPID:a.curUser.TPID,CurLinkID:a.curUser.LinkID,WFID:a.curUser.WFID,backType:1,Remark:a.message,inherit:"",MultSendBackMod:a.curUser.MultSendBackMod,IsMergeTodo:a.curUser.IsMergeTodo,NGR:0,SendBackTo:a.curUser.SendBackTo,pk:a.metaData.parameters.pk}),dsf.layer.loading("提交中");dsf.http.post("fn/flow/submitSendBackNode",t).done(function(t){"success"==t.type?"4"==e.radio?e.moduleConvertEx(e.metaData.parameters.moduleId,e.metaData.parameters.moduleId,e.metaData.parameters.pk):dsf.layer.toast("退回成功",!0,function(){return a.$emit("backSucces")}):dsf.layer.toast("操作失败",!1)}).error(function(t){s.log("submitSendBackNode-err",t),dsf.layer.toast("操作失败",!1)})},sendBackToNode:function(){var e=this,t={disableAutoSend:-1,isBackTrack:"2"==e.radio?1:0,nextHandleType:"SR_BACKSEND",nextNodeId:e.curUser.wfNodeId,opinionContent:e.message,opinionType:4,pId:e.metaData.parameters.pId,pk:e.metaData.parameters.pk,pnId:e.metaData.parameters.pnId,receiverList:[{type:1,userId:e.curUser.userId,userName:e.curUser.uName,deptId:e.curUser.deptId,deptName:e.curUser.deptName}],sendType:"SR_SPECIAL"};dsf.layer.confirm({message:"确定退回到 ".concat(e.curUser.showText," 吗？"),confirmButtonText:"确认"},function(){dsf.layer.loading("提交中");dsf.http.post("fn/flow/sendRequest",t,{headers:{"Content-Type":"application/json"}}).done(function(t){"success"==t.type?dsf.layer.toast("退回成功",!0,function(){return e.$emit("backSucces")}):dsf.layer.toast("操作失败",!1)}).error(function(t){s.log("sendRequest-err",t),dsf.layer.toast("操作失败",!1)})})},moduleConvertEx:function(e,a,t,n,s,o){var i=(o=o||{}).initData,r={sourceModule:a,targetModule:e,srcInfo:t},c=(i&&(r.initDataSource=1),o.isEndSrcFlow&&(r.isEndSrcFlow=1),o.pnid&&(r.pnid=o.pnid),o.convertParams?u()(r,o.convertParams):o.convertParams=r,this);function l(){var t;e&&a&&(t=dsf.http.post("ctrl/convert/moduleConvert",r).then(function(t){var e;if(void 0===(e=n?n(t.data):e)||!1===e)if("success"==t.data.type){if(null!=o.isOpenForm&&"false"==o.isOpenForm)return!1;"0"!=t.data.data.jump&&"-1"==t.data.data.jump&&dsf.layer.toast("退回成功",!0,function(){return c.$emit("backSucces")})}else dsf.layer.toast(t.data.messagee)}))&&"success"!==t.type&&"function"==typeof s&&s()}dsf.http.post("ctrl/convert/fileConvertCount",r).then(function(t){"success"==t.data.type&&(-1==(t=d()(t.data.data))?l():0==t?dsf.layer.toast("转换生成文件已达到设定限制！"):0<t&&dsf.layer.confirm({message:"已存在"+t+"个转换文件，请确认是否继续转换生成新文件？",confirmButtonText:"确认"},function(){l()}))})}}},o=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return n("round-popup",{attrs:{show:a.show,title:"综合退回"},on:{"update:show":function(t){a.show=t}},scopedSlots:a._u([{key:"container",fn:function(){return[n("div",{staticClass:"way-box"},[n("van-field",{attrs:{label:"退回方式",name:"radio",center:""},scopedSlots:a._u([{key:"input",fn:function(){return[n("van-radio-group",{attrs:{direction:"horizontal"},on:{change:a.changeWay},model:{value:a.radio,callback:function(t){a.radio=t},expression:"radio"}},a._l(a.returnWays,function(t,e){return n("van-radio",{key:e,attrs:{name:t.name}},[a._v("\n              "+a._s(t.text)+"\n            ")])}),1)]},proxy:!0}])})],1),a._v(" "),a.tips?n("div",{staticClass:"tips-box"},[a._v("\n      "+a._s(a.tips)+"\n    ")]):a._e(),a._v(" "),a.needPicker?n("div",{staticClass:"user-box"},[n("van-field",{attrs:{readonly:"",clickable:"",label:"被退用户",value:a.showUser,placeholder:"请选择"},on:{click:function(t){a.showPicker=!0}}}),a._v(" "),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:a.showPicker,callback:function(t){a.showPicker=t},expression:"showPicker"}},[n("van-picker",{attrs:{title:"被退用户","show-toolbar":"",columns:a.columnsPicker,"value-key":"showText"},on:{cancel:function(t){a.showPicker=!1},confirm:a.onConfirmPicker}})],1)],1):a._e(),a._v(" "),n("div",{staticClass:"opinion-box"},[n("van-field",{attrs:{rows:"3",label:"退回意见",type:"textarea",placeholder:"请输入意见"},model:{value:a.message,callback:function(t){a.message=t},expression:"message"}})],1)]},proxy:!0},{key:"btn",fn:function(){return[n("van-button",{attrs:{type:"primary"},on:{click:a.confirm}},[a._v("立即提交")])]},proxy:!0}])})},[],!1,null,"8a9b0e36",null).exports},19677:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var e=a(90625),n=a(25108),e={name:"exSendDialog",components:{roundPopup:e.Z},created:function(){},props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},data:function(){return{show:!0,personId:"",option:[],radio:"",List:[],LineName:"",person:"",sendDeptId:"",sendDeptName:"",sendUnitId:"",sendUnitName:""}},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}},methods:{getData:function(){},tabClick:function(t){n.log(t)},radioChange:function(t){n.log(t)},send:function(){var e,a,n,t,s,o=this,i=this;this.radio?(e=this.radio.split("_")[0],a=this.radio.split("_")[1],n=this.List.find(function(t){return t.LinkID==e}),t=n.UserInfoList.UserInfo.find(function(t){return t.value==n.personId}),s=n.NextNodes.Line.find(function(t){return t.LineID==a}),dsf.layer.confirm({message:"确定使用用户".concat(t.RealUserName,"发送文件到节点【").concat(s.ShowName,"】吗？"),confirmButtonText:"确认"},function(){o.show=!1,i.$parent.$parent.alreadyWriteOpintion=!0,i.$parent.$parent.isShowWriteOpintionBtn=!0,i.$parent.$parent.buttonHandle.send(i.$parent.$parent.$route.params,i.$parent.$parent.formMeta,i.$parent.$parent.formData,i.$parent.$parent,i.$parent.$parent.$refs,null,i.$parent.$parent.nowButtonParameters,{sendUserId:t.RealUserId,sendUserName:t.RealUserName,pnid:e,nextLineId:a,sendDeptId:t.RealDeptID,sendDeptName:t.RealDeptName,sendType:"SR_EXSEND"})})):dsf.layer.toast("请选择节点")}},mounted:function(){var e=this;this.$bus.$on("ZFLineData",function(t){e.List=t.ResponseObject[0].ExSendLinks.Process,e.List.forEach(function(t){t.UserInfoList.UserInfo.forEach(function(t){t.text=t.RealUserName,t.value=t.RealUserID}),t.personId=t.UserInfoList.UserInfo[0].value})})}},s=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return n("round-popup",{staticStyle:{height:"80vh"},attrs:{show:a.show,title:"请选择要增发的信息"},on:{"update:show":function(t){a.show=t}},scopedSlots:a._u([{key:"container",fn:function(){return[n("div",{staticClass:"send-dialog"},[n("div",{staticClass:"list"},a._l(a.List,function(e){return n("div",{key:e.LineID,staticClass:"item"},[n("div",{staticClass:"item-tit"},[n("span",[a._v(a._s(e.NodeName))]),a._v(" "),n("div",{staticClass:"input"},[n("label",{attrs:{for:""}},[a._v("发送人：")]),a._v(" "),n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:e.UserInfoList.UserInfo},on:{change:a.tabClick},model:{value:e.personId,callback:function(t){a.$set(e,"personId",t)},expression:"ele.personId"}})],1)],1)]),a._v(" "),n("div",{staticClass:"item main"},[n("van-radio-group",{on:{change:a.radioChange},model:{value:a.radio,callback:function(t){a.radio=t},expression:"radio"}},a._l(e.NextNodes.Line,function(t){return n("van-radio",{key:"".concat(e.LinkID,"_").concat(t.LineID),attrs:{name:"".concat(e.LinkID,"_").concat(t.LineID)}},[a._v(a._s(t.ShowName))])}),1)],1)])}),0)])]},proxy:!0},{key:"btn",fn:function(){return[n("van-button",{attrs:{type:"theme"},on:{click:function(t){return a.send()}}},[a._v("发送")])]},proxy:!0}])})},[],!1,null,"5362999c",null).exports},94493:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e={name:"exchangeSendBack",components:{roundPopup:a(90625).Z},props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}},isFromList:{type:Boolean,default:!1},listData:{type:Object}},data:function(){return{value:"",show:!0}},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}},methods:{confirm:function(){var e=this,t={},t=this.isFromList?{moduleId:this.listData.dataValue.A0004,pk:this.listData.dataValue.A0001,reason:this.value}:{moduleId:this.formParams.moduleId,pk:this.formParams.pk,reason:this.value},a=dsf.layer.loading();dsf.http.post("ctrl/exRemoteInterfaceController/rejectDoc",t).then(function(t){dsf.layer.closeLoading(a),"success"===t.data.type?(e.show=!1,dsf.layer.toast(t.data.message),e.isFromList?e.$emit("refreshList"):e.$emit("backSucces")):dsf.layer.toast(t.data.message)}).catch(function(){dsf.layer.closeLoading(a),dsf.layer.toast("退回失败")})}}},n=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("round-popup",{attrs:{show:e.show,title:"退回"},on:{"update:show":function(t){e.show=t}},scopedSlots:e._u([{key:"container",fn:function(){return[t("van-field",{staticClass:"message",attrs:{type:"textarea",rows:10,placeholder:"请输入原因"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]},proxy:!0},{key:"btn",fn:function(){return[t("van-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认退回")])]},proxy:!0}])})},[],!1,null,"14406e12",null).exports},84104:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var e=a(63450),n=a(25108),e={name:"fgwChoseLeader",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{controlUserList:e.default},data:function(){return{show:!0,selectType:1,extra:{expandAll:!0,tabs:[{action:"fn/sdszf/pc/gwyz/getUserByRoleId?roleId=220125174443bO46dgLiivFKbR7bUPj",name:"委领导",subTabKey:"department"}]},defaultSelectArray:[]}},computed:{},watch:{},methods:{close:function(){this.show=!1,this.$emit("closeCallback",{justClose:!0})},cancePerson:function(){this.$emit("closeCallback",{justClose:!0})},getSelectUser:function(t){n.log(t),0==t.length?dsf.layer.toast("请选择委领导！"):this.$emit("closeCallback",t[0])}},created:function(){},mounted:function(){},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"testDialog1"},[t("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("control-user-list",{attrs:{"default-select-array":e.defaultSelectArray,extra:e.extra,selectType:e.selectType,showHeader:!0},on:{close:e.cancePerson,getSelectUser:e.getSelectUser}})],1)],1)},[],!1,null,null,null).exports},22264:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var e=a(8450),n=a.n(e),s=a(25108),e={name:"forceRecycle",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{title:"回收节点",show:!0,value:"",fromNodeList:[],toNode:{},currentData:{}}},computed:{},watch:{},methods:{close:function(){this.show=!1,this.$emit("closeCallback",this.value)},getNodeUserList:function(){var e=this;dsf.http.post("fn/flow/getForceRecycleData",{pk:this.formParams.pk}).then(function(t){s.log(t),200==t.data.code?(t=t.data.data[0],s.log(t),e.fromNodeList=t.fromNodeList,e.toNode=t.toNode):dsf.layer.toast("接口请求失败！")})},radioChange:function(e){this.currentData=this.fromNodeList.filter(function(t){return t.id==e})[0]},doSubmit:function(){var t,e=this;this.value?(t={infoId:this.formParams.pk,moduleId:this.formParams.moduleId,type:"SR_SPECIAL",ignoreOpinion:1,agencyType:2,determineUser:this.currentData.uid,pnid:this.currentData.id,nextNodeId:this.toNode.wfnodeid,receiverList:n()([{type:1,userId:this.toNode.uid,userName:this.toNode.uname,deptId:this.toNode.deptid,deptName:this.toNode.deptname}])},dsf.http.post("fn/mobileFlow/getFlowNode",t).then(function(t){s.log(t),t.data.result?(dsf.layer.toast("操作成功！"),e.show=!1,e.$emit("backSucces")):dsf.layer.toast("接口请求失败！")})):dsf.layer.toast("请选择相关节点！")}},created:function(){},mounted:function(){this.getNodeUserList()},destroyed:function(){}},o=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return n("div",{staticClass:"testDialog1"},[n("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},on:{close:a.close},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[n("div",{staticClass:"warp"},[n("van-nav-bar",{attrs:{title:a.toNode.actname||"节点选择"},on:{"click-right":a.close},scopedSlots:a._u([{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"cross",size:"20"}})]},proxy:!0}])}),a._v(" "),n("div",{staticClass:"radios"},[n("van-radio-group",{on:{change:a.radioChange},model:{value:a.value,callback:function(t){a.value=t},expression:"value"}},a._l(a.fromNodeList,function(t,e){return n("van-radio",{key:e,attrs:{name:t.id}},[a._v(a._s(t.uname)+"（"+a._s(t.actname)+"）")])}),1)],1),a._v(" "),n("div",{staticClass:"buttonx"},[n("van-button",{attrs:{type:"info",block:""},on:{click:a.doSubmit}},[a._v("提交")])],1)],1)])],1)},[],!1,null,"b2a5a594",null).exports},32679:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var n=a(25108),e={name:"instructionsDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},data:function(){return{show:!0,value:"",switchChecked:!1}},created:function(){},mounted:function(){},methods:{close:function(t){var e=this,a=dsf.util.loadSessionStore("user");"确定"==t&&(t={fileNameText:this.formData.main["231124144956yJf6AX5Eaq3jXHFXK5J"].text,fileNameValue:this.formData.main["231124144956yJf6AX5Eaq3jXHFXK5J"].value,bt:this.formData.main.B0001.value,userName:a.name,userId:a.user_id,content:this.value,isOpen:1,sourceId:this.formParams.pk},n.log(t),dsf.http.post("fn/informationDataController/createLeaderWritten",t).then(function(t){n.log(t),"200"==t.data.code&&(dsf.layer.toast("批示成功!"),e.$bus.emit("refreshValue","刷新"))})),this.show=!1,this.$nextTick(function(){e.$emit("closeCallback",e.value)})}}},s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",[t("van-popup",{attrs:{round:"",position:"bottom"},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{staticClass:"pop"},[t("van-nav-bar",{attrs:{title:"新增批示"}}),e._v(" "),t("van-field",{attrs:{rows:"4",autosize:"",type:"textarea",placeholder:"请输入批示意见"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),t("div",{staticClass:"btn"},[t("van-button",{on:{click:function(t){return e.close("取消")}}},[e._v("取消")]),e._v(" "),t("van-button",{on:{click:function(t){return e.close("确定")}}},[e._v("确认")])],1)],1)])],1)},[],!1,null,"dad11470",null).exports},80429:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var e=a(79529),s=a.n(e),n=a(25108),e={name:"meetAttend",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{show0:!0,timer:"",countdown:""}},computed:{},watch:{formParams:function(t){n.log(t)}},methods:{getTimer:function(){var t=new Date,e=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),e=e<10?"0"+e:e,a=t.getMinutes(),a=a<10?"0"+a:a,n=t.getSeconds(),e=(this.timer="现在时间："+e+":"+a+":"+(n<10?"0"+n:n),new Date(this.formData.main["c-meetingtz-019"].value));this.countdown=s()((e.getTime()-t.getTime())/1e3)},closed:function(){this.show0=!0,n.log("关闭",this.show0),this.$emit("closeCallback","")},sign:function(){var e=this,a=this;n.log(this.countdown),7200<this.countdown||this.countdown<0?dsf.layer.toast("请在会议开始前2小时内签到"):dsf.http.post("fn/meetingNotice/noticeSign",{pk:this.formParams.pk,tzId:this.formParams.pk}).then(function(t){200==t.code?(dsf.layer.toast(t.message),a.show0=!1,e.$emit("closeCallback","")):dsf.layer.toast(t.message)})},cancel:function(){this.show0=!1,this.$emit("closeCallback","")}},created:function(){},mounted:function(){this.getTimer(),this.$bus.$on("selectData",function(t){n.log(t)})},destroyed:function(){}},o=(0,a(51900).Z)(e,function(){var t=this,e=t._self._c;return t.show0?e("div",{staticClass:"meet-attend"},[e("div",{staticClass:"wrapper",on:{click:function(t){t.stopPropagation()}}},[e("van-icon",{attrs:{name:"cross",size:"16"},on:{click:t.closed}}),t._v(" "),e("div",{staticClass:"circle flex dc jc isSign",on:{click:t.sign}},[e("div",{staticClass:"title"},[t._v("点击签到")]),t._v(" "),e("div",[t._v(t._s(t.timer))])]),t._v(" "),e("div",[t._v("签到时限："+t._s(t.formData.main["c-meetingtz-019"].value))])],1)]):t._e()},[],!1,null,"15cc7f3f",null).exports},9949:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var e=a(77193),n=a(25108),s={name:"meetConflict",components:{},props:{vueData:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}}};(0,e.Z)(s,"components",{}),(0,e.Z)(s,"data",function(){return{show0:!1,item:{listId:"221222170205LrzTTVPk1FTcVsurRf4",moduleId:"21070914173377CK6e9OttviLpv0zaN",name:"会议占用列表",params:{moduleId:"21070914173377CK6e9OttviLpv0zaN",listId:"221222170205LrzTTVPk1FTcVsurRf4",roomId:this.formData.main["c-meetingsq-009"].value,sTime:this.formData.main["c-meetingsq-007"].value,eTime:this.formData.main["c-meetingsq-008"].value}}}}),(0,e.Z)(s,"mounted",function(){this.checkRoom(),n.log(this.$parent.$parent)}),(0,e.Z)(s,"beforeCreate",function(){this.$options.components.DefaultList=a(14355).default}),(0,e.Z)(s,"watch",{formParams:function(t){n.log(t)},"vueData.DioMounted":{handler:function(t){n.log(t)}}}),(0,e.Z)(s,"methods",{checkRoom:function(){var e=this,a=this;this.formData.main["c-meetingsq-007"].value?this.formData.main["c-meetingsq-008"].value?this.formData.main["c-meetingsq-009"].value?dsf.http.post("fn/meetingRoomOccupy/checkRoomOccupy",{pk:this.formData.main.B0035.value,hys:this.formData.main["c-meetingsq-009"].value,sdate:this.formData.main["c-meetingsq-007"].value,edate:this.formData.main["c-meetingsq-008"].value}).then(function(t){n.log(t),"error"==t.data.type?a.show0=!0:(a.$parent.$parent.buttonHandle.send(a.$parent.$parent.$route.params,a.$parent.$parent.formMeta,a.$parent.$parent.formData,a.$parent.$parent,a.$parent.$parent.$refs,null,a.$parent.$parent.nowButtonParameters),a.show0=!1,e.$emit("closeCallback",""))}):(dsf.layer.toast("请选择会议室"),this.show0=!1):(dsf.layer.toast("请选择结束时间"),this.show0=!1):(dsf.layer.toast("请选择开始时间"),this.show0=!1)},back:function(){this.show0=!1,n.log("关闭",this.show0),this.$emit("closeCallback","")}}),(0,e.Z)(s,"created",function(){}),(0,e.Z)(s,"destroyed",function(){});var e=s,o=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"meet-Conflict",class:{active:e.show0}},[t("div",{staticClass:"in-box"},[t("div",{staticClass:"back"},[t("div",{on:{click:function(t){return e.back()}}},[t("van-icon",{attrs:{name:"arrow-left"}}),e._v(" "),t("span",[e._v("返回")])],1),e._v(" "),t("span",[e._v("冲突会议")])]),e._v(" "),t("div",{staticClass:"content"},[t("default-list",{attrs:{params:e.item}})],1)])])},[],!1,null,"3dca577a",null).exports},12271:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var n=a(25108),e={name:"meetEntrust",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{show0:!0,personData:"",InputVal:"",textVal:"",extra:{multiple:!1,tabs:[{name:"本机构",action:"fn/user/select/data?types=person&rootObject=2&action=self_org&async=false&excludeIds=".concat(dsf.util.loadSessionStore("user").user_id),subTabKey:"department"}]}}},computed:{},watch:{formParams:function(t){n.log(t)}},methods:{closed:function(){this.show0=!0,n.log("关闭",this.show0),this.$emit("closeCallback","")},submit:function(){var e=this,a=this;0==this.personData.length?dsf.layer.toast("请选择委托人员"):this.textVal?dsf.http.post("ctrl/meetingNotice/directSignUp",{bmId:this.metaData.parameters.bmId||this.$route.query.signUpPk||this.metaData.parameters.todoId.split("_")[0],tzId:this.metaData.parameters.tzId||this.formParams.pk,registrationStatus:"3",bzValue:this.textVal,userId:this.personData[0].id,deptId:this.personData[0].attrs.deptId}).then(function(t){200==t.data.code?dsf.layer.toast("委托提交成功",function(){a.show0=!1,a.$emit("closeCallback",""),e.$router.go(0)}):dsf.layer.toast(t.data.message)}):dsf.layer.toast("请填写委托理由")},cancel:function(){this.show0=!1,this.$emit("closeCallback","")},ShowTree:function(){this.$emit("showTree",this.extra),this.show0=!0},beforeClose:function(t,e){return e(!1)}},created:function(){},mounted:function(){var e=this;this.$bus.$on("selectData",function(t){n.log(t),e.personData=t,e.InputVal=t[0].name})},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return e.show0?t("div",{staticClass:"meet-Entrust"},[t("div",{staticClass:"content"},[e._m(0),e._v(" "),t("div",{staticClass:"main"},[t("div",{staticClass:"tab"},[t("label",{attrs:{for:""}},[e._v("委托人:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.InputVal,expression:"InputVal"}],attrs:{type:"text",placeholder:"请选择委托人"},domProps:{value:e.InputVal},on:{click:e.ShowTree,input:function(t){t.target.composing||(e.InputVal=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"tab"},[t("label",{attrs:{for:""}},[e._v("委托理由:")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textVal,expression:"textVal"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入委托理由"},domProps:{value:e.textVal},on:{input:function(t){t.target.composing||(e.textVal=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"btn"},[t("button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("button",{on:{click:e.submit}},[e._v("保存")])])])]):e._e()},[function(){var t=this._self._c;return t("div",{staticClass:"com-title"},[t("span",[this._v("委托他人")])])}],!1,null,"5c46d0c6",null).exports},7758:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var n=a(25108),e={name:"meetLeave",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{show0:!0,personData:"",InputVal:"",textVal:""}},computed:{},watch:{formParams:function(t){n.log(t)}},methods:{closed:function(){this.show0=!0,n.log("关闭",this.show0),this.$emit("closeCallback","")},submit:function(){var e=this,a=this;this.textVal?dsf.http.post("ctrl/meetingNotice/directSignUp",{bmId:this.metaData.parameters.bmId||this.$route.query.signUpPk||this.metaData.parameters.todoId.split("_")[0],tzId:this.metaData.parameters.tzId||this.formParams.pk,registrationStatus:"2",bzValue:this.textVal}).then(function(t){200==t.data.code?dsf.layer.toast("请假提交成功",function(){a.show0=!1,a.$emit("closeCallback",""),e.$router.go(0)}):dsf.layer.toast(t.data.message)}):dsf.layer.toast("请填写请假理由")},cancel:function(){this.show0=!1,n.log("取消"),this.$emit("closeCallback","")},ShowTree:function(){n.log("点击"),this.$emit("showTree",this.extra),this.show0=!0},beforeClose:function(t,e){return n.log("关闭1111111"),e(!1)}},created:function(){},mounted:function(){},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return e.show0?t("div",{staticClass:"meet-Entrust"},[t("div",{staticClass:"content"},[e._m(0),e._v(" "),t("div",{staticClass:"main"},[t("div",{staticClass:"tab"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textVal,expression:"textVal"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入请假理由"},domProps:{value:e.textVal},on:{input:function(t){t.target.composing||(e.textVal=t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"btn"},[t("button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("button",{on:{click:e.submit}},[e._v("保存")])])])]):e._e()},[function(){var t=this._self._c;return t("div",{staticClass:"com-title"},[t("span",[this._v("请假")])])}],!1,null,"e6748326",null).exports},3125:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var n=a(25108),e={name:"meetSign",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{show0:!0,value:""}},computed:{},watch:{formParams:function(t){n.log(t)}},methods:{closed:function(){this.show0=!0,this.$emit("closeCallback","")},submit:function(){var e=this,a=this;dsf.http.post("ctrl/meetingNotice/directSignUp",{bmId:this.metaData.parameters.bmId||this.$route.query.signUpPk||this.metaData.parameters.pId||this.metaData.parameters.todoId.split("_")[0],tzId:this.metaData.parameters.tzId||this.formParams.pk,registrationStatus:"1"}).then(function(t){200==t.data.code?dsf.layer.toast("报名提交成功",function(){a.show0=!1,a.$emit("closeCallback",""),e.$router.go(0)}):dsf.layer.toast(t.data.message)})},cancel:function(){this.show0=!1,n.log("取消"),this.$emit("closeCallback","")},ShowTree:function(){n.log("点击"),this.$emit("showTree",this.extra),this.show0=!0},beforeClose:function(t,e){return n.log("关闭1111111"),e(!1)}},created:function(){},mounted:function(){this.formData&&(this.value=this.formData.main.B0001.value)},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var t=this,e=t._self._c;return t.show0?e("div",{staticClass:"meet-Entrust"},[e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("div",{staticClass:"main"},[e("p",[t._v("您要报名参加会议：【"+t._s(t.value)+"】")])]),t._v(" "),e("div",{staticClass:"btn"},[e("button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),e("button",{on:{click:t.submit}},[t._v("确定")])])])]):t._e()},[function(){var t=this._self._c;return t("div",{staticClass:"com-title"},[t("span",[this._v("报名")])])}],!1,null,"13f04d28",null).exports},29023:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var e=a(90625),n=a(86720),e={name:"movingDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}}},components:{roundPopup:e.Z,movingSituation:n.Z},data:function(){return{show:!0,value:""}},computed:{},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}},methods:{},created:function(){},mounted:function(){},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("round-popup",{staticStyle:{height:"80vh"},attrs:{show:e.show,title:"流转情况"},on:{"update:show":function(t){e.show=t}},scopedSlots:e._u([{key:"container",fn:function(){return[t("moving-situation",{attrs:{"form-data":{info_id:e.metaData.parameters.pk},parameters:e.metaData.parameters}})]},proxy:!0}])})},[],!1,null,null,null).exports},61077:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return i}});var e=a(8450),n=a.n(e),e=a(90625),s=a(86720),o=a(25108),e={name:"movingSituationDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}}},components:{roundPopup:e.Z,movingSituation:s.Z},data:function(){return{show:!0,value:"",situationVal:"",showPopover:!1,actions:[],infoId:""}},computed:{},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}},methods:{onSelect:function(t){var e=this;this.infoId="",this.situationVal=t.text,this.$nextTick(function(){e.infoId=t.infoId})},getFlowList:function(){var e=this,t={infoId:e.metaData.parameters.pk,tableName:""};"230526200223gswVshIefURwZbXu8m6"==e.metaData.parameters.moduleId?t.tableName="fw":"2305262001457EcjMOO9fUw7XxwWltG"==e.metaData.parameters.moduleId&&(t.tableName="lw"),dsf.http.post("ctrl/czjcustom/getFlowList",t).then(function(t){t=t.data;o.log(t),"200"==t.code&&(e.actions=JSON.parse(n()(t.data).replace(/deptName/g,"text")),e.situationVal=e.actions[0].text,e.infoId=e.actions[0].infoId)})}},created:function(){this.getFlowList()},mounted:function(){},destroyed:function(){}},i=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("round-popup",{staticStyle:{height:"80vh"},attrs:{show:e.show,title:"流转情况"},on:{"update:show":function(t){e.show=t}},scopedSlots:e._u([{key:"container",fn:function(){return[t("van-popover",{attrs:{trigger:"click",actions:e.actions,"get-container":"#app"},on:{select:e.onSelect},scopedSlots:e._u([{key:"reference",fn:function(){return[t("div",{staticClass:"popover-text"},[t("span",[e._v(e._s(e.situationVal))]),e._v(" "),t("i",{staticClass:"icon iconfont iconsanjiaoyou"})])]},proxy:!0}]),model:{value:e.showPopover,callback:function(t){e.showPopover=t},expression:"showPopover"}}),e._v(" "),e.infoId?t("moving-situation",{ref:"movingSituation",attrs:{"form-data":{info_id:e.infoId},parameters:e.metaData.parameters}}):e._e()]},proxy:!0}])})},[],!1,null,"409266a9",null).exports},41364:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e=a(65666),e={name:"myLeaveDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}}},components:{myLeave:e.default},data:function(){return{show:!0,value:""}},computed:{},watch:{},methods:{close:function(){var t=this;this.show=!1,this.$nextTick(function(){t.$emit("closeCallback",t.value)})}},created:function(){},mounted:function(){},destroyed:function(){}},n=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"myLeaveDialog"},[t("van-popup",{staticClass:"flex dc",staticStyle:{height:"100vh"},attrs:{position:"bottom"},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("van-nav-bar",{attrs:{"left-text":"返回",title:"请假情况"},on:{"click-left":e.close}}),e._v(" "),t("my-leave")],1)],1)},[],!1,null,null,null).exports},56158:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var e=a(90625),n=a(69601),e={name:"newMovingDialog",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}}},components:{roundPopup:e.Z,movingSituation:n.default},data:function(){return{show:!0,value:""}},computed:{},watch:{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}},methods:{},created:function(){},mounted:function(){},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("round-popup",{staticStyle:{height:"80vh"},attrs:{show:e.show,title:"流转情况",containerStyle:{padding:0}},on:{"update:show":function(t){e.show=t}},scopedSlots:e._u([{key:"container",fn:function(){return[t("moving-situation",{attrs:{"form-data":e.formData,"form-meta":e.metaData}})]},proxy:!0}])})},[],!1,null,null,null).exports},43048:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e=a(26243),s=a.n(e),o=a(25108),e={name:"opinionSxDialog",props:{listData:{type:Object,default:function(){}},formParams:{type:Object,default:function(){}}},components:{},data:function(){return{show:!0,showPopup:!1,picker:!1,message:"",inputDate:"",dataTime:"",minDate:new Date((new Date).getFullYear()-5,0,1),maxDate:new Date((new Date).getFullYear()+5,11,31),dataValue:[],itemValue:{},refresh:!0,listDatas:{}}},methods:{getData:function(){var e=this,t={limit:"999",sourceType:"16",infoId:this.formParams.pk||this.listDatas.dataValue.infoId,searchText:"",page:"1"},a=null!=(a=null==(a=dsf.config.commonForm.selectOpinion)?void 0:a.showPnodesUrl)?a:"fn/flowinfo/showPnodes";dsf.http.post(a,t).then(function(t){e.dataValue=t.data.data,o.log(e.dataValue)})},getXin:function(){this.showPopup=!0,this.inputDate="",this.message="",this.getDate(),this.inputDate=this.dataTime,this.itemValue={}},handleCancel:function(){this.show=!1,this.$emit("closeCallback",this.refresh)},showPicker:function(){},onPickerCancel:function(){this.picker=!1},onClickLeft:function(){this.showPopup=!1},onClickRight:function(){var t,e,a=this,n=this;this.formParams.selectOpinion?(e={id:n.itemValue.id,infoId:n.formParams.pk,rdate:n.inputDate,content:n.message,subList:[],moduleId:n.formParams.moduleId,pk:n.formParams.pk},t=null!=(t=null==(t=dsf.config.commonForm.selectOpinion)?void 0:t.changeOpinionUrl)?t:"fn/shareRead/toChangeOpinion",dsf.http.post(t,e).then(function(t){t=t.data;dsf.layer.toast(t.message),n.showPopup=!1})):(t={rdate:n.inputDate,pk:n.formParams.pk||n.listDatas.dataValue.infoId,content:n.message},0==s()(n.itemValue).length?dsf.http.post("fn/personalDealListProject/toChangeOpinion",t).then(function(t){o.log(t),"200"==t.data.code?(dsf.layer.toast(t.data.message),n.showPopup=!1,a.getData()):(dsf.layer.toast(t.data.message),n.showPopup=!1)}):0!=s()(n.itemValue).length&&(e={subList:[],rdate:n.inputDate,pk:n.formParams.pk||n.listDatas.dataValue.infoId,moduleId:n.itemValue.moduleId,content:n.message,infoId:n.formParams.pk||n.listDatas.dataValue.infoId,id:n.itemValue.id},dsf.http.post("fn/personalDealListProject/changeOpinion",e).then(function(t){"200"==t.data.code?(dsf.layer.toast(t.data.message),n.showPopup=!1,a.getData()):(dsf.layer.toast(t.data.message),n.showPopup=!1)})))},onConfirm:function(t){this.picker=!1,this.getDate();var e=new Date(t),a=(e=e,a=new Date,e=new Date(e),a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()&&a.getDate()===e.getDate());this.inputDate=1==a?this.dataTime:dsf.date.format(t,"yyyy-mm-dd hh:ii")},getAmend:function(t,e){this.showPopup=!0,this.getDate(),this.message=t.content,this.inputDate=this.dataTime,this.itemValue=t},getDel:function(t,e){var a=this,n=(o.log(t),{pk:this.formParams.pk||this.listDatas.dataValue.infoId,id:t.id});dsf.layer.confirm({message:"确定删除该意见吗?",title:"提示",confirmButtonText:"确定"},function(){dsf.http.post("fn/personalDealListProject/exSend",n).then(function(t){"200"==t.data.code?(dsf.layer.toast(t.data.message),a.getData()):dsf.layer.toast(t.data.message)})})},getDate:function(){this.picker=!1;var t=new Date,e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),t=String(t.getMinutes()).padStart(2,"0");this.dataTime="".concat(e,"-").concat(a,"-").concat(n," ").concat(s,":").concat(t)}},created:function(){this.listDatas=this.listData,this.getData()}},n=(0,a(51900).Z)(e,function(){var n=this,t=n._self._c;return t("div",{staticClass:"opinionSxDialog"},[t("van-popup",{style:{height:"100vh",width:"100vw"},attrs:{closeable:""},on:{close:n.handleCancel},model:{value:n.show,callback:function(t){n.show=t},expression:"show"}},[t("div",{staticClass:"box"},[n.formParams.selectOpinion?n._e():t("van-button",{staticClass:"btnbox",staticStyle:{"font-size":"13px"},attrs:{type:"primary",size:"small"},on:{click:n.getXin}},[n._v("新增批示")]),n._v(" "),n._l(n.dataValue,function(e,a){return t("div",{key:a,staticClass:"box-text"},[t("div",{staticClass:"textno"},[t("div",[n._v("环节名称:"+n._s(e.actName))]),n._v(" "),t("div",[n._v("接收:"+n._s(e.rDate))])]),n._v(" "),t("div",{staticClass:"textno"},[t("div",[n._v("处理人员:"+n._s(e.uName))]),n._v(" "),t("div",[n._v("处理:"+n._s(e.eDate))])]),n._v(" "),t("div",{staticClass:"textsan"},[t("div",[n._v("处理意见:"+n._s(e.content))])]),n._v(" "),t("div",{staticClass:"textyi"},[t("van-button",{staticClass:"btnxiu",staticStyle:{"font-size":"13px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return n.getAmend(e,a)}}},[n._v("修改意见")]),n._v(" "),n.formParams.selectOpinion?n._e():t("van-button",{staticStyle:{"font-size":"13px"},attrs:{color:"#FFA500",size:"small"},on:{click:function(t){return n.getDel(e,a)}}},[n._v("删除意见")])],1)])})],2)]),n._v(" "),t("van-popup",{style:{height:"250px",width:"90vw"},attrs:{round:""},model:{value:n.showPopup,callback:function(t){n.showPopup=t},expression:"showPopup"}},[t("van-nav-bar",{attrs:{title:"处理意见维护","left-text":"取消","right-text":"提交","left-arrow":""},on:{"click-left":n.onClickLeft,"click-right":n.onClickRight}}),n._v(" "),t("van-field",{attrs:{label:"意见时间",placeholder:"请选择日期",readonly:!0},on:{click:n.showPicker},model:{value:n.inputDate,callback:function(t){n.inputDate=t},expression:"inputDate"}}),n._v(" "),t("van-field",{attrs:{rows:"4",autosize:"",label:"填写意见",type:"textarea",placeholder:"请输入意见"},model:{value:n.message,callback:function(t){n.message=t},expression:"message"}})],1),n._v(" "),t("van-calendar",{attrs:{type:"single","min-date":n.minDate,"max-date":n.maxDate},on:{confirm:n.onConfirm},model:{value:n.picker,callback:function(t){n.picker=t},expression:"picker"}})],1)},[],!1,null,"5a196d0a",null).exports},41069:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e=a(8450),s=a.n(e),e={name:"remindersDialog",props:{formParams:{type:Object,default:{}},formData:{type:Object,default:{}}},data:function(){return{show:!0,result:[],radio:1,remindAbleUsers:[],smsContent:""}},watch:{radio:function(t){var e=this;t?this.remindAbleUsers.forEach(function(t){e.result.push(t.userId)}):this.result=[]}},methods:{close:function(){var t=this;this.show=!1,this.$nextTick(function(){t.$emit("closeCallback")})},onConfirm:function(){var a,n=this;this.result.length?(a=[],this.result.forEach(function(e){n.remindAbleUsers.forEach(function(t){e==t.userId&&a.push(t)})}),dsf.http.post("fn/proUrgent/senRemind",{remindUserList:s()(a),text:this.smsContent,infoId:this.formParams.pk}).then(function(t){t=t.data;dsf.layer.toast(t.message,!0,function(){n.show=!1})})):dsf.layer.toast("请选择催办人员!")}},created:function(){var e=this,a=dsf.layer.loading();dsf.http.post("ctrl/proUrgent/getRemindAbleUsers",{infoId:this.formParams.pk}).then(function(t){t=t.data;200==t.code?(t.data.remindAbleUsers.forEach(function(t){e.remindAbleUsers.push({uName:t.uName,userId:t.userId}),e.result.push(t.userId)}),e.smsContent="【".concat(e.formData.main.B0001.value,"】请您尽快处理。").concat(t.data.user.deptName,"-").concat(t.data.user.userName,"。"),dsf.layer.closeLoading(a)):(dsf.layer.closeLoading(a),dsf.layer.toast(t.message))})}},n=(0,a(51900).Z)(e,function(){var e=this,a=e._self._c;return a("div",{staticClass:"remindersDialog"},[a("van-popup",{attrs:{round:""},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"remindersInfo"},[a("div",{staticClass:"title"},[e._v("催办信息")]),e._v(" "),a("div",{staticClass:"content"},[a("span",{staticClass:"label"},[e._v("全选：")]),e._v(" "),a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("van-radio",{attrs:{name:1}},[e._v("是")]),e._v(" "),a("van-radio",{attrs:{name:0}},[e._v("否")])],1),e._v(" "),a("span",{staticClass:"label"},[e._v("催办人：")]),e._v(" "),a("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},e._l(e.remindAbleUsers,function(t){return a("van-checkbox",{key:t.userId,attrs:{name:t.userId}},[e._v(e._s(t.uName))])}),1),e._v(" "),a("span",{staticClass:"label"},[e._v("短信内容：")]),e._v(" "),a("p",{staticClass:"sms"},[e._v(e._s(e.smsContent))])],1),e._v(" "),a("div",{staticClass:"btn"},[a("button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),e._v(" "),a("button",{on:{click:e.onConfirm}},[e._v("确定")])])])])],1)},[],!1,null,"2d8e3248",null).exports},78033:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var e=a(77193),n={name:"shareAboutDialog",components:{},props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}}};(0,e.Z)(n,"components",{}),(0,e.Z)(n,"data",function(){return{show:!0,value:"",item:{listId:"2309091836134MQNCRnjcPYe3PMVoUE",moduleId:"191101140145m2ErRGDaBngF0SAGgFZ",params:{pk:this.metaData.parameters.pk,notLink:!0,order:this.$parent.$parent.nowButtonParameters.orderType}}}}),(0,e.Z)(n,"mounted",function(){}),(0,e.Z)(n,"beforeCreate",function(){this.$options.components.DefaultList=a(14355).default}),(0,e.Z)(n,"watch",{show:function(t,e){var a=this;t||this.$nextTick(function(){a.$emit("closeCallback",a.value)})}}),(0,e.Z)(n,"methods",{}),(0,e.Z)(n,"created",function(){}),(0,e.Z)(n,"destroyed",function(){});var e=n,s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("van-popup",{staticClass:"flex dc",style:{height:"100%",background:"#f8f8f8"},attrs:{position:"bottom","get-container":"#app"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("van-nav-bar",{attrs:{title:"分阅情况"},on:{"click-left":function(t){e.show=!1}},scopedSlots:e._u([{key:"left",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}}),e._v(" "),t("span",[e._v("返回")])]},proxy:!0}])}),e._v(" "),t("div",{staticStyle:{flex:"1",overflow:"auto"}},[t("default-list",{attrs:{params:e.item,"oppset-top":0}})],1)],1)},[],!1,null,"02495f43",null).exports},870:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var e=a(8450),n=a.n(e),e=a(27921),r=a.n(e),e=a(85579),c=a.n(e),e=a(22013),l=a.n(e),o=a(25108);function i(t,e){var a,n,s,o,i=void 0!==c()&&t[l()]||t["@@iterator"];if(i)return n=!(a=!0),{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){n=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(n)throw s}}};if(Array.isArray(t)||(i=function(t,e){var a;if(t)return"string"==typeof t?u(t,e):"Map"===(a="Object"===(a=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:a)||"Set"===a?r()(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(t,e):void 0}(t))||e&&t&&"number"==typeof t.length)return i&&(t=i),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var e={name:"shareTopicMemo",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{radio:"",show0:!0,personData:"",textVal:"",list:[]}},computed:{},watch:{formParams:function(t){o.log(t)}},methods:{close:function(){this.show0=!0,o.log("关闭",this.show0),this.$emit("closeCallback","")},submit:function(){var t=this;if(o.log("qqqwe",t.$route.query),t.radio){var e=encodeURI(t.radio.name),a="".concat(dsf.url.getRootPath(),"/ctrl/sdtongSSO/loginMeeting?toUrl=")+dsf.base64.encode("/meetingPreview?method=onlyPre&infoId=".concat(t.formParams.pk,"&moduleId=").concat(t.metaData.parameters.moduleId,"&nodeId=-1&flowId=0&fileId=").concat(t.radio.id,"&fileName=").concat(e)),a="".concat(dsf.config.meetingConfig.sdtServerUrl,"portal/custom_qywx.html?host=").concat(encodeURIComponent(a))+"&response_type=code&scope=snsapi_base&agentid=".concat(dsf.config.meetingConfig.agentId,"&state=STATE#wechat_redirect");o.log("/meetingPreview?method=onlyPre&infoId=".concat(t.formParams.pk,"&moduleId=").concat(t.metaData.parameters.moduleId,"&nodeId=-1&flowId=0&fileId=").concat(t.radio.id,"&fileName=").concat(e)),o.log("url",a),o.log("title",t.list,t.radio);try{wx.invoke("shareAppMessage",{title:t.radio.name,desc:"预览文件内容",link:a,imgUrl:""},function(t){o.log("shareAppMessage-res",t),t.err_msg})}catch(t){o.log("shareAppMessage-err",t),dsf.layer.toast("请在山东通app中操作",!1)}o.log(t.radio),t.close()}else n()(),dsf.layer.toast("请选择",!1)},cancel:function(){this.show0=!1,this.$emit("closeCallback","")},beforeClose:function(t,e){return e(!1)},init:function(){var t,e=this;for(t in o.log("formData",e.formData),o.log("metaData",e.metaData),o.log("formParams",e.formParams),e.formData.attach){var a,n=i(e.formData.attach[t]);try{for(n.s();!(a=n.n()).done;){var s=a.value;e.list.push({name:s.fileName,id:s.id,file:s})}}catch(t){n.e(t)}finally{n.f()}}}},created:function(){this.init()},mounted:function(){},destroyed:function(){}},s=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return a.show0?n("div",{staticClass:"meet-Entrust"},[n("div",{staticClass:"content"},[a._m(0),a._v(" "),n("div",{staticClass:"main"},[n("van-radio-group",{model:{value:a.radio,callback:function(t){a.radio=t},expression:"radio"}},a._l(a.list,function(t,e){return n("van-radio",{key:e,attrs:{name:t}},[a._v(a._s(t.name))])}),1)],1),a._v(" "),n("div",{staticClass:"btn"},[n("van-button",{attrs:{type:"default"},on:{click:a.cancel}},[a._v("取消")]),a._v(" "),n("van-button",{attrs:{type:"default"},on:{click:a.submit}},[a._v("确定")])],1)])]):a._e()},[function(){var t=this._self._c;return t("div",{staticClass:"com-title"},[t("span",[this._v("请选择")])])}],!1,null,"c588505a",null).exports},25652:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var n=a(25108),e={name:"sxCopyOpinion",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},created:function(){this.showWeaver=this.formParams.showWeaver},data:function(){return{show:!0,value:"",showWeaver:!1,obj:{}}},methods:{closepage:function(t){this.obj={value:this.value,actionName:t},this.show=!1},close:function(t){var e=this;n.log("close"),this.show=!1,this.$nextTick(function(){e.$emit("closeCallback",e.obj)})}}},s=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sxCopyOpinion"},[t("van-popup",{style:{height:"50%"},attrs:{round:"",position:"bottom"},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{staticClass:"pop"},[t("van-nav-bar",{attrs:{title:e.showWeaver?"退回原因":"抄送意见"}}),e._v(" "),t("van-field",{attrs:{rows:"4",type:"textarea",placeholder:"请输入意见"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),t("div",{staticClass:"btn"},[t("van-button",{on:{click:function(t){return e.closepage("取消")}}},[e._v("取消")]),e._v(" "),t("van-button",{on:{click:function(t){return e.closepage("确定")}}},[e._v(e._s(e.showWeaver?"确定":"下一步"))])],1)],1)])],1)},[],!1,null,"dd7304c2",null).exports},24593:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e={name:"sxForwardSign",props:["formParams"],data:function(){return{show:!0,forwardSign:[]}},methods:{close:function(){var t=this;this.show=!1,this.$nextTick(function(){t.$emit("closeCallback","")})},convert:function(t){var e=this;t.convertLdpsInfoId?e.$router.replace({path:"/commonForm/231021182454DIvMsj0WRzJIVVswcJh/".concat(t.convertLdpsInfoId)}):dsf.layer.confirm({message:"是否确定转为领导批示？",confirmButtonText:"确认"},function(){dsf.http.post("fn/convert/moduleConvert",{sourceModule:e.formParams.moduleId,targetModule:"231021182454DIvMsj0WRzJIVVswcJh",srcInfo:e.formParams.pk,fwPnid:t.pNId}).then(function(t){200==t.data.code?(e.show=!1,e.$nextTick(function(){e.$emit("closeCallback",""),dsf.layer.toast("已成功转为领导批示！")})):dsf.layer.toast("类别转换失败！")})})}},created:function(){this.forwardSign=this.formParams.forwardSign}},n=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return n("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},on:{close:a.close},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[n("van-nav-bar",{attrs:{title:"领导批示","left-text":"返回","left-arrow":""},on:{"click-left":a.close}}),a._v(" "),a._l(a.forwardSign,function(e,t){return n("div",{key:t,staticClass:"sxForwardSign"},[n("span",{staticClass:"elps content"},[a._v(a._s(e.content))]),a._v(" "),n("div",{staticClass:"mUName"},[n("span",[a._v(a._s(e.mUName)+"   "+a._s(e.eDate))]),a._v(" "),n("button",{style:{color:e.convertLdpsInfoId?"blue":"red"},on:{click:function(t){return a.convert(e)}}},[a._v(" "+a._s(e.convertLdpsInfoId?"已转":"转领导批示")+"\n      ")])])])})],2)},[],!1,null,"e164cc84",null).exports},89509:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var e=a(8450),n=a.n(e),s=a(25108),e={name:"sxSuperRecycle",props:{metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},data:function(){return{show:!0,superRecycleData:{},checkItem:{},isSuperRecycle:!0,checkArray:[]}},created:function(){var e=this;null!=this.formParams.isSuperRecycle&&(this.isSuperRecycle=this.formParams.isSuperRecycle),this.superRecycleData=JSON.parse(n()(this.formParams.superRecycleData)),this.superRecycleData.forEach(function(t){e.$set(t,"chcek",!1)})},methods:{close:function(){this.show=!1},closePage:function(){var e,a=this;this.isSuperRecycle?this.checkItem&&"{}"==n()(this.checkItem)?dsf.layer.toast("请选择强制回收节点！",!1):dsf.layer.confirm({message:"<div style='font-size: 18px;'>是否确定强制回收节点？</div>",confirmButtonText:"确认"},function(){var t={CallBackCurLinkID:a.checkItem.ID,CurLinkID:a.checkItem.PNID,TPID:a.checkItem.PID,actName:a.checkItem.ACTNAME,issuper:a.formParams.issuper||1,nodeUid:a.checkItem.UID,nodeWFNODEID:a.checkItem.WFNODEID,pk:"2312171958250s5zy26CyqHp8vjdjV7",modulId:"231020165620H7JZqLZ4XVsPlTlrpgi",APPName:"DreamWeb",version:2};s.log(t),$.ajax({type:"post",async:!1,url:dsf.url.getRootPath()+"fn/flow/rollbackFlow",data:n()(t),dataType:"json",contentType:"application/json",success:function(t){"success"==t.type?dsf.layer.toast("强制回收成功！",function(){a.close(),setTimeout(function(){a.$emit("backSucces"),a.$emit("closeCallback","")},500)}):dsf.layer.toast("强制回收失败！",!1)}})}):(e=[],this.checkArray.forEach(function(t){t={pk:t.infoId,flowId:t.wfId,pId:t.pId,pnId:t.pNId,fPnId:t.fId,bt:t.bt,userId:t.userId,nodeName:t.actName};e.push(t)}),dsf.http.post("ctrl/flow/batchRecycle",{data:n()(e)}).then(function(t){t=t.data;"success"==t.type?dsf.layer.toast("回收成功",!0,function(){a.close(),setTimeout(function(){a.$emit("backSucces"),a.$emit("closeCallback","")},500)}):dsf.layer.toast(t.message)}))},changeNode:function(t,e){var a=t.chcek;a?this.checkItem={}:(this.superRecycleData.forEach(function(t){return t.chcek=!1}),this.checkItem=t),this.superRecycleData[e].chcek=!a},changeNode1:function(e,t){var a,n=e.chcek;n?(a=this.checkArray.findIndex(function(t){return t.id==e.id}),this.checkArray.splice(a,1)):this.checkArray.push(e),this.superRecycleData[t].chcek=!n}}},o=(0,a(51900).Z)(e,function(){var n=this,t=n._self._c;return t("div",[t("van-popup",{style:{height:"100vh"},attrs:{position:"bottom"},on:{close:n.close},model:{value:n.show,callback:function(t){n.show=t},expression:"show"}},[t("div",{staticClass:"sxSuperRecycle"},[t("van-nav-bar",{attrs:{title:"请选择强制回收节点",fixed:!0,"left-text":"返回","left-arrow":""},on:{"click-left":n.close}}),n._v(" "),n.isSuperRecycle?t("div",{staticClass:"nodeBox"},n._l(n.superRecycleData,function(e,a){return t("div",{key:a,staticClass:"nodeCard",on:{click:function(t){return n.changeNode(e,a)}}},[t("span",{staticClass:"changeStatu",style:{"background-color":e.chcek?"var(--normal)":"#fff"}}),n._v(" "),t("div",{staticClass:"nodeBText"},[t("span",[n._v("节点名称：")]),t("span",[n._v(n._s(e.ACTNAME))])]),n._v(" "),t("div",{staticClass:"nodeBText"},[t("span",[n._v("处理人：")]),t("span",[n._v(n._s(e.UNAME))])]),n._v(" "),t("div",{staticClass:"nodeBText"},[t("span",[n._v("处理时间：")]),t("span",[n._v(n._s(e.EDATE))])])])}),0):t("div",{staticClass:"nodeBox"},n._l(n.superRecycleData,function(e,a){return t("div",{key:a,staticClass:"nodeCard",on:{click:function(t){return n.changeNode1(e,a)}}},[t("span",{staticClass:"changeStatu",style:{"background-color":e.chcek?"var(--normal)":"#fff"}}),n._v(" "),t("div",{staticClass:"nodeBText"},[t("span",[n._v("接受人：")]),t("span",[n._v(n._s(e.uName))])]),n._v(" "),t("div",{staticClass:"nodeBText"},[t("span",[n._v("接受部门：")]),t("span",[n._v(n._s(e.deptName))])])])}),0),n._v(" "),t("div",{staticClass:"btnBox"},[t("van-button",{on:{click:n.close}},[n._v("取消")]),n._v(" "),t("van-button",{on:{click:n.closePage}},[n._v(n._s(n.isSuperRecycle?"强制回收":"确定"))])],1)],1)])],1)},[],!1,null,"fec01b04",null).exports},62967:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e={name:"testDialog1",props:{formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:{}},formParams:{type:Object,default:{}}},components:{},data:function(){return{show:!0,value:""}},computed:{},watch:{},methods:{close:function(){this.show=!1,this.$emit("closeCallback",this.value)}},created:function(){},mounted:function(){},destroyed:function(){}},n=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"testDialog1"},[t("van-popup",{style:{height:"100%"},attrs:{closeable:"",position:"bottom"},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("van-cell-group",[t("van-field",{attrs:{label:"文本",placeholder:"请输入用户名"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1)],1)},[],!1,null,null,null).exports},33573:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e={name:"testDialog2",components:{},data:function(){return{show:!1}},computed:{},watch:{},methods:{close:function(){this.show=!1}},created:function(){},mounted:function(){},destroyed:function(){}},n=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"testDialog1"},[t("van-popup",{attrs:{position:"bottom"},on:{close:e.close},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},[],!1,null,null,null).exports},40005:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return o}});var n=a(90541),s=a(25108),e={props:{value:{type:String,default:""},editable:{type:Boolean,default:!1},formData:{type:Object}},data:function(){return{showName:!0,val:["川","","","","","",""],Nem:this.formData,but:"",activeIndex:this.editable?0:void 0}},watch:{activeIndex:function(){this.$emit("activeChange",this.activeIndex)},val:function(t){this.$emit("input",this.val.join(""))}},mounted:function(){this.but=this.Nem.main.B0001.value.split(""),0!=this.but.length&&6<this.but.length&&(this.val=this.but)},methods:{getJy:function(){s.log("我点击了新"),7==this.val.length?this.val.push(""):8==this.val.length&&this.val.pop("")},handleClickItem:function(t){this.editable&&(this.activeIndex=t)},setValue:function(t){this.$set(this.val,this.activeIndex,t),this.activeIndex<7&&(this.activeIndex+=1)},del:function(){this.$set(this.val,this.activeIndex,""),0<this.activeIndex&&--this.activeIndex}}},a=a(51900),e={name:"vehicleDialog",components:{"Input-box":(0,a.Z)(e,function(){var a=this,n=a._self._c;return n("div",[n("div",{staticClass:"vnp-input-box"},[n("ul",a._l(a.val,function(t,e){return n("li",{key:e,class:{active:a.activeIndex===e},on:{click:function(t){return a.handleClickItem(e)}}},[n("span",[a._v(a._s(t))])])}),0)]),a._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:a.showName,expression:"showName"}],staticClass:"spans",on:{click:a.getJy}},[a._v("新能源")])])},[],!1,null,"53133c4e",null).exports},props:{show:{type:Boolean,default:!1},value:{type:String,default:""},formData:{typeof:Object}},data:function(){return{val:this.value,type:"cn",cn:[["京","津","沪","渝","冀","豫","云","辽","黑","湘"],["皖","鲁","新","苏","浙","赣","鄂","桂","甘","晋"],["蒙","陕","吉","闽","贵","粤","青","藏","川","宁"],["type","琼","","","","","","","del"]],en:[["1","2","3","4","5","6","7","8","9","0"],["Q","W","E","R","T","Y","U","O","P"],["A","S","D","F","G","H","J","K","L"],["type","Z","X","C","V","B","N","M","del"]],vv:this.formData}},created:function(){},mounted:function(){},computed:{list:function(){return"en"===this.type?this.en:this.cn}},watch:{show:function(){this.show&&(this.val=this.value)},val:function(t,e){this.val=t,this.$emit("input",this.val)}},methods:{handleChangeType:function(){this.type="en"===this.type?"cn":"en"},handleClickKey:function(t){t&&this.$refs.inputBox.setValue(t)},handleActiveChange:function(t){this.type=0===t?"cn":"en"},handleDel:function(){this.$refs.inputBox.del()}}},e=(0,a.Z)(e,function(){var a=this,n=a._self._c;return n("div",[n("div",{staticClass:"flexbox"},[n("div",{staticClass:"vnp-input-box-outer"},[n("Input-box",{ref:"inputBox",attrs:{"form-data":a.formData,editable:""},on:{activeChange:a.handleActiveChange},model:{value:a.val,callback:function(t){a.val=t},expression:"val"}})],1)]),a._v(" "),n("div",{staticClass:"vnp-keys"},a._l(a.list,function(t,e){return n("div",{key:e,staticClass:"vnp-keys-row"},a._l(t,function(e,t){return n("div",{key:t,staticClass:"vnp-btn-key-wrapper",class:{"vnp-del-wrapper":"del"===e,"vnp-type-wrapper":"type"===e}},["type"===e?n("van-button",{staticClass:"vnp-btn-key",on:{click:a.handleChangeType}},["cn"===a.type?n("span",[a._v("中/"),n("span",{staticClass:"vnp-smaller"},[a._v("英")])]):n("span",[n("span",{staticClass:"vnp-smaller"},[a._v("中")]),a._v("/英")])]):"del"===e?n("van-button",{staticClass:"vnp-btn-key",on:{click:a.handleDel}},[n("svg",{staticClass:"vnp-delete-icon",attrs:{viewBox:"0 0 32 22",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M28.016 0A3.991 3.991 0 0132 3.987v14.026c0 2.2-1.787 3.987-3.98 3.987H10.382c-.509 0-.996-.206-1.374-.585L.89 13.09C.33 12.62 0 11.84 0 11.006c0-.86.325-1.62.887-2.08L9.01.585A1.936 1.936 0 0110.383 0zm0 1.947H10.368L2.24 10.28c-.224.226-.312.432-.312.73 0 .287.094.51.312.729l8.128 8.333h17.648a2.041 2.041 0 002.037-2.04V3.987c0-1.127-.915-2.04-2.037-2.04zM23.028 6a.96.96 0 01.678.292.95.95 0 01-.003 1.377l-3.342 3.348 3.326 3.333c.189.188.292.43.292.679 0 .248-.103.49-.292.679a.96.96 0 01-.678.292.959.959 0 01-.677-.292L18.99 12.36l-3.343 3.345a.96.96 0 01-.677.292.96.96 0 01-.678-.292.962.962 0 01-.292-.68c0-.248.104-.49.292-.679l3.342-3.348-3.342-3.348A.963.963 0 0114 6.971c0-.248.104-.49.292-.679A.96.96 0 0114.97 6a.96.96 0 01.677.292l3.358 3.348 3.345-3.348A.96.96 0 0123.028 6z",fill:"currentColor"}})])]):n("van-button",{staticClass:"vnp-btn-key",class:{"vnp-btn-empty":!e},on:{click:function(t){return a.handleClickKey(e)}}},[a._v("\n          "+a._s(e)+"\n        ")])],1)}),0)}),0)])},[],!1,null,"59922573",null).exports,o=(0,a.Z)({name:"vehicleDialog",props:["formData"],components:{"Key-box":e},data:function(){return{shows:!0,NebValue:"川",newValue:"",Nems:this.formData,oldValue:""}},created:function(){},mounted:function(){},computed:{},watch:{NebValue:function(t){this.newValue=t}},methods:{close:function(){6<this.newValue.length?this.$emit("closeCallback",this.Nems.main.B0001.value):this.$emit("closeCallback","")},closes:function(){this.shows=!1},finish:function(){var t=this.newValue.charAt(0),e=this.newValue.charAt(1);/[\u4E00-\u9FA5]/g.test(t)&&/^[A-Z]+$/.test(e)&&6<this.newValue.length?(this.shows=!1,this.$emit("closeCallback",String(this.newValue))):(this.shows=!0,n.Z.layer.toast("请输入正确车牌"))}}},function(){var e=this,t=e._self._c;return t("div",{staticClass:"vehicleDialog"},[t("van-popup",{attrs:{round:"",position:"bottom"},on:{close:e.close},model:{value:e.shows,callback:function(t){e.shows=t},expression:"shows"}},[t("van-nav-bar",{attrs:{"left-text":"取消","right-text":"完成"},on:{"click-left":e.closes,"click-right":e.finish}}),e._v(" "),t("Key-box",{attrs:{"form-data":e.formData},model:{value:e.NebValue,callback:function(t){e.NebValue=t},expression:"NebValue"}})],1)],1)},[],!1,null,"2a99e8b6",null).exports},5951:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return s}});var n=a(25108),e={name:"voteBallot",props:["topicId","meetingId"],data:function(){return{voteOption:{},checkData:[],voteMode:"",voteMinNum:"",voteMaxNum:"",show:!0,pk:this.topicId||this.$route.params.pk}},created:function(){var t=this;this.$nextTick(function(){t.getYtAndOption()})},watch:{"voteOption.optionList":{handler:function(t){var e=this;this.checkData=[],n.log(t),t.forEach(function(t){t.checked&&e.checkData.push(t)})},deep:!0}},methods:{getYtAndOption:function(){var a=this;dsf.http.post("fn/meetingVote/getYtAndOption",{topicId:this.pk}).done(function(t){"200"==t.code?(a.voteOption=t.data,a.voteMode=t.data.voteMode,a.voteMaxNum=t.data.voteMaxNum,a.voteMinNum=t.data.voteMinNum,a.voteOption.optionList.forEach(function(t,e){0==e?a.$set(t,"checked",!0):a.$set(t,"checked",!1)})):dsf.layer.toast(t.message)})},activeOption:function(t,e){var a=this;n.log(this.checkData),"-1"==this.voteMode?(this.voteOption.optionList.forEach(function(t){a.$set(t,"checked",!1)}),this.$set(t,"checked",!t.checked)):this.checkData.length!=this.voteMaxNum||t.checked?this.$set(t,"checked",!t.checked):dsf.layer.toast("最多可投"+this.voteMaxNum+"票")},submitOption:function(){var a,t,e=this;this.voteMinNum>this.checkData.length&&"1"==this.voteMode?dsf.layer.toast("最少需投"+this.voteMinNum+"票"):(a="",this.checkData.forEach(function(t,e){a+=0==e?t.id:","+t.id}),t=this.meetingId||this.$route.query.meetingId,dsf.http.post("fn/meetingVote/vote",{topicId:this.pk,optionId:a,meetingId:t}).done(function(t){t.code,dsf.layer.toast(t.message),e.close()}))},close:function(){this.show=!1,this.$emit("closeCallback","")}}},s=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return n("div",[n("van-popup",{staticClass:"voteBallot",attrs:{closeable:""},on:{close:a.close},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[n("van-sticky",[n("van-nav-bar",{attrs:{title:"议题表决"}})],1),a._v(" "),n("div",{staticClass:"voteResult"},[n("div",{staticClass:"vote"},[n("div",{staticClass:"subtitle"},[a._v("\n              关于"+a._s(a.voteOption.bt)+"的表决\n          ")]),a._v(" "),n("div",{staticClass:"subtitle subtitle1"},[a._v("\n              "+a._s("-1"==a.voteMode?"单选":"1"==a.voteMinNum?"多选，最多投"+a.voteMaxNum+"票":"多选，最少投"+a.voteMinNum+"票，最多投"+a.voteMaxNum+"票")+"\n          ")]),a._v(" "),n("div",{staticClass:"options"},a._l(a.voteOption.optionList,function(e,t){return n("span",{key:t,class:{active:e.checked},on:{click:function(t){return a.activeOption(e)}}},[a._v(a._s(e.optionValue)+"："+a._s(e.bt))])}),0),a._v(" "),n("van-button",{attrs:{type:"info",size:"small",color:"#3478F7"},on:{click:a.submitOption}},[a._v("提交")])],1)])],1)],1)},[],!1,null,"5082aba9",null).exports},93121:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return n}});var e={name:"voteResult",data:function(){return{voteResult:{},show:!0}},created:function(){this.getVoteResults()},methods:{getVoteResults:function(){var e=this;dsf.http.post("fn/meetingVote/getVoteResults",{topicId:this.$route.params.pk}).done(function(t){"200"==t.code?e.voteResult=t.data:dsf.layer.toast(t.message)})},close:function(){this.show=!1,this.$emit("closeCallback","")}}},n=(0,a(51900).Z)(e,function(){var a=this,n=a._self._c;return n("div",[n("van-popup",{staticClass:"voteResults",attrs:{closeable:""},on:{close:a.close},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[n("van-sticky",[n("van-nav-bar",{attrs:{title:"表决结果"}})],1),a._v(" "),n("div",{staticClass:"voteResult"},[n("div",{staticClass:"vote"},[n("p",{staticClass:"title"},[a._v("\n                关于"+a._s(a.voteResult.bt)+"的表决结果\n            ")]),a._v(" "),n("div",{staticClass:"percent"},a._l(a.voteResult.optionList,function(t,e){return n("div",{key:e},[n("span",{staticClass:"item"},[a._v(a._s(t.optionValueText))]),a._v(" "),n("div",{staticClass:"perc"},[n("p",[n("span",{style:{width:t.proportionStr}})]),a._v(" "),n("span",[a._v(a._s(t.proportionStr))])])])}),0)])])],1)],1)},[],!1,null,"2c2e4a35",null).exports},68195:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return r}});var n=a(77193),e=a(73473),s=a.n(e),o=a(54397),i=a(25108),e={name:"xizangMeet",props:{formData:{type:Object,default:function(){return{}}}},data:function(){var t={showPop:!0,meetingData:{},number:"",pd:"",title:"",checked:!1,checked1:!1};return(0,n.Z)(t,"title","加入会议"),(0,n.Z)(t,"confirmCallBack",function(){}),t},created:function(){this.formData.main["220613110549pDrUr42ZRZKnbEjEiUv"].value.length?this.show({number:this.formData.main["220613110549pDrUr42ZRZKnbEjEiUv"].value,pd:this.formData.main["2206131108027l3bKEiL5QBDwg1xWnZ"].value,bt:this.formData.main.B0001.value}).then(function(t){i.log(t);t={meetingNum:t.number,password:t.pd,micMute:t.checked,videoMute:t.checked1,title:t.bt};i.log(t),(0,o.b)(t)}):dsf.layer.toast("当前会议暂时无法加入",!1)},computed:{isShowPd:function(){return this.meetingData.pd&&0<this.meetingData.pd.length},checkComfirm:function(){var t=!0;return t=this.number.length?0<this.meetingData.pd.length&&!this.pd.length:t}},methods:{close:function(){this.show=!1,this.$emit("closeCallback","")},confirm:function(){this.pd!=this.meetingData.pd?dsf.layer.toast("密码输入不正确，请重新输入！"):(this.confirmCallBack({number:this.number,pd:this.pd,checked:!this.checked,checked1:!this.checked1,bt:this.meetingData.bt}),this.close())},show:function(t){var e=this;return this.meetingData=t,this.number=this.meetingData.number,new(s())(function(t){e.confirmCallBack=t})}}},r=(0,a(51900).Z)(e,function(){var e=this,t=e._self._c;return t("div",{staticClass:"ds-user-dialog"},[t("van-popup",{style:{height:e.isShowPd?"6.15rem":"5.46rem",width:"90%","border-radius":"5px"},on:{close:e.close},model:{value:e.showPop,callback:function(t){e.showPop=t},expression:"showPop"}},[t("div",{staticClass:"__user_box"},[t("div",{staticClass:"__user_box-header"},[t("div",{staticClass:"__title"},[e._v(e._s(e.title))])]),e._v(" "),t("div",{staticClass:"__user_box-body"},[t("div",{staticClass:"box"},[t("van-field",{attrs:{label:"会议室号：","label-align":"right",type:"number",placeholder:"请输入会议室号"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),e._v(" "),e.isShowPd?t("van-field",{attrs:{label:"密　　码：","label-align":"right",type:"number",placeholder:"请输入密码"},model:{value:e.pd,callback:function(t){e.pd=t},expression:"pd"}}):e._e()],1),e._v(" "),t("div",{staticStyle:{"margin-top":"10px"}},[t("div",{staticClass:"box"},[t("div",{staticClass:"p"},[t("span",[e._v("开启麦克风")]),e._v(" "),t("van-switch",{attrs:{size:"20px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),e._v(" "),t("div",{staticClass:"p"},[t("span",{staticClass:"justify"},[e._v("开启视频")]),e._v(" "),t("van-switch",{attrs:{size:"20px"},model:{value:e.checked1,callback:function(t){e.checked1=t},expression:"checked1"}})],1)])])]),e._v(" "),t("div",{staticClass:"__user_box-footer"},[t("van-button",{attrs:{type:"default"},on:{click:function(t){return e.close()}}},[e._v("取消")]),e._v(" "),t("van-button",{attrs:{type:"primary",disabled:e.checkComfirm},on:{click:e.confirm}},[e._v("确定")])],1)])])],1)},[],!1,null,"534b65d4",null).exports},40954:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var e=n(70538),a={install:function(e){var a=n(7365);a.keys().forEach(function(t){t=a(t);e.component(t.default.name,t.default)})}},s=n(25108);e.default.use(a);var e={name:"commonDialog",components:{},props:{nowButtonParameters:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}},metaData:{type:Object,default:function(){return{}}},formParams:{type:Object,default:function(){return{}}},componentName:{type:String},isFromList:{type:Boolean,default:!1},listData:{type:Object},extra:{type:Object}},data:function(){return{}},computed:{},watch:{formParams:function(t){s.log(t)}},methods:{closeCallback:function(t){this.$emit("closeCallback",t,this.componentName)},showTree:function(t){this.$emit("showTree",t)},backSucces:function(){this.$emit("backSucces")},refreshList:function(){this.$emit("refreshList")}},created:function(){},mounted:function(){},destroyed:function(){}},o=(0,n(51900).Z)(e,function(){var t=this;return(0,t._self._c)(t.componentName,{ref:"ChildLog",tag:"commponent",attrs:{componentName:t.componentName,"form-data":t.formData,"meta-data":t.metaData,"form-params":t.formParams,"is-from-list":t.isFromList,"list-data":t.listData,extra:t.extra},on:{closeCallback:t.closeCallback,showTree:t.showTree,backSucces:t.backSucces,refreshList:t.refreshList}})},[],!1,null,null,null).exports},69601:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return r}});var e=a(26243),s=a.n(e),e=a(90625),n=a(42152),o=a.n(n),i=a(7739),n={props:["formData","formMeta"],components:{roundPopup:e.Z},filters:{filterName:function(t){return t.slice(t.length-2)},receivers:function(t){return t?t.map(function(t){return t.userName}).join(","):""}},data:function(){return{showAll:!0,list:[],myInfo:dsf.util.loadSessionStore("user"),isShowFlowMonitor:!1,isShowFlowChart:!1,flowChartUrl:"",monitorLoading:!0,nodeGroups:[],monitorTabs:[{num:0,title:"总人数",active:!0,color:"#0091FF",searchDataStatus:""},{num:0,title:"已提交",active:!1,color:"#00D046",searchDataStatus:1},{num:0,title:"未提交",active:!1,color:"#9500FF",searchDataStatus:2},{num:0,title:"已查看",active:!1,color:"#00C1FF",searchDataStatus:3},{num:0,title:"未查看",active:!1,color:"#F13838",searchDataStatus:4}],btnCopy:null}},created:function(){this.getFlow()},methods:{cuiban:function(){},handleClick:function(t){var e,a;t.target.classList.contains("copyel")&&(e=$(t.target).attr("data-text"),a=$(t.target).attr("id"),(a=new(o())("."+a,{text:function(){return e}})).on("success",function(t){dsf.layer.toast("复制成功")}),a.on("error",function(t){dsf.layer.toast("复制失败")}),a.onClick(t))},getFlow:function(){var a=this;dsf.flow.getWorkFlowNodes({param:{infoId:this.formMeta.parameters.pk,sort:"eDate",order:"desc"},thenFun:function(t,e){a.list=e.passedNodes||[],a.list.forEach(function(t,e){t.content&&dsf.config.commonFlow.showCopyOpinionBtn&&a.$set(t,"content",t.content+"<a class='copyel copyel_".concat(e,"' id='copyel_").concat(e,"'  data-text='").concat(t.content,"'\">复制意见</a>"))})}})},showFlowMonitor:function(){this.isShowFlowMonitor=!0,this.getMonitorTabsNum(),this.getMonitorList()},getMonitorTabsNum:function(){var t=this;this.monitorLoading=!0,dsf.http.post("fn/flowinfo/showPnodesStatus",{sourceType:16,infoId:this.formMeta.parameters.pk}).then(function(a){t.monitorLoading=!1,t.monitorTabs.forEach(function(t,e){t.num=a.data["total".concat(e)]})})},getMonitorList:function(t){var n=this;dsf.http.post("fn/flowinfo/showPnodes",{sourceType:16,noOptionList:1,infoId:this.formMeta.parameters.pk,page:1,limit:999,searchDataStatus:t||""}).then(function(a){var t=a.data.data.map(function(e){var t;return e.showName=2==e.nodeType?e.sender:e.actName&&e.mUName?e.mUName:e.uName,e.showDeptName=2==e.nodeType?e.fOrgNameLv3||e.fOrgNameLv2||e.fOrgNameLv1:e.orgNameLv5||e.orgNameLv4||e.orgNameLv3||e.orgNameLv2||e.orgNameLv1,e.sex=2==e.nodeType?null==(t=a.data.data.find(function(t){return t.id==e.fId}))?void 0:t.sex:e.sex,e}),e=i(t.reverse(),function(t){return t.wfNodeCaption});n.nodeGroups=s()(e).map(function(t){return{node:t,num:e[t].length,list:e[t]}})})},clickMonitorTab:function(t){this.monitorTabs.forEach(function(t){return t.active=!1}),t.active=!0,this.getMonitorList(t.searchDataStatus)},showFlowChart:function(){var t,a=this;dsf.http.post("fn/flow/getShowFlow",{flowId:(null==(t=this.formData.main.A0006)?void 0:t.value)||"",tpId:(null==(t=this.formData.main.A0007)?void 0:t.value)||"",pk:this.formMeta.parameters.pk,moduleId:this.formMeta.parameters.moduleId}).then(function(t){var e;t.data.data&&(e=(t=t.data.data).flowUrl+"/admin_client/workflow/views/flow_index_workinfo_mobile.html?id="+t.flowId+"&tpid="+(null==(e=a.formData.main.A0007)?void 0:e.value)+"&mtpid="+(null==(e=a.formData.main.A0007)?void 0:e.value)+"&sAPPName="+t.appName+"&sAPPID="+t.appId+"&sUnitID="+t.unitId+"&sModuleID=&sName="+encodeURIComponent(t.flowName),t.showStages&&(e+="&showStages="+t.showStages),t.startPnId&&(e+="&startPnId="+t.startPnId),a.flowChartUrl=e,"browser"==dsf.util.getClientName()?a.isShowFlowChart=!0:dsf.util.openWebviewToUrl({url:a.flowChartUrl,title:"流程图"}))})}}},r=(0,a(51900).Z)(n,function(){var a=this,n=a._self._c;return n("div",{staticClass:"container"},[n("div",{staticClass:"tabs"},[n("div",{staticClass:"left"},[n("span",{class:{active:a.showAll},on:{click:function(t){a.showAll=!0}}},[a._v("全部")]),a._v(" "),n("span",{class:{active:!a.showAll},on:{click:function(t){a.showAll=!1}}},[a._v("与我相关")])]),a._v(" "),n("div",{staticClass:"right"},[n("span",{staticClass:"tag",on:{click:a.showFlowMonitor}},[a._v("流转监控")]),a._v(" "),n("span",{staticClass:"tag",on:{click:a.showFlowChart}},[a._v("流程图")])])]),a._v(" "),n("div",{staticClass:"list-wrap"},a._l(a.list,function(t){return n("div",{directives:[{name:"show",rawName:"v-show",value:a.showAll||t.userName==a.myInfo.name||t.receivers&&t.receivers.find(function(t){return t.userName==a.myInfo.name}),expression:"showAll || item.userName == myInfo.name || (item.receivers && item.receivers.find(it => it.userName == myInfo.name))"}],staticClass:"list-item"},[t.userName||t.deptName?n("div",{staticClass:"flex ac top"},[n("div",{staticClass:"avatar",style:{backgroundColor:2==t.sex?"#EE7DB7":"#0087ED"}},[a._v(a._s(a._f("filterName")(t.userName)))]),a._v(" "),n("div",[n("p",{staticStyle:{color:"var(--normal)"}},[a._v(a._s(t.userName))]),a._v(" "),n("p",{staticClass:"gray-font"},[a._v(a._s(t.deptName))])])]):a._e(),a._v(" "),n("div",{staticClass:"content",domProps:{innerHTML:a._s(t.content)},on:{click:a.handleClick}}),a._v(" "),t.hasHandWriteImg&&t.hasHandWrite?n("div",{staticClass:"content"},[n("img",{staticStyle:{width:"150px"},attrs:{src:a.dsf.url.getWebPath(t.hasHandWriteImg),alt:""}})]):a._e(),a._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.eDate||t.nodeName,expression:"item.eDate || item.nodeName"}],staticClass:"gray-font"},[a._v(a._s(t.eDate)+" ["+a._s(t.nodeName)+"]")]),a._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.receivers,expression:"item.receivers"}],staticClass:"gray-font"},[a._v("接收人："+a._s(a._f("receivers")(t.receivers)))])])}),0),a._v(" "),n("round-popup",{staticStyle:{height:"100vh"},attrs:{show:a.isShowFlowMonitor,title:"流转监控",isRound:!1,containerStyle:{backgroundColor:"#f8f8f8"}},on:{"update:show":function(t){a.isShowFlowMonitor=t}},scopedSlots:a._u([{key:"container",fn:function(){return[n("div",{staticClass:"monitor-container"},[n("div",{staticClass:"tabs"},a._l(a.monitorTabs,function(e){return n("div",{class:["tab",{tabActive:e.active}],on:{click:function(t){return a.clickMonitorTab(e)}}},[n("div",{staticClass:"num",style:{color:e.color}},[a._v(a._s(e.num))]),a._v(" "),n("div",[a._v(a._s(e.title))])])}),0),a._v(" "),a.monitorLoading?n("div",[n("van-loading",{attrs:{size:"24px"}},[a._v("加载中...")])],1):n("div",{staticClass:"group-wrap"},[a.nodeGroups.length?a._l(a.nodeGroups,function(t){return n("div",{staticClass:"group"},[n("div",{staticClass:"group-name"},[a._v(a._s(t.node)+"("+a._s(t.num)+")")]),a._v(" "),a._l(t.list,function(t){return n("div",{staticClass:"group-item"},[n("div",{staticClass:"avatar",style:{backgroundColor:2==t.sex?"#EE7DB7":"#0087ED"}},[a._v(a._s(a._f("filterName")(t.showName)))]),a._v(" "),n("div",[n("div",{staticClass:"item-name"},[a._v("\n                    "+a._s(t.showDeptName)+"("+a._s(t.showName)+")\n                    "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.pDate,expression:"item.pDate"}],staticClass:"tag"},[a._v("已查看")])]),a._v(" "),n("div",[a._v("接收时间： "+a._s(t.rDate))]),a._v(" "),n("div",[a._v("操作时间： "+a._s(t.eDate))]),a._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.handleTime,expression:"item.handleTime"}]},[a._v("耗时： "+a._s(t.handleTime))])])])})],2)}):n("commonempty",{attrs:{description:"暂无数据"}})],2)])]},proxy:!0}])}),a._v(" "),n("round-popup",{staticStyle:{height:"100vh"},attrs:{show:a.isShowFlowChart,title:"流程图",isRound:!1,containerStyle:{padding:"0"}},on:{"update:show":function(t){a.isShowFlowChart=t}},scopedSlots:a._u([{key:"container",fn:function(){return[a.flowChartUrl?n("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a.flowChartUrl,frameborder:"0"}}):n("commonempty",{attrs:{description:"暂无流程信息"}})]},proxy:!0}])})],1)},[],!1,null,"e7146442",null).exports},8601:function(t,e,a){"use strict";a.d(e,{Z:function(){return n}});var e={name:"dsfIframe",data:function(){return{load:null,url:""}},props:{src:{type:String,default:""}},computed:{},components:{},created:function(){},mounted:function(){var e,t=this,a=this.$refs.ifs;a.attachEvent?a.attachEvent("onload",this.end):a.addEventListener("load",this.end),this.url=this.src,a&&(e={type:"OA",action:"click"},a.onload=function(t){a.contentWindow.postMessage(e,"*")}),this.load=this.$toast.loading({message:"加载中...",duration:0}),setTimeout(function(){t.load?t.load.message="加载中...":t.load.clear()},5e3)},methods:{end:function(){this.load.clear(),this.$emit("load")}},watch:{src:function(){this.url=this.src}},destroyed:function(){this.load.clear()}},n=(0,a(51900).Z)(e,function(){var t=this._self._c;return t("div",{staticClass:"dsf-iframe",staticStyle:{height:"100%"}},[t("iframe",{ref:"ifs",staticClass:"iframe",attrs:{src:this.url,frameborder:"0"}})])},[],!1,null,"fc96844c",null).exports},65666:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return o}});var a=s(66250),e=s(33453),n=s.n(e),e={name:"myLeave",components:{},props:{},data:function(){return{userInfo:dsf.util.loadSessionStore("user"),default_avatar:'this.src="'+s(11727)+'"',avatar:"",showYear:!1,showType:!1,currentRate:0,lastRate:0,year:"2023",type:{text:"全部",value:0},yearOptions:[{text:"2019年",value:"2019"},{text:"2020年",value:"2020"},{text:"2021年",value:"2021"},{text:"2022年",value:"2022"},{text:"2023年",value:"2023"}],typeOptions:[],statistics:{lastYearUsed:0,lastYear:0,thisYearUsed:0,thisYear:0},leaveList:[]}},computed:{},watch:{},created:function(){},mounted:function(){this.init()},methods:{init:function(){var e=this;return(0,a.Z)(n().mark(function t(){return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.avatar=e.userInfo&&e.userInfo.photo||s(11727),e.getType(),e.getLeaveInfo(),e.getStatistic();case 4:case"end":return t.stop()}},t)}))()},getLeaveInfo:function(){var e=this;dsf.http.get("fn/leave/statistic/leaveDetails",{year:this.year,type:this.type.value}).then(function(t){t&&t.data&&200==t.data.code&&t.data.data&&t.data.data&&(e.leaveList=t.data.data)})},getType:function(){var e=this;dsf.http.get("fn/leave/type/selectType",{}).then(function(t){t&&t.data&&200==t.data.code&&(e.typeOptions=t.data.data.map(function(t){return{text:t.name||t.text,value:t.value}}))})},getStatistic:function(){var e=this;dsf.http.get("fn/leave/statistic/yearLeaveStatistic",{}).then(function(t){t&&t.data&&200==t.data.code&&(e.statistics=t.data.data,e.currentRate=e.statistics.thisYearUsed/e.statistics.thisYear*100,e.lastRate=e.statistics.lastYearUsed/e.statistics.lastYear*100)})},confirmYear:function(t,e){this.year=t.value,this.showYear=!1,this.getLeaveInfo()},confirmType:function(t,e){this.type=t,this.showType=!1,this.getLeaveInfo()}}},o=(0,s(51900).Z)(e,function(){var a=this,n=a._self._c;return n("div",{staticClass:"myLeave",style:{height:"calc(100vh - ".concat(a.$store.state.isShowAppHeader?"0.92rem":"0px"," - ").concat(a.$store.state.isShowAppFooter?"1.2rem":"0px",")")}},[n("div",{staticClass:"leave-head"},[n("div",{staticClass:"info-container"},[n("div",{staticClass:"info-img"},[n("img",{attrs:{src:a.avatar,onerror:a.default_avatar}})]),a._v(" "),n("div",{staticClass:"info-text"},[n("p",[a._v(a._s(a.userInfo.name))]),a._v(" "),n("p",[a._v(a._s(a.userInfo.unitName))]),a._v(" "),n("p",[a._v(a._s(a.userInfo.deptName))])])]),a._v(" "),n("div",{staticClass:"leave-statistics"},[n("van-circle",{attrs:{rate:a.currentRate,speed:100,"stroke-width":60,color:"#FF8F00",size:"80px"},scopedSlots:a._u([{key:"default",fn:function(){return[n("div",{staticClass:"pie-text"},[n("p",[n("label",{staticStyle:{color:"#FF8F00"}},[a._v(a._s(a.statistics.thisYearUsed))]),a._v("/"+a._s(a.statistics.thisYear)+"\r\n                        ")]),a._v(" "),n("span",[a._v("今年年假")])])]},proxy:!0}]),model:{value:a.currentRate,callback:function(t){a.currentRate=t},expression:"currentRate"}}),a._v(" "),n("van-circle",{attrs:{rate:a.lastRate,speed:100,"stroke-width":60,color:"#0091FF",size:"80px"},scopedSlots:a._u([{key:"default",fn:function(){return[n("div",{staticClass:"pie-text"},[n("p",[n("label",{staticStyle:{color:"#0091FF"}},[a._v(a._s(a.statistics.lastYearUsed))]),a._v("/"+a._s(a.statistics.lastYear)+"\r\n                        ")]),a._v(" "),n("span",[a._v("去年年假")])])]},proxy:!0}]),model:{value:a.lastRate,callback:function(t){a.lastRate=t},expression:"lastRate"}})],1)]),a._v(" "),n("div",{staticClass:"leave-select"},[n("div",{on:{click:function(t){a.showYear=!0}}},[a._v("\r\n            年度："+a._s(a.year)+"年\r\n            "),n("img",{attrs:{src:s(33969),alt:""}})]),a._v(" "),n("div",{on:{click:function(t){a.showType=!0}}},[a._v("\r\n            分类："+a._s(a.type.text)+"\r\n            "),n("img",{attrs:{src:s(33969),alt:""}})])]),a._v(" "),a.leaveList&&0<a.leaveList.length?n("div",{staticClass:"leave-content"},[n("div",{staticClass:"leave-line"}),a._v(" "),n("div",{staticClass:"list-container"},a._l(a.leaveList,function(t,e){return n("div",{key:e,staticClass:"leave-list"},[n("p",[n("img",{attrs:{src:s(58018),alt:""}}),a._v(" "),n("span",[a._v(a._s(t.month))])]),a._v(" "),n("ul",a._l(t.list,function(t,e){return n("li",{key:e},[n("span",[a._v(a._s(t.startTimeStr)+"～"+a._s(t.endTimeStr))]),a._v(" "),n("span",[a._v(a._s(t.leaveDays)+"天")]),a._v(" "),n("span",[a._v(a._s(t.leaveTypeText))])])}),0)])}),0)]):n("commonempty",{attrs:{description:"暂无请假数据"}}),a._v(" "),n("van-popup",{attrs:{position:"bottom","get-container":"#app"},model:{value:a.showYear,callback:function(t){a.showYear=t},expression:"showYear"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:a.yearOptions},on:{confirm:a.confirmYear,cancel:function(t){a.showYear=!1}}})],1),a._v(" "),n("van-popup",{attrs:{position:"bottom","get-container":"#app"},model:{value:a.showType,callback:function(t){a.showType=t},expression:"showType"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:a.typeOptions},on:{confirm:a.confirmType,cancel:function(t){a.showType=!1}}})],1)],1)},[],!1,null,"219e9820",null).exports},7365:function(t,e,a){var n={"./DYzhuanshouwen.vue":11542,"./ExCenterSend.vue":67270,"./ExCenterSendControls/userTree.vue":19290,"./TabsMovingDialog.vue":42389,"./TopicFill.vue":30999,"./calendarDialog.vue":77741,"./chooseWeek.vue":46552,"./commentDialog.vue":3624,"./comprehensiveBack.vue":36940,"./exSendDialog.vue":19677,"./exchangeSendBack.vue":94493,"./fgwChoseLeader.vue":84104,"./forceRecycle.vue":22264,"./instructionsDialog.vue":32679,"./meetAttend.vue":80429,"./meetConflict.vue":9949,"./meetEntrust.vue":12271,"./meetLeave.vue":7758,"./meetSign.vue":3125,"./movingDialog.vue":29023,"./movingSituationDialog.vue":61077,"./myLeaveDialog.vue":41364,"./newMovingDialog.vue":56158,"./opinionSxDialog.vue":43048,"./remindersDialog.vue":41069,"./shareAboutDialog.vue":78033,"./shareTopicMemo.vue":870,"./sxCopyOpinion.vue":25652,"./sxForwardSign.vue":24593,"./sxSuperRecycle.vue":89509,"./testDialog1.vue":62967,"./testDialog2.vue":33573,"./vehicleDialog.vue":40005,"./voteBallot.vue":5951,"./voteResult.vue":93121,"./xizangMeet.vue":68195};function s(t){t=o(t);return a(t)}function o(t){if(a.o(n,t))return n[t];throw(t=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(n)},s.resolve=o,(t.exports=s).id=7365},58018:function(t,e,a){"use strict";t.exports=a.p+"static/img/dot.eb65e75..png"},33969:function(t,e,a){"use strict";t.exports=a.p+"static/img/select.95a0f83..png"}}]);