"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[79851],{18482:function(t,a,e){e.r(a);var r=e(90541),u=e(25108),e={};e.initHandle=function(n,o,i){var t,e=o.buttons.commonButtons.find(function(t){return"SDYCMeetingSignUp"==t.action});o.buttons.commonButtons=o.buttons.commonButtons.filter(function(t){return"SDYCMeetingSignUp"!=t.action}),t=(t=n.main["c-meetingbm-004"].value).replace(/-/g,"/"),Date.parse(t)<(new Date).getTime()&&(i.formMeta.subform["210511171011tquPhPgvrO27iAarpBb"].controls.find(function(t){return"210511171011tquPhPgvrO27iAarpBb"==t.metaId}).privilege.editable=!1),r.Z.http.post("ctrl/meetingPlanP2085Controller/getMeetingApplyData",{pk:i.pk}).then(function(a){200==a.data.code&&(i.formMeta.subform["210511171011tquPhPgvrO27iAarpBb"].controls.forEach(function(t){"姓名"==t.label&&(t.privilege.editable=!0,t.extra.tabs[0].action="fn/meetingPlanP2085Controller/loadTreeNode?action=self_dept&types=person&rootObject=3&async=true"),-1<a.data.data.colums.indexOf(t.label)?t.privilege.visible=!0:t.privilege.visible=!1,t.showLable=!0}),"1"==a.data.data.isJumper&&a.data.data.isSendDept&&"unit"==a.data.data.type||"1"!=a.data.data.isJumper&&"dept"==a.data.data.type||"1"==a.data.data.isJumper&&"unit"==a.data.data.type&&a.data.data.isSendDept&&a.data.data.hasReport.length<=1||a.data.data.isZBJ)&&o.buttons.commonButtons.push(e)}),i.$bus.on("selectUserBus",function(a){var e,t;"210512180917AgDaONZD0DDk1nxlFPr"==a.metaData.metaId&&(u.log("--------------",a,n,o,i),e="210511171011tquPhPgvrO27iAarpBb",t=a.value,r.Z.http.post("fn/meetingPlanP2085Controller/getMeetingApplyData",{userIds:t,type:"subData",pk:i.pk}).then(function(t){200==t.data.code&&(t=t.data.data.userInfos[a.value].split(","),u.log(t),n.multinfos[e].rows[a.subFormIndex].B0036={value:t[1]},n.multinfos[e].rows[a.subFormIndex]["210511170911Qu00JUdQirLn0VgdCF7"]={value:t[2]},n.multinfos[e].rows[a.subFormIndex].B0038={value:t[3]},n.multinfos[e].rows[a.subFormIndex]["210602145440pShHxBpZ5P6xWFGpncj"]={value:t[4]})}))})},e.SDYCMeetingSignUp=function(t,a,e){e.notVaildateMetas=a.controls.map(function(t){return t.metaId}),e.buttonHandle.saveNoTip(e.$route.params,e.formMeta,e.formData,e,function(){r.Z.http.post("ctrl/meetingPlanP2085Controller/doReport",{pk:e.pk}).then(function(t){200==t.data.code&&(r.Z.layer.toast("上报成功",!0),e.backSucces())})},!1)},a.default=e}}]);