"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[2698],{19452:function(t,e,a){a.r(e);var n=a(8450),c=a.n(n),n=a(73473),s=a.n(n),n=a(79529),u=a.n(n),l=a(25108),n={initHandle:function(t,e,a){l.log(a.formData),l.log("1");e.parameters.nodeId,t.main.B0022.value,t.main["C-QB-0001"].value;dsf.http.post("fn/fws/showyj",{pk:e.parameters.pk}).then(function(t){t=t.data;l.log("result",c()(t)),"success"==t.type&&t.html})}};n.saveFilter=function(a,p,n){function r(t,e,a){if("FwV9UCL6Ej3PhPg"==p.parameters.nodeId||"fwimU3y4u829mxW"==p.parameters.nodeId||"-2"==p.parameters.nodeId)for(var n=["阅核","阅研","阅处","审阅","审签","核","会核","核提意见"],r=0;r<n.length;r++){var s=function(t,e){for(var a=0;a<t.length;a++)if(t[a].tagName==e)return a;return-1}(t,n[r])-1;if(0<s){var o=function(t,e){for(var a=[],n=e;0<n;n--){var r=t[n];if(3==r.type)a.push(r);else if(2==r.type)return a}return a}(t,s);if(null==o)return void layuiError("无法识别会签部门，请检查意见语式");if(0<o.length){for(var d="",f="",u="",i=("fwimU3y4u829mxW"===p.parameters.nodeId&&(u=e.main["C-QB-0003"].value),[]),r=0;r<o.length;r++)u!=o[r].id&&(i.push(o[r].id),d+=","+o[r].id,f+=","+o[r].tagName);s={value:d.substr(1),text:f.substr(1),schema:"1:"+d.substr(1)},s=(a.$set(a.formData.main,"C-QB-0010",s),i.join(",")),s={pk:p.parameters.pk,deptIds:s};return void dsf.http.post("fn/rsrm/getSyncById",s).then(function(t){t=t.data;l.log("result",c()(t)),t.type})}}}}return new(s())(function(t,e){r(JSON.parse(a.flowinfo["flow-".concat(p.parameters.pk,"-").concat(p.parameters.pId||"0","-").concat(p.parameters.pnId||p.parameters.pk)].opinionContentTag),a,n),t()})},n["jqb.lrdb"]=function(r,s,o,d,f){var t={id:s.parameters.pk,type:"局领导批示",num:100,moduleId:"191017161345R6Q0lOvlCxxziL9ctrB",depId:o.main["C-QB-0003"].value};dsf.http.post("fn/supervise/updateSetIsDB",t).then(function(t){var e,a,n;"success"==result.type&&(e=o.main.B0013.value,e=e,a=14,(e=new Date(e)).setDate(u()(e.getDate())+u()(a)),a=u()(e.getMonth())+u()(1),n=e.getDate(),a<10&&(a="0"+a),n<10&&(n="0"+n),e=e.getFullYear()+"-"+a+"-"+n,vueData.$set(vueData.formData.main,"B0022",{value:e}),dsf.layer.toast("操作成功！"),(void 0).save(r,s,o,d,f,null,!1))})},n["jqb.banjie"]=function(t,e,a,n,r){var s=e.parameters.did,o=e.parameters.pk;dsf.layer.confirm({message:"请确认是否办结？",confirmButtonText:"确认"},function(){dsf.http.post("fn/shareRead/readedIds",{infoIds:o,distribIds:s}).then(function(t){"success"==t.type?(dsf.http.post("fn/supervise/cancelDisplay",{infoId:o,distribIds:s}).then(function(t){t.type}),dsf.layer.toast("办结成功"),n.backSucces()):dsf.layer.toast("办结失败")})})},n.setDuban=function(a,t,n){var r,e=new Date;e.getFullYear(),e.getMonth(),e.getDate();n.$refs.calenderSelect.show=!0,n.$refs.calenderSelect.confirmCallBack=function(t){var e=n.formMeta.parameters.pk;r=dsf.date.format(t,"yyyy-mm-dd"),dsf.http.post("fn/supervise/updateSetIsDB",{id:e,type:"局领导批示",num:100,moduleId:"191017161345R6Q0lOvlCxxziL9ctrB",depId:a.main["C-QB-0003"].value,dbqx:r}).then(function(t){l.log(t.data.type),"success"===t.data.type&&dsf.layer.toast("操作成功","",function(){n.$router.go(-1)})})}},n.delGatherPlan=function(t,e,a){var n=a.formMeta.parameters.pk;dsf.layer.confirm({message:"请确认是否办结？",confirmButtonText:"是",cancelButtonText:"否"},function(){dsf.http.post("ctrl/shareRead/readedIds",{infoIds:n,distribIds:" "}).then(function(t){"success"===t.data.type?(dsf.http.post("ctrl/supervise/cancelDisplay",{infoId:n}).then(function(){}),dsf.layer.toast("办结成功","",function(){a.$router.go(-1)})):dsf.layer.toast("办结失败")})},function(){})},n.dbbj=function(t,e,a){var n=a.formMeta.parameters.pk,r=a.formMeta.parameters.moduleId;dsf.http.post("fn/supervise/queryBlqk",{id:n}).then(function(t){0<t.data.data.count?a.buttonHandle.saveNoTip(a.$route.params,a.formMeta,a.formData,a,a.$refs,void dsf.http.post("fn/priority/changeStatus",{pk:n,moduleId:r}).then(function(t){"success"===t.data.type&&dsf.layer.toast("办结成功","",function(){a.$router.go(-1)})})):dsf.layer.toast("请填写督办办理结果")})},n.saveAfter=function(e,t,a){var n=e.formMeta.parameters.nodeId,r=e.formMeta.parameters.pk;"50"==n&&dsf.http.post("ctrl/supervise/saveStatus",{id:r}).then(function(t){e.$router.go(0)}),""!=n&&"0"!=n||dsf.http.post("ctrl/supervise/updateFileNameByBT",{pk:r,nrType:0}),dsf.layer.toast("保存成功")},e.default=n}}]);