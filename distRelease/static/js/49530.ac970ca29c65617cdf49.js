"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[49530],{49530:function(t,a,e){e.r(a),e.d(a,{default:function(){return s}});var a=e(79529),d=e.n(a),c=e(25108),a={name:"zongHeDetail",props:[],components:{},data:function(){var t;return{dwShow:!0,geChuShiData:{total:0,list:[]},unitComprehensiveEfficiency:{compositeScore:0,hb:"0%",bjl:0,pjhs:0,asbjl:"0%",lccll:"0%",ccqdbl:"0%"},show:!1,showDept:!1,flag:!1,minDate:new Date((new Date).getFullYear()-5,0,1),maxDate:new Date((new Date).getFullYear(),11,1),currentDate:new Date,value:moment().format("YYYY年MM月"),params:{year:(new Date).getFullYear(),month:(new Date).getMonth()+1,range:1},curParams:{year:(new Date).getFullYear(),month:(new Date).getMonth()+1,deptName:(null==(t=dsf.util.loadSessionStore("user"))?void 0:t.deptName)||""},columns:[],select:"业务秘书处对比",depts:[]}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.params.range=1,t.getGeChuShiData(),t.getZongHeEchartsData(),t.getDeptData()})},activated:function(){},computed:{},watch:{},methods:{mroe:function(){this.flag=!1,this.geChuShiData.list.forEach(function(t){t.flag=!0})},zongHeEcharts:function(t,a,e,s){var i=document.getElementById("zongHeEcharts"),t={legend:{data:t,bottom:"2%",left:"center"},radar:{indicator:a,name:{textStyle:{color:"#333",fontWeight:"bold"}},radius:"60%"},series:[{type:"radar",data:[{value:e,name:"全单位",itemStyle:{color:"#0091FF"},areaStyle:{color:"#A9DAFF"}},{value:s,name:"第七秘书处",areaStyle:{color:"rgba(224,32,32,0.22)"}}]}]};echarts.init(i).setOption(t)},confirm:function(t){this.value=moment(t).format("YYYY年MM月"),this.show=!1,this.params.year=new Date(t).getFullYear(),this.params.month=new Date(t).getMonth()+1,this.curParams.year=new Date(t).getFullYear(),this.curParams.month=new Date(t).getMonth()+1,this.getGeChuShiData(),this.getZongHeEchartsData()},onConfirm:function(t,a){["业务秘书处对比","其他处室对比","所有处室对比"].includes(t)?(this.select=t,this.params.range=0==a?1:1==a?2:0,this.getGeChuShiData()):(this.curParams.deptName=t,this.getZongHeEchartsData()),this.showDept=!1},formatter:function(t,a){return"year"===t?"".concat(a,"年"):"month"===t?"".concat(a,"月"):a},getGeChuShiData:function(){var i=dsf.layer.loading(),n=this;dsf.http.post("fn/efficiencySelect/efficiencyIndexStatistic",n.params).then(function(t){var a,e,s;dsf.layer.closeLoading(i),"success"===t.data.type?(e=(a=t.data.data).deptList,s=a.deptData,n.geChuShiData.list=[],n.geChuShiData.total=e.length,n.flag=10<e.length,e.forEach(function(t,a){n.geChuShiData.list.push({id:a+1,name:t,flag:a<=9,fen:"",num:"",time:"",anShiLv:"",liuChengLv:"",chaoChangLv:""})}),n.geChuShiData.list.forEach(function(t,a){t.fen=s[t.name].compositeScore,t.num=s[t.name].bjl,t.time=s[t.name].pjhs,t.anShiLv=s[t.name].asbjl,t.liuChengLv=s[t.name].lccll,t.chaoChangLv=s[t.name].ccqdbl})):(dsf.layer.toast(t.data.message),n.geChuShiData.list=[])}).catch(function(t){dsf.layer.closeLoading(i),n.geChuShiData.list=[],c.log(t)})},selectDept:function(){this.columns=["业务秘书处对比","其他处室对比","所有处室对比"],this.showDept=!0},getZongHeEchartsData:function(){var l=this,o=dsf.layer.loading(),r=this;dsf.http.post("fn/efficiencySelect/efficiencyStatistic",r.curParams).then(function(t){var e,a,s,i,n,c;dsf.layer.closeLoading(o),"success"===t.data.type?(a=(i=t.data.data).unitComprehensiveEfficiency,e=i.dimensionalAnalysis,r.unitComprehensiveEfficiency=a,i=(e.deptData.bjl>e.unitData.bjl?e.deptData:e.unitData).bjl,a=(e.deptData.pjhs>e.unitData.pjhs?e.deptData:e.unitData).pjhs,s=["全单位"],i=[{name:"办件量",max:Number((2*i).toFixed())},{name:"平均耗时",max:Number(2*a)},{name:"按时办结率",max:100},{name:"流程处理率",max:100},{name:"超长期待办率",max:"0.0%"==e.deptData.ccqdbl&&"0.0%"==e.unitData.ccqdbl?0:100}],s[1]=r.curParams.deptName,n=[],c=[],e.items.forEach(function(t,a){0==a?(n[a]=e.unitData.bjl,c[a]=e.deptData.bjl):1==a?(n[a]=e.unitData.pjhs,c[a]=e.deptData.pjhs):2==a?(n[a]=d()(e.unitData.asbjl),c[a]=d()(e.deptData.asbjl)):3==a?(n[a]=d()(e.unitData.lccll),c[a]=d()(e.deptData.lccll)):(n[a]=d()(e.unitData.ccqdbl),c[a]=d()(e.deptData.ccqdbl))}),l.zongHeEcharts(s,i,n,c)):(dsf.layer.toast(t.data.message),r.dwShow=!1)}).catch(function(t){dsf.layer.closeLoading(o),r.dwShow=!1,c.log(t)})},getDeptData:function(){var e=dsf.layer.loading(),s=this;dsf.http.post("fn/efficiencySelect/getAllDept").then(function(t){var a;dsf.layer.closeLoading(e),"success"===t.data.type?(a=t.data.data,s.depts=[],a.forEach(function(t){s.depts.push(t.text)})):dsf.layer.toast(t.data.message)}).catch(function(t){dsf.layer.closeLoading(e),c.log(t)})},seDept:function(){this.columns=this.depts,this.showDept=!0}}},s=(0,e(51900).Z)(a,function(){var a=this,e=a._self._c;return e("div",{staticClass:"zongHeDetail"},[e("div",{staticClass:"bg"},[e("header",[e("div",{staticClass:"calendar",on:{click:function(t){a.show=!0}}},[a._v("\n        "+a._s(a.value)+" "),e("span",{staticClass:"jiantou"})])]),a._v(" "),a.dwShow?e("div",{staticClass:"db_box"},[e("div",{staticClass:"text"},[a._v("单位效能指数")]),a._v(" "),e("div",{staticClass:"num"},[e("span",[a._v(a._s(a.unitComprehensiveEfficiency.compositeScore))])]),a._v(" "),e("div",{staticClass:"huanBi"},[e("div",{staticClass:"text"},[a._v("\n          环比\n          "),e("span",{staticClass:"red"},[a._v(a._s(a.unitComprehensiveEfficiency.hb)+" "),e("span")])])]),a._v(" "),e("div",{staticClass:"content1"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[a._v("累计办件量")]),a._v(" "),e("div",{staticClass:"num"},[a._v("\n            "+a._s(a.unitComprehensiveEfficiency.bjl)+"\n          ")])]),a._v(" "),e("div",{staticClass:"center"}),a._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"title"},[a._v("平均耗时")]),a._v(" "),e("div",{staticClass:"num"},[a._v("\n            "+a._s(a.unitComprehensiveEfficiency.pjhs)+"\n          ")])])]),a._v(" "),e("div",{staticClass:"content2"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[a._v("按时办结率")]),a._v(" "),e("div",{staticClass:"num"},[a._v(a._s(a.unitComprehensiveEfficiency.asbjl))])]),a._v(" "),e("div",{staticClass:"center"},[e("div",{staticClass:"title"},[a._v("流程处理率")]),a._v(" "),e("div",{staticClass:"num"},[a._v(a._s(a.unitComprehensiveEfficiency.lccll))])]),a._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"title"},[a._v("超长期待办率")]),a._v(" "),e("div",{staticClass:"num"},[a._v(a._s(a.unitComprehensiveEfficiency.ccqdbl))])])])]):e("commonempty",{staticStyle:{background:"#fff","border-radius":"10px"},attrs:{description:"数据获取失败"}})],1),a._v(" "),e("div",{staticClass:"geChuShi"},[e("div",{staticClass:"boxTitle"},[a._m(0),a._v(" "),e("div",{staticClass:"select",on:{click:a.selectDept}},[a._v("\n        "+a._s(a.select)+"\n      ")])]),a._v(" "),0!=a.geChuShiData.list.length?e("div",{staticClass:"box"},[a._l(a.geChuShiData.list,function(t){return[t.flag?e("div",{key:t.id,staticClass:"item"},[e("div",{staticClass:"one"},[e("div",{staticClass:"left"},[a._v("\n              "+a._s(t.name)+"\n            ")]),a._v(" "),e("div",{staticClass:"right"},[a._v("效能得分:"+a._s(t.fen))])]),a._v(" "),e("div",{staticClass:"two"},[e("div",{staticClass:"left"},[e("span",[a._v("办件量：")]),a._v(a._s(t.num))]),a._v(" "),e("div",{staticClass:"right"},[e("span",[a._v(" 平均耗时：")]),a._v(a._s(t.time))])]),a._v(" "),e("div",{staticClass:"three"},[e("div",{staticClass:"left"},[e("span",[a._v("按时办结率:")]),a._v(a._s(t.anShiLv))]),a._v(" "),e("div",{staticClass:"center"},[e("span",[a._v("流程处理率:")]),a._v(a._s(t.liuChengLv)+"\n            ")]),a._v(" "),e("div",{staticClass:"right"},[e("span",[a._v("超长期待办率:")]),a._v(a._s(t.chaoChangLv)+"\n            ")])])]):a._e()]}),a._v(" "),10<a.geChuShiData.total&&a.flag?e("div",{staticClass:"more",on:{click:a.mroe}},[a._v("\n        全部展示\n      ")]):a._e()],2):e("commonempty",{staticStyle:{background:"#fff","border-radius":"10px"},attrs:{description:"数据获取失败"}})],1),a._v(" "),e("div",{staticClass:"zongHe"},[e("div",{staticClass:"boxTitle"},[a._m(1),a._v(" "),e("div",{staticClass:"select",on:{click:a.seDept}},[a._v("\n        "+a._s(a.curParams.deptName)+"\n      ")])]),a._v(" "),e("div",{staticClass:"text"},[a._v("\n      说明：每项指标按满分100分计算，图形面积越大，综合得分越高。\n    ")]),a._v(" "),e("div",{staticClass:"zongHeEcharts",attrs:{id:"zongHeEcharts"}})]),a._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[e("van-datetime-picker",{attrs:{type:"year-month",title:"选择年月","min-date":a.minDate,"max-date":a.maxDate,formatter:a.formatter},on:{confirm:a.confirm,cancel:function(t){a.show=!1}},model:{value:a.currentDate,callback:function(t){a.currentDate=t},expression:"currentDate"}})],1),a._v(" "),e("van-popup",{attrs:{position:"bottom"},model:{value:a.showDept,callback:function(t){a.showDept=t},expression:"showDept"}},[e("van-picker",{attrs:{title:"选择部门","show-toolbar":"",columns:a.columns},on:{confirm:a.onConfirm,cancel:function(t){a.showDept=!1}}})],1)],1)},[function(){var t=this,a=t._self._c;return a("div",{staticClass:"title"},[a("div",{},[a("span",{staticClass:"blue"}),t._v(" "),a("span",{staticClass:"yellow"}),t._v(" "),a("span",{staticClass:"bold"},[t._v("各处室办件量分析")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"title"},[a("div",{},[a("span",{staticClass:"blue"}),t._v(" "),a("span",{staticClass:"yellow"}),t._v(" "),a("span",{staticClass:"bold"},[t._v("各处室办件量分析")])])])}],!1,null,"7904f44a",null).exports}}]);