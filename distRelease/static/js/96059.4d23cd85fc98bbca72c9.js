"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[96059],{96059:function(t,e,n){n.r(e),n.d(e,{default:function(){return r}});var e=n(8450),i=n.n(e),o=n(25108),e={name:"zhengzhouIndex",data:function(){return{allMenu:[],loginHegight:"",itemWidth:"",portrait:!0}},filters:{badgeCount:function(t){return 100<t?"99+":t<1?"":t}},created:function(){window.addEventListener("onorientationchange"in window?"orientationchange":"resize",this.isPortrait,!1),this.isPortrait(),this.getMenus()},methods:{isPortrait:function(){180===window.screen.orientation.angle||0===window.screen.orientation.angle?this.portrait=!0:90!==window.screen.orientation.angle&&-90!==window.screen.orientation.angle||(this.portrait=!1)},getMenus:function(){var e=this;dsf.http.post("fn/newFile/shortcutDing",{}).then(function(t){t=t.data;e.allMenu=t.data[0].children,e.getBadge()})},getBadge:function(){var t=this;this.allMenu.forEach(function(e){t.$set(e,"badge",0),e.tip&&dsf.http.post(e.tip).then(function(t){e.badge=t.data.badge||(null==(t=t.data.data)?void 0:t.badge)||0})})},openDDApp:function(t){dd.biz.microApp.openApp({agentId:t,onSuccess:function(t){},onFail:function(t){}})},goRoute:function(e){var n=this;setTimeout(function(){var t;0<(null==(t=e.children)?void 0:t.length)?(n.showSubmenu=!0,n.submenu=e):""==e.actUrl||null==e.actUrl?dsf.layer.alert({message:e.showClickTip||"当前菜单配置错误，请联系管理员！"}):e.shortcutType&&3==e.shortcutType?n.openDDApp(e.actUrl):2==e.shortcutType?e.props&&"1"==e.props.authorize?dsf.middleground.openUrl({url:e.actUrl,title:e.shortcutName,isOpenWebview:"1"==e.props.OpenWebView,getCodeParams:{appCode:e.props.appCode}}):dsf.config.ddSetting.isDing?dd.biz?dd.biz.util.openLink({url:e.actUrl,onSuccess:function(t){},onFail:function(t){}}):dd.openLink({url:e.actUrl}).then(function(t){o.log(t)}).catch(function(t){}):window.wx?wx.invoke("openUrl",{type:0,url:e.router},function(t){t.err_msg}):e.props&&"1"==e.props.OpenWebView?dsf.util.openWebviewToUrl({url:e.actUrl,title:e.shortcutName}):e.props&&"1"==e.props.OpenLocationHref?location.href=e.actUrl:n.$router.push({name:"dsfIframe",query:{url:e.actUrl,title:e.shortcutName}}):null!=(t=e.props)&&t.props?n.$router.push({path:e.actUrl,query:JSON.parse(i()(e.props))}):n.$router.push({path:e.actUrl,query:{title:e.shortcutName}})},100)}},beforeDestroy:function(){window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",this.isPortrait(),!1)},activated:function(){this.isPortrait(),this.getBadge()}},r=(0,n(51900).Z)(e,function(){var n=this,t=n._self._c;return t("div",{staticClass:"zhengzhouIndex"},[t("div",{staticClass:"header",style:{height:n.portrait?"10vh":"18vh",lineHeight:n.portrait?"10vh":"18vh"}},[n._v("市委内网综合办公平台\n  ")]),n._v(" "),t("div",{staticClass:"content"},[n._l(n.allMenu,function(e){return[t("div",{staticClass:"shell flex ac dc",style:{width:n.portrait?"33.33%":"25%"}},[t("div",{staticClass:"contentItem",style:{width:"80%",height:n.portrait?"20vh":"30vh"},on:{click:function(t){return n.goRoute(e)}}},[e.badge?t("span",{staticClass:"badge"},[n._v(n._s(n._f("badgeCount")(e.badge)))]):n._e(),n._v(" "),t("img",{attrs:{src:e.shortcutIcon,alt:""}}),n._v(" "),t("span",[n._v(n._s(e.shortcutName))])])])]})],2)])},[],!1,null,"c4268160",null).exports}}]);