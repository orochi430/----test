(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[44288],{85990:function(t){t.exports=function(t){return t}},50361:function(t,s,n){var e=n(85990);t.exports=function(t){return e(t,5)}},41775:function(t,s,n){"use strict";n.d(s,{Z:function(){return r}});n(23307);var s=n(81392),e=n(26243),a=n.n(e),e=n(79529),l=n.n(e),e=n(46297),i=n(84628),o=n(50856),c=n(25108),e={components:{DsCard:e.Z,DsButtonGroup:i.Z,DsButtonToolbox:o.Z,Icon:s.Z},props:{tabObj:{type:Object},data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},type:{type:String},keyColumn:{type:String},formMethod:{type:String},isHiddenBtn:{type:Boolean,default:function(){}}},data:function(){return{}},created:function(){},computed:{aSubTitles:function(){return c.log(this.columns.filter(function(t){return/^subTitle\w?$/i.test(t.showCategory)})),this.columns.filter(function(t){return/^subTitle\w?$/i.test(t.showCategory)})},bSubTitles:function(){return this.columns.filter(function(t){return/^content$/i.test(t.showCategory)})},needTitles:function(){return this.columns.filter(function(t){return/^needTitle\w?$/i.test(t.showCategory)})},titleIcon:function(){return this.columns.filter(function(t){return/^titleIcon\w?$/i.test(t.showCategory)})}},mounted:function(){c.log(this.bSubTitles)},methods:{isShowColumn:function(t,s){return s.dataValue[t.showMetaColumn]||0===s.dataValue[t.showMetaColumn]},isShowListBtn:function(t){var s=null==this.isHiddenBtn,n=!1,n=!(!t.buttons||!(t.buttons.commonButtons&&0<t.buttons.commonButtons.length||t.buttons.mainButtons&&0<t.buttons.mainButtons.length));return s&&n},link:function(t){var s,n,e,a;t.dataValue.allowMobile&&1!=t.dataValue.allowMobile?dsf.layer.toast("该文件只能在电脑端处理"):("isRead"in t.dataValue&&!t.dataValue.isRead&&(t.dataValue.isRead=!0),s=(t=t.dataValue)[this.keyColumn]||t.info_id||t.id||t.A0001||t.fid||t["SW_XZD.A0001"],n=this.keyColumn?this.keyColumn.split(".")[0]+".A0004":"",n=t.moduleId||t.A0004||t["SW_XZD.A0004"]||t[n],"db"==this.type&&(n=t.masterModuleId||t.moduleId||t.A0004),a=t.masterId||"",n=n+"/"+s,e={},"gw"==this.type&&(n+="/1",e.todoId=t.todoId),this.type&&(n+="?type=".concat(this.type)),"SigninList"==this.$route.name&&(n+="?&listId=1903161124289nXBk8iVSmTMGYxn9bi&exchangeList=signedList"),"db"==this.type&&(a&&(n+="&masterId=".concat(a)),c.log(this.formMethod),this.formMethod)&&(n+="&formMethod=info"),"dy"==this.type&&(n+="&distribId=".concat(t.distribId),dsf.http.post("fn/mobileToRead/markRead",{pks:t.distribId}).then(function(t){c.log(t)})),this.tabObj&&this.tabObj.targetUrl?(a=this.tabObj.targetUrl.replace("[pk]",s),this.$router.push({path:a})):this.$router.push({path:"/commonForm/"+n,query:e}))},getTitle:function(){return this.columns.find(function(t){return"mainTitle"===t.showCategory})||{}},handleCommonClick:function(t,s,n){s.dataValue.allowMobile&&1!=s.dataValue.allowMobile?dsf.layer.toast("该文件只能在电脑端处理"):this.$emit("commonClick",t,s,n)},handleMainClick:function(t,s,n){s.dataValue.allowMobile&&1!=s.dataValue.allowMobile?dsf.layer.toast("该文件只能在电脑端处理"):this.$emit("mainClick",t,s,n)},titleIconColor:function(t,s){t=t.dataValue[s.showMetaColumn].substr(0,1);return dsf.config.listTitleIcon&&-1<a()(dsf.config.listTitleIcon).indexOf(t)?(s=dsf.config.listTitleIcon[t],{backgroundColor:this.colorRgba(s,.12),color:s,borderColor:s}):""},colorRgba:function(t){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=t.toLowerCase();if(n&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n)){if(4===n.length){for(var e="#",a=1;a<4;a+=1)e+=n.slice(a,a+1).concat(n.slice(a,a+1));n=e}for(var i=[],o=1;o<7;o+=2)i.push(l()("0x"+n.slice(o,o+2)));return"rgba("+i.join(",")+","+s+")"}return n}}},r=(0,n(51900).Z)(e,function(){var e=this,a=e._self._c;return a("div",{staticClass:"ds-list"},[e._l(e.data,function(n,s){return a("div",{key:n.id||"item-".concat(s),staticClass:"ds-item"},[a("DsCard",["isRead"in n.dataValue&&!n.dataValue.isRead?a("span",{staticClass:"isStatus"}):e._e(),e._v(" "),"readStatus"in n.dataValue&&"2"!=n.dataValue.readStatus?a("span",{staticClass:"isStatus"}):e._e(),e._v(" "),n.dataValue[e.getTitle().showMetaColumn]?a("div",{class:{ellipsis:e.dsf.config.commonList&&e.dsf.config.commonList.titleEllipsis},attrs:{slot:"header"},on:{click:function(t){return e.link(n)}},slot:"header"},[a("span",{class:{"col-title":"isRead"in n.dataValue&&!n.dataValue.isRead||"readStatus"in n.dataValue&&"2"!=n.dataValue.readStatus},style:{color:e.getTitle().color||"","word-wrap":"break-word","word-break":"break-all"}},[e._v("\n                "+e._s(n.dataValue[e.getTitle().showMetaColumn]))])]):e._e(),e._v(" "),a("div",{staticClass:"content",attrs:{slot:"content"},on:{click:function(t){return e.link(n)}},slot:"content"},[e._t("item-content",function(){return[a("div",{staticClass:"flex1"},[0<e.aSubTitles.length?a("div",{staticClass:"aSubTitles"},[e._l(e.aSubTitles,function(t,s){return[e.isShowColumn(t,n)?a("div",{key:"aSubTitles-".concat(s),staticClass:"subTitle"},[t.icon?a("Icon",{class:["iconfont",t.icon]}):e._e(),e._v(" "),a("span",{staticClass:"label",style:{color:t.color}},[e._v(e._s(n.dataValue[t.showMetaColumn]))])],1):e._e()]})],2):e._e(),e._v(" "),0<e.bSubTitles.length?a("div",{staticClass:"bSubTitles"},[e._l(e.bSubTitles,function(t,s){return[e.isShowColumn(t,n)?a("div",{key:"bSubTitles-".concat(s),staticClass:"subTitle"},[t.icon?a("Icon",{class:["iconfont",t.icon]}):e._e(),e._v(" "),a("span",{class:["label","ds-elips-".concat(t.showRows||1)],style:{color:t.color}},[e._v(e._s(n.dataValue[t.showMetaColumn]))])],1):e._e()]})],2):e._e(),e._v(" "),0<e.needTitles.length?a("div",{staticClass:"needTitles"},[e._l(e.needTitles,function(t,s){return[e.isShowColumn(t,n)?a("div",{key:"needTitles-".concat(s),staticClass:"subTitle"},[a("span",{staticClass:"name label ellipsis"},[e._v(e._s(t.showName))]),e._v(" "),a("span",{staticClass:"label val elips",style:{color:t.color}},[e._v(e._s(n.dataValue[t.showMetaColumn]))])]):e._e()]})],2):e._e()]),e._v(" "),0<e.titleIcon.length?a("div",[e._l(e.titleIcon,function(t,s){return[e.isShowColumn(t,n)?a("div",{key:"titleIcon-".concat(s),staticClass:"moduleIcon",style:e.titleIconColor(n,t)},[a("span",[e._v(e._s(n.dataValue[t.showMetaColumn].substr(0,1)))])]):e._e()]})],2):e._e()]},{item:n}),e._v(" "),e._t("item-extend",null,{item:n})],2),e._v(" "),e.isShowListBtn(n)?a("div",{attrs:{slot:"footer"},slot:"footer"},[e._t("item-footer",function(){return[a("DsButtonToolbox",{attrs:{buttons:n.buttons||{},more:!0,size:"small"},on:{commonClick:function(t){e.handleCommonClick(t,n,s)},mainClick:function(t){e.handleMainClick(t,n,s)}}})]},{item:{}})],2):e._e()])],1)}),e._v(" "),e.data.length||e.$parent.loading?e._e():a("commonempty")],2)},[],!1,null,"7d9709ac",null).exports},46297:function(t,s,n){"use strict";n.d(s,{Z:function(){return e}});var e=(0,n(51900).Z)({},function(t,s){return t("div",{staticClass:"ds-card"},[s._t("default"),s._v(" "),t("div",{staticClass:"tabspage"},[s.$slots.tabspageCheck?t("div",{staticClass:"tabspageCheck"},[s._t("tabspageCheck")],2):s._e(),s._v(" "),t("div",{staticStyle:{flex:"1",overflow:"hidden"}},[s.$slots.header?t("div",{staticClass:"ds-card-header"},[s._t("header")],2):s._e(),s._v(" "),s.$slots.content?t("div",{staticClass:"ds-card-content"},[s._t("content")],2):s._e()]),s._v(" "),s.$slots.rightIcon?t("div",{staticClass:"rightIcon"},[s._t("rightIcon")],2):s._e()]),s._v(" "),s.$slots.footer?t("div",{staticClass:"ds-card-footer"},[s._t("footer")],2):s._e(),s._v(" "),s.$slots.footermin?t("div",{staticClass:"ds-card-footer ds-card-footer2"},[s._t("footermin")],2):s._e()],2)},[],!0,null,"1b02e7ea",null).exports},28554:function(t,s,n){"use strict";n.r(s),n.d(s,{default:function(){return g}});var e=n(5044),a=n(77193),s=n(27921),i=n.n(s),s=n(90487),o=n.n(s),s=n(26243),l=n.n(s),s=n(62680),c=n.n(s),s=n(95366),r=n.n(s),s=n(6919),u=n.n(s),d=(n(41775),n(9303),n(25108)),h=n(50361),s={name:"retrievalList",props:{finishedText:{type:String,default:"没有更多了"},list:{type:Array,default:function(){return[]}},mapping:{type:Object,default:function(){return null}}},data:function(){return{loading:!1,finished:!1,refreshing:!1,date:moment().format("YYYY-MM-DD")}},computed:{listMapping:function(){var n,e=this,t=this.mapping?(n=l()(this.mapping),(t=h(this.list)).map(function(s,t){n.forEach(function(t){s.hasOwnProperty(t)&&(s[e.mapping[t]]=s[t])})}),t):this.list;return t}},methods:{handleActionClick:function(){var t=arguments[0];(this["action-".concat(t)]||function(){d.log("action-".concat(t))}).apply(void 0,(0,e.Z)(Array.prototype.slice.call(arguments,1)))},handleLink:function(t){this.$router.push({name:"FormRDFile",params:{formData:{dataValue:{A0001:t.id,A0004:t.A0004}}}})},handleBack:function(){this.$emit("onBack")},onRefresh:function(){this.finished=!1,this.loading=!0,this.load()},load:function(){this.loading=!1,this.$emit("onLoad")}}},f=n(51900),s=(0,f.Z)(s,function(){var n=this,e=n._self._c;return e("div",{attrs:{id:"ds-list-box"}},[0===n.listMapping.length?e("commonempty"):n._e(),n._v(" "),0<n.listMapping.length?e("van-pull-refresh",{on:{refresh:n.onRefresh},model:{value:n.refreshing,callback:function(t){n.refreshing=t},expression:"refreshing"}},[e("van-list",{staticClass:"ds-list",attrs:{finished:n.finished,"immediate-check":!1,"finished-text":n.finishedText},on:{load:n.load},model:{value:n.loading,callback:function(t){n.loading=t},expression:"loading"}},n._l(n.listMapping,function(s,t){return e("div",{key:t,staticClass:"ds-result-list",on:{click:function(t){return n.handleLink(s)}}},[e("p",{staticClass:"ds-text"},[n._v(n._s(s.text||"暂无信息..."))]),n._v(" "),e("div",[e("p",{staticClass:"ds-result-icon ds-result-icon-left"},[e("span",{staticClass:"icon iconfont",class:s.icon||"iconGroup-"}),n._v(" "),e("span",[n._v(n._s(s.title||"收文"))])]),n._v(" "),e("p",{staticClass:"ds-result-icon ds-result-icon-right"},[e("span",{staticClass:"icon iconfont",class:s.icon||"iconrili"}),n._v(" "),e("span",[n._v(n._s(s.date||n.date))])])])])}),0)],1):n._e()],1)},[],!1,null,"eecce65c",null).exports,m=(0,f.Z)({name:"searchFilter",data:function(){return{search:{type:[{name:"收文"},{name:"发文"},{name:"签报"},{name:"用车"},{name:"收文"},{name:"发文"},{name:"签报"},{name:"用车"}],liuzhuan:[{name:"未开始"},{name:"进行中"},{name:"已起阅"},{name:"已结束"}],jieguo:[{name:"已签发"},{name:"未签发"},{name:"有领导批示"},{name:"未领导批示"}],yueban:[{name:"阅件"},{name:"办件"}]}}},mounted:function(){},methods:{}},function(){var n=this,e=n._self._c;return e("div",{staticClass:"ds-search-filter"},[e("div",{staticClass:"_type"},[e("h2",{staticClass:"ds_font3"},[n._v("按类型")]),n._v(" "),e("ul",n._l(n.search.type,function(t,s){return e("li",{key:s,staticClass:"ds_font6"},[n._v(" "+n._s(t.name)+" ")])}),0)]),n._v(" "),e("div",{staticClass:"_liuzhuan"},[e("h2",{staticClass:"ds_font3"},[n._v("按流转状态")]),n._v(" "),e("ul",n._l(n.search.liuzhuan,function(t,s){return e("li",{key:s,staticClass:"ds_font6"},[n._v(" "+n._s(t.name)+" ")])}),0)]),n._v(" "),e("div",{staticClass:"_jieguo"},[e("h2",{staticClass:"ds_font3"},[n._v("按结果")]),n._v(" "),e("ul",n._l(n.search.jieguo,function(t,s){return e("li",{key:s,staticClass:"ds_font6"},[n._v(" "+n._s(t.name)+" ")])}),0)]),n._v(" "),e("div",{staticClass:"_yueban"},[e("h2",{staticClass:"ds_font3"},[n._v("按阅办状态")]),n._v(" "),e("ul",n._l(n.search.yueban,function(t,s){return e("li",{key:s,staticClass:"ds_font6"},[n._v(" "+n._s(t.name)+" ")])}),0)])])},[],!1,null,"a8add9cc",null).exports,p=n(25108);function v(s,t){var n,e=l()(s);return c()&&(n=c()(s),t&&(n=n.filter(function(t){return r()(s,t).enumerable})),e.push.apply(e,n)),e}function _(s){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,a.Z)(s,t,n[t])}):u()?Object.defineProperties(s,u()(n)):v(Object(n)).forEach(function(t){Object.defineProperty(s,t,r()(n,t))})}return s}var g=(0,f.Z)({name:"search",components:{List:s,searchFilter:m},data:function(){return{bgColor:"#ffffff",showCancel:!1,activeName:"search",searchLogs:[],tags:[],searchTypeList:[{text:"标题",icon:"iconbiaoti"},{text:"文号",icon:"iconyouxuliebiao"},{text:"正文内容",icon:"iconwj-zw"},{text:"审批意见",icon:"iconshenpi"},{text:"标签",icon:"iconbiaoqian"}],mapping:{},list:[],pararms:{page:1,limit:15,_content:""},len:0,isMaxLength:!1}},mounted:function(){var t=i()(new(o())(dsf.util.loadLocalStore("searchLogs"))),s=dsf.util.loadLocalStore("pararms");this.searchLogs=t||[],this.pararms=_(_({},this.pararms),s)},methods:{onBack:function(){this.showCancel=!1,this.bgColor="#ffffff"},onLoad:function(){this.$set(this.pararms,"limit",this.pararms.limit+15);var t=_({},this.pararms);this.onhandleHttp(t)},clearSearchLogs:function(){this.searchLogs=[],localStorage.removeItem("searchLogs")},logSearch:function(t){this.$set(this.pararms,"_content",t),this.onSearch(t)},onSearch:function(t){this.showCancel=!0,this.bgColor="#f8f8f7";var s=this.searchLogs,t=(s.indexOf(t)<0&&t&&(s.length<10||s.shift(),s.push(t)),p.log("onSearch===",t),dsf.util.saveToLocalStore("searchLogs",s),_({},this.pararms));this.onhandleHttp(t)},onhandleHttp:function(t){var s,n=this;this.isMaxLength||(s=this.$route.params.searchObj||{},dsf.http.post("fn/search/mobileQ",_(_({},t),s)).done(function(t){n.len=t.datas.length,n.list=(0,e.Z)(t.datas),n.mapping={A0005:"title",B0001:"text",A0014:"date"}}).error(function(t){p.log("console",t),self.dsf.layer.toast("请求异常",!1)}))},clearTags:function(t){p.log(t),this.tags.splice(t,1)},onCancel:function(){this.showCancel=!1,this.bgColor="#ffffff"}}},function(){var n=this,e=n._self._c;return e("div",{staticClass:"ds-search bgColor",style:{backgroundColor:n.bgColor}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"search"===n.activeName,expression:"activeName === 'search'"}]},[n.showCancel?e("div",{staticClass:"ds-result"},[e("div",{staticClass:"ds-result-bg"}),n._v(" "),e("div",{staticClass:"ds-result-search"},[e("form",{attrs:{action:"javascript:return true"},on:{submit:function(t){t.preventDefault()}}},[e("van-search",{attrs:{shape:"round",background:"#ffffff","show-action":"",placeholder:"搜索标题、文号、正文内容、标签"},on:{search:n.onSearch,cancel:n.onCancel},model:{value:n.pararms._content,callback:function(t){n.$set(n.pararms,"_content",t)},expression:"pararms._content"}})],1)]),n._v(" "),e("List",{attrs:{list:n.list,mapping:n.mapping},on:{onLoad:n.onLoad,onBack:n.onBack}})],1):e("div",{staticClass:"ds-search-box"},[e("form",{attrs:{action:"javascript:return true"},on:{submit:function(t){t.preventDefault()}}},[e("van-search",{attrs:{offset:100,"show-action":n.showCancel,shape:"round",placeholder:"搜索标题、文号、正文内容、标签"},on:{search:n.onSearch,cancel:n.onCancel},model:{value:n.pararms._content,callback:function(t){n.$set(n.pararms,"_content",t)},expression:"pararms._content"}})],1),n._v(" "),e("div",[e("div",{staticClass:"ds-search-log"},[e("p",[n._v("\n            最近查询\n            "),e("van-icon",{staticClass:"ds-search-log-icon",attrs:{name:"cross"},on:{click:n.clearSearchLogs}})],1),n._v(" "),e("ul",{staticClass:"ds-log ds-searchLogs"},n._l(n.searchLogs,function(s,t){return e("li",{key:t,staticClass:"van-ellipsis",on:{click:function(t){return n.logSearch(s)}}},[n._v("\n              "+n._s(s)+"\n            ")])}),0)]),n._v(" "),e("div",{staticClass:"ds-search-log"},[e("p",[n._v("常用标签")]),n._v(" "),e("div",{staticClass:"ds-log"},n._l(n.tags,function(t,s){return e("van-tag",{key:t,staticClass:"ds-tags",attrs:{closeable:"",size:"medium",type:"primary"},on:{close:function(t){return n.clearTags(s)}}},[n._v("\n              "+n._s(t)+"\n            ")])}),1)]),n._v(" "),e("div",{staticClass:"ds-fix-bottom"},[e("van-row",{staticClass:"ds-search-bottom",attrs:{gutter:"10",type:"flex",justify:"center"}},[e("van-col",{attrs:{span:"7"}},[e("p",{staticClass:"ds-search-line"})]),n._v(" "),e("van-col",{attrs:{span:"10"}},[n._v("在这里可以搜索到")]),n._v(" "),e("van-col",{attrs:{span:"7"}},[e("p",{staticClass:"ds-search-line"})])],1),n._v(" "),e("ul",{staticClass:"ds-searchTypeList"},n._l(n.searchTypeList,function(t,s){return e("li",{key:s},[e("p",[e("span",{staticClass:"icon iconfont",class:t.icon})]),n._v("\n              "+n._s(t.text)+"\n            ")])}),0)],1)])])])])},[],!1,null,"f433f124",null).exports}}]);