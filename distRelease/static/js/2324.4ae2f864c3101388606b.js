"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[2324],{34527:function(e,t,i){i.d(t,{Z:function(){return s}});var n=i(25108),t={name:"commonHead",components:{},props:{},data:function(){return{tabIndex:0,type:0,option:[],keyword:"",showDialog:!1,showSelect:!1,selected:0,selectList:[{name:"按名称",term:[{name:"从A到Z",orderType:1,reversed:!1,value:1},{name:"从Z到A",orderType:1,reversed:!0,value:2}]},{name:"更新时间",term:[{name:"从近到远",orderType:3,reversed:!1,value:3},{name:"从远到近",orderType:3,reversed:!0,value:4}]},{name:"创建时间",term:[{name:"从近到远",orderType:2,reversed:!1,value:5},{name:"从远到近",orderType:2,reversed:!0,value:6}]},{name:"文件大小",term:[{name:"从小到大",orderType:4,reversed:!1,value:7},{name:"从大到小",orderType:4,reversed:!0,value:8}]}]}},computed:{},watch:{},created:function(){},mounted:function(){this.getMenus()},methods:{showSearchBox:function(){this.$router.push({name:"diskSearch"})},getMenus:function(){var i=this;dsf.http.post("fn/cloud/file/getMenu",{},{headers:{"Content-Type":"application/json"}}).then(function(e){var t=e.status,e=e.data;n.log(e,t),200===t&&(e.data.forEach(function(e){e.text=e.name,e.value=e.type}),i.type=e.data[0].value,i.$store.commit("setMenuType",i.type),i.option=e.data)}).catch(function(e){e.message})},change:function(e){this.$store.commit("setMenuType",this.option[e].type)},closeSelect:function(){this.showSelect=!1},changeSelect:function(e){this.selected=e},resetSelect:function(){this.selected=2}}},s=(0,i(51900).Z)(t,function(){var i=this,n=i._self._c;return n("div",{staticClass:"commonHead"},[n("van-search",{attrs:{placeholder:"在全部文件中搜索","left-icon":"",readonly:"",clearable:!1},on:{click:i.showSearchBox},scopedSlots:i._u([{key:"left-icon",fn:function(){return[n("i",{staticClass:"iconfont iconsousuo i1",staticStyle:{color:"#989A9F"}})]},proxy:!0}]),model:{value:i.keyword,callback:function(e){i.keyword=e},expression:"keyword"}}),i._v(" "),n("div",[n("van-tabs",{attrs:{ellipsis:!1},on:{change:i.change},model:{value:i.tabIndex,callback:function(e){i.tabIndex=e},expression:"tabIndex"}},i._l(i.option,function(e,t){return n("van-tab",{key:t,attrs:{title:e.name}})}),1)],1),i._v(" "),n("van-popup",{attrs:{position:"bottom",round:"","get-container":"#app"},model:{value:i.showSelect,callback:function(e){i.showSelect=e},expression:"showSelect"}},[n("div",{staticClass:"select-contain"},[n("div",{staticClass:"checkbox"},[i._v("多选")]),i._v(" "),i._l(i.selectList,function(e,t){return n("div",{key:t,staticClass:"select-box"},[n("span",[i._v(i._s(e.name))]),i._v(" "),n("div",i._l(e.term,function(t,e){return n("p",{key:e,class:{active:i.selected==t.value},on:{click:function(e){return i.changeSelect(t.value)}}},[i._v(i._s(t.name))])}),0)])}),i._v(" "),n("div",{staticClass:"btn"},[n("div",{class:{reset:2!=i.selected},on:{click:i.resetSelect}},[i._v("重置")]),i._v(" "),n("div",{staticClass:"finish",on:{click:i.closeSelect}},[i._v("完成")])])],2)])],1)},[],!1,null,"74ae117e",null).exports},69273:function(e,t,i){i.d(t,{Z:function(){return n}});var t={name:"fileTypeIcon",props:{fileName:{type:String,default:"cloud"},width:{type:Number,default:32},height:{type:Number,default:38},isDirectory:{type:Number,default:0}},components:{},data:function(){return{}},computed:{iconUrl:function(){var e=this.fileName.substr(this.fileName.lastIndexOf(".")+1);return 1==this.isDirectory?"./static/images/fileTypeIcons/folder.png":"./static/images/fileTypeIcons/"+e+".png"}},watch:{},methods:{},created:function(){},mounted:function(){},destroyed:function(){}},n=(0,i(51900).Z)(t,function(){var e=this,t=e._self._c;return t("van-image",{attrs:{src:e.iconUrl,width:e.width,height:e.height},scopedSlots:e._u([{key:"error",fn:function(){return[t("img",{attrs:{src:i(54073),alt:"",srcset:""}})]},proxy:!0}])})},[],!1,null,null,null).exports},2324:function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var t=i(34527),n=i(69273),s=i(25108),t={name:"recycle",components:{CommonHead:t.Z,fileTypeIcon:n.Z},data:function(){return{moreSvg:i(38922),moreFileSvg:i(3145),keyword:"",showDialog:!1,list:[],finished:!1,loading:!1,refreshing:!1,start:1,limit:15,show:!1,nodata:!1,showBatch:!1,result:[],isCheckAll:!0,showAction:!1,actions:[{name:"还原"},{name:"彻底删除"},{name:"详细信息"}],curObj:{},showDetail:!1}},computed:{},watch:{},methods:{onClickLeft:function(){this.$router.go(-1)},onLoad:function(){var i=this,n=this;n.nodata=!1,dsf.http.post("fn/cloud/recyclebin/list",{page:this.start,limit:this.limit},{headers:{"Content-Type":"application/json"}}).then(function(e){var t=e.status,e=e.data;i.loading=!1,s.log(e,t),200===t?(0==e.data.length&&1==n.start&&(n.nodata=!0),e&&e.data&&0<e.data.length&&(e.data.forEach(function(e){e.removeTime=e.createTime?moment(new Date(e.createTime)).format("YYYY/MM/DD HH:ss"):"",e.createTime=e.createTime?moment(new Date(e.createTime)).calendar():""}),n.list=n.list.concat(e.data)),e.data.length<n.limit?i.finished=!0:n.start+=1):(i.finished=!0,n.nodata=!0)}).catch(function(e){e.message;i.finished=!0,n.nodata=!0}).finally(function(){i.loading=!1,i.refreshing=!1})},doRefresh:function(){this.page=1,this.list=[],this.finished=!1,this.loading=!0,this.onLoad()},selectAll:function(){var t=this;this.isCheckAll?(this.result=[],this.list.forEach(function(e){1!=e.isDirectory&&t.result.push(e.id)})):this.result=[],this.isCheckAll=!this.isCheckAll},resultChange:function(){this.result.length==this.list.map(function(e){return 1!=e.isDirectory})?this.isCheckAll=!1:this.isCheckAll=!0},batchHaddle:function(e){var t=this;dsf.http.post("fn/cloud/recyclebin/fileOperate",{fileIds:this.curObj.id,operateType:e}).then(function(e){e.data&&"200"==e.data.code&&(t.showDetail=!1,t.doRefresh())}).catch(function(e){}).finally(function(){})},actionHanddle:function(e){this.curObj=e,this.showAction=!0},select:function(e,t){this.showAction=!1,2==t?this.showDetail=!0:this.batchHaddle(t+1)},onCancel:function(){this.showAction=!1}},created:function(){},mounted:function(){},destroyed:function(){}},a=(0,i(51900).Z)(t,function(){var i=this,n=i._self._c;return n("div",{staticClass:"recycle"},[n("div",{staticClass:"files"},[0!=i.list.length||i.loading?i._e():n("commonempty",{attrs:{description:"暂无文件"}}),i._v(" "),n("van-pull-refresh",{attrs:{disabled:i.finished},on:{refresh:i.doRefresh},model:{value:i.refreshing,callback:function(e){i.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:i.finished},on:{load:i.onLoad},model:{value:i.loading,callback:function(e){i.loading=e},expression:"loading"}},[n("van-checkbox-group",{on:{change:i.resultChange},model:{value:i.result,callback:function(e){i.result=e},expression:"result"}},[n("div",{staticClass:"dongtai"},[i.showBatch?n("van-checkbox",{attrs:{name:i.item.id,disabled:1==i.item.isDirectory}}):i._e(),i._v(" "),i._l(i.list,function(t,e){return n("div",{key:e,staticClass:"file"},[n("fileTypeIcon",{staticClass:"icon",attrs:{width:30,height:38,"file-name":t.fileName,isDirectory:t.fileSuffix?-1:1}}),i._v(" "),n("div",{staticClass:"content"},[n("p",[n("span",[i._v(i._s(t.fileName))]),i._v(" "),n("span",[i._v(i._s(t.createTime)+" "+i._s(t.userName)+" "),n("label",[i._v("删除")])])]),i._v(" "),n("van-image",{attrs:{src:i.moreFileSvg},on:{click:function(e){return i.actionHanddle(t)}}})],1)],1)})],2)])],1)],1)],1),i._v(" "),n("van-action-sheet",{attrs:{actions:i.actions,"cancel-text":"取消","close-on-click-action":""},on:{cancel:i.onCancel,select:i.select},model:{value:i.showAction,callback:function(e){i.showAction=e},expression:"showAction"}}),i._v(" "),n("van-popup",{style:{height:"100%"},attrs:{position:"bottom"},model:{value:i.showDetail,callback:function(e){i.showDetail=e},expression:"showDetail"}},[i.showDetail?n("div",{staticClass:"diskFileDetail"},[n("van-nav-bar",{attrs:{title:"回收站","left-text":"返回","left-arrow":""},on:{"click-left":function(e){i.showDetail=!1}}}),i._v(" "),n("div",{staticClass:"top"},[n("fileTypeIcon",{staticClass:"icon",attrs:{width:30,height:38,"file-name":i.curObj.fileName,isDirectory:i.curObj.fileSuffix?-1:1}}),i._v(" "),n("span",[i._v(i._s(i.curObj.fileName))])],1),i._v(" "),n("div",{staticClass:"filerow"},[n("span",{staticClass:"tit"},[i._v("大小")]),i._v(" "),n("span",{staticClass:"text"},[i._v(i._s(i.curObj.fileSize))])]),i._v(" "),n("div",{staticClass:"filerow"},[n("span",{staticClass:"tit"},[i._v("删除时间")]),i._v(" "),n("span",{staticClass:"text"},[i._v(i._s(i.curObj.removeTime))])]),i._v(" "),n("div",{staticClass:"filerow"},[n("span",{staticClass:"tit"},[i._v("删除者")]),i._v(" "),n("span",{staticClass:"text"},[i._v(i._s(i.curObj.userName))])]),i._v(" "),n("div",{staticClass:"filerow"},[n("span",{staticClass:"tit"},[i._v("位置")]),i._v(" "),n("span",{staticClass:"text"},[i._v(i._s(i.curObj.fileSize))])]),i._v(" "),n("div",{staticClass:"huanyuan",on:{click:function(e){return i.batchHaddle(1)}}},[i._v("还原")])],1):i._e()])],1)},[],!1,null,"9e2a9c76",null).exports},3145:function(e,t,i){e.exports=i.p+"static/img/more-file.dcc4cb0..svg"},38922:function(e,t,i){e.exports=i.p+"static/img/more.c306a04..svg"},54073:function(e,t,i){e.exports=i.p+"static/img/cloud.e0e5c0c..png"}}]);