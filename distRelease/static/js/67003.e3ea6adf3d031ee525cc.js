"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[67003],{67003:function(t,n,i){i.r(n),i.d(n,{default:function(){return e}});var n=i(27921),o=i.n(n),n=i(90487),l=i.n(n),n=i(84528),d=i(25108),n={name:"MeetingSignUpStatus",components:{dingBtn:n.default},data:function(){return{id:this.$route.query.id||"",dingObj:{users:["100","101"]},dingObjbaoming:{},tabIndex:0,tabData1:{count:0,loading:!1,finished:!0,list:[]},tabData2:{count:0,loading:!1,finished:!0,list:[]},tabData3:{count:0,loading:!1,finished:!0,list:[]},meetingNoToDoUrl:dsf.config.meetingConfig.meetingNoToDoUrl,meetingToDoUrl:dsf.config.meetingConfig.meetingToDoUrl}},created:function(){d.log(this.id),this.getMeetingTZTODO(),this.getMeetingTZUNTODO()},methods:{onLoad1:function(){},onLoad2:function(){},onLoad3:function(){},getMeetingTZTODO:function(){var e=this,t=this.dsf.layer.loading();dsf.http.post(this.meetingToDoUrl,{meetingtzId:this.id,"x-auth-token":dsf.util.loadSessionStore("loginToken")}).done(function(t){var n,i;"200"===t.code?(i=[],t.data.forEach(function(n){n.attendanceUserlist="",n.children&&n.children.forEach(function(t){n.attendanceUserlist+=t.user_name+","}),n.attendanceUserlist.endsWith(",")&&(n.attendanceUserlist=n.attendanceUserlist.substring(0,n.attendanceUserlist.length-1)),0<n.foreign_id.length&&i.push(n.foreign_id),n.children&&n.children.forEach(function(t){0<t.foreign_id.length&&i.push(t.foreign_id)}),e.tabData1.list.push(n)}),n=dsf.util.loadSessionStore("user"),i=o()(new(l())(i)).filter(function(t){if(t.length&&t!=n.foreignId)return t}),d.log("users:",i),e.$set(e.dingObjbaoming,"users",i)):e.dsf.layer.toast(t.message)}).error(function(t){e.dsf.layer.toast(t.message)}).always(function(){e.dsf.layer.closeLoading(t)})},getMeetingTZUNTODO:function(){var s=this;dsf.http.post(this.meetingNoToDoUrl,{meetingtzId:this.id,"x-auth-token":dsf.util.loadSessionStore("loginToken")}).done(function(t){var i,e,a,n;"200"===t.code?(s.tabData2.list=t.data,e=[],t.data.forEach(function(t){var n;e.indexOf(t.foreign_id)<0&&(0<=t.foreign_id.indexOf(",")?(n=t.foreign_id.split(",").filter(function(t){if(0<t.length)return t}),e=e.concat(n)):e.push(t.foreign_id))}),i=dsf.util.loadSessionStore("user"),e=o()(new(l())(e)).filter(function(t){if(t.length&&t!=i.foreignId)return t}),a={},(n=t.data.reduce(function(t,n){return a[n.foreign_id]||n.foreign_id==i.foreignId||(a[n.foreign_id]=t.push(n)),t},[])).forEach(function(t){t.id=t.foreign_id}),d.log(n),s.$set(s.dingObj,"users",e),s.$set(s.dingObj,"selectPerson",n)):s.dsf.layer.toast(t.message)}).error(function(t){s.dsf.layer.toast(t.message)}).always(function(){})}}},e=(0,i(51900).Z)(n,function(){var i=this,e=i._self._c;return e("div",{staticClass:"ds-meeting-sign-up-status"},[e("van-tabs",{attrs:{type:"card",animated:"",sticky:""},model:{value:i.tabIndex,callback:function(t){i.tabIndex=t},expression:"tabIndex"}},[e("van-tab",[e("div",{staticClass:"tab_title",attrs:{slot:"title"},slot:"title"},[i._v("\n        未报名\n        "),i.tabData2.list.length?e("span",[i._v("("+i._s(i.tabData2.list.length)+")")]):i._e()]),i._v(" "),e("div",{staticClass:"not-sign common"},[e("van-list",{attrs:{finished:i.tabData2.finished,"finished-text":""},on:{load:i.onLoad2},model:{value:i.tabData2.loading,callback:function(t){i.$set(i.tabData2,"loading",t)},expression:"tabData2.loading"}},[e("div",{staticClass:"not-sign-list common-list"},[i._l(i.tabData2.list,function(t,n){return e("div",{key:n,staticClass:"common-list-item"},[e("i",{staticClass:"iconfont icontouxiang"}),i._v(" "),e("span",{staticClass:"common-list-item-name"},[i._v(i._s(t.user_name))]),i._v(" "),0<t.isRead?e("button",{staticClass:"common-list-item-button readed"},[i._v("已阅读")]):e("button",{staticClass:"common-list-item-button notRead"},[i._v("未阅读")])])}),i._v(" "),0===i.tabData2.list.length?e("commonempty"):i._e()],2)]),i._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:i.tabData2.list.length,expression:"tabData2.list.length"}],staticClass:"not-sign-footer"},[e("dingBtn",{attrs:{pk:i.id,btntype:"ding",prarms:i.dingObj,text:"DING一下"}})],1)],1)]),i._v(" "),e("van-tab",[e("div",{staticClass:"tab_title",attrs:{slot:"title"},slot:"title"},[i._v("\n        已报名\n        "),i.tabData1.list.length?e("span",[i._v("("+i._s(i.tabData1.list.length)+")")]):i._e()]),i._v(" "),e("van-list",{attrs:{finished:i.tabData1.finished,"finished-text":""},on:{load:i.onLoad1},model:{value:i.tabData1.loading,callback:function(t){i.$set(i.tabData1,"loading",t)},expression:"tabData1.loading"}},[e("div",{staticClass:"signed-list common-list"},i._l(i.tabData1.list,function(t){return e("div",{key:t.id,staticClass:"common-list-item comment_item"},[e("div",{staticClass:"common_title"},[e("span",{staticClass:"common-list-item-name common_title_span"},[i._v(i._s(t.user_name))]),i._v(" "),e("span",{staticClass:"signed-list-item-time common_title_spanr"},[i._v(i._s(t.time))])]),i._v(" "),t.children?e("div",{staticClass:"common_name"},[e("span",{staticClass:"common-list-item-name"},[i._v(i._s(1==t.attendance?"参会人："+t.attendanceUserlist:"代会人："+t.attendanceUserlist))])]):i._e(),i._v(" "),e("div",{staticClass:"common_content"},[-1==t.attendance?e("span",{staticClass:"common-list-item-name"},[i._v("\n                请假原因："+i._s(t.leaveReason)+"\n              ")]):i._e()])])}),0),i._v(" "),0===i.tabData1.list.length?e("commonempty"):i._e()],1),i._v(" "),0<i.tabData1.list.length?e("div",{staticClass:"not-sign-footer"},[e("dingBtn",{attrs:{btntype:"video",prarms:i.dingObjbaoming,text:"视频会议"}})],1):i._e()],1)],1)],1)},[],!1,null,"61cdff5a",null).exports}}]);