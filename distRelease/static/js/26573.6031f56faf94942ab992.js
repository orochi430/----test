"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[26573],{26573:function(t,e,a){a.r(e),a.d(e,{default:function(){return g}});var e=a(26243),o=a.n(e),e=a(62680),s=a.n(e),e=a(95366),i=a.n(e),e=a(6919),n=a.n(e),r=a(66250),l=a(77193),e=a(33453),c=a.n(e),e=a(20629),h=a(5044),u=(a(88152),a(58086)),u={components:(0,l.Z)({},u.Z.name,u.Z),props:{showOrder:{type:Boolean},data:{type:Array,default:function(){return[]}},showDefault:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},showSlider:{type:Boolean,default:!1},adjoinGrey:{type:Boolean,default:!1},tbHighLight:{type:Boolean,default:!1},title:{type:String,default:""},tableHeader:{type:Array}},data:function(){return{slider:0,isShow:!1,dataList:this.data.slice(),order:"original",headerLength:5}},watch:{data:function(t){this.dataList=t}},computed:{tableWidth:function(){return 100+this.slider},tableSize:function(){return.28+this.slider/1e3}},mounted:function(){var t=this;this.$refs.dsfTable&&this.$refs.dsfTable.addEventListener("touchend",function(){clearTimeout(t.timeout),t.isShow=!0,t.timeout=setTimeout(function(){return t.isShow=!1},2e3)})},methods:{onChange:function(t){},sort:function(n){var o,t,e,s=this;"defaultSort"==n.showCategory?(this.order="original",this.dataList=this.data):"showArrow"!=n.showCategory&&"canSort"!=n.showCategory||(o=function(t,e){for(var a=[];0<t.length&&0<e.length;)Number(t[0].dataValue[n.showMetaColumn])<Number(e[0].dataValue[n.showMetaColumn])?"up"==s.order?a.push(t.shift()):a.push(e.shift()):"up"==s.order?a.push(e.shift()):a.push(t.shift());return[].concat(a,(0,h.Z)(t),(0,h.Z)(e))},e=function t(e){var a,n;return 1==e.length?e:(a=Math.floor(e.length/2),n=e.slice(0,a),e=e.slice(a),o(t(n),t(e)))},"up"==this.order?this.order="down":"down"==this.order?this.order="original":this.order="up","original"==this.order?this.dataList=this.data:(t=this.dataList[0],e=e(this.dataList.slice(1)),this.dataList=[t].concat(e)))}}},d=a(51900),u=(0,d.Z)(u,function(){var n=this,o=n._self._c;return o("div",[0<n.showDefault.length?o("div",{staticClass:"top"},[n._l(n.showDefault,function(t,e){return[t.showName?o("div",{key:e},[t.showName?o("span",[n._v(n._s(t.showName))]):n._e(),n._v(" "),t.text?o("span",[n._v(":"+n._s(t.text))]):n._e()]):n._e()]})],2):n._e(),n._v(" "),n.columns.length?o("div",{ref:"dsfTable",staticClass:"dsf-table"},[o("div",{staticClass:"table",style:{width:n.tableWidth+"vw",fontSize:n.tableSize+"rem"}},[n.tableHeader&&0!=n.tableHeader.length?o("van-row",{attrs:{type:"flex",justify:"space-between"}},[n._l(n.tableHeader,function(a,t){return[a.children?o("van-col",{key:t,class:{highLight:n.tbHighLight},style:{width:a.children?"".concat(100/n.headerLength*a.children.length,"%"):"".concat(100/n.headerLength,"%")}},[o("van-row",{attrs:{type:"flex",justify:"center"}},[o("span",{style:{color:n.tbHighLight?"#fff":"",verticalAlign:"center"}},[n._v(n._s(a.showName))])]),n._v(" "),o("van-row",{attrs:{type:"flex",justify:"space-between"}},n._l(a.children,function(e,t){return o("van-col",{key:t,staticClass:"flex jc ac",class:{highLight:n.tbHighLight},style:{width:100/a.children.length+"%"},on:{click:function(t){n.sort(n.columns.find(function(t){return t.showName==e.showName}))}}},[o("span",{style:{color:n.tbHighLight?"#fff":"",verticalAlign:"center"}},[n._v(n._s(e.showName)+"\n                                    "),n.columns.find(function(t){return t.showName==e.showName})&&-1<["defaultSort","canSort","showArrow"].indexOf(n.columns.find(function(t){return t.showName==e.showName}).showCategory)?o("van-icon",{attrs:{name:"sort",size:"10px"}}):n._e()],1)])}),1)],1):o("van-col",{key:t,staticClass:"flex jc ac",class:{highLight:n.tbHighLight},style:{width:a.children?"".concat(100/n.headerLength*a.children.length,"%"):"".concat(100/n.headerLength,"%")},on:{click:function(t){n.sort(n.columns.find(function(t){return t.showName==a.showName}))}}},[o("span",{style:{color:n.tbHighLight?"#fff":"",verticalAlign:"center"}},[n._v(n._s(a.showName)+"\n                            "),-1<["defaultSort","canSort","showArrow"].indexOf(n.columns.find(function(t){return t.showName==a.showName}).showCategory)?o("van-icon",{attrs:{name:"sort",size:"10px"}}):n._e()],1)])]})],2):[n.title?o("van-row",{staticStyle:{"font-size":"var(--font_size_2)"}},[o("van-col",{class:{highLight:n.tbHighLight},style:{color:n.tbHighLight?"#fff":"",padding:"0.2rem 0"},attrs:{span:"24"}},[n._v(n._s(n.title))])],1):n._e(),n._v(" "),o("van-row",{attrs:{type:"flex",justify:"space-between"}},n._l(n.columns,function(e){return o("van-col",{key:e.showMetaColumn,staticClass:"flex jc ac",class:{highLight:n.tbHighLight},style:{width:100/n.columns.length+"%"},on:{click:function(t){return n.sort(e)}}},[o("span",{style:{color:n.tbHighLight?"#fff":"",verticalAlign:"center"}},[n._v(n._s(e.showName)+"\n                            "),-1<["defaultSort","canSort","showArrow"].indexOf(e.showCategory)?o("van-icon",{attrs:{name:"sort",size:"10px"}}):n._e()],1)])}),1)],n._v(" "),n._l(n.dataList,function(e,a){return o("van-row",{key:a,class:{highLight:e.dataValue.isHighLight},style:{backgroundColor:n.adjoinGrey&&a%2==0?"#f1f1f1":""},attrs:{type:"flex",justify:"space-between"}},n._l(n.columns,function(t){return o("van-col",{key:t.showMetaColumn,style:{width:100/n.columns.length+"%",textAlign:"showArrow"==t.showCategory?"right":""}},[n.showOrder&&"col1"==t.showMetaColumn&&0!==a?o("span",[n._v(n._s(a))]):n._e(),n._v(" "),o("span",[n._v(n._s(e.dataValue[t.showMetaColumn]))]),n._v(" "),"showArrow"==t.showCategory?o("van-icon",{style:{transform:0<e.dataValue[t.showMetaColumn]?"rotate(180deg)":""},attrs:{name:"down",color:0<e.dataValue[t.showMetaColumn]?"#4daf7b":"#e32416"}}):n._e()],1)}),1)})],2)]):n._e()])},[],!1,null,"7707f0c5",null).exports,f=a(25108);function w(e,t){var a,n=o()(e);return s()&&(a=s()(e),t&&(a=a.filter(function(t){return i()(e,t).enumerable})),n.push.apply(n,a)),n}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach(function(t){(0,l.Z)(e,t,a[t])}):n()?Object.defineProperties(e,n()(a)):w(Object(a)).forEach(function(t){Object.defineProperty(e,t,i()(a,t))})}return e}var a={components:{DsfListTable:u},props:["oppsetTop","params","clickTabIndex","allTab"],data:function(){return{keyword:"",columns:[],data:[],showDefault:[],showPicker:!1,chooseTime:"",loading:!0,title:"",selectColumns:[],tableHeader:[]}},computed:p(p({fileType:function(){return this.$route.query.fileType||this.params.params.fileType}},(0,e.rn)({isShowAppHeader:function(t){return t.isShowAppHeader}})),{},{isShowSearchBox:function(){return this.$route.query.timeFilter}}),created:function(){var e=this;return(0,r.Z)(c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSelectColumns();case 2:e.chooseTime=e.selectColumns[0],e.init();case 4:case"end":return t.stop()}},t)}))()},methods:{getSelectColumns:function(){var e=this;if(this.params.url)return dsf.http.post(this.params.url).then(function(t){200==t.data.code?e.selectColumns=t.data.data:e.selectColumns=[]});var t=[],a=new Date,n=(a.getFullYear(),(new Date).getMonth());a.setMonth(a.getMonth()+1,1);for(var o=0;o<12+n+1;o++){a.setMonth(a.getMonth()-1);var s=(s=a.getMonth()+1)<10?"0"+s:s;t.push({text:a.getFullYear()+"年"+s+"月",value:"".concat(a.getFullYear(),"-").concat(s)})}this.selectColumns=t},changeFn:function(t){f.log(t),this.chooseTime=t,this.showPicker=!1,this.init()},init:function(){var e=this,t={type:this.fileType};this.chooseTime&&(t.from="".concat(this.chooseTime.value.slice(0,4),"-01"),t.to="".concat(this.chooseTime.value.slice(0,4),"-").concat(this.chooseTime.value.slice(5,7))),this.loading=!0,dsf.http.post("ctrl/news/tableList",t).then(function(t){e.columns=t.data.showColumn,e.data=t.data.datas,e.showDefault=t.data.showDefault,e.tableHeader=t.data.tableHeader||[],e.title=t.data.title}).error(function(t){dsf.layer.toast("系统出错，请再次尝试")}).always(function(){e.loading=!1})},onSearch:function(){this.init()}}},g=(0,d.Z)(a,function(){var e=this,t=e._self._c;return t("div",[e.params&&e.params.topRemark?t("div",{staticClass:"topRemark"},[e._v(e._s(e.params.topRemark))]):e._e(),e._v(" "),e.allTab?t("div",{staticClass:"allTab"},[t("span",{staticClass:"choose"},[t("span",{on:{click:function(t){e.showPicker=!0}}},[e._v(e._s(e.chooseTime.text)),t("van-icon",{attrs:{name:"arrow-down"}})],1)]),e._v(" "),t("span",[t("span",{staticClass:"tabIndex"},[e._v(e._s(e.clickTabIndex))]),e._v(" / "+e._s(e.allTab))])]):e._e(),e._v(" "),t("DsfListTable",{attrs:{columns:e.columns,data:e.data,"show-default":e.showDefault,showSlider:!0,adjoinGrey:!0,tbHighLight:!0,title:e.title,tableHeader:e.tableHeader,showOrder:!!e.params.showOrder}}),e._v(" "),e.loading?t("van-loading",{attrs:{size:"24px",vertical:""}},[e._v("加载中...")]):e._e(),e._v(" "),t("van-popup",{attrs:{"get-container":"#app",position:"bottom",round:""},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.selectColumns},on:{confirm:e.changeFn,cancel:function(t){e.showPicker=!1}}})],1)],1)},[],!1,null,"1c0de10e",null).exports}}]);