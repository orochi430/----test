"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[29737],{29737:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var a=n(25108),t={components:{},data:function(){return{fontSize:.32,loading:!0,news:{title:null,time:null,viewsCount:null,image:null,content:null,publisher:null,files:null,images:null},counts:0,imgPreview:!1,previewImg:[]}},created:function(){var e,t=this;dsf.url.setTitle(" "),null!=(e=this.$route.params)&&e.data?this.getNewsDetail():dsf.http.post("/fn/newscontent/detail",{id:this.$route.query.id}).then(function(e){a.log(e),t.news=e.data.data,t.counts=e.data.data.attachFile.length})},mounted:function(){},methods:{getNewsDetail:function(){this.news=this.$route.params.data,this.counts=this.$route.params.data.attachFile.length,this.loading=!1},filePre:function(e){var t=this,i={fileId:e.fileId,moduleId:"220803111621B521Wfaj0JHZLp0lbpU",fileName:e.fileName,flowId:0,nodeId:-1,screenWidth:375,"x-auth-token":dsf.util.loadSessionStore("loginToken"),addLoading:1},n=e.fileName.lastIndexOf("."),n=e.fileName.substr(n+1).toLowerCase();a.log(n),-1<["png","jpg","jpeg","bmp","gif"].indexOf(n)?(this.imgPreview=!0,n=dsf.url.getWebPath("ctrl/file/download?infoId=".concat(e.infoId,"&fileId=").concat(e.fileId,"&fileName=").concat(e.fileName)),this.previewImg=[n],a.log(n)):dsf.http.post("/fn/office/openMobileOffice",i).then(function(e){200==e.data.code&&t.$router.push({name:"dsfIframe",query:{url:e.data.message}})}).error(function(e){dsf.layer.toast("文件预览失败！")})}}},i=(0,n(51900).Z)(t,function(){var i=this,e=i._self._c;return e("div",{ref:"elecDetail"},[e("div",{staticClass:"detail"},[e("div",{staticClass:"title",domProps:{innerHTML:i._s(i.news.title)}}),i._v(" "),e("div",{staticClass:"time"},[e("van-row",[e("van-col",[i._v("作者："+i._s(i.news.publisher))]),i._v(" "),e("van-col",{staticClass:"releData"},[i._v("发布日期："+i._s(i.news.time))])],1)],1),i._v(" "),e("div",{staticClass:"content",style:{fontSize:i.fontSize+"rem"},domProps:{innerHTML:i._s(i.news.content)}}),i._v(" "),e("div",{staticClass:"fujian"},[i._v("相关附件("+i._s(i.counts)+")")]),i._v(" "),i._l(i.news.attachFile,function(t){return e("div",{key:t.fileId,staticClass:"file",on:{click:function(e){return i.filePre(t)}}},[e("img",{attrs:{src:n(94605),alt:""}}),i._v(" "),e("span",[i._v(i._s(t.fileName))])])})],2),i._v(" "),e("van-image-preview",{attrs:{images:i.previewImg,closeable:""},model:{value:i.imgPreview,callback:function(e){i.imgPreview=e},expression:"imgPreview"}})],1)},[],!1,null,"4dcb8cc8",null).exports},94605:function(e,t,i){e.exports=i.p+"static/img/attacIcon.1106cd5..png"}}]);