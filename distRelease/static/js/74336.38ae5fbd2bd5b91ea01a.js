"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[74336],{63002:function(e,t,a){a.r(t);var l=a(25108);t.default={forwardSign:function(e,a,t,o,n){dsf.http.post("fn/swglsx/getLdps",{pk:o.pk}).then(function(e){var t=e.data;1<t.data.length?(o.componentName="sxForwardSign",o.formParams.forwardSign=t.data):1==t.data.length&&(t.data[0].convertLdpsInfoId?(o.componentName="sxForwardSign",o.formParams.forwardSign=t.data):dsf.layer.confirm({message:"是否确定转为领导批示？",confirmButtonText:"确认"},function(){dsf.http.post("fn/convert/moduleConvert",{sourceModule:a.parameters.moduleId,targetModule:"231021182454DIvMsj0WRzJIVVswcJh",srcInfo:a.parameters.pk,fwPnid:t.data[0].pNId}).then(function(e){200==e.data.code?dsf.layer.toast("已成功转为领导批示！"):dsf.layer.toast("类别转换失败")})}))})},acceptWeaver:function(e,t,a,s,o){var r=null;function c(e,o,t,a,n){setTimeout(function(){var t,a;e&&(t=o,a=e,dsf.http.post("fn/weaverExchange/docStatusCallBack",{pk:n.pk,recvType:1}).then(function(e){e=e.data;dsf.layer.closeLoading(r),200==e.code?dsf.layer.toast("操作成功",function(){s.$router.replace({path:"/commonForm/".concat(t,"/").concat(a,"/1"),query:{closePage:1}})}):dsf.layer.toast("操作失败")}))},800)}function i(e,t,o,a,n,d){e={pk:e,convertId:t,targetModuleId:o,isConvertToDo:void 0!==a.isConvertToDo&&a.isConvertToDo,doSign:void 0===a.doSign||a.doSign,ruleId:n};dsf.http.post("ctrl/remoteExchange/acceptByRule",e).then(function(e){var t,a;"success"==e.data.type&&e.data.data?(a=(t=e.data.data).pk,t.moduleName,dsf.http.post("ctrl/dreamWebsocket/sendMessageToCurrentUser",{badgeType:"remoteDoc"}),c(a,o,0,0,d)):(dsf.layer.closeLoading(r),dsf.layer.toast(e.data.message))})}!function(e,o,t){var n=2<arguments.length&&void 0!==t?t:{},d=(r=dsf.layer.loading(),{docId:a.main.A0002.value,recvType:"1",recvInfo:"",pk:o});dsf.http.post("ctrl/remoteExchangeData/getReceiveTarget",{rcvRecordId:o}).then(function(a){var e;"success"===a.data.type?a.data.data&&1<a.data.data.length?s.$refs.ckDialog.show(a.data.data,"请选择要转换的目标模块","ruleId","ruleName",[],!1).then(function(t){l.log(t);var e=a.data.data.find(function(e){return e.ruleId==t[0]});i(o,e.id,e.targetModuleId,n,e.ruleId,d)}).catch(function(){dsf.layer.closeLoading(r),dsf.layer.toast("请选择要转换的目标模块")}):a.data.data&&0<a.data.data.length?(e=a.data.data[0],n.convertId=e.id,n.ruleId=e.ruleId,n.exchangeDocType=e.exchangeDocType,i(o,e.id,e.targetModuleId,n,e.ruleId,d)):(dsf.layer.closeLoading(r),dsf.layer.toast("签收模块未配置")):(dsf.layer.closeLoading(r),dsf.layer.toast("转换失败"))})}(t.parameters.moduleId,t.parameters.pk)},rejectWeaver:function(e,t,a,o,n){o.componentName="sxCopyOpinion",o.formParams.showWeaver=!0,o.spHandleJS.closeDialogCallback=function(e){"确定"==e.actionName&&(e={docId:a.main.A0002,recvType:"2",recvInfo:e.value,pk:t.parameters.pk},dsf.http.post("fn/weaverExchange/docStatusCallBack",e).then(function(e){200==e.data.code?dsf.http.post("ctrl/dreamWebsocket/sendMessageToCurrentUser",{badgeType:"remoteDoc"}).then(function(){dsf.http.post("ctrl/dreamWebsocket/sendMessageToCurrentUser",{badgeType:"notice"}).then(function(){dsf.layer.toast("操作成功",function(){o.backSucces()})})}):dsf.layer.toast("操作失败")}))}},changeOpinion:function(e,t,a,o,n){o.componentName="opinionSxDialog",o.spHandleJS.closeDialogCallback=function(e){o.initData()}},delFlowFile:function(e,t,a,o,n){var d=a.main.A0001.value,s=a.main.A0004.value;dsf.layer.confirm({message:"确定要彻底删除文件吗？",confirmButtonText:"确认"},function(){dsf.http.post("fn/shareRead/toDelFlowFile",{infoId:d,moduleId:s}).then(function(e){"success"==e.data.type?dsf.http.post("fn/lxOperData/delData",{infoId:d}).then(function(){dsf.layer.toast(e.data.message),o.backSucces()}):dsf.layer.toast(e.data.message)})})},shanxiRelease:function(t,a,o,n,d,s){var e={infoId:o.main.A0001.value,bh:o.main.B0003.value,bt:o.main.B0001.value,tsrId:o.main["C-REPORT-PUBLICATION-0008"].value,tsbt:o.main["231124151534qUJ6fuhvWB66gbKWz1H"].value,moduleId:o.main.A0004.value};"Aw6aX6SQdlpb3it"==a.parameters.nodeId?n.saveNoTip(function(){dsf.layer.confirm({title:"信息",message:"是否发布并办结?",confirmButtonText:"确定",cancelButtonText:"取消"},function(){dsf.http.post("fn/informationDataController/docxToHtmlTextAfterPublish",e).then(function(e){l.log(e),"200"==e.data.code&&(o.main["C-REPORT-PUBLICATION-0006"].text="已发布",o.main["C-REPORT-PUBLICATION-0006"].value="1",n.buttonHandle.send(t,a,o,n,d,s))})},function(){l.log("取消发布")})}):dsf.http.post("fn/informationDataController/docxToHtmlTextAfterPublish",e).then(function(e){"200"==e.data.code&&dsf.layer.toast("发布成功!")})},convertToLeaderPs:function(t,a,o,n,d){var e=a.parameters.pk;dsf.http.post("fn/informationDataController/checkHaveConverted",{infoId:e}).then(function(e){"success"==e.data.type?"0"!=e.data.data?dsf.layer.confirm({message:"已生成过领导批示，是否需再次生成？",confirmButtonText:"确认"},function(){n.buttonHandle["Public.moduleRuleConvert"](t,a,o,n,d,"",{convertId:"231130151924DWxUHL4ajooqw6zVkcs"})}):n.buttonHandle["Public.moduleRuleConvert"](t,a,o,n,d,"",{convertId:"231130151924DWxUHL4ajooqw6zVkcs"}):dsf.layer.toast("服务器出错！")})},xformSendFilter:function(e,t,a,o,n){dsf.http.post("fn/operLog/saveOper",{operName:o.nowButton.name,operPosition:o.$route.name,operData:o.nowButton.action,pk:t.parameters.pk,bt:a.main.B0001.value,isPc:2}).then(function(){o.buttonHandle.send(e,t,a,o,n)})}}}}]);