"use strict";(self.webpackChunkxianzhengding=self.webpackChunkxianzhengding||[]).push([[49553],{49553:function(t,n,a){a.r(n),a.d(n,{default:function(){return i}});var n=a(27921),s=a.n(n),n=a(90487),o=a.n(n),n=a(84528),l=a(25108),n={name:"MeetingSignUpStatusXZD",components:{dingBtn:n.default},data:function(){return{id:this.$route.query.id||"",dingObj:{users:["100","101"]},tabIndex:0,tabData1:{count:0,loading:!1,finished:!0,list:[]},tabData2:{count:0,loading:!1,finished:!0,list:[]},tabData3:{count:0,loading:!1,finished:!0,list:[]},meetingNoToDoUrl:dsf.config.meetingConfig.meetingNoToDoUrl,meetingToDoUrl:dsf.config.meetingConfig.meetingToDoUrl}},created:function(){this.getMeetingTZTODO(),this.getMeetingTZUNTODO()},methods:{onLoad1:function(){},onLoad2:function(){},onLoad3:function(){},getMeetingTZTODO:function(){var n=this,t=this.dsf.layer.loading();dsf.http.post(this.meetingToDoUrl,{meetingtzId:this.id,"x-auth-token":dsf.util.loadSessionStore("loginToken")}).done(function(t){"200"===t.code?t.data.forEach(function(t){n.tabData1.list.push(t)}):n.dsf.layer.toast(t.message)}).error(function(t){n.dsf.layer.toast(t.message)}).always(function(){n.dsf.layer.closeLoading(t)})},getMeetingTZUNTODO:function(){var n=this;dsf.http.post(this.meetingNoToDoUrl,{meetingtzId:this.id,"x-auth-token":dsf.util.loadSessionStore("loginToken")}).done(function(t){var a,i,e;"200"===t.code&&(n.tabData2.list=t.data,i=[],t.data.forEach(function(t){var n;i.indexOf(t.foreign_id)<0&&(0<=t.foreign_id.indexOf(",")?(n=t.foreign_id.split(",").filter(function(t){if(0<t.length)return t}),i=i.concat(n)):i.push(t.foreign_id))}),a=dsf.util.loadSessionStore("user"),i=s()(new(o())(i)).filter(function(t){if(t.length&&t!=a.foreignId)return t}),e={},(t=t.data.reduce(function(t,n){return e[n.foreign_id]||n.foreign_id==a.foreignId||(e[n.foreign_id]=t.push(n)),t},[])).forEach(function(t){t.id=t.foreign_id}),l.log(t,i),n.$set(n.dingObj,"users",i),n.$set(n.dingObj,"selectPerson",t))}).error(function(t){n.dsf.layer.toast(t.message)}).always(function(){})}}},i=(0,a(51900).Z)(n,function(){var a=this,i=a._self._c;return i("div",{staticClass:"ds-meeting-sign-up-status"},[i("van-tabs",{attrs:{type:"card",animated:"",sticky:""},model:{value:a.tabIndex,callback:function(t){a.tabIndex=t},expression:"tabIndex"}},[i("van-tab",[i("div",{staticClass:"tab_title",attrs:{slot:"title"},slot:"title"},[a._v("\n                未报名\n                "),a.tabData2.list.length?i("span",[a._v("("+a._s(a.tabData2.list.length)+")")]):a._e()]),a._v(" "),i("div",{staticClass:"not-sign common"},[i("van-list",{attrs:{finished:a.tabData2.finished,"finished-text":""},on:{load:a.onLoad2},model:{value:a.tabData2.loading,callback:function(t){a.$set(a.tabData2,"loading",t)},expression:"tabData2.loading"}},[i("div",{staticClass:"not-sign-list common-list"},[a._l(a.tabData2.list,function(t,n){return i("div",{key:n,staticClass:"common-list-item"},[i("i",{staticClass:"iconfont icontouxiang"}),a._v(" "),i("span",{staticClass:"common-list-item-name"},[a._v(a._s(t.userName))]),a._v(" "),"-1"!=t.readed_users?i("button",{staticClass:"common-list-item-button readed"},[a._v("\n                                已阅读\n                            ")]):i("button",{staticClass:"common-list-item-button notRead"},[a._v("\n                                未阅读\n                            ")])])}),a._v(" "),0===a.tabData2.list.length?i("commonempty"):a._e()],2)]),a._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:a.tabData2.list.length,expression:"tabData2.list.length"}],staticClass:"not-sign-footer"},[i("dingBtn",{attrs:{pk:a.id,prarms:a.dingObj,text:"DING一下"}})],1)],1)]),a._v(" "),i("van-tab",[i("div",{staticClass:"tab_title",attrs:{slot:"title"},slot:"title"},[a._v("\n                已报名\n                "),a.tabData1.list.length?i("span",[a._v("("+a._s(a.tabData1.list.length)+")")]):a._e()]),a._v(" "),i("van-list",{attrs:{finished:a.tabData1.finished,"finished-text":""},on:{load:a.onLoad1},model:{value:a.tabData1.loading,callback:function(t){a.$set(a.tabData1,"loading",t)},expression:"tabData1.loading"}},[i("div",{staticClass:"signed-list common-list"},a._l(a.tabData1.list,function(t){return i("div",{key:t.id,staticClass:"common-list-item comment_item"},[i("div",{staticClass:"common_title"},[i("span",{staticClass:"common-list-item-name common_title_span"},[a._v(a._s(t.userName))]),a._v(" "),i("span",{staticClass:"signed-list-item-time common_title_spanr"},[a._v(a._s(t.time))])]),a._v(" "),i("div",{staticClass:"common_name"},[i("span",{staticClass:"common-list-item-name"},[a._v(a._s(1==t.attendanceValue?"参会人："+t.attendanceUserlist:"代会人："+t.attendanceUserlist))])]),a._v(" "),i("div",{staticClass:"common_content"},[-1==t.attendanceValue?i("span",{staticClass:"common-list-item-name"},[a._v("\n                                请假原因："+a._s(t.leaveReason))]):a._e()])])}),0),a._v(" "),0===a.tabData1.list.length?i("commonempty"):a._e()],1)],1)],1)],1)},[],!1,null,"46a248ae",null).exports}}]);