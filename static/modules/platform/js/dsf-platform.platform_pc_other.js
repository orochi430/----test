/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[]).push([[55],{1010:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-chart",style:{width:e.width,height:e.height}},[a("div",{ref:"chart",staticClass:"chart"},[e._m(0)]),e.isDesign||!e.isDesign&&e.slots[0].controls.length>0?[a("div",{staticClass:"ds-chart-slot",attrs:{"slot-name":"default"}},[e._t("default")],2)]:e._e()],2)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading"},[a("i",{staticClass:"el-icon-loading"})])}],r=a(8),s=a.n(r),o=a(2),l=a.n(o),c=a(436);function d(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=u(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function u(e,t){if(e){if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}c["a"].legend.data=c["a"].series.map((function(e){return e.name}));var f=_.cloneDeep(c["a"]),p={ydata:[{name:"示例",yAxisIndex:0,xAxisIndex:0,data:[820,932,901,934,1290,1330,1320]}],xdata:[["周一","周二","周三","周四","周五","周六","周日"]]},m=function(e){var t=e.ydata,a=e.xdata,i=a[0],n=[];n.push(["对应y轴下标","x轴/数据项名称"].concat(l()(i)));for(var r=0;r<t.length;r++){var s=[],o=t[r];s.push(o.yAxisIndex),s.push(o.name),s.push.apply(s,l()(o.data)),n.push(s)}return n},v=dsf.component({name:"DsfPlatformPolyline",ctrlCaption:"折线图表",mixins:[$mixins.layout,$mixins.chart],props:{chart:{type:Object,default:function(){return c["a"]}},excelData:{type:Array,default:function(){return m(p)}}},data:function(){return{cloneDefault:f}},methods:{dataSourceAnalysis:function(e){var t=[],a=[],i=_.cloneDeep(this.chart);e.forEach((function(e,a){var n,r=Number(e.xIndex),s={name:e.category,yAxisIndex:Number(e.yIndex),xAxisIndex:Number(e.xIndex),data:[]},o=i.xAxis[r].mapRelation,l=d(o);try{for(l.s();!(n=l.n()).done;){var c=n.value;s.data.push(e[c])}}catch(u){l.e(u)}finally{l.f()}t.push(s)})),this.analysis({ydata:t,xdata:a})},analysis:function(e){var t=this;if(!e)return this.reset(),!1;var a=e.xdata,i=e.ydata,n=i.reduce((function(e,t){return e.push(t.name),e}),[]);if(this.chart.legend.data=n,i.forEach((function(e,a){if(t.chart.series[a]){var i=Object.assign(t.chart.series[a],e);t.$set(t.chart.series,a,i)}else{var n=_.cloneDeep(t.cloneDefault.series[0]);n.data=e.data,n.name=e.name,n.areaStyle.color="rgba(255,255,255,0)",n.areaStyle.startColor="rgba(255,255,255,0)",n.areaStyle.endColor="rgba(255,255,255,0)",n.itemStyle.color=t.chart.color[a+1],n.itemStyle.startColor=t.chart.color[a+1],n.itemStyle.endColor=t.chart.color[a+1],n.xAxisIndex=e.xAxisIndex||0,n.yAxisIndex=e.yAxisIndex||0,t.$set(t.chart.series,a,n)}})),this.chart.series=this.chart.series.slice(0,i.length),a.length&&this.chart.xAxis.forEach((function(e,i){t.chart.xAxis[i].data=a[i]})),this.isDesign&&"excel"==this.dataType){var r=this.objectTostring(this.chart,!0);this.$emit("update:chartString",r)}this.reset()},dataExcelAnalysis:function(e){var t=e[0].rows;if(t){var a=this.oldExcelAnalysis(e),i=s()(a,2),n=i[0],r=i[1];this.analysis({xdata:n,ydata:r})}else if(Array.isArray(e[0])){var o=this.luckyAnalysis(e),l=s()(o,2),c=l[0],d=l[1];this.analysis({xdata:c,ydata:d})}},luckyAnalysis:function(e){var t=[[]],a=[],i=e[0];if(i.length>1)for(var n=2;n<i.length;n++)i[n]&&t[0].push(i[n]);for(var r=1;r<e.length;r++){var s=e[r],o={name:"",yAxisIndex:0,xAxisIndex:0,data:[]};if(s.length>1){o.name=s[1],o.yAxisIndex=s[0];for(var l=2;l<s.length;l++)s[l]&&o.data.push(s[l])}a.push(o)}return[t,a]},oldExcelAnalysis:function(e){var t=e[0].rows,a=[[]],i=[],n=t[0].cells,r=Object.keys(n);if(r.length>1)for(var s=2;s<r.length;s++){var o=r[s];n[o].text&&a[0].push(n[o].text)}var l=Object.keys(t);if(l.length>1)for(var c=1;c<l.length;c++){var d=t[l[c]]&&t[l[c]].cells;if(d){var u={name:"",yAxisIndex:0,xAxisIndex:0,data:[]},h=Object.keys(d);if(h.length>1){u.name=d[1].text,u.yAxisIndex=d[0].text;for(var f=2;f<h.length;f++){var p=h[f];d[p].text&&u.data.push(d[p].text)}}i.push(u)}}return[a,i]}}}),g=v,y=a(0),x=Object(y["a"])(g,i,n,!1,null,null,null);t["default"]=x.exports},1011:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-chart",style:{width:e.width,height:e.height}},[a("div",{ref:"chart",staticClass:"chart"},[e._v("我是柱图")]),e.isDesign||!e.isDesign&&e.slots[0].controls.length>0?[a("div",{staticClass:"ds-chart-slot",attrs:{"slot-name":"default"}},[e._t("default")],2)]:e._e()],2)},n=[],r=a(8),s=a.n(r),o=a(2),l=a.n(o),c=a(437);function d(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=u(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function u(e,t){if(e){if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}c["a"].legend.data=c["a"].series.map((function(e){return e.name}));var f=_.cloneDeep(c["a"]),p={ydata:[{name:"示例",yAxisIndex:0,xAxisIndex:0,data:[820,932,901,934,1290,1330,1320]}],xdata:[["周一","周二","周三","周四","周五","周六","周日"]]},m=function(e){var t=e.ydata,a=e.xdata,i=a[0],n=[];n.push(["x轴/数据项名称"].concat(l()(i)));for(var r=0;r<t.length;r++){var s=[],o=t[r];s.push(o.name),s.push.apply(s,l()(o.data)),n.push(s)}return n},v=dsf.component({name:"DsfPlatformBar",ctrlCaption:"柱状图表",mixins:[$mixins.layout,$mixins.chart],props:{chart:{type:Object,default:function(){return c["a"]}},excelData:{type:Array,default:function(){return m(p)}}},data:function(){return{cloneDefault:f}},methods:{dataSourceAnalysis:function(e){var t=[],a=[],i=_.cloneDeep(this.chart),n=this.chart.isReturn;e.forEach((function(e,a){var r,s=Number(e.xIndex),o={name:e.category,yAxisIndex:Number(e.yIndex),xAxisIndex:Number(e.xIndex),data:[]},l=n?i.yAxis[s].mapRelation:i.xAxis[s].mapRelation,c=d(l);try{for(c.s();!(r=c.n()).done;){var u=r.value;o.data.push(e[u])}}catch(h){c.e(h)}finally{c.f()}t.push(o)})),this.analysis({ydata:t,xdata:a})},analysis:function(e){var t=this;if(!e)return this.reset(),!1;var a=e.xdata,i=e.ydata,n=this.chart.isReturn,r=i.reduce((function(e,t){return e.push(t.name),e}),[]);if(this.chart.legend.data=r,i.forEach((function(e,a){if(t.chart.series[a]){var i=Object.assign(t.chart.series[a],e);t.$set(t.chart.series,a,i)}else{var n=_.cloneDeep(t.cloneDefault.series[0]);n.data=e.data,n.name=e.name,n.itemStyle.color=t.chart.color[a+1],n.itemStyle.startColor=t.chart.color[a+1],n.itemStyle.endColor=t.chart.color[a+1],n.xAxisIndex=e.xAxisIndex||0,n.yAxisIndex=e.yAxisIndex||0,t.$set(t.chart.series,a,n)}})),this.chart.series=this.chart.series.slice(0,i.length),a.length&&(n?this.chart.yAxis.forEach((function(e,i){t.chart.yAxis[i].data=a[i]})):this.chart.xAxis.forEach((function(e,i){t.chart.xAxis[i].data=a[i]}))),this.isDesign&&"excel"==this.dataType){var s=this.objectTostring(this.chart,!0);this.$emit("update:chartString",s)}this.reset()},dataExcelAnalysis:function(e){var t=e[0].rows;if(t){var a=this.oldExcelAnalysis(e),i=s()(a,2),n=i[0],r=i[1];this.analysis({xdata:n,ydata:r})}else if(Array.isArray(e[0])){var o=this.luckyAnalysis(e),l=s()(o,2),c=l[0],d=l[1];this.analysis({xdata:c,ydata:d})}},luckyAnalysis:function(e){var t=[[]],a=[],i=e[0];if(i.length>1)for(var n=1;n<i.length;n++)i[n]&&t[0].push(i[n]);for(var r=1;r<e.length;r++){var s=e[r],o={name:"",yAxisIndex:0,xAxisIndex:0,data:[]};if(s.length>1){o.name=s[0];for(var l=1;l<s.length;l++)s[l]&&o.data.push(s[l])}a.push(o)}return[t,a]},oldExcelAnalysis:function(e){var t=e[0].rows,a=[[]],i=[],n=t[0].cells,r=Object.keys(n);if(r.length>1)for(var s=1;s<r.length;s++){var o=r[s];n[o].text&&a[0].push(n[o].text)}var l=Object.keys(t);if(l.length>1)for(var c=1;c<l.length;c++){var d=t[l[c]]&&t[l[c]].cells;if(d){var u={name:"",yAxisIndex:0,xAxisIndex:0,data:[]},h=Object.keys(d);if(h.length>1){u.name=d[0].text;for(var f=1;f<h.length;f++){var p=h[f];d[p].text&&u.data.push(d[p].text)}}i.push(u)}}return[a,i]}}}),g=v,y=a(0),x=Object(y["a"])(g,i,n,!1,null,null,null);t["default"]=x.exports},1012:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-chart",style:{width:e.width,height:e.height}},[a("div",{ref:"chart",staticClass:"chart"},[e._m(0)]),e.isDesign||!e.isDesign&&e.slots[0].controls.length>0?[a("div",{staticClass:"ds-chart-slot",attrs:{"slot-name":"default"}},[e._t("default")],2)]:e._e()],2)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading"},[a("i",{staticClass:"el-icon-loading"})])}],r=a(2),s=a.n(r),o=a(438);o["a"].legend.data=o["a"].series.reduce((function(e,t){return[].concat(s()(e),s()(t.data))}),[]).map((function(e){return e.name}));var l=[{name:"锦江区",value:"167"},{name:"成华区",value:"67"},{name:"武侯区",value:"123"},{name:"高新区",value:"55"},{name:"青羊区",value:"98"},{name:"双流区",value:"55"},{name:"郫都区",value:"98"}],c=function(e){var t=[];t.push(["名称","数值"]);for(var a=0;a<e.length;a++){var i=[],n=e[a];i.push(n.name),i.push(n.value),t.push(i)}return t},d=_.cloneDeep(o["a"]),u=dsf.component({name:"DsfPlatformPie",ctrlCaption:"饼状图表",mixins:[$mixins.layout,$mixins.chart],props:{chart:{type:Object,default:function(){return o["a"]}},excelData:{type:Array,default:function(){return c(l)}}},data:function(){return{cloneDefault:d}},methods:{dataSourceAnalysis:function(e){this.analysis(e)},analysis:function(e){if(!e)return this.reset(),!1;if(Array.isArray(e[0])){var t=_.cloneDeep(this.chart.series),a=[];e.forEach((function(e){a=[].concat(s()(a),s()(e.map((function(e){return e.name}))))})),this.chart.legend.data=a;for(var i=0;i<e.length;i++){var n=t[i];n?(Object.assign(n.data,e[i]),this.$set(this.chart.series,i,n)):(n=t[0],n.data=e[i],this.$set(this.chart.series,i,n))}}else{var r=_.cloneDeep(this.chart.series[0]),o=r.data,l=e.map((function(e){return e.name}));if(this.chart.legend.data=l,e.length>o.length){for(var c=0;c<e.length;c++){var d,u=o[c];if(u)e[c].itemStyle=u.itemStyle;else e[c].itemStyle=null===(d=o[c%o.length])||void 0===d?void 0:d.itemStyle}r.data=e}else{var h=o.slice(0,e.length);Object.assign(h,e),r.data=h}this.$set(this.chart.series,0,r)}if(this.isDesign&&"excel"==this.dataType){var f=this.objectTostring(this.chart,!0);this.$emit("update:chartString",f)}this.reset()},dataExcelAnalysis:function(e){var t=e[0].rows;if(t){var a=this.oldExcelAnalysis(e);this.analysis(a)}else if(Array.isArray(e[0])){var i=this.luckyAnalysis(e);this.analysis(i)}},luckyAnalysis:function(e){for(var t=[],a=1;a<e.length;a++){var i=e[a];t.push({name:i[0],value:i[1]})}return t},oldExcelAnalysis:function(e){var t=e[0].rows,a=[];return Object.keys(t).forEach((function(e){var i=t[e].cells;if(i&&0!=e){var n=[];Object.keys(i).slice(0,2).forEach((function(e){i[e].text&&n.push(i[e].text)})),2==n.length&&a.push({name:n[0],value:n[1]})}})),a}}}),h=u,f=a(0),p=Object(f["a"])(h,i,n,!1,null,null,null);t["default"]=p.exports},1013:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-chart",style:{width:e.width,height:e.height}},[a("div",{ref:"chart",staticClass:"chart"},[e._v("我是折线柱图混合")]),e.isDesign||!e.isDesign&&e.slots[0].controls.length>0?[a("div",{staticClass:"ds-chart-slot",attrs:{"slot-name":"default"}},[e._t("default")],2)]:e._e()],2)},n=[],r=a(8),s=a.n(r),o=a(2),l=a.n(o),c=a(439);function d(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=u(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function u(e,t){if(e){if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}c["a"].legend.data=c["a"].series.map((function(e){return e.name}));var f=_.cloneDeep(c["a"]),p={ydata:[{name:"示例",type:"line",yAxisIndex:0,xAxisIndex:0,data:[820,932,901,934,1290,1330,1320]},{name:"示例2",type:"bar",yAxisIndex:0,xAxisIndex:0,data:[820,932,901,934,1290,1330,1320]}],xdata:[["周一","周二","周三","周四","周五","周六","周日"]]},m=function(e){var t=e.ydata,a=e.xdata,i=a[0],n=[];n.push(["名称","类型","y轴"].concat(l()(i)));for(var r=0;r<t.length;r++){var s=[],o=t[r];s.push(o.name),s.push(o.type),s.push(o.yAxisIndex),s.push.apply(s,l()(o.data)),n.push(s)}return n},v=dsf.component({name:"DsfPlatformMixinAxis",ctrlCaption:"轴系混合图表",mixins:[$mixins.layout,$mixins.chart],props:{chart:{type:Object,default:function(){return c["a"]}},excelData:{type:Array,default:function(){return m(p)}}},data:function(){return{default:{line:f.series.find((function(e){return"line"===e.type})),bar:f.series.find((function(e){return"bar"===e.type}))}}},methods:{dataSourceAnalysis:function(e){var t=[],a=[],i=_.cloneDeep(this.chart);e.forEach((function(e,a){var n,r=Number(e.xIndex),s={name:e.category,yAxisIndex:Number(e.yIndex),xAxisIndex:Number(e.xIndex),type:e.type,data:[]},o=i.xAxis[r].mapRelation,l=d(o);try{for(l.s();!(n=l.n()).done;){var c=n.value;s.data.push(e[c])}}catch(u){l.e(u)}finally{l.f()}t.push(s)})),this.analysis({ydata:t,xdata:a})},analysis:function(e){var t=this;if(!e)return this.reset(),!1;var a=e.xdata,i=e.ydata,n=i.reduce((function(e,t){return e.push(t.name),e}),[]);this.chart.legend.data=n;var r=i.filter((function(e){return"line"===e.type})),s=i.filter((function(e){return"bar"===e.type})),o=this.chart.series.filter((function(e){return"line"===e.type})),c=this.chart.series.filter((function(e){return"bar"===e.type}));if(r.forEach((function(e,a){if(o[a]){var i=Object.assign(o[a],e);o[a]=i}else{var n={};n=_.cloneDeep(t.default.line),n.areaStyle.color="rgba(255,255,255,0)",n.areaStyle.startColor="rgba(255,255,255,0)",n.areaStyle.endColor="rgba(255,255,255,0)",n.data=e.data,n.name=e.name,n.itemStyle.color=t.chart.color[a+1],n.itemStyle.startColor=t.chart.color[a+1],n.itemStyle.endColor=t.chart.color[a+1],n.xAxisIndex=e.xAxisIndex||0,n.yAxisIndex=e.yAxisIndex||0,o.push(n)}})),o=o.slice(0,r.length),s.forEach((function(e,a){if(c[a]){var i=Object.assign(c[a],e);c[a]=i}else{var n={};n=_.cloneDeep(t.default.bar),n.data=e.data,n.name=e.name,n.itemStyle.color=t.chart.color[a+1],n.itemStyle.startColor=t.chart.color[a+1],n.itemStyle.endColor=t.chart.color[a+1],n.xAxisIndex=e.xAxisIndex||0,n.yAxisIndex=e.yAxisIndex||0,c.push(n)}})),c=c.slice(0,s.length),this.chart.series=[].concat(l()(c),l()(o)),a.length&&this.chart.xAxis.forEach((function(e,i){t.chart.xAxis[i].data=a[i]})),this.isDesign&&"excel"==this.dataType){var d=this.objectTostring(this.chart,!0);this.$emit("update:chartString",d)}this.reset()},dataExcelAnalysis:function(e){var t=e[0].rows;if(t){var a=this.oldExcelAnalysis(e),i=s()(a,2),n=i[0],r=i[1];this.analysis({xdata:n,ydata:r})}else if(Array.isArray(e[0])){var o=this.luckyAnalysis(e),l=s()(o,2),c=l[0],d=l[1];this.analysis({xdata:c,ydata:d})}},luckyAnalysis:function(e){var t=[[]],a=[],i=e[0];if(i.length>1)for(var n=3;n<i.length;n++)i[n]&&t[0].push(i[n]);for(var r=1;r<e.length;r++){var s=e[r],o={name:"",type:"line",yAxisIndex:0,xAxisIndex:0,data:[]};if(s.length>1){o.name=s[0],o.type=s[1],o.yAxisIndex=s[2];for(var l=3;l<s.length;l++)s[l]&&o.data.push(s[l])}a.push(o)}return[t,a]},oldExcelAnalysis:function(e){var t=e[0].rows,a=[[]],i=t[0].cells,n=Object.keys(i);if(n.length>1)for(var r=3;r<n.length;r++){var s=n[r];i[s].text&&a[0].push(i[s].text)}var o=[],l=Object.keys(t);if(l.length>1)for(var c=1;c<l.length;c++){var d=t[l[c]]&&t[l[c]].cells;if(d){var u={name:"",type:"line",yAxisIndex:0,xAxisIndex:0,data:[]},h=Object.keys(d);if(h.length>1){u.name=d[0].text,u.type=d[1].text,u.yAxisIndex=d[2].text;for(var f=3;f<h.length;f++){var p=h[f];d[p].text&&u.data.push(d[p].text)}}o.push(u)}}return[a,o]}}}),g=v,y=a(0),x=Object(y["a"])(g,i,n,!1,null,null,null);t["default"]=x.exports},1014:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-chart",style:{width:e.width,height:e.height}},[a("div",{ref:"chart",staticClass:"chart"},[e._m(0)])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading"},[a("i",{staticClass:"el-icon-loading"})])}],r=a(3),s=a.n(r),o=a(2),l=a.n(o),c=a(440);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}c["a"].legend.data=c["a"].series.reduce((function(e,t){return[].concat(l()(e),l()(t.data))}),[]).map((function(e){return e.name}));var h=_.cloneDeep(c["a"]),f=[{name:"预算分配1",data:[{name:"销售2",value:"500"},{name:"管理",value:"400"},{name:"信息技术",value:"300"},{name:"客服",value:"200"},{name:"研发",value:"700"},{name:"市场",value:"800"}]},{name:"实际开销",data:[{name:"销售2",value:"600"},{name:"管理",value:"500"},{name:"信息技术",value:"340"},{name:"客服",value:"100"},{name:"研发",value:"1000"},{name:"市场",value:"1800"}]}],p=function(e){var t=e[0].data.map((function(e){return e.name})),a=[];a.push(["/"].concat(l()(t)));for(var i=0;i<e.length;i++){var n=[],r=e[i];n.push.apply(n,[r.name].concat(l()(r.data.map((function(e){return e.value}))))),a.push(n)}return a},m=dsf.component({name:"DsfPlatformRadar",ctrlCaption:"雷达图表",mixins:[$mixins.layout,$mixins.chart],props:{chart:{type:Object,default:function(){return c["a"]}},excelData:{type:Array,default:function(){return p(f)}}},data:function(){return{cloneDefault:h}},methods:{analysis:function(e){if(!e)return this.reset(),!1;if("interface"==this.dataType){var t=e.indicator,a=e.radar,i=_.cloneDeep(this.chart.series[0]);this.chart.radar[0].indicator=t;var n=a.map((function(e){return e.name}));this.chart.legend.data=n,i.data=a,this.$set(this.chart.series,0,i)}else if("excel"==this.dataType){var r=[],s=[],o=0;e.forEach((function(e){var t=new Array(e.data.length),a={name:e.name,value:t};e.data.forEach((function(e){var a=r.findIndex((function(t){return t===e.name}));if(a>-1)t[a]=e.value;else{var i=r.length;r.push(e.name),t[i]=e.value}})),o=Math.max.apply(Math,[o].concat(l()(a.value))),s.push(a)}));var c=_.cloneDeep(this.chart.series[0]),d=this.indicatorMax?this.indicatorMax:o;this.chart.radar[0].indicator=r.map((function(e){return{name:e,max:d}}));var h=s.map((function(e){return e.name}));this.chart.legend.data=h;var f=c.data;f.length>s.length&&(f=f.slice(0,s.length)),s.forEach((function(e,t){f[t]?(f[t].name=e.name,f[t].value=e.value):f.push(u({areaStyle:{color:"rgba(255,255,255,0)",endColor:"rgba(255,255,255,0)",startColor:"rgba(255,255,255,0)",isshade:!1}},e))})),c.data=f,this.$set(this.chart.series,0,c)}if(this.isDesign&&"excel"==this.dataType){var p=this.objectTostring(this.chart,!0);this.$emit("update:chartString",p)}this.reset()},dataExcelAnalysis:function(e){var t=e[0].rows;if(t){var a=this.oldExcelAnalysis(e);this.analysis(a)}else if(Array.isArray(e[0])){var i=this.luckyAnalysis(e);this.analysis(i)}},luckyAnalysis:function(e){for(var t=e[0],a=[],i=[],n=1;n<t.length;n++)a.push(t[n]);for(var r=1;r<e.length;r++){var s={name:"",data:[]},o=e[r];s.name=o[0];for(var l=1;l<o.length;l++)if(void 0!=o[l]){var c=s.data.length;s.data.push({value:o[l],name:a[c]})}i.push(s)}return i},oldExcelAnalysis:function(e){var t=e[0].rows,a=[],i=t[0].cells,n=Object.keys(i);if(n.length>1)for(var r=1;r<n.length;r++){var s=n[r];i[s].text&&a.push(i[s].text)}var o=[],l=Object.keys(t);if(l.length>1)for(var c=1;c<l.length;c++){var d=t[l[c]]&&t[l[c]].cells;if(d){var u={name:"",data:[]},h=Object.keys(d);if(h.length>1){u.name=d[0].text;for(var f=1;f<h.length;f++){var p=h[f];if(void 0!=d[p].text){var m=u.data.length;u.data.push({value:d[p].text,name:a[m]})}}}o.push(u)}}return o}}}),v=m,g=a(0),y=Object(g["a"])(v,i,n,!1,null,null,null);t["default"]=y.exports},1015:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-chart",style:{width:e.width,height:e.height}},[a("div",{ref:"chart",staticClass:"chart"},[e._m(0)]),e.isDesign||!e.isDesign&&e.slots[0].controls.length>0?[a("div",{staticClass:"ds-chart-slot",attrs:{"slot-name":"default"}},[e._t("default")],2)]:e._e()],2)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loading"},[a("i",{staticClass:"el-icon-loading"})])}],r=a(441);r["a"].legend.data=r["a"].series.map((function(e){return e.name}));var s=_.cloneDeep(r["a"]),o=dsf.component({name:"DsfPlatformMapChart",ctrlCaption:"地图图表",mixins:[$mixins.layout,$mixins.chart],props:{chart:{type:Object,default:function(){return r["a"]}},width:{type:String,default:"700px"},height:{type:String,default:"600px"},mapUrl:{type:String,default:"$/js/libs/echarts/mapCoord/sichuan.json"}},data:function(){return{cloneDefault:s}},methods:{beforeInit:function(){var e=this,t=this.chartObj;this.dsf.http.get(this.mapUrl,{}).done((function(a){t.hideLoading();var i=window.$echarts||window.echarts;i.registerMap("coord",a),e.init()}))},analysis:function(e){e?(this.chart.series[0].data=e,this.$dispatch("setOption",{options:this.chart,vm:this,data:e}),this.reset()):this.reset()}}}),l=o,c=a(0),d=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=d.exports},1016:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-chart",style:{width:e.width,height:e.height}},[a("div",{ref:"chart",staticClass:"chart"},[e._v("我是散点图")]),e.isDesign||!e.isDesign&&e.slots[0].controls.length>0?[a("div",{staticClass:"ds-chart-slot",attrs:{"slot-name":"default"}},[e._t("default")],2)]:e._e()],2)},n=[],r=a(442);r["a"].legend.data=r["a"].series.map((function(e){return e.name}));var s=[{name:"锦江区",value:["167","167"]},{name:"成华区",value:["67","67"]},{name:"武侯区",value:["123","123"]},{name:"高新区",value:["55","55"]}],o=function(e){var t=[];t.push(["名称","x轴","y轴"]);for(var a=0;a<e.length;a++){var i=[],n=e[a];i.push(n.name),i.push(n.value[0]),i.push(n.value[1]),t.push(i)}return t},l=_.cloneDeep(r["a"]),c=dsf.component({name:"DsfPlatformScatter",ctrlCaption:"散点图表",mixins:[$mixins.layout,$mixins.chart],props:{chart:{type:Object,default:function(){return r["a"]}},excelData:{type:Array,default:function(){return o(s)}}},data:function(){return{cloneDefault:l}},methods:{analysis:function(e){var t=this;if(!e)return this.reset(),!1;"excel"==this.dataType&&(e=[{name:this.chart.series[0].name,data:e}]);var a=e.reduce((function(e,t){return e.push(t.name),e}),[]);if(this.chart.legend.data=a,e.forEach((function(e,a){if(t.chart.series[a]){var i=Object.assign(t.chart.series[a],e);t.$set(t.chart.series,a,i)}else{var n=_.cloneDeep(t.cloneDefault.series[0]);n.data=e.data,n.name=e.name,n.itemStyle.color=t.chart.color[a+1],n.itemStyle.startColor=t.chart.color[a+1],n.itemStyle.endColor=t.chart.color[a+1],n.xAxisIndex=e.xAxisIndex||0,n.yAxisIndex=e.yAxisIndex||0,t.$set(t.chart.series,a,n)}})),this.chart.series=this.chart.series.slice(0,e.length),this.isDesign&&"excel"==this.dataType){var i=this.objectTostring(this.chart,!0);this.$emit("update:chartString",i)}this.reset()},dataExcelAnalysis:function(e){var t=e[0].rows;if(t){var a=this.oldExcelAnalysis(e);this.analysis(a)}else if(Array.isArray(e[0])){var i=this.luckyAnalysis(e);this.analysis(i)}},luckyAnalysis:function(e){for(var t=[],a=1;a<e.length;a++){var i=e[a];t.push({name:i[0],value:[i[1],i[2]]})}return t},oldExcelAnalysis:function(e){var t=e[0].rows,a=[];return Object.keys(t).forEach((function(e){var i=t[e].cells;if(i&&0!=e){var n=[];Object.keys(i).slice(0,3).forEach((function(e){i[e].text&&n.push(i[e].text)})),3==n.length&&a.push({name:n[0],value:[n[1],n[2]]})}})),a}}}),d=c,u=a(0),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},1101:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-navtab",class:{"ds-no-padding":!e.showPadding},style:{height:e.isDesign?"100%":e.tabHeight}},[a("el-tabs",{attrs:{"tab-position":e.tabPosition,type:"customer-tab-pad"==e.tabStyle?"":e.tabStyle,closable:e.enableDelete},on:{"tab-click":e.tabClick,"tab-remove":e.tabRemove},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e._t("default"),e._l(e.slots.filter((function(t){return!0!==e.isHide(t)})),(function(t){return a("el-tab-pane",{key:t.name,style:{padding:e.$padding},attrs:{disabled:e.isdisable(t),label:t.title,name:t.name,"slot-name":t.name,lazy:e.isLazy(t)}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("el-popover",{attrs:{placement:e.placement,disabled:!e.isShowTip(t)||!t.tipContent||e.showTipIcon,trigger:e.tipTrigger}},[a("div",{domProps:{innerHTML:e._s(e.tipContent(t))}}),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("span",{domProps:{innerHTML:e._s(e.dsf.safe.xss(t.title))}}),e.showTipIcon&&e.isShowTip(t)?a("el-popover",{attrs:{placement:e.placement,disabled:!e.isShowTip(t)||!t.tipContent,trigger:e.tipTrigger}},[a("div",{domProps:{innerHTML:e._s(e.tipContent(t))}}),a("span",{attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"iconfont icon-bangzhuzhongxin tipicon"})])]):e._e(),null!==t.badge?a("span",{staticClass:"el-badge",domProps:{innerHTML:e._s(e.dsf.safe.xss(t.badge))}}):e._e()],1)])],1),e._t(t.name)],2)}))],2)],1)},n=[],r=dsf.component({name:"DsfNavTab",ctrlCaption:"选项卡",mixins:[$mixins.tabControl],props:{showTipIcon:{type:Boolean,default:!1},tipTrigger:{type:String,default:"hover"}},computed:{$padding:function(){var e=this.contentPadding;return[dsf.isNumber(e[0])?e[0]+"px":e[0],dsf.isNumber(e[1])?e[1]+"px":e[1],dsf.isNumber(e[2])?e[2]+"px":e[2],dsf.isNumber(e[3])?e[3]+"px":e[3]].join(" ")},placement:function(){var e=this.tabPosition,t="bottom";switch(e){case"top":t="bottom";break;case"right":t="left";break;case"bottom":t="top";break;case"left":t="right";break}return t}},methods:{formScrollIntoViewErrorControl:function(e){var t=$(e).closest(".el-tab-pane").attr("slot-name");this.tabChange({name:t})},isShowTip:function(e){var t=this.$expressParams();return this.$eval(e.showTip,t)},tipContent:function(e){if(this.isDesign)return e.tipContent||"";if(e.tipContent){var t=this.$expressParams();return dsf.safe.xss(this.$replace(e.tipContent,t))}return""}}}),s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1102:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-steps-nav",class:e.getCss,style:{height:e.ctrlHeight}},[a("div",{staticClass:"ds-steps-nav-head",style:e.headStyle},[a("el-steps",{attrs:{active:e.$heightLightActive,space:e.space,simple:e.simple,direction:e.direction,"align-center":!e.simple&&e.alignCenter,"finish-status":e.finishStatus}},[e._l(e.$items,(function(t,i){return[a("el-step",{key:t.value,class:{active:i==e.$heightLightActive},attrs:{status:e.getStatus(i)}},[a("div",{staticClass:"ds-steps-nav-item-icon",class:{active:i==e.$active},attrs:{slot:"icon"},on:{click:function(a){return e.stepClick(t,i)}},slot:"icon"},[e._t("icon",(function(){return[e.simple?e._e():a("div",{staticClass:"el-step__icon-inner"},[e._v(e._s(i+1))])]}),{data:{item:t,index:i}})],2),a("template",{slot:"title"},[e._t("title",(function(){return[a("div",{staticClass:"ds-steps-nav-item-title",attrs:{slot:"title"},on:{click:function(a){return e.stepClick(t,i)}},slot:"title"},[e._v(e._s(t.text))])]}),{data:{item:t,index:i}})],2),a("template",{slot:"description"},[e._t("description",(function(){return[a("div",{staticClass:"ds-steps-nav-item-description",attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.description))])]}),{data:{item:t,index:i}})],2)],2)]}))],2)],1),a("div",{staticClass:"ds-steps-nav-body"},[e._l(e.$items,(function(t,i){return[e.isDesign||!e.lazy||e.loadedItems[i]?a("div",{key:t.value,staticClass:"ds-steps-nav-item ds-no-padding",class:{active:i==e.$active},attrs:{"slot-name":"default"+i}},[e._t("default"+i,null,{index:i})],2):e._e()]}))],2)])},n=[],r=dsf.component({name:"DsfStepsNav",mixins:[$mixins.layout,$mixins.formControl],ctrlCaption:"步骤导航",design:{isMask:!1},props:{value:{type:[Number,Object],default:0},simple:{type:Boolean,default:!1},height:{type:String,default:"auto"},headHeight:{type:String,default:"auto"},headWidth:{type:String,default:"auto"},space:{type:String,default:""},position:{type:String,default:"top"},alignCenter:{type:Boolean,default:!1},finishStatus:{type:String,default:"success"},heightLightBasis:{type:String,default:"current"},isClick:{type:[String,Boolean],default:"false"},lazy:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}},slots:{type:Array,default:function(){return[]}},metadata:{type:Object,default:function(){return dsf.metadata.get("steps-meta-data")}}},data:function(){return{loadedItems:{},active:1,status:"finish",max:1}},computed:{getCss:function(){return[this.$getClass(),this.position,{click:this.isClick}]},$max:function(){return this.max-1},$active:function(){return this.active-1},$heightLightActive:function(){switch(this.heightLightBasis){case"current":return this.$active;case"max":return this.$max;default:return this.$active}},direction:function(){return"left"==this.position||"right"==this.position?"vertical":"horizontal"},headStyle:function(){return"vertical"==this.direction?{width:this.headWidth}:{height:this.headHeight}},$items:function(){var e=[];return"array"==dsf.type(this.items)&&(e=this.items),this.isDesign&&!e.length&&(e=[{text:"step1",value:"step1"},{text:"step2",value:"step2"},{text:"step3",value:"step3"},{text:"step4",value:"step4"}]),e},ctrlHeight:function(){return this.isDesign?(this.$dispatch("design-height-change",this.height),"100%"):this.height}},watch:{value:function(e){this.__valueLock||this.initValue(e)},$active:{handler:function(e){this.$set(this.loadedItems,e,!0)},immediate:!0},"$items.length":function(e){if(this.active<1?this.initValue(1):this.active>e&&this.initValue(e),this.slots.length>e)this.slots.length=e;else if(this.slots.length<e){for(var t=[],a=this.slots.length;a<e;a++)t.push({name:"default"+a,controls:[]});this.slots=this.slots.concat(t)}}},created:function(){if(this.isDesign&&0==this.slots.length){for(var e=[],t=0;t<this.$items.length;t++)e.push({name:"default"+t,controls:[]});this.slots=e}this.initValue(this.value,!0)},methods:{initValue:function(e,t){var a=this;"object"!=dsf.type(e)?this.formatValue(e,t):e.active==this.active&&e.status==this.status&&e.max==this.max||this.formatValue(e,t),this.$nextTick((function(){a.$page&&dsf.resizeComponent(a.$page)}))},formatValue:function(e,t){var a=this.setValue(e,t),i=this.max;"object"==dsf.type(e)&&(a=this.setValue(e.active,t),this.status=e.status||"finish",i=e.max||i),this.max=i<this.active?this.active:i,this.emitValueChange({active:a,status:this.status,max:this.max})},setValue:function(e,t){if(dsf.isUnDef(e)&&(e=0),"string"==dsf.type(e)&&(e=parseInt(e)),isNaN(e)&&(e=0),"number"==dsf.type(e)){var a=parseInt(t?e+1:e);if(this.$items.length<a)this.active=this.$items.length;else if(e<=1)this.active=1;else{if(this.__valueLock)return a;this.active=a}}return this.active},getStatus:function(e){return this.$heightLightActive==e?this.status:this.$heightLightActive>e?"finish":this.$heightLightActive<e?"wait":void 0},stepClick:function(e,t){(this.isDesign||!0===this.isClick||"all"==this.isClick||"old"==this.isClick&&t<this.max)&&this.initValue(t+1),this.$dispatch("item-click",{item:e,index:t})},postBefore:function(){this.__valueLock=!0,this.initValue(this.active+1)},postAfter:function(){this.__valueLock=!1},postError:function(){var e=this;return new Promise((function(t){e.__valueLock=!1,e.emitValueChange({active:e.active,status:e.status,max:e.max}),t()}))}}}),s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1129:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isDesign?a("div",{staticClass:"ds-control ds-platform-personnel-card",class:[e.imgPosition],style:{fontFamily:e.fontFamily,"border-color":e.borderColor}},[a("div",{staticClass:"davatar"},[a("dsf-image",{staticClass:"avatar-pic"}),e.showIcon?a("dsf-icon",{staticClass:"avatar-icon",style:{color:e.iconDefaultColor},attrs:{name:e.iconName}}):e._e(),e.showIcon?a("dsf-icon",{staticClass:"avatar-icon active-icon",style:{color:e.iconActiveColor},attrs:{name:e.iconName}}):e._e(),e.showTag?a("p",{staticClass:"avatar-tag",style:{backgroundColor:e.tagBgcolor,borderRadius:e.tagRadius,bottom:e.$bottom,width:e.$width}},[e._v(" 标签内容 ")]):e._e()],1),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[a("p",{staticClass:"namep dotted-line"},[e._v("张三小哥")]),a("div",{staticClass:"age dotted-line"},[a("p",{style:{color:e.birthFontColor}},[e._v("1991.04")]),a("p",{style:{color:e.birthFontColor}},[e._v("31岁")])])]),a("div",{staticClass:"desc dotted-line",class:[e.descClass]},[a("el-popover",{attrs:{placement:"top-start",width:"240",trigger:"hover",content:"四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;"}},[a("p",{ref:"desc",style:{color:e.descFontColor},attrs:{slot:"reference"},slot:"reference"},[e._v('"四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;四川省成都市锦江区;"')])])],1),a("div",{staticClass:"ds-personnel-card-slots dotted-line",style:{height:e.isDesign?"50px":""},attrs:{"slot-name":"personnel-card"}},[0===e.slots[0].controls.length?a("p",{staticClass:"tips"},[e._v("请配置按钮")]):e._e(),e._t("personnel-card")],2)])]):a("div",{staticClass:"ds-control ds-platform-personnel-card",class:[e.imgPosition],style:{fontFamily:e.fontFamily,"border-color":e.borderColor}},[a("div",{staticClass:"davatar",on:{click:e.cardClickHandler}},[a("dsf-image",{staticClass:"avatar-pic",attrs:{src:e._f("imgFormat")(e.avatar),"error-src":e.errorSrc}}),e.showIcon?a("dsf-icon",{staticClass:"avatar-icon",style:{color:(e.data["isCollect"],e.iconDefaultColor)},attrs:{name:e.iconName}}):e._e(),e.showTag?a("p",{staticClass:"avatar-tag",style:{backgroundColor:e.tagBgcolor,borderRadius:e.tagRadius,bottom:e.$bottom,width:e.$width}},[e._v(" "+e._s(e.data["tag"])+" ")]):e._e()],1),a("div",{staticClass:"info"},[a("div",{staticClass:"user-info",on:{click:e.cardClickHandler}},[a("div",{staticClass:"name"},[a("p",{staticClass:"namep"},[e._v(e._s(e.data["name"]))]),a("div",{staticClass:"age"},[a("p",{style:{color:e.birthFontColor}},[e._v(e._s(e.birthday))]),a("p",{style:{color:e.birthFontColor}},[e._v(e._s(e.age))])])]),a("div",{staticClass:"desc",class:[e.descClass]},[e.overflowdiv?a("el-popover",{attrs:{placement:"top-start",width:"240",trigger:"hover",content:e.data["jobDesc"]}},[a("p",{ref:"desc",style:{color:e.descFontColor},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.data["jobDesc"]))])]):a("p",{ref:"desc",style:{color:e.descFontColor}},[e._v(e._s(e.data["jobDesc"]))])],1)]),e.slots[0].controls.length>0?a("div",{staticClass:"ds-personnel-card-slots",attrs:{"slot-name":"personnel-card"}},[e._t("personnel-card")],2):e._e()])])},n=[];function r(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=s(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw r}}}}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var l=dsf.component({name:"DsfPlatformPersonnelCard",ctrlCaption:"人员信息卡片",mixins:[$mixins.card,$mixins.layout],data:function(){return{overflowdiv:!1}},props:{errorSrc:{type:String,default:""},keysMap:{type:Array,default:function(){return[{from:"avatar",to:"avatar",type:"text",desc:"头像"},{from:"tag",to:"tag",type:"text",desc:"人物标签"},{from:"name",to:"name",type:"text",desc:"姓名"},{from:"birthday",to:"birthday",type:"text",desc:"出生年月"},{from:"age",to:"age",type:"text|number",desc:"年纪"},{from:"jobDesc",to:"jobDesc",type:"text",desc:"职位描述"},{from:"isCollect",to:"isCollect",type:"boolean",desc:"是否收藏"},{from:"_id",to:"_id",type:"text|number",desc:"唯一标识"}]}},borderColor:{type:String,default:"#f1f1f1"},imgPosition:{type:String,default:"img-left"},showIcon:{type:Boolean,default:!1},iconName:{type:String,default:"wujiaoxing1"},iconDefaultColor:{type:String,default:"#999999"},iconActiveColor:{type:String,default:"#E6A23C"},showTag:{type:Boolean,default:!1},tagBgcolor:{type:String,default:"#E6A23C"},tagRadius:{type:String,default:"0px"},tagPadding:{type:Array,default:function(){return["6px","6px"]}},fontFamily:{type:String,default:"Microsoft YaHei"},birthFontColor:{type:String,default:"#666666"},descFontColor:{type:String,default:"#666666"},jobdescPosition:{type:String,default:"left"},isCenter:{type:Boolean,default:!1},birthformatter:{type:String,default:"yyyy.mm"},slots:{type:Array,default:function(){return[{name:"personnel-card",controls:[]}]}}},computed:{descClass:function(){return this.isCenter?"vertical-center ".concat(this.jobdescPosition):this.jobdescPosition},$bottom:function(){var e=this.tagPadding;return dsf.isNumber(e[1])?e[1]+"px":e[1]},$width:function(){var e=this.tagPadding;return"calc(98px - (2 * ".concat(dsf.isNumber(e[0])?"".concat(e[0],"px"):e[0],"))")},birthday:function(){var e,t=(null===(e=this.data)||void 0===e?void 0:e.birthday)||"";return dsf.date.format(t,this.birthformatter)},age:function(){var e,t=(null===(e=this.data)||void 0===e?void 0:e.age)||"";return String(t).indexOf("岁")>-1?t:"".concat(Number(t),"岁")},avatar:function(){var e,t=(null===(e=this.data)||void 0===e?void 0:e.avatar)||"";try{var a;t=null===(a=JSON.parse(t))||void 0===a||null===(a=a[0])||void 0===a?void 0:a.relativePath}catch(i){t=""}return t}},watch:{multipleSelection:function(e){}},created:function(){},mounted:function(){this.overflowdiv=this.$refs.desc.clientHeight<this.$refs.desc.scrollHeight},methods:{cardClickHandler:function(){var e,t=null===(e=this.$vm.$refs)||void 0===e?void 0:e.gblb.getSelectedRows(),a=[];try{var i,n=r(t);try{for(n.s();!(i=n.n()).done;){var s=i.value;a.push(null===s||void 0===s?void 0:s._id)}}catch(o){n.e(o)}finally{n.f()}}catch(l){a=[]}this.$dispatch("card-item-click",{ids:a,row:this.data})}}}),c=l,d=(a(699),a(0)),u=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=u.exports},1133:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-qrcode pc"},[a("div",{staticClass:"ds-qrcode-box",style:e.boxStyle,attrs:{border:e.border,shadow:e.shadow}},[a("el-image",{attrs:{src:e._f("imgFormat")(e.qrSrc)},on:{load:e.loadSuccess},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("div",{staticClass:"ds-qrcode-box-error"},[e._v("加载中...")])]},proxy:!0},{key:"error",fn:function(){return[a("div",{staticClass:"ds-qrcode-box-error"},[e._v(" "+e._s(e.loading?"加载中...":"加载失败")+" ")])]},proxy:!0}])}),a("div",{staticClass:"ds-qrcode-box-message",class:[e.qrStatus]},["SUCCESS"===e.qrStatus?a("i",{staticClass:"iconfont icon-gouxuan"}):"FAIL"===e.qrStatus?a("i",{staticClass:"iconfont icon-shanchu1"}):e._e(),a("span",[e._v(e._s(e.qrTips))])])],1),e._t("tips",(function(){return[a("div",{directives:[{name:"show",rawName:"v-show",value:e.tips,expression:"tips"}],staticClass:"ds-qrcode-tips"},[e._v(e._s(e.tips))])]}))],2)},n=[],r=dsf.component({name:"DsfQrcode",mixins:[$mixins.control],ctrlCaption:"二维码",props:{source:{type:String,default:"img"},imgSrc:{type:String,default:""},sourceSrc:{type:String,default:""},querySrc:{type:String,default:""},size:{type:String,default:"220px"},tips:{type:String,default:""},padding:{type:String,default:"0px"},radius:{type:String,default:"4px"},border:{type:Boolean,default:!0},shadow:{type:Boolean,default:!0},queryTimes:{type:Number,default:2e3}},data:function(){return{loading:!1,qrSrc:"",qrStatus:"WAITING",qrTips:"支付成功"}},computed:{boxStyle:function(){return{width:this.size,height:this.size,padding:this.padding,"border-radius":this.radius}}},created:function(){this.isDesign||("img"==this.source?this.qrSrc=this.$replace(this.imgSrc,this):this.doSource())},beforeDestroy:function(){clearTimeout(this.timer)},methods:{doSource:function(){var e=this;if(this.sourceSrc){this.loading=!0;var t=this.$replace(this.sourceSrc,this);this.$http.get(t).done((function(t){var a=t.success,i=t.data,n=t.message;if(a)for(var r in e.qrSrc=i.img,delete i.img,i)e[r]=i[r];else dsf.layer.message(n||"请求异常",!1)})).error((function(e){dsf.error(e),dsf.layer.message(e.message||"请求异常",!1)})).always((function(){e.loading=!1}))}},loadSuccess:function(){!this.isDesign&&this.querySrc&&this.doQuery()},doQuery:function(){var e=this,t=this.$replace(this.querySrc,this);this.$http.get(t).done((function(t){var a=t.success,i=t.data,n=t.message;a?(e.qrStatus=i,e.qrTips=n,"WAITING"===i?e.timer=setTimeout((function(){e.doQuery()}),e.queryTimes):"SUCCESS"===i?e.$dispatch("success"):"FAIL"===i&&e.$dispatch("fail")):dsf.layer.message(n,!1)})).error((function(e){dsf.layer.message(e.message||"请求异常",!1)}))}}}),s=r,o=(a(703),a(0)),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1134:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.progressFlag,expression:"progressFlag"}],staticClass:"dsf-readfilestructure"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[a("div",{staticClass:"path"},[a("i",{staticClass:"iconfont icon-wenjianjia"}),a("el-input",{attrs:{placeholder:"路径",clearable:"",readonly:""},model:{value:e.rootPath,callback:function(t){e.rootPath=t},expression:"rootPath"}})],1),a("div",{staticClass:"btns"},[a("dsf-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"add",title:"创建文件夹"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新建文件夹")]),a("el-upload",{staticClass:"upload-demo",attrs:{action:e.dsf.url.getWebPath(e.uploadFileUrl),"file-list":e.fileList,"http-request":e.httpRequest,"on-success":e.handleSuccess,"on-error":e.handleError,"on-change":e.handleChange,disabled:e.progressFlag}},[a("dsf-button",{attrs:{title:"上传文件",icon:"shangchuan",disabled:e.progressFlag}},[e._v("上传文件")])],1),e.showProgress?a("div",{staticClass:"progress"},[a("el-progress",{attrs:{id:"progress",type:"circle",percentage:e.percent,"stroke-width":8,width:100,"show-text":!0,"stroke-linecap":"round",format:e.progressFormat}})],1):e._e()],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{height:"500",border:"",stripe:"",data:e.tableData,"empty-text":e.elTableText}},[a("el-table-column",{key:"name",attrs:{width:"auto",label:"名称",align:"left",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:{folder:t.row.dir},on:{click:function(a){return e.loadNextFile(t.row)}}},[t.row.dir?a("i",{staticClass:"iconfont icon-wenjianjia"}):e._e(),e._v(" "+e._s(t.row.name)+" ")])]}}])}),a("el-table-column",{key:"size",attrs:{width:"auto",label:"大小",align:"left",prop:"size"}}),a("el-table-column",{key:"type",attrs:{width:"auto",label:"类型",align:"left",prop:"type"}}),a("el-table-column",{key:"modifyTime",attrs:{width:"auto",label:"修改时间",align:"left",prop:"modifyTime"}}),a("el-table-column",{key:"path",attrs:{width:"auto",label:"路径",align:"left",prop:"path"}}),a("el-table-column",{key:"owner",attrs:{width:"auto",label:"owner",align:"left",prop:"owner"}})],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"新建文件夹",modal:!1,visible:e.dialogVisible,width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"directory",attrs:{model:e.directory,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"文件夹名称:",prop:"name"}},[a("el-input",{model:{value:e.directory.name,callback:function(t){e.$set(e.directory,"name",t)},expression:"directory.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("dsf-button",{attrs:{title:"确定"},on:{click:e.confirm}},[e._v("确 定")]),a("dsf-button",{attrs:{type:"plain",title:"取消"},on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},n=[],r=a(4),s=a.n(r),o=a(1),l=a.n(o),c=dsf.component({name:"DsfReadFileStructure",ctrlCaption:"文件列表",mixins:[$mixins.control],props:{name:{type:String,default:""},ip:{type:String,default:""},port:{type:String,default:""},protocolValue:{type:String,default:""},username:{type:String,default:""},pwd:{type:String,default:""},pathModeValue:{type:String,default:""},path:{type:String,default:""},fileName:{type:String,default:""},type:{type:String,default:"ftp"},resourceId:{type:String,default:""}},data:function(){return{sourceIdUrl:"/ftp/connectFtp",sourceFilrUrl:"/ftp/listFile",sourceCloseUrl:"/ftp/disConnectFtp",uploadFileUrl:"/ftp/uploadFile",createDirectoryUrl:"/ftp/createDirectory",sourceId:null,tableData:[],rootPath:null,dialogVisible:!1,rules:{name:[{required:!0,message:"请输入文件夹名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]},directory:{name:""},fileList:[],percent:0,progressFlag:!1,deg:135,status:this.percent<100?"":"success",color:[{color:"#fdfdfd",percentage:99},{color:"#ccccc",percentage:100}],showProgress:!1,_resourceId:this.resourceId,elTableText:"数据加载中",loader:null}},mounted:function(){var e=this;this.resourceId||this.queryString&&(this._resourceId=this.queryString.resourceId||this.queryString.resource_id),this.loadFileSource(),this.$nextTick((function(){e.loader=dsf.layer.loading()}))},methods:{handleSuccess:function(e,t){},handleError:function(e,t){},handleChange:function(e,t){},httpRequest:function(e){var t=this;this.showProgress=!0,this.progressFlag=!0;var a=new FormData;a.append("file",e.file);var i={timeout:0,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){e.lengthComputable&&(t.percent=e.loaded/e.total*100|0)}},n=this.rootPath||this.path;this.$http.post("/ftp/uploadFile?type="+this.type+"&connectId="+this.sourceId+"&path="+this.rootPath,a,i).done((function(a){a.success?(e.onSuccess(a),dsf.layer.message("文件上传成功"),t.loadFileDetail(n),t.progressFlag=!1,t.percent=100,setTimeout((function(){t.showProgress=!1,t.percent=0}),1e3)):(dsf.layer.message(a.message,!1),t.percent=-1,t.progressFlag=!1,setTimeout((function(){t.showProgress=!1,t.percent=0}),1e3))})).error((function(a){e.onError(a),t.percent=-1,setTimeout((function(){t.showProgress=!1,t.percent=0}),1e3)}))},cancel:function(){this.directory.name="",this.dialogVisible=!1},progressFormat:function(e){var t="";return t=e>-1&&e<100?"已上传("+e+"%)":100==e?"上传完成":"上传失败",t},confirm:function(){var e=this;this.$refs.directory.validate((function(t){if(!t)return!1;e.createDirectory()}))},createDirectory:function(){var e=this,t={type:this.type,connectId:this.sourceId,name:this.directory.name,path:this.rootPath||this.path};this.$http.post(this.createDirectoryUrl,t).done((function(t){var a=t.success,i=(t.data,t.message);a?(e.dialogVisible=!1,e.directory.name="",dsf.layer.message("新建文件夹成功"),e.loadFileDetail(e.rootPath)):dsf.layer.message(i||"请求异常",!1)})).error((function(e){dsf.error(e),dsf.layer.message(e.message||"请求异常",!1),reject(!1)}))},loadNextFile:function(e){var t=e.dir,a=e.path;t&&this.loadFileDetail(a)},loadFileSource:function(){var e=this;return s()(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("ftp"!=e.type){t.next=7;break}return t.next=3,e.loadFileSourceId();case 3:a=t.sent,a&&e.loadFileDetail(),t.next=8;break;case 7:e.loadFileDetail();case 8:case"end":return t.stop()}}),t)})))()},loadFileDetail:function(e){var t=this;this.elTableText="数据加载中";var a={resourceId:this._resourceId,path:e||this.path,type:this.type};"ftp"==this.type&&(a.connectId=this.sourceId),this.$http.get(this.sourceFilrUrl,a).done((function(a){var i=a.success,n=a.data,r=a.message;i?n&&n.length&&(t.tableData=n,t.rootPath=e||t.path,t.uploadFileUrl="/ftp/uploadFile?type="+t.type+"&connectId="+t.sourceId+"&path="+t.rootPath):dsf.layer.message(r||"请求异常",!1)})).error((function(e){dsf.error(e),dsf.layer.message(e.message||"请求异常",!1)})).finally((function(){t.elTableText="暂无数据",t.loader&&(dsf.layer.closeLoading(t.loader),t.loader=null)}))},loadFileSourceId:function(){var e=this;return new Promise((function(t,a){var i={ip:e.ip,port:e.port,protocolValue:e.protocolValue,username:e.username,pwd:e.pwd};e.$http.post(e.sourceIdUrl,i).done((function(i){var n=i.success,r=i.data,s=i.message;n?(e.sourceId=r,e.uploadFileUrl="/ftp/uploadFile?type="+e.type+"&connectId="+e.sourceId+"&path="+e.rootPath||!1,t(r)):(dsf.layer.message(s||"请求异常",!1),a(!1))})).error((function(e){dsf.error(e),dsf.layer.message(e.message||"请求异常",!1),a(!1)}))}))},closeSourceFtp:function(){var e=this;return new Promise((function(t,a){var i={connectId:e.sourceId};e.$http.post(e.sourceCloseUrl,i).done((function(e){var i=e.success,n=e.message;i?t(!0):(dsf.layer.message(n||"请求异常",!1),a(!1))})).error((function(e){dsf.layer.message(e.message||"请求异常",!1),a(!1)}))}))},yes:function(){var e=this;return s()(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.closeSourceFtp();case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))()}}}),d=c,u=(a(705),a(0)),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},1135:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-sms-vcrontab"},[e.ready?a("vcrontab",{ref:"cron",attrs:{expression:e.cronExpression},on:{hide:e.hide}}):e._e()],1)},n=[],r=a(394),s=dsf.component({name:"DsfRepeatSendSetting",ctrlCaption:"重复发送时间设置",mixins:[$mixins.control],props:{cronExpression:{type:String,default:""},parent:{type:Object,default:function(){return{}}},setCornExpression:{type:Function,default:function(){}}},data:function(){return{ready:!1}},created:function(){var e=this;Object(r["b"])((function(){e.ready=!0}))},methods:{yes:function(){return this.$refs.cron.contabValueString},onChangeCron:function(e){},hide:function(){this.$dialog.close()},clearCron:function(e){this.$refs.cron.clearCron()}}}),o=s,l=(a(707),a(0)),c=Object(l["a"])(o,i,n,!1,null,null,null);t["default"]=c.exports},1140:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-database"},[a("form",{attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.search.apply(null,arguments)}}},[a("el-input",{staticClass:"database-search-input",model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[a("div",{staticClass:"button",attrs:{slot:"append"},on:{click:e.search},slot:"append"},[a("i",{staticClass:"iconfont icon-fangdajing"})])])],1),e._l(e.tempData,(function(t){return a("div",{key:t.name,staticClass:"db-item"},[a("h3",{staticClass:"title"},[e._v(e._s(t.title))]),a("ul",{staticClass:"item-content"},[e._l(t.tabItems,(function(t){return[a("li",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"it.show"}],attrs:{Key:t.name},on:{click:function(a){return e.openUrl(t.urlAddress)}}},[a("div",{staticClass:"img-wrap"},[a("dsf-image",{attrs:{src:t.imgUrl,dUrl:t.imgUrl,height:"100%",fit:"contain"}})],1),a("div",{staticClass:"name"},[e._v(e._s(t.name))])])]})),t.tabItems.length?e._e():[a("dsf-empty-data",{attrs:{text:"暂无数据"}})]],2)])}))],2)},n=[],r=dsf.component({name:"DsfRegisterDatabase",ctrlCaption:"注册数据资源面板",mixins:[$mixins.control,$mixins.card],props:{tabList:{type:Array,default:function(){return[]}},name:{type:String,default:""},useInterface:{type:Boolean,default:!1},sourceUrl:{type:String,default:"/resourceType/getTree"},refeshParent:{type:Boolean,default:!0},closedialog:{type:Boolean,default:!1}},data:function(){return{keywords:"",tempData:[],list:[]}},mounted:function(){this.init()},methods:{init:function(){!this.isDesign&&this.useInterface?this.initDatabase():this.initData()},initData:function(){var e=_.cloneDeep(this.tabList);e=e.map((function(e){return e.tabItems.map((function(e){return e.show=!0,e})),e})),this.tempData=e},filterData:function(e){var t=this.tempData.filter((function(t){return t.tabItems.filter((function(t){t["name"].match(e)?t.show=!0:t.show=!1})),t}));return t},search:function(){if(this.useInterface)this.initDatabase();else if(""!=this.keywords.trim()){var e=new RegExp(dsf.escapeForRegExp(this.keywords.toLowerCase())),t=this.filterData(e);this.tempData=t}else this.tempData=this.tempData.filter((function(e){return e.tabItems.filter((function(e){e.show=!0})),e}))},reloadData:function(){this.init(),this.reloadParent()},reloadParent:function(){if(this.refeshParent){var e,t,a=null===(e=this.$dialog)||void 0===e||null===(e=e.options)||void 0===e||null===(e=e.params)||void 0===e?void 0:e.vm;null===(t=a.$refs)||void 0===t||null===(t=t.datagrid1)||void 0===t||t.reloadData()}},openUrl:function(e){var t;if(e){var a=this;a.$vm&&(a=a.$vm,a.$openerVm&&(a=a.$openerVm)),a.$openWindow(this.$replace(e)),null===(t=this.$dialog)||void 0===t||t.close()}else dsf.layer.message("路径不存在",!1)},initDatabase:function(){var e=this,t=dsf.layer.pc.loading(),a=dsf.mix({name:this.keywords},this.queryString);this.$http.get(this.sourceUrl,a).done((function(t){var a=t.success,i=t.data;a?e.setDatabase(i):dsf.layer.message("查询注册数据资源失败",!1)})).error((function(){dsf.layer.message("查询注册数据资源失败",!1)})).always((function(){dsf.layer.pc.closeLoading(t)}))},setDatabase:function(e){var t=e.map((function(e){return{title:e.resName,tabItems:e.children.map((function(e){var t=e.resName,a=e.iconAddress,i=e.url;return{name:t,urlAddress:i,imgUrl:a,show:!0}}))}}));this.tempData=t}}}),s=r,o=(a(717),a(0)),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1141:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-control ds-selectpermissions"},[a("div",{staticClass:"left"},[e.showRole?a("div",{ref:"header",staticClass:"header",class:[e.tabIndex?"tabIndex1":"tabIndex0"]},[a("span",{on:{click:function(t){e.tabIndex=0}}},[a("i",{staticClass:"iconfont icon-icon_user_bm"}),a("span",[e._v("按组织机构选")])]),a("span",{on:{click:function(t){e.tabIndex=1}}},[a("i",{staticClass:"iconfont icon-zhuhutiaocha"}),a("span",[e._v("按部门角色选")])])]):e._e(),a("div",{ref:"content",staticClass:"content",style:{height:e.contentHeight}},[e.inited?[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.tabIndex,expression:"!tabIndex"}],staticClass:"tabIndex0"},[a("org-box",{ref:"orgBox"})],1),e.showRole?a("div",{directives:[{name:"show",rawName:"v-show",value:e.tabIndex,expression:"tabIndex"}],staticClass:"tabIndex1"},[a("org-box",{ref:"roleOrgBox",attrs:{"is-role":!0}}),a("role-tree",{ref:"roleTree"})],1):e._e()]:e._e()],2)]),a("result-list",{ref:"resultList",attrs:{list:e.resultLists}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tabIndex,expression:"tabIndex"}],ref:"roleBtn",staticClass:"roleBtn",style:{right:e.rightCss},on:{click:e.setRoleResultList}},[a("span",[e._v("选")]),a("span",[e._v("择")]),a("i",{staticClass:"el-icon-d-arrow-right"})])],1)},n=[],r=a(3),s=a.n(r);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=dsf.component({name:"DsfSelectPermissions",ctrlCaption:"权限选择器",mixins:[$mixins.control,$mixins.dataResult],design:{isMask:!0,fit:!0},components:{orgBox:function(){return a.e(55).then(a.bind(null,1270))},roleTree:function(){return a.e(55).then(a.bind(null,1271))},resultList:function(){return a.e(55).then(a.bind(null,1272))}},props:{orgHttpUrl:{type:String,default:"/dp/oua/finOrgByPid"},ruleDeptId:{type:String,default:null},ruleDeptName:{type:String,default:null}},provide:function(){return{$seletPermissions:this}},data:function(){return{tabIndex:0,contentHeight:0,resultLists:[],roleOrg:[],roleTree:[],rightCss:"280px",defaultSelectValue:[],inited:!1,showRole:this.isDesign||this.$eval("@[pri('_data_permission_scope_role_choose')]")}},created:function(){var e;this.isDesign||(this.$listeners.setDefaultSelect?this.$dispatch("setDefaultSelect",this.initDefaultSelect):this.initDefaultSelect(null===(e=this.$vm)||void 0===e||null===(e=e.$attrs)||void 0===e?void 0:e.selectValue))},methods:{initDefaultSelect:function(e){var t=this;_.forEach(e,(function(e){var a=e.value,i=e.text,n=(a||"").split("_"),r={};null!==n&&void 0!==n&&n[0].includes("2")?r={id:a,name:i,isRole:!0,isDefaultSelect:!0}:2==n.length&&("1"!==(null===n||void 0===n?void 0:n[0])&&(r["valueType"]="dept",r["config_includeChild"]="A0"===(null===n||void 0===n?void 0:n[0])),r["id"]=null===n||void 0===n?void 0:n[1],r["value"]=a,r["name"]=i,t.defaultSelectValue.push(r)),r["isDefaultSelect"]=!0,t.resultLists.push(r)})),this.inited=!0},resize:function(){var e,t,a,i,n,r,s,o;(this.getContentHeight(),null===(e=this.$refs)||void 0===e||null===(e=e.orgBox)||void 0===e||null===(t=e.resize)||void 0===t||t.call(e),null===(a=this.$refs)||void 0===a||null===(a=a.roleOrgBox)||void 0===a||null===(i=a.resize)||void 0===i||i.call(a),null===(n=this.$refs)||void 0===n||null===(n=n.roleTree)||void 0===n||null===(r=n.resize)||void 0===r||r.call(n),null!==this&&void 0!==this&&null!==(s=this.$refs)&&void 0!==s&&s.resultList)&&(this.rightCss=(null===this||void 0===this||null===(o=this.$refs)||void 0===o?void 0:o.resultList.$el.clientWidth)+"px")},getContentHeight:function(){var e;this.$refs.content&&(this.contentHeight="calc(100% - ".concat((null===this||void 0===this||null===(e=this.$refs)||void 0===e||null===(e=e.header)||void 0===e?void 0:e.clientHeight)||0,"px)"))},changeResult:function(e){var t=e.config_checked,a=-1;_.forEach(this.resultLists,(function(t,i){e.id==t.id&&(a=i)})),t&&-1==a?(this.resultLists.push(e),this.resultLists=_.unionBy(this.resultLists,"id")):t||-1===a||this.resultLists.splice(a,1)},changeRoleOrg:function(e){var t=e.config_checked,a=-1;_.forEach(this.roleOrg,(function(t,i){e.id==t.id&&(a=i)})),t&&-1==a?this.roleOrg.push(e):t||-1===a||this.roleOrg.splice(a,1)},setRoleResultList:function(){var e=this;if(0!=this.roleOrg.length){var t=this.$refs.roleTree.getResult();0!=t.length?(_.forEachRight(this.roleOrg,(function(a){_.forEachRight(t,(function(t){var i="";i=a.config_includeChild?"21_":"2_",i+=a.id,"role"===t.type_value&&(i+="_"+t._id,e.resultLists.push({id:i,name:a.name+"-"+t._name,org:dsf.mix({},a),role:dsf.mix({},t),isRole:!0}),e.$refs.roleTree.clearResult([t]))})),a.config_includeChild=!1,a.config_checked=!1})),this.resultLists=_.unionBy(this.resultLists,"id"),this.roleOrg=[]):dsf.layer.message("请选择角色",!1)}else dsf.layer.message("请选择部门",!1)},getReturnValue:function(){var e,t=[];return null!==this&&void 0!==this&&null!==(e=this.resultLists)&&void 0!==e&&e.length?(_.forEach(_.unionBy(this.resultLists,"id"),(function(e){var a=e.id,i=e.name;e.isDefaultSelect?e.value&&(a=e.value):e.isRole?e.org.config_includeChild&&(i=i.replace("-","（包含下级）-")):"dept"===e.valueType?e.config_includeChild?(a="A0_"+a,i+="（包含下级）"):a="0_"+a:a="1_"+a,t.push(l(l({},e),{},{text:i,value:a}))})),t):(dsf.layer.message("请选择权限",!1),!1)}}}),d=c,u=(a(719),a(0)),h=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=h.exports},1146:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DsfViewPart",e._b({ref:"viewPart",staticClass:"dsf-form-pick-up",attrs:{showModel:e.showModel,path:e.path},on:{"view-created":e.initFormViewCreated,ready:e.initProxyReportFormItems}},"DsfViewPart",e.$attrs,!1))},n=[],r=dsf.component({name:"DsfFormPickUp",ctrlCaption:"表单页面拾取代理组件",mixins:[$mixins.control],provide:function(){return{$formPickUp:!0}},props:{path:{type:String,default:""},showModel:{type:String,default:"none"}},data:function(){return{}},computed:{},methods:{getMetadataKeyList:function(){var e;return(null===(e=this.$refs)||void 0===e||null===(e=e.viewPart)||void 0===e||null===(e=e.content)||void 0===e||null===(e=e.$page)||void 0===e||null===(e=e.$vm)||void 0===e?void 0:e.metadataKeyList)||[]},initFormViewCreated:function(e){var t=e.args,a=t.view,i=t.view.$addFiled,n=this,r=function(e){e._isVue?null!==e&&void 0!==e&&e.isFormControl&&!e.isOneToMany&&(e.$on("mounted",(function(t){n.addProxy(t.target,e)})),e.$on("updated",(function(t){n.addProxy(t.target,e)})),e.$on("before-destroy",(function(e){n.removeProxy(e.target)}))):null!==e&&void 0!==e&&e.isFormControl&&Vue.nextTick((function(){var t=a.$el.querySelector("[proxy-id='"+e.$designId+"']");n.addProxy(t,e)}))};a.$addFiled=function(e){r(e),i.call(a,e)}},addProxy:function(e,t){var a=this,i=null,n=e.$el?e.$el:e;n&&(i=null===n||void 0===n?void 0:n.querySelector(".ds-form-item-proxy"),i&&($(i).off("dblclick"),$(i).remove()),i=$('<div class="ds-form-item-proxy" title="双击复制审核代码"></div>'),i.on("dblclick",(function(){a.proxyDblClick(t)})),$(n).append(i))},removeProxy:function(e){var t=null,a=e.$el?e.$el:e;a&&(t=a.querySelector(".ds-form-item-proxy"),t&&($(t).off("dblclick"),$(t).remove()))},initProxyReportFormItems:function(){var e=this,t=this.$refs.viewPart;this.$nextTick((function(){try{var a=e.getMetadataKeyList();a.length&&a.forEach((function(e){var t,a=null===(t=$('.ds-form-item[form-name="'.concat(e,'"]')))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.__vue__;a&&a.$emit("update:visible",!0)}));var i=t.content,n=["DsfButtonBar"];for(var r in i.$refs){var s=i.$refs[r];n.includes(s.ctrlName)&&s.$emit("update:visible",!1)}}catch(o){console.error(o)}e.$dispatch("ready",{owner:e,viewPart:t})}))},proxyDblClick:function(e){this.$dispatch("dblclickFormControl",e),this.$dispatch("dblclickFormItem",e.metadata)}},watch:{},mounted:function(){}}),s=r,o=(a(725),a(0)),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1147:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-report-form-pick-up"},[a("DsfFormPickUp",e._g(e._b({on:{ready:e.formReady}},"DsfFormPickUp",e.$attrs,!1),e.$listeners)),e._e()],1)},n=[],r=dsf.component({name:"DsfReportFormPickUp",ctrlCaption:"报表表单页面拾取代理组件",mixins:[$mixins.control],provide:function(){return{$reportFormPickUp:!0}},data:function(){return{}},props:{},created:function(){},methods:{formReady:function(e){},systemFiledClick:function(e){}}}),s=r,o=(a(727),a(0)),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1149:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-department-migration-wrap ds-control"},[a("div",{staticClass:"ds-department-migration-tips"},[a("el-alert",{attrs:{title:"迁移部门后，部门下的用户将迁移到目标部门",type:"success","show-icon":"",closable:!1}})],1),a("div",{staticClass:"ds-department-migration-content"},[a("div",{staticClass:"ds-department-migration-tree-wrap"},[a("Header",{attrs:{label:"待迁移部门"}},[a("p",{attrs:{slot:"one"},slot:"one"},[e._v("已选：")]),a("p",{staticClass:"number",attrs:{slot:"two"},slot:"two"},[e._v(e._s(e.migrateSelectDepNum))]),a("p",{attrs:{slot:"three"},slot:"three"},[e._v("个部门")])]),a("InputItem",{attrs:{value:e.migrateInputValue,name:"migrate"},on:{"update:value":function(t){e.migrateInputValue=t}}}),a("Tree",{ref:"migrate",attrs:{name:"migrate","selection-data":e.migrateSelectionData,"search-value":e.migrateInputValue,isDesign:e.isDesign,"root-node-prohibit-selection":!0},on:{"update:selectionData":function(t){e.migrateSelectionData=t},"update:selection-data":function(t){e.migrateSelectionData=t}}})],1),a("div",{staticClass:"ds-department-migration-content-hanlder-button"},[a("div",{staticClass:"handler-button",class:{disabled:e.migrateDisabled,"high-light":!e.migrateDisabled},on:{click:function(t){return e.clickHandler("migrate",e.migrateDisabled)}}},[a("p",[e._v("迁移")]),a("i",{staticClass:"el-icon-caret-right"})]),a("div",{staticClass:"handler-button",class:{disabled:e.reductionDisabled,"high-light":!e.reductionDisabled},on:{click:function(t){return e.clickHandler("reduction",e.reductionDisabled)}}},[a("i",{staticClass:"el-icon-caret-left"}),a("p",[e._v("还原")])])]),a("div",{staticClass:"ds-department-migration-tree-wrap"},[a("Header",{attrs:{label:"目标部门"}},[a("p",{attrs:{slot:"one"},slot:"one"},[e._v("累计迁移：")]),a("p",{staticClass:"number",attrs:{slot:"two"},slot:"two"},[e._v(e._s(e.accumulatedMigrationTimes))]),a("p",{attrs:{slot:"three"},slot:"three"},[e._v("个")])]),a("InputItem",{attrs:{value:e.targetInputValue,name:"target"},on:{"update:value":function(t){e.targetInputValue=t}}}),a("Tree",{ref:"target",attrs:{name:"target","selection-data":e.targetSelectionData,"search-value":e.targetInputValue,isDesign:e.isDesign},on:{"update:selectionData":function(t){e.targetSelectionData=t},"update:selection-data":function(t){e.targetSelectionData=t}}})],1)]),a("div",{staticClass:"ds-department-migration-buttons"},[a("DsfButton",{on:{click:function(t){return e.clickHandler("confirm")}}},[e._v("确认")]),a("DsfButton",{attrs:{type:"plain"},on:{click:function(t){return e.clickHandler("cancel")}}},[e._v("取消")])],1)])},n=[],r=a(2),s=a.n(r),o=a(3),l=a.n(o),c=a(4),d=a.n(c),u=a(1),h=a.n(u);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m=dsf.component({name:"DsfDepartmentMigration",mixins:[$mixins.control],ctrlCaption:"部门迁移",components:{Header:function(){return a.e(55).then(a.bind(null,1273))},InputItem:function(){return a.e(55).then(a.bind(null,1274))},Tree:function(){return a.e(55).then(a.bind(null,979))}},provide:function(){return{$index:this}},design:{fit:!0},props:{},computed:{pid:function(){return this.queryString.pid},id:function(){return this.queryString.id},appKey:function(){return this.queryString.appKey},migrateDisabled:function(){return!(this.migrateSelectionData.length>0&&this.targetSelectionData.length>0)},confrimErrorMessage:function(){return 0===this.migrationRecord.length?this.migrateSelectionData.length||this.targetSelectionData.length?this.migrateSelectionData.length?this.targetSelectionData.length?"请进行迁移操作后再保存！":"请勾选目标部门！":"请勾选迁移部门！":"请勾选迁移部门和目标部门！":""}},data:function(){return{migrateInputValue:"",migrateSelectionData:[],migrateSelectDepNum:0,accumulatedMigrationTimes:0,targetInputValue:"",targetSelectionData:[],reductionDisabled:!0,migrationRecord:[],updateSelectDepNum:null}},mounted:function(){this.updateSelectDepNum=_.debounce(this.updateSelectDepNumHandler,500)},methods:{clickHandler:function(e){var t=arguments,a=this;return d()(h.a.mark((function i(){var n,r,s,o,l,c,u,f,m,v,g,y,x,b,$,S;return h.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(c=t.length>1&&void 0!==t[1]&&t[1],!c){i.next=3;break}return i.abrupt("return");case 3:i.t0=e,i.next="migrate"===i.t0?6:"reduction"===i.t0?21:"confirm"===i.t0?32:"cancel"===i.t0?34:36;break;case 6:if(u=[],f=_.cloneDeep(a.targetSelectionData),m=f[0],v=[],g=function(e,t,a){var i=_.map(e.childNodes,(function(e){return e.data.name})),n=_.filter(t,(function(e){return!_.includes(i,e._name)}));n.length!=t.length?dsf.layer.pc.message("【".concat(f[0].name,"】中存在同名部门，").concat(0===n.length?"迁移无效！请重新选择目标部门！":"已自动过滤！"),2):a&&dsf.layer.message({dangerouslyUseHTMLString:!0,message:a},2),n.length>0&&y(n,f)},y=function(){var e=d()(h.a.mark((function e(t,i){return h.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.migrateHandler(t,i);case 2:_.forEach(["tree","tree2"],(function(e){a.$refs.migrate.$refs[e].setCheckedKeys([]),a.$refs.target.$refs[e].setCheckedKeys([])})),a.migrateSelectionData=[],a.targetSelectionData=[],a.migrationRecord.push({m:t,t:i}),a.reductionDisabled=!1,a.accumulatedMigrationTimes+=a.migrateSelectDepNum,a.migrateSelectDepNum=0,a.switchDepParentDisableStatus(),a.insertNodeAfterMigrateHandler();case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x="",_.forEach(a.migrateSelectionData,(function(e){var t=a.allowMove(e,m);t.status&&!_.some(u,(function(t){return t.name===e.name}))?u.push(e):v.push(p(p({},e),{},{errorType:t.errorType}))})),!(u.length>0)){i.next=18;break}if(u.length==a.migrateSelectionData.length){i.next=14;break}return _.map(u,(function(e){return e._id})),b=function e(t){a.$refs.migrate.$refs[a.$refs.migrate.treeRef].setChecked(t.data,!1),t.expanded&&t.childNodes&&t.childNodes.length&&_.forEach(t.childNodes,(function(t){e(t)}))},v.length>0&&(x="".concat(a.getErrorMessage(v,m),"，已自动过滤"),_.forEach(v,(function(e){var t=a.$refs.migrate.$refs[a.$refs.migrate.treeRef].getNode(e);t&&b(t)}))),i.next=14,a.$nextTick((function(){a.updateSelectDepNum()}));case 14:$=a.$refs.target.$refs[a.$refs.target.treeRef].getNode(f[0].treeid),$.expanded?g($,u,x):($.expand(),S=setInterval((function(){$.expanded&&(clearInterval(S),$.childNodes&&$.childNodes.length>0?g($,u,x):(y(u,f),x&&dsf.layer.message({dangerouslyUseHTMLString:!0,message:x},2)))}),300)),i.next=20;break;case 18:x=a.getErrorMessage(v,m),dsf.layer.message({dangerouslyUseHTMLString:!0,message:x},!1);case 20:return i.abrupt("break",36);case 21:return a.reductionDisabled=!0,a.migrateSelectionData=[],a.migrateInputValue="",a.targetSelectionData=[],a.targetInputValue="",a.migrateSelectDepNum=0,a.accumulatedMigrationTimes=0,a.migrationRecord=[],null===(n=a.$refs)||void 0===n||null===(n=n.migrate)||void 0===n||null===(r=n.reloadTreeData)||void 0===r||r.call(n),null===(s=a.$refs)||void 0===s||null===(s=s.target)||void 0===s||null===(o=s.reloadTreeData)||void 0===o||o.call(s),i.abrupt("break",36);case 32:return a.confrimErrorMessage?dsf.layer.message(a.confrimErrorMessage,!1):a.confrimHandler(),i.abrupt("break",36);case 34:return null===a||void 0===a||null===(l=a.$dialog)||void 0===l||l.close(),i.abrupt("break",36);case 36:case"end":return i.stop()}}),i)})))()},getErrorMessage:function(e,t){if(dsf.isArray(e)&&e.length>0){var a=_.cloneDeep(e),i=[],n="",r=this.getTypeName(t.level_value),s=t.name,o=_.filter(a,(function(e){return _.includes(["institution_to_dep","dep_to_dir","dir_to_dep"],e.errorType)}));dsf.isArray(o)&&o.length>0&&(n=this.getMessageByErrorTypeData(o),n+="不能迁移至".concat(r,"【").concat(s,"】下"),i.push(n),a=_.filter(a,(function(e){return!_.includes(["institution_to_dep","dep_to_dir","dir_to_dep"],e.errorType)})));var l=_.filter(a,(function(e){return"samenode"===e.errorType}));dsf.isArray(l)&&l.length>0&&(n="目标".concat(r,"【").concat(s,"】不能为待迁移").concat(r,"【").concat(s,"】"),i.push(n),a=_.filter(a,(function(e){return"samenode"!=e.errorType})));var c=_.filter(a,(function(e){return _.includes(["childnode","grandchildnode"],e.errorType)}));dsf.isArray(c)&&c.length>0&&(n=this.getMessageByErrorTypeData(c),n="目标".concat(r,"【").concat(s,"】不能为待迁移").concat(n,"的子级"),i.push(n),a=_.filter(a,(function(e){return!_.includes(["childnode","grandchildnode"],e.errorType)})));var d=_.filter(a,(function(e){return"parentnode"===e.errorType}));return dsf.isArray(d)&&d.length>0&&(n=this.getMessageByErrorTypeData(d),n="目标".concat(r,"【").concat(s,"】不能为待迁移").concat(n,"的父级"),i.push(n)),i.join("<p style='height: 8px'></p>")}return""},getMessageByErrorTypeData:function(e){var t=_.filter(e,(function(e){return"0"===String(e.level_value)})),a=_.filter(e,(function(e){return["-1","-2"].includes(String(e.level_value))})),i=_.filter(e,(function(e){return["1","2","3"].includes(String(e.level_value))})),n=[];return t.length>0&&n.push("机构【".concat(t[0].name,"】").concat(t.length>1?"等".concat(t.length,"个机构"):"")),a.length>0&&n.push("目录【".concat(a[0].name,"】").concat(a.length>1?"等".concat(a.length,"个目录"):"")),i.length>0&&n.push("部门【".concat(i[0].name,"】").concat(i.length>1?"等".concat(i.length,"个部门"):"")),n.join("、")},getTypeName:function(e){return"0"===String(e)?"机构":["1","2","3"].includes(String(e))?"部门":["-1","-2"].includes(String(e))?"目录":""},allowMove:function(e,t){return null!==e&&void 0!==e&&e._id&&(null===e||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t._id)?{status:!1,errorType:"samenode"}:null!==e&&void 0!==e&&e.treeinfo_pid&&(null===e||void 0===e?void 0:e.treeinfo_pid)===(null===t||void 0===t?void 0:t._id)?{status:!1,errorType:"parentnode"}:null!==e&&void 0!==e&&e._id&&(null===e||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t.treeinfo_pid)?{status:!1,errorType:"childnode"}:null!==t&&void 0!==t&&t.treeinfo_globalid&&t.treeinfo_globalid.indexOf(null===e||void 0===e?void 0:e._id)>-1?{status:!1,errorType:"grandchildnode"}:"0"===String(null===e||void 0===e?void 0:e.level_value)&&["1","2","3"].includes(String(t.level_value))?{status:!1,errorType:"institution_to_dep"}:["-1","-2"].includes(String(null===t||void 0===t?void 0:t.level_value))&&["1","2","3"].includes(String(e.level_value))?{status:!1,errorType:"dep_to_dir"}:["-1","-2"].includes(String(null===e||void 0===e?void 0:e.level_value))&&["1","2","3"].includes(String(t.level_value))?{status:!1,errorType:"dir_to_dep"}:{status:!0}},migrateHandler:function(e,t){var a=this;return d()(h.a.mark((function i(){var n,r,s;return h.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=a.$refs.target,r=n.$refs.tree,s=r.getNode("target_".concat(t[0]._id)),_.forEach(e,(function(e){_.forEach(["tree","tree2"],(function(t){var i=a.$refs.target.$refs[t].getNode("".concat("tree"===t?"target_":"target_search_").concat(e._id));i&&a.$refs.target.$refs[t].remove(i.data)}))})),s&&(s.expanded?a.$nextTick((function(){_.forEach(e,(function(e){_.forEach(["tree","tree2"],(function(t){var i;a.$refs.target.$refs[t].append(p(p({},e),{},{treeName:"target",treeid:"".concat("tree"===t?"target_":"target_search_").concat(e._id),disabled:!0}),null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.treeid)}))}))})):a.targetInputValue||s.expand()),a.$nextTick((function(){_.forEach(e,(function(e){a.$refs.migrate.$refs.tree.remove(e),a.$refs.migrate.$refs.tree2.remove(p(p({},e),{},{treeid:"migrate_search_".concat(e._id)}))}))}));case 4:case"end":return i.stop()}}),i)})))()},updateMigrationRecord:function(e){var t=this;this.migrationRecord=e,this.reductionDisabled=!1,this.accumulatedMigrationTimes=0,_.forEach(this.migrationRecord,(function(e){return t.accumulatedMigrationTimes+=e.m.length})),this.$nextTick((function(){t.$refs.migrate.updateSelectionData()}))},updateSelectDepNumHandler:function(){var e=this,t=this.$refs.migrate.$refs.tree.getCheckedNodes(),a=_.map(t,"_id"),i=this.$refs.migrate.$refs.tree2.getCheckedNodes();if(this.migrateSelectDepNum=0,t.length>0||i.length>0){var n=[],r=null,o=null,l=[];i=_.filter(i,(function(e){return!_.includes(a,e._id)})),n=[].concat(s()(t),s()(i)),_.forEach(n,(function(t){_.some(l,(function(e){return t.globalId.indexOf(e)>-1}))||(r=e.$refs.migrate.$refs.tree.getNode("migrate_".concat(t._id)),o=e.$refs.migrate.$refs.tree2.getNode("migrate_search_".concat(t._id)),r&&o?e.migrateInputValue?o.expanded||l.push(o.data.globalId):r.expanded||l.push(r.data.globalId):(r=r||o,r.expanded||l.push(r.data.globalId)),e.migrateSelectDepNum+=1)}))}},switchDepParentDisableStatus:function(){var e=this,t=_.cloneDeep(this.migrationRecord[this.migrationRecord.length-1].m),a=_.cloneDeep(this.migrationRecord[this.migrationRecord.length-1].t),i=function(t){var a=[],i=null;_.forEach(t,(function(e){var t;(t=a).push.apply(t,s()(e.globalId.split(".")))})),a=Array.from(new Set(a)),_.forEach(a,(function(t){_.forEach(["tree","tree2"],(function(a){i=e.$refs.migrate.$refs[a].getNode("".concat("tree"===a?"migrate_":"migrate_search_").concat(t)),i&&!i.disabled&&(e.$set(i.data,"disabled",!0),i.checked&&(i.checked=!1))}))}))};i(t),i(a,!0)},switchDepChildrenDisableStatus:function(){var e=this;if(this.migrateInputValue){var t=_.cloneDeep(this.migrationRecord[this.migrationRecord.length-1].m),a=function t(a){_.forEach(a,(function(a){a&&null!==a&&void 0!==a&&a.data&&e.$set(a.data,"disabled",!0),a&&a.childNodes.length>0&&t(a.childNodes)}))};t=_.map(t,(function(t){return e.$refs.migrate.$refs.tree2.getNode(t.treeid)})),a(t)}},insertNodeAfterMigrateHandler:function(){var e,t=this,a=_.cloneDeep(this.migrationRecord),i=(null===(e=a[a.length-1])||void 0===e||null===(e=e.t)||void 0===e?void 0:e[0])||{},n=a[a.length-1].m;if(!dsf.isEmptyObject(i)&&dsf.isArray(n)){var r=function(e,a,i,n){var r=e.getNode(a);r&&(r.expanded||t.migrateInputValue&&"tree2"===n)&&e.append(p(p({},i),{},{disabled:!0}),r)};_.forEach(n,(function(e){_.forEach(["tree","tree2"],(function(a,n){r(t.$refs.migrate.$refs[a],"migrate_".concat(0===n?"":"search_").concat(i._id),e,a)}))}))}},confrimHandler:function(){var e=this,t=dsf.layer.loading(),a=[];_.forEach(this.migrationRecord,(function(e){var t=[_.map(e.m,(function(e){return e._id})).join(","),_.map(e.t,(function(e){return e._id})).join("")];a.push(t.join("_"))})),this.$http.post("/user/unit/moveDept",{data:a.join(";")}).done((function(a){if(dsf.layer.message((null===a||void 0===a?void 0:a.message)||"",a.success),a.success)var i=setTimeout((function(){var n,r,s;dsf.layer.closeLoading(t),e.$dispatch("save",a.data);var o=null===e||void 0===e||null===(n=e.$vm)||void 0===n||null===(n=n.$openerVm)||void 0===n||null===(n=n.$el)||void 0===n||null===(n=n.querySelectorAll(".ds-navtree"))||void 0===n||null===(n=n[0])||void 0===n?void 0:n.__vue__;o&&o.reloadData||(o=(null===(r=document.querySelectorAll(".ds-navtree"))||void 0===r||null===(r=r[0])||void 0===r?void 0:r.__vue__)||null),o&&o.reloadData(),null===e||void 0===e||null===(s=e.$dialog)||void 0===s||s.close(),clearTimeout(i)}),800);else dsf.layer.closeLoading(t)})).error((function(e){dsf.error(e),dsf.layer.message((null===e||void 0===e?void 0:e.message)||"请求异常",!1),dsf.layer.closeLoading(t)}))}}}),v=m,g=(a(734),a(0)),y=Object(g["a"])(v,i,n,!1,null,null,null);t["default"]=y.exports},1270:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orgBox"},[a("el-input",{ref:"searchKey",staticClass:"searchKey",attrs:{placeholder:"搜索","prefix-icon":"el-icon-search"},model:{value:e.searchKeyWord,callback:function(t){e.searchKeyWord=t},expression:"searchKeyWord"}}),a("orgBox2",e._b({directives:[{name:"show",rawName:"v-show",value:!e.showSearchList,expression:"!showSearchList"}],ref:"orgBox"},"orgBox2",e.orgBox2Props,!1)),e.showSearchList?a("orgBox2",e._b({attrs:{"is-search":!0}},"orgBox2",e.orgBox2Props,!1)):e._e()],1)},n=[],r={name:"orgBox",props:{isRole:{type:Boolean,default:!1}},data:function(){return{searchKeyWord:null,showSearchList:!1}},components:{orgBox2:function(){return a.e(55).then(a.bind(null,1277))}},provide:function(){return{$orgBoxSearch:this}},computed:{orgBox2Props:function(){return{isRole:this.isRole,searchKeyword:this.searchKeyWord,style:{height:"calc(100% - 80px)"}}}},watch:{searchKeyWord:function(e,t){e!==t&&(this.showSearchList=!1,this.changeShowSearchList())}},created:function(){var e=this;this.changeShowSearchList=_.debounce((function(){e.showSearchList=e.searchKeyWord&&""!=e.searchKeyWord}),300)}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1271:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roleTreeBox"},[a("el-input",{attrs:{placeholder:"搜索","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("div",{staticClass:"roleTreeC"},[a("dsf-virtual-scroll",{staticClass:"roleTree",attrs:{"scroll-x":""}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{"show-checkbox":"","default-expand-all":"","check-on-click-node":"","check-strictly":!1,"expand-on-click-node":!1,data:e.treeData,"node-key":e.nodeKey,props:e.defaultProps,"empty-text":e.loading?"":"暂无数据","filter-node-method":e.filterNode},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;return e._t("default",(function(){return[a("span",[a("i",{staticClass:"myIcon iconfont icon-zhuhutiaocha"}),e._v(" "+e._s(i.label)+" ")])]}))}}],null,!0)})],1)],1)],1)},n=[],r={name:"roleTree",data:function(){return{defaultProps:{children:"children",label:"_name",disabled:function(e){return"role"!=e["type_value"]}},nodeKey:"_id",treeData:[],loading:!0,filterText:""}},created:function(){this.loadData()},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{loadData:function(){var e=this;this.$http.get("dp/oua/findRoleTree",{keyWord:""}).done((function(t){var a=t.data,i=t.success,n=t.msg;i?e.treeData=a:dsf.layer.message(n,!1)})).error((function(){dsf.layer.message("获取角色请求异常",!1)})).always((function(){e.loading=!1}))},getResult:function(){return this.$refs.tree.getCheckedNodes()},clearResult:function(e){var t=this;_.forEach(e,(function(e){t.$refs.tree.setChecked(e,!1,!1)}))},filterNode:function(e,t){return!e||-1!==t._name.indexOf(e)}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1272:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right"},[a("div",{ref:"top",staticClass:"top"},[a("span",[e._v("已选择("+e._s(e.list.length)+"/1000)")]),a("span",{on:{click:e.deleteAll}},[a("i",{staticClass:"el-icon-delete"}),e._v("清空")])]),a("div",{staticClass:"list",style:{height:e.listHeight}},[a("dsf-virtual-scroll",{attrs:{"scroll-x":""}},e._l(e.list,(function(e,t){return a("result-li",{key:e.id,attrs:{li:e,index:t}})})),1)],1)])},n=[],r={name:"resultList",props:{list:{type:Array,default:function(){return[]}}},components:{resultLi:function(){return a.e(55).then(a.bind(null,1278))}},inject:{$seletPermissions:{default:null}},data:function(){return{listHeight:0}},mounted:function(){this.getListHeight(),this.$seletPermissions.resize(),window.onresize=this.resize},methods:{resize:function(){this.getListHeight()},getListHeight:function(){var e,t;null!==this&&void 0!==this&&null!==(e=this.$refs)&&void 0!==e&&e.top&&(this.listHeight="calc(100% - ".concat(null===this||void 0===this||null===(t=this.$refs)||void 0===t||null===(t=t.top)||void 0===t?void 0:t.clientHeight,"px)"))},deleteAll:function(){_.forEachRight(this.list,(function(e,t){e.config_includeChild=!1,e.config_checked=!1})),this.$seletPermissions.resultLists=[],this.$seletPermissions.defaultSelectValue=[]}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1273:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-department-migration-tree-wrap-header"},[a("p",{staticClass:"label"},[e._v(e._s(e.label))]),a("div",{staticClass:"tree-wrap-header-right"},[e._t("one"),e._t("two"),e._t("three")],2)])},n=[],r={props:{label:{type:String,default:""}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1274:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-department-migration-tree-wrap-input"},[a("el-input",{attrs:{placeholder:"请输入部门名","prefix-icon":"el-icon-search"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)},n=[],r={props:{value:{type:String,default:""}},computed:{input:{get:function(){return this.value},set:function(e){this.$emit("update:value",e)}}},data:function(){return{}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1277:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orgBox2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.navs.length,expression:"navs.length"}],ref:"nav",staticClass:"nav"},e._l(e.navs,(function(t,i){return a("span",{key:t.value,class:{isSearch:t.isSearch&&!i},on:{click:function(a){return e.changeNav(t,i)}}},[t.isSearch&&!i?a("i",{staticClass:"el-icon-search"}):e._e(),i?a("i",{staticClass:"el-icon-arrow-right"}):e._e(),e._v(e._s(t.text)+" ")])})),0),a("div",{ref:"listBox",staticClass:"listBox",style:{height:e.listHeight}},[e.showList?a("orgList",{ref:"orgList",attrs:{"is-role":e.isRole,"is-search":e.isSearch,"search-keyword":e.realSearchKeyword,pid:e.pid}}):e._e()],1)])},n=[],r={name:"orgBox2",components:{orgList:function(){return a.e(55).then(a.bind(null,1279))}},props:{searchKeyword:{type:String,default:null},isRole:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1}},data:function(){return{bigObjs:{},navs:[],listHeight:0,showList:!0,pid:null,realSearchKeyword:this.searchKeyword}},inject:{$seletPermissions:{default:null}},provide:function(){return{$orgBox:this}},created:function(){var e,t,a=this.$seletPermissions.ruleDeptId||(null===(e=this.$seletPermissions.queryString)||void 0===e?void 0:e.ruleDeptId);a&&(this.pid=a,this.navs.push({text:this.$seletPermissions.ruleDeptName||(null===(t=this.$seletPermissions.queryString)||void 0===t?void 0:t.ruleDeptName)||"根目录",value:this.pid}))},mounted:function(){this.getListHeight()},methods:{resize:function(){this.getListHeight()},getListHeight:function(){var e;this.$refs.listBox&&(this.navs.length?this.listHeight="calc(100% - ".concat((null===this||void 0===this||null===(e=this.$refs)||void 0===e||null===(e=e.nav)||void 0===e?void 0:e.clientHeight)||0,"px)"):this.listHeight="100%")},toChild:function(e){var t,a=this;this.pid=null===(t=e)||void 0===t?void 0:t.id,this.isSearch&&!this.navs.length&&(this.realSearchKeyword?(this.navs.push({text:this.realSearchKeyword,value:null,isSearch:!0}),this.realSearchKeyword=null):(this.pid=null,this.realSearchKeyword=e.name,e=null)),this.showList=!1,this.$nextTick((function(){e&&a.navs.push({text:e.name,value:e.id}),a.showList=!0,a.$nextTick((function(){a.getListHeight()}))}))},changeNav:function(e,t){e?(this.navs.splice(t),this.toChild({name:e.text,id:e.value})):(this.navs=[],this.toChild())}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1278:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"li"},[a("i",{staticClass:"myIcon iconfont",class:e.icon}),e._v(" "+e._s(e.name)+" "),a("i",{staticClass:"delete iconfont icon-close",attrs:{title:"删除"},on:{click:function(t){return e.deleteNode(e.li)}}})])},n=[],r={name:"resultLi",props:{li:{type:Object,default:function(){return{}}},index:{type:Number}},inject:{$seletPermissions:{default:null}},computed:{icon:function(){return this.li.isRole?"icon-zhuhutiaocha":"dept"===this.li.valueType?"icon-icon_user_bm":"icon-icon-user"},name:function(){var e=this.li;if(e.isDefaultSelect)return e.name;if(e.isRole){var t=e.org.config_includeChild?"（包含下级）":"";return e.org.name+t+"-"+e.role._name}return e.name+(e.config_includeChild?"（包含下级）":"")}},methods:{deleteNode:function(e){if(e.config_includeChild=!1,e.config_checked=!1,this.$seletPermissions.resultLists[this.index].id==e.id){var t=_.map(this.$seletPermissions.defaultSelectValue,(function(e){return e.id})).indexOf(e.id);t>-1&&this.$seletPermissions.defaultSelectValue.splice(t,1),this.$seletPermissions.resultLists.splice(this.index,1)}}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1279:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[!e.isSearch&&e.list&&e.list.length?a("el-checkbox",{ref:"checkAll",staticClass:"checkAll",attrs:{indeterminate:e.isIndeterminate},on:{change:e.changeCheckAll},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}},[e._v(" 全选 ")]):e._e(),a("div",{style:{height:e.divHeight}},[a("dsf-virtual-scroll",{ref:"scrollBar",staticClass:"scrollBar",attrs:{"scroll-x":""},on:{scroll:e.loadMore}},[a("ul",{ref:"list",staticClass:"list"},e._l(e.list,(function(t){return a("orgNode",{key:t.id,attrs:{item:t,"is-search":e.isSearch}})})),1),e.loading?a("p",{staticClass:"loading"},[a("i",{staticClass:"el-icon-loading"})]):e._e(),e.noMore?a("p",{staticClass:"noMore"},[e._v("没有更多了")]):e._e()])],1)],1)},n=[],r={name:"orgList",components:{orgNode:function(){return a.e(55).then(a.bind(null,1280))}},provide:function(){return{$orgList:this}},inject:{$orgBox:{default:null},$seletPermissions:{default:null},$orgBoxSearch:{default:null}},props:{pid:{type:String,default:null},isRole:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},searchKeyword:{type:String,default:null}},data:function(){return{list:[],loading:!1,noMore:!1,isCheckedAll:!1,listHeight:0,divHeight:"100%",params:{pid:this.pid,keyWord:this.searchKeyword,pageNumber:0,pageSize:10,isExcUser:this.isRole?2:1},checkNum:0,isIndeterminate:!1}},created:function(){this.loadData()},watch:{"$seletPermissions.tabIndex":function(e,t){this.getDivHeight(),this.$orgBox.getListHeight(),!this.noMore&&this.$el.clientHeight>this.$refs.list.clientHeight&&this.loadData()}},methods:{getDivHeight:function(){var e;this.divHeight="calc(100% - ".concat((null===(e=this.$refs)||void 0===e||null===(e=e.checkAll)||void 0===e||null===(e=e.$el)||void 0===e?void 0:e.clientHeight)||0,"px)")},loadMore:function(e){var t=e.target;t.scrollHeight-t.clientHeight-t.scrollTop<20&&!this.loading&&!this.noMore&&this.loadData()},loadData:function(){var e=this;if(this.$orgBox.bigObjs[this.params.pid]&&!this.params.pageNumber){var t=this.$orgBox.bigObjs[this.params.pid],a=t.list,i=t.pageNumber,n=t.noMore;this.isRole||_.forEach(a,(function(t){var a=!1,i=!1,n=_.map(e.$seletPermissions.resultLists,(function(e){return e.id})),r=n.indexOf(t.id);if(r>-1&&!e.isRole){var s=e.$seletPermissions.resultLists[r];a=!0,i=s.config_includeChild}t.config_checked=a,t.config_includeChild=i})),this.list=a,this.params.pageNumber=i,this.noMore=n,this.$nextTick((function(){e.loading=!1,e.getDivHeight()}))}else{this.params.pageNumber++,this.loading=!0;var r=dsf.url.parse(this.$replace(this.$seletPermissions.orgHttpUrl)),s={};_.forEach(_.keys(r.searchQuery),(function(t){var a=r.searchQuery[t];e.params[t]&&(a=e.params[t]),s[t]=a})),s=dsf.mix({},this.params,s),this.$http.get(r.pathname,s).done((function(t){var a=t.data,i=t.success,n=t.msg;i?(_.forEach(a.list,(function(t){var a=!1,i=!1,n=_.map(e.$seletPermissions.resultLists,(function(e){return e.id})),r=n.indexOf(t.id);if(r>-1&&!e.isRole){var s=e.$seletPermissions.resultLists[r];a=!0,i=s.config_includeChild}e.list.push(dsf.mix({config_checked:a,config_includeChild:i},t)),r>-1&&!e.isRole&&e.$seletPermissions.resultLists.splice(r,1,_.last(e.list))})),e.noMore=a.lastPage):(e.noMore=!0,dsf.layer.message(n,!1))})).error((function(){e.noMore=!0,dsf.layer.message("请求异常",!1)})).always((function(){var t,a,i;(e.$nextTick((function(){var t,a;e.getDivHeight(),e.loading=!1,!e.noMore&&(null===e||void 0===e||null===(t=e.$el)||void 0===t?void 0:t.clientHeight)>(null===e||void 0===e||null===(a=e.$refs)||void 0===a||null===(a=a.list)||void 0===a?void 0:a.clientHeight)&&e.loadData()})),e.$orgBox.bigObjs[e.params.pid]={list:e.list,pageNumber:e.params.pageNumber,noMore:e.noMore},e.isSearch)||!e.params.pid&&null!==(t=e.list)&&void 0!==t&&t[0]&&(null===e||void 0===e||null===(a=e.$orgBox)||void 0===a||a.toChild(null===(i=e.list)||void 0===i?void 0:i[0]))}))}},changeCheckState:function(e){var t;if(e.config_checked?++this.checkNum:--this.checkNum,this.checkNum<0&&(this.checkNum=0),this.list.length==this.checkNum?(this.isCheckedAll=!0,this.isIndeterminate=!1):0==this.checkNum?(this.isCheckedAll=!1,this.isIndeterminate=!1):(this.isCheckedAll=!1,this.isIndeterminate=!0),this.isRole?this.$seletPermissions.changeRoleOrg(e):this.$seletPermissions.changeResult(e),this.isSearch&&null!==this&&void 0!==this&&null!==(t=this.$orgBoxSearch)&&void 0!==t&&null!==(t=t.$refs)&&void 0!==t&&t.orgBox){var a,i=null===this||void 0===this||null===(a=this.$orgBoxSearch)||void 0===a||null===(a=a.$refs)||void 0===a?void 0:a.orgBox.$refs.orgList.list;_.forEach(i,(function(t){t.id===e.id&&(t.config_checked=e.config_checked)}))}},changeCheckAll:function(){var e=this;_.forEach(this.list,(function(t){t.config_checked=e.isCheckedAll}))}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},1280:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{attrs:{"item-id":e.item.id},on:{click:function(t){return t.stopPropagation(),e.changeState.apply(null,arguments)}}},[a("el-checkbox",{attrs:{disabled:""},model:{value:e.item.config_checked,callback:function(t){e.$set(e.item,"config_checked",t)},expression:"item.config_checked"}}),a("i",{staticClass:"myIcon",class:e.icon}),a("div",[e._v(" "+e._s(e.name)+" "),e.isSearch&&e.item.deptName?a("div",{staticClass:"deptName"},[e._v(e._s(e.item.deptName))]):e._e()]),"dept"===e.item.valueType?a("div",{staticClass:"fun",on:{click:function(e){e.stopPropagation()}}},[a("el-switch",{attrs:{title:e.item.config_includeChild?"包含":"不包含"},model:{value:e.item.config_includeChild,callback:function(t){e.$set(e.item,"config_includeChild",t)},expression:"item.config_includeChild"}}),a("span",{staticClass:"includeChild",class:e.item.config_includeChild?"active":"",attrs:{title:"下级"},on:{click:function(t){return e.toChild(e.item)}}},[e._v(" 包含下级 ")]),a("i",{staticClass:"el-icon-arrow-right",attrs:{title:"下级"},on:{click:function(t){return e.toChild(e.item)}}})],1):e._e()],1)},n=[],r={name:"orgNode",props:{item:{type:Object,default:function(){return{}}},isSearch:{type:Boolean,default:!1}},inject:{$orgBox:{default:null},$orgList:{default:null}},created:function(){this.$orgList.isCheckedAll&&(this.item.config_checked=!0)},watch:{"item.config_checked":{immediate:!0,handler:function(e,t){dsf.isUnDef(t)&&!e||this.$orgList.changeCheckState(this.item)}}},computed:{icon:function(){return["iconfont "+("dept"===this.item.valueType?"icon-icon_user_bm":"icon-icon-user")]},name:function(){var e=this.item.name;return this.item.quantity&&(e+="("+this.item.quantity+")"),e}},methods:{toChild:function(){this.$orgBox.toChild(this.item)},changeState:function(){this.item.config_checked=!this.item.config_checked}}},s=r,o=a(0),l=Object(o["a"])(s,i,n,!1,null,null,null);t["default"]=l.exports},388:function(e,t,a){"use strict";var i=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#546570","#c4ccd3"];t["a"]={color:[].concat(i,i),title:{show:!0,text:"示例标题",subtext:"",itemGap:10,left:"auto",top:"auto",right:"auto",bottom:"auto",textStyle:{color:"#333",fontSize:18}},legend:{show:!0,left:"auto",top:"auto",right:"center",bottom:"auto",orient:"horizontal",icon:"",data:[]},grid:{left:30,top:60,right:30,bottom:30,containLabel:!0,backgroundColor:"transparent",borderColor:"#ccc",borderWidth:1,show:!1}}},394:function(e,t,a){"use strict";function i(e,t){dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/vuePictureCut/vue-picture-cut.css"),dsf.url.getWebPath("$/js/libs/vuePictureCut/vue-picture-cut.umd.min.js")]).then((function(){window.Vue.use(window["vue-picture-cut"].default),null===e||void 0===e||e(window["vue-picture-cut"])})).catch((function(e){dsf.error(e),dsf.layer.message("加载vuePictureCut脚本出错",!1),null===t||void 0===t||t(e)}))}function n(e,t){dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/vcrontab/vcrontab.umd.min.js")]).then((function(){window.Vue.use(window["vcrontab"].default),null===e||void 0===e||e()})).catch((function(e){dsf.error(e),dsf.layer.message("加载vcrontab脚本出错",!1),null===t||void 0===t||t(e)}))}function r(e,t){dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/quill/quill.core.css"),dsf.url.getWebPath("$/js/libs/quill/quill.snow.css"),dsf.url.getWebPath("$/js/libs/quill/quill.bubble.css"),dsf.url.getWebPath("$/js/libs/quill/quill.js"),dsf.url.getWebPath("$/js/libs/quill/vue-quill-editor.js")]).then((function(){window.Vue.use(window["VueQuillEditor"]),null===e||void 0===e||e()})).catch((function(e){dsf.error(e),dsf.layer.message("加载quill脚本出错",!1),null===t||void 0===t||t(e)}))}a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}))},396:function(e,t,a){"use strict";t["a"]={xAxis:[{type:"category",axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,alignWithLabel:!1},axisLabel:{show:!0,fontSize:12,rotate:0,color:"#333"},splitLine:{show:!0},name:"坐标轴名称",nameLocation:"center",nameTextStyle:{color:"#333",fontSize:12},nameGap:30,boundaryGap:!0,position:"bottom",interval:0,mapRelation:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}]}},397:function(e,t,a){"use strict";t["a"]={yAxis:[{type:"value",axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0},axisLabel:{show:!0,fontSize:12,rotate:0,color:"#333"},splitLine:{show:!0},name:"坐标轴名称",nameLocation:"end",nameTextStyle:{color:"#333",fontSize:12},nameGap:18,position:"left",min:0,max:function(e){return e.max+80}}]}},436:function(e,t,a){"use strict";var i=a(388),n=a(396),r=a(397);t["a"]=dsf.mix(!0,{series:[{type:"line",name:"示例",yAxisIndex:0,xAxisIndex:0,symbol:"emptyCircle",symbolSize:4,showSymbol:!1,label:{show:!1},smooth:!0,areaStyle:{color:"rgba(255,255,255,0)",endColor:"rgba(255,255,255,0)",startColor:"rgba(255,255,255,0)",isshade:!1},itemStyle:{color:i["a"].color[0],endColor:i["a"].color[0],startColor:i["a"].color[0],isshade:!1},lineStyle:{width:2,type:"solid"},data:[820,932,901,934,1290,1330,1320]}],tooltip:{trigger:"axis"}},i["a"],n["a"],r["a"])},437:function(e,t,a){"use strict";var i=a(388),n=a(396),r=a(397);t["a"]=dsf.mix(!0,{series:[{type:"bar",name:"示例",yAxisIndex:0,xAxisIndex:0,label:{show:!1},itemStyle:{color:i["a"].color[0],barBorderRadius:[0,0,0,0],endColor:i["a"].color[0],startColor:i["a"].color[0],isshade:!1},barGap:"30%",barCategoryGap:"10%",barWidth:"",showBackground:!1,data:[820,932,901,934,1290,1330,1320]}],tooltip:{trigger:"axis"},isReturn:!1},i["a"],n["a"],r["a"])},438:function(e,t,a){"use strict";var i=a(388);t["a"]=dsf.mix(!0,{series:[{name:"示例",type:"pie",center:["50%","50%"],radius:["50%","70%"],avoidLabelOverlap:!0,roseType:!1,label:{show:!0,fontSize:12,position:"outside"},labelLine:{show:!0},data:[{value:335,name:"直接访问",itemStyle:{color:i["a"].color[0]}},{value:310,name:"邮件营销",itemStyle:{color:i["a"].color[1]}},{value:234,name:"联盟广告",itemStyle:{color:i["a"].color[2]}},{value:135,name:"视频广告",itemStyle:{color:i["a"].color[3]}},{value:1548,name:"搜索引擎",itemStyle:{color:i["a"].color[4]}}]}],tooltip:{trigger:"item"}},i["a"])},439:function(e,t,a){"use strict";var i=a(388),n=a(396),r=a(397);t["a"]=dsf.mix(!0,{series:[{type:"bar",name:"示例_bar",yAxisIndex:0,xAxisIndex:0,label:{show:!1},itemStyle:{color:i["a"].color[0],barBorderRadius:[0,0,0,0],endColor:i["a"].color[0],startColor:i["a"].color[0],isshade:!1},barGap:"30%",barCategoryGap:"10%",barWidth:"",showBackground:!1,data:[420,532,501,534,690,830,820]},{type:"line",name:"示例_line",yAxisIndex:0,xAxisIndex:0,symbol:"emptyCircle",symbolSize:4,showSymbol:!1,label:{show:!1},smooth:!0,areaStyle:{color:"rgba(255,255,255,0)",endColor:"rgba(255,255,255,0)",startColor:"rgba(255,255,255,0)",isshade:!1},itemStyle:{color:i["a"].color[1],endColor:i["a"].color[1],startColor:i["a"].color[1],isshade:!1},lineStyle:{width:2,type:"solid"},data:[820,932,901,934,1290,1330,1320]}],tooltip:{trigger:"axis"}},i["a"],n["a"],r["a"])},440:function(e,t,a){"use strict";var i=a(388);t["a"]=dsf.mix(!0,{radar:[{name:{},axisLine:{lineStyle:{color:"#666"}},splitLine:{lineStyle:{color:"#ccc"}},splitArea:{areaStyle:{color:["rgba(114, 172, 209, 0.2)","rgba(114, 172, 209, 0.4)","rgba(114, 172, 209, 0.6)","rgba(114, 172, 209, 0.8)","rgba(114, 172, 209, 1)"]}},indicator:[{name:"销售"},{name:"管理"},{name:"信息技术"},{name:"客服"},{name:"研发"},{name:"市场"}],center:["50%","50%"],radius:"75%",shape:"circle",startAngle:90,splitNumber:5}],series:[{type:"radar",data:[{value:[430,1e3,2800,3500,5e3,4e3],name:"预算分配"},{value:[500,1400,2800,3100,4200,3e3],name:"实际开销"}]}],tooltip:{}},i["a"])},441:function(e,t,a){"use strict";var i=a(388);t["a"]=dsf.mix(!0,{tooltip:{trigger:"item"},visualMap:{show:!1,min:0,max:22,text:["High","Low"],realtime:!1,calculable:!0,inRange:{color:["rgba(84,112,198,0.5)","rgba(145,204,117,0.5)","rgba(250,200,88,0.5)","rgba(238,102,102,0.5)","rgba(115,192,222,0.5)","rgba(59,162,114,0.5)","rgba(252,132,82,0.5)","rgba(154,96,180,0.5)","rgba(234,124,204,0.5)","rgba(84,101,112,0.5)","rgba(196,204,211,0.5)"]}},series:[{name:"区域图",type:"map",map:"coord",label:{show:!0},itemStyle:{emphasis:{opacity:.4}},showLegendSymbol:!1,top:10,left:10,right:10,bottom:10,data:[{name:"成都市",value:1},{name:"自贡市",value:2},{name:"攀枝花市",value:3},{name:"泸州市",value:4},{name:"德阳市",value:5},{name:"绵阳市",value:6},{name:"广元市",value:7},{name:"遂宁市",value:8},{name:"内江市",value:9},{name:"乐山市",value:10},{name:"南充市",value:11},{name:"眉山市",value:12},{name:"宜宾市",value:13},{name:"广安市",value:14},{name:"达州市",value:15},{name:"雅安市",value:16},{name:"巴中市",value:17},{name:"资阳市",value:18},{name:"阿坝藏族羌族自治州",value:19},{name:"甘孜藏族自治州",value:20},{name:"凉山彝族自治州",value:21}]}],grid:{left:0,right:0,bottom:0,containLabel:!1,backgroundColor:"transparent"},color:[]},i["a"],{title:{show:!1},legend:{show:!1}})},442:function(e,t,a){"use strict";var i=a(388);t["a"]=dsf.mix(!0,{xAxis:[{type:"value",scale:!0,axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0,alignWithLabel:!1},axisLabel:{show:!0,fontSize:12,rotate:0,color:"#333"},splitLine:{show:!0},name:"坐标轴名称",nameLocation:"center",nameTextStyle:{color:"#333",fontSize:12},nameGap:30,boundaryGap:!0,position:"bottom"}],yAxis:[{type:"value",scale:!0,axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!0},axisLabel:{show:!0,fontSize:12,rotate:0,color:"#333"},splitLine:{show:!0},name:"坐标轴名称",nameLocation:"end",nameTextStyle:{color:"#333",fontSize:12},nameGap:18,position:"left"}],series:[{type:"scatter",name:"示例",yAxisIndex:0,xAxisIndex:0,symbol:"circle",symbolSize:20,label:{show:!1},itemStyle:{color:i["a"].color[0],endColor:i["a"].color[0],startColor:i["a"].color[0],isshade:!1},data:[{name:"测试1",value:[10,8.04]},{name:"测试2",value:[8,6.95]},{name:"测试3",value:[13,7.58]},{name:"测试4",value:[9,8.81]},{name:"测试5",value:[11,8.33]}]}],tooltip:{trigger:"item"}},i["a"])},532:function(e,t,a){var i=a(700);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("52958fd2",i,!0,{sourceMap:!1,shadowMode:!1})},534:function(e,t,a){var i=a(704);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("66c20ecc",i,!0,{sourceMap:!1,shadowMode:!1})},535:function(e,t,a){var i=a(706);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("0dc42e18",i,!0,{sourceMap:!1,shadowMode:!1})},536:function(e,t,a){var i=a(708);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("62433a68",i,!0,{sourceMap:!1,shadowMode:!1})},541:function(e,t,a){var i=a(718);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("5736e48c",i,!0,{sourceMap:!1,shadowMode:!1})},542:function(e,t,a){var i=a(720);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("f28a4b92",i,!0,{sourceMap:!1,shadowMode:!1})},545:function(e,t,a){var i=a(726);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("46c680dc",i,!0,{sourceMap:!1,shadowMode:!1})},546:function(e,t,a){var i=a(728);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("1981b4fa",i,!0,{sourceMap:!1,shadowMode:!1})},548:function(e,t,a){var i=a(735);"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a(19).default;n("0bb42936",i,!0,{sourceMap:!1,shadowMode:!1})},699:function(e,t,a){"use strict";a(532)},700:function(e,t,a){"use strict";a.r(t)},703:function(e,t,a){"use strict";a(534)},704:function(e,t,a){"use strict";a.r(t)},705:function(e,t,a){"use strict";a(535)},706:function(e,t,a){"use strict";a.r(t)},707:function(e,t,a){"use strict";a(536)},708:function(e,t,a){"use strict";a.r(t)},717:function(e,t,a){"use strict";a(541)},718:function(e,t,a){"use strict";a.r(t)},719:function(e,t,a){"use strict";a(542)},720:function(e,t,a){"use strict";a.r(t)},725:function(e,t,a){"use strict";a(545)},726:function(e,t,a){"use strict";a.r(t)},727:function(e,t,a){"use strict";a(546)},728:function(e,t,a){"use strict";a.r(t)},734:function(e,t,a){"use strict";a(548)},735:function(e,t,a){"use strict";a.r(t)},979:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"depmovetree",staticClass:"dep-tree"},[e.isDesign?a("el-tree",{attrs:{data:e.designData,"show-checkbox":"","node-key":"id","default-expanded-keys":[1],props:e.treeProps}}):a("DsfVirtualScroll",{attrs:{"scroll-y":"","scroll-x":""}},[a("el-tree",e._g({directives:[{name:"show",rawName:"v-show",value:!e.searchValue,expression:"!searchValue"}],key:e.treeKey,ref:"tree",attrs:{"node-key":"treeid","show-checkbox":!0,props:e.treeProps,lazy:!0,load:e.lazyLoad,"check-on-click-node":!0,"expand-on-click-node":!1,"check-strictly":!0,draggable:"","allow-drop":e.allowDrop,"default-expanded-keys":e.defaultExpandedKeys},on:{check:e.check},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;return a("span",{staticClass:"custom-tree-node"},[e._l(e.icons.filter((function(t){return""!=e.getIconClass(t,i)[0]})),(function(t,n){return a("i",{key:"dep_migration_tree_icon"+n,staticClass:"iconfont",class:e.getIconClass(t,i),style:{color:t.color}})})),a("span",{staticClass:"node-label"},[e._v(e._s(i.label))]),"migrate"===e.name?a("span",[a("DsfIcon",{attrs:{name:"yidong"}})],1):e._e()],2)}}])},e.treeEvents)),a("el-tree",e._g({directives:[{name:"show",rawName:"v-show",value:e.searchValue,expression:"searchValue"}],ref:"tree2",attrs:{"empty-text":e.searchLoaded?"暂无匹配数据":"数据查询中...","node-key":"treeid",data:e.searchTreeData,"show-checkbox":!0,"default-expanded-keys":e.defaultExpandedKeys,"default-checked-keys":e.defaultCheckedKeys,props:e.treeProps,"check-on-click-node":!0,"expand-on-click-node":!1,"check-strictly":!0,draggable:"","allow-drop":e.allowDrop},on:{check:e.check,"node-expand":e.nodeExpand,"node-collapse":e.nodeCollapse},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node;return a("span",{staticClass:"custom-tree-node"},[e._l(e.icons.filter((function(t){return""!=e.getIconClass(t,i)[0]})),(function(t,n){return a("i",{key:"dep_migration_search_tree_icon"+n,staticClass:"iconfont",class:e.getIconClass(t,i),style:{color:t.color}})})),a("span",{staticClass:"node-label"},[e._v(e._s(i.label))]),"migrate"===e.name?a("span",[a("DsfIcon",{attrs:{name:"yidong"}})],1):e._e()],2)}}])},e.tree2Events))],1)],1)},n=[],r=a(3),s=a.n(r),o=a(2),l=a.n(o),c=a(4),d=a.n(c),u=a(1),h=a.n(u);function f(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=p(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw r}}}}function p(e,t){if(e){if("string"===typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={methods:{check:function(e){var t=this;return d()(h.a.mark((function a(){var i;return h.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={migrate:function(){t.childNodeCheckStatusSwitch(e.treeid),t.parentNodeCheckStatusSwitch(e.treeid)},target:function(){var a,i=!0,n=(null===(a=t.selectionData)||void 0===a?void 0:a[0])||{};(null===n||void 0===n?void 0:n._id)===e._id&&(i=!1),t.$refs[t.treeRef].setCheckedKeys(i?[e.treeid]:[])}},i[t.name](),t.syncSelectedData(e);case 3:case"end":return a.stop()}}),a)})))()},childNodeCheckStatusSwitch:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.treeRef,i=this.$refs[a].getNode(e);i&&i.childNodes.length>0&&_.forEach(i.childNodes,(function(e){var n=t.$refs[a].getNode(e.data.treeid);n&&(n.checked=i.checked,dsf.isArray(n.childNodes)&&n.childNodes.length>0&&t.childNodeCheckStatusSwitch(n.data.treeid,a))}))},parentNodeCheckStatusSwitch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.treeRef,a=this.$refs[t].getNode(e);!a.checked&&a.parent&&a.parent.checked&&(a.parent.checked=!1,this.parentNodeCheckStatusSwitch(a.parent.data.treeid,t))},syncSelectedData:function(e){var t=this;if(this.searchValue){var a=this.$refs.tree2.getNode("".concat(this.name,"_search_").concat(e._id)),i=this.$refs.tree.getNode("".concat(this.name,"_").concat(e._id)),n={migrate:function(e,a){t.$refs.tree.setChecked(a.data,e.checked),t.childNodeCheckStatusSwitch(a.data.treeid,"tree"),t.parentNodeCheckStatusSwitch(a.data.treeid,"tree")},target:function(e,a){var i;t.$refs.tree.setCheckedKeys(e.checked?[null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.treeid]:[])}};a&&i&&n[this.name](a,i)}else this.$refs.tree2.setCheckedKeys([]);this.$nextTick((function(){t.updateSelectionData()}))},updateSelectionData:function(){var e=this,t={migrate:function(){var t=new Map,a=[];_.forEach(["tree","tree2"],(function(a){var i=e.$refs[a].getCheckedNodes();i=e.filterNodes(i),_.forEach(i,(function(e){t.has(e._id)||t.set(e._id,g(g({},e),{},{treeref:a}))}))}));var i,n=f(t.values());try{for(n.s();!(i=n.n()).done;){var r=i.value;a.push(r)}}catch(s){n.e(s)}finally{n.f()}e.$emit("update:selectionData",a)},target:function(){e.$emit("update:selectionData",e.$refs[e.treeRef].getCheckedNodes())}};this.$nextTick((function(){t[e.name](),e.$index.updateSelectDepNum()}))},filterNodes:function(e){var t=[],a=[];return _.forEach(e,(function(e,i){0===i?t.push(e):(_.map(t,"_id"),a=_.map(t,"globalId"),_.some(a,(function(t){return e.globalId.indexOf(t)>-1}))||t.push(e))})),t}}};function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $={methods:{allowDrop:function(e,t,a){var i,n,r,s,o,l,c,d,u,h,f,p,m,v,g;return"inner"==a&&(!e.disabled&&!0!==(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.disabled)&&((!["-1","-2"].includes(String(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.level_value))||!["1","2","3"].includes(String(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.level_value)))&&((!["-1","-2"].includes(String(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.level_value))||!["1","2","3"].includes(String(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.level_value)))&&(("0"!==String(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.level_value)||!["1","2","3"].includes(String(null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.level_value)))&&((null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d._id)!==(null===t||void 0===t||null===(u=t.data)||void 0===u?void 0:u._id)&&(!((null===t||void 0===t||null===(h=t.data)||void 0===h||null===(h=h.treeinfo_globalid)||void 0===h?void 0:h.indexOf(null===e||void 0===e||null===(f=e.data)||void 0===f?void 0:f._id))>-1)&&((null===e||void 0===e||null===(p=e.data)||void 0===p?void 0:p.treeinfo_pid)!==(null===t||void 0===t||null===(m=t.data)||void 0===m?void 0:m._id)&&((null===e||void 0===e||null===(v=e.data)||void 0===v?void 0:v.treeinfo_pid)!==(null===t||void 0===t||null===(g=t.data)||void 0===g?void 0:g.treeinfo_pid)||"inner"==a)&&((1!==t.level||"inner"==a)&&(e.data.treeName!==this.name&&"migrate"!==this.name)))))))))},nodeDragStart:function(e,t){"migrate"===this.name&&this.$index.$refs.target.$refs[this.$index.$refs.target.treeRef].$emit("tree-node-drag-start",t,{node:e})},nodeDragEnd:function(e,t,a,i){var n=this;if("target"===this.name)if("none"!=a){var r=this.$index.$refs.target.$refs.depmovetree,s=r.getBoundingClientRect(),o={xstart:s.left,xend:_.add(s.left,r.clientWidth),ystart:s.top,yend:_.add(s.top,r.clientHeight)};i.pageX>o.xstart&&i.pageX<o.xend&&i.pageY>o.ystart&&i.pageY<o.yend&&t?"inner"===a&&(t.expanded||t.expand(),this.$nextTick((function(){var i=setInterval((function(){if(t.expanded){if(t.childNodes&&t.childNodes.length>0){var r=_.filter(t.childNodes,(function(e){return"target"===e.data.treeName})),s=_.map(r,(function(e){return e.data.name}));_.includes(s,e.data.name)?(n.restoreDeletedNode(e,!0),dsf.layer.pc.message("【".concat(t.data.name,"】中存在与【").concat(e.data.name,"】重名部门，迁移无效！"),"warning")):n.nodeDragEndHandler(e,t,a,t.childNodes.length===r.length)}else n.nodeDragEndHandler(e,t,a,!0);clearInterval(i)}}),300)}))):this.restoreDeletedNode(e)}else{var l=this.$index.$refs.migrate;l.$refs[l.treeRef].remove("migrate_emptynode")}else{var c={label:"空节点",treeid:"migrate_emptynode",children:[]};this.$refs[this.treeRef].insertBefore(c,e),this.$index.$refs.target.$refs[this.$index.$refs.target.treeRef].$emit("tree-node-drag-end",i)}},restoreDeletedNode:function(e,t){var a=this;this.$nextTick((function(){var i=a.$index.$refs.migrate.$refs[a.$index.$refs.migrate.treeRef],n=i.getNode(e.data),r=i.getNode("migrate_emptynode");if(!n&&r&&i.insertBefore(e.data,r),e.checked&&a.$nextTick((function(){var t=i.getNode(e.data.treeid);t&&(t.checked=!0)})),t){var s=a.$refs[a.treeRef].getNode(e.data.treeid);s&&a.$refs[a.treeRef].remove(s)}a.$refs[a.treeRef].remove(r)}))},nodeDragEndHandler:function(e,t,a){var i=this,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.$index.$refs.target,s=this.$index.$refs.migrate;_.forEach(["tree","tree2"],(function(t){var a=r.$refs[t].getNode("target_".concat("tree2"===t?"search_":"").concat(e.data._id)),n=s.$refs[t].getNode("migrate_".concat("tree2"===t?"search_":"").concat(e.data._id));a&&i.$refs[t].remove(a),n&&i.$refs[t].remove(n)})),n&&this.$nextTick((function(){r.$refs.tree.append(e.data,t)}));var o=_.cloneDeep(this.$index.migrationRecord),l=[];if("inner"===a)l=[_.cloneDeep(t.data)];else{var c=this.$refs[this.treeRef].getNode("target_".concat(t.data.treeinfo_pid));c&&(l=[_.cloneDeep(c.data)])}o.push({m:[_.cloneDeep(e.data)],t:l,position:a}),this.$index.updateMigrationRecord(o),this.$index.switchDepParentDisableStatus(),this.$index.updateSelectDepNum(),this.$index.insertNodeAfterMigrateHandler(),this.$nextTick((function(){i.$index.switchDepChildrenDisableStatus();var a=i.$refs[i.treeRef].getNode(e.data.treeid);if(a&&a.data&&(a.data.treeName="target",a.data.treeid="target_".concat(a.data._id),i.$set(a.data,"disabled",!0)),"target"===i.name&&i.searchValue){var n=i.$refs.tree.getNode("target_".concat(t.data._id));n&&n.expanded&&i.$refs.tree.append(b(b({},e.data),{},{treeName:"target",treeid:"target_".concat(e.data._id)}),n)}})),s.$refs[s.treeRef].remove("migrate_emptynode")}}};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C={inject:["$index"],mixins:[y,$],props:{name:{type:String,default:""},selectionData:{type:[],default:function(){return[]}},searchValue:{type:String,default:""},isDesign:{type:Boolean,default:!1},rootNodeProhibitSelection:{type:Boolean,default:!1}},computed:{treeEvents:function(){return"target"===this.name?{"node-drag-end":this.nodeDragEnd,"node-expand":this.nodeExpand,"node-collapse":this.nodeCollapse}:{"node-drag-start":this.nodeDragStart,"node-drag-end":this.nodeDragEnd,"node-expand":this.nodeExpand,"node-collapse":this.nodeCollapse}},tree2Events:function(){return"target"===this.name?{"node-drag-end":this.nodeDragEnd}:{"node-drag-start":this.nodeDragStart,"node-drag-end":this.nodeDragEnd}},treeRef:function(){return this.searchValue?"tree2":"tree"},treeIdPrev:function(){return this.searchValue?"".concat(this.name,"_search_"):"".concat(this.name,"_")}},watch:{searchValue:function(e){var t=this;e?(this.searchLoaded=!1,this.searchTreeData=[],this.searchValueDebounce()):this.$nextTick((function(){t.$index.updateSelectDepNum()}))}},data:function(){return{designData:[{id:1,name:"一级 1",children:[{id:4,name:"二级 1-1",children:[{id:9,name:"三级 1-1-1"},{id:10,name:"三级 1-1-2"}]}]}],treeProps:{label:"name",children:"children",isLeaf:"leaf"},defaultExpandedKeys:[],defaultCheckedKeys:[],treeKey:"",searchLoaded:!1,searchValueDebounce:null,searchTreeData:[],icons:[{code:"!@[children]",iconExpand:"icon-shiyongwendang",iconFold:"icon-shiyongwendang",color:"#6594dc"},{code:"!!@[children]",iconExpand:"icon-dakai",iconFold:"icon-wenjianjia",color:"#c78511"}]}},created:function(){this.treeKey="".concat(dsf.uuid(),"_").concat(dsf.date.now().getTime())},mounted:function(){var e=this;this.searchValueDebounce=_.debounce(d()(h.a.mark((function t(){var a,i,n;return h.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("target"!==e.name){t.next=6;break}return t.next=3,e.getTreeData("",!1);case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,e.getTreeData(e.$index.id,!1);case 8:t.t0=t.sent;case 9:a=t.t0,e.defaultExpandedKeys=_.map(a,(function(e){return e.treeid})),e.defaultCheckedKeys=[],e.selectionData.length>0&&(i=_.map(e.selectionData,"_id"),n=function t(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;dsf.isArray(a)&&_.forEach(a,(function(a){(i.includes(a._id)||n)&&e.defaultCheckedKeys.push("".concat(e.treeIdPrev).concat(a._id)),dsf.isArray(a.children)&&t(a.children,i.includes(a._id)||n)}))},"target"===e.name?e.defaultCheckedKeys=_.map(e.selectionData,(function(t){return"".concat(e.treeIdPrev).concat(t._id)})):n(a)),e.searchLoaded=!0,e.searchTreeData=a,e.$nextTick((function(){if(e.$index.updateSelectDepNum(),e.$index.migrationRecord.length>0&&"migrate"===e.name){var t=e.$index.migrationRecord,a=[];_.forEach(t,(function(e){var t,i,n=_.map(e.m,"globalId"),r=e.t[0].globalId;(t=a).push.apply(t,l()(n.join(".").split("."))),(i=a).push.apply(i,l()(r.split(".")))})),a=Array.from(new Set(a)),a.length>0&&_.forEach(a,(function(t){var a=e.$refs.tree2.getNode("".concat(e.treeIdPrev).concat(t));a&&e.$set(a.data,"disabled",!0)}))}}));case 16:case"end":return t.stop()}}),t)}))),500),this.getNavtreeIcons()},methods:{nodeExpand:function(e,t){"migrate"===this.name&&t.checked&&this.$index.updateSelectDepNum()},nodeCollapse:function(e,t){"migrate"===this.name&&t.checked&&this.$index.updateSelectDepNum()},getNavtreeIcons:function(){var e,t=null===(e=this.$index)||void 0===e||null===(e=e.$vm)||void 0===e||null===(e=e.$openerVm)||void 0===e||null===(e=e.$el)||void 0===e||null===(e=e.querySelectorAll(".ds-navtree"))||void 0===e||null===(e=e[0])||void 0===e?void 0:e.__vue__;t&&dsf.isArray(t.icons)&&(this.icons=t.icons)},getIconClass:function(e,t){return dsf.express.eval(e.code,t.data)?t.expanded?[e.iconExpand||""]:[e.iconFold||""]:[""]},reloadTreeData:function(){this.treeKey="".concat(dsf.uuid(),"_").concat(dsf.date.now().getTime())},lazyLoad:function(e,t){var a=this;return d()(h.a.mark((function i(){var n,r,s;return h.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(0!==e.level){i.next=20;break}if(!a.$index.pid||"migrate"!==a.name){i.next=7;break}return i.next=4,a.getChildrenNode(a.$index.pid);case 4:i.t0=i.sent,i.next=10;break;case 7:return i.next=9,a.getTreeData();case 9:i.t0=i.sent;case 10:if(n=i.t0,!a.$index.pid||"migrate"!==a.name||0!==n.length){i.next=15;break}return i.next=14,a.getTreeData();case 14:n=i.sent;case 15:a.$index.pid&&"migrate"===a.name&&(n=_.find(n,(function(e){return e._id===a.$index.id})),dsf.isObject(n)&&!dsf.isEmptyObject(n)&&(n=[n])),a.defaultExpandedKeys=_.map(n,(function(e){return e.treeid})),t(n),i.next=25;break;case 20:return i.next=22,a.getChildrenNode((null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r._id)||"");case 22:s=i.sent,0===s.length&&(e.isLeaf=!0),t(s);case 25:case"end":return i.stop()}}),i)})))()},getTreeData:function(){var e=arguments,t=this;return d()(h.a.mark((function a(){var i,n,r,s,o;return h.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:"",n=!(e.length>1&&void 0!==e[1])||e[1],r={searchValue:"",treeinfo_globalid:"",treeinfo_level:1},s="/user/unit/getASyncUnitDeptTree?query=".concat(encodeURI(JSON.stringify(r)),"&appKey=").concat(t.$index.appKey),o=[],i&&(s="/user/unit/getASyncUnitDeptTree?appKey=".concat(t.$index.appKey)),t.searchValue&&(s+="&keyWord=".concat(t.searchValue)),a.next=7,t.$http.get(s).done(function(){var e=d()(h.a.mark((function e(a){return h.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!dsf.isArray(null===a||void 0===a?void 0:a.data)){e.next=4;break}return e.next=3,t.dataformatter(a.data,null,n);case 3:o=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return a.abrupt("return",o);case 8:case"end":return a.stop()}}),a)})))()},getChildrenNode:function(e){var t=this;return d()(h.a.mark((function a(){var i,n,r;return h.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=[],n="/user/unit/getASyncUnitDeptTree?pid=".concat(e,"&appKey=").concat(t.$index.appKey),a.next=3,t.$http.get(n).done((function(a){(dsf.isArray(null===a||void 0===a?void 0:a.data)||dsf.isEmptyObject(null===a||void 0===a?void 0:a.data))&&(i=t.dataformatter(dsf.isArray(null===a||void 0===a?void 0:a.data)?a.data:[],e))}));case 3:return"migrate"===t.name&&(r=t.$refs.tree.getNode("migrate_".concat(e)),r&&r.checked&&!t.searchValue&&i.length>0&&t.$nextTick((function(){t.$index.updateSelectDepNum()}))),a.abrupt("return",i);case 5:case"end":return a.stop()}}),a)})))()},dataformatter:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[],n=[],r=[],s=[],o=this.$index.migrationRecord,l=""===this.searchValue;if(this.$index.migrationRecord.length>0&&(r=_.map(o,(function(e){return e.t[0].globalId})),n=_.map(o,(function(e){return e.t[0]._id})),s=_.map(o,(function(e){return _.map(e.m,(function(e){return e._id}))})),s=s.reduce((function(e,t){return e.concat(t)}))),_.forEach(e,(function(e){if(!s.includes(e._id)){var a=_.cloneDeep(e);!l&&a.children&&a.children.length>0&&(a.children=t.dataformatter(a.children)),i.push(w(w({},a),{},{treeid:"".concat(t.treeIdPrev).concat(a._id),treeName:t.name,disabled:!!(t.rootNodeProhibitSelection&&!e.treeinfo_pid||_.some(s,(function(e){return a.globalId.indexOf(e)>-1}))||_.some(r,(function(e){return e.indexOf(a.globalId)>-1}))),children:l?null:a.children,checked:!0}))}})),n.includes(a)){var c=o.filter((function(e){return e.t[0]._id===a&&(!e.position||"inner"===e.position)}));_.forEach(c,(function(e){var a=_.cloneDeep(e.m);_.forEach(a,(function(e){i.push(w(w({},e),{},{treeid:"".concat(t.name,"_").concat(e._id),treeName:t.name,disabled:!0,children:l?null:e.children}))}))}))}if("migrate"===this.name){var d,u=this.$refs.tree.getNode("".concat(this.name,"_").concat(null===i||void 0===i||null===(d=i[0])||void 0===d?void 0:d.treeinfo_pid));null!==u&&void 0!==u&&u.checked&&this.$nextTick((function(){var e=setInterval((function(){var a,n,r,s=null===t||void 0===t||null===(a=t.$refs)||void 0===a||null===(a=a.tree)||void 0===a||null===(n=a.getNode)||void 0===n?void 0:n.call(a,null===i||void 0===i||null===(r=i[0])||void 0===r?void 0:r.treeid);s&&_.forEach(i,(function(e){var a=t.$refs.tree.getNode(e.treeid);t.$refs.tree.setChecked(a,!0)})),clearInterval(e)}),200)}))}var h=_.map(this.selectionData,"_id");return _.forEach(i,(function(e){_.includes(h,e._id)&&t.$nextTick((function(){var a=setInterval((function(){var i,n,r=null===t||void 0===t||null===(i=t.$refs)||void 0===i||null===(i=i.tree)||void 0===i||null===(n=i.getNode)||void 0===n?void 0:n.call(i,null===e||void 0===e?void 0:e.treeid);r&&t.$refs.tree.setChecked(r,!0),clearInterval(a)}),200)}))})),i}}},k=C,D=a(0),A=Object(D["a"])(k,i,n,!1,null,null,null);t["default"]=A.exports}}]);
//# sourceMappingURL=../../../smap/platform/dsf-platform.platform_pc_other.js.map