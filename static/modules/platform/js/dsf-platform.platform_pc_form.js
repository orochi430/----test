/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[]).push([[43,5],{1001:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-control ds-form-item ds-audit-state",class:e.getCss},[e.simple&&e.readOnly&&!e.isDesign?[i("DsfTextProxy",e._b({directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]:[e.showLabel?i("DsfFieldLabel",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],style:e.getLabelWidthStyle(),attrs:{mode:e.showDataCaptionMode,"show-icon":e.showDataCaptionIcon,trigger:e.showDataCaptionTrigger,"data-caption":e.dataCapion,"is-design":e.isDesign,owner:e._self}},[e._v(" "+e._s(e.$t(e.label))+" ")]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],staticClass:"ds-form-block",style:e.getFormItemBlockMarginLeft()},[e.readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):e._e(),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))],2),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showOpenBtn,expression:"showOpenBtn"},{name:"drag",rawName:"v-drag"}],staticClass:"ds-audit-state-fixed-btn",on:{click:e.showDrawerOpen}},[e._v("审")]),i("el-drawer",{attrs:{"append-to-body":"",title:"审核信息",visible:e.drawerOpen,direction:"rtl","destroy-on-close":!0,size:"350px","custom-class":"ds-audit-state-drawer"},on:{"update:visible":function(t){e.drawerOpen=t},close:e.drawerClose}},[i("div",{staticClass:"size-hander"}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showOpenBtn,expression:"showOpenBtn"}],staticClass:"ds-audit-state-drawer-list"},[e.mandatoryErrorList.length?[i("div",{staticClass:"ds-audit-state-drawer-title",attrs:{type:"mandatory"}},[i("span",[e._v("强制型")])]),e._l(e.mandatoryErrorList,(function(t,n){return i("div",{key:"mandatory"+n,staticClass:"ds-audit-state-drawer-item"},[i("div",{staticClass:"ds-audit-state-drawer-item-label"},[i("span",[e._v("错误提示：")]),e._v(e._s(t.message))]),e._l(t.fields,(function(t){return i("div",{key:t.id,staticClass:"ds-audit-state-drawer-field",on:{click:function(i){return e.errorClick(t)}}},[i("span",[e._v("字段：")]),e._v(e._s(t.label))])}))],2)}))]:e._e(),e.verifyErrorList.length?[i("div",{staticClass:"ds-audit-state-drawer-title",attrs:{type:"verify"}},[i("span",[e._v("核实型")])]),e._l(e.verifyErrorList,(function(t,n){return i("div",{key:"verify"+n,staticClass:"ds-audit-state-drawer-item"},[i("div",{staticClass:"ds-audit-state-drawer-item-label"},[i("span",[e._v("错误提示：")]),e._v(e._s(t.message))]),e._l(t.fields,(function(t){return i("div",{key:t.id,staticClass:"ds-audit-state-drawer-field",on:{click:function(i){return e.errorClick(t)}}},[i("span",[e._v("字段：")]),e._v(e._s(t.label))])})),i("div",{staticClass:"ds-audit-state-drawer-remark"},[i("span",{staticClass:"ds-audit-state-drawer-remark-label"},[e._v("说明：")]),i("el-input",{staticClass:"ds-audit-state-drawer-remark-input",attrs:{value:e.remarkMap[t.auditId],size:"mini",placeholder:"请输入备注"},on:{input:function(i){return e.remarkInput(i,t)}}})],1)],2)}))]:e._e(),e.ignoreErrorList.length?[i("div",{staticClass:"ds-audit-state-drawer-title",attrs:{type:"ignore"}},[i("span",[e._v("忽略型")])]),e._l(e.ignoreErrorList,(function(t,n){return i("div",{key:"ignore"+n,staticClass:"ds-audit-state-drawer-item"},[i("div",{staticClass:"ds-audit-state-drawer-item-label"},[i("span",[e._v("错误提示：")]),e._v(e._s(t.message))]),e._l(t.fields,(function(t){return i("div",{key:t.id,staticClass:"ds-audit-state-drawer-field",on:{click:function(i){return e.errorClick(t)}}},[i("span",[e._v("字段：")]),e._v(e._s(t.label))])}))],2)}))]:e._e()],2),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.showOpenBtn,expression:"!showOpenBtn"}],staticStyle:{"text-align":"center"}},[e._v("无错误信息")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showSaveBtn,expression:"showSaveBtn"}],staticClass:"ds-audit-state-drawer-btns"},[i("dsf-button",{on:{click:e.save}},[e._v("确认保存")])],1)])]],2)},a=[],s=dsf.component({name:"DsfAuditState",ctrlCaption:"审核状态",mixins:[$mixins.formulaAuditStateMixin],props:{forceHidden:{type:Boolean,default:!0},desCopyedChangeCaption:{type:Boolean,default:!1}},watch:{drawerOpen:{handler:function(e){e?this.initMouse():this.uninitMouse()}}},methods:{initMouse:function(){this.uninitMouse(),this.drawerDom=$(".ds-audit-state-drawer")[0],this.drawerDom.addEventListener("mousedown",this.mousedown),document.addEventListener("mouseup",this.mouseup)},uninitMouse:function(){document.removeEventListener("mousedown",this.mousedown),document.removeEventListener("mouseup",this.mouseup),document.removeEventListener("mousemove",this.mousemove)},mousedown:function(e){this.olDrawerDomW=this.drawerDom.clientWidth,this.mousedownX=e.clientX,this.drawerDom.offsetLeft<=this.mousedownX&&this.mousedownX-this.drawerDom.offsetLeft<10&&this.mousedownX-this.drawerDom.offsetLeft>0&&(this.drawerDom.style.userSelect="none",this.innerWidth=window.innerWidth,this.isMousedown=!0,document.addEventListener("mousemove",this.mousemove))},mouseup:function(e){this.isMousedown=!1,document.removeEventListener("mousemove",this.mousemove),this.drawerDom.style.userSelect="auto"},mousemove:function(e){if(this.isMousedown){var t=this.mousedownX-e.clientX,i=this.olDrawerDomW+t;i<150&&(i=150),this.innerWidth-i<20&&(i=this.innerWidth-20),this.drawerDom.style.width=i+"px"}}},mounted:function(){},destroy:function(){this.uninitMouse()}}),r=s,l=(i(739),i(0)),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1038:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-textbox",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):e._e():i("el-input",{attrs:{placeholder:e.placeholder,rows:e.rows,type:"textarea",disabled:e.$$disabled,resize:e.isTextAreaResize,maxlength:e.maxlength?e.maxlength:null,"show-word-limit":e.maxlength?e.showWordLimit:null},on:{blur:e.inputBlurHandler,change:e.inputChangeHandler},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfTextarea",mixins:[$mixins.formControl],ctrlCaption:"多行文本框",props:{simple:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入"},rows:{type:Number,default:4},formula:{type:Object,default:function(){return{formula:"",func:""}}},metadata:{type:Object,default:function(){var e=dsf.metadata.get("text-meta-data");return dsf.mix(e.valueAttributes[0],{length:1e3}),e}},isTextAreaResize:{default:"both"},isPre:{type:Boolean,default:!0},showWordLimit:{default:!1},maxlength:{default:0}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}},methods:{inputBlurHandler:function(){this.$dispatch("blur")},inputChangeHandler:function(){var e=this;this.$nextTick((function(){e.emitFormValidate(e.inputValue),e.$dispatch("change",e.inputValue)}))}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1039:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-textbox",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[e._v(" "+e._s(e.value)+" "),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",[e._v(e._s(e.value))])]):e._e():i("el-autocomplete",{ref:"auto",class:{"ds-error-border":e.errors.length>0},attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:e.placeholder,disabled:e.$$disabled,"trigger-on-focus":e.triggerOnFocus,debounce:e.delay},on:{select:e.handleSelect,blur:e.handleBlur,change:e.handleChange,input:e.handleInput},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[e._t("default",(function(){return[i("span",{domProps:{innerHTML:e._s(n.__labelHtml)}})]}),null,{item:n})]}}],null,!0),model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfAutoComplete",mixins:[$mixins.formControl],ctrlType:"autocomplete",ctrlCaption:"自动填充",props:{placeholder:{type:String,default:"请输入"},metadata:{type:Object,default:function(){return dsf.metadata.get("text-meta-data")}},metaDataType:{type:String,default:"0"},delay:{type:Number,default:300},chooseMetaData:{type:Object,default:function(){return{}}},source:{type:String,default:""},maxItemsNumber:{type:Number,default:20},autoSwitch:{type:Boolean,default:!0},onlyInsertByItems:{type:Boolean,default:!1},popperWid:{type:String,default:"auto"},triggerOnFocus:{type:Boolean,default:!1},valueKey:{type:String,default:"label"},itemShowKey:{type:String,default:"label"}},data:function(){return{oldValue:null,valueChangeBySelect:!1,gridRowChangeKey:"select-complete"}},computed:{inputValue:{get:function(){return this.value},set:function(e){e!=this.value&&this.emitValueChange(e)}}},created:function(){this.oldValue=this.value},methods:{querySearchAsync:function(e,t){var i=this,n=this.$expressParams(this.local),a=this.$replace(i.source,n);i.$http.get(a,{q:e}).done((function(n){var a=[];if(n.success){var s=new RegExp("(".concat(dsf.escapeForRegExp(e),")"),"g");_.forEach(n.data.slice(0,i.maxItemsNumber+1),(function(e){e[i.valueKey]=e[i.valueKey]||e.label||e.value,e[i.valueKey]&&(e.__label=e[i.itemShowKey]||e[i.valueKey],e.__labelHtml=e.__label.replace(s,'<span style="color: red">$1</span>'),a.push(e))})),t(a)}else dsf.layer.message(n.message||"获取数据出现错误",!1)})).error((function(e){dsf.layer.message("查询输入建议报错",!1)}))},handleBlur:function(){var e=this;this.onlyInsertByItems?setTimeout((function(){e.valueChangeBySelect||(e.inputValue=e.oldValue,e.$dispatch("blur"),e.$nextTick((function(){e.emitFormValidate(e.value)})))}),100):(this.$dispatch("blur"),this.$nextTick((function(){e.emitFormValidate(e.value)})))},handleSelect:function(e){var t=this;if(this.inputValue=e[this.valueKey],this.oldValue=e[this.valueKey],this.valueChangeBySelect=!0,this.$listeners["select"])this.$dispatch("select",e);else if(this.$vm&&this.autoSwitch){var i=this.$vm.getScopeMetaDataDict(this);if(!this.local)return;_.forOwn(i,(function(i,n){var a=n.split("."),s=a[1]?a[1]:n;if(1===i.fieldsLength){var r=dsf.isDef(e[n])?e[n]:e[s];dsf.isDef(r)&&t.$vm.$set(t.local,n,r)}else if(i.fieldsLength>1){var l=dsf.isDef(e[n])?e[n]:e[s];if(dsf.isDef(l)&&(dsf.isObject(l)||dsf.isArray(l)))t.$vm.$set(t.local,n,l);else{var o=null;_.each(i.valueAttributes,(function(t,i){var a=dsf.isDef(e[n+"_"+t])?e[n+"_"+t]:e[s+"_"+t];if(dsf.isDef(a))if(a.indexOf("^")>=0){o||(o=[]);var r=a.split("^");_.each(r,(function(e,i){o[i]||(o[i]={}),o[i][t]=e}))}else o||(o={}),o[t]=a})),dsf.isDef(o)&&t.$vm.$set(t.local,n,o)}}}))}this.$nextTick((function(){t.emitFormValidate(e[t.valueKey]),t.$nextTick((function(){t.$dispatch("select-complete",e)}))}))},handleChange:function(e){this.inputValue=e,this.valueChangeBySelect=!1,this.$dispatch("change",e)},handleInput:function(){var e=this;this.popperWid&&"auto"!==this.popperWid&&this.$refs.auto.$watch("suggestionVisible",(function(){e.$refs.auto.$children[1].dropdownWidth=e.popperWid}))}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1040:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-numeration",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("span",[e._v(e._s(e.value))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",[e._v(e._s(e.value))])]):i("el-input",{class:{"ds-error-border":e.errors.length>0},attrs:{placeholder:e.placeholder,type:"text",disabled:!0},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},[e.showBtn?i("i",{class:["iconfont",e.btnIcon?e.btnIcon+" icon-"+e.btnIcon:"icon-bianjisekuai"],attrs:{slot:"suffix"},on:{click:e.handleIconClick},slot:"suffix"}):e._e()]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfNumeration",mixins:[$mixins.formControl],ctrlCaption:"编号",props:{simple:{type:Boolean,default:!1},showBtn:{type:Boolean,default:!1},btnIcon:{type:String,default:""},placeholder:{type:String,default:""},rule:{type:String,default:""},metadata:{type:Object,default:function(){return dsf.metadata.get("text-meta-data")}}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}},created:function(){this.queryString.id||this.isDesign||this.handleIconClick()},methods:{inputChangeHandler:function(){var e=this;this.$dispatch("change",this.value),this.$nextTick((function(){e.emitFormValidate(e.value)}))},inputBlurHandler:function(){this.$dispatch("blur")},handleIconClick:function(){var e=this;this.$http.get("number/get/"+this.rule).done((function(t){t.success?e.inputValue=t.data.value:dsf.layer.message("请求异常！",!1)})).error((function(e){dsf.layer.message(e.message,!1)}))}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1041:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-codeeditor",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),""!=e.value?i("span",[e._v(e._s(e.append))]):e._e(),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.readOnly?i("div",{staticClass:"ds-form-readonly",style:{height:e.unitSize(e.height)}},[e.isRefresh?e._e():i("monaco-editor",{ref:"editor",attrs:{language:e.language,code:e.value,options:e.options},on:{codeChange:e.codeChangeHandler,blur:e.codeBlurHandler}})],1):i("div",{style:{height:e.unitSize(e.height)}},[e.isRefresh?e._e():i("monaco-editor",{ref:"editor",attrs:{language:e.language,code:e.value,options:e.options},on:{codeChange:e.codeChangeHandler,blur:e.codeBlurHandler}})],1),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(612),r=dsf.component({name:"DsfCodeEditor",ctrlCaption:"代码编辑器",mixins:[$mixins.formControl],components:{monacoEditor:s["default"]},props:{height:{type:[String,Number],default:400},language:{type:String,default:"javascript"},metadata:{type:Object,default:function(){var e=dsf.metadata.get("text-meta-data");return dsf.mix(e.valueAttributes[0],{length:4e3}),e}}},data:function(){return{isRefresh:!1,value2:"",options:{readOnly:this.readOnly}}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},methods:{resize:function(){var e;null===this||void 0===this||null===(e=this.$refs)||void 0===e||null===(e=e.editor)||void 0===e||e.layout()},codeChangeHandler:function(e){this.value2=e.getValue()},codeBlurHandler:function(e){var t=this;this.emitValueChange(this.value2),this.$nextTick((function(){t.emitFormValidate(t.value2),t.$dispatch("blur",t.value2)}))}},beforeDestroy:function(){},destroyed:function(){},watch:{language:{handler:function(e,t){var i=this;this.isRefresh=!0,this.$nextTick((function(){i.isRefresh=!1}))}},readOnly:{handler:function(e,t){var i=this;this.isRefresh=!0,this.options.readOnly=e,this.$nextTick((function(){i.isRefresh=!1}))}},height:{handler:function(e,t){this.resize()}}}}),l=r,o=i(0),u=Object(o["a"])(l,n,a,!1,null,null,null);t["default"]=u.exports},1042:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-ueditor",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("div",{class:e.ueditorCss,attrs:{id:"designReadOnly"},domProps:{textContent:e._s(e.msg)}})]},proxy:!0},{key:"content",fn:function(){return[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.$$readOnly,expression:"!$$readOnly"}],staticStyle:{width:"100%"}},[i("div",{directives:[{name:"screen-value",rawName:"v-screen-value",value:e.isScreen,expression:"isScreen"},{name:"screen-to",rawName:"v-screen-to",value:e.getScreenToDom,expression:"getScreenToDom"},{name:"screen-class",rawName:"v-screen-class",value:"ds-ueditor-screen",expression:"'ds-ueditor-screen'"}],ref:"UEditor"})]),e.isDesign&&e.$$readOnly?i("div",{class:e.ueditorCss,attrs:{id:"designReadOnly"},domProps:{textContent:e._s(e.msg)}}):e._e(),!e.isDesign&&e.$$readOnly?i("div",{class:e.ueditorCss},[i("div",{ref:"uParse",staticClass:"ds-ueditor-readonly",style:e.readOnlyUParseStyle,domProps:{innerHTML:e._s(e.dsf.safe.xss(e.editorValue))}}),e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]):e._e(),e.errors.length>0&&!e.$$readOnly?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e(),i("picture-cut-dialog",{attrs:{src:e.src,"dialog-visible":e.dialogVisible},on:{"update:src":function(t){e.src=t},"cut-img":e.cutImg,"dialog-close":e.dialogClose}}),!e.isDesign&&e.$$readOnly?i("div",{domProps:{innerHTML:e._s(e.createDefaultCss())}}):e._e()]},proxy:!0}])})},a=[],s=[],r=dsf.component({name:"DsfUEditor",mixins:[$mixins.formControl],ctrlCaption:"富文本",props:{value:{type:String,default:""},richTxtHeight:{type:Number,default:400},placeholder:{type:String,default:""},metadata:{type:Object,default:function(){var e=dsf.metadata.get("big-text-meta-data");return e.valueAttributes[0].textType="HTML",e}},toolBar:{type:Array,default:function(){return["fullscreen","undo","redo","bold","italic","underline","removeformat","formatmatch","pasteplain","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","rowspacingtop","rowspacingbottom","lineheight","customstyle","paragraph","fontfamily","fontsize","letterspacing","indent","justifyleft","justifycenter","justifyright","justifyjustify","link","unlink","anchor","imagenone","imageleft","imageright","imagecenter","simpleupload","insertimage","insertvideo","inserttable","autotypeset"]}},showLabel:{type:Boolean,default:!0},maximumWords:{type:Number,default:1e4},wordCount:{type:Boolean,default:!0},wordCountMsg:{type:String,default:"当前已输入 {#count} 个字符，您还可以输入{#leave} 个字符"},pasteImgByCut:{type:Boolean,default:!1},readOnlyAutoHeight:{type:Boolean,default:!1},readOnlyShowLabel:{type:Boolean,default:!0},cssUrl:{type:String,default:""},enableAutoSave:{type:Boolean,default:!0},allowDivTransToP:{type:Boolean,default:!0},insertorderedlist:{type:Object,default:function(){return{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""}}},insertunorderedlist:{type:Object,default:function(){return{circle:"",disc:"",square:"",dash:"",dot:""}}},allowShowBase64Img:{type:Boolean,default:!1},contextMenu:{type:Array,default:function(){return[]}},fontSize:{type:Array,default:function(){return[10,11,12,14,16,18,20,24,36]}},fontFamily:{type:Array,default:function(){return[]}},lineHeight:{type:Array,default:function(){return[]}},iframeUrlMap:{type:Object,default:function(){return{}}},autoFloatEnabled:{type:Boolean,default:!1},screenArea:{type:String,default:""},isPublic:{type:Boolean,default:!0}},data:function(){return this.ue=null,{ueId:null,uparseId:null,upFileUrl:"/file/uploadAuth/",src:"",dialogVisible:!1,editorValue:this.value,ueReady:!1,setValueSuccess:!0,transitionValue:null,timer:null,isScreen:!1}},computed:{hasLabel:function(){return!!this.showLabel&&(!this.$$readOnly||this.readOnlyShowLabel)},ueditorCss:function(){return this.hasLabel?"have-label":""},msg:function(){var e="已经启用只读模式，";return this.visible?e+"可见":e+"且不可见"},readOnlyUParseStyle:function(){return this.readOnlyAutoHeight?{"line-height":"normal"}:{height:this.unitSize(this.richTxtHeight),"line-height":"normal",overflow:"auto"}}},watch:{richTxtHeight:function(e){var t;null===(t=this.ue)||void 0===t||t.setHeight(e)},visible:function(e){this.ue&&(e?this.ue.setEnabled():this.ue.setDisabled())},value:function(e){if(this.transitionValue=e,this.editorValue=e,this.ueReady){var t=this.ue.getContent(),i=dsf.safe.xss(t);e!==i&&(this.transitionValue=null,this.setContent(e))}},toolBar:function(){this.renderUEditor()}},created:function(){this.metadata.valueAttributes[0]&&(this.metadata.valueAttributes[0].textType="HTML"),s.push(this)},mounted:function(){var e=this,t=this;if(!t.isDesign&&t.$$readOnly){var i="editor_"+dsf.uuid();t.$refs.uParse.id=i,t.uparseId=i,l.call(t)}var n=dsf.uuid();if(t.$refs.UEditor.id=n,t.ueId=n,window.UE)t.renderUEditor();else{var a=dsf.url.getWebPath("$/js/libs/UEditor/ueditor.config.js"),s=dsf.url.getWebPath("$/js/libs/UEditor/ueditor.all.js");t.$http.importFiles([a,s]).then((function(){e._isDestroyed||(t.timer&&clearInterval(t.timer),t.timer=setInterval((function(){window.UE&&(clearInterval(t.timer),t.renderUEditor())}),600))})).catch((function(e){console.error("加载UEditor.js文件出错")}))}},beforeDestroy:function(){this.timer&&clearInterval(this.timer);try{this.ue&&this.ue.destroy()}catch(l){}finally{var e;for(var t in dsf.array.remove(s,this),window.$EDITORUI){var i=window.$EDITORUI[t];"edui-dialog-modalmask"!=i.className&&((i.editor==this.ue||_.isEmpty(i.editor)&&s.length<=0)&&(i.dispose(),i.editor=null,delete window.$EDITORUI[i.id]))}this.timer&&clearInterval(this.timer),this.ue=null,this.timer=null;try{window.UE.delEditor(this.ueId)}catch(l){dsf.warn(l)}var n=(null===(e=window)||void 0===e||null===(e=e.UE)||void 0===e?void 0:e.instants)||{};for(var a in n)if(n[a].key==this.ueId){for(var r in n[a])delete n[a][r];delete n[a].key;break}}},methods:{getScreenToDom:function(){return"dialog"==this.screenArea?this.$dialog?this.$dialog.$el.querySelector(".el-dialog__body"):"":"view"==this.screenArea?this.$vm.$el.querySelector(".ds-page-content"):""},createDefaultCss:function(){var e=[];e.push("ul {margin: 0;padding: 0;width: 95%;}"),e.push("ol {margin: 0;padding: 0;width: 95%;}"),e.push("li {clear: both;}");for(var t=0;t<99;t++)e.push("li.list-cn-1-".concat(t,"{background-image:url('").concat(dsf.url.getWebPath("$/js/libs/UEditor/themes/ueditor-list/list-cn-1-"+t+".gif"),"')}"));e.push("ol.custom_cn {list-style: none;}"),e.push("ol.custom_cn li {background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-cn-paddingleft-1{padding-left: 25px;}"),e.push("li.list-cn-paddingleft-2{padding-left: 40px;}"),e.push("li.list-cn-paddingleft-3{padding-left: 55px;}");for(var i=0;i<99;i++)e.push("li.list-cn-2-".concat(i,"{background-image:url('").concat(dsf.url.getWebPath("$/js/libs/UEditor/themes/ueditor-list/list-cn-2-"+i+".gif"),"')}"));e.push("ol.custom_cn1 {list-style: none;}"),e.push("ol.custom_cn1 li {background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-cn1-paddingleft-1{padding-left: 30px;}"),e.push("li.list-cn1-paddingleft-2{padding-left: 40px;}"),e.push("li.list-cn1-paddingleft-3{padding-left: 55px;}");for(var n=0;n<99;n++)e.push("li.list-cn-3-".concat(n,"{background-image:url('").concat(dsf.url.getWebPath("$/js/libs/UEditor/themes/ueditor-list/list-cn-3-"+n+".gif"),"')}"));e.push("ol.custom_cn1 {list-style: none;}"),e.push("ol.custom_cn1 li {background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-cn1-paddingleft-1{padding-left: 30px;}"),e.push("li.list-cn1-paddingleft-2{padding-left: 40px;}"),e.push("li.list-cn1-paddingleft-3{padding-left: 55px;}");for(var a=0;a<99;a++)e.push("li.list-num-1-".concat(a,"{background-image:url('").concat(dsf.url.getWebPath("$/js/libs/UEditor/themes/ueditor-list/list-num-1-"+a+".gif"),"')}"));e.push("ol.custom_num {list-style: none;}"),e.push("ol.custom_num li {background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-num-paddingleft-1{padding-left: 25px;}");for(var s=0;s<99;s++)e.push("li.list-num-2-".concat(s,"{background-image:url('").concat(dsf.url.getWebPath("$/js/libs/UEditor/themes/ueditor-list/list-num-2-"+s+".gif"),"')}"));e.push("ol.custom_num1 {list-style: none;}"),e.push("ol.custom_num1 li {background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-num1-paddingleft-1{padding-left: 25px;}");for(var r=0;r<99;r++)e.push("li.list-num-3-".concat(r,"{background-image:url('").concat(dsf.url.getWebPath("$/js/libs/UEditor/themes/ueditor-list/list-num-3-"+r+".gif"),"')}"));return e.push("ol.custom_num2 {list-style: none;}"),e.push("ol.custom_num2 li {background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-num2-paddingleft-1{padding-left: 35px;}"),e.push("li.list-num2-paddingleft-2{padding-left: 40px;}"),e.push("li.list-dash{padding-left: 40px;}"),e.push("li.list-dash{background-image:url('".concat(dsf.url.getWebPath("$/js/libs/UEditor/themes/ueditor-list/dash.gif"),"')}")),e.push("ul.custom_dash{ list-style: none;}"),e.push("ul.custom_dash li{ background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-dash-paddingleft{ padding-left: 35px;}"),e.push("li.list-dot{ background-image: url('".concat(dsf.url.getWebPath("js/libs/UEditor/themes/ueditor-list/dot.gif"),"')}")),e.push("ul.custom_dot{ list-style: none;}"),e.push("ul.custom_dot li{ background-position: 0 3px;background-repeat: no-repeat;}"),e.push("li.list-dot-paddingleft{padding-left: 20px;}"),e.push(".list-paddingleft-1{padding-left: 0;}"),e.push(".list-paddingleft-2{padding-left: 30px;}"),e.push(".list-paddingleft-3{padding-left: 60px;}"),_.each(e,(function(t,i){t=".ds-ueditor-readonly "+t,e[i]=t})),"<style>"+e.join("\r\n")+"</style>"},getFormItemBlockMarginLeft:function(){return this.$labelWidth&&this.hasLabel?{"margin-left":this.$labelWidth+"px"}:{"margin-left":0}},renderUEditor:function(){var e;if(!this._isDestroyed){var t=this;if(t.ue&&t.ue.destroy(),null!==(e=window)&&void 0!==e&&null!==(e=e.UE)&&void 0!==e&&e.getEditor){var i={toolbars:[t.toolBar],zIndex:t.isDesign?9e3:99999,wordCount:t.wordCount,maximumWords:t.maximumWords,wordCountMsg:t.wordCountMsg,enableAutoSave:t.enableAutoSave,initialFrameHeight:t.richTxtHeight,allowDivTransToP:t.allowDivTransToP,insertorderedlist:t.insertorderedlist,insertunorderedlist:t.insertunorderedlist,allowShowBase64Img:t.allowShowBase64Img,iframeUrlMap:t.iframeUrlMap,autoFloatEnabled:t.autoFloatEnabled,customFullScreen:t.customFullScreen};this.cssUrl&&(i.iframeCssUrl=this.cssUrl),t.contextMenu.length&&(i.contextMenu=t.contextMenu),t.fontSize.length&&(i.fontsize=t.fontSize),t.fontFamily.length&&(i.fontfamily=t.fontFamily),t.lineHeight.length&&(i.lineheight=t.lineHeight),t.ue=window.UE.getEditor(t.ueId,i),t.ue.ready((function(){var e,i;o.call(t),t.ue.setOpt("isPublic",t.isPublic?1:0),t.ue.setOpt("namespace",(null===(e=t.$vm)||void 0===e?void 0:e.nameSpace)||""),t.ue.setOpt("pageName",(null===(i=t.$vm)||void 0===i?void 0:i.pageName)||""),t.ue.setOpt("caption",t.caption)}))}}},dialogClose:function(){this.dialogVisible=!1,URL.revokeObjectURL(this.src),this.src=""},cutImg:function(e){u.call(this,e)},setContent:function(e){this.editorValue=e,this.ue?(this.ue.setContent(e||""),this.setValueSuccess=!0):this.$$readOnly||(this.setValueSuccess=!1)},getContentTxt:function(){if(this.ue)return this.ue.getContentTxt()},customFullScreen:function(){var e=this,t=this.ue.getContent();this.isScreen=!this.isScreen,$(this.ue.iframe).one("load",(function(){setTimeout((function(){e.ue.setContent(t)}),300)}))}}});function l(){var e=this,t=dsf.url.getWebPath("$/js/libs/UEditor/ueditor.parse.js");this.$http.importFiles(t).then((function(){uParse(e.uparseId,[{rootPath:"static/js/libs/UEditor/",liiconpath:location.origin+"/static/js/libs/UEditor/themes/ueditor-list/",listDefaultPaddingLeft:"20"}])})).catch((function(e){console.error("加载UEditor.parse.js文件出错")}))}function o(){var e=this;$("#"+e.ueId).css("width","100%"),e.ue.setPlaceholder(e.placeholder),e.editorValue&&e.ue.setContent(e.editorValue),e.ue.addListener("contentChange",(function(){this.editorValue=e.ue.getContent(),e.$emit("editor-change",{data:this.editorValue,action:"contentChange"})})),e.ue.body.addEventListener("input",(function(){this.editorValue=e.ue.getContent(),e.$emit("editor-change",{data:this.editorValue,action:"input"})})),e.ue.body.addEventListener("blur",(function(){if(this.editorValue=e.ue.getContent(),e.value!==this.editorValue){var t=e.ue.body.innerText.replace(/\n/g,""),i=e.ue.body.querySelector("video,img,audio"),n=t||i?this.editorValue:"",a=dsf.safe.xss(n);e.value!==a&&(e.emitValueChange(a),e.$nextTick((function(){e.emitFormValidate(a)})),e.$emit("editor-change",{data:n,action:"blur"}))}})),e.pasteImgByCut&&e.ue.addListener("dsf-paste-img",(function(t,i){e.src=URL.createObjectURL(i),e.dialogVisible=!0})),e.isDesign?(e.visible?e.ue.setEnabled():e.ue.setDisabled(),e.$$readOnly?e.ue.setHide():e.ue.setShow()):e.visible?e.ue.setShow():e.ue.setHide(),e.ueReady=!0,this.setValueSuccess?this.transitionValue&&this.setContent(this.transitionValue):this.setContent(this.value),this.$dispatch("ready")}function u(e){var t,i,n=this,a=new FormData;a.append("pageName",(null===(t=n.$vm)||void 0===t?void 0:t.pageName)||""),a.append("namespace",(null===(i=n.$vm)||void 0===i?void 0:i.namespace)||""),a.append("file",e),a.append("caption",n.caption);var s={headers:{"Content-Type":"multipart/form-data"},transformRequest:[function(e,t){return e}]};n.$http.post(n.upFileUrl,a,s).done((function(e){if(e.success){n.dialogVisible=!1;var t=dsf.url.getWebPath(e.data[0]["relativePath"]);n.ue.execCommand("inserthtml",'<img src="'.concat(t,'" _src="').concat(t,'" alt="image" />'))}else dsf.layer.message(e.message,!1)})).error((function(e){dsf.layer.message("上传图片失败",!1)}))}var d=r,c=(i(648),i(0)),p=Object(c["a"])(d,n,a,!1,null,null,null);t["default"]=p.exports},1043:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-carnumber",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),""!=e.value?i("span",[e._v(e._s(e.append))]):e._e(),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):e._e():i("el-popover",{staticClass:"ds-car-number-popper",attrs:{width:e.getWidth(),transition:"el-zoom-in-top"},on:{hide:e.hideHandler},model:{value:e.isExtend,callback:function(t){e.isExtend=t},expression:"isExtend"}},[[i("div",{ref:"keyboard"},[i("div",{staticClass:"keyTitle"}),i("div",{ref:"keyContent",staticClass:"keyContent",on:{click:function(t){return e.keyboardClickHandler(t)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}})])],i("ul",{ref:"input",staticClass:"clearfix ul_input",attrs:{slot:"reference"},slot:"reference"},[e._l(e.size,(function(t){return[t<e.size||t==e.size&&e.isNewEnergy?i("li",{key:t,staticClass:"ds-carnumber-char",class:{focus:e.focusIndex==t},on:{click:function(i){return e.focusHander(t,i)}}},[i("span",[e._v(" "+e._s(e.inputs[t-1])+" ")])]):e._e()]})),i("li",{staticClass:"new-energy",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.newEnergyChangeHander.apply(null,arguments)}}},[i("span",[e.isNewEnergy?i("i",{staticClass:"iconfont icon-guanbi2"}):i("i",{staticClass:"iconfont icon-hao"}),i("span",{staticStyle:{display:"block"}},[e._v("新能源")])])])],2)],2),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfCarnumber",ctrlCaption:"车牌号",mixins:[$mixins.formControl],props:{metadata:{type:Object,default:function(){var e=dsf.metadata.get("text-meta-data");return e.validate||(e.validate={code:null,config:{text:{errorMsg:{express:"@[expressName]格式不正确",isNumber:"该项必须填写数字",max:"该项长度不可大于@[max]个字符",min:"该项长度不可小于@[min]个字符",numberMax:"该项不可大于@[numberMax]",numberMin:"该项不可小于@[numberMin]",precision:"小数点后最多保留@[precision]位小数",required:"该项必须填写"},express:"isPlateNumber",expressName:"车牌号",isNumber:!1,max:"",min:"",numberMax:"",numberMin:"",precision:"",required:!1}}}),e}}},data:function(){return{isNewEnergy:!1,isExtend:!1,inputs:[" "," "," "," "," "," "," "," "],focusIndex:0,size:8,width:450,isCheck:!1}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},methods:{getWidth:function(){return this.width+70},hideHandler:function(){window.focus},blur:function(){var e=this;this.$nextTick((function(){e.isCheck&&e.emitFormValidate(),e.isCheck=!1}))},newEnergyChangeHander:function(){if(!this.$$disabled&&(this.isNewEnergy=!this.isNewEnergy,!this.isNewEnergy)){this.inputs[7]=" ";var e=this.inputsToString();this.emitValueChange(e)}},focusHander:function(e,t){this.$$disabled?t.stopPropagation():(this.isExtend&&t.stopPropagation(),this.focusIndex=e)},getItemWith:function(){var e=(this.width-40)/10;return e},english:function(e){this.$refs.keyContent.innerHTML="";var t=this.getItemWith(),i=["1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="";n+='<ul class="english" style="width:'+this.width+'px">';for(var a=0;a<i.length;a++)n+=20==a||29==a?"<li class='key-item' style='width: "+t+"px;'>"+i[a]+"</li>":"<li class='key-item' style='width: "+t+"px'>"+i[a]+"</li>";n+="</ul>",n+="<div class='tool-keys'>",n+='<div class="symbolSwitch">汉字</div>',n+='<div class="del" >删除</div>',n+="</div>",this.$refs.keyContent.innerHTML=n},symbol:function(e){this.$refs.keyContent.innerHTML="";var t=this.getItemWith(),i=["京","津","渝","沪","冀","晋","辽","吉","黑","苏","浙","皖","闽","赣","鲁","豫","鄂","湘","粤","琼","川","贵","云","陕","甘","青","蒙","桂","宁","新","藏","使","领","警","学","港","澳","挂"],n="";n+='<ul class="english" style="width:'+this.width+'px">';for(var a=0;a<i.length;a++)n+="<li class='key-item' style='width: "+t+"px'>"+i[a]+"</li>";n+="</ul>",n+="<div class='tool-keys'>",n+='<div class="englishKeyboard">英/数</div>',n+='<div class="del">删除</div>',n+="</div>",this.$refs.keyContent.innerHTML=n},keyboardOpen:function(){1==this.focusIndex?this.symbol():this.english()},keyboardClickHandler:function(e){var t=e.target;if(t.classList.contains("key-item")){var i=e.target.innerText,n=this.focusIndex-1;this.$set(this.inputs,n,i);var a=n+1,s=this.isNewEnergy?this.size-1:this.size-2;a<=s&&(this.focusIndex++,this.keyboardOpen())}else if(t.classList.contains("englishKeyboard"))this.english();else if(t.classList.contains("symbolSwitch"))this.symbol();else if(t.classList.contains("del")){var r=this.inputs[this.focusIndex-1];r.trim()||(this.focusIndex--,this.focusIndex<1&&(this.focusIndex=1)),this.$set(this.inputs,this.focusIndex-1," ")}},inputsToString:function(){var e=this,t=_.map(this.inputs,(function(t,i){return(e.isNewEnergy||i!=e.size-1)&&t||" "})),i=t.join(""),n=/\s+$/g;return i=i.replace(n,""),i}},beforeDestroy:function(){},destroyed:function(){},watch:{inputs:{handler:function(e,t){var i=this.inputsToString();this.emitValueChange(i)}},isExtend:{handler:function(e,t){e?this.keyboardOpen():(this.focusIndex=0,this.blur())},immediate:!1},value:{immediate:!0,handler:function(e,t){if(e!=t&&(this.isCheck=!0),e){var i=e.split(""),n=[];8==e.length&&(this.isNewEnergy=!0);for(var a=0;a<this.size;a++)n[a]=i[a]?i[a]:" ";this.inputs=n}}},focusIndex:{handler:function(e,t){this.keyboardOpen()}}}}),r=s,l=(i(650),i(0)),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1044:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-datachoice",attrs:{owner:e._self,"block-class":{hideAutoInput:!e.showAutoInput},id:e.id},on:{"block-click":e.handleFocus},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({attrs:{"show-label":!1},on:{click:e.omitChange},model:{value:e.$omitValue,callback:function(t){e.$omitValue=t},expression:"$omitValue"}},"DsfTextProxy",e._self.$props,!1)),i("span",{staticClass:"omitText",on:{click:e.omitChange}},[e._v(e._s(e.$omitText))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly",class:{"is-omit":e.omitOpen},on:{click:e.omitChange}},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.$omitValue,callback:function(t){e.$omitValue=t},expression:"$omitValue"}},"DsfTextProxy",e._self.$props,!1)),i("span",{staticClass:"omitText"},[e._v(e._s(e.$omitText))])],1):e._e():i("div",{staticClass:"ds-datachoice-input",class:{"is-disabled":e.$$disabled},on:{click:e.clickHandler}},[e.omitOpen&&e.value.length?i("div",[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.$omitValue,callback:function(t){e.$omitValue=t},expression:"$omitValue"}},"DsfTextProxy",e._self.$props,!1)),i("span",{staticClass:"omitText"},[e._v(e._s(e.$omitText))])],1):i("div",{ref:"tagsInput",staticClass:"ds-datachoice-tags",style:{width:"calc(100% - 26px)"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],ref:"tags",staticClass:"tags_div"},e._l(e.value,(function(t){return i("el-tag",{key:t.value,staticClass:"el-tag--info",attrs:{title:t.text,closable:"","disable-transitions":"",size:"small"},on:{click:function(i){return i.stopPropagation(),e.handleClickTag(t)},close:function(i){return e.removeTag(t)}}},[e._v(" "+e._s(t.text)+" ")])})),1),e.autoComplete?i("el-autocomplete",{ref:"input",style:{width:"100%"},attrs:{"highlight-first-item":"","popper-class":[e.popupClass].join(" "),"trigger-on-focus":e.triggerOnFocus,debounce:e.delay,"fetch-suggestions":e.querySearch},on:{select:e.selectHandler,focus:e.handleFocus,blur:e.handleBlur},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[e._t("autocompletelist",(function(){return[i("div",[e._v(e._s(n.text))])]}),{item:n})]}}],null,!0),model:{value:e.inputStr,callback:function(t){e.inputStr=t},expression:"inputStr"}}):e._e()],1),e.isDesign||e.dialogUrl?i("span",{staticClass:"el-input__suffix",on:{click:function(t){return t.stopPropagation(),e.openDialog.apply(null,arguments)}}},[i("span",{staticClass:"el-input__suffix-inner"},[i("i",{staticClass:"el-input__icon el-icon-search"})])]):e._e()]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(3),r=i.n(s),l=i(4),o=i.n(l),u=i(1),d=i.n(u);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){r()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f=dsf.component({name:"DsfDataChoice",mixins:[$mixins.formControl],ctrlCaption:"数据选择",props:{simple:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入"},dialogTitle:{type:String,default:"请选择"},dialogUrl:{type:String,default:""},dialogExtendParams:{default:function(){return{}}},dialogWidth:{type:String,default:"800px"},dialogHeight:{type:String,default:"500px"},dialogTextKey:{type:String,default:""},dialogValueKey:{type:String,default:""},metadata:{type:Object,default:function(){return dsf.metadata.get("data-choice-meta-data")}},value:{type:[Array,Object],default:function(){return[]}},formatter:{type:String,default:"textValue^text"},maxTags:{type:Number,default:0},excludeIds:{type:Array,default:function(){return[]}},autoComplete:{type:Boolean,default:!1},metaDataType:{type:String,default:"0"},chooseMetaData:{type:Object,default:function(){return{}}},source:{type:String,default:""},delay:{type:Number,default:300},maxItemsNumber:{type:Number,default:20},popperWid:{type:String,default:"auto"},triggerOnFocus:{type:Boolean,default:!1},textKey:{type:String,default:"text"},valueKey:{type:String,default:"value"},omitOpen:{type:Boolean,default:!1},omitNum:{type:Number,default:6},omitText:{type:String,default:"等{length}个"}},data:function(){return{remoteInputing:!1,remoteItems:[],inputStr:"",popupClass:"ds-datachoice-popup ds-datachoice-popup"+dsf.uuid(16),sqlParams:{},sqlUrl:"",id:"dsfDataChoice"+dsf.uuid(16),db:[{text:"xxx",value:"xxx"}],showAutoInput:!1,timer:null,omit:!1}},created:function(){if(this.sqlUrl=this.source,!this.isDesign&&this.autoComplete){var e={},t=this.$replace(this.source,this);if(1*this.metaDataType){var i=this.chooseMetaData||{};"meta"===i.type?(t="meta/tree/byName",e={name:i.code.id,namespace:this.$vm?this.$vm.nameSpace:"",pageName:this.$vm?this.$vm.pageName:"",order:"[]"}):"ds"===i.type&&(t="meta/tree/dbSource",e={rmId:i.code})}if(dsf.mix(this.sqlParams,e,this.queryString),this.sqlUrl=t,this.popperWid&&"auto"!==this.popperWid){var n=document.createElement("style");document.body.append(n),this.styleDom=n,this.styleDom.innerHTML="\n          #".concat(this.id," .el-autocomplete-suggestion{\n            width: ").concat(this.popperWid," !important;\n          }\n        ")}}},computed:{$omitValue:function(){return this.omitOpen&&!this.omit?this.value.slice(0,this.omitNum):this.value},$omitText:function(){if(this.omitOpen&&!this.omit){var e=this.value.length,t=this.omitNum,i=e-t;return i>0?this.omitText.replaceAll("{num}",i).replaceAll("{length}",e).replaceAll("{omitNum}",t):""}return""},selectValue:{get:function(){var e=this.value;return dsf.isDef(e)?e.map((function(e){return e.value})):[]},set:function(e){var t=[];_.each(e,(function(e){"string"==dsf.type(e)&&t.push({text:e,value:e}),dsf.hasOwn(e,"text")&&dsf.hasOwn(e,"value")&&t.push(e)})),this.emitValueChange(t)}},options:function(){return this.remoteInputing?this.remoteItems:this.items}},mounted:function(){var e=this;if(this.formatValue(),this.$refs.input){var t=this.$refs.input.$el.querySelector("input");t.addEventListener("keydown",(function(t){if(8===t.keyCode&&!e.inputStr){var i=e.value[e.value.length-1];e.removeTag(i)}}))}},updated:function(){},destroyed:function(){var e;null===(e=this.styleDom)||void 0===e||e.remove(),this.timer&&clearTimeout(this.timer)},watch:{value:{handler:function(e){var t=this;this.formatValue();var i=this.value;i||this.$nextTick((function(){t.$dispatch("change"),t.$nextTick((function(){t.emitFormValidate(t.value)}))}))}}},methods:{formatValue:function(){var e=this.value,t=e;dsf.isUnDef(e)?t=[]:("string"!==dsf.type(e)||e)&&("object"!==dsf.type(e)||e.value)?$.isArray(e)||(t=[e]):t=[],t!=this.value&&this.emitValueChange(t)},clickHandler:function(){var e;this.$$disabled||(this.autoComplete?null===(e=this.$refs.input)||void 0===e||e.focus():this.openDialog())},inputChangeHandler:function(){var e=this;this.$nextTick((function(){e.$dispatch("change"),e.emitFormValidate(e.value)}))},getChoiceParams:function(){var e=this.dialogExtendParams;return"function"==dsf.type(this.dialogExtendParams)&&(e=this.dialogExtendParams()),{value:this.value,maxTags:this.maxTags,local:this.local,dialogExtendParams:e}},openDialog:function(){if(!this.$$disabled&&this.dialogUrl){this.remoteInputing=!1;var e=this,t={title:this.dialogTitle,width:this.dialogWidth,height:this.dialogHeight,top:"10vh",params:{fromDataChioce:!0,path:this.$replace(this.dialogUrl),choiceParams:e.getChoiceParams(),selectValue:e.value,excludeIds:this.excludeIds,dialogExtendParams:this.dialogExtendParams},btns:[{text:"确定",handler:function(t){return o()(d.a.mark((function i(){var n,a,s;return d.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t.content){i.next=16;break}if(n=t.content,!(n&&n.yes&&dsf.isFunction(n.yes))){i.next=16;break}return i.next=5,n.yes();case 5:if(a=i.sent,a){i.next=10;break}return i.abrupt("return",!1);case 10:a=JSON.parse(JSON.stringify(a)),s=e.mapData(a),e.value||[],e.addTags(s),e.$dispatch("selected",a),e.$nextTick((function(){e.$dispatch("change",e.value)}));case 16:case"end":return i.stop()}}),i)})))()}},{text:"取消"}]};this.isDesign&&(delete t.params,t.content=this.$replace(this.dialogUrl)),this.$openDialog(t)}},mapData:function(e){if(!this.mapHandler){for(var t="array"==dsf.type(e)?e:[e],i=[],n=[],a=0;a<t.length;a++){var s=t[a],r=this.autoMapDataText(s);r&&(i.push(r),n.push(s))}return this.$dispatch("sure",{value:i,data:n}),i}},autoMapDataText:function(e){var t,i,n=/(\w+)\.(\w+)/g,a=["text","_text","name","_name","label","_label"],s=["value","_value","id","_id","key","_key"],r=null;for(var l in e){var o=l;n.lastIndex=0;var u=n.exec(l);u&&u[2]&&(o=u[2]),!this.dialogTextKey||o!=this.dialogTextKey&&l!=this.dialogTextKey||(t=e[l]),!this.dialogValueKey||o!=this.dialogValueKey&&l!=this.dialogValueKey||(i=e[l]),dsf.isUnDef(t)&&a.indexOf(o)>=0&&(t=e[l]),dsf.isUnDef(i)&&s.indexOf(o)>=0&&(i=e[l])}return(dsf.isDef(t)||dsf.isDef(i))&&(r={text:t,value:i}),r},addTags:function(e,t){var i=this,n=[];if(t){if(n=this.value||[],this.maxTags&&this.maxTags>0&&n.length>=this.maxTags)return dsf.warn("超出数据："+JSON.stringify(e)),void dsf.layer.message("已超出数量上限【"+this.maxTags+"】",!1);var a=_.differenceBy(n,[e],"value");a.push(e),n=a}else e="array"==dsf.type(e)?e:[e],_.each(e,(function(e,t){if(i.maxTags&&i.maxTags>0&&n.length>=i.maxTags)return dsf.warn("超出数据："+JSON.stringify(e)),dsf.layer.message("已超出数量上限【"+i.maxTags+"】",!1),!1;"string"==dsf.type(e)&&(e={text:e,value:e});var a=_.findIndex(n,(function(t){return e.value===t.value}));a<0&&n.push(e)}));this.emitValueChange(n),this.$nextTick((function(){i.emitFormValidate(n)}))},removeTag:function(e){var t=this,i=_.findIndex(this.value,(function(t){return t.value===e.value}));i>=0&&(this.value.splice(i,1),this.emitValueChange(this.value),this.$dispatch("change",this.value),this.$nextTick((function(){t.emitFormValidate(t.value)})))},querySearch:function(e,t){var i=this,n=this.$replace(i.sqlUrl,this);i.sqlParams.q=e,i.$http.get(n,i.sqlParams).done((function(e){if(null===e||void 0===e||!e.success)return dsf.layer.message((null===e||void 0===e?void 0:e.message)||"自动联想接口异常",!1),void t([]);var n=[];_.forEach(e.data.slice(0,i.maxItemsNumber),(function(e){e[i.valueKey]&&n.push(p({text:e[i.textKey],value:e[i.valueKey]},e))})),t(n)})).error((function(e){dsf.layer.message("自动联想接口异常",!1),t([])}))},selectHandler:function(e){e&&(this.inputStr="",this.addTags(e,!0),this.$dispatch("select-change",e))},handleFocus:function(){this.showAutoInput=!0},handleBlur:function(){var e=this;this.inputStr||(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.showAutoInput=!1}),300))},omitChange:function(){this.omitOpen&&(this.omit=!this.omit)},handleClickTag:function(e){this.$dispatch("click-tag",e)}}}),h=f,m=i(0),v=Object(m["a"])(h,n,a,!1,null,null,null);t["default"]=v.exports},1045:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-radio-box",attrs:{owner:e._self,"block-class":{border:e.border||e.isButton,"ds-radio-box-readonly__disabled":e.$disabled},"allow-enter-focus":"text"===e.showModel},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly&&!e.readOnlyNotShowDiv?[i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1)]:["text"===e.showModel?[i("el-input",{class:{"ds-error-border":e.errors.length>0},attrs:{placeholder:e.placeholder,disabled:e.$disabled},on:{change:e.inputChangeHandler,focus:e.inputFocusHandler,blur:e.inputBlurHandler},nativeOn:{keyup:function(t){return e.keyupHandler(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._t("append-input",(function(){return[void 0!==e.attachOptions[e.inputValue]?i("el-input",{class:{"is-bordered":e.border},style:{width:e.attachWidth,maxWidth:"100%"},attrs:{value:e.attachOptions[e.inputValue],disabled:e.$disabled,size:"small",placeholder:"请输入"+e.inputValue+"的内容",title:"请输入"+e.inputValue+"的内容"},on:{input:function(t){return e.setAttach(e.inputValue,t)}}}):e._e()]}),{owner:e.owner})]:e.isButton?i("el-radio-group",{attrs:{disabled:e.$disabled},on:{change:e.selectChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e._l(e.realItems,(function(t,n){return[i("el-radio-button",{key:n,ref:"radio",refInFor:!0,attrs:{label:t[e.valueField],disabled:e.itemDisabled(t)},nativeOn:{click:function(i){return i.stopPropagation(),e.itemClick(t,n)}}},[e._v(e._s(e.getLabelText(t,n)))])]}))],2):[[i("el-radio-group",{attrs:{disabled:e.$disabled},on:{change:e.selectChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[i("deep-loop-item",{attrs:{tag:"el-radio",direction:e.direction,level:0,owner:e._self,items:e.realItems}})],1)]]],e._t("error",(function(){return[e.errors.length?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfRadioBox",mixins:[$mixins.formControl,$mixins.itemsMixins],ctrlCaption:"单选框",components:{deepLoopItem:function(){return i.e(43).then(i.bind(null,1286))}},props:{simple:{type:Boolean,default:!1},disabledItemValues:{type:Array,default:function(){return[]}},type:{type:Number,validator:function(e){return-1!==[0,1,2].indexOf(parseInt(e))},default:0},cancel:{type:Boolean,default:!1},direction:{default:"horizontal"},placeholder:{type:String,default:"请输入"},readOnlyNotShowDiv:{type:Boolean,default:!1}},data:function(){return{owner:this,multiple:!1}},computed:{border:function(){return 1===this.type},isButton:function(){return 2===this.type},isTree:function(){return this.realItems.findIndex((function(e){var t;return!(null===e||void 0===e||null===(t=e.children)||void 0===t||!t.length)}))>-1},itemWidth:function(){var e=this.direction;return"vertical"==e&&(e=1),100/e+"%"},$disabled:function(){return!(!this.readOnlyNotShowDiv||!this.$$readOnly)||this.$$disabled}},methods:{itemDisabled:function(e){return!!this.$disabled||(e.disabled||this.disabledItemValues.indexOf(e[this.valueField])>-1)},itemClick:function(e,t){var i,n=null===(i=this.$refs)||void 0===i||null===(i=i.radio)||void 0===i||null===(i=i[t])||void 0===i?void 0:i.$el;if(n)if(!this.cancel||this.$disabled||e.disabled)n.removeAttribute("data-same");else{var a=this.selectValue==e.value,s=n.getAttribute("data-same");null!=s?(a&&"1"==s&&(this.selectValue=null),n.removeAttribute("data-same")):n.setAttribute("data-same",a?"1":"0")}},inputChangeHandler:function(){var e=this.inputValue,t=!1;if(dsf.deepForEach(this.realItems,(function(i){null!==i&&void 0!==i&&i.children||i.value!=e||(t=!0)}),{children:"children"}),t)this.initValue(e);else if(this.cancel)this.inputValue="",this.emitValueChange(null);else{var i;this.inputValue=(null===this||void 0===this||null===(i=this.value)||void 0===i?void 0:i.value)||""}this.selectChange()},arrayTo2Array:function(e,t){var i=[],n=0;return e.forEach((function(e){n++,n>t&&(n=1),1==n&&i.push([]),i[i.length-1].push(e)})),i}},watch:{items:{handler:function(e,t){var i=0;e&&dsf.deepForEach(e,(function(e,t,n,a){e.uid=i++}))},immediate:!0}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1046:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-checkbox",attrs:{owner:e._self,"block-class":{"ds-checkbox-readonly__disabled":e.$disabled},"allow-enter-focus":"text"===e.showModel},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly&&!e.readOnlyNotShowDiv?[i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1)]:[e._t("before"),"text"===e.showModel?[i("el-input",{class:{"ds-error-border":e.errors.length>0},attrs:{placeholder:e.placeholder,disabled:e.$disabled},on:{change:e.inputChangeHandler,focus:e.inputFocusHandler,blur:e.inputBlurHandler},nativeOn:{keyup:function(t){return e.keyupHandler(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._l(e.inputValueOfAttach,(function(t){return[void 0!==e.attachOptions[t]?i("el-input",{key:t+"_input",class:{"is-bordered":e.border},style:{width:e.attachWidth,marginRight:"8px",maxWidth:"100%"},attrs:{value:e.attachOptions[t],disabled:e.$disabled,size:"small",placeholder:"请输入"+t+"的内容",title:"请输入"+t+"的内容"},on:{input:function(i){return e.setAttach(t,i)}}}):e._e()]}))]:e.isButton?i("el-checkbox-group",e._b({attrs:{disabled:e.$disabled},on:{change:e.selectChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"el-checkbox-group",e.options,!1),[e._l(e.realItems,(function(t,n){return[i("el-checkbox-button",{key:n,attrs:{label:t[e.valueField],disabled:e.itemDisabled(t)}},[e._v(" "+e._s(e.getLabelText(t,n))+" ")])]}))],2):[[i("el-checkbox-group",e._b({attrs:{disabled:e.$disabled},on:{change:e.selectChange},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"el-checkbox-group",e.options,!1),[i("deep-loop-item",{attrs:{tag:"el-checkbox",direction:e.direction,level:0,owner:e._self,items:e.realItems}})],1)]]],e._t("error",(function(){return[e.errors.length?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfCheckBox",mixins:[$mixins.formControl,$mixins.itemsMixins],components:{deepLoopItem:function(){return i.e(43).then(i.bind(null,1286))}},ctrlCaption:"多选框",props:{simple:{type:Boolean,default:!1},disabledItemValues:{type:Array,default:function(){return[]}},type:{validator:function(e){return-1!==[0,1,2].indexOf(parseInt(e))},default:0},maxChooseNum:{type:Number,default:-1},minChooseNum:{type:Number,default:-1},direction:{default:"horizontal"},placeholder:{type:String,default:"请输入"},readOnlyNotShowDiv:{type:Boolean,default:!1}},data:function(){return{multiple:!0}},computed:{border:function(){return 1===this.type},isButton:function(){return 2===this.type},options:function(){var e={};return this.maxChooseNum>=0&&(e.max=this.maxChooseNum),this.minChooseNum>=0&&(e.min=this.minChooseNum),e},inputValueOfAttach:function(){var e;return _.uniq((null===this||void 0===this||null===(e=this.inputValue)||void 0===e?void 0:e.split(","))||[])},isTree:function(){return this.realItems.findIndex((function(e){var t;return!(null===e||void 0===e||null===(t=e.children)||void 0===t||!t.length)}))>-1},itemWidth:function(){var e=this.direction;return"vertical"==e&&(e=1),100/e+"%"},$disabled:function(){return!(!this.readOnlyNotShowDiv||!this.$$readOnly)||this.$$disabled}},methods:{itemDisabled:function(e){return!!this.$disabled||(e.disabled||this.disabledItemValues.indexOf(e[this.valueField])>-1)},arrayTo2Array:function(e,t){var i=[],n=0;return e.forEach((function(e){n++,n>t&&(n=1),1==n&&i.push([]),i[i.length-1].push(e)})),i},inputChangeHandler:function(){var e=_.uniq((this.inputValue||"").split(",")),t=!0;this.inputValue=e.join(",");var i=[];dsf.deepForEach(this.realItems,(function(e){null!==e&&void 0!==e&&e.children||i.push(e.value)}),{children:"children"}),_.forEach(e,(function(e){i.includes(e)||(t=!1)})),t?this.initValue(e):(this.initValue(null),this.inputValue="")}},watch:{items:{handler:function(e,t){var i=0;e&&dsf.deepForEach(e,(function(e,t,n,a){e.uid=i++}))},immediate:!0}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1047:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-area-select",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):e.showCascader?["cascader"==e.showMode?i("dsf-area-cascader",{staticClass:"ds-area-select-cascader",class:{"ds-error-border":e.errors.length>0},attrs:{value:e.value,"is-dsign":e.isDesign,disabled:e.$$disabled,readonly:e.$$readOnly,"code-rule":e.codeRule,accuracy:e.realAccuracy,placeholder:e.placeholder,"super-code":e.realSuperCode,"lazy-load-data":e.lazyLoadData,"post-has-alias":e.postHasAlias,"check-strictly":e.checkStrictly,"show-all-levels":e.showAllLevels,"options-text-field":e.optionsTextField,"selected-text-field":e.selectedTextField},on:{input:e.inputValue,"update:accuracy":function(t){return e.$emit("update:accuracy",t)}}}):"inline"==e.showMode?i("dsf-area-select-by-inline",{attrs:{value:e.value,"is-dsign":e.isDesign,disabled:e.$$disabled,readonly:e.$$readOnly,"code-rule":e.codeRule,accuracy:e.realAccuracy,placeholder:e.placeholder,"super-code":e.realSuperCode,"inline-column":e.inlineColumn,"lazy-load-data":e.lazyLoadData,"post-has-alias":e.postHasAlias,"check-strictly":e.checkStrictly,"show-all-levels":e.showAllLevels,"options-text-field":e.optionsTextField,"selected-text-field":e.selectedTextField},on:{input:e.inputValue,"update:accuracy":function(t){return e.$emit("update:accuracy",t)}}}):e._e()]:e._e(),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfAreaSelect",mixins:[$mixins.formControl],ctrlCaption:"行政区划",props:{value:{type:Object,default:function(){return{}}},placeholder:{type:String,default:"请选择"},formatter:{type:String,default:"textValue^text"},superCode:{type:[String,Number],default:"000000000000"},accuracy:{type:Number,default:4},range:{type:Array,default:null},metadata:{type:Object,default:function(){return dsf.metadata.get("items-meta-data")}},showAllLevels:{type:Boolean,default:!0},checkStrictly:{type:Boolean,default:!1},postHasAlias:{type:Boolean,default:!1},optionsTextField:{type:String,default:"name"},selectedTextField:{type:String,default:"name"},codeRule:{type:Object,default:function(){return{rootCode:"000000000000",isFull:!1,inferCode:null}}},lazyLoadData:{type:Function,default:null},showMode:{type:String,default:"cascader"},inlineColumn:{type:Number,default:0}},data:function(){return{isInit:!1,options:{},showCascader:!0}},computed:{realAccuracy:function(){if(4!=this.accuracy)return this.accuracy;var e=this.range;return e?+e[1]:this.accuracy},realSuperCode:function(){var e=this.superCode;return dsf.isString(e)?e=this.$replace(e,this.$vm):e+="",e}},watch:{realSuperCode:function(){var e=this;this.showCascader=!1,setTimeout((function(){e.showCascader=!0}),20)}},created:function(){this.range&&this.$emit("update:accuracy",+this.range[1])},methods:{inputValue:function(e){var t=this;this.emitValueChange(e),this.$nextTick((function(){t.emitFormValidate(e)}))}},design:{metadata:{create:function(e){var t=$mixins.formControl.design.metadata.create.call(this,e),i=_.findIndex(t.metadata.valueAttributes,(function(e){return"alias"===e.code}));return this.postHasAlias&&-1===i?t.metadata.valueAttributes.push({name:"别名",code:"alias",type:dsf.metadata.getDataType("string"),length:100,defaultValue:null,encrypt:!1,unit:null}):!this.postHasAlias&&i>-1&&t.metadata.valueAttributes.splice(i,1),t}}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1048:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-control ds-form-item ds-cascader",class:e.getCss},[e.simple&&e.$$readOnly&&!e.isDesign?[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]:[e.showLabel?i("DsfFieldLabel",{style:e.getLabelWidthStyle(),attrs:{mode:e.showDataCaptionMode,"show-icon":e.showDataCaptionIcon,trigger:e.showDataCaptionTrigger,"data-caption":e.dataCapion,"is-design":e.isDesign,owner:e._self}},[e._v(" "+e._s(e.$t(e.label))+" ")]):e._e(),i("div",{staticClass:"ds-form-block",style:e.getFormItemBlockMarginLeft()},[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):e._e():i("el-cascader",e._b({ref:"elCascader",class:{"ds-error-border":e.errors.length},attrs:{options:e.realItems,disabled:e.$$disabled,filterable:e.filterable,placeholder:e.placeholder,clearable:e.clearable,props:e.myProps,separator:e.separator,"show-all-levels":e.showAllLevels,"collapse-tags":e.collapseTags},on:{"expand-change":e.expandChange,change:e.selectChange,blur:e.blur,focus:e.focus,"visible-change":e.visibleChange,"remove-tag":e.removeTag},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return[e._v(" "+e._s(i[e.optionsTextField])+" ")]}}],null,!1,2066350484),model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"el-cascader",e.bindAttr,!1)),e._t("error",(function(){return[e.errors.length?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))],2)]],2)},a=[],s=i(2),r=i.n(s),l=i(3),o=i.n(l);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){o()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var c=dsf.component({name:"DsfCascader",mixins:[$mixins.formControl],ctrlCaption:"下拉框级联",props:{separator:{type:String,default:"/"},simple:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},value:{type:[Object,Array],required:!1},items:{type:Array,default:function(){return[]}},filterable:{type:Boolean,default:!1},filterMethod:{type:Function,required:!1},clearable:{type:Boolean,default:!0},showAllLevels:{type:Boolean,default:!0},collapseTags:{type:Boolean,default:!1},expandTrigger:{type:String,default:"click"},multiple:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},lazyLoad:{type:Function,required:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("cascader-meta-data")}},formatter:{type:String,default:"textValue^text"},valueField:{type:String,default:"value"},textField:{type:String,default:"text"},aliasField:{type:String,default:"alias"},childrenField:{type:String,default:"children"},optionsTextField:{type:String,default:"text"},selectedTextField:{type:String,default:"text"},postHasAlias:{type:Boolean,default:!1},needHideOptions:{type:String,default:""}},data:function(){return{isFocus:!1}},computed:{bindAttr:function(){var e={};return this.filterMethod&&(e.filterMethod=this.filterMethod.bind(this)),e},myProps:function(){var e={expandTrigger:"click"===this.expandTrigger?"click":"hover",checkStrictly:this.checkStrictly,multiple:this.multiple,value:this.valueField,label:this.selectedTextField,children:this.childrenField,lazy:this.lazy};return this.lazyLoad&&(e.lazyLoad=this.lazyLoad.bind(this)),e},realItems:function(){var e=this.isDesign,t=this.items,i=this.needHideOptions,n=this.textField,a=this.valueField,s=this.childrenField;return e?[]:(i=_.trim(i),i=i?i.split(","):[],dsf.cloneDeepWith(t,(function(e){if(-1===i.indexOf(e[a]))return d(d({},e),{},o()(o()({},n,e[n]),a,e[a]))}),{children:s}))},selectValue:{get:function(){var e=this,t=this.value;return dsf.isObject(t)&&""===t.text&&""===t.value&&!t.alias&&(t=null),dsf.isUnDef(t)||dsf.isEmptyObject(t)?this.multiple?[]:null:this.multiple?"array"==dsf.type(t)?t.map((function(t){return e.getValuePath(t)})):"object"==dsf.type(t)?[this.getValuePath(t)]:[]:"array"==dsf.type(t)?this.getValuePath(t[0]):"object"==dsf.type(t)?this.getValuePath(t):null},set:function(e){var t=this;if(!e||!e.length){var i={text:"",value:""};return this.postHasAlias&&(i.alias=""),void this.emitValueChange(i)}if(this.multiple){var n=e.map((function(e){return t.getValueByPath(e)}));this.emitValueChange(n)}else{var a=this.getValueByPath(e);this.emitValueChange(a)}}}},watch:{$$readOnly:function(e){e?this.input&&this.input.removeEventListener("input",this.inputChange):this.bindInputChange()},"metadata.dataSource":{handler:function(e){var t=[];if(e){var i=e.attachHideMaps,n=void 0===i?[]:i;t=n.join(",")}this.$emit("update:needHideOptions",t)},deep:!0},needHideOptions:{handler:function(e){e=e.trim(),this.metadata.dataSource.attachHideMaps=e?e.split(","):[]},immediate:!0}},mounted:function(){this.isDesign||this.simple||this.$$readOnly||this.bindInputChange()},beforeDestroy:function(){var e;clearTimeout(this.timeout),null===(e=this.input)||void 0===e||e.removeEventListener("input",this.inputChange)},methods:{bindInputChange:function(){var e=this;this.$nextTick((function(){var t,i;e.input=null===(t=e.$refs.elCascader)||void 0===t?void 0:t.$el.querySelector(".el-input__inner"),null===(i=e.input)||void 0===i||i.addEventListener("input",e.inputChange)}))},inputChange:function(){var e=this;void 0!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.$dispatch("input-change",e.input.value)}),300)},getValuePath:function(e){var t=this,i=e.value,n=e.path;if(n)return n.split(",");var a=[];return dsf.deepForEach(this.realItems,(function(e,n){var s=e[t.valueField];if(a.length=n+1,a[n]=s,s===i)return-1}),{children:this.childrenField}),a},getValueByPath:function(e){var t,i=this;e=_.cloneDeep(e);var n=(null===(t=this.$refs.elCascader)||void 0===t||null===(t=t.$refs.panel)||void 0===t?void 0:t.store)||{},a=n.nodes;if(!a||!a.length)return null;var s=[],r=[],l="",o=[],u=0;dsf.deepForEach(a,(function(t){var n=t.data,a=t.level,d=n[i.textField],c=n[i.aliasField],p=n[i.valueField];if(e[a-1]===p&&(s.push(d),r.push(c),o.push(p),l=p,u++),e.length===u)return-1}));var d={text:this.showAllLevels?s.join(this.separator):s.pop(),path:o.join(","),value:l};return this.postHasAlias&&(d["alias"]=this.showAllLevels?r.join(this.separator):r.pop()),d},selectChange:function(){var e=this;this.$nextTick((function(){e.$dispatch("change",e.value),e.emitFormValidate(e.value)}))},expandChange:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];this.$nextTick((function(){e.$dispatch.apply(e,["expandChange"].concat(i))}))},blur:function(){this.isFocus=!1;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.$dispatch.apply(this,["blur"].concat(t))},focus:function(){this.isFocus=!0;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.$dispatch.apply(this,["focus"].concat(t))},visibleChange:function(e){this.$dispatch("visible-change",e)},removeTag:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.$dispatch.apply(this,["remove-tag"].concat(t))}},design:{layout:{exclude:["value","#items"]},settingMenus:function(){return[].concat(r()($mixins.formControl.design.settingMenus()||[]),[{text:"选项设置",command:"datasource",handler:function(){dsf.designer.triggerDialogPropty("metadata.dataSource")}}])},metadata:{create:function(e){var t=$mixins.formControl.design.metadata.create.call(this,e),i=_.findIndex(t.metadata.valueAttributes,(function(e){return"alias"===e.code})),n=_.findIndex(t.metadata.valueAttributes,(function(e){return"path"===e.code}));return this.postHasAlias&&-1===i?t.metadata.valueAttributes.push({name:"别名",code:"alias",type:dsf.metadata.getDataType("string"),length:100,defaultValue:null,encrypt:!1,unit:null}):!this.postHasAlias&&i>-1&&t.metadata.valueAttributes.splice(i,1),this.myProps.lazy&&-1==n?t.metadata.valueAttributes.push({name:"路径",code:"path",type:dsf.metadata.getDataType("string"),length:120,defaultValue:null,encrypt:!1,unit:null}):!this.myProps.lazy&&n>-1&&t.metadata.valueAttributes.splice(n,1),t}}}}),p=c,f=i(0),h=Object(f["a"])(p,n,a,!1,null,null,null);t["default"]=h.exports},1049:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-switch",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):i("el-switch",e._b({class:{inset:e.showText&&e.insetText},on:{change:e.selectChange},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}},"el-switch",e.bindAttr,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s={value:0,text:"否"},r=dsf.component({name:"DsfSwitch",mixins:[$mixins.formControl],ctrlCaption:"开关",props:{simple:{type:Boolean,default:!1},value:{type:[Object,String,Number,Boolean],default:function(){return s}},showText:{type:Boolean,default:!0},insetText:{type:Boolean,default:!1},activeText:{type:String,default:"是"},inactiveText:{type:String,default:"否"},activeColor:{type:String,default:null},inactiveColor:{type:String,default:null},formatter:{type:String,default:"textValue^text"},metadata:{type:Object,default:function(){return dsf.metadata.get("boolean-meta-data")}}},data:function(){return{}},computed:{bindAttr:function(){var e={disabled:this.$$disabled,activeValue:1,inactiveValue:0};return this.showText&&(e["activeText"]=this.activeText,e["inactiveText"]=this.inactiveText),this.activeColor&&(e["activeColor"]=this.activeColor),this.inactiveColor&&(e["inactiveColor"]=this.inactiveColor),e},switchValue:{get:function(){var e,t=null===(e=this.value)||void 0===e?void 0:e.value;return t&&"0"!=t?1:0},set:function(e){var t=this,i=this.getValue(e);this.emitValueChange(i),this.$nextTick((function(){t.emitFormValidate(i)}))}}},watch:{value:{handler:function(e){var t=s;dsf.isString(e)||dsf.isNumber(e)||dsf.isBoolean(e)?t=this.getValue(e&&"0"!=e):!dsf.isObject(e)||0!=e.value&&1!=e.value||(t=this.getValue(e.value)),(null===e||void 0===e?void 0:e.text)===t.text&&(null===e||void 0===e?void 0:e.value)===t.value||this.emitValueChange(t)},immediate:!0,deep:!0}},methods:{selectChange:function(){var e=this;this.$nextTick((function(){return e.$dispatch("change",e.value)}))},getValue:function(e){return e&&"0"!=e?{value:1,text:this.activeText}:{value:0,text:this.inactiveText}}}}),l=r,o=i(0),u=Object(o["a"])(l,n,a,!1,null,null,null);t["default"]=u.exports},1050:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-control ds-form-item ds-datachoice_tag ds-no-padding",class:e.getCss},[i("DsfDataChoice",e._b({ref:"dataChoice",attrs:{"is-design":e.isDesign},model:{value:e.dataChoiceValue,callback:function(t){e.dataChoiceValue=t},expression:"dataChoiceValue"}},"DsfDataChoice",e.dataChoiceProps,!1)),i("div",{staticClass:"ds-datachoice_tag_auto ds-control"},[e.tagCtrlShowLabel?i("label",{staticClass:"ds-form-label"},[e._v(" "+e._s(e.tagCtrlLabel)+" ")]):e._e(),i("div",{staticClass:"ds-form-block"},e._l(e.autoTags,(function(t){return i("DsfButton",{key:t.value,attrs:{type:"plain",size:"small",title:t.text}},[e._v(" "+e._s(t.text)+" ")])})),1)])],1)},a=[],s=i(3),r=i.n(s);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){r()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u=dsf.component((function(){var e=dsf.getComponentOptions($components.platform.DsfDataChoice);return{name:"DsfTag",mixins:[$mixins.formControl],ctrlCaption:"标签",props:o(o({},e.props),{},{tagCtrlGetSql:{type:String,default:""},tagCtrlSetSql:{type:String,default:""},tagCtrlLabel:{type:String,default:"自动识别标签"},tagCtrlShowLabel:{type:Boolean,default:!0},tagCtrlAutoSql:{type:String,default:""},allowPost:{type:Boolean,default:!1}}),data:function(){return{autoTags:[],dataChoiceValue:[]}},watch:{dataChoiceValue:{handler:function(e){this.setV(e)},deep:!0,immediate:!0}},computed:{dataChoiceProps:function(){var t={};for(var i in $mixins.formControl.props)"value"!==i&&(t[i]=this[i]);for(var n in e.props)"value"!==n&&(t[n]=this[n]);return t}},created:function(){this.isDesign?this.autoTags=[{text:"勤奋",value:"qf"},{text:"勇敢",value:"yg"},{text:"和谐",value:"hx"},{text:"富强",value:"fq"}]:this.getAutoTag(),this.queryString.id&&this.getData()},methods:{getData:function(){var e=this,t=this.$replace(this.tagCtrlGetSql||"",this.$vm);""!=t&&this.$http.get(t,this.queryString).done((function(t){t.success?e.dataChoiceValue=t.data:e.$message(t.message,!1)})).error((function(t){e.$message(t.message,!1)}))},getAutoTag:function(){var e=this,t=this.$replace(this.tagCtrlAutoSql||"",this.$vm);""!=t&&this.$http.get(t,this.queryString).done((function(t){t.success?e.autoTags=t.data||[]:e.$message(t.message,!1)})).error((function(t){e.$message(t.message,!1)}))},postAfter:function(){var e=this,t=this.$replace(this.tagCtrlSetSql||"",this.$vm);if(t&&""!=t){var i=t.indexOf("?");t=-1!=i?t.substr(0,i)+"?"+dsf.url.serialize(dsf.mix(dsf.url.parse(t).hashQuery,this.queryString)):t+"?"+dsf.url.serialize(this.queryString),this.$http.post(t,{data:JSON.stringify(this.dataChoiceValue)},!0).done((function(t){return t.success||e.$message(t.message,!1),t.success})).error((function(t){e.$message(t.message,!1)}))}},setV:function(){var e=[].concat(this.autoTags,this.dataChoiceValue);e=_.unionBy(e,"value"),this.emitValueChange(e)}}}})),d=u,c=i(0),p=Object(c["a"])(d,n,a,!1,null,null,null);t["default"]=p.exports},1051:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-control ds-form-item ds-signature",class:e.getCss},[e.isDesign||e.$$readOnly||e.$$disabled?[e.showLabel?i("DsfFieldLabel",{style:e.getLabelWidthStyle(),attrs:{mode:e.showDataCaptionMode,"show-icon":e.showDataCaptionIcon,trigger:e.showDataCaptionTrigger,"data-caption":e.dataCapion,"is-design":e.isDesign,owner:e._self}},[e._v(" "+e._s(e.$t(e.label))+" ")]):e._e(),i("div",{staticClass:"signature",style:e.getFormItemBlockMarginLeft()},[e.$value&&!e.isImageLoadError?i("img",{staticClass:"save-img",attrs:{src:e.$value},on:{error:e.imageLoadError,load:e.imageLoadSuccess}}):i("canvas"),e.$value?e._e():i("span",{staticClass:"signature-tip"},[e._v(e._s(e.emptyText))]),e.isImageLoadError?i("span",{staticClass:"signature-tip"},[e._v("读取失败")]):e._e()])]:[e.showLabel?i("DsfFieldLabel",{style:e.getLabelWidthStyle(),attrs:{mode:e.showDataCaptionMode,"show-icon":e.showDataCaptionIcon,trigger:e.showDataCaptionTrigger,"data-caption":e.dataCapion,"is-design":e.isDesign,owner:e._self}},[e._v(" "+e._s(e.$t(e.label))+" ")]):e._e(),i("div",{staticClass:"signature",style:e.getFormItemBlockMarginLeft()},[e.$value?i("img",{staticClass:"save-img",attrs:{src:e.$value}}):i("div",{staticClass:"canvas-box"},[e.$value?i("canvas"):e._e(),i("canvas",{ref:"canvas",on:{mousedown:e.focus}}),e.isFocus||e.$value?e._e():i("span",{staticClass:"signature-tip"},[e._v(" "+e._s(e.emptyText)+" ")])]),e.$$readOnly||e.$$disabled||!e.$value?i("div",{staticClass:"save-signature"},[e._v(" 完成签名后，请点击【完成】按钮 "),e.isFocus?i("div",{staticClass:"operation"},[i("span",{staticClass:"clear",on:{click:e.clear}},[e._v("清空")]),i("DsfButton",{staticClass:"save-btn",attrs:{type:"plain"},on:{click:e.getImg}},[e._v(" 完成 ")])],1):i("span",{staticClass:"save"},[e._v("完成")])]):i("div",{staticClass:"save-signature"},[e._v(" 签名已保存，如需重新签名，请点击【重签】按钮 "),i("div",{staticClass:"operation"},[i("DsfButton",{staticClass:"save-btn",attrs:{type:"plain"},on:{click:e.reset}},[e._v(" 重签 ")])],1)]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))],2)]],2)},a=[],s=i(3),r=i.n(s);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){r()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=window.atob(e),a=[],s=0;s<n.length;s+=i){for(var r=n.slice(s,s+i),l=new Array(r.length),o=0;o<r.length;o++)l[o]=r.charCodeAt(o);var u=new Uint8Array(l);a.push(u)}var d=new Blob(a,{type:t});return d},d=dsf.component({name:"DsfSignature",ctrlCaption:"电子签名",mixins:[$mixins.formControl],props:{metadata:{type:Object,default:function(){return dsf.metadata.get("signature-meta-data")}},isStatic:{type:Boolean,default:!1},isPublic:{type:Boolean,default:!0},emptyText:{type:String,default:"请在此处签名"}},data:function(){return{upFileUrl:"/file/upload/",signature:null,isFocus:!1,isImageLoadError:!1}},mounted:function(){var e=this;this.loadScript((function(){e.initCanvas()}))},computed:{$value:function(){var e,t=this.value?JSON.parse(this.value):[];return dsf.url.getWebPath((null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.relativePath)||(null===t||void 0===t?void 0:t.relativePath))},extendData:function(){var e=this.isStatic,t=this.isPublic,i={isStatic:Number(e),isPublic:Number(t)};return e&&this.$vm&&(i["namespace"]=this.$vm.nameSpace,i["pageName"]=this.$vm.pageName),i}},methods:{reset:function(){var e=this;this.clear(),this.isFocus=!1,this.emitValueChange(""),this.$nextTick((function(){e.initCanvas()}))},initCanvas:function(){var e=this.$refs.canvas;e&&(this.signature=new SmoothSignature(e))},focus:function(){this.isFocus=!0},clear:function(){this.signature&&this.signature.clear()},getImg:function(){if(this.signature){if(this.signature.isEmpty())return dsf.layer.message("请写入内容",!1),!1;this.$listeners["getImage"]?this.$dispatch("getImage",this.signature.getPNG()):this.upload(this.signature.getPNG())}},upload:function(e){var t=this;return new Promise((function(i,n){var a,s,r=u(e.split(",")[1],"image/png");r.name=dsf.uuid(32)+".png",t.$http.upload(t.upFileUrl,o(o({},t.extendData),{},{files:r,pageName:(null===(a=t.$vm)||void 0===a?void 0:a.pageName)||"",namespace:(null===(s=t.$vm)||void 0===s?void 0:s.namespace)||""})).done((function(e){var a=e.success,s=e.data,r=e.message;if(!a)return dsf.layer.message(r||"上传签名失败",!1),void n(r);t.emitValueChange(JSON.stringify(s)),t.$nextTick((function(){i()}))})).error((function(e){dsf.layer.message("上传签名失败发生未知异常",!1),n(e)}))}))},loadScript:function(e){window.SmoothSignature?null===e||void 0===e||e():this.$http.importFiles([dsf.url.getWebPath("$/js/libs/smooth-signature/smooth-signature.min.js")]).then((function(){null===e||void 0===e||e()})).catch((function(e){dsf.layer.message("加载signature文件报错",!1)}))},imageLoadSuccess:function(){this.isImageLoadError=!1},imageLoadError:function(){this.isImageLoadError=!0}}}),c=d,p=(i(657),i(0)),f=Object(p["a"])(c,n,a,!1,null,null,null);t["default"]=f.exports},1052:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-code-set",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},"DsfTextProxy",e._self.$props,!1))],1):e._e():i("div",{staticClass:"ds-code-set-default",on:{click:function(t){return t.stopPropagation(),e.clickHandler.apply(null,arguments)}}},[i("el-input",{class:{"hidden-border":!e.showBorder,"ds-code-set-disabled":e.$$disabled},attrs:{placeholder:e.placeholder,readonly:!0,disabled:e.$$disabled,clearable:e.clearable},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[e.clearable&&e.selectValue?[i("i",{staticClass:"el-input__icon el-icon-circle-close clearable-close",attrs:{slot:"suffix"},on:{click:function(t){return t.stopPropagation(),e.clear.apply(null,arguments)}},slot:"suffix"}),i("i",{staticClass:"el-input__icon el-icon-arrow-down clearable-arrowdown",attrs:{slot:"suffix"},slot:"suffix"})]:i("i",{ref:"icon_arrow_down",staticClass:"el-input__icon el-icon-arrow-down",attrs:{slot:"suffix"},slot:"suffix"})],2)],1),e._t("error",(function(){return[e.errors.length?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(2),r=i.n(s),l=dsf.component({name:"DsfAreaSelectDialog",ctrlCaption:"级联选择弹窗版",mixins:[$mixins.control,$mixins.formControl],props:{value:{type:[Object,Array],required:!1},items:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!0},showAllLevels:{type:Boolean,default:!1},separator:{type:String,default:"/"},accordion:{type:Boolean,default:!0},areaselect:{type:Boolean,default:!0},iszdyjk:{type:Boolean,default:!1},isLazy:{type:Boolean,default:!0},initDataSourceUrl:{type:String,default:"/area/getArea?TREEINFO_GLOBALID=000000000000&END_LEVEL=2&START_LEVEL=2"},lazyUrl:{type:String,default:"/area/getArea?TREEINFO_GLOBALID=000000000000&END_LEVEL=2&START_LEVEL=2"},lazyChildrenUrl:{type:String,default:"/area/getArea?TREEINFO_GLOBALID=@[treeinfo_globalid]&END_LEVEL=@[treeinfo_level + 1]&START_LEVEL=@[treeinfo_level + 1]"},lazySearchUrl:{type:String,default:"/area/selectArea"},keysMap:{type:Array,default:function(){return[{from:"text",to:"text",type:"text",desc:"节点名称"},{from:"value",to:"value",type:"text",desc:"值"},{from:"children",to:"children",type:"array",desc:"子节点"}]}},metadata:{type:Object,default:function(){return dsf.metadata.get("items-meta-data")}},formatter:{type:String,default:"textValue^text"},dialogconfig:{type:Object,default:function(){return{title:"",width:"600px",height:"60vh",top:"10vh",layout:"right",multiple:!1,checkStrictly:!0}}}},watch:{areaselect:function(e){this.dialogconfig.multiple&&e&&(this.dialogconfig.multiple=!1)}},data:function(){return{}},computed:{realItems:function(){return this.isDesign?[]:this.items||[]},multiple:function(){return this.dialogconfig.multiple},selectValue:{get:function(){var e;return dsf.isObject(this.value)?(null===(e=this.value)||void 0===e?void 0:e.text)||"":dsf.isArray(this.value)?_.map(this.value,(function(e){return null===e||void 0===e?void 0:e.text})).join(","):""},set:function(e){}}},methods:{checkChange:function(e){this.$dispatch("change",e)},clickHandler:function(){if(!this.$$disabled){var e=this,t=this.dialogconfig,i=t.title,n=t.width,a=t.height,s=t.layout,r=t.top,l=t.multiple;this.transformHandler("180deg"),this.$openDialog({title:i,content:"CodeSetDialog",width:n,height:a,footerAlign:s,top:r,params:{$index:this},btns:[{text:"保存",type:"main",handler:function(t){var i=t.getCheckNode();i.length>0?(e.transformHandler(0),l?e.emitValueChange(i):e.emitValueChange((null===i||void 0===i?void 0:i[0])||{}),e.$dispatch("save",_.cloneDeep(i))):e.clear()}},{text:"关闭",handler:function(){e.transformHandler(0)}}]})}},clear:function(){this.emitValueChange({})},transformHandler:function(e){var t;null!==(t=this.$refs)&&void 0!==t&&t.icon_arrow_down&&(this.$refs.icon_arrow_down.style.transform="rotate(".concat(e,")"))}},design:{layout:{exclude:["value","#items"]},settingMenus:function(){return[].concat(r()($mixins.formControl.design.settingMenus()||[]),[{text:"选项设置",command:"datasource",handler:function(){dsf.designer.triggerDialogPropty("metadata.dataSource")}}])},metadata:{create:function(e){var t=$mixins.formControl.design.metadata.create.call(this,e),i=_.findIndex(t.metadata.valueAttributes,(function(e){return"alias"===e.code}));return this.postHasAlias&&-1===i?t.metadata.valueAttributes.push({name:"别名",code:"alias",type:dsf.metadata.getDataType("string"),length:100,defaultValue:null,encrypt:!1,unit:null}):!this.postHasAlias&&i>-1&&t.metadata.valueAttributes.splice(i,1),t}}}}),o=l,u=(i(659),i(0)),d=Object(u["a"])(o,n,a,!1,null,null,null);t["default"]=d.exports},1053:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEncrypt||e.isDesign,expression:"isEncrypt || isDesign"}],staticClass:"ds-encrypt-box",class:e.getCss},[e._m(0),i("div",{staticClass:"ds-encrypt-box-level",style:{"padding-left":e.showLabel?0:"8px"}},[i("div",{staticClass:"ds-encrypt-box-level-range"},[i("DsfFormControlBox",{staticClass:"ds-encrypt-box-level-range-box",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?i("div",{staticClass:"ds-form-readonly ds-form-item"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):i("el-select",{attrs:{disabled:!e.isModifyContent},on:{change:e.handleChangeEncrypt},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.realItems,(function(e){return i("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)]},proxy:!0}],null,!0)})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEndTime,expression:"showEndTime"}],staticClass:"ds-encrypt-box-level-time ds-form-item"},[i("DsfFieldLabel",{style:e.getLevelTimeStyle()},[e._v("解密日期：")]),i("div",{staticClass:"ds-form-block"},[e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[e._v(" "+e._s(e.expirydate)+" ")]):i("el-date-picker",{attrs:{disabled:"",type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:e.placeholder},on:{change:e.selectChange},model:{value:e.expirydate,callback:function(t){e.expirydate=t},expression:"expirydate"}})],1)],1)])])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-encrypt-box-icon"},[i("i",{staticClass:"iconfont icon-yanzhengma1"})])}],s=dsf.component({name:"DsfEncryptLevel",mixins:[$mixins.formControl,$mixins.itemsMixins],ctrlCaption:"密级",props:{caption:{type:String,default:"ds_security_level"},label:{type:String,default:"密级"},simple:{type:Boolean,default:!1},disabledItemValues:{type:Array,default:function(){return[]}},type:{validator:function(e){return-1!==[0,1,2].indexOf(parseInt(e))},default:0},maxChooseNum:{type:Number,default:-1},minChooseNum:{type:Number,default:-1},readOnlyNotShowDiv:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.securitylevel,dataSource:{attachFullMaps:{},code:dsf.config.setting_encrypt_level_dictionary,type:"dict"},valueAttributes:[{name:"值",code:"value",type:dsf.metadata.getDataType("number"),length:100,defaultValue:null,emptyValidate:!0,encrypt:!1,unit:null,textType:"normal"},{name:"文本",code:"text",type:dsf.metadata.getDataType("string"),length:100,defaultValue:null,encrypt:!1,unit:null,textType:"normal"},{name:"日期",code:"expirydate",type:dsf.metadata.getDataType("date"),length:null,defaultValue:null,unit:null,textType:"normal"}]})}},securityLevel:{type:Number,default:1},securityRange:{type:Boolean,default:!1}},data:function(){return{enctyptLevelTimes:{},placeholder:""}},mounted:function(){var e,t,i=null===(e=this.value)||void 0===e?void 0:e.value;i||(i=(null===(t=this.realItems[0])||void 0===t?void 0:t.value)||"",this.selectValue=i,this.$eventBus.$emit("changeFormEncryptLevel",i));this.handleHiddenParent()},computed:{isEncrypt:function(){return"1"==dsf.config.setting_security_is_open_classified},showEndTime:function(){return this.isDesign?this.securityRange:this.securityRange&&this.expirydate},border:function(){return 1===this.type},options:function(){var e={};return this.maxChooseNum>=0&&(e.max=this.maxChooseNum),this.minChooseNum>=0&&(e.min=this.minChooseNum),e},inputValueOfAttach:function(){var e;return _.uniq((null===this||void 0===this||null===(e=this.inputValue)||void 0===e?void 0:e.split(","))||[])},isTree:function(){return this.realItems.findIndex((function(e){var t;return!(null===e||void 0===e||null===(t=e.children)||void 0===t||!t.length)}))>-1},itemWidth:function(){var e=this.direction;return"vertical"==e&&(e=1),100/e+"%"},$disabled:function(){return!(!this.readOnlyNotShowDiv||!this.$$readOnly)||this.$$disabled},$labelWidth:function(){var e=dsf.themeConfig.setting.fontSize,t=0;t=this.enabledLabelWidth?this.labelWidth:this.$page?this.$page.formItemLabelWidth||this.labelWidth||120:this.labelWidth;var i={bigFont:10,bigFont_1:20,bigFont_2:30,bigFont_3:40};return t+=i[e]||0,t-44},expirydate:{get:function(){var e,t="";return null!==(e=this.value)&&void 0!==e&&e.expirydate&&(t=this.value.expirydate.substring(0,10)),t},set:function(e){var t=Object.assign({},this.value,{expirydate:e||""});this.emitValueChange(t)}},isModifyContent:function(){var e=!1,t=this.queryString.id;return dsf.isUnDef(t)&&(e=!0),!this.$$disabled&&e}},methods:{handleHiddenParent:function(){if(!this.isEncrypt){var e=this.$parent.$el.getAttribute("colspan");4==e&&(this.$parent.$parent.$el.style.display="none")}},handleChangeEncrypt:function(e){var t=this,i=this.enctyptLevelTimes[e];dsf.isUnDef(i)?this.$http.get("/setting/getDefaultExpiryDate",{secretLevel:e}).done((function(i){if(i.success){var n=dsf.isString(i.data)?i.data:"";t.enctyptLevelTimes[e]=n,t.expirydate=n}else dsf.layer.message(i.message,!1)})):this.$nextTick((function(){t.expirydate=i})),this.$nextTick((function(){t.$dispatch("change",t.value),t.emitFormValidate(t.value)}))},getLevelTimeStyle:function(){var e=dsf.themeConfig.setting.fontSize,t={bigFont:10,bigFont_1:20,bigFont_2:30,bigFont_3:40},i=120+(t[e]||0);return"width: ".concat(i,"px; font-weight: normal;display:").concat(this.showLabel?"block":"none")},updateValue:function(e){var t=this,i=_.map(e,(function(e){var i={};for(var n in e)"text"==n||"value"==n||"alias"==n?i[n]=e[t[n+"Field"]]:"children"!==n&&(i[n]=e[n]);return t.attachItemValues.length&&(i.attach=t.attachOptions[i.value]||""),i})),n=Object.assign(this.realItems[0]||{},{expirydate:""});this.postHasAlias&&(n.alias=""),i.length&&(n=i[0],n.expirydate=this.expirydate),this.emitValueChange(n),this.emitFormValidate(n)},itemDisabled:function(e){return!!this.$disabled||(e.disabled||this.disabledItemValues.indexOf(e[this.valueField])>-1)},arrayTo2Array:function(e,t){var i=[],n=0;return e.forEach((function(e){n++,n>t&&(n=1),1==n&&i.push([]),i[i.length-1].push(e)})),i},inputChangeHandler:function(){var e=_.uniq((this.inputValue||"").split(",")),t=!0;this.inputValue=e.join(",");var i=[];dsf.deepForEach(this.realItems,(function(e){null!==e&&void 0!==e&&e.children||i.push(e.value)}),{children:"children"}),_.forEach(e,(function(e){i.includes(e)||(t=!1)})),t?this.initValue(e):(this.initValue(null),this.inputValue="")}},watch:{items:{handler:function(e,t){var i=0;e&&dsf.deepForEach(e,(function(e,t,n,a){e.uid=i++}))},immediate:!0},value:function(e){var t=e.value;this.$eventBus.$emit("changeFormEncryptLevel",t)}}}),r=s,l=(i(661),i(0)),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1054:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-date-picker",attrs:{owner:e._self,"block-class":{"ds-error-border":e.errors.length>0}},scopedSlots:e._u([{key:"simple",fn:function(){return[i("span",{attrs:{title:e.readOnlyText}},[e._v(e._s(e.readOnlyText))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",{attrs:{title:e.readOnlyText}},[e._v(e._s(e.readOnlyText))])]):e._e():i("el-date-picker",{attrs:{disabled:e.$$disabled,type:e.$chooseType,editable:!1,format:e.$timeFormat,clearable:e.clearable,"range-separator":e.rangeSeparator,"value-format":e.valueFormat,"picker-options":e.mPicker||e.pickerOptions,"default-time":e.defaultTime,"start-placeholder":e.startPlaceholder,"end-placeholder":e.endPlaceholder},on:{change:e.dateChange,focus:e.pickerHandlerFocus,blur:e.pickerHandlerBlur},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(412),r=dsf.component({name:"DsfDateIntervalPicker",mixins:[$mixins.formControl,s["a"]],ctrlCaption:"日期区间",props:{simple:{type:Boolean,default:!1},placeholder:{type:String,default:""},value:{type:Object,default:function(){return{sdate:"",edate:""}}},label:{type:String,default:"日期区间"},rangeSeparator:{type:String,default:"-"},timeFormat:{type:String,default:"yyyy-MM-dd"},chooseType:{type:String,default:"daterange"},clearable:{type:Boolean,default:!0},timeInter:{type:Array,default:function(){return["00:00:00","23:59:59"]}},formatter:{type:String,default:"dateTime^yyyy-mm-dd"},metadata:{type:Object,default:function(){return dsf.metadata.get("date-interval-meta-data")}},defaultTime:{type:[String,Array],default:function(){return["00:00:00","00:00:00"]}},mPicker:{type:Object,required:!1},startPlaceholder:{type:String,default:function(){return"开始时间"}},endPlaceholder:{type:String,default:function(){return"结束时间"}}},data:function(){return{value2:null,isFocus:!1}},watch:{value:function(e){this.initValue(e)},value2:function(e){var t,i,n={sdate:null,edate:null};if(e&&2===(null===e||void 0===e?void 0:e.length)&&e[0]&&e[1])if(n.sdate=e[0],"daterange"==this.chooseType)n.sdate=e[0].split(" ")[0]+" 00:00:00",n.edate=e[1].split(" ")[0]+" 23:59:59";else if("monthrange"==this.chooseType){n.sdate=e[0].split(" ")[0]+" 00:00:00";var a=dsf.date.parse(e[1].split(" ")[0],"yyyy-mm-dd"),s=new Date(a.getFullYear(),a.getMonth()+1,0,23,59,59);n.edate=dsf.date.format(s,"yyyy-mm-dd hh:ii:ss")}else n.edate=e[1];if("string"===typeof e&&"yearrange"==this.chooseType){n.sdate=dsf.date.format(e.split(",")[0],"yyyy-mm-dd hh:ii:ss");var r=dsf.date.format(e.split(",")[1],"yyyy"),l=new Date(r,12,0,23,59,59);n.edate=dsf.date.format(l,"yyyy-mm-dd hh:ii:ss")}n.sdate===(null===(t=this.value)||void 0===t?void 0:t.sdate)&&n.edate===(null===(i=this.value)||void 0===i?void 0:i.edate)||this.emitValueChange(n)}},computed:{$chooseType:function(){return"datetimerange_s"===this.chooseType?"datetimerange":this.chooseType},$timeFormat:function(){return"datetimerange"===this.chooseType?this.timeFormat+" HH:mm":"datetimerange_s"===this.chooseType?this.timeFormat+" HH:mm:ss":this.timeFormat},valueFormat:function(){return"yyyy-MM-dd HH:mm:ss"},readOnlyText:function(){var e=Vue.filter("proxy");if(dsf.isDef(this.value)&&"object"==dsf.type(this.value)&&""!=this.value.sdate&&""!=this.value.edate){var t=[e(this.value.sdate,this.formatter),e(this.value.edate,this.formatter)];return t=_.filter(t,(function(e){return e})),t.join(this.rangeSeparator)}return""}},created:function(){this.initValue(this.value)},methods:{initValue:function(e){var t="",i="";e&&(e.sdate&&(t=dsf.date.format(e.sdate.replace(/\-/g,"/"),"yyyy-mm-dd hh:ii:ss"),this.defaultTime[0]=t.split(" ")[1]),e.edate&&(i=dsf.date.format(e.edate.replace(/\-/g,"/"),"yyyy-mm-dd hh:ii:ss"),this.defaultTime[1]=i.split(" ")[1])),this.value2=[t,i]},pickerHandlerFocus:function(){this.isFocus||this.$dispatch("picker-focus",this.value),this.isFocus=!0},pickerHandlerBlur:function(){this.isFocus=!1,this.$dispatch("picker-blur",this.value)},dateChange:function(e){var t=this;this.isFocus=!1,null==e||""==e[0]?(this.defaultTime=["00:00:00","00:00:00"],this.$nextTick((function(){t.$dispatch("picker-blur",t.value)}))):this.$nextTick((function(){t.$dispatch("change",t.value),t.emitFormValidate(t.value)}))}}}),l=r,o=i(0),u=Object(o["a"])(l,n,a,!1,null,null,null);t["default"]=u.exports},1055:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-date-picker",attrs:{owner:e._self,"block-class":{"ds-error-border":e.errors.length>0}},scopedSlots:e._u([{key:"simple",fn:function(){return[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))])]):e._e():i("el-date-picker",e._b({ref:"datePicker",attrs:{disabled:e.$$disabled,type:e.$chooseType,editable:e.isInput,format:e.$timeFormat,clearable:e.clearable,placeholder:e.placeholder,"picker-options":e.mPicker||e.pickerOptions,"value-format":e.valueFormat},on:{focus:e.pickerShow,change:e.dateChange},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},"el-date-picker",e.pickerCtrlProps,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(412),r=dsf.component({name:"DsfDatePicker",mixins:[$mixins.formControl,s["a"]],ctrlCaption:"日期",props:{simple:{type:Boolean,default:!1},placeholder:{type:String,default:""},value:{type:String,default:""},label:{type:String,default:"日期选择"},timeFormat:{type:String,default:"yyyy-MM-dd"},chooseType:{type:String,default:"date"},clearable:{type:Boolean,default:!0},isInput:{type:Boolean,default:!1},timeInter:{type:Array,default:function(){return["00:00:00","23:59:59"]}},pickerStepType:{type:Number,default:0},pickerInitDate:{type:Number,default:null},metadata:{type:Object,default:function(){return dsf.metadata.get("date-picker-meta-data")}},formula:{type:Object,default:function(){return{formula:"",func:""}}},mPicker:{type:Object,required:!1},pickerCtrlProps:{type:Object,default:function(){return{}}}},data:function(){return{}},watch:{value:function(e,t){this.initValue(e)}},computed:{value2:{get:function(){return this.value},set:function(e){var t=e||null;this.emitValueChange(t)}},$chooseType:function(){return"datetime_s"===this.chooseType?"datetime":this.chooseType},$timeFormat:function(){return"datetime"===this.chooseType?this.timeFormat+" HH:mm":"datetime_s"===this.chooseType?this.timeFormat+" HH:mm:ss":this.timeFormat},valueFormat:function(){return"yyyy-MM-dd HH:mm:ss"}},beforeCreate:function(){},created:function(){this.initValue(this.value)},methods:{initValue:function(e){this.value2=e?dsf.date.format(e.replace(/-/g,"/"),"yyyy-mm-dd hh:ii:ss"):null},dateChange:function(){var e=this;this.$nextTick((function(){e.$dispatch("change",e.value),e.emitFormValidate(e.value)}))},pickerShow:function(){var e=this;this.picker?this.pickerStepType&&this.$nextTick((function(){e.initPicker()})):this.$nextTick((function(){if(e.picker=e.$refs.datePicker.picker,e.timeInter&&("00:00:00"!==e.timeInter[0]||"23:59:59"!==e.timeInter[1])){var t=e.picker.$el.querySelector(".el-picker-panel__footer");t.children.length>1&&(t.children[0].style.display="none")}null!==e.pickerInitDate&&(e.picker.date=new Date(e.pickerInitDate)),e.pickerStepType&&e.initPicker()}))},initPicker:function(){this.picker.currentView="year"}}}),l=r,o=i(0),u=Object(o["a"])(l,n,a,!1,null,null,null);t["default"]=u.exports},1056:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-date-picker",attrs:{owner:e._self,"block-class":{"ds-error-border":e.errors.length>0}},scopedSlots:e._u([{key:"simple",fn:function(){return[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))])]):e._e():i("ds-date-picker",{attrs:{type:e.pickerType,"period-type":e.chooseType,format:e.format,"value-format":e.valueFormat,"picker-options":e.mPicker||e.pickerOptions,disabled:e.$$disabled,clearable:e.clearable,popperClass:"ds-date-picker-panel","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(412),r=i(413),l=ELEMENT.DatePicker,o=Object(r["a"])(l),u=dsf.component({name:"DsfPeriodPicker",mixins:[$mixins.formControl,s["a"]],ctrlCaption:"季年旬",components:{DsDatePicker:o},props:{chooseType:{type:String,default:"MD"},value:{type:[String,Array,Date],default:""},range:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},mPicker:{type:Object,required:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("date-picker-meta-data")}}},data:function(){return{formats:{HY:"yyyy-MM",SS:"yyyy-MM",MD:"yyyy-MM-dd"},valueFormats:{HY:"yyyy-MM-dd HH:mm:ss",SS:"yyyy-MM-dd HH:mm:ss",MD:"yyyy-MM-dd HH:mm:ss"},val:this.value}},watch:{value:function(e,t){this.initValue(e)}},computed:{format:function(){return this.formats[this.chooseType]},valueFormat:function(){return this.valueFormats[this.chooseType]},pickerType:function(){return"MD"==this.chooseType?"date":"month"},value2:{get:function(){return this.value},set:function(e){var t=e||null;this.emitValueChange(t)}}},methods:{initValue:function(e){this.value2=e}}}),d=u,c=i(0),p=Object(c["a"])(d,n,a,!1,null,null,null);t["default"]=p.exports},1057:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-date-picker",attrs:{owner:e._self,"block-class":{"ds-error-border":e.errors.length>0}},scopedSlots:e._u([{key:"simple",fn:function(){return[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))])]):e._e():i("ds-date-picker",{attrs:{type:e.pickerType,"period-type":e.chooseType,format:e.format,"value-format":e.valueFormat,"picker-options":e.mPicker||e.pickerOptions,disabled:e.$$disabled,clearable:e.clearable,popperClass:"ds-date-picker-panel","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(8),r=i.n(s),l=i(412),o=i(413),u=ELEMENT.DatePicker,d=Object(o["a"])(u),c=dsf.component({name:"DsfPeriodIntervalPicker",mixins:[$mixins.formControl,l["a"]],ctrlCaption:"季年旬区间",components:{DsDatePicker:d},props:{chooseType:{type:String,default:"MD"},value:{type:Object,default:function(){return{sdate:"",edate:""}}},defaultTime:{type:[String,Array],default:function(){return["00:00:00","23:59:59"]}},clearable:{type:Boolean,default:!0},mPicker:{type:Object,required:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("date-interval-meta-data")}}},created:function(){this.initValue(this.value)},data:function(){return{formats:{HY:"yyyy-MM",SS:"yyyy-MM",MD:"yyyy-MM-dd"},valueFormats:{HY:"yyyy-MM-dd HH:mm:ss",SS:"yyyy-MM-dd HH:mm:ss",MD:"yyyy-MM-dd HH:mm:ss"},val:this.value,value2:null}},watch:{value:function(e,t){this.initValue(e)},value2:function(e){var t=r()(e,2),i=t[0],n=t[1],a=this.value||{},s=a.sdate,l=a.edate;n&&(n=this.handleEndDate(!0,n)),s===i&&l===n||this.emitValueChange({sdate:i,edate:n})}},computed:{format:function(){return this.formats[this.chooseType]},valueFormat:function(){return this.valueFormats[this.chooseType]},pickerType:function(){return"MD"==this.chooseType?"daterange":"monthrange"}},methods:{initValue:function(e){var t=e||{},i=t.sdate,n=void 0===i?"":i,a=t.edate,s=void 0===a?"":a;n&&(n=dsf.date.format(n.replace(/\-/g,"/"),"yyyy-mm-dd hh:ii:ss")),s&&(s=this.handleEndDate(!1,s),s=dsf.date.format(s.replace(/\-/g,"/"),"yyyy-mm-dd hh:ii:ss")),this.value2=[n,s]},handleEndDate:function(e,t){var i={MD:{1:10,11:20,21:0},SS:{1:3,4:6,7:9,10:12},HY:{1:6,7:12}},n=new Date(t),a=n.getFullYear(),s=n.getMonth()+1,l=n.getDate(),o="";if(e){var u=i[this.chooseType];if("MD"===this.chooseType){var d=u[l];o=new Date(a,0===d?s:s-1,d,23,59,59)}else o=new Date(a,u[s],0,23,59,59)}else{var c=Object.entries(i[this.chooseType]).reduce((function(e,t){var i=r()(t,2),n=i[0],a=i[1];return e[a]=n,e}),{});if("MD"===this.chooseType){var p=_.inRange(l,1,11)?1:_.inRange(l,11,21)?11:21;o=new Date(a,s-1,p)}else o=new Date(a,c[s]-1,1)}return dsf.date.format(o,"yyyy-mm-dd hh:ii:ss")}}}),p=c,f=i(0),h=Object(f["a"])(p,n,a,!1,null,null,null);t["default"]=h.exports},1058:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-date-picker",attrs:{owner:e._self,"block-class":{"ds-error-border":e.errors.length>0}},scopedSlots:e._u([{key:"simple",fn:function(){return[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly||1!==e.hourStep?!e.$$readOnly&&e.hourStep>1?i("el-time-select",{ref:"timePicker",attrs:{disabled:e.$$disabled,editable:e.isInput,clearable:e.clearable,placeholder:e.placeholder,"picker-options":e.pickerOptions,format:e.timeFormat,"value-format":e.valueFormat},on:{change:e.changeHandler},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}):e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",{attrs:{title:e._f("proxy")(e.getShowContent(),e.formatter)}},[e._v(e._s(e._f("proxy")(e.getShowContent(),e.formatter)))])]):e._e():i("el-time-picker",{ref:"timePicker",attrs:{disabled:e.$$disabled,editable:e.isInput,clearable:e.clearable,placeholder:e.placeholder,"picker-options":e.pickerOptions,format:e.timeFormat,"value-format":e.valueFormat},on:{change:e.changeHandler},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfTimePicker",mixins:[$mixins.formControl],ctrlCaption:"时间",props:{simple:{type:Boolean,default:!1},placeholder:{type:String,default:""},value:{type:String,default:""},label:{type:String,default:"时间选择"},timeFormat:{type:String,default:"HH:mm:ss"},clearable:{type:Boolean,default:!0},isInput:{type:Boolean,default:!1},timeInter:{type:Array,default:function(){return["00:00:00","23:59:59"]}},hourStep:{type:Number,default:1},metadata:{type:Object,default:function(){return dsf.metadata.get("time-picker-meta-data")}}},data:function(){return{value2:""}},watch:{value:function(e){this.initValue(e)}},computed:{pickerOptions:function(){if(this.hourStep>1){var e=this.hourStep%60,t=parseInt(this.hourStep/60);return{start:this.timeInter[0].substr(0,5),end:this.timeInter[1].substr(0,5),step:t+":"+e}}return{selectableRange:this.timeInter[0]+"-"+this.timeInter[1]}},valueFormat:function(){return"HH:mm:ss"}},created:function(){this.initValue(this.value)},methods:{changeHandler:function(){var e=this;this.emitValueChange(this.value2),this.$nextTick((function(){e.emitFormValidate(e.value),e.$dispatch("change",e.value)}))},initValue:function(e){null!==e&&void 0!==e&&""!==e&&e!==this.value2&&(this.value2=e)}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1059:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-date-picker",attrs:{owner:e._self,"block-class":{"ds-error-border":e.errors.length>0}},scopedSlots:e._u([{key:"simple",fn:function(){return[i("span",{attrs:{title:e.readOnlyText}},[e._v(e._s(e.readOnlyText))]),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",{attrs:{title:e.readOnlyText}},[e._v(e._s(e.readOnlyText))])]):e._e():i("el-time-picker",{attrs:{disabled:e.$$disabled,editable:!1,clearable:e.clearable,"range-separator":e.rangeSeparator,"value-format":e.valueFormat,"arrow-control":e.arrowControl,"start-placeholder":e.startPlaceholder,"end-placeholder":e.endPlaceholder,"is-range":"",format:e.optionFormat},on:{change:e.changeHandler},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfTimeIntervalPicker",mixins:[$mixins.formControl],ctrlCaption:"时间区间",props:{value:{type:Object,default:function(){return{stime:"",etime:""}}},label:{type:String,default:"时间区间"},startPlaceholder:{type:String,default:"开始时间"},endPlaceholder:{type:String,default:"结束时间"},rangeSeparator:{type:String,default:"-"},timeFormat:{type:String,default:"HH:mm"},clearable:{type:Boolean,default:!0},timeInter:{type:Array,default:function(){return["00:00:00","23:59:59"]}},formatter:{type:String,default:"dateTime^hh:ii"},arrowControl:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("time-interval-meta-data")}},mPicker:{type:Object,required:!1}},computed:{timeValue:{get:function(){var e,t;if(!this.value||null===(e=this.value)||void 0===e||!e.stime||null===(t=this.value)||void 0===t||!t.etime)return null;var i=this.value.stime.split(":"),n=this.value.etime.split(":"),a=this.timeFormat,s=[[(null===i||void 0===i?void 0:i[0])||"00",(null===i||void 0===i?void 0:i[1])||"00"].join(":"),[(null===n||void 0===n?void 0:n[0])||"23",(null===n||void 0===n?void 0:n[1])||"59"].join(":")];return["HH:mm:ss","HH点mm分ss秒","H点m分s秒"].includes(a)&&(s[0]+=":"+((null===i||void 0===i?void 0:i[2])||"00"),s[1]+=":"+((null===n||void 0===n?void 0:n[2])||"59")),this.timeComparison(s)},set:function(e){var t,i;if(e||(e=["",""]),(null===(t=this.value)||void 0===t?void 0:t.stime)!==e[0]||(null===(i=this.value)||void 0===i?void 0:i.etime)!==e[1]){var n=this.timeComparison(e);this.emitValueChange({stime:n[0],etime:n[1]})}}},readOnlyText:function(){var e=this.timeValue;if(!e)return"";var t=this.formatter.replace("dateTime^","");return dsf.date.format(e[0],t)+" - "+dsf.date.format(e[1],t)},valueFormat:function(){return["HH:mm:ss","HH点mm分ss秒","H点m分s秒"].includes(this.timeFormat)?"HH:mm:ss":"HH:mm"},optionFormat:function(){return"H点m分s秒"===this.timeFormat?"HH点mm分ss秒":"H点m分"===this.timeFormat?"HH点mm分":this.timeFormat}},methods:{changeHandler:function(){var e=this;this.$nextTick((function(){e.$dispatch("change",e.value),e.emitFormValidate(e.value)}))},timeComparison:function(e){var t=this,i="".concat((new Date).getFullYear(),"/").concat((new Date).getMonth()+1,"/").concat((new Date).getDate()),n=e;return _.forEach(n,(function(e,a){var s=new Date("".concat(i," ").concat(t.timeInter[a])).getTime();(0===a&&new Date("".concat(i," ").concat(e)).getTime()<s||1===a&&new Date("".concat(i," ").concat(e)).getTime()>s)&&(n[a]=t.timeInter[a])})),n}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1103:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e.isDesign?[e._v(" [修改时间] ")]:[e._v(" "+e._s(e._f("proxy")(e.getValueString,e.formatter))+" ")]]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfUpdateTime",mixins:[$mixins.formControl],ctrlCaption:"修改时间",props:{caption:{type:String,default:dsf.config.kw.updatetime},label:{type:String,default:"修改时间"},formatter:{type:String,default:"dateTime^yyyy-mm-dd hh:ii"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},visible:{type:Boolean,default:!0},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.updatetime,valueAttributes:[{name:"修改时间",code:dsf.config.kw.updatetime,type:dsf.metadata.getDataType("date"),length:"",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}},computed:{getValueString:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1104:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e.isDesign?[e._v(" [创建时间] ")]:[e._v(" "+e._s(e._f("proxy")(e.getValueString,e.formatter))+" ")]]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfCreateTime",mixins:[$mixins.formControl],ctrlCaption:"创建时间",props:{caption:{type:String,default:dsf.config.kw.createtime},label:{type:String,default:"创建时间"},simple:{type:Boolean,default:!1},formatter:{type:String,default:"dateTime^yyyy-mm-dd hh:ii"},showLabel:{type:Boolean,default:!0},visible:{type:Boolean,default:!0},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.createtime,valueAttributes:[{name:"创建时间",code:dsf.config.kw.createtime,type:dsf.metadata.getDataType("date"),length:"",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}},computed:{getValueString:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1105:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e.isDesign?[e._v(" [当前用户名] ")]:[e._v(" "+e._s(e.value)+" ")]]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfUpdateUserName",mixins:[$mixins.formControl],ctrlCaption:"修改人",props:{caption:{type:String,default:dsf.config.kw.updateusername},label:{type:String,default:"修改人"},showLabel:{type:Boolean,default:!0},simple:{type:Boolean,default:!1},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.updateusername,valueAttributes:[{name:"修改人姓名",code:dsf.config.kw.updateusername,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1106:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e.isDesign?[e._v(" [当前用户名] ")]:[e._v(" "+e._s(e.value)+" ")]]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfCreateUserName",mixins:[$mixins.formControl],ctrlCaption:"创建人",props:{caption:{type:String,default:dsf.config.kw.createusername},label:{type:String,default:"创建人"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.createusername,valueAttributes:[{name:"创建人姓名",code:dsf.config.kw.createusername,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1107:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.readOnly?e.readOnly?i("div",{staticClass:"ds-form-readonly"},[i("span",[e._v(e._s(e.value))])]):e._e():i("el-input",{class:{"ds-error-border":e.errors.length>0},attrs:{placeholder:e.placeholder,type:"text",disabled:e.disabled},on:{change:e.inputChangeHandler,blur:e.inputBlurHandler},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=dsf.component({name:"DsfOrder",mixins:[$mixins.formControl],ctrlCaption:"排序码",props:{caption:{type:String,default:dsf.config.kw.order},simple:{type:Boolean,default:!1},label:{type:String,default:"排序码"},placeholder:{type:String,default:"请输入排序编号"},showLabel:{type:Boolean,default:!0},required:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},error_tipsPosition:{type:String,default:"left"},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.order,valueAttributes:[{name:"排序码",code:dsf.config.kw.order,type:dsf.metadata.getDataType("number"),length:10,defaultValue:0,unit:null}]})}}},computed:{inputValue:{get:function(){return this.value},set:function(e){this.emitValueChange(e)}}},methods:{inputChangeHandler:function(){var e=this;this.$dispatch("change"),this.$nextTick((function(){e.emitFormValidate(e.value)}))},inputBlurHandler:function(){this.$dispatch("blur")}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1108:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e.isDesign?[e._v(" [当前用户id] ")]:[e._v(" "+e._s(e.value)+" ")]]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfUpdateUserId",mixins:[$mixins.formControl],ctrlCaption:"修改人ID",props:{caption:{type:String,default:dsf.config.kw.updateuserid},label:{type:String,default:"修改人ID"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.updateuserid,valueAttributes:[{name:"修改人ID",code:dsf.config.kw.updateuserid,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1109:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e.isDesign?[e._v(" [当前用户id] ")]:[e._v(" "+e._s(e.value)+" ")]]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfCreateUserId",mixins:[$mixins.formControl],ctrlCaption:"创建人ID",props:{caption:{type:String,default:dsf.config.kw.createuserid},label:{type:String,default:"创建人ID"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.createuserid,valueAttributes:[{name:"创建人ID",code:dsf.config.kw.createuserid,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1110:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e._v(e._s(e.setVal))]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfDeletedStatus",mixins:[$mixins.formControl],ctrlCaption:"删除状态",props:{caption:{type:String,default:dsf.config.kw.deleted},label:{type:String,default:"删除状态"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.deleted,valueAttributes:[{name:"是否删除",code:dsf.config.kw.deleted,type:dsf.metadata.getDataType("string"),length:"2",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}},computed:{setVal:function(){return Number(this.value)?"是":"否"}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1111:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-system",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))]},proxy:!0},{key:"content",fn:function(){return[e.isDesign?[e._v(" [当前部门id] ")]:[e._v(" "+e._s(e.value)+" ")]]},proxy:!0}])})},a=[],s=dsf.component({name:"DsfDeptId",mixins:[$mixins.formControl],ctrlCaption:"当前部门id",props:{caption:{type:String,default:dsf.config.kw.deptid},label:{type:String,default:"当前部门id"},simple:{type:Boolean,default:!1},showLabel:{type:Boolean,default:!0},allowPost:{type:Boolean,default:!1},metadata:{type:Object,default:function(){return dsf.metadata.get("system-meta-data",{code:dsf.config.kw.deptid,valueAttributes:[{name:"当前部门id",code:dsf.config.kw.deptid,type:dsf.metadata.getDataType("string"),length:"50",defaultValue:null,unit:null}]})}},desCopyedChangeCaption:{type:Boolean,default:!1}}}),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1142:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-control ds-form-item ds-platform-baidu-map",class:e.getCss},[e.simple&&e.$$readOnly&&!e.isDesign?[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]:[e.showLabel?i("DsfFieldLabel",{style:e.getLabelWidthStyle(),attrs:{mode:e.showDataCaptionMode,"show-icon":e.showDataCaptionIcon,trigger:e.showDataCaptionTrigger,"data-caption":e.dataCapion,"is-design":e.isDesign,owner:e._self}},[e._v(" "+e._s(e.$t(e.label))+" ")]):e._e(),i("div",{staticClass:"ds-form-block",style:e.getFormItemBlockMarginLeft()},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ds-platform-baidu-map-box",style:{width:e.width,height:e.height}},[i("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.$$readOnly,expression:"!$$readOnly"}],staticClass:"ds-platform-baidu-map-search",attrs:{"validate-event":!1,disabled:e.disabled,size:"mini",placeholder:"请输入需要搜索的地名"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:function(t){return e.doSearch()}},slot:"append"},[e._v("搜索")])],1),e.pointValue?i("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"ds-platform-baidu-map-info"},[i("div",[i("i",{staticClass:"el-icon-location"}),e._v(" "+e._s(e.pointValue.address))]),i("div",[e._v("纬度："+e._s(e.pointValue.lat))]),i("div",[e._v("经度："+e._s(e.pointValue.lng))])]):e._e(),i("div",{ref:"bdMapMain",staticClass:"ds-platform-baidu-map-main",attrs:{id:"bdMapMain"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.unedited&&(e.isDesign||e.nearPois.length),expression:"!unedited && (isDesign || nearPois.length)"}],staticClass:"ds-platform-baidu-map-near"},[i("dsf-virtual-scroll",[e._l(e.nearPois,(function(t,n){return[i("div",{key:n,staticClass:"ds-platform-baidu-map-near-poi",on:{click:function(i){return e.setPoi(t)}}},[i("div",{staticClass:"ds-platform-baidu-map-near-poi-name"},[i("span",[e._v(e._s(n+1))]),e._v(e._s(t.title))]),t.Yi?i("div",{staticClass:"ds-platform-baidu-map-near-poi-info"},[i("span",[e._v("类型：")]),e._v(e._s(t.Yi))]):e._e(),i("div",{staticClass:"ds-platform-baidu-map-near-poi-info"},[i("span",[e._v("地址：")]),e._v(e._s(t.address))]),i("div",{staticClass:"ds-platform-baidu-map-near-poi-info"},[i("span",[e._v("经度：")]),e._v(e._s(t.point.lng))]),i("div",{staticClass:"ds-platform-baidu-map-near-poi-info"},[i("span",[e._v("纬度：")]),e._v(e._s(t.point.lat))])])]}))],2)],1)],1),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))],2)]],2)},a=[],s=dsf.component({name:"DsfBaiduMap",mixins:[$mixins.formControl],ctrlCaption:"百度地图选点",props:{value:{type:Object,default:null},width:{type:String,default:"500px"},height:{type:String,default:"300px"},appkey:{type:String,default:"y0bwGfZAfzZnPjfkXDe8FHN7nzb5KHah"},formatter:{type:String,default:"textValue^address"},metadata:{type:Object,default:function(){return dsf.metadata.get("map-meta-data")}}},data:function(){return{loading:!1,searchText:"",nearPois:[]}},computed:{pointValue:function(){if(!this.value)return null;var e=this.value,t=e.title,i=e.address,n=e.lng,a=e.lat;return t||i||n||a?{title:t,address:i,lng:n,lat:a}:null},unedited:function(){return this.$$readOnly||this.$$disabled}},watch:{unedited:function(e){e?this.removeEvent():this.initEvent()},pointValue:{handler:function(e){if(this.map)if(e){var t=e.lng,i=e.lat;this.map.panTo(new BMap.Point(t,i)),this.updateMaker(e)}else this.updateMaker(null)},deep:!0}},mounted:function(){var e=this;if(!this.isDesign)if(window.BMap)this.init(),this.unedited||this.initEvent();else{this.loading=!0;var t=document.write;document.write=function(t){e.$http.importFiles([[$(t).get(0).src,".js"]]).then((function(){e.init(),e.unedited||e.initEvent()})).catch((function(e){dsf.layer.message("加载百度地图api文件失败",!1),dsf.error(e)}))},this.$http.importFiles([["".concat(window.location.protocol,"//api.map.baidu.com/api?v=3.0&ak=").concat(this.appkey),".js"]]).then((function(){document.write=t})).catch((function(e){dsf.layer.message("加载百度地图api文件失败",!1),dsf.error(e)}))}},methods:{init:function(){var e=new BMap.Map(this.$refs.bdMapMain,{enableMapClick:!1});if(this.map=e,this.pointValue){var t=this.pointValue,i=t.lng,n=t.lat;e.centerAndZoom(new BMap.Point(i,n),15)}else e.centerAndZoom(new BMap.Point(116.404,39.915),15);e.enableScrollWheelZoom(!0),e.addControl(new BMap.ScaleControl),e.addControl(new BMap.NavigationControl),e.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP]})),e.addControl(new BMap.GeolocationControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,offset:new BMap.Size(10,10),showAddressBar:!1})),this.pointValue&&this.updateMaker(this.pointValue),this.loading=!1},initEvent:function(){this.map&&(this.map.addEventListener("click",this.mapClick),this.LocalSearch=new BMap.LocalSearch(this.map,{pageCapacity:20,onSearchComplete:this.searchResult}),this.Geocoder=new BMap.Geocoder({extensions_town:!0}))},removeEvent:function(){var e;null===(e=this.map)||void 0===e||e.removeEventListener("click",this.mapClick),this.LocalSearch=null,this.geocoder=null},geolocation:function(){var e=this;this.loading=!0;var t=new BMap.Geolocation;t.getCurrentPosition((function(i){if(t.getStatus()==BMAP_STATUS_SUCCESS){var n=new BMap.Marker(i.point);e.map.addOverlay(n),e.map.panTo(i.point),alert("您的位置："+i.point.lng+","+i.point.lat)}else alert("failed"+t.getStatus());e.loading=!1}))},ipLocation:function(){var e=this;this.loading=!0;var t=new BMap.LocalCity;t.get((function(t){e.map.centerAndZoom(new BMap.Point(t.center.lng,t.center.lat),15),e.loading=!1}))},updateMaker:function(e){if(!e)return this.map.removeOverlay(this.marker),void(this.marker=null);var t=e.lng,i=e.lat,n=e.title,a=e.address,s=new BMap.Point(t,i),r=a;n&&(r="".concat(n,"\n地址：").concat(a)),this.marker?(this.marker.setPosition(s),this.marker.setTitle(r)):(this.marker=new BMap.Marker(s,{title:r}),this.map.addOverlay(this.marker))},mapClick:function(e){var t=e.point;this.nearPois=[],this.updateValue(null),this.point2address(t)},doSearch:function(){0!==this.searchText.length?(this.loading=!0,this.LocalSearch.search(this.searchText)):dsf.layer.message("搜索地址不能为空",!1)},searchResult:function(e){this.LocalSearch.getStatus()==BMAP_STATUS_SUCCESS?0===e.getCurrentNumPois()?(this.nearPois=[],"string"===dsf.type(e.keyword)&&(this.updateMaker(null),this.updateValue(null))):this.setPoi(e.getPoi(0)):dsf.layer.message("未搜索到地点信息",!1),this.loading=!1},point2address:function(e){var t=this;this.loading=!0,this.Geocoder.getLocation(e,(function(i){if(i){var n=i.address,a=i.surroundingPois;t.searchText=n,t.nearPois=a,t.setPoi({address:n,point:e})}else dsf.layer.message("坐标解析失败",!1);t.loading=!1}),{numPois:30,poiRadius:2e3})},address2point:function(e,t){var i=this;this.Geocoder.getPoint(t,(function(e){var n=e.lng,a=e.lat;point?(i.updateMaker({lng:n,lat:a,address:t}),i.updateValue({lng:n,lat:a,address:t})):dsf.layer.message("地址解析失败",!1)}),e)},setPoi:function(e){var t=e.title,i=void 0===t?"":t,n=e.address,a=e.point,s=a.lng,r=a.lat;this.map.panTo(new BMap.Point(s,r)),this.updateMaker({lng:s,lat:r,title:i,address:n}),this.updateValue({title:i,lng:s,lat:r,address:n})},updateValue:function(e){var t=this,i=null;if(e){var n=e.title,a=void 0===n?"":n,s=e.address,r=e.lng,l=e.lat;i={title:a,address:s,lng:r,lat:l},this.emitValueChange(i)}else this.updateMaker(null),this.emitValueChange(null);this.$nextTick((function(){t.emitFormValidate(i)}))}}}),r=s,l=(i(721),i(0)),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1282:function(e,t,i){"use strict";i.r(t);var n,a,s=dsf.component((function(){var e=dsf.getComponentOptions($components.platform.DsfDataChoice);return{name:"DsfOuaSelect",mixins:[e],ctrlCaption:"部门人员",props:{dialogUrl:{type:String,default:"dsfa/oua/select"},dialogTitle:{type:String,default:"部门人员选择"},dataConfig:{type:Array,default:function(){return[]}},sort:{type:Boolean,default:!1,desc:"是否可排序"}},methods:{getChoiceParams:function(){return{slots:this.dataConfig,sort:this.sort,maxLength:this.maxTags}}}}})),r=s,l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},1286:function(e,t,i){"use strict";i.r(t);var n=i(7),a=i.n(n),s=i(2),r=i.n(s),l={name:"ItemLayout",functional:!0,props:{direction:{type:String,default:"horizontal"},level:{type:[String,Number],default:null}},render:function(e,t){return d(e,t)}};function o(e){var t=[];return"horizontal"==e.props.direction?t.push("horizontal"):["2","3","4","5","6","7","8"].indexOf(e.props.direction)>=0?t.push("horizontal-"+e.props.direction):"vertical"==e.props.direction&&t.push("vertical"),e.props.level&&t.push("indentation-"+e.props.level),t}function u(e,t){var i,n=[];return(dsf.isUnDef(e.parent.owner.attachWidth)||""==e.parent.owner.attachWidth)&&(null===t||void 0===t?void 0:t.key)in(null===e||void 0===e||null===(i=e.parent)||void 0===i||null===(i=i.owner)||void 0===i?void 0:i.attachOptions)&&n.push("ds-items-group-layout-item-attach-input"),n}function d(e,t){var i,n,a=(null===t||void 0===t||null===(i=t.scopedSlots)||void 0===i||null===(n=i.default)||void 0===n?void 0:n.call(i))||[];return e("div",{class:["ds-items-group-layout"].concat(r()(o(t)))},[a.map((function(i){return c(e,t,i)}))])}function c(e,t,i){return e("div",{class:["ds-items-group-layout-item"].concat(r()(u(t,i)))},[i])}var p={name:"DeepLoopItem",props:{direction:{type:String,default:"horizontal"},level:{type:Number,default:0},items:{type:Array,default:[]},owner:{type:Object,default:function(){return null}},tag:{type:String,default:"el-checkbox"}},components:{itemLayout:l},render:function(e){var t=this,i=this.owner,n=i.valueField,s=i.optionsTextField,r=i.getLabelText,l=i.attachOptions,o=i.attachWidth,u=i.itemDisabled,d=i.border,c=i.setAttach,p=i.needTipsOptions,f=i.placeholder,h=_.map(this.items,(function(i,h){var m=p[i[n]]||null;m&&(m=e("el-tooltip",{attrs:{placement:"top",effect:"light"}},[e("div",{slot:"content",style:"white-space: pre"},[m]),e("i",a()([{class:"el-icon-question",style:"margin-left: 5px"},{on:{click:function(e){return e.stopPropagation()}}}]))]));var v=i.children||[];if(0==v.length){var g=null;return t.$scopedSlots["append-input"]?g=t.$scopedSlots["append-input"]():dsf.isDef(l[i[n]])&&(g=e("el-input",{attrs:{disabled:u(i),value:l[i[n]],size:"small",placeholder:f},staticClass:"ds-checkbox-input",class:{"is-bordered":d},style:{width:o},on:{input:function(e){c(i[n],e)}}})),e("div",{class:"ds-items-group-layout-item-wrap",key:h},[e(t.tag,{attrs:{label:i[n],title:i[s],"check-uid":i.uid,border:d,disabled:u(i)}},[e("span",a()([{},{domProps:{innerHTML:r(i,h)}}])),m]),g])}return e("div",{key:h},[e("span",{class:"ds-items-group-layout-has-children"},[r(i,h)," ",m]),e("deep-loop-item",{attrs:{tag:t.tag,direction:"vertical",level:t.level+1,owner:t.owner,items:v}})])}));return e("item-layout",{attrs:{level:this.level,direction:this.direction}},[h])}};t["default"]=p},395:function(module,__webpack_exports__,__webpack_require__){"use strict";var monacoLoader=__webpack_require__(66);__webpack_exports__["a"]={name:"MonacoEditor",props:{width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"},readOnly:{type:Boolean,default:!1},code:{type:String,default:""},srcPath:{type:String,default:""},language:{type:String,default:"javascript"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:function(){}},changeThrottle:{type:Number,default:0}},data:function(){return this.completionItemProvider=null,{defaults:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1,glyphMargin:!0}}},computed:{style:function(){var e=this.width,t=this.height,i=-1!==e.toString().indexOf("%")?e:"".concat(e,"px"),n=-1!==t.toString().indexOf("%")?t:"".concat(t,"px");return{width:i,height:n}},editorOptions:function(){return Object.assign({},this.defaults,this.options,{language:this.language,theme:this.theme,wrappingColumn:0,wrappingIndent:"indent",autoIndent:"keep",insertSpaces:!0,tabSize:2,readOnly:this.readOnly})}},mounted:function(){this.fetchEditor()},destroyed:function(){this.destroyMonaco()},methods:{getContent:function(){return this.editor.getValue()},setContent:function(e){this.editor&&this.editor.setValue(e)},editorHasLoaded:function(e,t){var i=this;this.editor=e,this.monaco=t,this.editor.onDidChangeModelContent((function(t){return i.codeChangeHandler(e,t)})),this.editor.onDidBlurEditorText((function(t){return i.codeBlurHandler(e,t)})),this.$emit("mounted",e)},codeChangeHandler:function(e){this.codeChangeEmitter||(this.codeChangeEmitter=_.debounce((function(e){this.$emit("codeChange",e)}),this.changeThrottle)),this.codeChangeEmitter(e)},codeBlurHandler:function(e){this.$emit("blur",e)},fetchEditor:function(){monacoLoader.load(this.srcPath,this.createMonaco)},createMonaco:function createMonaco(){var _this2=this,isDs=!1,isDSFContext=!1;this.editor=window.monaco.editor.create(this.$el,this.editorOptions),this.editor.setValue(this.code||""),this.editorHasLoaded(this.editor,window.monaco),["javascript"].map((function(item){_this2.completionItemProvider=window.monaco.languages.registerCompletionItemProvider(item,{provideCompletionItems:function provideCompletionItems(model,position){var line=position.lineNumber,content=model.getLineContent(line);if(isDs=content.match(/\bds$/g),isDs)return{suggestions:[{label:"dsf",kind:window.monaco.languages.CompletionItemKind["Function"],insertText:"dsf",detail:""}]};if(isDSFContext=content.match(/\bdsf(\.|\.([$a-zA-Z_][$a-zA-Z0-9_]*)\.)$/g),isDSFContext){var kinds=window.monaco.languages.CompletionItemKind,arr=[],obj=eval(isDSFContext[0].substr(0,isDSFContext[0].length-1));if(obj){for(var k in obj)arr.push({label:k,kind:"function"==dsf.type(obj[k])?kinds["Function"]:kinds["Module"],insertText:k,detail:""});return{suggestions:arr}}return{suggestions:arr}}},triggerCharacters:["."]})})),this.editor.onKeyDown((function(e){e.keyCode===window.monaco.KeyCode.KeyS&&(dsf.client.isMac()?e.metaKey:e.ctrlKey)&&(e.preventDefault(),_this2.$emit("saveCode"))}))},insertContent:function(e){if(this.editor){var t=this.editor.getSelection(),i=new monaco.Range(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),n={range:i,text:e,forceMoveMarkers:!0};this.editor.executeEdits("",[n]),this.editor.focus()}},destroyMonaco:function(){"undefined"!==typeof this.editor&&this.editor.dispose(),this.completionItemProvider&&this.completionItemProvider.dispose()},layout:function(){var e,t;null===this||void 0===this||null===(e=this.editor)||void 0===e||null===(t=e.layout)||void 0===t||t.call(e)}}}},412:function(e,t,i){"use strict";t["a"]={props:{selectStartType:{type:Number,default:0},selectEndType:{type:Number,default:0},selectStartDate:{type:Number,default:Date.now()},selectEndDate:{type:Number,default:Date.now()},selectStartDateByDays:{type:Number,default:0},selectEndDateByDays:{type:Number,default:0},selectStartDateByMonths:{type:Number,default:0},selectEndDateByMonths:{type:Number,default:0},selectStartDateByYears:{type:Number,default:0},selectEndDateByYears:{type:Number,default:0},formatter:{type:String,default:"dateTime^yyyy-mm-dd"}},computed:{pickerOptions:function(){var e=this,t={disabledDate:function(t){return t=new Date(dsf.date.format(t,"yyyy/mm/dd 00:00:00")),e.pickerStartTime(t)||e.pickerEndTime(t)}};return!this.timeInter||"00:00:00"===this.timeInter[0]&&"23:59:59"===this.timeInter[1]||(t.selectableRange=this.timeInter[0]+"-"+this.timeInter[1]),t}},methods:{getDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/mm/dd 00:00:00";return void 0===e&&(e=new Date),new Date(dsf.date.format(e,t))},pickerStartTime:function(e){if(!this.selectStartType)return!1;if(1===this.selectStartType){var t=this.getDate();return e.getTime()<t.getTime()}if(2===this.selectStartType){var i=this.getDate(this.selectStartDate);return e.getTime()<i.getTime()}if(3===this.selectStartType){var n=this.getDate();return n=this.getDate(n.getTime()+864e5*this.selectStartDateByDays),e.getTime()<n.getTime()}if(4===this.selectStartType){var a=new Date,s=a.getMonth()+this.selectStartDateByMonths+1,r=a.getFullYear()+Math.floor(s/12)+"/";return s%=12,s=1===s.length?"0"+s:s,a=new Date(r+s+"/01 00:00:00"),e.getTime()<a.getTime()}if(5===this.selectStartType){var l=new Date,o=l.getFullYear()+this.selectStartDateByYears;return l=new Date(o+"/01/01 00:00:00"),e.getTime()<l.getTime()}return!1},pickerEndTime:function(e){if(!this.selectEndType)return!1;if(1===this.selectEndType){var t=this.getDate();return e.getTime()>t.getTime()}if(2===this.selectEndType){var i=this.getDate(this.selectEndDate);return e.getTime()>i.getTime()}if(3===this.selectEndType){var n=this.getDate();return n=this.getDate(n.getTime()+864e5*this.selectEndDateByDays),e.getTime()>n.getTime()}if(4===this.selectEndType){var a=new Date,s=a.getMonth()+this.selectEndDateByMonths+2,r=a.getFullYear()+Math.floor(s/12)+"/";return s%=12,s=1===s.length?"0"+s:s,a=new Date(r+s+"/01 00:00:00"),a.setTime(a.getTime()-864e5),e.getTime()>a.getTime()}if(5===this.selectEndType){var l=new Date,o=l.getFullYear()+this.selectEndDateByYears;return l=new Date(o+"/12/31 00:00:00"),e.getTime()>l.getTime()}return!1}}}},413:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i(42),a=i(17),s=["early","middle","late"],r={quarter:{"01":"一","04":"二","07":"三",10:"四"},halfYear:{"01":"上","07":"下"},meadow:{"01":"上",11:"中",21:"下"}},l=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()},o=function(e,t){var i=e.target;if("A"===i.tagName&&(i=i.parentNode.parentNode),"DIV"===i.tagName&&(i=i.parentNode),"TD"===i.tagName&&!Object(n["a"])(i,"disabled")){var a=i.cellIndex,s=a*t,r=this.getMonthOfCell(a);"range"===this.selectionMode?this.rangeState.selecting?(r>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:r}):this.$emit("pick",{minDate:r,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:r,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",s)}},u=function(e,t){var i=this.date.getFullYear();return new Date(i,e*t,1)},d=function(e,t,i){e=l(new Date(e)),t=t?l(new Date(t)):e;var n=[Math.min(e,t),Math.max(e,t)];e=n[0],t=n[1];for(var a=this.rows,s=0,r=a.length;s<r;s++)for(var o=a[s],u=0,d=o.length;u<d;u++)if(!this.showWeekNumber||0!==u){var c=o[u],p=this.date.getFullYear(),f=10===i?this.date.getMonth():u*i,h=10===i?u*i+1:1,m=l(new Date(p,f,h));c.inRange=e&&m>=e&&m<=t,c.start=e&&m===e,c.end=t&&m===t}this.$forceUpdate()},c=function(e,t){for(var i=this,n=[[]],s=this.disabledDate,r=[],o=l(new Date),u=n[0],d=function(){var t=u[c];t||(t={row:0,column:c,type:"normal",inRange:!1,start:!1,end:!1}),t.type="normal";var n=c*e,d=new Date(i.date.getFullYear(),n,1).getTime();t.inRange=d>=l(new Date(i.minDate))&&d<=l(new Date(i.maxDate)),t.start=i.minDate&&d===l(new Date(i.minDate)),t.end=i.maxDate&&d===l(new Date(i.maxDate));var p=d===o;p&&(t.type="today"),t.text=c;var f=new Date(d);t.disabled="function"===typeof s&&s(f),t.selected=Object(a["a"])(r,(function(e){return e.getTime()===f.getTime()})),i.$set(u,c,t)},c=0;c<t;c++)d();return n},p=new Date,f=p.getFullYear(),h=Math.ceil((p.getMonth()+1)/3),m=Math.ceil((p.getMonth()+1)/6),v=p.getMonth(),g=p.getDate();function y(e){var t=e.mixins[0].computed.displayValue;return{name:e.name,props:{periodType:String},extends:e,created:function(){this.getPanel()},computed:{displayValue:function(){var e=this,i=t.call(this),n=!1;/range/.test(this.type)&&(n=!0),Array.isArray(i)||(i=[i]);var a=i;return a=i.map((function(t){if(!t)return"";var i=[],n=t.split("-");return i="zh_CN"===e.$i18n.locale?"MD"===e.periodType?[n[0],n[1],r.meadow[n[2]]]:"SS"===e.periodType?[n[0],r.quarter[n[1]]]:[n[0],r.halfYear[n[1]]]:n,e.$t("platform.datePicker.".concat(e.periodType,"Text"),i)})),n?a:a[0]}},watch:{periodType:"updatePanel"},methods:{updatePanel:function(){var t=!1;this.picker&&(this.unmountPicker(),this.picker=null,t=!0),e.watch.type.call(this,this.type),this.getPanel(),t&&this.mountPicker()},getPanel:function(){"MD"==this.periodType?x.call(this):"SS"==this.periodType?b.call(this):"HY"==this.periodType&&C.call(this)}}}}function x(){var e=this.panel.components.DateTable;if(null!==e&&void 0!==e&&e.computed){var t=e.render,i={extends:e,computed:{rows:function(){for(var e=[],t=l(new Date(this.maxDate)),i=l(new Date(this.minDate)),n=0;n<3;n++){var a=new Date(this.year,this.month,10*n+1).getTime(),r=new Date(a),o={disabled:"function"===typeof this.disabledDate&&this.disabledDate(r),customClass:"function"===typeof this.cellClassName&&this.cellClassName(r),text:this.translate(s[n]),type:this.isToday(n),inRange:this.inRange(a,t,i),start:i&&a===i,end:t&&a===t,selected:a===i||a===t};e.push(o)}return[e]}},methods:{isToday:function(e){var t=new Date(this.startDate),i=[t.getFullYear(),t.getMonth()+1];if(i[0]===f&&i[1]===v){var n=-1;return n=_.inRange(g,0,11)?0:_.inRange(g,11,21)?1:2,e===n?"today":"normal"}return"normal"},inRange:function(e,t,i){return i&&e>=i&&e<=t},getDateOfCell:function(e,t){return new Date(this.year,this.month,10*t+1)},handleClick:function(e){var t,i=e.target,n=i.nodeName.toLowerCase(),a="td"===n?i.cellIndex:null===(t=$(i).parents("td")[0])||void 0===t?void 0:t.cellIndex;if(dsf.isNumber(a)){var s;s=0==a?1:1==a?11:21;var r=new Date(this.year,this.month,s);"range"===this.selectionMode?this.rangeState.selecting?(r>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:r}):this.$emit("pick",{minDate:r,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:r,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",r)}},markRange:function(e,t){d.call(this,e,t,10)},cellMatchesDate:function(e,t){var i=s.indexOf(e.text),n=new Date(t);return this.year===n.getFullYear()&&this.month===n.getMonth()&&Number(10*i+1)===n.getDate()},translate:function(e){return this.$t("platform.datePicker.".concat(e))}},render:function(e){var i=t.call(this,e);return i.children[0].children[0].children=[],i.children[0].children[1].children.splice(3,8),i}};this.panel={extends:this.panel,components:{DateTable:i}}}}function b(){var e=this.panel.components.MonthTable;if(null!==e&&void 0!==e&&e.computed){var t=e.methods.getCellStyle,i={extends:e,data:function(){return{months:["firstQuarter","secondQuarter","thirdQuarter","fourthQuarter"]}},computed:{rows:function(){var e=c.call(this,3,4);return e}},methods:{getCellStyle:function(e){var i=t.call(this,e),n=new Date(this.value),a=[n.getFullYear(),n.getMonth()],s=a[0],r=a[1],l=new Date(this.date).getFullYear();return i.today=this.date.getFullYear()==f&&h==e.text+1,i.current=s===l&&r===3*e.text,i},markRange:function(e,t){d.call(this,e,t,3)},getMonthOfCell:function(e){return u.call(this,e,3)},handleMonthTableClick:function(e){o.call(this,e,3)},t:function(e){return this.$t("platform.datePicker.".concat(e.split(".")[3]))}}};this.panel={extends:this.panel,components:{MonthTable:i}}}}function C(){var e=this.panel.components.MonthTable;if(null!==e&&void 0!==e&&e.computed){var t=e.methods.getCellStyle,i=e.render,n={extends:e,computed:{rows:function(){return c.call(this,6,2)}},data:function(){return{months:["firstHalf","secondHalf"]}},methods:{getCellStyle:function(e){var i=t.call(this,e),n=new Date(this.value),a=[n.getFullYear(),n.getMonth()],s=a[0],r=a[1],l=new Date(this.date).getFullYear();return i.today=this.date.getFullYear()==f&&m==e.text+1,i.current=s===l&&r===6*e.text,i},markRange:function(e,t){d.call(this,e,t,6)},getMonthOfCell:function(e){return u.call(this,e,6)},handleMonthTableClick:function(e){o.call(this,e,6)},t:function(e){return this.$t("platform.datePicker.".concat(e.split(".")[3]))}},render:function(e){var t=i.call(this,e);return t.children[0].children[0].children.splice(2,4),t}};this.panel={extends:this.panel,components:{MonthTable:n}}}}},511:function(e,t,i){var n=i(647);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("96413ff4",n,!0,{sourceMap:!1,shadowMode:!1})},512:function(e,t,i){var n=i(649);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("68de75b0",n,!0,{sourceMap:!1,shadowMode:!1})},513:function(e,t,i){var n=i(651);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("0bb48666",n,!0,{sourceMap:!1,shadowMode:!1})},514:function(e,t,i){var n=i(658);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("6d280492",n,!0,{sourceMap:!1,shadowMode:!1})},515:function(e,t,i){var n=i(660);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("533b59bc",n,!0,{sourceMap:!1,shadowMode:!1})},516:function(e,t,i){var n=i(662);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("e5a88f08",n,!0,{sourceMap:!1,shadowMode:!1})},543:function(e,t,i){var n=i(722);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("12d0aea0",n,!0,{sourceMap:!1,shadowMode:!1})},550:function(e,t,i){var n=i(740);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("5020ad6a",n,!0,{sourceMap:!1,shadowMode:!1})},612:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:e.style})},a=[],s=i(395),r=s["a"],l=i(0),o=Object(l["a"])(r,n,a,!1,null,null,null);t["default"]=o.exports},646:function(e,t,i){"use strict";i(511)},647:function(e,t,i){"use strict";i.r(t)},648:function(e,t,i){"use strict";i(512)},649:function(e,t,i){"use strict";i.r(t)},650:function(e,t,i){"use strict";i(513)},651:function(e,t,i){"use strict";i.r(t)},652:function(e,t,i){var n=i(653);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("7d76dbb8",n,!0,{sourceMap:!1,shadowMode:!1})},653:function(e,t,i){"use strict";i.r(t)},654:function(e,t,i){var n=i(655);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i(19).default;a("7413a862",n,!0,{sourceMap:!1,shadowMode:!1})},655:function(e,t,i){"use strict";i.r(t)},656:function(e,t,i){"use strict";i.r(t),t["default"]={name:"selectItem",functional:!0,props:{item:{type:Object,required:!0},show:{type:Boolean,default:!0}},render:function(e,t){var i,n=t.props,a=n.item[t.parent.childrenField]&&n.item[t.parent.childrenField].length,s=t.parent._formatSelectedText(n.item),r=n.item[t.parent.valueField],l=n.item["disabled"];return a?e("el-option-group",{attrs:{label:s,disabled:l,value:r,isSelect:!0}},[e("template",{slot:"label"},[t.parent._formatOptionText(n.item)]),_.map((null===n||void 0===n||null===(i=n.item)||void 0===i?void 0:i.children)||[],(function(i){return e("select-item",{key:i[t.parent.valueField],attrs:{item:i}})}))]):e("el-option",{attrs:{show:n.show,label:s,value:r,disabled:l}},[t.parent._formatOptionText(n.item)])}}},657:function(e,t,i){"use strict";i(514)},658:function(e,t,i){"use strict";i.r(t)},659:function(e,t,i){"use strict";i(515)},660:function(e,t,i){"use strict";i.r(t)},661:function(e,t,i){"use strict";i(516)},662:function(e,t,i){"use strict";i.r(t)},721:function(e,t,i){"use strict";i(543)},722:function(e,t,i){"use strict";i.r(t)},739:function(e,t,i){"use strict";i(550)},740:function(e,t,i){"use strict";i.r(t)},936:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-textbox-step-input"},e._l(e.setpTemplateList,(function(t){return i("span",{key:t.index,staticClass:"ds-textbox-step-warp"},["input"==t.type?i("div",{staticClass:"el-input"},[i("input",{ref:"input",refInFor:!0,staticClass:"el-input__inner",class:{"is-disabled":e.disabled},attrs:{"char-index":t.index,num:t.num,maxlength:1,type:e.inputType,disabled:e.disabled,autocomplete:"off"},domProps:{value:e.val[t.index]},on:{input:function(i){return e.onInput(i,t)},focus:function(i){return e.onFocus(i,t.num)},blur:function(i){return e.onBlur(i,t.num)},compositionstart:function(i){return e.onCompositionstart(i,t.num)},compositionend:function(i){return e.onCompositionend(i,t.num)}}})]):i("span",{staticClass:"ds-textbox-step-warp",attrs:{split:""}},[e._v(e._s(t.text))])])})),0)},a=[],s=i(2),r=i.n(s),l=" ",o={name:"DsfStepTextbox",model:{prop:"value",event:"model-value-mutation"},props:{value:{default:""},inputType:{default:"text"},setpInputTemp:{default:"x"},setpTemplate:{default:"xxxx-xxxx"},inputBefore:{type:Function,default:null},disabled:{default:!1},splitCharInValue:{type:Boolean,default:!1}},data:function(){return{isFocus:!1,isBlur:!1,val:[],isStartComposition:!1}},computed:{splitArr:function(){var e=this,t=[],i=0;return this.setpTemplateList.forEach((function(n,a){"split"==n.type&&(t.push([a-i,n.text]),i=a+1),a>=e.setpTemplateList.length-1&&t.push([e.setpTemplateList.length-i])})),t},splitChars:function(){var e=[];return this.setpTemplateList.forEach((function(t,i){"split"==t.type&&e.push(t.text)})),e},setpTemplateList:function(){for(var e=this.setpTemplate,t=[],i=0,n=0;n<e.length;n++){var a={index:n};e[n]==this.setpInputTemp?(a.type="input",a.num=i++):(a.type="split",a.text=e[n]),this.splitCharInValue||(a.index=a.num),t.push(a)}return t},inputNums:function(){return this.setpTemplateList.filter((function(e){return"input"==e.type})).length}},methods:{formatVal:function(e){var t=[],i=e;if(this.splitCharInValue){_.each(this.splitChars,(function(e){i=i.replaceAll(e,"")}));for(var n=i.split(""),a=0;a<this.splitArr.length;a++){var s=this.splitArr[a],r=s[0];while(r){var l=n.shift()||"";t.push(l),r--}s[1]&&t.push(s[1])}}else for(var o=0;o<i.length;o++)t.push(i[o]);return t.join("")},onCompositionstart:function(e){this.isStartComposition=!0},onCompositionend:function(e){var t=this;if(0!=this.isStartComposition)var i=window.requestAnimationFrame((function(){window.cancelAnimationFrame(i),t.isStartComposition=!1;var n=e.target,a=document.createEvent("HTMLEvents");a.initEvent("input",!0,!0),a.data=e.data,n.dispatchEvent(a)}))},onInput:function(e,t){var i=this;if(!this.isStartComposition){var n,a=e.data,s=1,o=t.num;a&&(s=a.length,n=this.getInputDom(o+s)),a==l&&(a=""),dsf.isFunction(this.inputBefore)&&(a=this.inputBefore(a));var u=r()(this.val);u[t.index]=a,this.$set(this,"val",u),this.valueChange(u),this.$nextTick((function(){i.inputAutoFocus(n)}))}},onFocus:function(e,t){this.$emit("focus"),this.isFocus=!0,this.isBlur=!1},onBlur:function(e,t){var i=this;this.isBlur=!0;var n=window.requestAnimationFrame((function(){window.cancelAnimationFrame(n),i.isBlur&&i.$emit("blur")}))},getInputDom:function(e){return this.$refs.input[e]},valueChange:function(e){var t=this,i=[];this.splitCharInValue?_.each(this.setpTemplateList,(function(e,n){var a=e.index;i.push(t.val[a]||l)})):_.each(this.setpTemplateList,(function(e,n){if("input"==e.type){var a=e.index;i.push(t.val[a]||l)}})),i=i.join(""),i.trim()||(i=""),this.$emit("model-value-mutation",i),this.$emit("change",i)},inputAutoFocus:function(e){var t;null===e||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)}},watch:{value:{handler:function(e){var t=this,i=[];e=this.formatVal(e),this.setpTemplateList.forEach((function(n,a){var s,r=n.index,o=(null===(s=e)||void 0===s?void 0:s[r])||"";o==l&&(o=""),(t.splitCharInValue||"input"==n.type)&&i.push(o)})),this.$set(this,"val",i)}},setpTemplateList:{handler:function(e,t){var i=this;_.each(this.setpTemplateList,(function(e,t){var n=e.index;if(dsf.isUnDef(i.val[n]))if("split"==e.type&&i.splitCharInValue){var a=e.text;i.$set(i.val,n,a)}else i.$set(i.val,n,"")}))},immediate:!0}},created:function(){},mounted:function(){for(var e=this,t=this.$refs.input,i=function(i){var n=$(t[i]),a=~~n.attr("num"),s=n.attr("char-index");n.on("keydown",(function(t){if(8==t.keyCode){if(!e.val[s]){var n=e.getInputDom(i-1);e.inputAutoFocus(n)}}else if(37==t.keyCode||39==t.keyCode){t.preventDefault();var a=37==t.keyCode?-1:1,r=e.getInputDom(i+a);r&&e.inputAutoFocus(r)}})).on("paste",(function(t){t.originalEvent.preventDefault();var i=t.originalEvent.clipboardData.getData("text"),n=r()(e.val),s=Math.min(e.inputNums-a,i.length);n.splice.apply(n,[a,s].concat(r()(i.slice(0,s).split("")))),e.$set(e,"val",n),e.valueChange(n),setTimeout((function(){var t=e.getInputDom(a+s);e.inputAutoFocus(t)}))}))},n=0;n<t.length;n++)i(n)},beforeDestroy:function(){for(var e=this.$refs.input,t=0;t<e.length;t++){var i=$(e[t]);i.off("keydown").off("paste")}}},u=o,d=i(0),c=Object(d["a"])(u,n,a,!1,null,null,null);t["default"]=c.exports},981:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-textbox",class:{"ds-textbox__has-prefix":!e.$$readOnly&&e.valuePrefix,"ds-textbox-append-block__none":e.append&&!e.isAppendGroup&&!e.isAppendBackgroundColor},attrs:{owner:e._self,"allow-enter-focus":""},scopedSlots:e._u([e.inClient?{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}:null,e.inClient?{key:"content",fn:function(){return[e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},"DsfTextProxy",e._self.$props,!1))],1):["step"!=e.inputMode?[i("div",{staticClass:"el-input",class:{"ds-error-border":e.errors.length>0,"is-disabled":e.$$disabled,"el-input-group":e.isPrefixGroup||e.isAppendGroup||e.append||e.valuePrefix,"el-input-group--prepend":e.isPrefixGroup,"el-input-group--append":e.isAppendGroup||e.append,"el-input--suffix":e.isSuffix,"el-input--prefix":e.isPrefix}},[e.valuePrefix?i("div",{staticClass:"ds-textbox-value-prefix"},[e._v(e._s(e.valuePrefix))]):e._e(),e.isPrefixGroup?i("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"checkbox"===e.$inputType?i("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",staticClass:"el-input__inner",style:{"ime-mode":e.isNumberInput?"disabled":"auto"},attrs:{disabled:e.$$disabled,placeholder:e.$t(e.placeholder),type:"checkbox"},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{change:function(t){var i=e.inputValue,n=t.target,a=!!n.checked;if(Array.isArray(i)){var s=null,r=e._i(i,s);n.checked?r<0&&(e.inputValue=i.concat([s])):r>-1&&(e.inputValue=i.slice(0,r).concat(i.slice(r+1)))}else e.inputValue=a}}},e.inputEventListener)):"radio"===e.$inputType?i("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",staticClass:"el-input__inner",style:{"ime-mode":e.isNumberInput?"disabled":"auto"},attrs:{disabled:e.$$disabled,placeholder:e.$t(e.placeholder),type:"radio"},domProps:{checked:e._q(e.inputValue,null)},on:{change:function(t){e.inputValue=null}}},e.inputEventListener)):i("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"input",staticClass:"el-input__inner",style:{"ime-mode":e.isNumberInput?"disabled":"auto"},attrs:{disabled:e.$$disabled,placeholder:e.$t(e.placeholder),type:e.$inputType},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}},e.inputEventListener)),e.isPrefix?i("span",{staticClass:"el-input__prefix"},[e._t("prefix")],2):e._e(),e.isSuffix?i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[e._t("suffix")],2)]):e._e(),e.isAppendGroup||e.append?i("div",{staticClass:"el-input-group__append"},[e._t("append",(function(){return[e._v(" "+e._s(e.$t(e.append))+" ")]}))],2):e._e()])]:[i("StepTextBox",{attrs:{disabled:e.$$disabled,"setp-template":e.setpTemplate,"split-char-in-value":!1,"setp-input-temp":e.setpInputTemp},on:{focus:e.inputFocusHandler,blur:e.inputBlurHandler},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})]],e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(e._s(e.errorsMsg))]):e._e()]}))]},proxy:!0}:null],null,!0)})},a=[],s={trim:function(e){return e.replace(/(^[\n\t\s]+)|([\n\t\s]+$)/g,"")},trimAll:function(e){return e.replace(/[\n\t\s]+/g,"")}};function r(e){e=e.split("\n");var t=[];return e.forEach((function(e){e=s.trim(e);var i="g",n=null;/^\/[\S\s]+(\/g*)$/.test(e)?n=e.replace(/(^\/)|((\/g*)$)/g,""):/^\/[\S\s]+(\/i)$/.test(e)&&(i="i",n=e.replace(/(^\/)|((\/i)$)/g,"")),n&&t.push((function(e){return e.replace(new RegExp(n,i),"")}))})),t}function l(e){e=e.split("\n");var t=e.map((function(e){return e.replace(/\|/g,"\\|")}));return function(e){return e.replace(new RegExp(t.join("|"),"g"),"")}}var o={props:{filterRule:{type:Array,default:function(){return[]}}},computed:{_filterRule:function(){var e=[];return this.filterRule.forEach((function(t){var i=t.type,n=t.key,a=t.value;"system"===i?s[n]&&e.push(s[n]):"regExp"===n?e=e.concat(r(a)):"keywords"===n&&e.push(l(a))})),e}},methods:{filterFormat:function(e){if(!this._filterRule.length)return e;var t=e;while(1){if(this._filterRule.forEach((function(e){t=e(t)})),t==e)break;e=t}return t}}},u=Vue.defineLazyComponent((function(){return i(936)})),d=dsf.component({name:"DsfTextbox",mixins:[$mixins.formControl,o],ctrlCaption:"文本框",components:{StepTextBox:u},props:{lazyModel:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},ishideCon:{type:Boolean,default:!1},inputType:{type:String,default:"text"},isCheckStrength:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入"},isTrim:{type:Boolean,default:!0},metadata:{type:Object,default:function(){return dsf.metadata.get("text-meta-data")}},append:{type:String,default:""},isAppendBackgroundColor:{type:Boolean,default:!0},emptyPlaceholder:{type:String,default:""},valuePrefix:{type:String,default:""},inputMode:{type:String,default:"normal"},setpTemplate:{type:String,default:"xxxx-xxxx"},setpInputTemp:{type:String,default:"x"},changeCorrection:{type:Object,default:function(){return null}}},data:function(){return{bindInputValue:""}},computed:{inputValue:{get:function(){return this.bindInputValue},set:function(e){this.bindInputValue=e,this.lazyModel||this.emitValueChange(e)}},$inputType:function(){return"password"==this.inputType?"password":"text"},isNumberInput:function(){var e;return"number"==(null===this||void 0===this||null===(e=this.metadata)||void 0===e||null===(e=e.valueAttributes)||void 0===e||null===(e=e[0])||void 0===e||null===(e=e.type)||void 0===e?void 0:e.value)},inputEventListener:function(){var e={change:this.inputChangeHandler,focus:this.inputFocusHandler,blur:this.inputBlurHandler};return this.isNumberInput&&(e["keydown"]=this.inputKeydownHandler,e["keyup"]=this.inputKeyupHandler),e}},created:function(){var e=this;Object.defineProperty(this,"isPrefixGroup",{get:function(){return e.$slots.prepend}}),Object.defineProperty(this,"isAppendGroup",{get:function(){return e.$slots.append}}),Object.defineProperty(this,"isPrefix",{get:function(){return e.$slots.prefix}}),Object.defineProperty(this,"isSuffix",{get:function(){return e.$slots.suffix}})},mounted:function(){},beforeDestroy:function(){},methods:{$emitValueChange:function(e){"normal"==this.inputMode&&(e&&this.valuePrefix?e=this.valuePrefix+e:this.valuePrefix&&!e&&(e="")),$mixins.formControl.methods.$emitValueChange.call(this,e)},focus:function(){var e=this;this.inClient=!0,this.$nextTick((function(){$(e.$el).find("input:visabled").get(0).focus()}))},inputChangeHandler:function(e){var t,i=this,n=this.filterValidNumber(e.target.value);n=this.filterFormat(n),null!==this&&void 0!==this&&null!==(t=this.changeCorrection)&&void 0!==t&&t.command&&(n=dsf.format(this.changeCorrection.command,n,this.changeCorrection.args||[])),this.lazyModel?this.emitValueChange(n):this.inputValue=n,this.$nextTick((function(){i.emitFormValidate(n),i.$dispatch("change",n)}))},inputBlurHandler:function(){this.$dispatch("blur")},inputFocusHandler:function(){this.$dispatch("focus")},filterValidNumber:function(e){if(this.isNumberInput){if(e=_.trim(e),!e)return"";if("."==e||"-."==e)return"0";if(e.startsWith("."))return"0"+e;if(e.startsWith("-."))return"-0"+e;if(e.endsWith("."))return e.slice(0,-1)}return e},inputKeydownHandler:function(e){if(!this.isNumberInput)return!0;var t=e.key,i=e.keyCode,n=e.target.value;if([9,8,46,37,38,39,40,13].indexOf(i)>-1)return!0;if([65,88,67,86].indexOf(i)>-1){if(e.ctrlKey||e.metaKey)return!0}else if(i>=48&&i<=57||i>=96&&i<=105){if(/^\d$/.test(t))return!0}else if(110==i||190==i){if(-1==n.indexOf(".")&&"."==t)return!0}else if((109==i||189==i)&&"-"==t)return!0;return e.preventDefault(),!1},inputKeyupHandler:function(e){if(!this.isNumberInput)return!0;var t=e.target.value.trim();return!t||"-"==t||"."==t||(t=t.match(/(^-)?([\d.])/g),t?(t=t.join("").split("."),t.length>1&&t.splice(1,0,"."),t=t.join(""),void(e.target.value=t)):(e.target.value="",!0))}},watch:{value:{handler:function(e,t){var i;this.readOnly||"normal"==this.inputMode&&this.valuePrefix&&e&&(e=null===(i=e)||void 0===i?void 0:i.toString().replace(this.valuePrefix,""));this.bindInputValue=e},immediate:!0},isNumberInput:function(e){!0===e&&(this.$emit("update:ishideCon",!1),this.$emit("update:inputType","number"))},inputType:function(e){"password"==e?this.$emit("update:ishideCon",!0):this.$emit("update:ishideCon",!1)},ishideCon:{handler:function(e){!0===e?this.$emit("update:inputType","password"):this.isNumberInput?this.$emit("update:inputType","number"):this.$emit("update:inputType","text")},immediate:!0}},destroyed:function(){}}),c=d,p=i(0),f=Object(p["a"])(c,n,a,!1,null,null,null);t["default"]=f.exports},982:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"newEditor",staticClass:"ds-neweditor ds-control ds-form-item",class:[e.getCss,e.neditorClass]},[e.hasLabel?i("DsfFieldLabel",{style:e.getLabelWidthStyle(),attrs:{mode:e.showDataCaptionMode,"show-icon":e.showDataCaptionIcon,trigger:e.showDataCaptionTrigger,"data-caption":e.dataCapion,"is-design":e.isDesign,owner:e._self}},[e._v(e._s(e.$t(e.label)))]):e._e(),i("div",{staticClass:"ds-form-block",style:e.getFormItemBlockMarginLeft()},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEditor&&!(e.isDesign&&e.readOnly),expression:"showEditor && !(isDesign && readOnly)"}],class:["neweditor-content",e.ueditorCss]},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.readOnly,expression:"!readOnly"}],ref:"editorToolbar",attrs:{id:"editor-toolbar"}},[i("div",{attrs:{id:"toolbar-container_"+e.hash}})]),i("div",{ref:"editorContainer",staticClass:"editor-container",class:[e.isShowMenu?"catalog-"+e.catalogPos:"float-catalog"]},[i("div",{staticClass:"editor-box",class:{"full-width":!e.isShowSideBar}},[i("div",{ref:"editorInput",staticClass:"editor-input",class:e.codeTheme,style:e.returnResetSize(),attrs:{id:"editor-container_"+e.hash},on:{click:e.handleClickInput}}),e.wordCount?i("div",{staticClass:"wrod-msg",class:{"over-max-length":e.overMaxLength}},[e._v(" "+e._s(e.msgCountTip)+" ")]):e._e()]),e.isShowSideBar?i("div",{ref:"editorSidebar",staticClass:"editor-sidebar",class:[e.isShowMenu?"":"float-catalog","left"===e.catalogPos?"catalog-left":"catalog-right"],on:{mouseleave:e.mouseLeaveMenu}},[i("div",{staticClass:"compendium"},[i("span",{staticClass:"title"},[e._v("大纲")]),i("div",{staticClass:"operate"},[i("span",{staticClass:"pithy"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.isShowMenu?"隐藏大纲":"钉住大纲",placement:"top-start"}},[i("i",{class:e.isShowMenu?"el-icon-unlock":"el-icon-lock",on:{click:e.handleHideMenu}})])],1),e.isShowCloseTree(e.menuTree)?i("span",{staticClass:"on-off"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.isCloseAll?"全部展开":"全部折叠",placement:"top-start"}},[i("i",{class:e.isCloseAll?"el-icon-caret-bottom":"el-icon-s-unfold",on:{click:e.isOpenOrClose}})])],1):e._e()])]),i("div",{staticClass:"menu-tree-box"},[i("dsf-virtual-scroll",[e.menuTree.length>0?i("el-tree",{ref:"menuTree",staticClass:"menu-tree",attrs:{data:e.menuTree,"current-node-key":e.currentNodeKey,"node-key":"id","default-expand-all":e.isExpand,"highlight-current":!0,"expand-on-click-node":!1},on:{"node-click":e.nodeClick,"node-expand":e.nodeExpand,"node-collapse":e.nodeCollapse},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return[i("span",{class:"tree-node-label el-tree-slot_padding-"+a.indent},[e._v(e._s(n.label))])]}}],null,!1,3922777921)}):e._e(),e.menuTree.length<1&&!e.readOnly?i("span",{staticClass:"menu-placeholder"},[e._v("标题将在此展示")]):e._e()],1),e.isShowMenu?e._e():i("span",{staticClass:"fix-icon",attrs:{title:"目录"},on:{mouseenter:function(t){return t.stopPropagation(),e.showMenuHandle.apply(null,arguments)}}},[i("DsfIcon",{attrs:{name:e.menuIconStyle||"category"}})],1)],1)]):e._e()])]),e.isDesign&&e.readOnly?i("div",{class:e.ueditorCss,attrs:{id:"designReadOnly"},domProps:{textContent:e._s(e.msg)}}):e._e()])],1)},a=[],s=i(4),r=i.n(s),l=i(2),o=i.n(l),u=i(1),d=i.n(u);function c(e){var t,i={state:!1,level:null};return null!==e&&void 0!==e&&null!==(t=e.children[0])&&void 0!==t&&t.text&&(i.state=!0,i.level=p(e.type)),i}function p(e){var t=null;switch(e){case"header1":t=1;break;case"header2":t=2;break;case"header3":t=3;break;case"header4":t=4;break;case"header5":t=5;break;case"header6":t=6;break;default:return!1}return t}function f(e,t,i){var n=i;return c(e).level>t.level?t.children.length>0?(n++,f(e,t.children[t.children.length-1],n)):{loopTimes:n,itemLevel:c(e).level,parent:!0,parentLevel:t.level,indent:parseInt(c(e).level-(n+1))}:{loopTimes:n,parent:!1,prevLevel:t.level,itemLevel:c(e).level,indent:parseInt(c(e).level-n)}}function h(e){var t=[];return e.map((function(e){if(c(e).state)if(0===t.length){var i=c(e).level;1===c(e).level?t.push({label:"".concat(e.children[0].text),indent:0,id:e.id,level:c(e).level,children:[]}):t.push({label:"".concat(e.children[0].text),indent:parseInt(i-1),id:e.id,level:c(e).level,children:[]})}else{var n=f(e,t[t.length-1],1),a=n.loopTimes;if(n.parent){var s=null;if(1===a)s=t[t.length-1].children;else if(2===a){var r=t[t.length-1].children;s=r[r.length-1].children}else if(3===a){var l=t[t.length-1].children,o=l[l.length-1].children;s=o[o.length-1].children}else if(4===a){var u=t[t.length-1].children,d=u[u.length-1].children,p=d[d.length-1].children;s=p[p.length-1].children}s&&s.push({label:"".concat(e.children[0].text),indent:n.indent,id:e.id,level:c(e).level,children:[]})}else{var h=null;if(1===a)h=t;else if(2===a)h=t[t.length-1].children;else if(3===a){var m=t[t.length-1].children;h=m[m.length-1].children}else if(4===a){var v=t[t.length-1].children,g=v[v.length-1].children;h=g[g.length-1].children}else if(5===a){var y=t[t.length-1].children,x=y[y.length-1].children,b=x[x.length-1].children;h=b[b.length-1].children}h&&h.push({label:"".concat(e.children[0].text),indent:n.indent,id:e.id,level:c(e).level,children:[]})}}})),t}var m=dsf.component({name:"DsfWangEditor",mixins:[$mixins.formControl],ctrlCaption:"富文本",props:{value:{type:String,default:""},modelType:{type:String,default:"normal"},fixedOffsetTop:{type:Number,default:20},fixedOffsetClass:{type:String,default:""},placeholder:{type:String,default:"请在此输入正文..."},metadata:{type:Object,default:function(){var e=dsf.metadata.get("big-text-meta-data");return e.valueAttributes[0].textType="HTML",e}},fixToolbar:{type:Boolean,default:!0},toolBars:{type:Array,default:function(){return["headerSelect","blockquote","underline","bold","italic","through","code","sub","sup","clearStyle","color","bgColor","fontSize","fontFamily","indent","delIndent","justifyLeft","justifyRight","justifyCenter","justifyJustify","lineHeight","divider","emotion","insertLink","codeBlock","todo","redo","undo","bulletedList","numberedList","uploadVideo","insertTable","uploadAttachment","uploadImage"]}},catalogPos:{type:String,default:"right"},menuIconStyle:{type:String,default:"category"},showLabel:{type:Boolean,default:!1},maximumWords:{type:Number,default:1e4},wordCount:{type:Boolean,default:!1},wordCountMsg:{type:String,default:"当前已输入 {#count} 个字符，您还可以输入{#leave} 个字符"},readOnlyShowLabel:{type:Boolean,default:!1},codeTheme:{type:String,default:"dark-themes"},isShowSideBar:{type:Boolean,default:!0},resetWidth:{type:[Number,String],default:80},resetHeight:{type:[Number,String],default:500},scrollBarWidth:{type:Number,default:17}},data:function(){return{weditortool:null,showEditor:!0,editorValue:"",upFileUrl:"/file/upload/",toolbarConfig:{toolbarKeys:this.toolBars},menuTree:[],isExpand:!0,isCloseAll:!1,isShowMenu:!1,isHover:!0,currentNodeKey:null,msgCountTip:"",v:null,headerList:[],needScrollJudge:!0,designerMenu:[{label:"标题一",level:1,id:"no001",children:[{label:"标题二",level:2,id:"no002",children:[{label:"标题三",level:3,id:"no003",children:[]}]}]}],designerEditorHtml:'<pre><code class="language-javascript">&lt;script&gt;var str = \'Hello World !\'&lt;/script&gt;</code></pre>\n      <pre><code class="language-html">&lt;div class="zh-title"&gt;&lt;strong&gt;Hello World！&lt;/strong&gt;&lt;div&gt;</code></pre>\n      <pre><code class="language-css">&lt;link rel="stylesheet" href="https://www.baidu.com"&gt;',wangeditorScriptLoading:!1,hash:dsf.uuid(),overMaxLength:!1,editorContainer:null,allowedExtensions:[".gif",".jpg",".jpeg",".png"]}},computed:{hasLabel:function(){return!!this.showLabel&&(!this.readOnly||this.readOnlyShowLabel)},ueditorCss:function(){return this.hasLabel?"have-label":""},msg:function(){var e="已经启用只读模式，";return this.visible?e+"可见":e+"且不可见"},neditorClass:function(){return[this.isDesign?"is-design":"",this.fixedOffsetClass?"":"is-auto-height","doc"==this.modelType?"is-doc":""]},neditorCss:function(){return this.hasLabel?"have-label":""}},watch:{toolBars:function(){this.renderNewEditor()},value:function(e){if(this.v=e,this.weditortool){var t=this.weditortool.getHtml();e!==t&&(this.v=null,this.insertText(e))}},codeTheme:{handler:function(e){this.codeTheme=e},deep:!0,immediate:!0},currentNodeKey:function(e){var t=this;e.toString()&&this.$nextTick((function(){t.currentNodeKey=e,t.$refs["menuTree"].setCurrentKey(t.currentNodeKey)}))},headerList:{handler:function(){var e=this;this.isDesign||(this.menuTree=h(this.headerList),this.$nextTick((function(){if(e.menuTree.length>0){for(var t=[],i=0;i<e.headerList.length;i++)t.push({id:e.headerList[i].id,top:e.$el.querySelector("#".concat(e.headerList[i].id)).getBoundingClientRect().top});e.currentNodeKey=e.judgeTopItem(t).id,e.$refs["menuTree"].setCurrentKey(e.currentNodeKey)}})))},deep:!0,immediate:!0},wordCount:function(e){e&&this.wordSizeCount(this.weditortool)},maximumWords:function(){this.wordSizeCount(this.weditortool)}},created:function(){this.metadata.valueAttributes[0]&&(this.metadata.valueAttributes[0].textType="HTML")},mounted:function(){var e=this;this.insertMetaTag(),this.isDesign&&(this.menuTree=this.designerMenu,this.currentNodeKey="no001",this.isShowMenu=!0,this.$nextTick((function(){e.$refs.editorSidebar.style.position="absolute"}))),this.loadWEditor(),!this.isDesign&&this.initScroll(),!this.isDesign&&window.addEventListener("resize",this.setEditorSidebarPos)},methods:{insertMetaTag:function(){var e=document.createElement("meta");e.setAttribute("name","referrer"),e.setAttribute("content","no-referrer");var t=document.getElementsByTagName("head")[0];t.appendChild(e)},deleteMetaTag:function(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)"referrer"===e[t].getAttribute("name")&&"no-referrer"===e[t].getAttribute("content")&&document.head.removeChild(e[t])},loadWEditor:function(){var e=this;return this.loadWangEditor().then((function(){window.wangEditor&&window.wangEditor.Boot.plugins.length<13&&window.wangEditor.Boot.registerModule(window.WangEditorPluginUploadAttachment.default),e.initEditor()})).catch((function(e){dsf.error(e)}))},loadWangEditor:function(){var e=this;return new Promise((function(t,i){if(window.wangEditor)t();else if(!e.wangeditorScriptLoading){e.wangeditorScriptLoading=!0;var n=document.getElementsByTagName("head")[0],a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href","./static/js/libs/wangeditor/style.css"),n.appendChild(a);var s=document.createElement("script");n.appendChild(s),s.src="./static/js/libs/wangeditor/index.js",s.onload=function(){var e=document.createElement("script");n.appendChild(e),e.src="./static/js/libs/wangeditor/attachment.js",e.onload=function(){t()}}}}))},initEditor:function(){var e=this,t=this,i={selector:"#editor-container_".concat(t.hash),content:[{type:"paragraph",children:[{text:"",fontFamily:"",fontSize:"16px"}]}],config:{placeholder:t.readOnly?"":t.placeholder,hoverbarKeys:{attachment:{menuKeys:["downloadAttachment"]}},MENU_CONF:{uploadImage:{customUpload:function(e,i){t.uploadFile(e,i,"img")}},uploadVideo:{customUpload:function(e,i){t.uploadFile(e,i,"video")}},uploadAttachment:{customUpload:function(e,i){t.uploadFile(e,i,"attachment")}}},customPaste:function(t,i){var n=i.clipboardData.getData("text/html");if(n){var a=e.handleCopyImgUrls(n),s=a.urls,r=a.htmlStr;if(s.length){var l=s.map((function(t){return e.getImageBlobFromSrc(t).then((function(t){return e.uploadImageToServer(t)}))}));Promise.all(l).then((function(e){var i=t.getHtml(),n=document.createElement("div");n.innerHTML=i;var a=n.querySelectorAll("img[data-href]");a.forEach((function(t,i){var n=t.getAttribute("data-href"),a=e.find((function(e){var t;return e&&n.includes(null===(t=e[0])||void 0===t?void 0:t.originalFileName)}));a&&(t.setAttribute("src",a[0].relativePath),t.setAttribute("data-href",""))}));var s=n.innerHTML;t.setHtml(s)}))}return t.dangerouslyInsertHtml(r),i.preventDefault(),!1}},scroll:!1,onChange:function(e){t.onChange(e)}},mode:"default"};this.wordCount&&(i.config.maxLength=this.maximumWords);var n=window.wangEditor.createEditor(i);window.wangEditor.createToolbar({editor:n,selector:"#toolbar-container_".concat(t.hash),config:t.toolbarConfig,mode:"default"});this.weditortool=Object.seal(n),this.value&&this.insertText(this.value),this.isDesign?this.insertText(this.designerEditorHtml):this.$nextTick((function(){e.setEditorSidebarPos()})),this.readOnly&&(this.weditortool.disable(),this.weditortool.blur())},resetImgsSrc:function(){},handleCopyImgUrls:function(e){var t=[],i=document.createElement("div");i.innerHTML=e;var n=i.querySelectorAll("img");return n.forEach((function(e,i){var n=e.getAttribute("src");e.setAttribute("data-href",n),e.setAttribute("src","/static/js/libs/UEditor/themes/default/images/loading.gif"),e.setAttribute("style","width:auto"),t.push(n)})),t.length&&(t=o()(new Set(t))),{urls:t,htmlStr:"".concat(i.innerHTML)}},getImageBlobFromSrc:function(e){var t=this;return new Promise((function(i,n){fetch(e).then((function(i){if(!i.ok)throw new Error("Network response was not ok");return i.blob().then((function(i){var n=null,a=t.handleCustomName(e);if("application/octet-stream"===i.type){var s=t.handleOtherType(a);n="image/".concat(s||"png")}return new File([i],"".concat(a),{type:n||i.type})}))})).then((function(e){return i(e)})).catch((function(e){return n(e)}))}))},handleCustomName:function(e){var t=this,i=e.split("/"),n=i.filter((function(e){return t.allowedExtensions.some((function(t){return e.includes(t)}))}));if(n.length){var a=n[0].match(/.*(\.gif|\.jpg|\.jpeg|\.png)/),s=a?a[0]:e;return s}return e},handleOtherType:function(e){var t=this.allowedExtensions.find((function(t){return e.includes(t)}));return t.replace(".","")},uploadImageToServer:function(e){var t=this;return r()(d.a.mark((function i(){var n,a,s;return d.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.next=3,t.$http.upload(t.upFileUrl,{files:e,pageName:(null===(n=t.$vm)||void 0===n?void 0:n.pageName)||"",namespace:(null===(a=t.$vm)||void 0===a?void 0:a.namespace)||""},{timeout:2e4}).done((function(e){var t=e.success,i=e.data;e.message;t&&(s=i)}));case 3:return i.abrupt("return",s);case 4:case"end":return i.stop()}}),i)})))()},initScroll:function(){var e=this;this.$nextTick((function(){e.fixedOffsetClass?e.editorContainer=document.getElementsByClassName(e.fixedOffsetClass)[0]:e.editorContainer=e.$refs.editorContainer,e.editorContainer.addEventListener("scroll",e.handleScroll,!0)}))},handleScroll:_.throttle((function(){var e,t,i=this,n=this.editorContainer,a=n.scrollTop,s=n.clientHeight,r=n.scrollHeight,l=0;if(null!==(e=this.$refs)&&void 0!==e&&null!==(e=e.editorToolbar)&&void 0!==e&&e.clientHeight&&(l=this.$refs.editorToolbar.clientHeight),null!==(t=this.weditortool)&&void 0!==t&&t.getElemsByTypePrefix){var o=this.weditortool.getElemsByTypePrefix("header");if(o.length>0&&this.needScrollJudge){try{o.forEach((function(e,t){var n=i.$el.querySelector("#".concat(e.id)).getBoundingClientRect().top;if(n>0&&n>=l&&n-l<25)throw i.currentNodeKey=e.id,Error();if(n>0&&n>=l&&n-l>=25)throw i.currentNodeKey=i.headerList[t-1].id,Error()}))}catch(u){}0==a&&(this.currentNodeKey=this.headerList[0].id),a+s>=r&&(this.currentNodeKey=this.headerList[this.headerList.length-1].id)}}this.needScrollJudge=!0,this.setEditorSidebarPos()}),50),insertText:function(e){this.weditortool.clear(),this.weditortool.setHtml(e)},handleClickInput:function(e){var t,i;this.weditortool&&null!==(t=e.target.className)&&void 0!==t&&t.includes&&null!==(i=e.target.className)&&void 0!==i&&i.includes("editor-input")&&(this.weditortool.blur(),this.weditortool.focus(!0))},getFormItemBlockMarginLeft:function(){return this.$labelWidth&&this.hasLabel?{"margin-left":this.$labelWidth+"px"}:{"margin-left":0}},setEditorSidebarPos:function(){var e,t=this.editorContainer.getBoundingClientRect().top;this.$refs.editorSidebar.style.position="fixed";var i=null===(e=this.$refs.editorToolbar)||void 0===e?void 0:e.offsetHeight;if(this.$refs.editorSidebar.style.top=t+(this.fixedOffsetClass?i:0)+this.fixedOffsetTop+"px","left"===this.catalogPos){var n=this.editorContainer.getBoundingClientRect().left;this.$refs.editorSidebar.style[this.catalogPos]=n+"px"}else{var a=document.documentElement.clientWidth,s=this.editorContainer.getBoundingClientRect().right,r=a-s;r=r>0?r:0,this.$refs.editorSidebar.style[this.catalogPos]=r+this.scrollBarWidth+"px"}},onChange:_.debounce((function(e){if("<p><br></p>"!==e.getHtml()&&this.emitValueChange(e.getHtml()),!this.isDesign){var t=e.getElemsByTypePrefix("header");JSON.stringify(t)!==JSON.stringify(this.headerList)&&(this.headerList=t),!this.secondEnter&&t.length>0&&!this.isShowMenu?this.handleHideMenu():this.secondEnter=!0}this.wordCount&&this.wordSizeCount(e),this.$emit("editor-change",{data:e.getHtml()}),this.$emit("rendered")}),50),wordSizeCount:function(e){var t=e.getText().replace(/\n|\r/gm,"").length,i=this.maximumWords-t;this.msgCountTip=this.wordCountMsg.replace("{#count}",t).replace("{#leave}",i),i<0?(this.msgCountTip="字数超出最大允许值，服务器可能拒绝保存！",this.overMaxLength=!0):this.overMaxLength=!1},renderNewEditor:function(){var e=this;this.showEditor=!1,this.toolbarConfig.toolbarKeys=this.toolBars,this.$nextTick((function(){e.weditortool=null,e.showEditor=!0,e.$nextTick((function(){e.initEditor()}))}))},nodeClick:_.debounce((function(e,t,i){var n=this;this.$nextTick((function(){var t,i=n.$el.querySelector("#".concat(e.id));t=n.fixedOffsetClass?document.getElementsByClassName(n.fixedOffsetClass)[0]:n.$refs.editorContainer,t.scrollTo({left:0,top:i.offsetTop+t.offsetTop-20,behavior:"smooth"})})),this.needScrollJudge=!1,this.currentNodeKey=e.id}),50),isOpenOrClose:function(){var e=this;this.isExpand=!this.isExpand,this.isCloseAll=!this.isCloseAll;var t=this.$refs.menuTree.store._getAllNodes();t.length>0&&t.forEach((function(t){e.$set(t,"expanded",e.isExpand)}))},isShowCloseTree:function(e){var t=!1;try{e.forEach((function(e){var i;if(null!==(i=e.children)&&void 0!==i&&i.length)throw t=!0,Error()}))}catch(i){}return t},nodeExpand:function(e,t,i){this.$set(t,"expanded",!0);var n=this.$refs["menuTree"].store._getAllNodes(),a=n.filter((function(e){return e.childNodes.length>0})),s=!0;try{a.forEach((function(e){e.expanded||(s=!1)}))}catch(r){}s?(this.isExpand=!0,this.isCloseAll=!1):this.isExpand=!1},nodeCollapse:function(e,t,i){this.$set(t,"expanded",!1);var n=this.$refs["menuTree"].store._getAllNodes();if(this.isExpand=!1,1==t.level){var a=n.filter((function(e){return 1==e.level}));try{a.forEach((function(e){if(e.expanded)throw!1,Error()}))}catch(s){}this.isCloseAll=!0}else this.isCloseAll=!0},judgeTopItem:function(e){if(null!==e&&void 0!==e&&e.length){var t=e.filter((function(e){return e.top>-1})),i=[];t.forEach((function(e){i.push(e.top)}));var n=Math.min.apply(Math,i),a=i.findIndex((function(e){return e===n}));return{id:a>-1&&t.length?t[a].id:e[e.length-1].id,index:a}}},uploadFile:function(e,t,i){var n=dsf.layer.loading({text:"上传中..."});this.$http.upload(this.upFileUrl,{files:e},{timeout:0}).done((function(n){var a=n.success,s=n.data,r=n.message;if(!a)return dsf.layer.message(r||"上传失败",!1),void reject(r);var l=dsf.url.getWebPath(s[0]["relativePath"]);"attachment"===i?t("".concat(e.name),l):t(l)})).error((function(e){dsf.layer.message("上传发生未知异常",!1),reject(e)})).always((function(){dsf.layer.closeLoading(n)}))},handleHideMenu:function(){var e=this;this.isShowMenu=!this.isShowMenu,this.$emit("fixMenu",this.isShowMenu),this.setEditorSidebarPos(),setTimeout((function(){e.isHover=!e.isShowMenu}),10)},returnResetSize:function(){var e="width: ".concat("doc"==this.modelType?this.resetWidth:"100","%;");return this.fixedOffsetClass?e+="min-height: ".concat(this.resetHeight,"px"):e+="height: ".concat(this.resetHeight,"px"),e},showMenuHandle:_.debounce((function(e){var t;null===(t=$("div.editor-sidebar"))||void 0===t||t.addClass("is-hover")}),300),mouseLeaveMenu:_.debounce((function(e){var t;null===(t=$("div.editor-sidebar"))||void 0===t||t.removeClass("is-hover")}),300)},beforeDestroy:function(){this.deleteMetaTag();var e=this.weditortool;null!=e&&(e.destroy(),this.fixedOffsetClass?document.getElementsByClassName(this.fixedOffsetClass)[0].removeEventListener("scroll",this.handleScroll,!0):this.$refs.editorContainer.removeEventListener("scroll",this.handleScroll,!0),window.removeEventListener("resize",this.setEditorSidebarPos,!0))}}),v=m,g=(i(646),i(0)),y=Object(g["a"])(v,n,a,!1,null,null,null);t["default"]=y.exports},983:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DsfFormControlBox",{staticClass:"ds-select",attrs:{owner:e._self},scopedSlots:e._u([{key:"simple",fn:function(){return[i("DsfTextProxy",e._b({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1)),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0},{key:"content",fn:function(){return[e.$$readOnly?i("div",{staticClass:"ds-form-readonly"},[i("DsfTextProxy",e._b({attrs:{"show-label":!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"DsfTextProxy",e._self.$props,!1))],1):"select"==e.showMode?i("el-select",{ref:"select",class:{"ds-error-border":e.errors.length>0},attrs:{disabled:e.$$disabled,placeholder:e.placeholder,"collapse-tags":e.collapseTags,"popper-class":e.dsf.isString(e.popperClass)?e.popperClass:"","multiple-limit":e.multipleLimit,multiple:e.multiple,filterable:e.filterable||e.allowCreate,"filter-method":e.filter,"allow-create":e.allowCreate,loading:e.loading,"default-first-option":e.allowCreate&&e.multiple},on:{"visible-change":e.dropDownShow,change:e.selectChange,focus:function(t){e.isFocus=!0}},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[i("el-option",{directives:[{name:"show",rawName:"v-show",value:e.showSelectItem,expression:"showSelectItem"}],attrs:{label:"",value:"",show:!e.searchKey}},[i("span",{staticStyle:{color:"#c0c0c0"}},[e._v("请选择")])]),e.multiple&&e.showSelectAll?i("el-option",{attrs:{label:"全选",value:"__selectAll"}},[i("div",{staticStyle:{width:"100%"},on:{click:function(t){return t.stopPropagation(),e.selectAll.apply(null,arguments)}}},[i("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.isSelectAll?"取消全选":"全选"))])])]):e._e(),e.isDesign?[i("el-option",{attrs:{label:"数据1",value:"1"}}),i("el-option",{attrs:{label:"数据2",value:"2"}}),i("el-option",{attrs:{label:"数据3",value:"3"}}),i("el-option",{attrs:{label:"数据4",value:"4"}}),i("el-option",{attrs:{label:"数据5",value:"5"}})]:e.isFocus?e._l(e.realItems,(function(t){return i("select-item",{key:t[e.valueField],attrs:{show:e.optionVisable(t),item:t}})})):e.multiple&&e.value?e._l(e.value,(function(t){return i("el-option",{key:t.value,attrs:{show:e.optionVisable(t),label:e._formatSelectedText(t)}},[e._v(" "+e._s(e._formatOptionText(t))+" ")])})):!e.multiple&&e.value&&e.value.value&&e.value.text?[i("el-option",{attrs:{label:e._formatSelectedText(e.value),value:e.value.value}},[e._v(" "+e._s(e._formatOptionText(e.value))+" ")])]:e._e()],2):"transfer"==e.showMode?i("DsfSelectTransfer",{class:{"ds-error-border":e.errors.length>0},attrs:{disabled:e.$$disabled,options:e.realItems,placeholder:e.placeholder,"collapse-tags":e.collapseTags,"multiple-limit":e.multipleLimit,multiple:e.multiple,filterable:e.filterable||e.allowCreate,"filter-method":e.filter,"allow-create":e.allowCreate,loading:e.loading,"default-first-option":e.allowCreate&&e.multiple,"value-field":e.valueField,"text-field":e.textField,"options-text-field":e.optionsTextField,"selected-text-field":e.selectedTextField,"alias-field":e.aliasField,"children-field":e.childrenField,"format-option-text":e._formatOptionText,"format-selected-text":e._formatSelectedText,"post-has-alias":e.postHasAlias,"need-disabled-options":e.needDisabledOptions},on:{"visible-change":e.dropDownShow,change:e.selectChange,focus:function(t){e.isFocus=!0}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e(),e._t("error",(function(){return[e.errors.length>0?i("div",{staticClass:"ds-error-text"},[e._v(" "+e._s(e.errorsMsg)+" ")]):e._e()]}))]},proxy:!0}],null,!0)})},a=[],s=i(3),r=i.n(s),l=(i(652),i(2)),o=i.n(l),u=i(7),d=i.n(u),c=(i(654),{name:"DsfSelectTransfer",inject:{elForm:{default:""},elFormItem:{default:""}},props:{id:String,name:String,size:String,disabled:Boolean,multiple:Boolean,clearable:Boolean,autocomplete:String,filterMethod:Function,collapseTags:Boolean,postHasAlias:Boolean,needDisabledOptions:String,value:{type:[Object,Array],default:null},placeholder:{type:String,required:!1},multipleLimit:{type:Number,default:0},options:{type:Array,default:function(){return[]}},valueField:{type:String,default:"value"},textField:{type:String,default:"text"},aliasField:{type:String,default:"alias"},childrenField:{type:String,default:"children"},optionsTextField:{type:String,default:"text"},selectedTextField:{type:String,default:"text"},formatOptionText:{type:Function,required:!1},formatSelectedText:{type:Function,required:!1}},data:function(){return{inputWidth:0,dialogVisible:!1,filterText:"",checkedNodes:[],defaultCheckedKeys:[]}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return this.multiple||!isIE()&&!isEdge()&&!this.visible},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},selectedLabel:function(){var e=this.value;return!this.multiple&&e&&(dsf.isArray(e)&&e.length>0&&(e=e[0]),dsf.isObject(e))?e.text:""},selected:function(){var e=this.value;return e?dsf.isObject(e)?[e]:dsf.isArray(e)?this.multiple?e:e.length?[e[0]]:[]:[]:[]},currentPlaceholder:function(){return this.multiple&&this.selected.length?"":this.placeholder},showClose:function(){return!(!this.clearable||this.disabled)&&(this.multiple?!!this.selected.length:!!this.selectedLabel)},needDisabledMap:function(){var e={},t=this.needDisabledOptions||"";return t.split(",").forEach((function(t){t&&(e[t]=!0)})),e},treeProps:function(){return{label:this.textField,children:this.childrenField,disabled:this.treeNodeDisabled,showCheckbox:!0}}},watch:{value:function(e){this.multiple&&(dsf.isArray(e)&&this.multipleLimit&&e.length>this.multipleLimit&&this.emitValue(e),this.resetInputHeight())},filterText:function(e){this.doTreeFilter(e)}},render:function(e){var t=["dsf-select-transfer","el-select"],i=[this.renderRadioBox(e)];return this.multiple&&i.unshift(this.renderCheckBox(e)),this.disabled?t.push("is-disabled"):i.push(this.renderTransfer(e)),e("div",{class:t},[i])},mounted:function(){this.addResizeListener()},beforeDestroy:function(){this.removeResizeListener()},methods:{renderRadioBox:function(e){var t,i=this;return e("el-input",{ref:"reference",attrs:{value:this.selectedLabel,id:this.id,name:this.name,size:this.selectSize,disabled:this.disabled||this.needDisabledMap[null===(t=this.value)||void 0===t?void 0:t.value],placeholder:this.currentPlaceholder,readonly:!0,"validate-event":!1,type:"text",tabindex:"-1",autocomplete:"autocomplete"}},[e("template",{slot:"suffix"},[e("i",{class:"el-input__icon el-icon-search",on:{click:function(e){return i.dialogVisible=!i.disabled}}}),this.showClose?e("i",{class:"el-select__caret el-input__icon el-icon-circle-close",on:{click:this.handleClearClick}}):""])])},renderCheckBox:function(e){var t=this,i=this.selected,n=this.inputWidth,a=this.collapseTags,s=this.disabled,r=this.collapseTagSize,l=this.needDisabledMap,o=this.deleteTag,u=this.getValueKey,d=this.resetInputHeight,c=[];return a&&i.length&&c.push(e("span",[e("el-tag",{attrs:{closable:!s&&!l[i[0].value],size:r,hit:i[0].hitState,type:"info","disable-transitions":!0},on:{close:function(e){return t.deleteTag(e,i[0])}}},[e("span",{class:"el-select__tags-text"},[i[0].text])]),i.length>1?e("el-tag",{directives:[{name:"if",value:"selected.length > 1"}],attrs:{closable:!1,size:r,type:"info","disable-transitions":!0}},[e("span",{class:"el-select__tags-text"},["+ ",i.length-1])]):""])),a||c.push(e("transition-group",{on:{"after-leave":d}},[_.map(i,(function(t){return e("el-tag",{key:u(t),attrs:{closable:!s&&!l[t.value],size:r,hit:t.hitState,type:"info","disable-transitions":!0},on:{close:function(e){return o(e,t)}}},[e("span",{class:"el-select__tags-text"},[t.text])])}))])),e("div",{ref:"tags",class:"el-select__tags",style:{"max-width":n-32+"px",width:"100%"}},[c])},addResizeListener:function(){var e=this;this.__resizeObserver=new ResizeObserver((function(){e.resetInputWidth(),e.multiple&&e.resetInputHeight()})),this.__resizeObserver.observe(this.$el)},removeResizeListener:function(){var e;null===(e=this.__resizeObserver)||void 0===e||e.disconnect()},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},deleteTag:function(e,t){var i=this.selected.indexOf(t);if(i>-1&&!this.disabled){var n=this.value.slice();n.splice(i,1),this.emitValue(n),this.emitChange(n),this.$emit("remove-tag",t.value)}e.stopPropagation()},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:getValueByPath(e.value,this.valueField)},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,i=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],n=e.$refs.tags,a=n?Math.round(n.getBoundingClientRect().height):0,s=40;i.style.height=e.selected.length?Math.max(n?a+(a>s?6:0):0,s)+"px":s+"px"}}))},handleClearClick:function(){var e=this,t=[];_.each(this.selected,(function(i){e.needDisabledMap[i.value]&&t.push(i)})),t=this.emitValue(t),this.emitChange(t)},getValueByItems:function(e){var t=this;if(!e)return[];dsf.isArray(e)||(e=[e]);var i=this.valueField,n=this.aliasField,a=this._formatSelectedText;return _.map(e,(function(e){var s=a(e),r=e[n],l=e[i];return t.postHasAlias?{text:s,value:l,alias:r}:{text:s,value:l}}))},emitValue:function(e){return this.multiple?(dsf.isArray(e)||(e=dsf.isObject(e)?[e]:[]),this.multipleLimit>0&&e.length>this.multipleLimit&&(e=e.slice(0,this.multipleLimit))):dsf.isArray(e)&&(e=e.length?e[0]:null),this.$emit("input",e),e},emitChange:function(e){this.$emit("change",e)},renderTransfer:function(e){var t=this;return e("el-dialog",d()([{attrs:{title:"请选择",top:"10vh",width:"1000px","custom-class":"dsf-select-transfer-dialog",visible:this.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":!0}},{on:{"update:visible":function(e){return t.dialogVisible=e},open:this.dialogOpen}}]),[e("div",{class:"ds-tree-selector"},[e("el-row",[e("el-col",{attrs:{span:14}},[e("div",{class:"head"},[e("el-input",{attrs:{value:this.filterText,placeholder:"输入关键字搜索"},on:{input:function(e){return t.filterText=e}}},[e("i",{slot:"suffix",class:"iconfont icon-Magnifier"})])]),e("div",{class:"content tree-content"},[e("dsf-virtual-tree",d()([{ref:"tree"},{props:{data:this.options,props:this.treeProps,nodeKey:this.valueField,defaultCheckedKeys:this.defaultCheckedKeys,filterNodeMethod:this.filterTreeMethod,expandOnClickNode:!1,showCheckbox:!0,checkStrictly:!0,defaultExpandAll:!0,checkOnClickNode:!0}},{on:{check:this.treeCheck},scopedSlots:{default:function(e){var i=e.data;return t._formatOptionText(i)}}}]))])]),e("el-col",{attrs:{span:10}},[e("div",{class:"head el-row"},[e("el-col",{class:"ellipsis",attrs:{span:12}},[e("span",["已选择"]),e("b",{class:"chooseNum"},[this.checkedNodes.length])]),e("el-col",{class:"ellipsis",attrs:{span:12}},[e("span",{class:"reset",on:{click:this.resetTreeSelect}},[e("i",{class:"el-icon-refresh-right"}),e("span",["清空"])])])]),e("div",{class:"content result"},[e("dsf-virtual-tree",d()([{},{props:{data:this.checkedNodes,nodeKey:"value",props:{customClass:function(e){return t.needDisabledMap[e.value]?"is-disabled":""}}}},{scopedSlots:{label:function(i){var n=i.data,a=i.node;return[e("span",[n.text]),e("i",{class:"iconfont icon-guanbi1",attrs:{title:"移除"},on:{click:function(e){return t.deleteTreeSelect(n,a)}}})]}}}]))])])])]),e("template",{slot:"footer"},[e("span",[e("dsf-button",{attrs:{type:"plain"},on:{click:function(){return t.dialogVisible=!1}}},["取 消"]),e("dsf-button",{on:{click:this.sureDialog}},["确 定"])])])])},doTreeFilter:_.debounce((function(e){this.$refs.tree.filter(e)}),500,{leading:!1,trailing:!0}),filterTreeMethod:function(e,t){var i=this.valueField,n=this.textField,a=this.aliasField,s=String(t[n]||""),r=String(t[a]||""),l=String(t[i]||"");return s.indexOf(e)>-1||r.indexOf(e)>-1||l.indexOf(e)>-1},_formatOptionText:function(e){return this.formatOptionText?this.formatOptionText(e):e[this.optionsTextField]},_formatSelectedText:function(e){return this.formatSelectedText?this.formatSelectedText(e):e[this.optionsTextField]},treeNodeDisabled:function(e,t){return this.multiple&&this.multipleLimit&&!t.checked?this.checkedNodes.length>=this.multipleLimit||(e.disabled||this.needDisabledMap[e[this.valueField]]):e.disabled},dialogOpen:function(){var e=this.$refs.tree;this.checkedNodes=o()(this.selected);var t=_.map(this.selected,"value");e?e.setCheckedKeys(_.map(this.selected,"value"),!1,!0):this.defaultCheckedKeys=t},treeCheck:function(e,t){var i=t.checkedNodes;this.multiple?this.checkedNodes=this.getValueByItems(i):i.length?(this.checkedNodes=this.getValueByItems(e),this.$refs.tree.setCheckedKeys([e[this.valueField]],!1,!0)):this.checkedNodes=[]},resetTreeSelect:function(){var e=this,t=[],i=[];_.each(this.selected,(function(n){e.needDisabledMap[n.value]&&(t.push(n.value),i.push(n))})),this.checkedNodes=i,this.$refs.tree.setCheckedKeys(t,!1,!0)},deleteTreeSelect:function(e,t){this.$refs.tree.setChecked(e.value,!1),dsf.array.remove(this.checkedNodes,e)},sureDialog:function(){this.dialogVisible=!1;var e=this.emitValue(this.checkedNodes);this.emitChange(e)}}}),p=Vue.defineLazyComponent((function(){return i(656)})),f=dsf.component({name:"DsfSelect",mixins:[$mixins.formControl,$mixins.itemsMixins],components:{selectItem:p,DsfSelectTransfer:c},ctrlCaption:"下拉框",props:{simple:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},filterable:{type:Boolean,default:!1},filterByValue:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},maxChooseNum:{type:Number,default:0},collapseTags:{type:Boolean,default:!1},optionRenderTime:{type:Number,default:0},loading:{type:Boolean,default:!1},formatOptionText:{type:Function,required:!1},showSelectAll:{type:Boolean,default:!1},showSelectItem:{type:Boolean,default:!0},popperClass:{type:[String,Boolean],default:""},showMode:{type:String,default:"select"}},data:function(){return{isFocus:!1,searchKey:"",filterResult:[],showOptions:{},customerItems:[]}},computed:{multipleLimit:function(){return this.maxChooseNum>0?this.maxChooseNum:0},realItemsSize:function(){if(!this.multiple)return 0;var e=0;return dsf.deepForEach(this.realItems,(function(){e++}),{isLast:!0}),e},isSelectAll:function(){var e=this.multipleLimit,t=this.realItemsSize,i=this.selectValue.length;return!!i&&(!e||e>=t?i===t:i===e)},realItems:function(){var e=this,t=this.customerItems||[],i=window.$mixins.itemsMixins.computed.realItems.call(this);return this.allowCreate&&t&&_.each(t,(function(t){dsf.array.ensure(i,t,(function(i){return i[e.valueField]==t[e.valueField]}))})),i},optionsSelectedFormatIsExpress:function(){return this.selectedTextField.indexOf("@[")>=0},optionsTextFormatIsExpress:function(){return this.optionsTextField.indexOf("@[")>=0}},watch:{multiple:function(e,t){!e&&t&&(this.selectValue=this.valueCopy.length?this.valueCopy[0]:[])}},created:function(){0===this.optionRenderTime&&(this.isFocus=!0)},methods:{focus:function(){var e,t;null===this||void 0===this||null===(e=this.$refs)||void 0===e||null===(e=e.select)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)},dropDownShow:function(e){e&&(this.searchKey=null,this.filterOptions()),this.$dispatch("visible-change",e)},_formatOptionText:function(e){return this.formatOptionText?this.formatOptionText(e):this.optionsTextFormatIsExpress?dsf.express.replace(this.optionsTextField,e):e[this.optionsTextField]},_formatSelectedText:function(e){return this.optionsSelectedFormatIsExpress?dsf.express.replace(this.selectedTextField,e):e[this.selectedTextField]},filter:function(e){this.searchKey=e,this.filterOptions()},filterOptions:function(){var e=this,t=this.searchKey||"";this.showOptions={};var i,n=[],a=this.$refs.select;t?(_.each(this.realItems,(function(i){var a,s,r,l,o,u,d,c=!1;e.filterByValue?c=(null===(a=i.text)||void 0===a?void 0:a.indexOf(t))>-1||0===(null===(s=i.py)||void 0===s?void 0:s.indexOf(t))||0===(null===(r=i.pinyin)||void 0===r?void 0:r.indexOf(t))||0===(null===(l=i.value)||void 0===l?void 0:l.indexOf(t)):c=(null===(o=i.text)||void 0===o?void 0:o.indexOf(t))>-1||0===(null===(u=i.py)||void 0===u?void 0:u.indexOf(t))||0===(null===(d=i.pinyin)||void 0===d?void 0:d.indexOf(t));e.$set(e.showOptions,i.value,c),c&&n.push(c)})),null===a||void 0===a||null===(i=a.broadcast)||void 0===i||i.call(a,"ElOption","queryChange",this.searchKey)):n=this.realItems},optionVisable:function(e){return!1!==this.showOptions[e.value]},filterValue:function(e){var t=this,i=$mixins.itemsMixins.methods.filterValue.call(this,e);if(this.allowCreate){var n=[];return _.each(e,(function(e){var a;dsf.isObject(e)?a=e:(a=_.find(i,(function(i){return i[t.valueField]==e})),a||(a=r()(r()({},t.textField,e),t.valueField,e),t.postHasAlias&&(a[t.aliasField]=e))),n.push(a)})),n}return i},selectAll:function(){var e=this,t=[];this.isSelectAll||dsf.deepForEach(this.realItems,(function(i){t.push(i[e.valueField])}),{isLast:!0}),this.selectValue=t,this.selectChange()}}}),h=f,m=i(0),v=Object(m["a"])(h,n,a,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=../../../smap/platform/dsf-platform.platform_pc_form.js.map