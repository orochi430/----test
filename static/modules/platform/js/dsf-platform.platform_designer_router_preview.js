/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[]).push([[11],{992:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],staticClass:"full-view"},[e.mobile?[i("div",{staticClass:"mobile-view demo"},[i("div",{staticClass:"mobile-view-content"},[e.loaded?i("PreviewLayout",{tag:"component",staticClass:"page-head-font-fixed"}):e._e()],1)])]:[e.loaded?i("PreviewLayout",{tag:"component",staticClass:"page-head-font-fixed"}):e._e()]],2)},o=[],r=i(3),a=i.n(r);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){a()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={name:"DsfPreView",props:{mobile:{type:Boolean,default:!1}},data:function(){return{layout:{},loaded:!1,templateStr:"",domTree:null}},created:function(){this.mobile&&i.e(7).then(i.t.bind(null,951,7))},mounted:function(){dsf.global.$isMobile=this.mobile,this.loadLayout()},destroyed:function(){this.domTree&&this.domTree.$destroy()},methods:{loadLayout:function(){var e,t;this.loaded=!0;var i=(null===(e=window)||void 0===e||null===(e=e.opener)||void 0===e?void 0:e.$previewStr)||(null===(t=window)||void 0===t||null===(t=t.parent)||void 0===t?void 0:t.opener.$previewStr)||"",n=$("<context>"+i+"</context>"),o=n.children("script[id='layout']"),r=["var layout="+$.trim(o.html())||!1,"return layout"],a=new Function(r.join("\n")),s=dsf.fillComponentDefaultProps(a());s["module-name"]=s.context.B+"."+s.context.M+"."+s.name;var d=dsf.designer.convertTemplateAndControlData(s,!1,!0),l=d.tpl,c=Vue.compile(l),f=u.call(this,s,d.props,c);this.$options.components["PreviewLayout"]=f}}};function u(e,t,i){var n={render:i.render,staticRenderFns:i.staticRenderFns,name:"PreviewLayout",inject:{$parentView:{default:null},$frame:{default:null}},provide:function(){return{$vm:this,$parentView:this,$isPreView:!0}},mixins:[],data:function(){return d(d({},$mixins.layoutView.data.call(this)),{},{$$controls:t,isPreView:!0,_isLoaded:!0,loading:!1,_isReady:!1,_isDataLoaded:!1})},props:{nameSpace:{type:String,default:e.context.B+"."+e.context.M},pageName:{type:String,default:e.name},queryString:{type:Object,default:function(){return{}}},choiceParams:{type:Object,default:function(){return null}}},computed:{$staticValue:function(){var e;return(null===this||void 0===this||null===(e=this.context)||void 0===e?void 0:e.$$staticValue)||{}},$page:function(){var e;return null===this||void 0===this||null===(e=this.$refs)||void 0===e?void 0:e.page},$viewData:function(){var e;return(null===this||void 0===this||null===(e=this.context)||void 0===e?void 0:e.$$viewData)||{}},$viewInitData:function(){var e;return null===this||void 0===this||null===(e=this.context)||void 0===e?void 0:e.$$viewInitData},$enum:function(){var e;return null===this||void 0===this||null===(e=this.context)||void 0===e?void 0:e.$$enum},$dataKey:function(){var e=this.queryString;return e?e.id:""},$controls:function(){return this._data.$$controls},$isLoaded:function(){return this.$data._isLoaded},$keepAlive:function(){return!1},$isReady:function(){return this.$data._isReady},$isDataLoaded:function(){return this.$data._isDataLoaded}},beforeCreate:function(){Object.defineProperty(this,"$page",{get:function(){return this.$refs.page},enumerable:!1})},created:function(){if(this.$parentView&&this.$frame){var e=this.$frame.caption||this.$frame.$attrs.id;e&&(this.$parentView.frames[this.$frame.caption].content=this)}},mounted:function(){var e=this;this.$data._isLoaded=!0,this.$data._isReady=!0,this.$data._isDataLoaded=!0,this.$nextTick((function(){var t;e.resize(),window.preViewRef=e.$refs,window.__preView=e;var i=(null===(t=window)||void 0===t||null===(t=t.frameElement)||void 0===t?void 0:t.contentWindow)||window;i&&"appDemo"==i.name&&i.parent.postMessage({title:e.$page.title,type:"postTitle"},"*")}))},beforeDestroy:function(){delete window.preViewRef,delete window.__preView},methods:{$defer:function(){return!0},$showLogic:function(){return!0},$getDefaultValue:function(){},$dataFormat:function(e,t,i){if(t){var n=dsf.global.Vue.filter(e);if(n)return n(i,t)}return i},$addFiled:function(){},resize:function(){this.$page&&dsf.resizeComponent(this.$page)}}};return dsf.designer.isFormPage(e)&&n.mixins.push(window.$mixins.form),window.$mixins[e.pageType]&&n.mixins.push(window.$mixins[e.pageType]),n}var c=l,f=i(0),p=Object(f["a"])(c,n,o,!1,null,null,null);t["default"]=p.exports},993:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-designer-mobile-setting",staticStyle:{width:"100%",height:"100%","padding-top":"50px","box-sizing":"border-box"}},[i("dsf-phone-case",{staticClass:"ds-designer-phone",attrs:{"show-back":!1,title:e.title}},[i("iframe",{attrs:{name:"appDemo",src:e.dsf.url.getWebPath("~/designer.html#/pc/preview?mobile=1")}})])],1)},o=[],r={name:"DsfMobilePreView",props:{},data:function(){return{title:""}},created:function(){window.addEventListener("message",this.onMessage)},beforeDestroy:function(){window.removeEventListener("message",this.onMessage)},methods:{onMessage:function(e){"postTitle"==e.data.type&&(this.title=e.title)}}},a=r,s=i(0),d=Object(s["a"])(a,n,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=../../../smap/platform/dsf-platform.platform_designer_router_preview.js.map