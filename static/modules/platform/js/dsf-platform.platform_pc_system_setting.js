/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[]).push([[69],{947:function(t,e,n){"use strict";n.r(e);var i=n(2),a=n.n(i),r=n(7),d=n.n(r);e["default"]=dsf.component({name:"DsfProjectConfig",mixins:[$mixins.control],ctrlCaption:"项目配置",data:function(){return{data:[],activeIndex:"",defaultOpeneds:[],pageUrl:""}},props:{height:{type:[Number,String],default:"100%"}},computed:{boxStyle:function(){return{height:dsf.isNumber(this.height)?"".concat(this.height,"px"):this.height}}},render:function(t){var e=this.boxStyle,n=this.activeIndex,i=this.defaultOpeneds,a=this.handleSelect,r=this.renderMenuNodes,s=this.data,l=this.pageUrl;return t("div",{ref:"container",class:"ds-control ds-project-config",style:e},[t("div",{class:"dpc-l",style:e},[t("dsf-virtual-scroll",[t("el-menu",d()([{attrs:{"default-active":n,"default-openeds":i}},{on:{select:a}}]),[r(t,s)])])]),t("div",{class:"dpc-r",style:e},[t("iframe",{style:e,attrs:{width:"100%",src:l,frameborder:"0"}})])])},created:function(){this.loadData()},methods:{renderMenuNodes:function(t,e){var n=this;return _.map(e,(function(e){return"1"==e.type?t("el-menu-item",{attrs:{index:e.id}},[e.name]):t("el-submenu",{attrs:{index:e.id}},[t("span",{slot:"title"},[e.name]),n.renderMenuNodes(t,e.children)])}))},handleSelect:function(t){this.activeIndex=t,this.setPageUrl()},setDefaultIndex:function(t){var e=a()(t);while(e.length){var n=e.pop(),i=n.children;if(i&&i.length){var r=i.length;while(r)r--,e.push(i[r])}"1"==n.type&&(this.activeIndex=n.id,e=[])}},setPageUrl:function(t){var e=this,n=function t(n){var i=0;while(i<n.length){var a=n[i];if(a.id===e.activeIndex&&"1"==a.type){var r=e.queryString.globalId?e.queryString.globalId:a.id,d=dsf.url.queryStringStringify(e.queryString);e.pageUrl=dsf.url.getWebPath("~/page.html#/pc/".concat(a.path,"?id=").concat(r,"&").concat(d));break}a.children&&a.children.length&&t(a.children),i+=1}};n(t||this.data)},loadData:function(){var t=this;this.$http.get("/setting/directory").then((function(e){var n=e.data;if(Array.isArray(null===n||void 0===n?void 0:n.data)&&n.data.length){t.setDefaultIndex(n.data),t.setPageUrl(n.data);var i=[],a=function t(e){e.forEach((function(e){"0"==e.type&&(i.push(e.id),t(e.children))}))};a(n.data),t.defaultOpeneds=i,t.data=n.data}}))}},watch:{height:{handler:function(t){if(this.isDesign){var e=t;t||(e="auto"),dsf.isNumber(e)&&(e+="px"),this.$dispatch("design-height-change",e)}},immediate:!0}}})}}]);
//# sourceMappingURL=../../../smap/platform/dsf-platform.platform_pc_system_setting.js.map