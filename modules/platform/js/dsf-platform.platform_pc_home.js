/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[]).push([[44],{1003:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-page-home-header-user"},[e._t("before"),i("div",{staticClass:"user-icon",style:{"background-image":"url("+e.defaultUserIcon+")"}},[e.homeRoot&&e.homeRoot.isPreview?e._e():i("img",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],attrs:{src:e.iconUrl,alt:""},on:{error:e.headLoadError,load:e.headLoadSuccess}})]),e._t("default")],2)},o=[],s={name:"DsfPageHomeHeaderUser",inject:["homeRoot"],props:{},data:function(){return{showIcon:!1,updateTime:(new Date).valueOf(),userName:this.homeRoot.isPreview?decodeURIComponent(dsf.url.queryString("userName")||""):dsf.session.get("user_name")}},computed:{defaultUserIcon:function(){var e=dsf.config.setting_public_user_default_header;return this.$replace(e)},iconUrl:function(){return dsf.url.getWebPath("/oua2/getCurUserPhotoStream?_t=".concat(this.updateTime))}},created:function(){},mounted:function(){},methods:{headLoadSuccess:function(){this.showIcon=!0},headLoadError:function(){this.showIcon=!1}}},a=s,r=i(0),l=Object(r["a"])(a,n,o,!1,null,null,null);t["default"]=l.exports},1004:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ds-personalization",class:{show:e.show}},[e.show?i("div",{staticClass:"ds-personalization-editor"},[i("div",{staticClass:"ds-personalization-editor-title"},[e._v(" 个性化设置 ")]),i("el-form",{attrs:{"label-width":"120px"}},[e.showThemes.length?i("el-form-item",{attrs:{label:"主题色："}},[i("div",{staticClass:"theme-radio-list"},[e._l(e.showThemes,(function(t){return[i("div",{key:t,staticClass:"theme-radio-item",style:e.radioStyle(e.dsf.themeConfig.themesConfig[t],t),on:{click:function(i){return e.radioClick(t)}}})]}))],2)]):e._e(),i("el-form-item",{attrs:{label:"字体大小："}},[e._t("font-size",(function(){return[i("el-slider",{attrs:{step:2,min:e.fontSizeMin,max:e.fontSizeMax,marks:e.fontSizeMarks,"format-tooltip":e.formatTooltip,"show-stops":""},model:{value:e.fontSizeVal,callback:function(t){e.fontSizeVal=t},expression:"fontSizeVal"}})]}),null,e._self)],2),e.homeRoot.homeControls["DsfDefaultHomeAsideMenu"]?i("el-form-item",{attrs:{label:"顶部导航栏："}},[i("el-radio-group",{model:{value:e.themeConfig.defaultHeaderMini,callback:function(t){e.$set(e.themeConfig,"defaultHeaderMini",t)},expression:"themeConfig.defaultHeaderMini"}},[i("el-radio",{attrs:{label:!1}},[e._v("宽条")]),i("el-radio",{attrs:{label:!0}},[e._v("窄条")])],1)],1):e._e(),e.homeRoot.homeControls["DsfDefaultHomeAsideMenu"]?i("el-form-item",{attrs:{label:"侧边导航栏："}},[i("el-radio-group",{model:{value:e.themeConfig.defaultAsideMini,callback:function(t){e.$set(e.themeConfig,"defaultAsideMini",t)},expression:"themeConfig.defaultAsideMini"}},[i("el-radio",{attrs:{label:!1}},[e._v("宽条")]),i("el-radio",{attrs:{label:!0}},[e._v("窄条")])],1)],1):e._e()],1),i("div",{staticClass:"footer"},[i("dsf-button",{attrs:{text:"确 定",size:"small"},on:{click:e.sure}}),i("dsf-button",{attrs:{text:"取 消",size:"small",type:"plain"},on:{click:e.close}})],1)],1):e._e()])},o=[],s=i(3),a=i.n(s),r={normal:14,bigFont:16,bigFont_1:18,bigFont_2:20,bigFont_3:22},l={14:"normal",16:"bigFont",18:"bigFont_1",20:"bigFont_2",22:"bigFont_3"},u={14:"正常",16:"中号",18:"大号",20:"特大",22:"最大"},c={name:"DsfPersonalization",inject:{homeRoot:{default:null}},props:{show:{type:Boolean,default:!1},saveToServer:{type:Boolean,default:!0},fontSizeOptions:{type:Object,default:function(){for(var e=parseInt(dsf.config.setting_public_show_fontsizebase),t=parseInt(dsf.config.setting_public_show_fontsizestep),i=parseInt(dsf.config.setting_public_show_fontsizestepcount),n=dsf.config.setting_public_show_fontsizemap.split(","),o=a()({},e,n[0]),s=0;s<i;s++)e+=t,o[e]=n[s+1];return o}}},data:function(){return{left:window.innerWidth,top:window.innerHeight/2,showThemes:[],fontSizeMarks:this.fontSizeOptions,fontSizeMax:0,fontSizeMin:0,themeConfig:{theme:null,fontSize:null,defaultHeaderMini:null,defaultAsideMini:null},lastTheme:null}},computed:{style:function(){return{top:this.top+"px",left:this.left+"px"}},fontSizeVal:{get:function(){return r[this.themeConfig.fontSize]},set:function(e){this.$set(this.themeConfig,"fontSize",l[e])}}},watch:{show:function(e){e&&(this.lastTheme=_.cloneDeep(dsf.themeConfig.setting))},saveToServer:{handler:function(e){dsf.config.setting_public_themes_save_to_server=Number(e)},immediate:!0},"themeConfig.theme":function(e){dsf.themeConfig.setTheme(e),this.$nextTick((function(){dsf.dispatchResize()}))},"themeConfig.fontSize":function(e){dsf.themeConfig.setFontSize(e),this.$nextTick((function(){dsf.dispatchResize()}))},"themeConfig.defaultHeaderMini":function(e){dsf.themeConfig.setDefaultHeaderMini(e),this.$nextTick((function(){dsf.dispatchResize()}))},"themeConfig.defaultAsideMini":function(e){dsf.themeConfig.setDefaultAsideMini(e),this.$nextTick((function(){dsf.dispatchResize()}))}},created:function(){var e=dsf.config.setting_public_show_themes||null;"all"===e?this.showThemes=Object.keys(dsf.themeConfig.themesConfig):(e=e?e.split(","):[],this.showThemes=_.filter(e,(function(e){return!!dsf.themeConfig.themesConfig[e]}))),this.themeConfig={theme:dsf.themeConfig.setting.theme,fontSize:dsf.themeConfig.setting.fontSize,defaultHeaderMini:dsf.themeConfig.setting.defaultHeaderMini,defaultAsideMini:dsf.themeConfig.setting.defaultAsideMini};var t=[];for(var i in this.fontSizeOptions)t.push(parseInt(i));t=t.sort((function(e,t){return e<t?-1:1})),this.fontSizeMin=t[0],this.fontSizeMax=t[t.length-1]},mounted:function(){document.body.appendChild(this.$el)},methods:{radioStyle:function(e,t){var i=e.main,n=e.normal,o=t==this.themeConfig.theme;return{"border-color":o?n:"#ccc","background-image":"linear-gradient(45deg, ".concat(i," 30%, ").concat(n," 70%)")}},radioClick:function(e){this.$set(this.themeConfig,"theme",e)},sure:function(){this.$emit("update:show",!1),this.$nextTick((function(){dsf.dispatchResize()}))},close:function(){var e=this;this.$emit("update:show",!1),this.$nextTick((function(){e.themeConfig=e.lastTheme}))},formatTooltip:function(e){return u[e]}}},d=c,h=(i(745),i(0)),f=Object(h["a"])(d,n,o,!1,null,null,null);t["default"]=f.exports},552:function(e,t,i){var n=i(744);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i(19).default;o("a614e1c2",n,!0,{sourceMap:!1,shadowMode:!1})},553:function(e,t,i){var n=i(746);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i(19).default;o("7100b06b",n,!0,{sourceMap:!1,shadowMode:!1})},554:function(e,t,i){var n=i(748);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i(19).default;o("5e6cdc3e",n,!0,{sourceMap:!1,shadowMode:!1})},555:function(e,t,i){var n=i(750);"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=i(19).default;o("5b1546ef",n,!0,{sourceMap:!1,shadowMode:!1})},743:function(e,t,i){"use strict";i(552)},744:function(e,t,i){"use strict";i.r(t)},745:function(e,t,i){"use strict";i(553)},746:function(e,t,i){"use strict";i.r(t)},747:function(e,t,i){"use strict";i(554)},748:function(e,t,i){"use strict";i.r(t)},749:function(e,t,i){"use strict";i(555)},750:function(e,t,i){"use strict";i.r(t)},962:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("home-main",{ref:"main"})},o=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"dsf-multiPage-home-main"},[i("div",{staticClass:"dsf-multiPage-home-tags"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showBt,expression:"showBt"}],staticClass:"dsf-multiPage-home-tags-bt __left",attrs:{disabled:e.disabledLeft},on:{click:function(t){return e.doPagination(1)}}},[i("i",{staticClass:"iconfont icon-arrow-left2"})]),i("div",{directives:[{name:"context-menu",rawName:"v-context-menu",value:{data:e.boxTreeMenu},expression:"{ data: boxTreeMenu }"}],ref:"box",staticClass:"dsf-multiPage-home-tags-list"},[e.homeRoot.isPreview?e._e():[e._l(e.tagList,(function(t){return[i("div",{directives:[{name:"context-menu",rawName:"v-context-menu",value:{params:t,data:e.treeMenu},expression:"{ params: tag, data: treeMenu }"}],key:t.menu_id,ref:"tag",refInFor:!0,staticClass:"dsf-multiPage-home-tags-item",class:{active:e.activeTag.menu_id===t.menu_id,loading:t.loading},attrs:{menu_id:t.menu_id,title:t.loading},on:{click:function(i){return e.showPage(t)}}},[i("span",[e._v(e._s(t.menu_name||t.loading))]),e.tagList.length>1?i("i",{staticClass:"dsf-multiPage-home-tags-item-close iconfont icon-guanbi2",on:{click:function(i){return i.stopPropagation(),e.remove({params:t})}}}):e._e()])]}))]],2),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showBt,expression:"showBt"}],staticClass:"dsf-multiPage-home-tags-bt __right",attrs:{disabled:e.disabledRight},on:{click:function(t){return e.doPagination(-1)}}},[i("i",{staticClass:"iconfont icon-arrow-right2"})]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showBt,expression:"showBt"}],staticClass:"dsf-multiPage-home-tags-bt __right",attrs:{disabled:e.disabledReturnPrevActiveBtn},on:{click:e.returnPrevTab}},[e.showReturnPrevTagButton?i("i",{staticClass:"iconfont icon-cancel"}):e._e()])]),i("div",{staticClass:"dsf-multiPage-home-body",class:{dragging:e.dragging}},e._l(e.pageList,(function(t){return i("home-view",{directives:[{name:"show",rawName:"v-show",value:e.activeTag.menu_id===t.menu_id,expression:"activeTag.menu_id === page.menu_id"}],key:t.menu_id,ref:"view",refInFor:!0,attrs:{page:t},on:{close:e.closeHandler}})})),1)])},a=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dsf-multiPage-home-view"},[e.isPreviewHome?i("div",{staticClass:"ds-preview-menu"}):e.page&&e.page.menu_url?i("DsfMultiRouteView",{ref:"iframe",attrs:{name:e.name},on:{"route-complete":e.complete}}):e._e()],1)},l=[],u={name:"HomeView",provide:function(){return{$multiView:this}},props:{page:{type:Object,required:!0}},data:function(){return{init:!1,name:dsf.uuid()}},computed:{src:function(){if(!this.init)return"about:blank";var e=this.page.menu_url;return e?(0==e.indexOf("#")&&0!=e.indexOf("#/")&&(e=e.replace("#","#/")),0==e.indexOf("#")&&(e="./page.html"+e),e):"about:blank"},isPreviewHome:function(){return dsf.themeConfig.isPreviewHome}},watch:{init:{handler:function(e,t){var i;void 0===t&&(null===(i=this.$parent.activeTag)||void 0===i?void 0:i.menu_id)===this.page.menu_id?this.init=!0:e&&this.$set(this.page,"loading","加载中...")},immediate:!0}},created:function(){var e=this.page.menu_url;if(e){var t=dsf.url.parse(e);this.$dsfRouters.pushView(this.name,{path:t.hashKey,query:t.hashQuery})}Object.defineProperty(this,"diglogArgs",{get:function(){return this.page.dialogArgs}}),Object.defineProperty(this,"openerVm",{get:function(){return this.page.openerVm}})},mounted:function(){},beforeDestroy:function(){try{var e,t,i,n,o,s;null===this||void 0===this||null===(e=this.$refs)||void 0===e||null===(e=e.iframe)||void 0===e||null===(t=e.setAttribute)||void 0===t||t.call(e,"src","about:blank"),null===this||void 0===this||null===(i=this.$refs)||void 0===i||null===(i=i.iframe)||void 0===i||null===(i=i.contentWindow)||void 0===i||null===(i=i.document)||void 0===i||null===(n=i.write)||void 0===n||n.call(i,""),null===this||void 0===this||null===(o=this.$refs)||void 0===o||null===(o=o.iframe)||void 0===o||null===(o=o.contentWindow)||void 0===o||null===(o=o.document)||void 0===o||null===(s=o.close)||void 0===s||s.call(o),delete this.openerVm,delete this.dialogArgs}catch(a){}clearTimeout(this._timer)},methods:{complete:function(e){var t=this;this.$nextTick((function(){var i,n,o;null===t||void 0===t||null===(i=t.$refs)||void 0===i||null===(i=i.iframe)||void 0===i||null===(i=i.$children)||void 0===i||null===(i=i[0])||void 0===i||null===(n=i.resize)||void 0===n||n.call(i),t.$set(t.page,"loading",null),!t.page.menu_name&&null!==e&&void 0!==e&&null!==(o=e.meta)&&void 0!==o&&o.title&&t.$set(t.page,"menu_name",e.meta.title)}))},active:function(){var e=this;this.init=!0,this.$nextTick((function(){var t,i;null===e||void 0===e||null===(t=e.$refs)||void 0===t||null===(t=t.iframe)||void 0===t||null===(t=t.$children)||void 0===t||null===(t=t[0])||void 0===t||null===(i=t.resize)||void 0===i||i.call(t)}))},refresh:function(){this.$set(this.page,"loading","刷新中...");var e,t=this.getFrameWindow();t?t.location.reload(!0):null===(e=this.$refs.iframe)||void 0===e||e.refresh()},load:function(){if(this.page.menu_name){var e,t;this.$set(this.page,"loading",null),null===(e=(t=this.page).callback)||void 0===e||e.call(t,null)}else{var i=this.getFrameWindow();if(i){var n,o,s=this,a=i.document;a.title?this.$set(this.page,"loading",null):(clearTimeout(this._timer),this._timer=setTimeout((function(){s.$set(s.page,"menu_name",a.title),s.$set(s.page,"loading",null)}),1e3)),Object.defineProperty(a,"title",{get:function(){return s.page.menu_name},set:function(e){s.$set(s.page,"menu_name",e),s.$set(s.page,"loading",null)}}),null===(n=(o=this.page).callback)||void 0===n||n.call(o,i)}else{var r,l,u=this.page.menu_url;u=u.length<=6?u:u.substr(0,6)+"...",this.$set(this.page,"menu_name",u),this.$set(this.page,"loading",null),null===(r=(l=this.page).callback)||void 0===r||r.call(l,null)}}},getFrameWindow:function(){var e;return null===(e=this.$refs.iframe)||void 0===e?void 0:e.contentWindow},frameResize:function(){},close:function(){this.$emit("close",this.page)}}},c=u,d=i(0),h=Object(d["a"])(c,r,l,!1,null,null,null),f=h.exports,m=!1,g={name:"HomeMain",inject:["homeRoot"],components:{HomeView:f},data:function(){var e;return{dragging:!1,showBt:!0,scriptLoaded:!1,disabledLeft:!1,disabledRight:!1,options:{animation:300,delay:100,forceFallback:!0,draggable:".dsf-multiPage-home-tags-item",ghostClass:"ghost",dragClass:"drag",chosenClass:"drag-chosen"},boxTreeMenu:[{icon:"icon-delete",name:"关闭全部",handler:this.removeAll}],treeMenu:[{icon:"icon-guanbi1",name:"关闭",handler:this.remove},{icon:"icon-guanbi1",name:"关闭其他",handler:this.removeOther},{icon:"icon-delete",name:"关闭全部",handler:this.removeAll}],showReturnPrevTagButton:(null===(e=dsf.config)||void 0===e?void 0:e.setting_public_multipage_show_returnprevtagbutton)||!1,disabledReturnPrevActiveBtn:!0,activeTag:null,tagList:[],pageList:[],tagNote:{}}},watch:{"activeTag.menu_id":function(e){var t=this;e&&this.activeView&&this.$nextTick((function(){t.activeView.active()}))}},created:function(){var e,t=this,i=dsf.storage.session.get("__MultiPage.tagNote");i&&i.pageList.length?(this.tagList=i.pageList,this.pageList=_.clone(i.pageList),this.activeTag=i.active,this.tagNote=i,this.activeTag._level&&this.homeRoot.initMenu(this.activeTag.menu_url),(null===(e=this.tagNote)||void 0===e||null===(e=e.prevActive)||void 0===e?void 0:e.length)>0&&this.computedPrevActive()):(dsf.storage.session.remove("__MultiPage.tagNote"),this.saveStorage(),this.homeRoot.initMenu(window.location.href));Object.defineProperty(this,"activeView",{get:function(){if(!this.activeTag||!this.$refs.view)return null;var e=this.pageList.indexOf(this.activeTag);return this.$refs.view[e]}}),this.resize=_.throttle(this._resize,500,{leading:!0,trailing:!0}),this.loadScript((function(){t.$nextTick((function(){return t.resize()}))}))},mounted:function(){var e=this;if(!this.tagList.length){var t=this.homeRoot.menuAction.length;t?this.openTag(this.homeRoot.menuAction[t-1]):this.__unwatch=this.$watch("homeRoot.menuAction.length",(function(t){t&&(e.openTag(e.homeRoot.menuAction[t-1]),e.__unwatch())}))}window.addEventListener("resize",this.resize)},beforeDestroy:function(){var e;null===(e=this.__unwatch)||void 0===e||e.call(this),window.removeEventListener("resize",this.resize)},methods:{returnPrevTab:function(){if(this.tagNote.prevActive&&this.tagNote.prevActive.length>0){var e,t=this.tagNote.prevActive.length-1,i=this.tagNote.prevActive[t],n=_.find(this.tagList,(function(e){var t=e.menu_id;return i.menu_id===t}));this.tagNote.prevActive.splice(t,1),n&&(null===n||void 0===n?void 0:n.menu_id)!==(null===(e=this.activeTag)||void 0===e?void 0:e.menu_id)?(this.disabledReturnPrevActiveBtn=0===this.tagNote.prevActive.length,n&&n.menu_id&&(this.activeTag=n,this.saveStorage(!1),n._level&&this.homeRoot.initMenu(n.menu_url))):this.returnPrevTab()}},loadScript:function(e){var t=this;dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/vuedraggable/Sortable-1.13.0.js"),dsf.url.getWebPath("$/js/libs/vuedraggable/vuedraggable.umd.js")]).then((function(){t.scriptLoaded=!0,null===e||void 0===e||e()})).catch((function(e){console.error(e),dsf.layer.message("加载fabric文件报错",!1)}))},_resize:function(){var e=this,t=this.$el.querySelectorAll(".ds-page");t.forEach((function(e){return dsf.resizeComponent(e)})),this.updateBtStatus(),this.activeView&&this.$nextTick((function(){e.activeView.frameResize()}))},saveStorage:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$nextTick((function(){var i,n;e.tagNote.pageList=_.map(e.tagList,(function(e){return{menu_id:e.menu_id,menu_name:e.menu_name,menu_url:e.menu_url,_level:e._level||null,dialogArgs:e.dialogArgs||null}})),e.showReturnPrevTagButton&&t&&e.tagNote.active&&(null===(i=e.tagNote)||void 0===i||null===(i=i.active)||void 0===i?void 0:i.menu_id)!=(null===(n=e.activeTag)||void 0===n?void 0:n.menu_id)&&(e.tagNote.prevActive||(e.tagNote.prevActive=[]),e.tagNote.prevActive.push(e.tagNote.active),e.disabledReturnPrevActiveBtn=0===e.tagNote.prevActive.length),e.tagNote.active=e.activeTag?{menu_id:e.activeTag.menu_id,menu_name:e.activeTag.menu_name,menu_url:e.activeTag.menu_url,_level:e.activeTag._level||null,dialogArgs:e.activeTag.dialogArgs||null}:null,dsf.storage.session.set("__MultiPage.tagNote",e.tagNote)}))},showPage:function(e){dsf.isString(e)&&(e=_.find(this.tagList,(function(t){var i=t.menu_id;return e===i}))),e&&e.menu_id&&(this.activeTag=e,this.saveStorage(),e._level&&this.homeRoot.initMenu(e.menu_url))},doPagination:function(e){var t=this;if(!(1===e&&this.disabledLeft||-1===e&&this.disabledRight||m)){var i=this.$refs.box,n=this.$refs.tag,o=i.offsetWidth,s=i.scrollLeft,a=s+o,r=-1;if(1===e){var l=n.find((function(e){return e.offsetLeft<=s&&e.offsetWidth+e.offsetLeft>s}));if(!l)return;r=l.offsetLeft-(o-l.offsetWidth)}else{var u=n.find((function(e){return e.offsetLeft<a&&e.offsetWidth+e.offsetLeft>=a}));if(!u)return;r=u.offsetLeft}m=!0,$(i).animate({scrollLeft:r},300,(function(){t.updateBtStatus(),m=!1}))}},openTag:function(e){var t=this,i=_.findIndex(this.tagList,(function(t){var i=t.menu_id;return e.menu_id==i}));if(-1===i)i=this.tagList.length,this.tagList.push(e),this.pageList.push(e);else{var n=_.findIndex(this.pageList,(function(t){var i=t.menu_id;return e.menu_id==i}));this.$set(this.tagList,i,e),this.$set(this.pageList,n,e)}this.activeTag=e,this.saveStorage(),e._level&&this.homeRoot.initMenu(e.menu_url),this.$nextTick((function(){if(t.$refs.tag){var e=t.$refs.tag[i],n=e.offsetWidth,o=e.offsetLeft,s=n+o,a=t.$refs.box,r=a.offsetWidth,l=a.scrollLeft,u=l+r;if(!(o>=l&&s<=u)){var c=s>u?o-(r-n):o;m=!0,$(a).animate({scrollLeft:c},300,(function(){t.updateBtStatus(),m=!1}))}}}))},refresh:function(e){var t=e.params,i=this.pageList.indexOf(t),n=this.$refs.view[i];n.refresh()},removeById:function(e){var t=_.find(this.tagList,(function(t){var i=t.menu_id;return i===e}));t&&this.remove({params:t})},remove:function(e){var t,i=this,n=e.params,o=this.tagList.indexOf(n);(this.tagList.splice(o,1),dsf.array.remove(this.pageList,n),this.computedPrevActive(n),this.saveStorage(!1),this.activeTag===n)&&(this.tagList.length?this.activeTag=o>0?this.tagList[o-1]:this.tagList[0]:this.activeTag=null,null!==this&&void 0!==this&&null!==(t=this.activeTag)&&void 0!==t&&t._level&&this.homeRoot.initMenu(this.activeTag.menu_url));this.$nextTick().then((function(){i.updateBtStatus(),i.$nextTick()})).then((function(){dsf.memoryRelease()}))},removeOther:function(e){var t=e.params;this.activeTag=t,this.tagList=[t],this.pageList=[t],this.computedPrevActive(),this.saveStorage(!1),t._level&&this.homeRoot.initMenu(t.menu_url),this.$nextTick(this.updateBtStatus)},removeAll:function(){this.activeTag=null,this.tagList=[],this.pageList=[],this.disabledLeft=!0,this.disabledRight=!0,this.computedPrevActive(),this.saveStorage(!1)},updateBtStatus:function(){var e=this.$refs.box,t=e.offsetWidth,i=e.scrollWidth,n=e.scrollLeft;this.disabledLeft=!1,this.disabledRight=!1,0===n&&(this.disabledLeft=!0),t+n===i&&(this.disabledRight=!0)},test:function(e){},closeHandler:function(e){var t=_.find(this.tagList,(function(t){return t.menu_id==e.menu_id}));for(var i in t&&this.remove({params:t}),e)e[i]=null,delete e[i]},computedPrevActive:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(1!=this.tagList.length){var i=[];if(t)i=_.filter(this.tagNote.prevActive,(function(e){return e.menu_id!=(null===t||void 0===t?void 0:t.menu_id)}));else{var n=_.map(this.tagList,(function(e){return e.menu_id}));i=_.filter(this.tagNote.prevActive,(function(e){return n.includes(e.menu_id)}))}this.tagNote.prevActive=[],_.forEach(i,(function(t){return e.tagNote.prevActive.push(t)}))}else this.tagNote.prevActive=[];this.disabledReturnPrevActiveBtn=0===this.tagNote.prevActive.length}}},v=g,p=Object(d["a"])(v,s,a,!1,null,null,null),w=p.exports,C=i(40),b={name:"DsfMultiPageHome",components:{HomeMain:w},props:{dropdownConfig:{type:Array,default:function(){return[]}}},data:function(){return{chain:[]}},created:function(){window.__multiPageVm__=this},methods:{menuItemClick:function(e){var t,i=C["a"].findMenu(e);if(i){var n=i.openType||i.opentype;switch(n){case"3":dsf.layer.openDialog({title:i.menu_name,width:"950px",height:"540px",params:{path:url}});break;default:null===(t=this.$refs.main)||void 0===t||t.openTag(i)}}},openPage:function(e){var t,i=e.name,n=e.url,o=e.tagName,s=e.opener,a=e.dialogArgs,r=e.openerVm,l=e.callback;null===(t=this.$refs.main)||void 0===t||t.openTag({menu_id:i,menu_url:n,menu_name:o,opener:s,dialogArgs:a,openerVm:r,callback:l})},closePage:function(e){var t;null===(t=this.$refs.main)||void 0===t||t.removeById(e)},addChain:function(e){this.chain.push(e)}}},y=b,k=(i(747),Object(d["a"])(y,n,o,!1,null,null,null));t["default"]=k.exports},963:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dsf-college-home full-view"},[i("home-header",{attrs:{"main-width":e.mainWidth,"dropdown-config":e.dropdownConfig,"custom-bts":e.customBts,"is-auto-hide-menu":e.isAutoHideMenu},on:{"dropdown-click":function(t){return e.$emit("dropdown-click",t)}}}),i("section",{staticClass:"dsf-college-home-section",style:{"min-width":e.mainWidth+20+"px"}},[i("div",{staticClass:"min-view",staticStyle:{"min-height":"calc(100vh - 160px)"}},[i("router-view")],1)]),i("footer",{staticClass:"dsf-college-home-footer"},[e._t("footer")],2)],1)},o=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"dsf-college-home-header",style:{"min-width":e.mainWidth+20+"px"}},[i("div",{staticClass:"dsf-college-home-header-main",style:{width:e.mainWidth+"px"}},[i("div",{staticClass:"dsf-college-home-header-site"},[i("div",{staticClass:"logoBox"},[i("a",{attrs:{href:e.indexUrl}},[i("img",{staticClass:"logo",attrs:{src:e._f("imgFormat")(e.$logo),alt:""}})])]),i("div",{staticClass:"header-user"},[i("home-search",{attrs:{placeholder:e.collegeRoot.searchPlaceholder,search:e.collegeRoot.doSearch},on:{search:function(t){return e.collegeRoot.$emit("search",t)}}}),e.isLogin?[i("div",{staticClass:"header-user-icon",style:{"background-image":"url("+e.$replace(e.defaultHeader)+")"}},[e.homeRoot&&e.homeRoot.isPreview?e._e():i("img",{directives:[{name:"show",rawName:"v-show",value:e.showIcon,expression:"showIcon"}],attrs:{src:e._f("imgFormat")(e.headIcon)},on:{error:e.headLoadError,load:e.headLoadSuccess}})]),!e.dropdownConfig.length||e.homeRoot.isPreview?i("div",{staticClass:"username"},[e._v(" 欢迎您,"+e._s(e.userName)+" ")]):i("el-dropdown",{attrs:{"show-timeout":0,placement:"bottom"},on:{"visible-change":function(t){e.showDropdown=t},command:e.handleCommand}},[i("div",{staticClass:"username"},[e._v(" 欢迎您,"+e._s(e.userName)+" "),e.dropdownConfig.length?i("i",{staticClass:"iconfont",class:[e.showDropdown?"icon-shangjiantou":"icon-xiajiantou"]}):e._e()]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.dropdownConfig,(function(t,n){return i("el-dropdown-item",{key:(t.key||"")+"__"+n,attrs:{command:n}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)]:e.homeRoot.isPreview?e._e():[e._l(e.customBts,(function(t,n){return[n?i("i",{key:n,staticClass:"iconfont icon-vertical_line"}):e._e(),i("a",{key:n,staticClass:"link",on:{click:function(e){return t.handler()}}},[e._v(e._s(t.name))])]}))]],2)]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"dsf-college-home-header-menu"},[i("div",{staticClass:"dsf-college-home-header-menu-bar",style:e.barStyle}),i("div",{staticClass:"dsf-college-home-header-menu-list"},[e._l(e.menuList,(function(t,n){return[i("div",{key:t.menu_id,ref:"menu",refInFor:!0,staticClass:"dsf-college-home-header-menu-item",class:{active:e.activeMenuIndex===n},on:{click:function(i){return e.collegeRoot._clickBefore(e.menuItemClick,t,n)}}},[e._v(" "+e._s(t.menu_name)+" ")])]}))],2)])])])},a=[],r=i(40),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"dsf-college-home-header-search",class:{show:e.show}},[i("i",{staticClass:"iconfont icon-sousuo",on:{click:e.submit}}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.keywords,expression:"keywords",modifiers:{trim:!0}}],ref:"input",attrs:{placeholder:e.placeholder,type:"text"},domProps:{value:e.keywords},on:{focus:e.focus,blur:[e.blur,function(t){return e.$forceUpdate()}],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch.apply(null,arguments)},input:function(t){t.target.composing||(e.keywords=t.target.value.trim())}}})])},u=[],c={name:"HomeSearch",props:{placeholder:{type:String,default:"请输入关键词"},search:{type:Function,required:!1}},data:function(){return{isFocus:!1,keywords:""}},computed:{show:function(){return this.isFocus||this.keywords}},methods:{submit:function(){this.isFocus&&(this.btClick=!0,this.doSearch())},focus:function(){this.isFocus=!0},blur:function(){var e=this;setTimeout((function(){e.btClick||(e.isFocus=!1),e.btClick=!1}),300)},doSearch:function(){var e=this;if(this.search){var t=this.search(this.keywords);t.then?t.then((function(t){t&&(e.keywords="",e.$refs.input.blur())})):!0===t&&(this.keywords="",this.$refs.input.blur())}else this.$emit("search",this.keywords)}}},d=c,h=i(0),f=Object(h["a"])(d,l,u,!1,null,null,null),m=f.exports,g={name:"DsfCollegeHomeHeader",inject:["homeRoot","collegeRoot"],components:{HomeSearch:m},props:{mainWidth:{type:Number,default:1200},dropdownConfig:{type:Array,default:function(){return[]}},lastLevelClick:{type:Boolean,default:!1},customBts:{type:Array,default:function(){return[]}},isAutoHideMenu:{type:Boolean,default:!1}},data:function(){return{isLogin:1==dsf.session.get("isLogin"),headIcon:"",defaultHeader:dsf.config.setting_public_user_default_header,showIcon:!1,showDropdown:!1,activeMenuIndex:-1,barStyle:{display:"none"}}},computed:{userName:function(){return this.homeRoot.isPreview?decodeURIComponent(dsf.url.queryString("userName")||""):dsf.session.get("user_name")},indexUrl:function(){return location.href.replace(/\#.*/,"").replace(/(.*\/)(.*?\.html)/,"$1index.html")},$logo:function(){return this.$replace(this.collegeRoot.logoUrl)},menuList:function(){return this.homeRoot.$menuList},menuIndex:function(){return this.homeRoot.menuIndex||[]},showMenu:function(){return!this.isAutoHideMenu||this.activeMenuIndex>-1&&this.activeMenuIndex<this.menuList.length}},watch:{menuIndex:{handler:function(e){var t=e.length?e[0]:-1;this.isMounted?(this.activeMenuIndex=t,this.updateBarStyle()):this._activeMenuIndex=t},deep:!0}},created:function(){this.initHeadIcon()},mounted:function(){this.isMounted=!0,void 0!==this._activeMenuIndex&&(this.activeMenuIndex=this._activeMenuIndex,this.updateBarStyle())},methods:{initHeadIcon:function(){var e=dsf.getCookie("photoRelativePath");e&&(this.headIcon=decodeURIComponent(e))},headLoadSuccess:function(){this.showIcon=!0},headLoadError:function(){this.showIcon=!1},handleCommand:function(e){var t=this.dropdownConfig[+e];this.$emit("dropdown-click",t)},updateBarStyle:function(){var e=this,t=this.menuList.length;this.activeMenuIndex<0||this.activeMenuIndex>=t?this.barStyle={display:"none"}:this.$nextTick((function(){var t,i=null===(t=e.$refs.menu)||void 0===t?void 0:t[e.activeMenuIndex];if(i){var n=i.offsetLeft+i.offsetWidth/2;e.barStyle={transform:"translate(calc(".concat(n,"px - 50%), 0) scale(.5)")}}else e.barStyle={display:"none"}}))},menuItemClick:function(e,t){var i,n,o,s,a,l;(2!=e.menu_opentype_value&&(this.activeMenuIndex=t),this.lastLevelClick)?e.children&&e.children.length||!e.menu_url||(null!==(i=this.homeRoot)&&void 0!==i&&i.isPreview?null===(n=this.homeRoot)||void 0===n||null===(o=n.isPreviewLinkTo)||void 0===o||o.call(n,e):r["a"].openPage.call(this.homeRoot,e)):null!==(s=this.homeRoot)&&void 0!==s&&s.isPreview?null===(a=this.homeRoot)||void 0===a||null===(l=a.isPreviewLinkTo)||void 0===l||l.call(a,r["a"].findMenu(e)):r["a"].openPage.call(this.homeRoot,r["a"].findMenu(e))}}},v=g,p=Object(h["a"])(v,s,a,!1,null,null,null),_=p.exports,w={name:"DsfCollegeHome",components:{HomeHeader:_},provide:function(){return{collegeRoot:this}},props:{mainWidth:{type:Number,default:1200},dropdownConfig:{type:Array,default:function(){return[]}},logoUrl:{type:String,default:""},searchPlaceholder:{type:String,required:!0},customBts:{type:Array,default:function(){return[]}},clickBefore:{type:Function,required:!1},doSearch:{type:Function,required:!1},isAutoHideMenu:{type:Boolean,default:!1}},data:function(){return{height:"auto"}},methods:{loaded:function(){var e=this;this.$nextTick((function(){e.height="auto",e.show=!0}))},leaveHandler:function(e){this.height=e.offsetHeight+"px"},_clickBefore:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];if(!this.isDesign){var s=null===(t=this.clickBefore)||void 0===t?void 0:t.call.apply(t,[this].concat(n));s&&s.then?s.then((function(t){!1!==t&&e.apply(void 0,n)})):!1!==s&&e.apply(void 0,n)}}}},C=w,b=(i(749),Object(h["a"])(C,n,o,!1,null,null,null));t["default"]=b.exports},980:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.show?i("el-popover",{attrs:{"append-to-body":!1,"popper-class":"dsf-page-home-header-user-info-panel",placement:"bottom",trigger:"hover"},on:{show:function(t){return e.$emit("show",!0)},hide:function(t){return e.$emit("show",!1)}},scopedSlots:e._u([{key:"reference",fn:function(){return[e._t("reference")]},proxy:!0}],null,!0)},[e._t("default",(function(){return[i("div",{staticClass:"content"},[i("div",{staticClass:"userinfo"},[i("dsf-page-home-header-user",[i("div",{staticClass:"basic"},[i("span",{staticClass:"username ds-multi-ellipsis-2"},[e._v(e._s(e.userName))]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.currUnit,expression:"currUnit"}],staticClass:"other-info ds-multi-ellipsis-1",attrs:{title:e.currUnit}},[e._v(e._s(e.currUnit))])]),e.homeRoot.isPreview?e._e():i("div",{staticClass:"to-editor"},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.isShowBusinessCard,expression:"isShowBusinessCard"}],staticClass:"iconfont icon-tubiao-qiapian",attrs:{title:"个人名片"},on:{click:e.handleOpenUserBusinessCardWindow}}),i("i",{directives:[{name:"show",rawName:"v-show",value:e.isToEditor,expression:"isToEditor"}],staticClass:"iconfont icon-tianxie",attrs:{title:"编辑"},on:{click:e.handleOpenUserInfoWindow}})])])],1),i("div",{staticClass:"down-menu"},[i("div",{staticClass:"down-menu-header"},[i("div",{staticClass:"down-menu-bt"},[i("i",{staticClass:"iconfont icon-nav-colour",staticStyle:{color:"#ff9900"}}),i("span",[e._v("主题")]),i("div",{staticClass:"popover theme-radio-list",staticStyle:{width:"160px"}},[e._l(e.showThemes,(function(t){return[i("div",{key:t,staticClass:"theme-radio-item",style:e.radioStyle(e.dsf.themeConfig.themesConfig[t],t),on:{click:function(i){return e.radioClick(t)}}})]}))],2)]),i("div",{staticClass:"down-menu-bt"},[i("i",{staticClass:"iconfont icon-icon_user_zt",staticStyle:{color:"#cc3399"}}),i("span",[e._v("字号")]),i("div",{staticClass:"popover"},[i("el-radio-group",{model:{value:e.fontSizeVal,callback:function(t){e.fontSizeVal=t},expression:"fontSizeVal"}},e._l(e.fontSizeOptions,(function(t,n){return i("el-radio",{key:n,attrs:{label:n}},[e._v(" "+e._s(t)+" ")])})),1)],1)]),e.homeRoot.homeControls["DsfDefaultHomeHeader"]||e.homeRoot.homeControls["DsfDefaultHomeAsideMenu"]?i("div",{staticClass:"down-menu-bt"},[i("i",{staticClass:"iconfont icon-zhinan",staticStyle:{color:"#3399cc"}}),i("span",[e._v("导航栏")]),i("div",{staticClass:"popover",staticStyle:{"margin-left":"-20%"}},[e.homeRoot.homeControls["DsfDefaultHomeHeader"]?[i("div",{staticClass:"title"},[e._v("顶部")]),i("el-radio-group",{model:{value:e.themeConfig.defaultHeaderMini,callback:function(t){e.$set(e.themeConfig,"defaultHeaderMini",t)},expression:"themeConfig.defaultHeaderMini"}},[i("el-radio",{attrs:{label:0}},[e._v("宽条")]),i("el-radio",{attrs:{label:1}},[e._v("窄条")])],1),e.homeRoot.homeControls["DsfDefaultHomeHeaderMenuChildren"]?i("el-checkbox",{attrs:{value:!!e.themeConfig.defaultHeaderCeiling},on:{input:function(t){e.themeConfig.defaultHeaderCeiling=+t}}},[e._v(" 吸顶 ")]):e._e()]:e._e(),e.homeRoot.homeControls["DsfDefaultHomeAsideMenu"]?[i("div",{staticClass:"title"},[e._v("侧边")]),i("el-radio-group",{model:{value:e.themeConfig.defaultAsideMini,callback:function(t){e.$set(e.themeConfig,"defaultAsideMini",t)},expression:"themeConfig.defaultAsideMini"}},[i("el-radio",{attrs:{label:1}},[e._v("窄条")]),i("el-radio",{attrs:{label:0}},[e._v("宽条(折叠)")]),i("el-radio",{attrs:{label:2}},[e._v("宽条(弹出)")])],1)]:e._e()],2)]):e._e()]),e.homeRoot.isPreview?e._e():i("div",{staticClass:"down-menu-main"},e._l(e.menuList,(function(t){return i("div",{key:t.key,staticClass:"down-menu-bt",on:{click:function(i){return e.dropdownItemClick(t)}}},[i("div",[i("span",[e._v(e._s(t.name))]),t.children?i("i",{staticClass:"iconfont icon-icon_more"}):e._e()]),t.children?[i("div",{staticClass:"popover"},e._l(t.children,(function(t){return i("div",{key:t.key,staticClass:"popover-menu-bt",on:{click:function(i){return e.dropdownItemClick(t,1)}}},[i("span",[e._v(e._s(t.groupName))]),t.children&&t.children.length?[i("div",{staticClass:"popover popover-second"},[i("dsf-virtual-scroll",{attrs:{"max-height":"400px",height:"auto"}},e._l(t.children,(function(n){return i("div",{key:n.unitId,staticClass:"popover-menu-bt",on:{click:function(i){return e.dropdownItemClick(n,t.groupId,t)}}},[i("span",[e._v(e._s(n.unitName))])])})),0)],1)]:e._e()],2)})),0)]:e._e()],2)})),0),e.hideLoginOutBt||e.homeRoot.isPreview?e._e():i("div",{staticClass:"down-menu-footer"},[i("div",{staticClass:"down-menu-bt",on:{click:function(t){return e.dropdownClick(e.loginOutBt)}}},[e._v("退出登录")])])])])]}))],2):e._e()},o=[],s=i(3),a=i.n(s);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u={smallFont:"12",normal:"14",bigFont:"16",bigFont_1:"18",bigFont_2:"20",bigFont_3:"22"},c={12:"smallFont",14:"normal",16:"bigFont",18:"bigFont_1",20:"bigFont_2",22:"bigFont_3"},d={inject:{homeRoot:{default:null}},props:{show:{type:Boolean,default:!0},saveToServer:{type:Boolean,default:!0},fontSizeOptions:{type:Object,default:function(){for(var e=parseInt(dsf.config.setting_public_show_fontsizebase),t=parseInt(dsf.config.setting_public_show_fontsizestep),i=parseInt(dsf.config.setting_public_show_fontsizestepcount),n=dsf.config.setting_public_show_fontsizemap.split(","),o=a()({},e,n[0]),s=0;s<i;s++)e+=t,o[e]=n[s+1];return o}}},data:function(){return{showThemes:[],fontSizeMax:0,fontSizeMin:0,themeConfig:{theme:null,fontSize:null,defaultHeaderMini:null,defaultHeaderCeiling:null,defaultAsideMini:null}}},computed:{fontSizeVal:{get:function(){return u[this.themeConfig.fontSize]},set:function(e){this.$set(this.themeConfig,"fontSize",c[e])}}},watch:{saveToServer:{handler:function(e){dsf.config.setting_public_themes_save_to_server=Number(e)},immediate:!0},"themeConfig.theme":function(e,t){dsf.themeConfig.setTheme(e),null!==t&&this.dispatchResize()},"themeConfig.fontSize":function(e,t){dsf.themeConfig.setFontSize(e),null!==t&&this.dispatchResize()},"themeConfig.defaultHeaderMini":function(e,t){dsf.themeConfig.setDefaultHeaderMini(e),null!==t&&this.dispatchResize()},"themeConfig.defaultHeaderCeiling":function(e,t){dsf.themeConfig.setDefaultHeaderCeiling(e),null!==t&&this.dispatchResize()},"themeConfig.defaultAsideMini":function(e,t){dsf.themeConfig.setDefaultAsideMini(e),null!==t&&this.dispatchResize()}},created:function(){var e=dsf.config.setting_public_show_themes||null;"all"===e?this.showThemes=Object.keys(dsf.themeConfig.themesConfig):(e=e?e.split(","):[],this.showThemes=_.filter(e,(function(e){return!!dsf.themeConfig.themesConfig[e]}))),this.themeConfig=l({},dsf.themeConfig.setting);var t=[];for(var i in this.fontSizeOptions)t.push(parseInt(i));t=t.sort((function(e,t){return e<t?-1:1})),this.fontSizeMin=t[0],this.fontSizeMax=t[t.length-1],this.dispatchResize=_.throttle(dsf.dispatchResize,500,{leading:!1,trailing:!0})},methods:{radioStyle:function(e,t){var i=e.main,n=e.normal,o=t===this.themeConfig.theme;return{"border-color":o?n:"#ccc","background-image":"linear-gradient(45deg, ".concat(i," 30%, ").concat(n," 70%)")}},radioClick:function(e){this.$set(this.themeConfig,"theme",e)}}},h={name:"DsfPageHomeHeaderUserInfoPanel",mixins:[d],inject:["homeRoot"],props:{dropdownConfig:{type:[Array,String],default:""},customUserEdit:{type:Function,default:null},customUserBusinessCardEdit:{type:Function,default:null}},data:function(){return{loginOutBt:null,groups:{},groupIndex:-1,currUnit:null}},created:function(){this.groupIndex=_.findIndex(this.relayDropdownConfig,(function(e){return"groupChange"==e.key})),this.homeRoot.isPreview?this.currUnit=dsf.url.queryString("unit"):this.groupIndex>-1&&this.handleGetGroups()},computed:{userName:function(){return this.homeRoot.isPreview?decodeURIComponent(dsf.url.queryString("userName")||""):dsf.session.get("user_name")},isToEditor:function(){return 1!=dsf.config.setting_public_hidden_update_user_info},menuList:function(){var e=this,t=[];return _.forEach(this.relayDropdownConfig,(function(i){var n;(i=_.clone(i),!i.handler&&e[i.key])?null===(n=e[i.key])||void 0===n||n.call(e,i):i._clickHandler=e.dropdownClick;"loginOut"!==i.key?t.push(i):e.loginOutBt=i})),t},relayDropdownConfig:function(){return this.dropdownConfig?this.dropdownConfig:+dsf.config.setting_public_hidden_update_password?[{name:"切换组",key:"groupChange"}]:[{name:"切换组",key:"groupChange"},{name:"修改密码",key:"alterPwd"}]},hideLoginOutBt:function(){return+dsf.config.setting_public_hidden_logout},isShowBusinessCard:function(){return+dsf.config.setting_public_show_business_card}},methods:{dropdownClick:function(e){this.$parent.$emit("dropdown-click",e)},dropdownItemClick:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var o=[e].concat(i);e._clickHandler&&e._clickHandler.apply(this,o)},groupChange:function(e){},groupChangeItem:function(e,t,i){var n,o;if(t)if(1===t){var s=e;t=s.groupId,o=e.groupName,e=s.unitInfoList[0],n=e.unitName}else n=e.unitName,o=i.groupName;else{var a=e.data[0];t=a.groupId,o=a.groupName,e=a.unitInfoList[0],n=e.unitName}this.handleGetMenus(t,e.unitGlobalId,n,o),this.dropdownClick(e)},alterPwd:function(e){e._clickHandler=function(){var e=!1;dsf.layer.openDialog({title:"修改密码",width:"600px",height:"600px",params:{path:"pc/dsfa/platformhome/alterPassword",onSuccess:function(){e=!0}},onClosed:function(){e&&location.replace(dsf.config.setting_public_pc_login_page)}})}},handleOpenUserInfoWindow:function(){var e=this;this.customUserEdit&&dsf.isFunction(this.customUserEdit)?this.customUserEdit(this):this.$http.get("/oua2/quickEdit").done((function(t){t.success?e.$openDialog({title:"信息编辑",showClose:!0,top:"5vh",height:"84vh",width:"1230px",params:{path:t.data},onClosed:function(){dsf.updateHomeControl.header()}}):dsf.layer.message("获取地址失败",!1)}))},handleGetGroups:function(){var e=this;this.$http.get(dsf.config.setting_public_group_list_src||"/oua2/groupList").done((function(t){if(t.success){var i,n=e.menuList[e.groupIndex];e.currUnit=null===(i=t.data)||void 0===i?void 0:i.currentGroupName;var o=t.data.appUnitGroupInfoList;if(!o||!o.length)return void _.forEach(e.menuList,(function(t,i){if("groupChange"==t.key)return e.menuList.splice(i,1),!1}));e.groups.groupChange=o.map((function(t){var i,s;1==o.length&&1==(null===(i=t.unitInfoList)||void 0===i?void 0:i.length)?(e.menuList[e.groupIndex]._clickHandler=e.groupChangeItem,n.data=o):1==(null===(s=t.unitInfoList)||void 0===s?void 0:s.length)?t._clickHandler=e.groupChangeItem:(t.children=t.unitInfoList,t.children.forEach((function(t){t._clickHandler=e.groupChangeItem})));return t})),n.data||(n.children=o)}else dsf.layer.message("获取角色组失败",!1)}))},handleGetMenus:function(e,t,i,n){var o=this;dsf.layer.confirm({message:"是否切换至【".concat(i,"】下的【").concat(n,"】角色？切换后将会刷新当前页面！"),confirmButtonText:"是",cancelButtonText:"否"}).then((function(){var i=dsf.storage.session.get("homeMenu");dsf.storage.session.remove("homeMenu"),o.$http.post(dsf.config.setting_public_switch_group_src||"/oua2/switchGroup",{groupId:e,unitGlobalId:t}).done((function(e){e.success?setTimeout((function(){location.replace("")}),500):(dsf.storage.session.set("homeMenu",i),dsf.layer.message(e.message,!1))}))}))},handleOpenUserBusinessCardWindow:function(){this.customUserBusinessCardEdit&&dsf.isFunction(this.customUserBusinessCardEdit)?this.customUserBusinessCardEdit(this):this.$openDialog({title:"个人名片",showClose:!0,top:"15vh",height:"200px",width:"700px",params:{path:"#/pc/dsfa/oua/user/sign/info"}})}}},f=h,m=(i(743),i(0)),g=Object(m["a"])(f,n,o,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=../../../smap/platform/dsf-platform.platform_pc_home.js.map