/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[]).push([[56],{1030:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ds-tree-select",class:[t.theme],style:{"padding-top":t.searchControl?"50px":"0"}},[t.searchControl?i("div",{staticClass:"ds-tree-select-search-box"},[i("el-input",{attrs:{placeholder:"输入关键词（多个关键词空格隔开）"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[i("i",{staticClass:"iconfont icon-Magnifier",attrs:{slot:"suffix"},slot:"suffix"})])],1):t._e(),i("div",{staticClass:"ds-tree-select-tree-box"},[t.multiple?i("dsf-virtual-tree",{ref:"tree",attrs:{data:t.treeData,"node-key":t.nodeKey,"empty-text":t.loading?"数据加载中...":t.emptyText,"show-checkbox":t.multiple,"default-checked-keys":t.defaultCheckedKeys,"default-expand-all":t.defaultExpandAll,"check-strictly":t.checkStrictly,"filter-node-method":t.filterNode,props:t.propsConfig},on:{check:t.check,"node-click":t.nodeClick,loadDataSuccess:t.loadDataSuccess},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,n=e.data;return[i("div",{staticClass:"custom-tree-node",attrs:{"tree-id":["key_"+n[t.nodeKey]]}},[t.getNoCheck(n)?[i("i",{staticClass:"iconfont",class:[s.expanded?"icon-dakai":"icon-wenjianjia"]}),i("span",[t._v(t._s(n[t.nodeName]))])]:[i("i",{staticClass:"iconfont",class:[t.nodeIcon]}),i("span",[t._v(t._s(n[t.nodeName]))])]],2)]}}],null,!1,2342147318)}):i("dsf-virtual-tree",{ref:"tree",attrs:{data:t.treeData,"node-key":t.nodeKey,"empty-text":t.loading?"数据加载中...":t.emptyText,"show-checkbox":t.multiple,"default-checked-keys":t.defaultCheckedKeys,"default-expand-all":t.defaultExpandAll,"filter-node-method":t.filterNode,props:t.propsConfig},on:{"node-click":t.nodeClick,loadDataSuccess:t.loadDataSuccess},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,n=e.data;return[i("div",{staticClass:"custom-tree-node",attrs:{"tree-id":["key_"+n[t.nodeKey]]}},[t.getNoCheck(n,s)?[t.hideRadioFn(n,s)?t._e():i("span",{staticClass:"el-radio__input",class:{"is-checked":n[t.nodeKey]===t.radioId,"is-disabled":n.nocheck},on:{click:function(e){return e.stopPropagation(),t.handleRadioClick(n)}}},[i("span",{staticClass:"el-radio__inner"})]),i("i",{staticClass:"iconfont",class:[s.expanded?"icon-dakai":"icon-wenjianjia"]}),i("span",[t._v(t._s(n[t.nodeName]))])]:i("label",{staticClass:"el-radio custom-tree-node-radio",on:{click:function(e){return e.stopPropagation(),t.handleRadioClick(n)}}},[t.hideRadioFn(n,s)?t._e():i("span",{staticClass:"el-radio__input",class:{"is-checked":n[t.nodeKey]===t.radioId,"is-disabled":n.nocheck},on:{click:function(e){return e.stopPropagation(),t.handleRadioClick(n)}}},[i("span",{staticClass:"el-radio__inner"})]),i("span",{staticClass:"el-radio__label"},[i("i",{staticClass:"iconfont",class:[t.nodeIcon]}),i("span",[t._v(t._s(n[t.nodeName]))])])])],2)]}}])})],1)])},n=[],a={name:"DsfTreeSelect",props:{theme:{type:String,default:"theme1"},searchControl:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},radioCanCancel:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},emptyText:{type:String,default:"暂无数据"},nodeKey:{type:String,default:""},nodeName:{type:String,default:"label"},nodeChildren:{type:String,default:"children"},defaultExpandAll:{type:Boolean,default:!0},defaultExpandedKeys:{type:Array,default:function(){return[]}},defaultCheckedKey:{type:[Array,String,Number],default:function(){return[]}},treeData:{type:Array,default:function(){return[]}},fileType:{type:[String,Number],default:""},getNoCheck:{type:Function,default:function(t){var e;return this.fileType?t.type!=this.fileType:(null===(e=t[this.nodeChildren])||void 0===e?void 0:e.length)>0}},hideRadioFn:{type:Function,default:function(t){var e;return this.fileType?t.type!=this.fileType:(null===(e=t[this.nodeChildren])||void 0===e?void 0:e.length)>0}},nodeIcon:{type:String,default:"icon-shiyongwendang"}},data:function(){return this.__loadingDelayFn=dsf.noop,{keyword:"",radioId:"",defaultCheckedKeys:[]}},computed:{keywords:function(){var t=this.keyword.trim();return""===t?[]:t.split(" ")},propsConfig:function(){return{label:this.nodeName,children:this.nodeChildren}}},watch:{keyword:function(t){this.$refs.tree.filter(t)},defaultCheckedKey:function(t){this.initDefaultCheckedKeys(t)},loading:{handler:function(t){var e=this;!t&&this.treeData.length&&(this.__loadingDelayFn=function(){var t,i;e.multiple?(t=(null===(i=e.defaultCheckedKey)||void 0===i?void 0:i[0])||null,e.handleCheckChange()):(t=e.defaultCheckedKey||null,dsf.isDef(e.radioId)&&e.$nextTick((function(){var t=e.getNode(e.radioId);t&&(e.$emit("choose-node",t.data),e.$emit("choose-key",e.radioId))})));t&&e.scrollIntoView(t)})},immediate:!0}},created:function(){this.initDefaultCheckedKeys(this.defaultCheckedKey)},mounted:function(){this.loading},beforeDestroy:function(){clearTimeout(this.__timeout)},methods:{treeMounted:function(){var t=this;this.$nextTick((function(){if(t.multiple)t.treeData.length&&t.handleCheckChange();else if(dsf.isDef(t.radioId)){var e=t.getNode(t.radioId);e&&(t.$emit("choose-node",e.data),t.$emit("choose-key",t.radioId))}}))},filterNode:function(t,e,i){if(!this.keywords.length)return!0;if(!t)return!0;for(var s=0;s<this.keywords.length;s++){var n;if((null===(n=e[this.nodeName])||void 0===n?void 0:n.indexOf(this.keywords[s]))>-1)return!0}return!1},check:function(){this.handleCheckChange()},initDefaultCheckedKeys:function(t){this.multiple?"array"!==dsf.type(t)?this.defaultCheckedKeys=[t]:this.defaultCheckedKeys=t:"array"===dsf.type(t)?this.radioId=t.length?t[0]:"":this.radioId=t},nodeClick:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.$emit.apply(this,["node-click",t].concat(i))},handleRadioClick:function(t){if(!t.nocheck){var e=t,i=t[this.nodeKey];if(i!==this.radioId)return this.radioId=i,this.$emit("choose-node",e),void this.$emit("choose-key",i);this.radioCanCancel&&(this.radioId="",this.$emit("choose-node",null),this.$emit("choose-key",null))}},handleCheckChange:function(){var t=this.checkStrictly;this.$emit("choose-node",this.$refs.tree.getCheckedNodes(!t)),this.$emit("choose-key",this.$refs.tree.getCheckedKeys(!t))},getNode:function(t){var e;return null===(e=this.$refs)||void 0===e||null===(e=e.tree)||void 0===e?void 0:e.getNode(t)},setChecked:function(t,e){this.$refs.tree.setChecked(t,e)},resetChecked:function(){this.multiple?this.$refs.tree.setCheckedKeys([]):this.radioId=""},loadDataSuccess:function(){var t=this;clearTimeout(this.__timeout),this.treeMounted&&(this.treeMounted(),this.treeMounted=null),this.__timeout=setTimeout((function(){t.__loadingDelayFn(),t.__loadingDelayFn=dsf.noop}),100)},scrollIntoView:function(t){this.$refs.tree.nodeScrollIntoView(t)}}},o=a,l=i(0),r=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=r.exports},1031:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"muti-ellipsis"},[t.clientIsIe?i("div",{staticClass:"ellipsis-ie-type",attrs:{title:t.text}},[i("div",{staticClass:"muti-ellipsis-content",style:t.setFontSizeNormal()},[i("span",{ref:"text",style:t.txtStyle},[t._v(" "+t._s(t.textFat.viewText)+" "),t.showSuffix&&!t.isComplate?i("span",{staticClass:"muti-ellipsis-content-more",style:t.getMoreStyle()},[t._v(t._s(t.more))]):t._e()]),i("transition",{attrs:{name:"ellipsis-slide"}},[t.isComplate?i("span",{staticClass:"more",style:t.txtStyle},[t._v(t._s(t.textFat.moreText))]):t._e()])],1)]):i("div",{staticClass:"ellipsis-webkit-type",style:!t.isComplate&&t.webkitStyle},[i("div",{style:t.txtStyle,attrs:{title:t.text}},[t._v(t._s(t.text))])])])},n=[],a={name:"DsfMutiEllipsis",props:{text:{type:String,default:""},maxLine:{type:Number,default:1},isComplate:{type:Boolean,default:!1},txtStyle:Object,more:{type:String,default:"..."},tabs:{type:Number,default:0}},data:function(){return{textFat:{viewText:"",moreText:""},containerStyle:{width:0},watchDisplay:"",textStyle:{height:0,letterSpacing:0,lineHeight:"normal"},prDisplayNode:null,clientIsIe:!1,webkitStyle:{},moreStrLength:0,showSuffix:!0}},watch:{text:function(){this.getStylesOfText()},isComplate:function(t){if(this.textFat.moreText)if(t){var e=this.textFat.viewText.length-this.$props.more.length;this.textFat.viewText=this.textFat.viewText.substring(0,e)}else this.textFat.viewText=this.textFat.viewText+this.$props.more}},computed:{limitWidth:function(){return this.maxLine*this.containerStyle.width}},created:function(){this.clientIsIe="..."!==this.more||dsf.client.IE()},mounted:function(){this.clientIsIe?this.getStylesOfText():this.webkitStyle={display:"-webkit-box","-webkit-box-orient":"vertical",overflow:"hidden","-webkit-line-clamp":this.maxLine,"text-overflow":"ellipsis"}},methods:{setFontSizeNormal:function(){var t;return"normal"===(null===(t=this.textStyle)||void 0===t?void 0:t.relLineHeight)?{lineHeight:1.32}:{}},getMoreStyle:function(){return{"margin-left":"-".concat(this.textStyle.letterSpacing+this.moreStrLength/2,"px")}},getStylesOfText:function(){var t=this;this.$nextTick((function(){setTimeout((function(){if(t.$refs.container.offsetWidth){var e=t.$refs.text.cloneNode();for(var i in e.innerHTML=t.$props.text,t.$props.txtStyle)e.style[i]=t.$props.txtStyle[i];e.style.opacity=0,t.$refs.container.appendChild(e);var s=null;window.getComputedStyle?(s=window.getComputedStyle(t.$refs.text),t.textStyle={height:parseFloat(s.fontSize),letterSpacing:+s.letterSpacing.replace(/px/,"")||0,lineHeight:"normal"===s.lineHeight?1.32:dsf.isString(s.lineHeight)?parseFloat(s.lineHeight)/parseFloat(s.fontSize):s.lineHeight,relLineHeight:s.lineHeight}):s=t.$refs.text.currentStyle(),t.containerStyle.width=Math.max(e.offsetWidth,t.$refs.container.offsetWidth-t.textStyle.height-t.textStyle.letterSpacing),t.$refs.container.removeChild(e),t.getChatsLength()}else t.watchDisplayNone()}),50)}))},getChatsLength:function(){var t=this.$props,e=t.more,i=t.text,s=t.tabs,n=document.createElement("canvas").getContext("2d"),a=n.measureText(e).width;this.moreStrLength=a;var o=~~Math.max((this.limitWidth-a)/(this.textStyle.height+this.textStyle.letterSpacing),0),l="";l=window.getComputedStyle?window.getComputedStyle(this.$refs.text):this.$refs.text.currentStyle;var r=l.font||"".concat(l.fontWeight," ").concat(l.fontSize," ").concat(l.fontFamily.replace(/-apple-system,/g,""));n.font=r;var c=0;if(n.measureText(this.text).width+(this.text.length-1)*this.textStyle.letterSpacing<this.limitWidth)this.textFat.viewText=this.text,this.showSuffix=!1;else{this.showSuffix=!0;while(o<this.text.length){var u=i.substring(0,o);if(c=n.measureText(u).width+o*this.textStyle.letterSpacing+a,c>this.limitWidth)break;o++}var h=document.createElement("div");h.style.background="red",h.style.wordBreak="break-all";var d=o-1+s;h.innerHTML="<span>".concat(this.text.substring(0,d),'\n<span class="muti-ellipsis-content-more" style="letter-spacing: 0; margin-left: -').concat(this.textStyle.letterSpacing+this.moreStrLength/2,'px">').concat(this.more,"</span></span>"),this.$refs.container.appendChild(h);var f=h.offsetHeight,p=~~this.maxLine*this.textStyle.height*this.textStyle.lineHeight+1;while(f>p)--d,h.innerHTML="<span>".concat(this.text.substring(0,d),'\n<span class="muti-ellipsis-content-more" style="letter-spacing: 0;margin-left: -').concat(this.textStyle.letterSpacing+this.moreStrLength/2,'px">').concat(this.more,"</span></span>"),f=h.offsetHeight;this.$refs.container.removeChild(h),this.textFat={viewText:this.text.substring(0,d),moreText:this.text.substring(d)}}},watchDisplayNone:function(){try{var t=this.$refs.container.parentElement,e=null,i=this;while(t){if("none"===t.style.display){e=t.style;break}t=t.parentElement}this.watchDisplay=e.display;var s=Object.getOwnPropertyDescriptor(e,"display");this.prDisplayNode=t;var n=t.EllipsisWatchers||{};if(!n[this._uid]){var a=function(t){"none"===t||this.textFat.viewText||this.getStylesOfText()};n[this._uid]=a.bind(this),t.EllipsisWatchers=n}s&&"function"!==!dsf.type(s.isWatched)||Object.defineProperty(e,"display",{configurable:!0,set:function(e){var s=t.EllipsisWatchers,n=this.cssText.replace(/display:.+/g,"");for(var a in""!==e.trim()&&(n+="display: ".concat(e)),t.setAttribute("style",n),i.watchDisplay=e,s)s[a](e)},get:function(){return i.watchDisplay}})}catch(o){dsf.error(o)}}},beforeDestroy:function(){if(this.displayNode){var t,e=null===(t=this.displayNode)||void 0===t?void 0:t.EllipsisWatchers;e&&delete e[this._uid]}}},o=a,l=i(0),r=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=r.exports},1032:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return"style1"==t.styleType?i("label",{staticClass:"dsf-custom-checkbox el-checkbox",class:t.className,attrs:{size:t.size},on:{click:function(t){t.stopPropagation()}}},[i("span",{staticClass:"el-checkbox__input",class:t.className},[i("span",{staticClass:"el-checkbox__inner"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.isChecked,expression:"isChecked"}],staticClass:"el-checkbox__original",attrs:{disabled:t.disabled,type:"checkbox","aria-hidden":"false"},domProps:{checked:Array.isArray(t.isChecked)?t._i(t.isChecked,null)>-1:t.isChecked},on:{change:[function(e){var i=t.isChecked,s=e.target,n=!!s.checked;if(Array.isArray(i)){var a=null,o=t._i(i,a);s.checked?o<0&&(t.isChecked=i.concat([a])):o>-1&&(t.isChecked=i.slice(0,o).concat(i.slice(o+1)))}else t.isChecked=n},function(e){return t.$emit("change",!t.isChecked)}]}})]),i("span",{staticClass:"el-checkbox__label"},[t._t("default",(function(){return[t._v(t._s(t.label))]}))],2)]):"style2"==t.styleType?i("label",{staticClass:"dsf-custom-checkbox el-radio",class:t.className,attrs:{size:t.size},on:{click:function(t){t.stopPropagation()}}},[i("span",{staticClass:"el-radio__input",class:t.className},[i("span",{staticClass:"el-radio__inner"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.isChecked,expression:"isChecked"}],staticClass:"el-radio__original",attrs:{disabled:t.disabled,type:"checkbox","aria-hidden":"false"},domProps:{checked:Array.isArray(t.isChecked)?t._i(t.isChecked,null)>-1:t.isChecked},on:{change:[function(e){var i=t.isChecked,s=e.target,n=!!s.checked;if(Array.isArray(i)){var a=null,o=t._i(i,a);s.checked?o<0&&(t.isChecked=i.concat([a])):o>-1&&(t.isChecked=i.slice(0,o).concat(i.slice(o+1)))}else t.isChecked=n},function(e){return t.$emit("change",!t.isChecked)}]}})]),i("span",{staticClass:"el-radio__label"},[t._t("default",(function(){return[t._v(t._s(t.label))]}))],2)]):t._e()},n=[],a={name:"DsfCustomCheckbox",props:{value:{type:[Boolean,String,Number],default:!1},label:{type:String,default:""},indeterminate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},styleType:{type:String,default:"style1"},size:{type:String,default:"medium"}},computed:{isChecked:{get:function(){return!!this.value},set:function(t){this.disabled||this.$emit("input",t)}},className:function(){return{"is-disabled":this.disabled,"is-checked":this.isChecked,"is-indeterminate":this.indeterminate}}}},o=a,l=i(0),r=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=r.exports},1033:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"permission-setting"},[i("div",{staticClass:"permission-setting-title"},[t._v("模板名称："+t._s(t.name))]),t.isPartSetting?[i("DesMetaDataSelectItem",{ref:"MetaDataSelectItem",attrs:{nameKey:"_name",idKey:"_id",url:t.url,defaultCheckedKey:t.defaultCheckedKey}})]:[i("el-tabs",{staticClass:"permission-setting-content",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.data,(function(e,s){return i("el-tab-pane",{key:e.name,attrs:{label:e.name,name:s+""}},[i("div",{staticClass:"permission-setting-item"},t._l(e.list,(function(e,s){return i("div",{key:s},["checkbox"===e.selector?[i("h3",[t._v(t._s(e.name))]),i("el-checkbox-group",{model:{value:e.detailList[0].checkList,callback:function(i){t.$set(e.detailList[0],"checkList",i)},expression:"btns.detailList[0].checkList"}},t._l(t.filterTplSelections(t.type[e.type].subDictVO.dict,1),(function(e){return i("el-checkbox",{key:e.text,attrs:{label:e.value}},[t._v(" "+t._s(e.text)+" ")])})),1)]:[i("h3",[t._v(t._s(e.name))]),t._l(t.filterTplSelections(e.detailList,2),(function(e){return i("div",{key:e.text,staticClass:"permission-setting-radio-group"},[i("label",[t._v(t._s(e.subTypeName))]),i("el-radio-group",{attrs:{fill:"#FFFFFF"},model:{value:e.auth,callback:function(i){t.$set(e,"auth",i)},expression:"radioItem.auth"}},[i("el-radio",{attrs:{label:"1"},nativeOn:{click:function(i){return i.preventDefault(),t.change("1",e)}}},[t._v(" 全部 ")]),i("el-radio",{attrs:{label:"0"},nativeOn:{click:function(i){return i.preventDefault(),t.change("0",e)}}},[t._v(" 禁用 ")]),"10"!=e.subType?i("el-radio",{attrs:{label:"2"},nativeOn:{click:function(i){return i.preventDefault(),t.change("2",e)}}},[t._v(" 部分 ")]):t._e()],1)],1)}))]],2)})),0)])})),1)]],2)},n=[],a=dsf.component({name:"DsfPlatformPermissionSetting",ctrlCaption:"权限设置",mixins:[$mixins.control],props:{isPartSetting:{type:Boolean,default:!1},_id:{type:String,default:""},tplType:{type:String,default:""},name:{type:String,default:""},url:{type:String,default:""},isTip:{type:Boolean,default:!0},defaultCheckedKey:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{data:[],type:{},activeName:"0"}},created:function(){this.isPartSetting||this.initData()},methods:{filterTplSelections:function(t,e){return t=1===e?3==this.tplType?t.filter((function(t){return!["3","4","6","7","11","12","13"].includes(t.value)})):4==this.tplType?t.filter((function(t){return!["3","4","5","6","7","10"].includes(t.value)})):t.filter((function(t){return!["9","10","11","12","13"].includes(t.value)})):3==this.tplType?t.filter((function(t){return["3","4"].includes(t.subType+"")})):4==this.tplType?t.filter((function(t){return["5"].includes(t.subType+"")})):t.filter((function(t){return["1","2","10"].includes(t.subType+"")})),t},initData:function(){var t=this,e=dsf.layer.loading();this.$http.get("template/findTemplatePermission?templateId=".concat(this._id)).done((function(e){var i=e.success,s=e.data,n=e.message;if(i){var a=s.templatePermissionDictVOS,o=s.templatePermissionBaseVOS,l=a.find((function(t){return"dictRoles"===t.key})).dict,r=a.filter((function(t){return"dictRoles"!==t.key}));if(r.forEach((function(e){t.$set(t.type,e.type,e)})),o)return o.forEach((function(e){e.list.forEach((function(e){e.selector=t.type[e.type].selector,e.detailList.forEach((function(t){"checkbox"===e.selector&&(t.auth.indexOf("^")>-1?t.checkList=t.auth.split("^"):t.checkList=[])}))}))})),t.data=o,!1;l.forEach((function(e){var i=[];Object.keys(t.type).forEach((function(s){var n,a,o=[];"checkbox"===t.type[s].selector?o.push({roleCode:e.value,roleName:e.text,typeName:t.type[s].name,type:t.type[s].type,subTypeName:t.type[s].subDictVO.name,subType:t.type[s].subDictVO.type,authExt:"",checkList:null===(n=t.type[s].subDictVO)||void 0===n?void 0:n.dict.map((function(t){return t.value})),auth:null===(a=t.type[s].subDictVO)||void 0===a?void 0:a.dict.map((function(t){return t.value})).join("^")}):t.type[s].dict.forEach((function(i){var n={roleCode:e.value,roleName:e.text,typeName:t.type[s].name,type:t.type[s].type,subTypeName:i.text,subType:i.value,authExt:"",auth:"1"};o.push(n)}));var l={name:t.type[s].name,type:t.type[s].type,selector:t.type[s].selector,detailList:o};i.push(l)})),t.data.push({name:e.text,type:e.value,list:i})}))}else t.$message(n||"请求异常",!1)})).error((function(e){dsf.error(e),t.$message((null===e||void 0===e?void 0:e.message)||"请求异常",!1)})).always((function(){dsf.layer.closeLoading(e)}))},yes:function(t){var e=this,i=[];if(this.data.forEach((function(t){t.list.forEach((function(t){t.detailList.forEach((function(t){t.dsOrder=t.dsOrder?t.dsOrder:i.length,t.templateId=t.templateId?t.templateId:e._id,i.push(t),t.checkList&&(t.auth=t.checkList.join("^"))}))}))})),i.length){var s=dsf.layer.loading();this.$http.post("template/saveTemplatePermission",{permissions:JSON.stringify(i)}).done((function(i){var s;if(i.success)return e.isTip&&dsf.layer.message("保存成功"),null===(s=e.$dialog)||void 0===s||s.close(),void("function"===typeof t&&t());dsf.layer.message("权限保存失败",!1)})).always((function(){dsf.layer.closeLoading(s)}))}},change:function(t,e){if(e.auth=t,"2"===t){var i=e.authExt,s=[];i&&(s=i.split(",")),this.$openDialog({title:"权限设置",content:"DsfPlatformPermissionSetting",width:"500px",height:"50vh",params:{isPartSetting:!0,name:this.name,url:"template/loadTemplateComponentGroupTree?type="+(Number(e.subType)+10),defaultCheckedKey:s},btns:[{text:"保存",handler:function(t){var i=t.$refs.MetaDataSelectItem.yes();0===i.length?(e.auth="1",e.authExt=""):e.authExt=i.map((function(t){return t._id})).join(",")}},{text:"取消",handler:function(t){i||(e.auth="1",e.authExt="")}}]})}}}}),o=a,l=(i(644),i(0)),r=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=r.exports},1034:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dsf-angle-select"},[i("div",{ref:"sliderBox",staticClass:"dsf-angle-select__pane",on:{mousedown:t.mousedown}},[i("span",{staticClass:"slider",style:t.thumbStyle})]),i("div",{staticClass:"dsf-angle-select__editor"},[i("el-input-number",{attrs:{min:0,max:360,size:"mini","step-strictly":""},model:{value:t.angle,callback:function(e){t.angle=t._n(e)},expression:"angle"}})],1)])},n=[],a=i(399),o={name:"DsfAngleSelect",mixins:[a["a"]],props:{value:{type:Number,default:0}},computed:{thumbStyle:function(){return{transform:"translateX(-50%) translateZ(0) rotate(".concat(this.value,"deg)")}},angle:{get:function(){return this.value},set:function(t){var e=this;t=Math.floor(t),this.$emit("input",t),this.$nextTick((function(){e.$emit("change",t)}))}}},methods:{pointChange:function(t,e,i,s){var n=this.$refs.sliderBox,a=n.offsetWidth,o=n.offsetHeight,l=i-a/2,r=s-o/2,c=Math.sqrt(Math.pow(l,2)+Math.pow(r,2)),u=180*Math.asin(l/c)/Math.PI;r>0?u=180-u:l<0&&(u=360+u),this.angle=u}}},l=o,r=i(0),c=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=c.exports},1035:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dsf-linear-gradual-select"},[i("div",{staticClass:"dsf-linear-gradual-select__main"},[i("div",{staticClass:"dsf-linear-gradual-select__pane"},[i("div",{style:t.paneStyle})]),i("dsf-angle-select",{staticClass:"dsf-linear-gradual-select__angle",on:{change:t.updateValue},model:{value:t.angle,callback:function(e){t.angle=e},expression:"angle"}})],1),i("color-slider",{staticClass:"dsf-linear-gradual-select__bar",on:{change:t.updateValue},model:{value:t.point,callback:function(e){t.point=e},expression:"point"}})],1)},n=[],a=i(605),o={name:"DsfLinearGradualSelect",components:{ColorSlider:a["a"]},props:{value:{type:Object,default:null}},data:function(){return{angle:0,point:[{length:0,color:"rgba(255,255,255,0)"},{length:100,color:"#000"}]}},computed:{paneStyle:function(){var t=this.point.map((function(t){var e=t.length,i=t.color;return"".concat(i," ").concat(e,"%")})).join(",");return{background:"linear-gradient(".concat(this.angle,"deg, ").concat(t,")")}}},watch:{value:{deep:!0,handler:function(t){this.init(t)}}},created:function(){this.init()},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value;t||(t={angle:0,point:[{length:0,color:"rgba(255,255,255,0)"},{length:100,color:"#000"}]}),this.angle=t.angle||0,this.point=t.point},updateValue:function(){var t=this.angle,e=this.point,i={angle:t,point:e};this.$emit("input",i),this.$emit("change",i)}}},l=o,r=i(0),c=Object(r["a"])(l,s,n,!1,null,null,null);e["default"]=c.exports},1036:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dsf-radial-gradual-select"},[i("div",{ref:"sliderBox",staticClass:"dsf-radial-gradual-select__pane",on:{mousedown:t.mousedown}},[i("div",{style:t.paneStyle}),i("span",{ref:"thumb",staticClass:"slider",style:t.sliderStyle})]),i("div",{staticClass:"dsf-radial-gradual-select__item"},[i("span",[t._v("渐变形状")]),i("el-select",{attrs:{size:"mini"},on:{change:t.updateValue},model:{value:t.shape,callback:function(e){t.shape=e},expression:"shape"}},t._l(t.config.shape,(function(t){return i("el-option",{key:t.value,attrs:{value:t.value,label:t.text}})})),1)],1),i("div",{staticClass:"dsf-radial-gradual-select__item"},[i("span",[t._v("渐变边界")]),i("el-select",{attrs:{size:"mini"},on:{change:t.updateValue},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}},t._l(t.config.size,(function(t){return i("el-option",{key:t.value,attrs:{value:t.value,label:t.text}})})),1)],1),i("div",{staticClass:"dsf-radial-gradual-select__size"}),i("color-slider",{staticClass:"dsf-radial-gradual-select__bar",on:{change:t.updateValue},model:{value:t.point,callback:function(e){t.point=e},expression:"point"}})],1)},n=[],a=i(399),o=i(605),l={name:"DsfRadialGradualSelect",mixins:[a["a"]],components:{ColorSlider:o["a"]},props:{value:{type:Object,default:null}},data:function(){return{config:{shape:[{text:"椭圆",value:"ellipse"},{text:"圆",value:"circle"}],size:[{text:"离圆心最远的角",value:"farthest-corner"},{text:"离圆心最近的角",value:"closest-corner"},{text:"离圆心最远的边",value:"farthest-side"},{text:"离圆心最近的边",value:"closest-side"}]},shape:"circle",size:"farthest-corner",position:[50,50],point:[{length:0,color:"rgba(255,255,255,0)"},{length:100,color:"#000"}]}},computed:{paneStyle:function(){var t=this.point.map((function(t){var e=t.length,i=t.color;return"".concat(i," ").concat(e,"%")})).join(","),e=this.position.map((function(t){return t+"%"})).join(" ");return{background:"radial-gradient(".concat(this.shape," ").concat(this.size," at ").concat(e,", ").concat(t,")")}},sliderStyle:function(){var t=this.position;return{top:t[1]+"%",left:t[0]+"%"}}},watch:{value:{deep:!0,handler:function(t){this.init(t)}}},created:function(){this.init()},methods:{init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value;t||(t={shape:"circle",size:"farthest-corner",position:[50,50],point:[{length:0,color:"rgba(255,255,255,0)"},{length:100,color:"#000"}]}),this.shape=t.shape,this.size=t.size,this.position=t.position,this.point=t.point},pointChange:function(t,e,i,s){var n=this.$refs.sliderBox,a=n.offsetWidth,o=n.offsetHeight;i=Math.floor(100*i/a),s=Math.floor(100*s/o),this.position=[i,s],this.updateValue()},updateValue:function(){var t=this.size,e=this.position,i=this.point,s=this.shape,n={size:t,position:e,point:i,shape:s};this.$emit("input",n),this.$emit("change",n)}}},r=l,c=i(0),u=Object(c["a"])(r,s,n,!1,null,null,null);e["default"]=u.exports},1037:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ds-meta-data-select-item"},[i("dsf-tree-select",{attrs:{"tree-data":t.treeData,loading:t.loading,multiple:t.multiple,theme:t.theme,"default-checked-key":t.defaultCheckedKey,"node-key":t.idKey,"node-name":t.nameKey,"search-control":"","default-expand-all":""},on:{"choose-node":t.chooseNode}})],1)},n=[],a={name:"DesMetaDataSelectItem",props:{nameKey:{type:String,default:"name"},idKey:{type:String,default:"ID"},url:{type:String,required:!0},multiple:{type:Boolean,default:!0},theme:{type:String,default:"theme2"},defaultCheckedKey:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{loading:!1,treeData:[],checkList:[]}},created:function(){this.postData()},methods:{yes:function(){return this.checkList},chooseNode:function(t){this.checkList=t,this.$emit("choose-node",t)},postData:function(){var t=this;this.loading=!0,this.$http.get(this.url,{namespace:""}).then((function(e){var i=e.data;i.success?(t.dataFormat(i.data),t.treeData=i.data):dsf.layer.message("请求异常！",!1)})).finally((function(){t.loading=!1}))},dataFormat:function(t){for(var e=0;e<t.length;e++){var i=t[e];i.label=i.name,i.children&&this.dataFormat(i.children)}}}},o=a,l=i(0),r=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=r.exports},1157:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loadComplete?i("div",{staticClass:"ds-tab-panel-setting"},[t._m(0),i("div",{staticClass:"ds-tab-panel-setting-warp",attrs:{type:"select"}},[i("draggable",t._b({attrs:{value:t.selectTabs},on:{update:t.update}},"draggable",t.options,!1),t._l(t.selectTabs,(function(e,s){return i("el-tag",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!tab.hide"}],key:e.name,attrs:{closable:""},on:{close:function(i){return t.removeTag(e,s)}}},[t._v(" "+t._s(e.title)+" ")])})),1)],1),t._m(1),i("div",{staticClass:"ds-tab-panel-setting-warp"},[i("el-checkbox-group",{model:{value:t.selectTabValues,callback:function(e){t.selectTabValues=e},expression:"selectTabValues"}},t._l(t.tabs,(function(e){return i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!tab.hide"}],key:e.name,attrs:{label:e.name,size:"medium",border:""}},[t._v(" "+t._s(e.title)+" ")])})),1)],1),i("div")]):t._e()},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ds-tab-panel-setting-title"},[i("div",{staticClass:"ds-tab-panel-setting-title-text"},[t._v("已选标签")]),i("div",{staticClass:"ds-tab-panel-setting-title-sbu"},[t._v("（长按标签可拖拽排序）")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ds-tab-panel-setting-title"},[i("div",{staticClass:"ds-tab-panel-setting-title-text"},[t._v("可选标签")]),i("div",{staticClass:"ds-tab-panel-setting-title-sbu"},[t._v("（都不选时，显示所有）")])])}],a={name:"DsfTabPanelSetting",mixins:[$mixins.tabPanelSetting]},o=a,l=i(0),r=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=r.exports},1169:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ds-schedule-list-setting"},[i("dsf-virtual-scroll",[i("el-form",{ref:"form",attrs:{"label-width":"200px"}},[t.settingTypeOptions.length?i("el-form-item",{attrs:{label:"显示模式："}},[i("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.settingTypeOptions,(function(e){return i("el-radio",{key:e,attrs:{label:e}},[t._v(t._s(t.typeConfig[e]))])})),1)],1):t._e(),i("el-form-item",{attrs:{label:"日程过多时显示省略号："}},[i("el-switch",{staticClass:"inset",attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.form.ellipsis,callback:function(e){t.$set(t.form,"ellipsis",e)},expression:"form.ellipsis"}})],1),i("el-form-item",{attrs:{label:"默认显示条数："}},[i("el-input-number",{attrs:{min:1,max:200,precision:0,"step-strictly":""},model:{value:t.form.pageSize,callback:function(e){t.$set(t.form,"pageSize",e)},expression:"form.pageSize"}})],1)],1)],1)],1)},n=[],a={name:"DsfScheduleListSetting",props:{settingTypeOptions:{type:Array,default:function(){return["week","week2","month"]}},settingConfig:{type:Object,default:function(){return{pageSize:5,type:"week",ellipsis:!0}}}},data:function(){return{typeConfig:{week:"周历",week2:"双周历",month:"月历"},form:{pageSize:5,type:"week",ellipsis:!0}}},created:function(){this.form=Object.assign({},this.form,this.settingConfig)},methods:{yes:function(){return this.form}}},o=a,l=(i(769),i(0)),r=Object(l["a"])(o,s,n,!1,null,null,null);e["default"]=r.exports},399:function(t,e,i){"use strict";e["a"]={data:function(){return{isDown:!1}},mounted:function(){window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)},beforeDestroy:function(){window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)},methods:{mousedown:function(t){this.isDown=!0;var e=t.offsetX,i=t.offsetY,s=t.screenX,n=t.screenY,a=this.__thumb||this.$refs.thumb;t.target===a?(this._offsetX=this._SoffsetX=t.target.offsetLeft,this._offsetY=this._SoffsetY=t.target.offsetTop,this._screenX=s,this._screenY=n):(this._offsetX=this._SoffsetX=e,this._offsetY=this._SoffsetY=i,this._screenX=s,this._screenY=n,this.setPoint())},mousemove:function(t){if(this.isDown){var e=t.screenX,i=t.screenY;this._offsetX=this._SoffsetX+e-this._screenX,this._offsetY=this._SoffsetY+i-this._screenY,this.setPoint()}},mouseup:function(t){if(this.isDown){var e=t.screenX,i=t.screenY;this._offsetX=this._SoffsetX+e-this._screenX,this._offsetY=this._SoffsetY+i-this._screenY,this.setPoint(),this.isDown=!1}},setPoint:function(){var t,e=this.$refs.sliderBox,i=e.offsetWidth,s=e.offsetHeight,n=this._offsetX;n<0?n=0:n>i&&(n=i);var a=this._offsetY;a<0?a=0:a>s&&(a=s),null===(t=this.pointChange)||void 0===t||t.call(this,n,a,this._offsetX,this._offsetY)}}}},510:function(t,e,i){var s=i(645);"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var n=i(19).default;n("c2906866",s,!0,{sourceMap:!1,shadowMode:!1})},566:function(t,e,i){var s=i(770);"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var n=i(19).default;n("7e64ce2a",s,!0,{sourceMap:!1,shadowMode:!1})},605:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dsf-color-slider"},[i("div",{ref:"sliderBox",staticClass:"dsf-color-slider__bar"},[i("div",{staticClass:"dsf-color-slider__bar--bg",style:t.paneStyle,on:{click:function(e){return e.target!==e.currentTarget?null:t.addPoint.apply(null,arguments)}}}),t._l(t.value,(function(e,s){return[i("div",{key:s,staticClass:"dsf-color-slider__point",style:{left:e.length+"%"},on:{click:function(t){t.stopPropagation()}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"poi.active"}],staticClass:"tips"},[t._v(t._s(e.length))]),i("el-popover",{ref:"popover",refInFor:!0,attrs:{tabindex:1,placement:"bottom",width:"300",trigger:"manual"},model:{value:e.show,callback:function(i){t.$set(e,"show",i)},expression:"poi.show"}},[i("svg",{attrs:{slot:"reference",width:"14",height:"18",viewBox:"-7 0 14 18"},slot:"reference"},[i("polygon",{attrs:{fill:e.color,points:"0,2 -6,8 -6,17 6,17 6,8"},on:{mousedown:function(i){return t.pointMousedown(e,i)},mouseup:function(i){return t.showColorPop(e,s,i)}}})]),i("dsf-color-select",{staticStyle:{padding:"0"},on:{change:function(e){return t.$emit("change",t.value)}},model:{value:e.color,callback:function(i){t.$set(e,"color",i)},expression:"poi.color"}})],1),t.value.length>2?i("i",{directives:[{name:"show",rawName:"v-show",value:!e.active,expression:"!poi.active"}],staticClass:"remove iconfont icon-guanbi2",attrs:{title:"删除"},on:{click:function(e){return t.removePoint(s)}}}):t._e()],1)]}))],2)])},n=[],a=i(399),o={name:"ColorSlider",mixins:[a["a"]],props:{value:{default:Array,required:!0}},data:function(){return{activePoint:null}},computed:{paneStyle:function(){var t=this.value.map((function(t){var e=t.length,i=t.color;return"".concat(i," ").concat(e,"%")})).join(",");return{background:"linear-gradient(90deg, ".concat(t,")")}}},watch:{isDown:function(t){t||this.$set(this.activePoint,"active",!1)}},created:function(){var t;this.activePoint=null===(t=this.value)||void 0===t?void 0:t[0]},methods:{addPoint:function(t){for(var e=this,i=t.offsetX,s=this.$refs.sliderBox.offsetWidth,n=this.value,a=Math.floor(100*i/s),o=n.length,l=0,r=o;l<r;l++)if(n[l].length>a){o=l;break}this.value.splice(o,0,{length:a,color:"#fff"}),this.$nextTick((function(){e.$emit("change",e.value)}))},removePoint:function(t){var e=this;this.value.splice(t,1),this.$nextTick((function(){e.$emit("change",e.value)}))},pointMousedown:function(t,e){var i=e.offsetX,s=e.offsetY,n=e.screenX,a=e.screenY,o=e.target;while(1){if(o.classList.contains("dsf-color-slider__point")){this.__thumb=o;break}o=o.parentElement}this.___downTime=Date.now(),this.___offsetX=i,this.activePoint=t,this.mousedown({offsetX:i,offsetY:s,screenX:n,screenY:a,target:this.__thumb}),this.$set(t,"active",!0)},showColorPop:function(t,e,i){var s=this;if(!(Date.now()-this.___downTime>300)){var n=i.offsetX;if(this.___offsetX===n&&!t.show){this.$set(t,"show",!0);var a=function e(){window.removeEventListener("mouseup",e),t.show=!1,s.$forceUpdate()};setTimeout((function(){window.addEventListener("mouseup",a);var t=s.$refs.popover[e].popperElm,i=t.firstElementChild.__vue__;t.onmouseup=function(t){t.stopPropagation(),_.each(i.$refs,(function(e){return e.mouseup(t)}))}}))}}},pointChange:function(t){var e=this,i=this.$refs.sliderBox.offsetWidth;this.$set(this.activePoint,"length",Math.floor(100*t/i)),this.value.sort((function(t,e){return t.length-e.length})),this.$nextTick((function(){e.$emit("change",e.value)}))}}},l=o,r=i(0),c=Object(r["a"])(l,s,n,!1,null,null,null);e["a"]=c.exports},644:function(t,e,i){"use strict";i(510)},645:function(t,e,i){"use strict";i.r(e)},769:function(t,e,i){"use strict";i(566)},770:function(t,e,i){"use strict";i.r(e)},955:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dsf-color-select"},[i("div",{staticClass:"dsf-color-select-main"},[i("panel",{ref:"panel"}),i("hue",{ref:"hue"})],1),i("div",{staticClass:"dsf-color-select-main"},[t.showAlpha?i("alpha",{ref:"alpha"}):t._e()],1),i("div",{staticClass:"dsf-color-select-input"},[t.isEyeDropper?i("label",{staticClass:"dropper",attrs:{title:"取色器"},on:{click:t.doEyeDropper}},[i("dsf-icon",{attrs:{name:"a-5"}})],1):t._e(),i("label",[i("span",[t._v("R")]),i("el-input-number",{attrs:{value:t.rgba[0],min:0,max:255,controls:!1,size:"mini","step-strictly":""},on:{change:function(e){return t.setColor("r",e)}}})],1),i("label",[i("span",[t._v("G")]),i("el-input-number",{attrs:{value:t.rgba[1],min:0,max:255,controls:!1,size:"mini","step-strictly":""},on:{change:function(e){return t.setColor("g",e)}}})],1),i("label",[i("span",[t._v("B")]),i("el-input-number",{attrs:{value:t.rgba[2],min:0,max:255,controls:!1,size:"mini","step-strictly":""},on:{change:function(e){return t.setColor("b",e)}}})],1),i("label",[i("span",[t._v("A %")]),i("el-input-number",{attrs:{value:t.rgba[3],min:0,max:255,controls:!1,size:"mini","step-strictly":""},on:{change:function(e){return t.setColor("a",e)}}})],1),i("label",{staticClass:"str"},[i("span",[t._v("HEX")]),i("el-input",{attrs:{size:"mini"},on:{change:t.setHex},model:{value:t.hex,callback:function(e){t.hex=e},expression:"hex"}})],1)])])},n=[],a=i(8),o=i.n(a),l=i(9),r=i.n(l),c=i(33),u=i.n(c),h=i(34),d=i.n(h),f=function(t,e,i){return[t,e*i/((t=(2-e)*i)<1?t:2-t)||0,t/2]},p=function(t){return"string"===typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)},m=function(t){return"string"===typeof t&&-1!==t.indexOf("%")},v=function(t,e){p(t)&&(t="100%");var i=m(t);return t=Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)},g={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},y=function(t){var e=t.r,i=t.g,s=t.b,n=function(t){t=Math.min(Math.round(t),255);var e=Math.floor(t/16),i=t%16;return""+(g[e]||e)+(g[i]||i)};return isNaN(e)||isNaN(i)||isNaN(s)?"":"#"+n(e)+n(i)+n(s)},_={A:10,B:11,C:12,D:13,E:14,F:15},b=function(t){return 2===t.length?16*(_[t[0].toUpperCase()]||+t[0])+(_[t[1].toUpperCase()]||+t[1]):_[t[1].toUpperCase()]||+t[1]},x=function(t,e,i){e/=100,i/=100;var s,n,a=e,o=Math.max(i,.01);return i*=2,e*=i<=1?i:2-i,a*=o<=1?o:2-o,n=(i+e)/2,s=0===i?2*a/(o+a):2*e/(i+e),{h:t,s:100*s,v:100*n}},k=function(t,e,i){t=v(t,255),e=v(e,255),i=v(i,255);var s,n,a=Math.max(t,e,i),o=Math.min(t,e,i),l=a,r=a-o;if(n=0===a?0:r/a,a===o)s=0;else{switch(a){case t:s=(e-i)/r+(e<i?6:0);break;case e:s=(i-t)/r+2;break;case i:s=(t-e)/r+4;break}s/=6}return{h:360*s,s:100*n,v:100*l}},C=function(t,e,i){t=6*v(t,360),e=v(e,100),i=v(i,100);var s=Math.floor(t),n=t-s,a=i*(1-e),o=i*(1-n*e),l=i*(1-(1-n)*e),r=s%6,c=[i,o,a,a,l,i][r],u=[l,i,i,o,a,a][r],h=[a,a,l,i,i,o][r];return{r:Math.round(255*c),g:Math.round(255*u),b:Math.round(255*h)}},S=function(){function t(e){for(var i in u()(this,t),this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",e=e||{},e)this[i]=e[i];this.doOnChange()}return d()(t,[{key:"set",value:function(t,e){if(1!==arguments.length||"object"!==r()(t))this["_"+t]=e,this.doOnChange();else for(var i in t)this.set(i,t[i])}},{key:"get",value:function(t){return this["_"+t]}},{key:"toRgb",value:function(){return C(this._hue,this._saturation,this._value)}},{key:"toHex",value:function(t,e,i){return void 0!==i&&void 0!==t&&(t={r:t,g:e,b:i}),y(t||this.toRgb())}},{key:"fromString",value:function(t){var e=this;if(!t)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();var i=function(t,i,s){e._hue=Math.max(0,Math.min(360,t)),e._saturation=Math.max(0,Math.min(100,i)),e._value=Math.max(0,Math.min(100,s)),e.doOnChange()};if(-1!==t.indexOf("hsl")){var s=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((function(t){return""!==t})).map((function(t,e){return e>2?parseFloat(t):parseInt(t,10)}));if(4===s.length?this._alpha=Math.floor(100*parseFloat(s[3])):3===s.length&&(this._alpha=100),s.length>=3){var n=x(s[0],s[1],s[2]),a=n.h,o=n.s,l=n.v;i(a,o,l)}}else if(-1!==t.indexOf("hsv")){var r=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((function(t){return""!==t})).map((function(t,e){return e>2?parseFloat(t):parseInt(t,10)}));4===r.length?this._alpha=Math.floor(100*parseFloat(r[3])):3===r.length&&(this._alpha=100),r.length>=3&&i(r[0],r[1],r[2])}else if(-1!==t.indexOf("rgb")){var c=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((function(t){return""!==t})).map((function(t,e){return e>2?parseFloat(t):parseInt(t,10)}));if(4===c.length?this._alpha=Math.floor(100*parseFloat(c[3])):3===c.length&&(this._alpha=100),c.length>=3){var u=k(c[0],c[1],c[2]),h=u.h,d=u.s,f=u.v;i(h,d,f)}}else if(-1!==t.indexOf("#")){var p,m,v,g=t.replace("#","").trim();if(!/^(?:[0-9a-fA-F]{3}){1,2}|[0-9a-fA-F]{8}$/.test(g))return;3===g.length?(p=b(g[0]+g[0]),m=b(g[1]+g[1]),v=b(g[2]+g[2])):6!==g.length&&8!==g.length||(p=b(g.substring(0,2)),m=b(g.substring(2,4)),v=b(g.substring(4,6))),8===g.length?this._alpha=Math.floor(b(g.substring(6))/255*100):3!==g.length&&6!==g.length||(this._alpha=100);var y=k(p,m,v),_=y.h,C=y.s,S=y.v;i(_,C,S)}}},{key:"compare",value:function(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}},{key:"doOnChange",value:function(){var t=this._hue,e=this._saturation,i=this._value,s=this._alpha,n=this.format;if(this.enableAlpha){var a=s/100;switch(n){case"hsl":var o=f(t,e/100,i/100);this.value="hsla(".concat(t,", ").concat(Math.round(100*o[1]),"%, ").concat(Math.round(100*o[2]),"%, ").concat(a,")");break;case"hsv":this.value="hsva(".concat(t,", ").concat(Math.round(e),"%, ").concat(Math.round(i),"%, ").concat(a,")");break;default:var l=C(t,e,i),r=l.r,c=l.g,u=l.b;this.value="rgba(".concat(r,", ").concat(c,", ").concat(u,", ").concat(a,")")}}else switch(n){case"hsl":var h=f(t,e/100,i/100);this.value="hsl(".concat(t,", ").concat(Math.round(100*h[1]),"%, ").concat(Math.round(100*h[2]),"%)");break;case"hsv":this.value="hsv(".concat(t,", ").concat(Math.round(e),"%, ").concat(Math.round(i),"%)");break;case"rgb":var d=C(t,e,i),p=d.r,m=d.g,v=d.b;this.value="rgb(".concat(p,", ").concat(m,", ").concat(v,")");break;default:this.value=y(C(t,e,i))}}}]),t}(),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"sliderBox",staticClass:"dsf-color-select-hue",on:{mousedown:t.mousedown}},[i("span",{ref:"thumb",staticClass:"slider",style:t.sliderStyle})])},$=[],T=i(399),D={name:"Hue",mixins:[T["a"]],data:function(){return{sliderType:"y",top:0}},computed:{sliderStyle:function(){return{top:this.top}}},created:function(){this.updatePoint()},methods:{updatePoint:function(){var t=this.$parent.color._hue;return this.top=100*t/360+"%",this},pointChange:function(t,e){this.top=e+"px";var i=this.$refs.sliderBox.offsetHeight;this.$parent.color.set("hue",360*e/i),this.$parent.colorChange()}}},M=D,N=i(0),E=Object(N["a"])(M,w,$,!1,null,null,null),F=E.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"sliderBox",staticClass:"dsf-color-select-panel",style:t.hueStyle,on:{mousedown:t.mousedown}},[i("span",{ref:"thumb",staticClass:"slider",style:t.sliderStyle})])},P=[],I={name:"Panel",mixins:[T["a"]],data:function(){return{bg:"#fff",top:0,left:0}},computed:{hueStyle:function(){return{"background-color":this.bg}},sliderStyle:function(){return{top:this.top,left:this.left}}},created:function(){this.updateBg(),this.updatePoint()},methods:{updateBg:function(){var t=this.$parent.color._hue;return this.bg="hsla(".concat(t,", 100%, 50%, 1)"),this},updatePoint:function(){var t=this.$parent.color,e=t._saturation,i=t._value;return this.top=100-i+"%",this.left=e+"%",this},pointChange:function(t,e){this.top=e+"px",this.left=t+"px";var i=this.$refs.sliderBox,s=i.offsetWidth,n=i.offsetHeight;this.$parent.color.set("saturation",100*t/s),this.$parent.color.set("value",100*(n-e)/n),this.$parent.colorChange()}}},L=I,B=Object(N["a"])(L,O,P,!1,null,null,null),z=B.exports,A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"sliderBox",staticClass:"dsf-color-select-alpha",on:{mousedown:t.mousedown}},[i("div",{staticClass:"dsf-color-select-alpha__bar",style:t.alphaStyle}),i("span",{ref:"thumb",staticClass:"slider",style:t.sliderStyle})])},K=[],j={name:"Alpha",mixins:[T["a"]],data:function(){return{bg:"#fff",left:0}},computed:{alphaStyle:function(){return{background:"linear-gradient(-90deg, ".concat(this.bg," ,transparent)")}},sliderStyle:function(){return{left:this.left}}},created:function(){this.updateBg(),this.updatePoint()},methods:{updateBg:function(){var t=this.$parent.color.toRgb(),e=t.r,i=t.g,s=t.b;return this.bg="rgb(".concat(e,", ").concat(i,", ").concat(s,")"),this},updatePoint:function(){var t=this.$parent.color._alpha,e=void 0===t?100:t;return this.left=e+"%",this},pointChange:function(t){this.left=t+"px";var e=this.$refs.sliderBox.offsetWidth;this.$parent.color.set("alpha",100*t/e),this.$parent.colorChange()}}},H=j,X=Object(N["a"])(H,A,K,!1,null,null,null),Y=X.exports,V=!!window.EyeDropper,W={name:"DsfColorSelect",components:{Hue:F,Panel:z,Alpha:Y},props:{value:{type:String,default:"rgba(255,255,255,0)"},showAlpha:{type:Boolean,default:!0},colorFormat:{type:String,default:"hex"}},data:function(){return this.isEyeDropper=V,{color:null,valueCopy:"",rgba:[255,255,255,100],hex:"#FFFFFF"}},computed:{options:function(){return{enableAlpha:this.showAlpha,format:this.colorFormat}}},watch:{value:function(t){var e;this.color&&(t!==this.valueCopy&&(this.valueCopy=t,this.color.fromString(t),null===(e=this.$refs.hue)||void 0===e||e.updatePoint(),this.init()))}},created:function(){var t=new S(this.options);t.fromString(this.value),this.color=t,this.valueCopy=this.value,this.init(),V&&(this.eyeDropper=new EyeDropper)},methods:{init:function(){var t,e,i,s,n,a;null===(t=this.$refs.hue)||void 0===t||null===(e=t.updateBg)||void 0===e||e.call(t),null===(i=this.$refs.panel)||void 0===i||null===(i=i.updatePoint())||void 0===i||null===(s=i.updateBg)||void 0===s||s.call(i),null===(n=this.$refs.alpha)||void 0===n||null===(n=n.updatePoint())||void 0===n||null===(a=n.updateBg)||void 0===a||a.call(n);var o=this.color.toRgb(),l=o.r,r=o.g,c=o.b;this.rgba=[l,r,c,this.color._alpha],this.hex=this.color.toHex(l,r,c)},colorChange:function(){var t=this.color.value;this.valueCopy=t,this.$refs.panel.updateBg(),this.$refs.alpha.updateBg(),this.$emit("input",t),this.$emit("change",t);var e=this.color.toRgb(),i=e.r,s=e.g,n=e.b;this.rgba=[i,s,n,this.color._alpha],this.hex=this.color.toHex(i,s,n)},setColor:function(t,e){var i=o()(this.rgba,4),s=i[0],n=i[1],a=i[2],l=i[3],r={r:s,g:n,b:a,a:l};r[t]=e,this.color.fromString("rgba(".concat(r.r,",").concat(r.g,",").concat(r.b,",").concat(r.a/100,")")),this.$refs.hue.updatePoint(),this.init();var c=this.color.value;this.valueCopy=c,this.$emit("input",c),this.$emit("change",c)},setHex:function(t){var e;if(/^#(([0-9A-Fa-f]{3})|([0-9A-Fa-f]{6}))$/.test(t)){this.color.fromString(t),this.color.set("alpha",this.rgba[3]),null===(e=this.$refs.hue)||void 0===e||e.updatePoint(),this.init();var i=this.color.value;this.valueCopy=i,this.$emit("input",i),this.$emit("change",i)}else{var s=o()(this.rgba,3),n=s[0],a=s[1],l=s[2];this.hex=this.color.toHex({r:n,g:a,b:l})}},doEyeDropper:function(){var t=this;this.eyeDropper&&this.eyeDropper.open().then((function(e){t.$emit("input",e.sRGBHex)})).catch(dsf.noop)}}},R=W,G=Object(N["a"])(R,s,n,!1,null,null,null);e["default"]=G.exports}}]);
//# sourceMappingURL=../../../smap/platform/dsf-platform.platform_pc_output_common.js.map