/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[]).push([[8],Array(71).concat([function(e,t,a){"use strict";a.r(t);var n=a(9),l=a.n(n);t["default"]={methods:{objectTostring:function(e,t){var a=this;if(null===e)return"null,\n";if("string"===typeof e)return"'".concat(e,"',\n");if("function"===typeof e)return e.toString()+",";if(Array.isArray(e)){var n="[\n          ";return e.forEach((function(e){n+="".concat(a.objectTostring(e))})),n+="]","".concat(n,",\n")}if("object"===l()(e)){var i="{\n          ";return Object.keys(e).forEach((function(t){i+="".concat(t,":"),i+=a.objectTostring(e[t])})),i+="}","".concat(i,t?"\n":",\n")}return"".concat(e,",\n")},dealChartOption:function(e,t){e.chartString=this.objectTostring(t,!0)},yes:function(){return this.dealChartOption(this.owner,this.wholeOptions),this.wholeOptions}}}},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pre-chart"},[a("div",{ref:"prechart",staticClass:"chart",staticStyle:{height:"100%"}})])},l=[],i={props:{options:{type:Object,default:function(){return{}}}},data:function(){return{chart:null}},watch:{options:{handler:function(e){this.chart&&this.chart.setOption(e,!0)},deep:!0}},mounted:function(){var e=window.$echarts||window.echarts;this.chart=e.init(this.$refs["prechart"]),this.chart.setOption(this.options)}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标题")]),a("el-radio-group",{model:{value:e.assignOpt.show,callback:function(t){e.$set(e.assignOpt,"show",t)},expression:"assignOpt.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标题名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:e.assignOpt.text,callback:function(t){e.$set(e.assignOpt,"text",t)},expression:"assignOpt.text"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标题颜色")]),a("DsfInputColor",{attrs:{size:"small"},model:{value:e.assignOpt.textStyle.color,callback:function(t){e.$set(e.assignOpt.textStyle,"color",t)},expression:"assignOpt.textStyle.color"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标题字号")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:e.assignOpt.textStyle.fontSize,callback:function(t){e.$set(e.assignOpt.textStyle,"fontSize",t)},expression:"assignOpt.textStyle.fontSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("子标题名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:e.assignOpt.subtext,callback:function(t){e.$set(e.assignOpt,"subtext",t)},expression:"assignOpt.subtext"}})],1),a("div",{staticClass:"cell-item",staticStyle:{width:"100%"}},[a("div",{staticClass:"config-title"},[e._v("标题位置")]),a("el-row",{attrs:{gutter:2}},e._l(e.padding,(function(t,n){return a("el-col",{key:n,attrs:{span:6}},[[a("el-input",{staticClass:"mtext",attrs:{placeholder:e.placeholder(n),size:"small"},model:{value:e.padding[n],callback:function(t){e.$set(e.padding,n,t)},expression:"padding[$index]"}})]],2)})),1)],1)]),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)])},l=[],i=a(401),s=a.n(i),r=["top","right","bottom","left"],o=["top","right","bottom","left"],c={name:"TitleConfig",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{assignOpt:{text:"",subtext:"",show:!0,itemGap:10,textStyle:{}},padding:[],custom:!1}},watch:{assignOpt:{handler:function(e){var t=Object.assign(this.options,e);this.$emit("change-options",{type:"title",options:t})},deep:!0},padding:function(e){this.$set(this.options,"top",e[0]),this.$set(this.options,"right",e[1]),this.$set(this.options,"bottom",e[2]),this.$set(this.options,"left",e[3]);var t=this.options;this.$emit("change-options",{type:"title",options:t})}},created:function(){var e=this.options;this.padding.push(e.top,e.right,e.bottom,e.left);e.top,e.right,e.bottom,e.left;var t=s()(e,r);Object.assign(this.assignOpt,t)},methods:{placeholder:function(e){var t="";switch(e){case 0:t="上";break;case 1:t="右";break;case 2:t="下";break;case 3:t="左";break}return t},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent()),t=e.top,a=e.right,n=e.bottom,l=e.left,i=s()(e,o);this.padding=[t,a,n,l],this.assignOpt=i},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=_.cloneDeep(e.assignOpt);t.top=e.padding[0],t.right=e.padding[1],t.bottom=e.padding[2],t.left=e.padding[3];var a=JSON.stringify(t,null,"\t");e.$refs["editor"].setContent(a)}))}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item",staticStyle:{width:"100%"}},[a("div",{staticClass:"config-title"},[e._v("图例位置")]),a("el-row",{attrs:{gutter:2}},e._l(e.padding,(function(t,n){return a("el-col",{key:n,attrs:{span:6}},[[a("el-input",{staticClass:"mtext",attrs:{size:"small",placeholder:e.placeholder(n)},model:{value:e.padding[n],callback:function(t){e.$set(e.padding,n,t)},expression:"padding[$index]"}})]],2)})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示图例")]),a("el-radio-group",{model:{value:e.assignOpt.show,callback:function(t){e.$set(e.assignOpt,"show",t)},expression:"assignOpt.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("图例朝向")]),a("el-radio-group",{model:{value:e.assignOpt.orient,callback:function(t){e.$set(e.assignOpt,"orient",t)},expression:"assignOpt.orient"}},[a("el-radio",{attrs:{label:"horizontal"}},[e._v("横向")]),a("el-radio",{attrs:{label:"vertical"}},[e._v("纵向")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("图例形状")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.assignOpt.icon,callback:function(t){e.$set(e.assignOpt,"icon",t)},expression:"assignOpt.icon"}},[a("el-option",{attrs:{label:"默认",value:""}}),a("el-option",{attrs:{label:"圆",value:"circle"}}),a("el-option",{attrs:{label:"空心圆 ",value:"emptyCircle"}}),a("el-option",{attrs:{label:"长方形",value:"rect"}}),a("el-option",{attrs:{label:"圆角长方形",value:"roundRect"}}),a("el-option",{attrs:{label:"三角形",value:"triangle"}}),a("el-option",{attrs:{label:"钻石形",value:"diamond"}}),a("el-option",{attrs:{label:"pin",value:"pin"}}),a("el-option",{attrs:{label:"箭头",value:"arrow"}}),a("el-option",{attrs:{label:"无",value:"none"}})],1)],1)]),a("br"),a("div",[e._v("属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)])},l=[],i=a(401),s=a.n(i),r=["top","right","bottom","left"],o=["top","right","bottom","left"],c={name:"LegendConfig",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{assignOpt:{show:!0,orient:"horizontal",icon:""},padding:[],custom:!1}},watch:{assignOpt:{handler:function(e){var t=Object.assign(this.options,e);this.$emit("change-options",{type:"legend",options:t})},deep:!0},padding:function(e){this.$set(this.options,"top",e[0]),this.$set(this.options,"right",e[1]),this.$set(this.options,"bottom",e[2]),this.$set(this.options,"left",e[3]);var t=this.options;this.$emit("change-options",{type:"legend",options:t})}},created:function(){var e=this.options;this.padding.push(e.top,e.right,e.bottom,e.left);e.top,e.right,e.bottom,e.left;var t=s()(e,r);Object.assign(this.assignOpt,t)},methods:{placeholder:function(e){var t="";switch(e){case 0:t="上";break;case 1:t="右";break;case 2:t="下";break;case 3:t="左";break}return t},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent()),t=e.top,a=e.right,n=e.bottom,l=e.left,i=s()(e,o);this.padding=[t,a,n,l],this.assignOpt=i},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=_.cloneDeep(e.assignOpt);t.top=e.padding[0],t.right=e.padding[1],t.bottom=e.padding[2],t.left=e.padding[3];var a=JSON.stringify(t,null,"\t");e.$refs["editor"].setContent(a)}))}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-enum-editor-item"},[a("div",{staticClass:"ds-enum-editor-item-left",class:{fill:e.hideRight}},[a("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":e.idKey,"node-name":e.nameKey,loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":""},on:{"choose-node":e.chooseNode,"choose-key":function(t){e.radioId=t}}})],1),e.hideRight?e._e():a("div",{staticClass:"ds-enum-editor-item-main"},[a("div",{staticClass:"ds-enum-editor-item-main-filter"},[a("label",[a("span",[e._v("层级过滤")]),a("el-select",{staticStyle:{width:"90px"},attrs:{size:"mini"},model:{value:e.levelFilter,callback:function(t){e.levelFilter=t},expression:"levelFilter"}},[a("el-option",{attrs:{value:-1,label:"全部"}}),e._l(e.levelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2)],1)]),a("dsf-el-table",{ref:"singleTable",attrs:{border:"",stripe:"",height:"100%","row-key":"hash","expand-row-keys":e.expandKeys,"highlight-current-row":"",data:e.tableList,"empty-text":e.loading?"数据加载中...":e.emptyText,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-class-name":e.tableRowClassName,size:"mini"},on:{"expand-change":e.expandChange,"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",index:e.startIndex+1,label:"序号",width:"60",align:"center",fixed:""}}),a("el-table-column",{attrs:{prop:"text",label:"文本",width:"200","header-align":"center"}}),a("el-table-column",{attrs:{prop:"value",label:"值",width:"120","header-align":"center"}}),a("el-table-column",{attrs:{prop:"parent",label:"父级名称",width:"200","header-align":"center"}}),e.isHideValue?a("el-table-column",{attrs:{label:"隐藏",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.row.__data.isHide,callback:function(a){e.$set(t.row.__data,"isHide",a)},expression:"scope.row.__data.isHide"}})]}}],null,!1,2315740547)}):e._e(),e.isDisabledValue?a("el-table-column",{attrs:{label:"禁用",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.row.__data.isDisabled,callback:function(a){e.$set(t.row.__data,"isDisabled",a)},expression:"scope.row.__data.isDisabled"}})]}}],null,!1,693187923)}):e._e(),e.isAttachFull?a("el-table-column",{attrs:{label:"追加填空",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.row.__data.isAttachFull,callback:function(a){e.$set(t.row.__data,"isAttachFull",a)},expression:"scope.row.__data.isAttachFull"}})]}}],null,!1,725629755)}):e._e(),e.isOrder?a("el-table-column",{attrs:{label:"展示顺序",width:"100","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input-number",{attrs:{controls:!1,size:"mini","step-strictly":""},model:{value:t.row.__data.showOrder,callback:function(a){e.$set(t.row.__data,"showOrder",a)},expression:"scope.row.__data.showOrder"}})]}}],null,!1,4108429104)}):e._e(),e.isTips?a("el-table-column",{attrs:{label:"提示信息",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{rows:1,type:"textarea",resize:"vertical",size:"mini",autosize:""},model:{value:t.row.__data.tips,callback:function(a){e.$set(t.row.__data,"tips",a)},expression:"scope.row.__data.tips"}})]}}],null,!1,3740154837)}):e._e()],1),a("div",{staticClass:"ds-enum-editor-item-main-pagination"},["db"==e.value.type?a("el-checkbox",{on:{change:e.getResult},model:{value:e.val.resultFormat,callback:function(t){e.$set(e.val,"resultFormat",t)},expression:"val.resultFormat"}},[e._v(" 是否输出树形结构 ")]):a("i"),a("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,"pager-count":5,total:e.total,layout:"total, prev, pager, next, jumper",background:"",small:""},on:{"current-change":function(t){e.pageNum=t}}})],1)],1)])},l=[],i=a(3),s=a.n(i);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"EnumEditorItem",props:{value:{type:Object,required:!0},emptyText:{type:String,default:"请选择"},treeLoading:{type:Boolean,default:!1},treeData:{type:Array,default:function(){return[]}},tablePost:{type:Function,default:dsf.noop},type:{type:String,required:!0},hideRight:{type:Boolean,default:!1},nameKey:{type:String,default:"label",desc:"树节点已哪个字段作为名称"},idKey:{type:String,default:"ID"},defaultCheckedKey:{type:[String,Number],default:""},isAttachFull:{type:Boolean,default:!1},isHideValue:{type:Boolean,default:!1},isDisabledValue:{type:Boolean,default:!1},isTips:{type:Boolean,default:!1},isTreeMetaSelect:{type:Boolean,default:!1},isOrder:{type:Boolean,default:!1}},data:function(){return{loading:!1,radioId:null,pageSize:100,pageNum:1,metaTree:{},currentRowKey:"",resultFormat:!1,val:{type:this.type,code:null,attach:[]},expandKeys:[],levelFilter:-1,levelOptions:[]}},computed:{total:function(){var e=this.value;return this.metaTree.attach&&(e=this.metaTree),e.attach.length},startIndex:function(){return this.pageNum*this.pageSize-this.pageSize},tableList:function(){var e=this.levelFilter,t=this.value,a=this.metaTree,n=this.startIndex,l=this.pageSize,i=this.expandKeys,s=t;if(a.attach&&(s=a),s.attach){var r=e>-1?[]:s.attach;return dsf.deepForEach(s.attach,(function(t,a,n,l){if(e>-1&&a>e)return 0;if(t.hash||(dsf.setObjAttr(t,"hash",dsf.uuid()),l&&dsf.setObjAttr(t,"parent",l.text),i.push(t.hash)),dsf.setObjAttr(t,"__data",t),a===e){var s=o(o({},t),{},{hash:t.hash,parent:t.parent});delete s.children,dsf.setObjAttr(s,"__data",t),r.push(s)}})),r.slice(n,n+l)}return[]}},watch:{radioId:function(e,t){var a=this;"meta"===this.type||"ds"===this.type?this.val["chooseKey"]=e:(this.val.code=e,this.getResult(),this.pageNum=1,e&&e!==t&&(this.loading=!0,this.tablePost(e,(function(e){a.updateValue(e),a.loading=!1}))))}},created:function(){var e=this;if(this.value){var t=this.value.chooseKey||this.value.code;t&&(this.radioId=t,this.loading=!0,this.tablePost(t,(function(t){e.updateValue(t),e.loading=!1})));var a=this.value,n=a.attach,l=void 0===n?[]:n,i=a.resultFormat,s=void 0!==i&&i,r=a.code,o=void 0===r?null:r,c=a.attachFullMaps,u=void 0===c?void 0:c,d=a.attachHideMaps,f=void 0===d?void 0:d,p=a.attachDisabledMaps,h=void 0===p?void 0:p,m=a.attachTipsMaps,b=void 0===m?{}:m,v=a.attachOrderMaps,g=void 0===v?void 0:v,y={type:this.type,code:o,attach:l,attachFullMaps:u,attachHideMaps:f,attachDisabledMaps:h,attachTipsMaps:b,attachOrderMaps:g};"db"==this.type&&(y.resultFormat=s),this.val=y}},methods:{expandChange:function(e,t){var a=this.expandKeys.findIndex((function(t){return e.hash==t}));e.hash&&(a>=0?t||this.expandKeys.splice(a,1):t&&this.expandKeys.push(e.hash))},tableRowClassName:function(e){var t=e.row;return this.currentRowKey===t["value"]?"current-row":""},chooseNode:function(e){var t=this;if("meta"===this.type){var a=dsf.layer.loading();this.$http.get("rm/list/meta",{namespace:e.ID}).done((function(e){var a,n=e.data,l=e.success,i=e.message;if(l){if(null!==(a=n)&&void 0!==a&&a[0]){n=n[0];var s=[],r=function(){var e=$.extend({},n.metadata[o]);e["text"]=e.name,e["value"]=e.id,e.valueAttributes&&e.valueAttributes.length>1&&(e["children"]=e.valueAttributes.map((function(t){return t.text=t.name,t.value=e.id+"_"+t.code,t.at=e.at,t}))),s.push(e)};for(var o in n.metadata)r();s=s.sort((function(e,t){var a=e.order?parseInt(e.order):0,n=t.order?parseInt(t.order):0;return a<n?-1:1})),t.initList=!1,t.updateValue(s)}}else dsf.layer.message(i,!1)})).error((function(){dsf.layer.message("请求异常",!1)})).finally((function(){dsf.layer.closeLoading(a)}))}else"ds"===this.type&&(this.val.attach=[],this.val.code=e.dsfa_rm_id,this.val.chooseKey=e[this.idKey],this.getResult())},updateValue:function(e){var t=this;this.val.code=this.radioId,this.val.attach=e,"meta"===this.type&&(this.metaTree=_.clone(this.val));var a=this.value,n=a.attach,l=void 0===n?[]:n,i=a.attachFullMaps,s=void 0===i?[]:i,r=a.attachHideMaps,o=void 0===r?[]:r,c=a.attachDisabledMaps,u=void 0===c?[]:c,d=a.attachTipsMaps,f=void 0===d?{}:d,p=a.attachOrderMaps,h=void 0===p?{}:p,m=[];dsf.deepForEach(l,(function(e,a){var n=_.findIndex(s,(function(a){return a.value==e.value&&a.rmId==t.value.code}));n>=0&&t.$set(e,"isAttachFull",!0),o.indexOf(e.value)>-1&&t.$set(e,"isHide",!0),u.indexOf(e.value)>-1&&t.$set(e,"isDisabled",!0),void 0!==h[e.value]&&t.$set(e,"showOrder",h[e.value]),t.$set(e,"tips",f[e.value]||""),m.length==a&&m.push({label:a+1+"级",value:a})})),this.levelFilter=-1,this.levelOptions=1==m.length?[]:m,this.getResult()},handleCurrentChange:function(e){this.isTreeMetaSelect&&(e&&e.children?(this.$refs.singleTable.setCurrentRow(),this.$refs.singleTable.toggleRowExpansion(e),this.currentRowKey="",this.val.code=null):e&&(this.currentRowKey=e["value"],this.val.code=e))},getResult:function(){this.$emit("input",this.val),this.$emit("change",this.val)},initMetaTable:function(){this.radioId&&"meta"===this.type&&this.$refs.singleTable.setCurrentRow(this.value.code)}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parameter-batch"},[a("div",{staticClass:"parameter-box"},[a("SelectTable",{attrs:{data:e.paramInfo,columns:e.paramsColumns,height:"calc(100% - 80px)"},on:{deleteRow:e.deleteRow}}),a("div",{staticClass:"parameter-header",staticStyle:{"text-align":"left","margin-top":"10px"}},[a("dsf-button",{staticClass:"add-parameter-btn",attrs:{size:"small"},on:{click:e.addParameter}},[e._v(" + 参数 ")])],1)],1),a("div",{staticClass:"table-box",class:{emptyColumns:!e.dataColumns.length}},[a("SelectTable",{attrs:{data:e.data,columns:e.dataColumns,height:"calc(100% - 80px)"}}),a("div",{staticClass:"parameter-header",staticStyle:{"text-align":"left","margin-top":"10px"}},[a("dsf-button",{directives:[{name:"show",rawName:"v-show",value:e.dataColumns.length,expression:"dataColumns.length"}],staticClass:"add-parameter-btn",attrs:{size:"small"},on:{click:e.addData}},[e._v(" + 数据 ")])],1)],1)])},l=[],i={name:"BatAddParam",props:{value:{type:Object,default:function(){return{}}}},data:function(){return{paramInfo:[],paramsColumns:[{prop:"key",label:"参数名称",fieldType:"input"},{prop:"type",label:"参数类型",width:"140",options:[]},{label:"操作",width:"94",operate:!0}],operate:[{label:"操作",width:"94",operate:!0}],columns:[],data:[]}},watch:{paramInfo:{handler:function(e){this.reset(e)},deep:!0}},created:function(){this.init()},computed:{dataColumns:function(){var e;return(null===(e=this.columns)||void 0===e?void 0:e.length)>0?this.columns.concat(this.operate):[]}},methods:{getContent:function(){if(!this.validate())return!1;if(0===this.paramInfo.length&&0===this.data.length)return{};var e={paramInfo:[],data:[]};return e.paramInfo=this.paramInfo,e.data=this.data,e},validate:function(){var e,t,a=!1;return this.paramInfo.forEach((function(e){e.key||(a=!0)})),a?(dsf.layer.message("参数名称不能为空",!1),!1):!((null===(e=this.paramInfo)||void 0===e?void 0:e.length)>0&&0==(null===(t=this.data)||void 0===t?void 0:t.length))||(dsf.layer.message("数据不能为空",!1),!1)},init:function(){var e=this;dsf.isEmptyObject(this.value)||(this.paramInfo=this.value.paramInfo,this.data=this.value.data);var t="dsfa.dict.wfexecuteparamtype",a={dicts:[{key:t,dictId:"2490e5d80b66465e9b9bc22d3e2abe15"}]};this.$webAPI.getBatchDict(a).done((function(a){var n,l=a.data,i=null===(n=l[t])||void 0===n?void 0:n.map((function(e){return e.label=e.text,e}));e.paramsColumns[1].options=i}))},addParameter:function(){this.paramInfo.push({key:"key"+(this.paramInfo.length+1),type:"string"})},reset:function(e){var t=this,a=[];e.forEach((function(e){a.push({prop:e.key,label:e.key,type:e.type,fieldType:"input"}),t.data.forEach((function(a){dsf.isUnDef(a[e.key])&&t.$set(a,e.key,"")}))}));var n=a.map((function(e){return e.prop}));this.data.forEach((function(e){Object.keys(e).forEach((function(t){-1==n.findIndex((function(e){return e==t}))&&delete e[t]}))})),this.columns=a},addData:function(){var e={};this.columns.forEach((function(t){e[t.prop]=""})),this.data.push(e)},deleteRow:function(e){this.data.forEach((function(t){delete t[e.key]}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item",staticStyle:{width:"100%"}},[a("div",{staticClass:"config-title"},[e._v("边距设置")]),a("el-row",{attrs:{gutter:2}},e._l(e.padding,(function(t,n){return a("el-col",{key:n,attrs:{span:6}},[[a("el-input",{staticClass:"mtext",attrs:{size:"small",placeholder:e.placeholder(n)},model:{value:e.padding[n],callback:function(t){e.$set(e.padding,n,t)},expression:"padding[$index]"}})]],2)})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否包含坐标系")]),a("el-radio-group",{model:{value:e.assignOpt.containLabel,callback:function(t){e.$set(e.assignOpt,"containLabel",t)},expression:"assignOpt.containLabel"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)]),a("br"),a("div",[e._v("属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)])},l=[],i=a(401),s=a.n(i),r=["top","right","bottom","left"],o=["top","right","bottom","left"],c={name:"GridConfig",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{assignOpt:{containLabel:!0},padding:[],custom:!1}},watch:{assignOpt:{handler:function(e){var t=Object.assign(this.options,e);this.$emit("change-options",{type:"grid",options:t})},deep:!0},padding:function(e){this.$set(this.options,"top",e[0]),this.$set(this.options,"right",e[1]),this.$set(this.options,"bottom",e[2]),this.$set(this.options,"left",e[3]);var t=this.options;this.$emit("change-options",{type:"grid",options:t})}},created:function(){var e=this.options,t=e.top,a=e.right,n=e.bottom,l=e.left,i=s()(e,r);Object.assign(this.assignOpt,i),this.padding.push(t,a,n,l)},methods:{placeholder:function(e){var t="";switch(e){case 0:t="上";break;case 1:t="右";break;case 2:t="下";break;case 3:t="左";break}return t},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent()),t=e.top,a=e.right,n=e.bottom,l=e.left,i=s()(e,o);this.padding=[t,a,n,l],this.assignOpt=i},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=_.cloneDeep(e.assignOpt);t.top=e.padding[0],t.right=e.padding[1],t.bottom=e.padding[2],t.left=e.padding[3];var a=JSON.stringify(t,null,"\t");e.$refs["editor"].setContent(a)}))}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},[e._l(e.xAxis,(function(t,n){return a("el-card",{key:n,staticClass:"axis-card"},[a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("坐标轴位置")]),a("el-radio-group",{model:{value:t.position,callback:function(a){e.$set(t,"position",a)},expression:"item.position"}},[a("el-radio",{attrs:{label:"bottom"}},[e._v("下方")]),a("el-radio",{attrs:{label:"top"}},[e._v("上方")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示轴线")]),a("el-radio-group",{model:{value:t.axisLine.show,callback:function(a){e.$set(t.axisLine,"show",a)},expression:"item.axisLine.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("轴线颜色")]),a("el-color-picker",{attrs:{size:"small"},model:{value:t.axisLine.lineStyle.color,callback:function(a){e.$set(t.axisLine.lineStyle,"color",a)},expression:"item.axisLine.lineStyle.color"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示刻度")]),a("el-radio-group",{model:{value:t.axisTick.show,callback:function(a){e.$set(t.axisTick,"show",a)},expression:"item.axisTick.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("刻度对齐")]),a("el-radio-group",{model:{value:t.axisTick.alignWithLabel,callback:function(a){e.$set(t.axisTick,"alignWithLabel",a)},expression:"item.axisTick.alignWithLabel"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标签")]),a("el-radio-group",{model:{value:t.axisLabel.show,callback:function(a){e.$set(t.axisLabel,"show",a)},expression:"item.axisLabel.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标签颜色")]),a("el-color-picker",{attrs:{size:"small"},model:{value:t.axisLabel.color,callback:function(a){e.$set(t.axisLabel,"color",a)},expression:"item.axisLabel.color"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标签字号")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.axisLabel.fontSize,callback:function(a){e.$set(t.axisLabel,"fontSize",a)},expression:"item.axisLabel.fontSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标签旋转角度(-90-90)")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.axisLabel.rotate,callback:function(a){e.$set(t.axisLabel,"rotate",a)},expression:"item.axisLabel.rotate"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示分割线")]),a("el-radio-group",{model:{value:t.splitLine.show,callback:function(a){e.$set(t.splitLine,"show",a)},expression:"item.splitLine.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("旁边是否留白")]),a("el-radio-group",{model:{value:t.boundaryGap,callback:function(a){e.$set(t,"boundaryGap",a)},expression:"item.boundaryGap"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否强制分割坐标轴")]),a("el-radio-group",{model:{value:t.interval,callback:function(a){e.$set(t,"interval",a)},expression:"item.interval"}},[a("el-radio",{attrs:{label:0}},[e._v("是")]),a("el-radio",{attrs:{label:1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称字号")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.nameTextStyle.fontSize,callback:function(a){e.$set(t.nameTextStyle,"fontSize",a)},expression:"item.nameTextStyle.fontSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称轴距")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.nameGap,callback:function(a){e.$set(t,"nameGap",a)},expression:"item.nameGap"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称位置")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.nameLocation,callback:function(a){e.$set(t,"nameLocation",a)},expression:"item.nameLocation"}},[a("el-option",{attrs:{label:"开始 ",value:"start"}}),a("el-option",{attrs:{label:"中间 ",value:"center"}}),a("el-option",{attrs:{label:" 末尾",value:"end"}})],1)],1)]),t.data?a("div",{staticClass:"cell-item-3"},[a("div",{staticClass:"config-title"},[e._v("类目轴动态映射数据库字段，仅在数据源情况下生效 （名称->字段）")]),a("div",{staticClass:"chart-map-list"},e._l(t.data,(function(n,l){return a("div",{key:l,staticClass:"chart-map-list-item"},[a("el-input",{staticClass:"map-input",attrs:{size:"small"},model:{value:t.data[l],callback:function(a){e.$set(t.data,l,a)},expression:"item.data[$index]"}}),a("i",{staticClass:"el-icon-right",staticStyle:{margin:"0 8px"}}),a("el-input",{staticClass:"map-input",attrs:{size:"small"},model:{value:t.mapRelation[l],callback:function(a){e.$set(t.mapRelation,l,a)},expression:"item.mapRelation[$index]"}})],1)})),0),a("div",[a("el-button",{on:{click:function(a){return e.addxData(t)}}},[e._v("增加映射字段")]),a("el-button",{on:{click:function(a){return e.removexData(t)}}},[e._v("删除映射字段")])],1)]):e._e()])})),a("el-button",{on:{click:e.axisChange}},[e._v(" "+e._s(1===e.xAxis.length?"增加对轴":"移除对轴")+" ")])],2),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i={name:"XaxisConfig",props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,xAxis:[]}},watch:{xAxis:{handler:function(e){this.$emit("change-options",{type:"xAxis",options:e})},deep:!0},w:{handler:function(e){this.xAxis=e.xAxis},deep:!0}},created:function(){this.xAxis=this.options},methods:{addxData:function(e){e.data.push("test"),e.mapRelation.push("test")},removexData:function(e){e.data.pop(),e.mapRelation.pop()},axisChange:function(){if(1===this.xAxis.length){var e=_.cloneDeep(this.xAxis[0]);this.xAxis.push(_.cloneDeep(e))}else this.xAxis.splice(1,1)},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.xAxis=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.xAxis,null,"\t");e.$refs["editor"].setContent(t)}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},[e._l(e.yAxis,(function(t,n){return a("el-card",{key:n,staticClass:"axis-card"},[a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("坐标轴位置")]),a("el-radio-group",{model:{value:t.position,callback:function(a){e.$set(t,"position",a)},expression:"item.position"}},[a("el-radio",{attrs:{label:"left"}},[e._v("左边")]),a("el-radio",{attrs:{label:"right"}},[e._v("右边")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示轴线")]),a("el-radio-group",{model:{value:t.axisLine.show,callback:function(a){e.$set(t.axisLine,"show",a)},expression:"item.axisLine.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("轴线颜色")]),a("el-color-picker",{attrs:{size:"small"},model:{value:t.axisLine.lineStyle.color,callback:function(a){e.$set(t.axisLine.lineStyle,"color",a)},expression:"item.axisLine.lineStyle.color"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示刻度")]),a("el-radio-group",{model:{value:t.axisTick.show,callback:function(a){e.$set(t.axisTick,"show",a)},expression:"item.axisTick.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标签")]),a("el-radio-group",{model:{value:t.axisLabel.show,callback:function(a){e.$set(t.axisLabel,"show",a)},expression:"item.axisLabel.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标签颜色")]),a("el-color-picker",{attrs:{size:"small"},model:{value:t.axisLabel.color,callback:function(a){e.$set(t.axisLabel,"color",a)},expression:"item.axisLabel.color"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标签字号")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.axisLabel.fontSize,callback:function(a){e.$set(t.axisLabel,"fontSize",a)},expression:"item.axisLabel.fontSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标签旋转角度(-90-90)")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.axisLabel.rotate,callback:function(a){e.$set(t.axisLabel,"rotate",a)},expression:"item.axisLabel.rotate"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示分割线")]),a("el-radio-group",{model:{value:t.splitLine.show,callback:function(a){e.$set(t.splitLine,"show",a)},expression:"item.splitLine.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称轴距")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.nameGap,callback:function(a){e.$set(t,"nameGap",a)},expression:"item.nameGap"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称字号")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.nameTextStyle.fontSize,callback:function(a){e.$set(t.nameTextStyle,"fontSize",a)},expression:"item.nameTextStyle.fontSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("名称位置")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.nameLocation,callback:function(a){e.$set(t,"nameLocation",a)},expression:"item.nameLocation"}},[a("el-option",{attrs:{label:"开始 ",value:"start"}}),a("el-option",{attrs:{label:"中间 ",value:"center"}}),a("el-option",{attrs:{label:" 末尾",value:"end"}})],1)],1),t.data?a("div",{staticClass:"cell-item-3"},[a("div",{staticClass:"config-title"},[e._v("类目轴动态映射数据库字段，仅在数据源情况下生效 （名称->字段）")]),a("div",{staticClass:"chart-map-list"},e._l(t.data,(function(n,l){return a("div",{key:l,staticClass:"chart-map-list-item"},[a("el-input",{staticClass:"map-input",attrs:{size:"small"},model:{value:t.data[l],callback:function(a){e.$set(t.data,l,a)},expression:"item.data[$index]"}}),a("i",{staticClass:"el-icon-right",staticStyle:{margin:"0 8px"}}),a("el-input",{staticClass:"map-input",attrs:{size:"small"},model:{value:t.mapRelation[l],callback:function(a){e.$set(t.mapRelation,l,a)},expression:"item.mapRelation[$index]"}})],1)})),0),a("div",[a("el-button",{on:{click:function(a){return e.addxData(t)}}},[e._v("增加映射字段")]),a("el-button",{on:{click:function(a){return e.removexData(t)}}},[e._v("删除映射字段")])],1)]):e._e()])])})),a("el-button",{on:{click:e.axisChange}},[e._v(" "+e._s(1===e.yAxis.length?"增加对轴":"移除对轴")+" ")])],2),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i={name:"YaxisConfig",props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,yAxis:[]}},watch:{yAxis:{handler:function(e){this.$emit("change-options",{type:"yAxis",options:e})},deep:!0},w:{handler:function(e){this.yAxis=e.yAxis},deep:!0}},created:function(){this.yAxis=this.options},methods:{addxData:function(e){e.data.push("test"),e.mapRelation.push("test")},removexData:function(e){e.data.pop(),e.mapRelation.pop()},axisChange:function(){if(1===this.yAxis.length){var e=_.cloneDeep(this.yAxis[0]);this.yAxis.push(_.cloneDeep(e))}else this.yAxis.splice(1,1)},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.yAxis=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.yAxis,null,"\t");e.$refs["editor"].setContent(t)}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-select",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.shade,callback:function(t){e.shade=t},expression:"shade"}},[a("el-option",{attrs:{label:"渐变",value:!0}}),a("el-option",{attrs:{label:"不渐变 ",value:!1}})],1),a("el-color-picker",{attrs:{size:"small","show-alpha":""},model:{value:e.startColor,callback:function(t){e.startColor=t},expression:"startColor"}}),e.shade?a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("i",{staticClass:"el-icon-right",staticStyle:{margin:"0 8px"}}),a("el-color-picker",{attrs:{size:"small","show-alpha":""},model:{value:e.endColor,callback:function(t){e.endColor=t},expression:"endColor"}})],1):e._e()],1)},l=[],i={props:{isshade:{type:Boolean,default:!1},cacheStartcolor:{type:String,default:""},cacheEndcolor:{type:String,default:""},index:{type:Number,default:0},type:{type:String,default:""}},data:function(){return{shade:this.isshade,startColor:this.cacheStartcolor,endColor:this.cacheEndcolor}},watch:{shade:function(){this.$emit("change",{isshade:this.shade,startColor:this.startColor,endColor:this.endColor,index:this.index,type:this.type})},startColor:function(){null==this.startColor&&(this.startColor="rgba(255,255,255,0)"),this.$emit("change",{isshade:this.shade,startColor:this.startColor,endColor:this.endColor,index:this.index,type:this.type})},endColor:function(){null==this.endColor&&(this.endColor="rgba(255,255,255,0)"),this.$emit("change",{isshade:this.shade,startColor:this.startColor,endColor:this.endColor,index:this.index,type:this.type})}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},,function(e,t,a){"use strict";a.r(t);var n="\n  含义：\n  <br/>\n  可聚合,返回参数平均值(算术平均值)。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  多个入参，数量不限，如果倒数第二个参数为true,表示保留小数，最后一个保留到几位;\n  <br/>\n  AVG(语文成绩,数学成绩, 英语成绩) 返回三门课程的平均分;\n  <br/>\n  AVG(语文成绩,数学成绩, 英语成绩,true,2) 返回三门课程的平均分,并保留两位小数;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",l="\n  含义：\n  <br/>\n  可聚合,返回参数值之和(算术求和)。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  多个入参，数量不限\n  <br/>\n  SUM(语文成绩,数学成绩, 英语成绩) 返回三门课程的总分;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",i="\n  含义：\n  <br/>\n  可聚合,返回参数值之差(算术求差)。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  多个入参，数量不限\n  <br/>\n  SUM(4,2) 返回 2;\n  <br/>\n  SUM(4,2,1) 返回 1;\n  <br/>\n  SUM(2,2,1) 返回 -1;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",s="\n  含义：\n  <br/>\n  可聚合,返回参数值之除(算术求除)。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  多个入参，数量不限\n  <br/>\n  SUM(4,2) 返回 2;\n  <br/>\n  SUM(8,2,2) 返回 2;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",r="\n  含义：\n  <br/>\n  可聚合,返回参数值之乘(算术求乘)。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  多个入参，数量不限\n  <br/>\n  SUM(2,3) 返回 6;\n  <br/>\n  SUM(2,2,2) 返回 8;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",o="\n  含义：\n  <br/>\n  返回参数绝对值。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  入参可以是数学运算，可以是数字\n  <br/>\n  ABS(语文成绩-数学成绩+英语成绩) 返回运算结果;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",c="\n    含义：\n    <br/>\n    返回两数相除的余数。 结果的符号与除数相同\n    <br/>\n    示例:\n    <br/>\n    入参：\n    必须是数字或者字符串 不能为空\n    <br/>\n    divisor: 必需。 除数。\n    <br/>\n    MOD(number, divisor)\n    <br/>\n    示例：\n    MOD(4,3)返回1，是4/3的余数\n    <br/>\n    <br/>\n    返回值类型:  数字\n",u="\n  含义：\n  <br/>\n  可聚合,返回一组值中的最大值。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n   入参多个数字，必须是数字类型或者数字类型的字符串\n  <br/>\n  MAX(语文成绩,数学成绩,英语成绩) 返回最大的成绩;\n  <br/>\n  MAX(1,2,3) 返回3;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",d="\n  含义：\n  <br/>\n  可聚合,返回一组值中的最小值。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n   入参多个数字，必须是数字类型或者数字类型的字符串\n  <br/>\n  MIN(语文成绩,数学成绩,英语成绩) 返回最小的成绩;\n  <br/>\n  MIN(1,2,3) 返回1;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",f="\n  含义：\n  <br/>\n  方法用于返回第一个参数的第二个参数次方。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  POW(number, power)\n  <br/>\n  POW(3,2) 返回9，是3的2次方;\n  <br/>\n  <br/>\n  返回值类型:  数字\n",p="\n  含义：\n  <br/>\n  对一个数进行下舍入，直接取整，返回给定参数最大的整数，该整数小于或等给定的参数。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  FLOOR(number)\n  <br/>\n  FLOOR(3.14) = 3\n  <br/>\n  FLOOR(-3.14) = -4\n  <br/>\n  FLOOR(语文成绩-数学成绩)\n  <br/>\n  <br/>\n  返回值类型:  数字\n",h="\n  含义：\n  <br/>\n  对一个数进行上舍入，直接取整，返回给定参数最大的整数，该整数小于或等给定的参数。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  CEIL(number)\n  <br/>\n  CEIL(3.14) = 4\n  <br/>\n  CEIL(-3.14) = -3\n  <br/>\n  CEIL(语文成绩-数学成绩)\n  <br/>\n  <br/>\n  返回值类型:  数字\n",m='\n  含义：\n  <br/>\n  统计满足条件的参数个数。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  入参 ： 前 N 个数字 ，最后一个字符是计算公式\n  <br/>\n  入参的字符串，我们用，进行分割。\n  <br/>\n  如果是字符串判断相等。如果是数字，运算公式。\n  <br/>\n  公式只能是 > != < == 这些操作符\n  <br/>\n  COUNTIF(1,2,3,4, “>2”)，结果为2\n  <br/>\n  COUNTIF(1,2,3,4, “!=2”)，结果为3\n  <br/>\n  COUNTIF(1,2,3,4, “>=1”)，结果为4\n  <br/>\n  COUNTIF("a","b","c", “d”)，结果为0\n  <br/>\n  <br/>\n  返回值类型:  数字\n',b="\n  含义：\n  <br/>\n  对一个数进行加0.5 进行向下取整（四舍五入）。\n  <br/>\n  <br/>\n  示例：\n  <br/>\n  ROUND(number)\n  <br/>\n  ROUND(3.14) = 3\n  <br/>\n  ROUND(-3.54) = -4\n  <br/>\n  ROUND(语文成绩-数学成绩)\n  <br/>\n  <br/>\n  返回值类型:  数字\n",v="\n    含义：\n    <br/>\n    根据指定底数返回数字的对数。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    LOG(number,base) base为底数\n    LOG(8,2) 返回 3\n    <br/>\n    LOG(100,10) 返回 2\n    <br/>\n    <br/>\n    返回值类型:  数字\n",g="\n    含义：\n    <br/>\n    目标数字平方根\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    SQRT(number)  返回number 平方根\n    <br/>\n    SQRT(4)  返回2\n    <br/>\n    SQRT(9)  返回3\n    <br/>\n    <br/>\n    返回值类型:  数字\n",y="\n    含义：\n    <br/>\n    目标数字的保留几位小数，四舍五入保留\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    FIXED(number,base) 保留base位小数\n    FIXED(3.15834,2) 返回 3.16\n    <br/>\n    FIXED(3.15234,2) 返回 3.15\n    <br/>\n    <br/>\n    返回值类型:  数字\n",x="\n    含义：\n    <br/>\n    浮点数精度保证，一般进行浮点数的计算精度会丢失\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    精度丢失\n    <br/>\n    0.1+0.223456 返回 0.32345599999999997\n    <br/>\n    0.1+0.2 返回 0.30000000000000004\n    <br/>\n    示例：\n    <br/>\n    FLOATCALCUATE(0.1+0.223456) 返回 0.323456\n    <br/>\n    FLOATCALCUATE(0.1+0.2) 返回 0.3\n    <br/>\n    返回值类型:  数字\n",w="\n    含义：\n    <br/>\n    将指定日期加/减指定天数。\n    <br/>\n    <br/>\n    示例：\n    接收三个参数：日期字段，天数，1为加，-1为减，日期格式为表单日期设置格式，不用参照示例中格式。\n    <br/>\n    DATEDELTA(日期字段, 天数,1)\n    <br/>\n    DATEDELTA(2021/9/17, 10,1) 返回 2021/9/27\n    <br/>\n    DATEDELTA(2021/9/17, 10,-1) 返回 2021/9/7\n    <br/>\n    <br/>\n    返回值类型:  日期对象\n",_="\n    含义：\n    <br/>\n    返回某日期的天数。 天数是介于 1 到 31 之间的整数。\n    <br/>\n    <br/>\n    示例：\n    DAYDT(日期字段)\n    <br/>\n    DAYDT(2021/9/17) 返回 17\n    <br/>\n    <br/>\n    返回值类型:  数字\n",k="\n    含义：\n    <br/>\n    返回两个日期之间的天数\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    DA_YS(起始日期,结束日期)\n    <br/>\n    <br/>\n    返回值类型:  数字\n",C="\n    含义：\n    <br/>\n    获取指定时间所在周的第一天或者最后一天。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    WEEKDAY(日期字段,firstday,type)\n    <br/>\n    备注 firstday 本周起始天设定\n    <br/>\n    0 是'星期一' 1 是'星期天'\n    <br/>\n    type 为 1 是第一天 2是最后一天\n    <br/>\n    <br/>\n    返回值类型:  日期对象\n",D="\n    含义：\n    <br/>\n    将日期对象转化为字符串\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    FORMAT(日期对象,'yyyy-MM-dd') 返回 2021-09-17 格式\n    <br/>\n    y-年，M-月，d-日，h-小时，m-分，s-秒\n    <br/>\n    <br/>\n    返回值类型:  字符串\n",S="\n    含义：\n    <br/>\n    获取日期字段所在月最后一天\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    END_OF_MONTH(日期字段) 返回 当月最后一天\n    <br/>\n    <br/>\n    返回值类型:  日期对象\n",$="\n    含义：\n    <br/>\n    当前时间是否在某个时间段内\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    TIME_BELONG_HOUR(时间字段,开始时间,结束时间) 返回 true/false\n    <br/>\n    <br/>\n    返回值类型:  布尔类型\n",T="\n    含义：\n    <br/>\n    AND 逻辑\n    <br/>\n    全true是为真 在参数组中，任何一个参数逻辑值为false，即返回false；\n    <br/>\n    只有当所有参数逻辑值为true，才返回true。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    AND(logical1,logical2,logical3…)。\n    <br/>\n    AND(语文成绩>90,数学成绩>90,英语成绩>90)，如果三门课成绩都> 90，返回true，否则返回false。\n    <br/>\n    <br/>\n    返回值类型:  布尔类型\n",O="\n    含义：\n    <br/>\n    如果判断条件为真，则返回第一个字段，否则返回第二个字段。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    IF(运算表达式,为true返回值,为flase返回值)\n    <br/>\n    IF(1==1,A,B) 返回 A\n    <br/>\n    IF(flase,A,B) 返回 B\n    <br/>\n    <br/>\n    返回值类型:  符合条件的值\n",I="\n    含义：\n    <br/>\n    入参只有一个真就为真。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    OR(logical1,logical2,logical3…)\n    <br/>\n    OR(语文成绩>90,数学成绩>90,英语成绩>90)，任何一门课成绩> 90，返回true，否则返回false\n    <br/>\n    <br/>\n    返回值类型:  布尔类型\n",N="\n    含义：\n    <br/>\n    多个文本字段进行合并成一个文本字段。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    N 个字符\n    <br/>\n    CONCATENATE(text1,[text2], …)\n    <br/>\n    CONCATENATE('你好','中国') 返回文本\n    <br/>\n    <br/>\n    返回值类型:  文本\n",M="\n    含义：\n    <br/>\n    删除字符串首尾，包括字符内部的空格。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n     入参字符串，必填\n    <br/>\n    DELETEWHITESPACE(text)\n    <br/>\n    DELETEWHITESPACE(' DSF5.0 开发平 台 ') 返回 DSF5.0开发平台\n    <br/>\n    <br/>\n    返回值类型:  文本\n",P="\n    含义：\n    <br/>\n    返回文本字符串中的字符个数。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    LEN(text)\n    <br/>\n    DELETEWHITESPACE(text)\n    <br/>\n    LEN('你好DSF5') 返回 6\n    <br/>\n    <br/>\n    返回值类型:  文本\n",E="\n    含义：\n    <br/>\n    将一个文本字符串中的所有大写字母转换为小写字母。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    入参\n    <br/>\n    原始字符串，必填 ，中文则不替换\n    <br/>\n    LOWER(text)\n    <br/>\n    LOWER('ABC' ) 返回 abc\n    <br/>\n    <br/>\n    返回值类型:  文本\n",A="\n    含义：\n    <br/>\n    将一个文本字符串中的所有小写字母转换为大写字母。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    入参\n    <br/>\n    原始字符串，必填 ，中文则不替换\n    <br/>\n    UPPER(text)\n    <br/>\n    UPPER('abc' ) 返回 ABC\n    <br/>\n    <br/>\n    返回值类型:  文本\n",L="\n    含义：\n    <br/>\n    判断文本是否为身份证号。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    IDCARD_VALIDATE(文本1)\n    <br/>\n    示例：IDCARD_VALIDATE(文本1)) 返回是否为身份证号\n    <br/>\n    <br/>\n    返回值类型:  布尔类型\n",j="\n    含义：\n    <br/>\n    获取出生年月日。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    IDCARD_BIRTH(文本1，格式)\n    <br/>\n    IDCARD_BIRTH('510688202109185678','yyyy-MM-dd') 返回 2021-09-18\n    <br/>\n    IDCARD_BIRTH('510688202109185678','yyyy年MM月dd日') 返回 2021年09月18日\n    <br/>\n    IDCARD_BIRTH('510688202109185678') 不传返回 20210918\n    <br/>\n    <br/>\n    返回值类型:  文本\n",R="\n    含义：\n    <br/>\n    转字符串文本，一般用于数字转字符串\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    STRING(number)\n    <br/>\n    STRING(53) 返回 '53'\n    <br/>\n    <br/>\n    返回值类型:  文本\n",B="\n    含义：\n    <br/>\n    用于字符串的截取\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    STRING(string,?startIndex,?endIndex)\n    <br/>\n    STRING('hello world',5) 返回 'world'\n    <br/>\n    STRING('hello world',0,5) 返回 'hello'\n    <br/>\n    STRING('hello world',3,7) 返回 'lo w'\n    <br/>\n    <br/>\n    返回值类型:  文本\n",z="\n    含义：\n    <br/>\n    文本转数字\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    NUMBER(number)\n    <br/>\n    NUMBER('53') 返回 53\n    <br/>\n    <br/>\n    返回值类型:  数字\n",F="\n    含义：\n    <br/>\n    获取性别\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    IDCARD_SEX(身份证号) 返回 性别 1 男 2 女\n    <br/>\n    <br/>\n    返回值类型:  数字\n",U="\n    含义：\n    <br/>\n    获取数组长度。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    ARRAY_SIZE([1,2,3]) 返回 3\n    <br/>\n    <br/>\n    返回值类型:  数组\n",q="\n    含义：\n    <br/>\n    字符串转数组,接受两个参数。目标字符串，分割符号。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    TO_ARRAY('123') 返回 [1,2,3]\n    <br/>\n    TO_ARRAY('1^2^3','^') 返回 [1,2,3]\n    <br/>\n    <br/>\n    返回值类型:  数组\n",H="\n    含义：\n    <br/>\n    数组转字符串。\n    <br/>\n    <br/>\n    示例：\n    <br/>\n    ARRAY_TO_STR([1,2,3]) 返回 '123'\n    <br/>\n    <br/>\n    返回值类型:  字符串\n",K="\n    含义：\n    <br/>\n    获取表单中的数据\n    <br/>\n    参数：\n    <br/>表单字段名称(必选),\n    <br/>索引号,可以是数组[0,3,2]查询枚举的行号数据。也可以是1,10 指定行范围。 如果当前数据结果为一个数组，则可以使用下标过滤，如：子表获取第一行数据则输入0\n    <br/>\n    示例：\n    <br/>\n    GET_FORMDATA(字段名称) 返回 表单指定字段的数据\n    <br/>\n    GET_FORMDATA(字段名称,3) 返回 子表第4行到最后一行的数据\n    <br/>\n    GET_FORMDATA(子表名称,0,9) 返回 返回子表第1-10行的数据\n    <br/>\n    GET_FORMDATA(子表中字段,[0,1,2]) 返回 返回子表数据第1，2，3行中指定字段的数组\n    <br/>\n    <br/>\n    返回值类型:  字符串，数字，对象，数组\n";t["default"]=new Map([["AVG",{title:"平均数",label:"AVG",reg:/\bAVG\b/g,strategy:"AVG",eg:n,type:1,moduleName:"基本函数"}],["SUM",{title:"求和",label:"SUM",reg:/\bSUM\b/g,strategy:"SUM",eg:l,type:1,moduleName:"基本函数"}],["SUB",{title:"求减",label:"SUB",reg:/\bSUB\b/g,strategy:"SUB",eg:i,type:1,moduleName:"基本函数"}],["MUL",{title:"求乘",label:"MUL",reg:/\bMUL\b/g,strategy:"MUL",eg:r,type:1,moduleName:"基本函数"}],["DIV",{title:"求除",label:"DIV",reg:/\bDIV\b/g,strategy:"DIV",eg:s,type:1,moduleName:"基本函数"}],["ABS",{title:"绝对值",label:"ABS",reg:/ABS/g,strategy:"ABS",eg:o,type:1,moduleName:"基本函数"}],["MOD",{title:"余数",label:"MOD",reg:/MOD/g,strategy:"MOD",eg:c,type:1,moduleName:"基本函数"}],["MAX",{title:"最大值",label:"MAX",reg:/MAX/g,strategy:"MAX",eg:u,type:1,moduleName:"基本函数"}],["MIN",{title:"最小值",label:"MIN",reg:/MIN/g,strategy:"MIN",eg:d,type:1,moduleName:"基本函数"}],["POW",{title:"次方",label:"POW",reg:/POW/g,strategy:"POW",eg:f,type:1,moduleName:"基本函数"}],["FLOOR",{title:"向下取整",label:"FLOOR",reg:/FLOOR/g,strategy:"FLOOR",eg:p,type:1,moduleName:"基本函数"}],["CEIL",{title:"向上取整",label:"CEIL",reg:/CEIL/g,strategy:"CEIL",eg:h,type:1,moduleName:"基本函数"}],["COUNTIF",{title:"条件个数",label:"COUNTIF",reg:/COUNTIF/g,strategy:"COUNTIF",eg:m,type:1,moduleName:"基本函数"}],["ROUND",{title:"四舍五入",label:"ROUND",reg:/ROUND/g,strategy:"ROUND",eg:b,type:1,moduleName:"基本函数"}],["LOG",{title:"对数",label:"LOG",reg:/LOG/g,strategy:"LOG",eg:v,type:1,moduleName:"基本函数"}],["SQRT",{title:"平方根",label:"SQRT",reg:/SQRT/g,strategy:"SQRT",eg:g,type:1,moduleName:"基本函数"}],["FIXED",{title:"保留小数",label:"FIXED",reg:/FIXED/g,strategy:"FIXED",eg:y,type:1,moduleName:"基本函数"}],["NUMBER",{title:"转数字",label:"NUMBER",reg:/NUMBER/g,strategy:"NUMBER",eg:z,type:1,moduleName:"基本函数"}],["FLOATCALCUATE",{title:"浮点数精度",label:"FLOATCALCUATE",reg:/FLOATCALCUATE/g,strategy:"FLOATCALCUATE",eg:x,type:1,moduleName:"基本函数"}],["GET_FORMDATA",{title:"获取表单数据",label:"GET_FORMDATA",reg:/GET_FORMDATA/g,strategy:"GET_FORMDATA",eg:K,type:7,moduleName:"表单取值"}],["DATEDELTA",{title:"日期天数增减",label:"DATEDELTA",reg:/DATEDELTA/g,strategy:"DATEDELTA",eg:w,type:2,moduleName:"日期函数"}],["DAYDT",{title:"日期天数",label:"DAYDT",reg:/DAYDT/g,strategy:"DAYDT",eg:_,type:2,moduleName:"日期函数"}],["DA_YS",{title:"日期之间天数",label:"DA_YS",reg:/DA_YS/g,strategy:"DA_YS",eg:k,type:2,moduleName:"日期函数"}],["WEEKDAY",{title:"周的第一天或最后一天",label:"WEEKDAY",reg:/WEEKDAY/g,strategy:"WEEKDAY",eg:C,type:2,moduleName:"日期函数"}],["FORMAT",{title:"时间转字符串",label:"FORMAT",reg:/FORMAT/g,strategy:"FORMAT",eg:D,type:2,moduleName:"日期函数"}],["END_OF_MONTH",{title:"所在月最后一天",label:"END_OF_MONTH",reg:/END_OF_MONTH/g,strategy:S,eg:S,type:2,moduleName:"日期函数"}],["TIME_BELONG_HOUR",{title:"是否在时间段内",label:"TIME_BELONG_HOUR",reg:/TIME_BELONG_HOUR/g,strategy:$,eg:$,type:2,moduleName:"日期函数"}],["AND",{title:"逻辑与",label:"AND",reg:/AND/g,strategy:"AND",eg:T,type:3,moduleName:"逻辑函数"}],["OR",{title:"逻辑或",label:"OR",reg:/OR/g,strategy:"OR",eg:I,type:3,moduleName:"逻辑函数"}],["IF",{title:"条件判断",label:"IF",reg:/IF/g,strategy:"IF",eg:O,type:3,moduleName:"逻辑函数"}],["CONCATENATE",{title:"合并字符",label:"CONCATENATE",reg:/CONCATENATE/g,strategy:"CONCATENATE",eg:N,type:4,moduleName:"文本函数"}],["DELETEWHITESPACE",{title:"删除文本空格",label:"DELETEWHITESPACE",reg:/DELETEWHITESPACE/g,strategy:"DELETEWHITESPACE",eg:M,type:4,moduleName:"文本函数"}],["LEN",{title:"字符个数",label:"LEN",reg:/LEN/g,strategy:"LEN",eg:P,type:4,moduleName:"文本函数"}],["LOWER",{title:"转小写",label:"LOWER",reg:/LOWER/g,strategy:"LOWER",eg:E,type:4,moduleName:"文本函数"}],["UPPER",{title:"转大写",label:"UPPER",reg:/UPPER/g,strategy:"UPPER",eg:A,type:4,moduleName:"文本函数"}],["STRING",{title:"转文本",label:"STRING",reg:/STRING/g,strategy:"STRING",eg:R,type:4,moduleName:"文本函数"}],["SUB_STRING",{title:"文本截取",label:"SUB_STRING",reg:/SUB_STRING/g,strategy:"SUB_STRING",eg:B,type:4,moduleName:"文本函数"}],["IDCARD_VALIDATE",{title:"身份证校验",label:"IDCARD_VALIDATE",reg:/IDCARD_VALIDATE/g,strategy:"IDCARD_VALIDATE",eg:L,type:5,moduleName:"身份证函数"}],["IDCARD_BIRTH",{title:"身份证获取生日",label:"IDCARD_BIRTH",reg:/IDCARD_BIRTH/g,strategy:"IDCARD_BIRTH",eg:j,type:5,moduleName:"身份证函数"}],["IDCARD_SEX",{title:"身份证获取性别",label:"IDCARD_SEX",reg:/IDCARD_SEX/g,strategy:"IDCARD_SEX",eg:F,type:5,moduleName:"身份证函数"}],["ARRAY_SIZE",{title:"获取数组长度",label:"ARRAY_SIZE",reg:/ARRAY_SIZE/g,strategy:"ARRAY_SIZE",eg:U,type:6,moduleName:"数组函数"}],["TO_ARRAY",{title:"字符串转数组",label:"TO_ARRAY",reg:/TO_ARRAY/g,strategy:"TO_ARRAY",eg:q,type:6,moduleName:"数组函数"}],["ARRAY_TO_STR",{title:"数组转字符串",label:"ARRAY_TO_STR",reg:/ARRAY_TO_STR/g,strategy:"ARRAY_TO_STR",eg:H,type:6,moduleName:"数组函数"}]])},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},[e._l(e.series,(function(t,n){return a("el-card",{key:n,staticClass:"axis-card"},[a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("数据名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("饼图位置")]),a("el-row",{attrs:{gutter:2}},e._l(t.center,(function(n,l){return a("el-col",{key:l,attrs:{span:8}},[[a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.center[l],callback:function(a){e.$set(t.center,l,a)},expression:"item.center[$index]"}})]],2)})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("饼图内外环")]),a("el-row",{attrs:{gutter:2}},e._l(t.radius,(function(n,l){return a("el-col",{key:l,attrs:{span:8}},[[a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.radius[l],callback:function(a){e.$set(t.radius,l,a)},expression:"item.radius[$index]"}})]],2)})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否展示南丁格尔")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.roseType,callback:function(a){e.$set(t,"roseType",a)},expression:"item.roseType"}},[a("el-option",{attrs:{label:"否",value:!1}}),a("el-option",{attrs:{label:"半径展示 ",value:"radius"}}),a("el-option",{attrs:{label:"面积展示",value:"area"}})],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标签")]),a("el-radio-group",{model:{value:t.label.show,callback:function(a){e.$set(t.label,"show",a)},expression:"item.label.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否标签重叠")]),a("el-radio-group",{model:{value:t.avoidLabelOverlap,callback:function(a){e.$set(t,"avoidLabelOverlap",a)},expression:"item.avoidLabelOverlap"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标签位置")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.label.position,callback:function(a){e.$set(t.label,"position",a)},expression:"item.label.position"}},[a("el-option",{attrs:{label:"外侧",value:"outside"}}),a("el-option",{attrs:{label:"内侧",value:"inside"}}),a("el-option",{attrs:{label:"中心",value:"center"}})],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示引导线")]),a("el-radio-group",{model:{value:t.labelLine.show,callback:function(a){e.$set(t.labelLine,"show",a)},expression:"item.labelLine.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"}),a("div",{staticClass:"cell-item"},[a("el-button",{on:{click:function(a){return e.addData(t,n)}}},[e._v("增加数据项")])],1),a("div",{staticClass:"cell-item"},[a("el-button",{on:{click:function(a){return e.removeData(t,n)}}},[e._v("移除数据项")])],1),a("div",{staticClass:"cell-item",staticStyle:{width:"100%"}},[a("div",{staticClass:"config-title"},[e._v("数据系颜色")]),a("div",{staticStyle:{display:"flex","align-items":"center","flex-wrap":"wrap"}},e._l(t.data,(function(t,n){return a("span",{key:n,staticStyle:{display:"flex","align-items":"center","margin-left":"10px","margin-bottom":"10px"}},[a("label",[e._v(" "+e._s(t.name)+" ")]),e._v("   "),a("el-color-picker",{attrs:{size:"small"},model:{value:t.itemStyle.color,callback:function(a){e.$set(t.itemStyle,"color",a)},expression:"i.itemStyle.color"}})],1)})),0)]),a("p",{staticStyle:{width:"94%",height:"1px",background:"#ccc",margin:"10px 0"}})])])})),a("el-button",{on:{click:e.addDataPie}},[e._v("增加饼图")]),this.series.length>1?a("el-button",{on:{click:e.removeDataPie}},[e._v("移除饼图")]):e._e()],2),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i=a(2),s=a.n(i),r={name:"SeriesPieConfig",props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,series:_.cloneDeep(this.options),default:_.cloneDeep(this.options[0])}},watch:{series:{handler:function(e){this.$emit("change-options",{type:"series",options:e})},deep:!0}},created:function(){},methods:{addDataPie:function(){var e=_.cloneDeep(this.default);e.name="示例_".concat(this.options.length),this.series.push(e)},removeDataPie:function(){this.series.splice(this.series.length-1,1)},addData:function(e,t){e.data.push({name:"测试示例_".concat(e.data.length),itemStyle:{color:this.w.color[e.data.length]?this.w.color[e.data.length]:this.w.color[0]},value:200+Math.ceil(1e3*Math.random())}),this.w.legend.data=this.options.reduce((function(e,t){return[].concat(s()(e),s()(t.data))}),[]).map((function(e){return e.name}))},removeData:function(e,t){e.data.pop(),this.w.legend.data=this.options.reduce((function(e,t){return[].concat(s()(e),s()(t.data))}),[]).map((function(e){return e.name}))},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.series=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.series,null,"\t");e.$refs["editor"].setContent(t)}))}}},o=r,c=a(0),u=Object(c["a"])(o,n,l,!1,null,null,null);t["default"]=u.exports},,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"QUICKLAYOUT",(function(){return n}));var n={layout1:{layout:{">=1200":[{x:0,y:0,w:4,h:5,i:"A"},{x:0,y:5,w:4,h:5,i:"B"}],">=768":[{x:0,y:0,w:4,h:5,i:"A"},{x:0,y:5,w:4,h:5,i:"B"}],"<768":[{x:0,y:0,w:4,h:5,i:"A"},{x:0,y:5,w:4,h:5,i:"B"}]},rowHeight:10,colNum:4},layout2:{layout:{">=1200":[{x:0,y:0,w:4,h:3,i:"A"},{x:0,y:3,w:4,h:3,i:"B"},{x:0,y:6,w:4,h:3,i:"C"}],">=768":[{x:0,y:0,w:4,h:3,i:"A"},{x:0,y:3,w:4,h:3,i:"B"},{x:0,y:6,w:4,h:3,i:"C"}],"<768":[{x:0,y:0,w:4,h:3,i:"A"},{x:0,y:3,w:4,h:3,i:"B"},{x:0,y:6,w:4,h:3,i:"C"}]},rowHeight:11.11,colNum:4},layout3:{layout:{">=1200":[{x:0,y:0,w:2,h:10,i:"A"},{x:2,y:0,w:2,h:10,i:"B"}],">=768":[{x:0,y:0,w:2,h:10,i:"A"},{x:2,y:0,w:2,h:10,i:"B"}],"<768":[{x:0,y:0,w:2,h:10,i:"A"},{x:2,y:0,w:2,h:10,i:"B"}]},rowHeight:10,colNum:4},layout4:{layout:{">=1200":[{x:0,y:0,w:1,h:10,i:"A"},{x:1,y:0,w:1,h:10,i:"B"},{x:2,y:0,w:1,h:10,i:"C"}],">=768":[{x:0,y:0,w:1,h:10,i:"A"},{x:1,y:0,w:1,h:10,i:"B"},{x:2,y:0,w:1,h:10,i:"C"}],"<768":[{x:0,y:0,w:1,h:10,i:"A"},{x:1,y:0,w:1,h:10,i:"B"},{x:2,y:0,w:1,h:10,i:"C"}]},rowHeight:10,colNum:3},layout5:{layout:{">=1200":[{x:0,y:0,w:3,h:3,i:"A"},{x:3,y:0,w:3,h:3,i:"B"},{x:6,y:0,w:3,h:3,i:"C"},{x:0,y:3,w:3,h:3,i:"D"},{x:3,y:3,w:3,h:3,i:"E"},{x:6,y:3,w:3,h:3,i:"F"},{x:0,y:6,w:3,h:3,i:"G"},{x:3,y:6,w:3,h:3,i:"H"},{x:6,y:6,w:3,h:3,i:"I"}],">=768":[{x:0,y:0,w:9,h:3,i:"A"},{x:0,y:1,w:9,h:3,i:"B"},{x:0,y:2,w:9,h:3,i:"C"},{x:0,y:3,w:9,h:3,i:"D"},{x:0,y:4,w:9,h:3,i:"E"},{x:0,y:5,w:9,h:3,i:"F"},{x:0,y:6,w:9,h:3,i:"G"},{x:0,y:7,w:9,h:3,i:"H"},{x:0,y:8,w:9,h:3,i:"I"}],"<768":[{x:0,y:0,w:9,h:3,i:"A"},{x:0,y:1,w:9,h:3,i:"B"},{x:0,y:2,w:9,h:3,i:"C"},{x:0,y:3,w:9,h:3,i:"D"},{x:0,y:4,w:9,h:3,i:"E"},{x:0,y:5,w:9,h:3,i:"F"},{x:0,y:6,w:9,h:3,i:"G"},{x:0,y:7,w:9,h:3,i:"H"},{x:0,y:8,w:9,h:3,i:"I"}]},rowHeight:11.11,colNum:9},layout6:{layout:{">=1200":[{x:0,y:0,w:1,h:10,i:"A"},{x:1,y:0,w:2,h:10,i:"B"},{x:3,y:0,w:1,h:10,i:"C"}],">=768":[{x:0,y:0,w:1,h:10,i:"A"},{x:1,y:0,w:2,h:10,i:"B"},{x:3,y:0,w:1,h:10,i:"C"}],"<768":[{x:0,y:0,w:1,h:10,i:"A"},{x:1,y:0,w:2,h:10,i:"B"},{x:3,y:0,w:1,h:10,i:"C"}]},rowHeight:10,colNum:4},layout7:{layout:{">=1200":[{x:0,y:0,w:3,h:3,i:"A"},{x:3,y:0,w:4,h:6,i:"B"},{x:7,y:0,w:3,h:3,i:"C"},{x:0,y:3,w:3,h:3,i:"D"},{x:7,y:3,w:3,h:3,i:"E"},{x:0,y:6,w:3,h:3,i:"F"},{x:3,y:6,w:4,h:3,i:"G"},{x:7,y:6,w:3,h:3,i:"H"}],">=768":[{x:0,y:0,w:10,h:3,i:"A"},{x:0,y:1,w:10,h:6,i:"B"},{x:0,y:2,w:10,h:3,i:"C"},{x:0,y:3,w:10,h:3,i:"D"},{x:0,y:4,w:10,h:3,i:"E"},{x:0,y:5,w:10,h:3,i:"F"},{x:0,y:6,w:10,h:3,i:"G"},{x:0,y:7,w:10,h:3,i:"H"}],"<768":[{x:0,y:0,w:10,h:3,i:"A"},{x:0,y:1,w:10,h:6,i:"B"},{x:0,y:2,w:10,h:3,i:"C"},{x:0,y:3,w:10,h:3,i:"D"},{x:0,y:4,w:10,h:3,i:"E"},{x:0,y:5,w:10,h:3,i:"F"},{x:0,y:6,w:10,h:3,i:"G"},{x:0,y:7,w:10,h:3,i:"H"}]},rowHeight:11.11,colNum:10}}},function(e,t,a){"use strict";a.r(t);var n=a(3),l=a.n(n);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t["default"]={name:"settingItem",props:{type:{type:String,default:"el-input"},list:{type:[Number,Array],default:function(){return null}},data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},value:{type:[String,Number,Boolean]}},computed:{valueProxy:{get:function(){return this.value},set:function(e){var t=this.data.value;this.$emit("input",e,t)}}},methods:{handleEvent:function(e){var t=this.data,a=t.eventName,n=t.value;this.$emit("handleEventDistribute",e,a,n)},renderChildren:function(e,t,a){var n=[],l=[];if(this.list)if(dsf.isNumber(this.list))for(var i=1;i<=this.list;i++)l.push({label:i,value:i});else l=this.list;else l=[{label:"是",value:!0},{label:"否",value:!1}];switch(t){case"el-radio-group":for(var s=0;s<l.length;s++){var r=l[s],o=r.label,c=r.value;n.push(e("el-radio",{attrs:{label:c},key:s},[o]))}break;case"el-checkbox-group":for(var u=0;u<l.length;u++){var d=l[u],f=d.label,p=d.value;n.push(e("el-checkbox",{attrs:{label:p},key:u},[f]))}break;case"el-select":for(var h=0;h<l.length;h++){var m=l[h],b=m.label,v=m.value;n.push(e("el-option",{attrs:{label:b,value:v},key:h}))}break;case"dsf-button":case"span":n=a||this.value;break}return n}},render:function(e){var t=this,a=this.type,n=this.data,l=n.props,i=void 0===l?{}:l,r=n.description,o=n.title,c=n.name,u=n.eventName;i.disabled=this.disabled;var d=!!this.$scopedSlots.append,f=e("div",{class:d?"tool-item tool-item__append":"tool-item"},[e("span",[o,":"]),e(a,u?{attrs:{value:this.value,controls:!1,size:"small"},on:{input:this.handleEvent,click:this.handleEvent},props:s({},i)}:{attrs:{controls:!1,size:"small"},props:s({},i),model:{value:t.valueProxy,callback:function(e){t.valueProxy=e}}},[this.renderChildren(e,a,c)]),d?this.$scopedSlots.append():[],r?e("el-tooltip",{props:s({},{effect:"dark",placement:"top-start",popperClass:"item-tooltip"}),attrs:{content:r}},[e("i",{class:"iconfont icon-wenhao item-question"})]):null]);return f}}},function(e,t,a){"use strict";a.r(t),a.d(t,"serializeFormula",(function(){return n}));var n=function(e,t,a){var n={},l={};if(a){var i="";_.forEach(a,(function(e){i+="".concat(e,"\\s*\\(|")})),i="(".concat(i.substring(0,i.length-1),")");var s=new RegExp(i,"g");e=e.replace(s,(function(e){return"".concat(e.replace(/^[\u4e00-\u9fa5\w-]+/g,(function(e){return"​".concat(e,"​")})))}))}return e=e.replace(/{{2}(\^{2})([\u4e00-\u9fa5\w\s-\.]+)\1}{2}/g,(function(e,a,i){var s;if(null!==t&&void 0!==t&&null!==(s=t[i])&&void 0!==s&&s.showName)return"​".concat(t[i].showName,"​");if(l[i])return l[i];var r="无效字段".concat(Object.keys(l).length),o="​".concat(r,"​");return l[i]=o,n[r]=i,o})),{formulaCodes:e,deleteFields:n}}},function(e,t,a){"use strict";a.r(t);var n=function(){this.showFormList=!1,this.showMathList=!1,this.top=0,this.left=0},l=function(e,t){return function(){var a=this,n=this,l=navigator.userAgent,i=l.indexOf("compatible")>-1&&l.indexOf("MSIE")>-1,s=l.indexOf("Trident")>-1&&l.indexOf("rv:11.0")>-1;setTimeout((function(){for(var l=a.$refs.contentEditable,r=0;r<l.childNodes.length;r++)if(l.childNodes[r].textContent.indexOf(e)>=0){a.insertChildIndex=r,s&&(l.childNodes[r].textContent=l.childNodes[r].textContent.replace(e," "));break}!s&&!i&&document.execCommand("delete","false",null);var o=a.currentSelection;if(o.rangeCount>0){var c=o.getRangeAt(0),u=c.createContextualFragment('<span contentEditable="false" class="list-sign">'.concat(e,"</span>"));c.insertNode(u),o.removeAllRanges()}var d=l.querySelector(".list-sign");n[t]=!0,a.$nextTick((function(){a.$refs.search.focus()})),a.top=d.offsetTop+10,a.left=d.offsetLeft>400?d.offsetLeft-(d.offsetLeft-400):d.offsetLeft}),10)}};t["default"]=new Map([["Enter",function(e){return e.preventDefault()}],["#",l("#","showFormList")],["@",l("@","showMathList")],["Backspace",n]])},function(e,t,a){"use strict";a.r(t),a.d(t,"quickLayoutConfig",(function(){return o}));for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",l={},i={},s=0;s<9;s++)l[n[s]]={animate:"",attr:[parseInt(s/3),s%3,1,1],show:!0};for(var r=0;r<8;r++)i[n[r]]=r<3?{animate:"",attr:[parseInt(r/3),r%3,1,1],show:!0}:3==r?{animate:"",attr:[parseInt(r/3),r%3,2,2],show:!0}:4==r?{animate:"",attr:[parseInt((r+1)/3),(r+1)%3,2,1],show:!0}:{animate:"",attr:[parseInt((r+1)/3)+1,(r+1)%3,1,1],show:!0};var o=[{columns:[""],rows:["50%","50%"],slotMap:{A:{animate:"",attr:[0,0,1,1],show:!0},B:{animate:"",attr:[0,1,1,1],show:!0}}},{columns:[""],rows:["33.33%","33.33%","33.33%"],slotMap:{A:{animate:"",attr:[0,0,1,1],show:!0},B:{animate:"",attr:[0,1,1,1],show:!0},C:{animate:"",attr:[0,2,1,1],show:!0}}},{columns:["",""],rows:["100%"],slotMap:{A:{animate:"",attr:[0,0,1,1],show:!0},B:{animate:"",attr:[1,0,1,1],show:!0}}},{columns:["","",""],rows:["100%"],slotMap:{A:{animate:"",attr:[0,0,1,1],show:!0},B:{animate:"",attr:[1,0,1,1],show:!0},C:{animate:"",attr:[2,0,1,1],show:!0}}},{columns:["","",""],rows:["33.33%","33.33%","33.33%"],slotMap:l},{columns:["","","",""],rows:["100%"],slotMap:{A:{animate:"",attr:[0,0,1,1],show:!0},B:{animate:"",attr:[1,0,2,1],show:!0},C:{animate:"",attr:[3,0,1,1],show:!0}}},{columns:["","","",""],rows:["33.33%","33.33%","33.33%"],slotMap:i}];t["default"]=o},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadding,expression:"loadding"}],staticStyle:{width:"100%",height:"100%",overflow:"hidden"}},[a("iframe",{ref:"iframe",staticStyle:{"border-style":"none",width:"100%",height:"100%"},attrs:{src:e.url}})])},l=[],i={name:"DesStaticListData",mixins:[$mixins.propertyDialogSetting],props:{designer:{type:Object,default:function(){return null}},value:{type:Object,default:function(){return{}}}},data:function(){return{loadding:!1,url:""}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var e=this,t=this;this.loadding=!0,this.$refs.iframe.getValue=function(){return e.value},this.$refs.iframe.onload=function(){t.loadding=!1},this.url=dsf.url.getWebPath("$/html/staticListData.html")},methods:{yes:function(){var e=this.$refs.iframe.contentWindow,t=e.yes();return t}},beforeDestroy:function(){this.$refs.iframe.getValue=null},destroyed:function(){}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},,function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-drag-grid"},[a("div",{staticClass:"dsf-drag-grid-background",style:e.styleBackground}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showOverSize,expression:"showOverSize"}],staticClass:"dsf-drag-grid-background__formatter",style:{height:e.containerHeight+"px",background:e.formatterBackground}}),a("DsfVirtualScroll",{attrs:{scrollY:!1,scrollX:!0}},[a("grid-layout",{ref:"gridLayout",attrs:{layout:e.layout,"col-num":e.colNum,"col-num-unit":e.colNumUnit,"row-height":e.rowHeightProxy,"is-draggable":!0,"is-resizable":!0,"is-mirrored":!1,"vertical-compact":e.verticalCompact,margin:e.margin,"use-css-transforms":!0,preventCollision:!1,freeDrag:e.freeDrag,freeResize:e.freeResize},on:{"update:layout":function(t){e.layout=t},"layout-ready":e.renderBackground,"layout-updated":e.renderBackground}},e._l(e.layout,(function(t,n){return a("grid-item",{key:t.i,staticClass:"dsf-drag-grid-item__design",class:{"dsf-drag-grid-item__design-active":n===e.activeItem},style:{zIndex:t.zIndex||1},attrs:{x:t.x,y:t.y,w:t.w,h:t.h,i:t.i},nativeOn:{mousedown:function(t){return e.hanleActiveItem(n)}}},[a("el-dropdown",{staticClass:"dsf-drag-grid-item__design-del",class:{"dsf-drag-grid-item__horizontal":e.freeResize||t.h*e.rowHeight<=6},on:{command:e.handleDelete}},[a("el-dropdown-menu",{staticClass:"ds-del-box",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:[1,n]}},[e._v("单个删除")]),a("el-dropdown-item",{attrs:{command:[2,n]}},[e._v("全部删除")])],1),a("span",{on:{click:function(t){return t.stopPropagation(),e.handleDelete([2,n])}}},[a("i",{staticClass:"iconfont icon-shanchu"})])],1),a("div",{staticClass:"dsf-drag-grid-item-box"},[a("div",{staticClass:"dsf-drag-grid-item__indent"},[e._v(e._s(t.i))]),a("div",{staticClass:"dsf-drag-grid-item__size"},[e._v(e._s(t.w)+"x"+e._s(t.h))])])],1)})),1)],1)],1)},l=[],i={props:{layout:{type:Array,default:function(){return[]}},colNum:{type:Number,default:4},colNumUnit:{type:String,default:"%"},rowHeight:{type:[String,Number],default:10},margin:{type:Array,default:function(){return[0,0]}},width:{type:Number,default:1030},containerHeight:{type:Number,default:495},verticalCompact:{type:Boolean,default:!0},freeDrag:{type:Boolean,default:!1},freeResize:{type:Boolean,default:!1},activeItem:{type:Number,default:-1},rowHeightUnit:{type:String,default:"%"}},watch:{colNum:function(){this.setBackground()},colNumUnit:function(){var e=this;this.$nextTick((function(){var t;null===(t=e.$refs.gridLayout)||void 0===t||t.updateHeight(),e.setBackground()}))},rowHeight:{handler:function(e){var t=this;"%"===this.rowHeightUnit?this.rowHeightProxy=+(this.containerHeight/100*e).toFixed(2):this.rowHeightProxy=this.rowHeight,this.$nextTick((function(){var e;null===(e=t.$refs.gridLayout)||void 0===e||e.updateHeight(),t.setBackground()}))},immediate:!0},rowHeightUnit:{handler:function(e){var t=this;this.rowHeightProxy="%"===e?+(this.containerHeight/100*this.rowHeight).toFixed(2):this.rowHeight,this.$nextTick((function(){var e;null===(e=t.$refs.gridLayout)||void 0===e||e.updateHeight(),t.setBackground()}))}},"layout.length":function(){var e=this;this.$nextTick((function(){e.setBackground()}))}},computed:{showOverSize:function(){return"%"===this.rowHeightUnit&&"%"===this.colNumUnit}},data:function(){return{styleBackground:{height:"0px",background:"#f5dab1"},formatterBackground:"#f3f3f3",rowHeightProxy:0}},methods:{hanleActiveItem:function(e){this.$emit("itemChange",e)},renderBackground:function(){this.setBackground()},setBackground:function(){var e,t=Math.max(this.containerHeight,parseFloat((null===(e=this.$refs.gridLayout)||void 0===e?void 0:e.containerHeight())||0)),a=this.width/this.colNum,n="repeating-linear-gradient(90deg, #fff 0, transparent 2px, transparent ".concat(a,"px),\n        repeating-linear-gradient(#fff 0, transparent 2px, transparent ").concat(this.rowHeightProxy,"px),");this.formatterBackground=this.showOverSize?n+"#f5dab1":"#f5dab1",this.styleBackground={height:t+"px",background:this.showOverSize?n+"#f56c6c":"#f5dab1"}},handleDelete:function(e){this.$emit("delItem",e)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-select-dept"},[e.showSearch?a("div",{staticClass:"dsf-tree-search"},[a("el-input",{attrs:{disabled:e.loading,placeholder:"输入名称"},on:{input:function(t){return e.search()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(!0)}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[a("i",{staticClass:"iconfont el-input__icon icon-Magnifier",attrs:{slot:"suffix"},on:{click:function(t){return e.search(!0)}},slot:"suffix"})]),e._t("search")],2):e._e(),a("div",{staticClass:"dsf-select-tree",style:{height:e.showSearch?"340px":"100%"}},[a("DsfVirtualTree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"treeForm",attrs:{data:e.treeData,props:e.defaultProps,lazy:e.lazy,load:e.loadNode,"node-key":"id","empty-text":e.loading?"数据加载中.....":"暂无数据","show-checkbox":!e.hideCheckbox,"default-expand-all":e.expandAll,"default-expanded-keys":e.defaultKeys,"default-checked-keys":e.checked,"check-strictly":!e.multi,"check-on-click-node":!0,"expand-on-click-node":!1,"filter-node-method":e.filterData},on:{"check-change":e.selectTree,"node-click":e.choose},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("div",{staticClass:"custom-tree-node",attrs:{"tree-id":["key_"+l["id"]]}},[a("i",{staticClass:"iconfont",class:e.setIcon(n,e.lazy&&!l.leaf||e.dsf.isDef(l[e.defaultProps.children]))}),a("span",{staticClass:"ellipsis",domProps:{innerHTML:e._s(e.dsf.safe.xss(l[e.defaultProps.label]))}}),e.lazy&&!l.leaf||e.dsf.isDef(l[e.defaultProps.children])?e._t("icon",null,{data:l}):e._t("file-icon",null,{data:l})],2)}}],null,!0)})],1)])},l=[],i={name:"SelectTree",props:{treeData:{type:Array,default:function(){return[]}},select:{type:[Object,Array],default:function(){return{}}},checked:{type:Array,default:function(){return[]}},defaultKeys:{type:Array,default:function(){return[]}},expandAll:{type:Boolean,default:function(){return!0}},showSearch:{type:Boolean,default:!1},hideCheckbox:{type:Boolean,default:!1},multi:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},loadNode:{type:Function,default:function(){return function(){}}},customerSearch:{type:Function,default:null},customIcon:{type:Array,default:function(){return[]}},treeProps:{type:Object,default:function(){return{}}},setIcon:{type:Function,default:function(e,t){return t?[e.expanded?"icon-dakai":"icon-wenjianjia"]:this.customIcon.length>0?this.customIcon:["icon-shiyongwendang"]}}},data:function(){var e;return{searchKey:"",defaultProps:{children:"children",label:(null===(e=this.treeProps)||void 0===e?void 0:e.label)||"label",isLeaf:"leaf"},oldKey:""}},created:function(){},mounted:function(){},methods:{selectTree:function(e,t,a){1!=t||this.multi||this.$refs.treeForm.setCheckedNodes([e]);var n=this.$refs.treeForm.getCheckedNodes();n=n.filter((function(e){return!e.disabled})),this.$emit("update:select",this.multi?n:n[0])},filterData:function(e,t){return!(e&&!this.customerSearch)||-1!==t.label.indexOf(e)},search:function(e){if(this.customerSearch){if(!e||this.oldKey===this.searchKey)return;return this.oldKey=this.searchKey,this.searchKey?void this.customerSearch(this.searchKey):void this.$refs.treeForm.reloadData()}this.$refs.treeForm.filter(this.searchKey)},choose:function(e){this.$emit("change",e)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-layout-grid-setting-by-layout",class:{active:e.active},on:{click:e.rootClick}},[a("div",{staticClass:"title",attrs:{title:"点击选中"}},[a("span",[a("i",{staticClass:"iconfont icon-quanping"}),e._v(" 宽 "+e._s(e.size)+" ")]),a("i",{staticClass:"iconfont icon-fuzhi",staticStyle:{cursor:"pointer"},attrs:{title:"复制布局"},on:{click:e.copyLayout}})]),e.columns.length*e.rows.length?a("div",{staticClass:"box"},[a("div",{staticClass:"box-bg"},[e._l(e.columns,(function(t,n){return[a("div",{key:n,staticClass:"column",style:e.getColStyle(n)},[e._l(e.rows,(function(t,l){return[a("div",{key:l,staticClass:"row",style:e.getRowStyle(l)},[e._v(" "+e._s(n)+"-"+e._s(l)+" ")])]}))],2)]}))],2),a("div",{staticClass:"box-content"},[e._l(e.slotMap,(function(t,n){return[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"val.show"}],key:n,class:{active:e.$gridSetting.activeSlot===n},style:e.getSlotStyle(t.attr),on:{click:function(t){e.$gridSetting.activeSlot=n}}},[e._v(" "+e._s(n)+" ")])]}))],2)]):a("div",{staticClass:"box"})])},l=[],i=a(8),s=a.n(i),r={">=1920":1920,">=1200":1200,">=992":992,">=768":768,"<768":768},o={name:"DesLayoutGridSettingByLayout",inject:["$gridSetting"],props:{size:{type:String,default:""},columns:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},slotMap:{type:Object,default:function(){return{}}},layout:{type:Object,default:function(){return{}}}},computed:{width:function(){return r[this.size]},active:function(){return this.$gridSetting.activeLayout===this.size},colWidths:function(){var e=this,t=0,a=[],n=_.map(this.columns,(function(n,l){var i=e.getColWidth(n),s=parseFloat(i);return s?t+=s:a.push(l),i}));if(a.length){var l=((338-t)/a.length).toFixed(2)+"px";_.forEach(a,(function(e){n[e]=l}))}return n},rowHeights:function(){var e=this;return _.map(this.rows,(function(t){return e.getRowHeight(t)}))}},methods:{copyLayout:function(){var e=JSON.stringify(this.layout);if(navigator.clipboard)navigator.clipboard.writeText(e);else{var t=document.createElement("textarea");document.body.appendChild(t),t.style.position="fixed",t.style.clip="rect(0 0 0 0)",t.style.top="10px",t.value=e,t.select(),document.execCommand("copy",!0),document.body.removeChild(t)}},getColWidth:function(e){var t=0;if(e&&"auto"!==e){var a=parseFloat(e);t=/%$/.test(e+"")?(338*a/100).toFixed(2)+"px":(338*a/this.width).toFixed(2)+"px"}return t},getRowHeight:function(e){var t=0;return e&&"auto"!==e&&(/%$/.test(e+"")?t=2*e.replace("%","")+"px":(e=e.replace(/\d/,(parseFloat(e)/4).toFixed(2)),t=e+"px")),t},getColStyle:function(e){var t=this.colWidths[e];return{width:t,flex:t?"none":"auto"}},getRowStyle:function(e){return{height:this.rowHeights[e]}},getSlotStyle:function(e){for(var t=s()(e,4),a=t[0],n=t[1],l=t[2],i=t[3],r=a+l-1,o=n+i-1,c=this.colWidths,u=this.rowHeights,d=0,f=0,p=0,h=0,m=0,b=c.length;m<b;m++){if(r<m)break;var v=parseFloat(c[m]);a>m?f+=v:p+=v}for(var g=0,y=u.length;g<y;g++){if(o<g)break;var x=parseFloat(u[g]);n>g?d+=x:h+=x}return{top:d-1+"px",left:f-1+"px",width:p+1+"px",height:h+1+"px"}},rootClick:function(){this.active||this.$emit("choose")}}},c=o,u=a(0),d=Object(u["a"])(c,n,l,!1,null,null,null);t["default"]=d.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-layout-grid-setting-by-slot",class:{choose:e.choose,active:e.active}},[a("span",[e._v(e._s(e.name))]),a("div",{staticClass:"bts"},[a("i",{staticClass:"iconfont icon-weitongguo",attrs:{slot:"reference",title:"删除"},on:{click:e.removeClick},slot:"reference"}),e.choose?a("i",{staticClass:"iconfont icon-icon-invisible",attrs:{title:"隐藏"},on:{click:e.hideClick}}):a("i",{staticClass:"iconfont icon-icon-visible",attrs:{title:"显示"},on:{click:e.showClick}}),a("i",{staticClass:"iconfont icon-edit",attrs:{title:"编辑"},on:{click:e.editClick}})])])},l=[],i={name:"DesLayoutGridSettingBySlot",inject:["$gridSetting"],props:{name:{type:String,default:""}},computed:{active:function(){return this.$gridSetting.activeSlot===this.name},choose:function(){var e=this.$gridSetting.currentSlots[this.name];return e&&e.show}},watch:{active:function(e){e&&this.$el&&this.$el.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}},methods:{showClick:function(){var e=this.$gridSetting.currentSlots[this.name];e?this.$set(e,"show",!0):this.$set(this.$gridSetting.currentSlots,this.name,{show:!0,attr:[0,0,0,0]})},hideClick:function(){var e=this.$gridSetting.currentSlots[this.name];e&&this.$set(e,"show",!1)},editClick:function(){this.$gridSetting.activeSlot=this.name;var e=this.$gridSetting.currentSlots[this.name];e||this.$set(this.$gridSetting.currentSlots,this.name,{show:!1,attr:[0,0,0,0]})},removeClick:function(){var e=this,t=this.name,a=this.$gridSetting.layoutConfig,n=!1;for(var l in a){var i;if(null!==(i=a[l].slotMap[t])&&void 0!==i&&i.show){n=!0;break}}var s=function(){for(var n in a)a[n].slotMap[t]&&e.$gridSetting.$delete(a[n].slotMap,t);dsf.array.remove(e.$gridSetting.slotList,t)};n?dsf.layer.confirm({confirmButtonText:"确定",cancelButtonText:"取消",message:"有布局正在使用该区域，是否继续？"}).then(s):s()}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},[e._l(e.series,(function(t,n){return a("div",{key:n,staticClass:"axis-list",staticStyle:{width:"100%"}},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应x轴线")]),a("el-radio-group",{model:{value:t.xAxisIndex,callback:function(a){e.$set(t,"xAxisIndex",a)},expression:"item.xAxisIndex"}},e._l(e.w.xAxis.length,(function(t){return a("el-radio",{key:"x_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应y轴线")]),a("el-radio-group",{model:{value:t.yAxisIndex,callback:function(a){e.$set(t,"yAxisIndex",a)},expression:"item.yAxisIndex"}},e._l(e.w.yAxis.length,(function(t){return a("el-radio",{key:"y_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("数据名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标签")]),a("el-radio-group",{model:{value:t.label.show,callback:function(a){e.$set(t.label,"show",a)},expression:"item.label.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("柱体宽度")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",placeholder:"自适应"},model:{value:t.barWidth,callback:function(a){e.$set(t,"barWidth",a)},expression:"item.barWidth"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("不同柱系间隙")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.barGap,callback:function(a){e.$set(t,"barGap",a)},expression:"item.barGap"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("柱系间隙")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.barCategoryGap,callback:function(a){e.$set(t,"barCategoryGap",a)},expression:"item.barCategoryGap"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("柱体圆角")]),a("el-row",{attrs:{gutter:2}},e._l(t.itemStyle.barBorderRadius,(function(n,l){return a("el-col",{key:l,attrs:{span:6}},[[a("el-input",{staticClass:"mtext",attrs:{value:t.itemStyle.barBorderRadius[l]},on:{input:function(a){return e.transformNumber(a,t,l)}}})]],2)})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示柱体背景")]),a("el-radio-group",{model:{value:t.showBackground,callback:function(a){e.$set(t,"showBackground",a)},expression:"item.showBackground"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item-2"},[a("div",{staticClass:"config-title"},[e._v("柱体颜色")]),a("Shade",{attrs:{type:"itemStyle",isshade:t.itemStyle.isshade,index:n,cacheStartcolor:t.itemStyle.startColor,cacheEndcolor:t.itemStyle.endColor},on:{change:e.changeColor}})],1),a("p",{staticStyle:{width:"94%",height:"1px",background:"#ccc",margin:"10px 0"}})])})),a("el-button",{on:{click:e.addData}},[e._v("增加数据项")]),a("el-button",{on:{click:e.changeAxis}},[e._v("x/y轴数据展示互换")]),this.series.length>1?a("el-button",{on:{click:e.removeData}},[e._v("移除数据项")]):e._e()],2),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i=a(80),s={name:"SeriesBarConfig",components:{Shade:i["default"]},props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,series:[],default:{}}},watch:{series:{handler:function(e){this.$emit("change-options",{type:"series",options:e})},deep:!0}},created:function(){this.series=_.cloneDeep(this.options),this.default=_.cloneDeep(this.series[0])},methods:{changeAxis:function(){var e=this.w,t=e.xAxis,a=e.yAxis,n=e.isReturn;this.$set(this.w,"xAxis",_.cloneDeep(a)),this.$set(this.w,"yAxis",_.cloneDeep(t)),this.$set(this.w,"isReturn",!n)},changeColor:function(e){var t=e.isshade,a=e.startColor,n=e.endColor,l=e.index,i=e.type,s=null;s=t?{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:1,color:a},{offset:0,color:n}],global:!1}:a,this.series[l][i].color=s,this.series[l][i].startColor=a,this.series[l][i].endColor=n,this.series[l][i].isshade=t},addData:function(){for(var e=_.cloneDeep(this.default),t=[],a=0;a<7;a++)t.push(Math.ceil(200+1200*Math.random()));e.data=t,e.name="示例_"+this.series.length,e.itemStyle.color=this.w.color[this.series.length],e.itemStyle.isshade=!1,e.itemStyle.startColor=this.w.color[this.series.length],e.itemStyle.endColor=this.w.color[this.series.length],this.series.push(e),this.w.legend.data.push(e.name)},removeData:function(){this.series.splice(this.series.length-1,1),this.w.legend.data.splice(this.w.legend.data.length-1,1)},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.series=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.series,null,"\t");e.$refs["editor"].setContent(t)}))},transformNumber:function(e,t,a){this.$set(t.itemStyle.barBorderRadius,a,Number(e))}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},[e._l(e.series,(function(t,n){return a("div",{key:n,staticClass:"axis-list",staticStyle:{width:"100%"}},[a("h4",{staticStyle:{width:"100%","margin-bottom":"10px"}},[e._v(" "+e._s("line"===t.type?"----------折线系----------对应折线："+t.name:"----------柱系----------对应柱体："+t.name)+" ")]),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应x轴线")]),a("el-radio-group",{model:{value:t.xAxisIndex,callback:function(a){e.$set(t,"xAxisIndex",a)},expression:"item.xAxisIndex"}},e._l(e.w.xAxis.length,(function(t){return a("el-radio",{key:"x_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应y轴线")]),a("el-radio-group",{model:{value:t.yAxisIndex,callback:function(a){e.$set(t,"yAxisIndex",a)},expression:"item.yAxisIndex"}},e._l(e.w.yAxis.length,(function(t){return a("el-radio",{key:"y_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),"line"===t.type?[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标记")]),a("el-radio-group",{model:{value:t.showSymbol,callback:function(a){e.$set(t,"showSymbol",a)},expression:"item.showSymbol"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标记形状")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.symbol,callback:function(a){e.$set(t,"symbol",a)},expression:"item.symbol"}},[a("el-option",{attrs:{label:"圆",value:"circle"}}),a("el-option",{attrs:{label:"空心圆 ",value:"emptyCircle"}}),a("el-option",{attrs:{label:"长方形",value:"rect"}}),a("el-option",{attrs:{label:"圆角长方形",value:"roundRect"}}),a("el-option",{attrs:{label:"三角形",value:"triangle"}}),a("el-option",{attrs:{label:"钻石形",value:"diamond"}}),a("el-option",{attrs:{label:"pin",value:"pin"}}),a("el-option",{attrs:{label:"箭头",value:"arrow"}}),a("el-option",{attrs:{label:"无",value:"none"}})],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("线条粗细")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.lineStyle.width,callback:function(a){e.$set(t.lineStyle,"width",a)},expression:"item.lineStyle.width"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标记大小")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.symbolSize,callback:function(a){e.$set(t,"symbolSize",a)},expression:"item.symbolSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否平滑")]),a("el-radio-group",{model:{value:t.smooth,callback:function(a){e.$set(t,"smooth",a)},expression:"item.smooth"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("区域颜色")]),a("Shade",{attrs:{type:"areaStyle",isshade:t.areaStyle.isshade,index:n,cacheStartcolor:t.areaStyle.startColor,cacheEndcolor:t.areaStyle.endColor},on:{change:e.changeColor}})],1)]:e._e(),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("数据名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标签")]),a("el-radio-group",{model:{value:t.label.show,callback:function(a){e.$set(t.label,"show",a)},expression:"item.label.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),"bar"===t.type?[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("柱体宽度")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",placeholder:"自适应"},model:{value:t.barWidth,callback:function(a){e.$set(t,"barWidth",a)},expression:"item.barWidth"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("不同柱系间隙")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.barGap,callback:function(a){e.$set(t,"barGap",a)},expression:"item.barGap"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("柱系间隙")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.barCategoryGap,callback:function(a){e.$set(t,"barCategoryGap",a)},expression:"item.barCategoryGap"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("柱体圆角")]),a("el-row",{attrs:{gutter:2}},e._l(t.itemStyle.barBorderRadius,(function(n,l){return a("el-col",{key:l,attrs:{span:6}},[[a("el-input",{staticClass:"mtext",attrs:{value:t.itemStyle.barBorderRadius[l]},on:{input:function(a){return e.transformNumber(a,t,l)}}})]],2)})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示柱体背景")]),a("el-radio-group",{model:{value:t.showBackground,callback:function(a){e.$set(t,"showBackground",a)},expression:"item.showBackground"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)]:e._e(),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("系列颜色")]),a("Shade",{attrs:{type:"itemStyle",isshade:t.itemStyle.isshade,index:n,cacheStartcolor:t.itemStyle.startColor,cacheEndcolor:t.itemStyle.endColor},on:{change:e.changeColor}})],1)],2)})),a("el-button",{on:{click:function(t){return e.addData("line")}}},[e._v("增加折线项")]),a("el-button",{on:{click:function(t){return e.addData("bar")}}},[e._v("增加柱状项")]),this.series.length>2?a("el-button",{on:{click:e.removeData}},[e._v(" 移除数据项 ")]):e._e()],2),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i=a(80),s={name:"MixinAxisConfig",components:{Shade:i["default"]},props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,series:_.cloneDeep(this.options),default:{line:_.cloneDeep(this.options.find((function(e){return"line"===e.type}))),bar:_.cloneDeep(this.options.find((function(e){return"bar"===e.type})))}}},watch:{series:{handler:function(e){this.$emit("change-options",{type:"series",options:e})},deep:!0}},methods:{transformNumber:function(e,t,a){this.$set(t.itemStyle.barBorderRadius,a,Number(e))},changeColor:function(e){var t=e.isshade,a=e.startColor,n=e.endColor,l=e.index,i=e.type,s=null;s=t?{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:1,color:a},{offset:0,color:n}],global:!1}:a,this.series[l][i].color=s,this.series[l][i].startColor=a,this.series[l][i].endColor=n,this.series[l][i].isshade=t},addData:function(e){var t={},a=[];switch(e){case"line":t=_.cloneDeep(this.default.line);for(var n=0;n<7;n++)a.push(Math.ceil(200+1200*Math.random()));t.data=a,t.name="示例_l"+this.series.length,t.areaStyle.color="rgba(255,255,255,0)",t.areaStyle.isshade=!1,t.areaStyle.startColor="rgba(255,255,255,0)",t.areaStyle.endColor="rgba(255,255,255,0)";break;case"bar":t=_.cloneDeep(this.default.bar);for(var l=0;l<7;l++)a.push(Math.ceil(200+1200*Math.random()));t.data=a,t.name="示例_b"+this.series.length;break}t.itemStyle.color=this.w.color[this.series.length],t.itemStyle.isshade=!1,t.itemStyle.startColor=this.w.color[this.series.length],t.itemStyle.endColor=this.w.color[this.series.length],this.series.push(t),this.w.legend.data.push(t.name)},removeData:function(){this.series.splice(this.series.length-1,1),this.w.legend.data.splice(this.w.legend.data.length-1,1)},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.series=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.series,null,"\t");e.$refs["editor"].setContent(t)}))}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},[e._l(e.series,(function(t,n){return a("el-card",{key:n,staticClass:"axis-card"},[a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应x轴线")]),a("el-radio-group",{model:{value:t.xAxisIndex,callback:function(a){e.$set(t,"xAxisIndex",a)},expression:"item.xAxisIndex"}},e._l(e.w.xAxis.length,(function(t){return a("el-radio",{key:"x_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应y轴线")]),a("el-radio-group",{model:{value:t.yAxisIndex,callback:function(a){e.$set(t,"yAxisIndex",a)},expression:"item.yAxisIndex"}},e._l(e.w.yAxis.length,(function(t){return a("el-radio",{key:"y_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标记形状")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.symbol,callback:function(a){e.$set(t,"symbol",a)},expression:"item.symbol"}},[a("el-option",{attrs:{label:"圆",value:"circle"}}),a("el-option",{attrs:{label:"空心圆 ",value:"emptyCircle"}}),a("el-option",{attrs:{label:"长方形",value:"rect"}}),a("el-option",{attrs:{label:"圆角长方形",value:"roundRect"}}),a("el-option",{attrs:{label:"三角形",value:"triangle"}}),a("el-option",{attrs:{label:"钻石形",value:"diamond"}}),a("el-option",{attrs:{label:"pin",value:"pin"}}),a("el-option",{attrs:{label:"箭头",value:"arrow"}}),a("el-option",{attrs:{label:"无",value:"none"}})],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("数据名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标记大小")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.symbolSize,callback:function(a){e.$set(t,"symbolSize",a)},expression:"item.symbolSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标签")]),a("el-radio-group",{model:{value:t.label.show,callback:function(a){e.$set(t.label,"show",a)},expression:"item.label.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("散点颜色")]),a("Shade",{attrs:{type:"itemStyle",isshade:t.itemStyle.isshade,index:n,cacheStartcolor:t.itemStyle.startColor,cacheEndcolor:t.itemStyle.endColor},on:{change:e.changeColor}})],1)])])})),a("el-button",{on:{click:e.addData}},[e._v("增加散点")]),this.series.length>1?a("el-button",{on:{click:e.removeData}},[e._v(" 移除数据项 ")]):e._e()],2),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i=a(80),s={name:"platformSeriesScatterConfig",components:{Shade:i["default"]},props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,series:[],default:{}}},watch:{series:{handler:function(e){this.$emit("change-options",{type:"series",options:e})},deep:!0}},created:function(){this.series=_.cloneDeep(this.options),this.default=_.cloneDeep(this.series[0])},methods:{changeColor:function(e){var t=e.isshade,a=e.startColor,n=e.endColor,l=e.index,i=e.type,s=null;s=t?{type:"radial",x:.5,y:.5,r:.5,colorStops:[{offset:1,color:a},{offset:0,color:n}],global:!1}:a,this.series[l][i].color=s,this.series[l][i].startColor=a,this.series[l][i].endColor=n,this.series[l][i].isshade=t},addData:function(){for(var e=_.cloneDeep(this.default),t=[],a=0;a<7;a++)t.push({name:"测_"+a,value:[Math.ceil(10+12*Math.random()),Math.ceil(10+12*Math.random())]});e.data=t,e.name="示例_"+this.series.length,e.itemStyle.color=this.w.color[this.series.length],e.itemStyle.isshade=!1,e.itemStyle.startColor=this.w.color[this.series.length],e.itemStyle.endColor=this.w.color[this.series.length],this.series.push(e),this.w.legend.data.push(e.name)},removeData:function(){this.series.splice(this.series.length-1,1),this.w.legend.data.splice(this.w.legend.data.length-1,1)},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.series=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.series,null,"\t");e.$refs["editor"].setContent(t)}))}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},e._l(e.radar,(function(t,n){return a("div",{key:n,staticClass:"axis-list",staticStyle:{width:"100%"}},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("雷达大小")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.radius,callback:function(a){e.$set(t,"radius",a)},expression:"item.radius"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("开始角度")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.startAngle,callback:function(a){e.$set(t,"startAngle",a)},expression:"item.startAngle"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("轴线颜色")]),a("el-color-picker",{attrs:{size:"small"},model:{value:t.axisLine.lineStyle.color,callback:function(a){e.$set(t.axisLine.lineStyle,"color",a)},expression:"item.axisLine.lineStyle.color"}})],1),a("div",{staticClass:"cell-item tag-none",staticStyle:{width:"100%"}},[a("div",{staticClass:"config-title"},[e._v("区域颜色")]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[e._l(t.splitArea.areaStyle.color,(function(l,i){return a("el-tag",{key:l,attrs:{type:"",effect:"plain",hit:!1,closable:"","disable-transitions":!1},on:{close:function(t){return e.handleClose("color",n,i)}}},[a("el-color-picker",{attrs:{size:"small","show-alpha":""},model:{value:t.splitArea.areaStyle.color[i],callback:function(a){e.$set(t.splitArea.areaStyle.color,i,a)},expression:"item.splitArea.areaStyle.color[i]"}})],1)})),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.add("color",n)}}},[e._v(" 新增 ")])],2)]),a("div",{staticClass:"cell-item tag-name",staticStyle:{width:"100%"}},[a("div",{staticClass:"config-title"},[e._v("指标系")]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[e._l(t.indicator,(function(l,i){return a("el-tag",{key:l.name,attrs:{type:"",effect:"plain",hit:!1,closable:t.indicator.length>1,"disable-transitions":!1},on:{close:function(t){return e.handleClose("indicator",n,i)}}},[a("el-input",{attrs:{size:"small"},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"tag.name"}})],1)})),e.inputVisible?a("el-input",{ref:"saveTagInput",refInFor:!0,staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{attrs:{size:"small"},on:{click:e.showInput}},[e._v(" 新增 ")])],2)]),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("分割线颜色")]),a("el-color-picker",{attrs:{size:"small"},model:{value:t.splitLine.lineStyle.color,callback:function(a){e.$set(t.splitLine.lineStyle,"color",a)},expression:"item.splitLine.lineStyle.color"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("分割区域份数")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.splitNumber,callback:function(a){e.$set(t,"splitNumber",a)},expression:"item.splitNumber"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("圆点位置")]),a("el-row",{attrs:{gutter:2}},e._l(t.center,(function(n,l){return a("el-col",{key:l,attrs:{span:6}},[[a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.center[l],callback:function(a){e.$set(t.center,l,a)},expression:"item.center[$index]"}})]],2)})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("形状")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.shape,callback:function(a){e.$set(t,"shape",a)},expression:"item.shape"}},[a("el-option",{attrs:{label:"圆形",value:"circle"}}),a("el-option",{attrs:{label:"区域形",value:"polygon"}})],1)],1)])})),0),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i={name:"radarConfig",props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{inputValue:"",inputVisible:!1,custom:!1,radar:_.cloneDeep(this.options)}},watch:{radar:{handler:function(e){this.$emit("change-options",{type:"radar",options:e})},deep:!0}},methods:{handleInputConfirm:function(){var e=this.inputValue;e&&this.radar[0].indicator.push({name:e}),this.inputVisible=!1,this.inputValue=""},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput[0].$refs.input.focus()}))},handleClose:function(e,t,a){"color"===e?this.radar[t].splitArea.areaStyle.color.splice(a,1):this.radar[t].indicator.splice(a,1)},add:function(e,t){"color"===e&&this.radar[t].splitArea.areaStyle.color.push("#ccc")},addData:function(e,t){e.data.push({name:"测试示例_".concat(e.indicator.length),value:200+Math.ceil(1e3*Math.random())})},removeData:function(e,t){e.indicator.pop()},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.radar=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.radar,null,"\t");e.$refs["editor"].setContent(t)}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},[e._l(e.series,(function(t,n){return a("el-card",{key:n,staticClass:"axis-card"},[a("div",{staticClass:"axis-list"},[a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应x轴线")]),a("el-radio-group",{model:{value:t.xAxisIndex,callback:function(a){e.$set(t,"xAxisIndex",a)},expression:"item.xAxisIndex"}},e._l(e.w.xAxis.length,(function(t){return a("el-radio",{key:"x_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("对应y轴线")]),a("el-radio-group",{model:{value:t.yAxisIndex,callback:function(a){e.$set(t,"yAxisIndex",a)},expression:"item.yAxisIndex"}},e._l(e.w.yAxis.length,(function(t){return a("el-radio",{key:"y_"+t,attrs:{label:t-1}},[e._v(" 第"+e._s(t)+"条 ")])})),1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标记")]),a("el-radio-group",{model:{value:t.showSymbol,callback:function(a){e.$set(t,"showSymbol",a)},expression:"item.showSymbol"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标记形状")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.symbol,callback:function(a){e.$set(t,"symbol",a)},expression:"item.symbol"}},[a("el-option",{attrs:{label:"圆",value:"circle"}}),a("el-option",{attrs:{label:"空心圆 ",value:"emptyCircle"}}),a("el-option",{attrs:{label:"长方形",value:"rect"}}),a("el-option",{attrs:{label:"圆角长方形",value:"roundRect"}}),a("el-option",{attrs:{label:"三角形",value:"triangle"}}),a("el-option",{attrs:{label:"钻石形",value:"diamond"}}),a("el-option",{attrs:{label:"pin",value:"pin"}}),a("el-option",{attrs:{label:"箭头",value:"arrow"}}),a("el-option",{attrs:{label:"无",value:"none"}})],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("数据名称")]),a("el-input",{staticClass:"mtext",attrs:{size:"small"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("标记大小")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.symbolSize,callback:function(a){e.$set(t,"symbolSize",a)},expression:"item.symbolSize"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("线条粗细")]),a("el-input",{staticClass:"mtext",attrs:{size:"small",type:"number"},model:{value:t.lineStyle.width,callback:function(a){e.$set(t.lineStyle,"width",a)},expression:"item.lineStyle.width"}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否显示标签")]),a("el-radio-group",{model:{value:t.label.show,callback:function(a){e.$set(t.label,"show",a)},expression:"item.label.show"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("是否平滑")]),a("el-radio-group",{model:{value:t.smooth,callback:function(a){e.$set(t,"smooth",a)},expression:"item.smooth"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("区域颜色")]),a("Shade",{attrs:{type:"areaStyle",isshade:t.areaStyle.isshade,index:n,cacheStartcolor:t.areaStyle.startColor,cacheEndcolor:t.areaStyle.endColor},on:{change:e.changeColor}})],1),a("div",{staticClass:"cell-item"},[a("div",{staticClass:"config-title"},[e._v("线条颜色")]),a("Shade",{attrs:{type:"itemStyle",isshade:t.itemStyle.isshade,index:n,cacheStartcolor:t.itemStyle.startColor,cacheEndcolor:t.itemStyle.endColor},on:{change:e.changeColor}})],1)])])})),a("el-button",{on:{click:e.addData}},[e._v("增加折线项")]),this.series.length>1?a("el-button",{on:{click:e.removeData}},[e._v("移除数据项")]):e._e()],2),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i=a(80),s={name:"SeriesLineConfig",components:{Shade:i["default"]},props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,series:[],default:{}}},watch:{series:{handler:function(e){this.$emit("change-options",{type:"series",options:e})},deep:!0}},created:function(){this.series=_.cloneDeep(this.options),this.default=_.cloneDeep(this.series[0])},methods:{changeColor:function(e){var t=e.isshade,a=e.startColor,n=e.endColor,l=e.index,i=e.type,s=null;s=t?{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:1,color:a},{offset:0,color:n}],global:!1}:a,this.series[l][i].color=s,this.series[l][i].startColor=a,this.series[l][i].endColor=n,this.series[l][i].isshade=t},addData:function(){for(var e=_.cloneDeep(this.default),t=[],a=0;a<7;a++)t.push(Math.ceil(200+1200*Math.random()));e.data=t,e.name="示例_"+this.series.length,e.areaStyle.color="rgba(255,255,255,0)",e.areaStyle.isshade=!1,e.areaStyle.startColor="rgba(255,255,255,0)",e.areaStyle.endColor="rgba(255,255,255,0)",e.itemStyle.color=this.w.color[this.series.length],e.itemStyle.isshade=!1,e.itemStyle.startColor=this.w.color[this.series.length],e.itemStyle.endColor=this.w.color[this.series.length],this.series.push(e),this.w.legend.data.push(e.name)},removeData:function(){this.series.splice(this.series.length-1,1),this.w.legend.data.splice(this.w.legend.data.length-1,1)},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.series=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.series,null,"\t");e.$refs["editor"].setContent(t)}))}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-common-chart-config"},[e.custom?e._e():a("el-scrollbar",{staticClass:"ds-scroll"},e._l(e.series,(function(t,n){return a("div",{key:n,staticClass:"axis-list",staticStyle:{width:"100%"}},[a("div",{staticClass:"cell-item"},[a("el-button",{on:{click:function(a){return e.addData(t,n)}}},[e._v("增加数据项")])],1),a("div",{staticClass:"cell-item"},[a("el-button",{on:{click:function(a){return e.removeData(t,n)}}},[e._v("移除数据项")])],1),a("p",{staticStyle:{width:"94%",height:"1px",background:"#ccc",margin:"10px 0"}})])})),0),a("br"),a("div",[e._v(" 属性总览 "),a("el-switch",{model:{value:e.custom,callback:function(t){e.custom=t},expression:"custom"}})],1),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.custom,expression:"custom"}],staticStyle:{height:"80%"}},[e.custom?a("MonacoEditor",{ref:"editor",attrs:{height:"100%",language:"json"},on:{saveCode:e.codeChange,mounted:e.editorLoaded}}):e._e()],1)],1)},l=[],i={name:"SeriesRadarConfig",props:{options:{type:Array,default:function(){return[]}},w:{type:Object,default:function(){return{}}}},data:function(){return{custom:!1,series:_.cloneDeep(this.options),default:_.cloneDeep(this.options[0])}},watch:{series:{handler:function(e){this.$emit("change-options",{type:"series",options:e})},deep:!0}},methods:{addData:function(e,t){e.data.push({name:"测试示例_".concat(e.data.length),value:200+Math.ceil(1e3*Math.random())}),this.w.legend.data=e.data.map((function(e){return e.name}))},removeData:function(e,t){e.data.pop(),this.w.legend.data=e.data.map((function(e){return e.name}))},codeChange:function(){var e=JSON.parse(this.$refs["editor"].getContent());this.series=e},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=JSON.stringify(e.series,null,"\t");e.$refs["editor"].setContent(t)}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},,function(e,t,a){"use strict";a.r(t);var n,l,i=a(0),s={},r=Object(i["a"])(s,n,l,!1,null,null,null);t["default"]=r.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-param-setting"},[a("el-tabs",{model:{value:e.content.type,callback:function(t){e.$set(e.content,"type",t)},expression:"content.type"}},[a("el-tab-pane",{attrs:{label:"静态数据",name:"static"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:18,maxRows:20},placeholder:"请输入静态内容"},model:{value:e.staticCode,callback:function(t){e.staticCode=t},expression:"staticCode"}})],1),a("el-tab-pane",{attrs:{label:"配置管理",name:"switch"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.setting}},[a("el-form-item",{attrs:{label:"字段"}},[a("el-input",{attrs:{placeholder:"field"},model:{value:e.setting.field,callback:function(t){e.$set(e.setting,"field",t)},expression:"setting.field"}})],1),a("el-form-item",{attrs:{label:"设置值"}},[a("el-table",{attrs:{data:e.setting.value,stripe:"","highlight-current-row":!0,"row-key":"id"}},[a("el-table-column",{attrs:{type:"index",width:"30",align:"center"}}),a("el-table-column",{attrs:{label:"枚举值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"返回值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),a("el-table-column",{attrs:{width:"130px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(a){return a.stopPropagation(),e.remove(t.$index,e.setting.value)}}})]]}}])},[a("template",{slot:"header"},[a("DsfButton",{attrs:{size:"small"},on:{click:e.add}},[e._v("增加行")])],1)],2)],1)],1)],1)],1),a("el-tab-pane",{staticStyle:{width:"100%",height:"100%"},attrs:{label:"代码管理",name:"code",lazy:""}},[a("MonacoEditor",{ref:"editor",attrs:{code:e.codeBlock}})],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(8),o=a.n(r),c=a(1),u=a.n(c),d="function handler(data, button, owner, self){\r\n  //data:表示当前按钮栏所在作用域的数据\r\n  //button:表示当前按钮对象\r\n  //owner:表示当前按钮组所在的组件\r\n  //self:表示按钮栏目组件\r\n  //this:当前按钮栏所在页面组件对象\r\n  $$0$$;\r\n}",f={name:"DesButtonParamsSetting",mixins:[$mixins.propertyDialogSetting],props:{value:{type:Object,default:function(){return{type:"static",code:""}}}},data:function(){return{content:JSON.parse(JSON.stringify(this.value)),staticCode:"",field:"",setting:{field:"",value:[{key:"",value:""}]},codeBlock:""}},computed:{},mounted:function(){this.initData()},methods:{getContent:function(){if("static"===this.content.type)this.content.code=this.staticCode;else if("switch"===this.content.type){var e=JSON.parse(JSON.stringify(this.setting)),t={};e.value.forEach((function(e){t[e.key]=e.value})),e.value=t,this.content.code=e}else this.content.code=this.$refs.editor.getContent();return this.content},validate:function(){if("static"===this.content.type){if(!this.staticCode)return dsf.layer.pc.message("请输入静态内容",!1),!1}else if("switch"===this.content.type){if(!this.setting.field)return dsf.layer.pc.message("字段不能为空",!1),!1;var e=this.setting.value.length,t=this.setting.value.filter((function(e){return e.key})),a=this.setting.value.filter((function(e){return e.value}));if(t.length<e)return dsf.layer.pc.message("key不能为空",!1),!1;if(a.length<e)return dsf.layer.pc.message("value不能为空",!1),!1}else{var n=this.$refs.editor.getContent();if(!n)return dsf.layer.pc.message("代码不能为空",!1),!1;this.content.code=n}return!0},initData:function(){if("static"===this.content.type)this.staticCode=this.content.code,this.codeBlock=this.getCode(this.content.code);else if("switch"===this.content.type){for(var e=JSON.parse(JSON.stringify(this.content.code)),t=[],a=0,n=Object.entries(e.value);a<n.length;a++){var l=o()(n[a],2),i=l[0],s=l[1];t.push({key:i,value:s})}e.value=t,this.setting=e}else this.codeBlock=this.getCode(this.content.code),this.$refs.editor&&this.$refs.editor.setContent&&this.$refs.editor.setContent(this.codeBlock)},getCode:function(e){return"string"===typeof e?this.testCodeBlock(e)?e:d.replace("$$0$$","return "+JSON.stringify(e)):d.replace("$$0$$","return ''")},testCodeBlock:function(e){var t=/^\s*function(\s+\w*)?\(.*\)\s*{/g;return!!e&&(t.lastIndex=0,t.test(e))},init:function(){var e=this;return s()(u.a.mark((function t(){var a,n,l;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.owner.$$getComponent(),n=a.$getChildMetadataList(),n&&!(n.length<1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(l=n[0].metadata.at,l){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return t.next=11,e.getTreeData(n[1].metadata,n[1].metadata.rm_type||3);case 11:e.treeData=t.sent;case 12:case"end":return t.stop()}}),t)})))()},getTreeData:function(e,t){var a=this;return s()(u.a.mark((function n(){var l,i,s;return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=[],"8"!=t){n.next=8;break}return i={rmId:e.rmId},n.next=5,a.$webAPI.getDbSourceFieldsTree(i);case 5:l=n.sent,n.next=13;break;case 8:if("3"!=t){n.next=13;break}return s={namespace:e.at},n.next=12,a.$webAPI.getMetaDataFieldsSelect(s);case 12:l=n.sent;case 13:return n.abrupt("return",l);case 14:case"end":return n.stop()}}),n)})))()},change:function(e){},add:function(){this.setting.value.push({key:"",value:""})},remove:function(e,t){t.splice(e,1)}}},p=f,h=a(0),m=Object(h["a"])(p,n,l,!1,null,null,null);t["default"]=m.exports},,,,function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{overflow:"auto"},style:{width:"500px"}},[a("el-container",[a("el-header",{staticStyle:{padding:"0px 0px 10px 0px","text-align":"right",height:"auto"}},[a("DsfButton",{attrs:{size:"small",icon:"sousuofangda"},on:{click:e.add}},[e._v("增加图标")])],1),a("el-main",{staticStyle:{padding:"0px",height:"100%"}},[a("el-table",{attrs:{border:"","show-header":!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"显示文字",prop:"text"}}),a("el-table-column",{attrs:{label:"图标",prop:"icon"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",size:"small",icon:e.getIcon(t.row.icon)}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(a){return e.removeButton(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(a){return e.up(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(a){return e.down(t.row)}}})]}}])})],1)],1)],1)],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",[a("el-main",[a("el-form",{attrs:{model:e.formModel,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"显示文字"}},[a("el-input",{model:{value:e.formModel.text,callback:function(t){e.$set(e.formModel,"text",t)},expression:"formModel.text"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("DsfInputIcon",{model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1)],1)],1)],1)],1)],1)},l=[],i={name:"DsfIndicatorPanelEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{formModel:{},tableData:[]}},created:function(){this.tableData=dsf.mix(!0,[],this.owner.list)},methods:{yes:function(){return this.tableData},add:function(){this.tableData.push({text:"显示文字",icon:"icon-shezhi"})},removeButton:function(e){dsf.array.remove(this.tableData,e)},getIcon:function(e){var t="icon-";return e.startsWith(t)?e.substr(t.length):e},up:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)}},down:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}},rowClickHandler:function(e){this.formModel=e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("角色选择")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"角色名称",prop:"name","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"角色id",prop:"roleid",width:"280","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"AccessPrivilege",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},created:function(){this.tableData=this.currentData||[]},methods:{add:function(){var e=this;this.$openDialog({title:"角色选择",width:this.config.width,height:this.config.height,top:"10vh",params:{path:"dsfa/oua/role/designselector"},btns:[{text:"确定",handler:function(t){if(t.content){var a=t.content;if(a&&a.yes&&dsf.isFunction(a.yes)){var n=a.yes();if(!n)return!1;_.forEach(n,(function(t){var a=e.tableData.filter((function(e,a){return e["roleid"]==t["_id"]}));a.length>0?a.name=t["_name"]:e.tableData.push({roleid:t["_id"],name:t["_name"]})}))}}}},{text:"取消"}]})},deleted:function(e){dsf.array.remove(this.tableData,e.row)},yes:function(){return this.tableData}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("enum-editor-item",{ref:"meta",attrs:{type:"meta","tree-data":e.treeData1,"table-post":e.tablePost,"tree-loading":e.loading,"empty-text":"请选择元数据","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})},l=[],i=a(75),s={name:"DesAutoCompleteMD",components:{EnumEditorItem:i["default"]},mixins:[$mixins.propertyDialogSetting],data:function(){return{loading:!1,value1:{type:"meta",code:"",attach:[]},treeData1:[],tablePost:function(){}}},created:function(){this.currentData?this.init(this.currentData):this.postData1()},methods:{init:function(e){var t=e.type,a=e.attach,n=e.code,l=e.chooseKey,i=dsf.mix(!0,[],a);this.value1={type:t,attach:i,code:n,chooseKey:l},this.postData1()},validate:function(){return this.$refs.meta.getResult(),!!this.value1["code"]||(dsf.layer.message("请选择元数据以及右侧具体节点名称字段",!1),!1)},yes:function(){var e=this.value1.code;return e.id=e.value,e},postData1:function(){var e=this;this.loading=!0,this.$http.get("rm/list/meta",{namespace:""}).done((function(t){t.success?(e.treeData1=t.data.map((function(t){return e.dataFormat(t)})),e.$nextTick((function(){e.$refs.meta.initMetaTable()}))):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this;return"3"!=e.type_value&&"8"!=e.type_value&&(e.nocheck=!0),"3"==e.type_value||"8"==e.type_value||e.children||(e.iconSkin="_special"),e.children&&(e.children=e.children.map((function(e){return t.dataFormat(e)}))),e}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-background-setting"},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{type:"border-card"},model:{value:e.form.active,callback:function(t){e.$set(e.form,"active",t)},expression:"form.active"}},[a("el-tab-pane",{attrs:{name:"color",label:"背景色"}},[a("dsf-virtual-scroll",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"90px",size:"small"}},[a("el-form-item",{attrs:{label:"应用系统色"}},[a("el-radio-group",{model:{value:e.form.color.isTheme,callback:function(t){e.$set(e.form.color,"isTheme",t)},expression:"form.color.isTheme"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),e.form.color.isTheme?a("el-form-item",{attrs:{label:"系统色"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.color.theme,callback:function(t){e.$set(e.form.color,"theme",t)},expression:"form.color.theme"}},e._l(e.themeConfig,(function(t,n){return a("el-option",{key:n,attrs:{label:t,value:n,placeholder:"请选择"}},[a("span",{staticClass:"ds-background-setting-color-demo",style:{background:"var(--t--"+n+")"}}),e._v(" "+e._s(t)+" "),a("span",{staticClass:"ds-background-setting-color-text"},[e._v(e._s(e.dsf.themeConfig.currentTheme[n]))])])})),1),a("span",{staticClass:"color-demo",style:{background:"var(--t--"+e.form.color.theme+")"}})],1):a("dsf-color-select",{staticStyle:{"margin-top":"-18px"},model:{value:e.form.color.value,callback:function(t){e.$set(e.form.color,"value",t)},expression:"form.color.value"}})],1)],1)],1),a("el-tab-pane",{attrs:{name:"pattern",label:"背景图"}},[a("dsf-virtual-scroll",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"90px",size:"small"}},[a("el-form-item",{attrs:{label:"填充模式"}},[a("el-select",{attrs:{placeholder:"请选择填充模式"},model:{value:e.form.pattern.size,callback:function(t){e.$set(e.form.pattern,"size",t)},expression:"form.pattern.size"}},[a("el-option",{attrs:{label:"填充",value:"cover"}}),a("el-option",{attrs:{label:"适应",value:"contain"}}),a("el-option",{attrs:{label:"拉伸",value:"100% 100%"}}),a("el-option",{attrs:{label:"原大小",value:"auto"}})],1)],1),a("el-form-item",{attrs:{label:"平铺模式"}},[a("el-select",{attrs:{placeholder:"请选择平铺模式"},model:{value:e.form.pattern.repeat,callback:function(t){e.$set(e.form.pattern,"repeat",t)},expression:"form.pattern.repeat"}},[a("el-option",{attrs:{label:"不平铺",value:"no-repeat"}}),a("el-option",{attrs:{label:"水平和垂直上平铺",value:"repeat"}}),a("el-option",{attrs:{label:"水平上平铺",value:"repeat-x"}}),a("el-option",{attrs:{label:"垂直上平铺",value:"repeat-y"}})],1)],1),a("el-form-item",{attrs:{label:"展示位置"}},[a("el-select",{attrs:{placeholder:"请选择平铺模式"},model:{value:e.form.pattern.position,callback:function(t){e.$set(e.form.pattern,"position",t)},expression:"form.pattern.position"}},[a("el-option",{attrs:{label:"左上方",value:"left top"}}),a("el-option",{attrs:{label:"左边",value:"left center"}}),a("el-option",{attrs:{label:"左下方",value:"left bottom"}}),a("el-option",{attrs:{label:"上边",value:"center top"}}),a("el-option",{attrs:{label:"居中",value:"center"}}),a("el-option",{attrs:{label:"下边",value:"center bottom"}}),a("el-option",{attrs:{label:"右上方",value:"right top"}}),a("el-option",{attrs:{label:"右边",value:"right center"}}),a("el-option",{attrs:{label:"右下方",value:"right bottom"}})],1)],1),a("el-form-item",{attrs:{label:"图片链接"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入图片链接"},model:{value:e.form.pattern.image,callback:function(t){e.$set(e.form.pattern,"image",t)},expression:"form.pattern.image"}},[a("el-upload",{staticClass:"upload-demo",attrs:{slot:"append",action:e.uploadAction,"show-file-list":!1,"on-progress":e.uploadProgress,"on-success":e.uploadSuccess,"on-error":e.uploadError,headers:e.dsf.getDefaultHttpHeader(),accept:".jpg,.jpeg,.png,.gif,.webp,.svg"},slot:"append"},[a("el-button",[e._v("上传")])],1)],1)],1),a("el-form-item",{attrs:{label:"图片预览"}},[a("el-image",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e._f("getWebPath")(e.form.pattern.image)}},[a("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[e._v("无效图片")])])],1)],1)],1)],1),a("el-tab-pane",{attrs:{name:"linear",label:"线性渐变"}},[a("dsf-virtual-scroll",[a("dsf-linear-gradual-select",{model:{value:e.form.linear,callback:function(t){e.$set(e.form,"linear",t)},expression:"form.linear"}})],1)],1),a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{name:"radial",label:"径向渐变"}},[a("dsf-virtual-scroll",[a("el-alert",{attrs:{closable:!1,title:"不兼容IE",type:"warning","show-icon":""}}),a("dsf-radial-gradual-select",{model:{value:e.form.radial,callback:function(t){e.$set(e.form,"radial",t)},expression:"form.radial"}})],1)],1)],1)],1)},l=[],i={name:"BackgroundSetting",mixins:[$mixins.propertyDialogSetting],data:function(){return{uploadAction:dsf.url.getWebPath("/file/upload/"),themeConfig:{page_background:"默认背景色",main:"主色",normal:"辅色",warning:"警示色"},form:{active:"color",color:{isTheme:!0,theme:"main",value:""},pattern:{image:"",size:"cover",repeat:"no-repeat",position:"center"},linear:{angle:0,point:[{length:0,color:"rgba(255,255,255,0)"},{length:100,color:"#000"}]},radial:{shape:"circle",size:"farthest-corner",position:[50,50],point:[{length:0,color:"rgba(255,255,255,0)"},{length:100,color:"#000"}]}}}},filters:{getWebPath:function(e){return dsf.url.getWebPath(e)}},created:function(){var e=this.currentData;if(e)if(e.active)this.form=dsf.mix(!0,this.form,e);else{var t=e.color,a=e.image,n=e.size,l=e.repeat,i=e.position;this.form=dsf.mix(!0,this.form,{active:"color",color:{isTheme:!0,theme:"main",value:t},pattern:{image:a,size:n,repeat:l,position:i}})}},beforeDestroy:function(){this.loading&&dsf.layer.closeLoading(this.loading)},methods:{uploadProgress:function(){this.loading=dsf.layer.loading()},uploadSuccess:function(e){var t=e.data;dsf.layer.closeLoading(this.loading),this.loading=void 0,this.$set(this.form.pattern,"image",t[0].relativePath)},uploadError:function(){dsf.layer.closeLoading(this.loading),this.loading=void 0,dsf.layer.message("图片上传失败",!1)},yes:function(){return this.form}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ds-control ds-form-item ds-radio-box ds-has-label"},[a("label",{staticClass:"ds-form-label"},[e._v("范围")]),a("div",{staticClass:"ds-form-block"},[a("el-radio-group",{model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}},[a("el-radio",{attrs:{label:"0"}},[e._v("无限制")]),a("el-radio",{attrs:{label:"1"}},[e._v("我的")]),a("el-radio",{attrs:{label:"2"}},[e._v("本机构的")])],1)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"==e.scope,expression:"scope=='2'"}],staticClass:"ds-control ds-form-item ds-radio-box ds-has-label"},[a("label",{staticClass:"ds-form-label"},[e._v("本机构范围")]),a("div",{staticClass:"ds-form-block"},[a("el-checkbox-group",{model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("上级机构")]),a("el-checkbox",{attrs:{label:"2"}},[e._v("下级机构")])],1)],1)])])},l=[],i={name:"BrowseScopeEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{scope:2,unit:[]}},created:function(){this.scope=this.currentData.scope,this.unit=this.currentData.unit},methods:{yes:function(){return{scope:this.scope,unit:"2"!=this.scope?[]:this.unit}}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","show-header":!0,data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"显示文字",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.text||t.row.title))]}}])}),a("el-table-column",{attrs:{label:"名称",prop:"caption"}}),a("el-table-column",{attrs:{label:"图标",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",size:"small",icon:e.getIcon(t.row.icon)}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(a){return e.removeButton(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(a){return e.up(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(a){return e.down(t.row)}}})]}}])})],1)],1)},l=[],i={name:"DsfBtnsTable",mixins:[$mixins.propertyDialogSetting],props:{tableData:{type:Array,default:function(){return[]}},existData:{type:Array,default:function(){return[]}}},data:function(){return{multipleSelection:[]}},mounted:function(){},methods:{getIcon:function(e){var t="icon-";return e.startsWith(t)?e.substr(t.length):e},handleSelectionChange:function(e){this.multipleSelection=e},yes:function(){return this.multipleSelection}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control-filter-tree"},[a("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":"_id","node-name":"_name",loading:e.treeLoading,"default-checked-key":e.defaultCheckedKey,"search-control":"","default-expand-all":"",getNoCheck:e.getNoCheck},on:{"choose-node":function(t){e.radioData=t}}})],1)},l=[],i={name:"DesBusinessComponent",mixins:[$mixins.propertyDialogSetting],data:function(){return{treeData:[],treeLoading:!1,radioData:null,defaultCheckedKey:""}},created:function(){this.getDesignCtrl()},methods:{getNoCheck:function(e){return"12"!=e.type},getDesignCtrl:function(){var e=this;this.loading=!0;var t="component/loadBcGroupTree";this.$http.get(t).done((function(t){t.success?e.treeData=t.data:dsf.layer.message("业务组件获取"+t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"业务组件名称"}},[a("el-input",{model:{value:e.businessLabel,callback:function(t){e.businessLabel=t},expression:"businessLabel"}})],1),a("el-form-item",{attrs:{label:"当前组件"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.currentCaption,callback:function(t){e.currentCaption=t},expression:"currentCaption"}})],1),a("el-form-item",{attrs:{label:"组件预览图片"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadAction,"show-file-list":!1,"on-progress":e.uploadProgress,"on-success":e.uploadSuccess,"on-error":e.uploadError,accept:".jpg,.jpeg,.png,.gif,.webp,.svg"}},[a("el-button",[e._v("上传")])],1)],1),a("el-form-item",{attrs:{label:"图片预览"}},[a("el-image",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e._f("getWebPath")(e.thumbnailImage)}},[a("div",{staticClass:"el-image__error",attrs:{slot:"error"},slot:"error"},[e._v("无效图片")])])],1)],1)],1)},l=[],i=a(2),s=a.n(i),r={name:"DesBusinessComponentSingle",mixins:[$mixins.propertyDialogSetting],props:{label:{type:String,default:""},ctrl:{type:Object,default:null}},data:function(){return{uploadAction:dsf.url.getWebPath("/file/upload/"),businessLabel:"",currentCaption:"",thumbnail:[]}},computed:{thumbnailImage:function(){var e;return null===(e=this.thumbnail[0])||void 0===e?void 0:e.relativePath}},beforeCreate:function(){},filters:{getWebPath:function(e){return dsf.url.getWebPath(e)}},created:function(){this.businessLabel=this.label,this.currentCaption=this.ctrl.$options.ctrlCaption},beforeMount:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{uploadProgress:function(){this.loading=dsf.layer.loading()},uploadSuccess:function(e){var t=e.data;dsf.layer.closeLoading(this.loading),this.loading=void 0,this.thumbnail=t},uploadError:function(){dsf.layer.closeLoading(this.loading),this.loading=void 0,dsf.layer.message("图片上传失败",!1)},validate:function(){if(!this.businessLabel)return dsf.layer.message("请填写业务组件名称",!1),!1;var e=[],t=[];return dsf.designer.recursionLayoutTree(this.ctrl,null,null,(function(t){t.isFormControl&&e.push(t)})),_.each(e,(function(e){var a=dsf.designer.validateCaption(e);t.push.apply(t,s()(a))})),!t.length||(_.each(t,(function(e,t){window.setTimeout((function(){dsf.layer.message(e,!1)}),50*t)})),!1)},yes:function(){if(this.ctrl){var e={};if(dsf.designer.recursionLayoutTree(this.ctrl,null,null,(function(t,a,n){var l=null===t||void 0===t?void 0:t.$options.design.layout.exclude,i=dsf.mix(!0,{},t.$props);if(i.metadata&&(i.metadata.id="",i.metadata.at="",i.metadata_fullcode="",delete i.metadata.isFromMetaData,delete i.metadata.isuser),_.each(i.slots||[],(function(e){e.controls=[]})),_.each(l,(function(e){delete i[e]})),e[t.$designId]=i,a){var s=e[a.$designId];if(s){s.slots||(s.slots=[]);var r=_.find(s.slots,(function(e){return e.name==n}));r||(r={name:n,controls:[]},s.slots.push(r)),r.controls.push(i)}}})),e[this.ctrl.$designId]){var t,a=null===this||void 0===this||null===(t=this.ctrl)||void 0===t||null===(t=t.$options)||void 0===t||null===(t=t.design)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.create;return{props:e[this.ctrl.$designId],metadata:a?a.call(this.ctrl):null,businessLabel:this.businessLabel,thumbnail:JSON.stringify(this.thumbnail)}}}return null}}},o=r,c=a(0),u=Object(c["a"])(o,n,l,!1,null,null,null);t["default"]=u.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"des-button-edit",staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{overflow:"auto"},style:e.getStyle()},[a("el-container",[a("el-header",{staticStyle:{padding:"0px 0px 10px 0px","text-align":"right",height:"auto"}},[e.isNavTree?a("DsfButton",{attrs:{size:"small",icon:"Magnifier"},on:{click:e.openList}},[e._v("选择已有行按钮")]):e._e(),a("DsfButton",{attrs:{size:"small",icon:"sousuofangda"},on:{click:e.openSysButtonSelect}},[e._v("增加系统按钮")]),a("DsfButton",{attrs:{size:"small",icon:"zidingyi"},on:{click:e.addCustomButton}},[e._v("新增自定义按钮")])],1),a("el-main",{staticStyle:{padding:"0px",height:"100%"}},[a("el-table",{staticClass:"hasSortable",attrs:{border:"","row-key":"id","show-header":!0,data:e.tableData,"highlight-current-row":!0,"default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center",width:"50"}}),"icon"!=e.appointType?a("el-table-column",{attrs:{label:"显示文字",prop:"text",width:"140"}}):e._e(),a("el-table-column",{attrs:{label:"名称",prop:"caption",width:"120"}}),"text"!=e.appointType?a("el-table-column",{attrs:{label:"图标",prop:"text",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",size:"small",icon:e.getIcon(t.row.icon)}})]}}],null,!1,1385936209)}):e._e(),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.tree_level&&1!==t.row.tree_level||e.isAppointButton?e._e():a("el-popover",{staticStyle:{"margin-right":"5px"},attrs:{width:200,trigger:"click",placement:"right"}},[a("DsfButton",{attrs:{slot:"reference","btn-style":"icon-text",icon:"add"},on:{click:function(e){e.stopPropagation()}},slot:"reference"}),[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("请选择子按钮的类型")]),a("div",[a("DsfButton",{attrs:{size:"small"},on:{click:function(a){return a.stopPropagation(),e.addChildButton(t.row,"system")}}},[e._v("系统按钮")]),a("DsfButton",{attrs:{size:"small"},on:{click:function(a){return a.stopPropagation(),e.addChildButton(t.row,"custom")}}},[e._v("自定义按钮")])],1)]],2),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(a){return e.removeButton(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(a){return e.up(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(a){return e.down(t.row)}}})]}}])})],1)],1)],1)],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",{staticStyle:{"flex-direction":"column"}},[1===e.formModel.tree_level?a("el-header",{staticStyle:{height:"40px"}},[a("el-form",{attrs:{model:e.formModel,"label-width":"150px"}})],1):e._e(),a("el-main",[a("el-form",{attrs:{model:e.formModel,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formModel.caption,callback:function(t){e.$set(e.formModel,"caption",t)},expression:"formModel.caption"}})],1),a("el-form-item",{attrs:{label:"别名"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.alias,callback:function(t){e.$set(e.formModel,"alias",t)},expression:"formModel.alias"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.formModel.text_hidden,expression:"!formModel.text_hidden"}],attrs:{label:"显示文字"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.text,callback:function(t){e.$set(e.formModel,"text",t)},expression:"formModel.text"}})],1),a("el-form-item",{attrs:{label:"鼠标悬浮提示"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.title,callback:function(t){e.$set(e.formModel,"title",t)},expression:"formModel.title"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.formModel.icon_hidden,expression:"!formModel.icon_hidden"}],attrs:{label:"图标"}},[a("DsfInputIcon",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1),e.hasChildrenBtn(e.formModel)?e._e():[a("el-form-item",{attrs:{label:"系统按钮"}},[a("span",[e._v(e._s(e.formModel.isSystem?"是":"否"))])]),a("el-form-item",{attrs:{label:"动作"}},[a("el-input",{attrs:{disabled:!e.allowEdit()||e.formModel.isSystem},model:{value:e.formModel.actionName,callback:function(t){e.$set(e.formModel,"actionName",t)},expression:"formModel.actionName"}})],1)],a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.formModel.btnStyle_hidden,expression:"!formModel.btnStyle_hidden"}],attrs:{label:"风格"}},[a("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.btnStyle,callback:function(t){e.$set(e.formModel,"btnStyle",t)},expression:"formModel.btnStyle"}},[a("el-option",{attrs:{value:"",label:"普通按钮"}}),a("el-option",{attrs:{value:"icon-text",label:"图标按钮"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.formModel.type_hidden,expression:"!formModel.type_hidden"}],attrs:{label:"类型"}},[a("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.type,callback:function(t){e.$set(e.formModel,"type",t)},expression:"formModel.type"}},[a("el-option",{attrs:{value:"",label:"主要按钮"}}),a("el-option",{attrs:{value:"plain",label:"次要按钮"}}),a("el-option",{attrs:{value:"warning",label:"警示按钮"}})],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:this.showBackgroundColor,expression:"this.showBackgroundColor"}],attrs:{label:"底色"}},[a("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.background_color,callback:function(t){e.$set(e.formModel,"background_color",t)},expression:"formModel.background_color"}},e._l(e.backgroundColorList,(function(t){return a("el-option",{key:t.value,attrs:{value:t.value,label:t.label}},[a("span",{staticStyle:{width:"10px",height:"10px",display:"inline-block","margin-right":"5px"},style:"background-color: "+t.value+";"}),a("span",[e._v(e._s(t.label))])])})),1)],1),e.hasChildrenBtn(e.formModel)?e._e():["icon-text"!=e.formModel.btnStyle||e.formModel.iconPosition_hidden?e._e():a("el-form-item",{attrs:{label:"图标位置"}},[a("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.iconPosition,callback:function(t){e.$set(e.formModel,"iconPosition",t)},expression:"formModel.iconPosition"}},[a("el-option",{attrs:{value:"left",label:"左"}}),a("el-option",{attrs:{value:"right",label:"右"}})],1)],1),e.formModel.isTemplateDownload?a("el-form-item",{attrs:{label:"上传模板"}},[a("el-upload",{staticClass:"ds-button-update-template",attrs:{multiple:!1,headers:e.headersParam,action:e.setRequestUrl,"http-request":e.httpRequest,"file-list":e.fileList,"on-success":e.handleSuccess,"on-error":e.handleError,"on-change":e.handleChange,"before-remove":e.handlerRemove}},[a("DsfButton",{attrs:{size:"small"}},[e._v("模板上传")])],1)],1):e._e(),e.formModel.isUploadImportTemplate?a("el-form-item",{attrs:{label:"上传模板"}},[a("el-upload",{staticClass:"ds-button-update-template multiple",attrs:{multiple:!0,headers:e.headersParam,action:e.setRequestUrl,"http-request":e.httpRequest,"file-list":e.importTemplatefileList,"on-success":e.handleSuccess,"on-error":e.handleError,"on-change":e.handleChange,"before-remove":e.handlerRemove}},[a("DsfButton",{attrs:{size:"small"}},[e._v("模板上传")])],1)],1):e._e(),e.isFlowBtn(e.formModel)||e.isUploadBtn(e.formModel)?e._e():a("el-form-item",{attrs:{label:"是否是上传按钮"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},on:{change:e.uploadChange},model:{value:e.formModel.isUpload,callback:function(t){e.$set(e.formModel,"isUpload",t)},expression:"formModel.isUpload"}})],1),!e.isFlowBtn(e.formModel)&&e.formModel.isUpload?a("el-form-item",{attrs:{label:"上传支持多选"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.multiple,callback:function(t){e.$set(e.formModel,"multiple",t)},expression:"formModel.multiple"}})],1):e._e(),!e.isFlowBtn(e.formModel)&&e.formModel.isUpload?a("el-form-item",{attrs:{label:"触发上传前动作"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.actionBeforeName,callback:function(t){e.$set(e.formModel,"actionBeforeName",t)},expression:"formModel.actionBeforeName"}})],1):e._e()],a("el-form-item",{attrs:{label:"显示条件"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.if,callback:function(t){e.$set(e.formModel,"if",t)},expression:"formModel.if"}}),a("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：满足该条件时按钮显示。如果该按钮可以在流程信息中配置请不要使用此功能")])],1),e.hasChildrenBtn(e.formModel)?e._e():a("el-form-item",{attrs:{label:"只读状态不显示"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.syncRead,callback:function(t){e.$set(e.formModel,"syncRead",t)},expression:"formModel.syncRead"}}),a("div",[a("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：优先级低于显示条件。如果该按钮可以在流程信息中配置请不要使用此功能")])])],1),a("el-form-item",{attrs:{label:"禁用条件"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.disabledFactor,callback:function(t){e.$set(e.formModel,"disabledFactor",t)},expression:"formModel.disabledFactor"}}),a("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：优先级低于显示条件。如果该按钮可以在流程信息中配置请不要使用此功能")])],1),e.hasChildrenBtn(e.formModel)?e._e():["system_flow_send"===e.formModel.actionName||"system_batch_flow_send"===e.formModel.actionName?a("el-form-item",{attrs:{label:"文件已办结"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.completed,callback:function(t){e.$set(e.formModel,"completed",t)},expression:"formModel.completed"}}),a("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：默认为“文件已办结”")])],1):e._e(),"system_flow_send"===e.formModel.actionName||"system_batch_flow_send"===e.formModel.actionName?a("el-form-item",{attrs:{label:"分环节发送"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.isLinkSend,callback:function(t){e.$set(e.formModel,"isLinkSend",t)},expression:"formModel.isLinkSend"}})],1):e._e(),"system_flow_send"===e.formModel.actionName||"system_batch_flow_send"===e.formModel.actionName?a("el-form-item",{attrs:{label:"按钮折叠"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.isLinkSendFold,callback:function(t){e.$set(e.formModel,"isLinkSendFold",t)},expression:"formModel.isLinkSendFold"}})],1):e._e(),a("el-form-item",{attrs:{label:"弹窗二次确认"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.secondConfirm,callback:function(t){e.$set(e.formModel,"secondConfirm",t)},expression:"formModel.secondConfirm"}})],1),e.formModel.secondConfirm?a("el-form-item",{attrs:{label:"弹窗确认提示语"}},[a("el-input",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.secondConfirmText,callback:function(t){e.$set(e.formModel,"secondConfirmText",t)},expression:"formModel.secondConfirmText"}}),a("span",{staticStyle:{color:"#f56c6c"}},[e._v("注：默认为“确认提交？”")])],1):e._e(),e.formModel.actionName&&(e.formModel.actionName.indexOf("system_flow")>-1||e.formModel.actionName.indexOf("system_batch_flow")>-1)?a("el-form-item",{attrs:{label:"自动签收"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.autoReceive,callback:function(t){e.$set(e.formModel,"autoReceive",t)},expression:"formModel.autoReceive"}}),a("span",{staticStyle:{color:"#f56c6c","margin-left":"10px"}},[e._v("注：列表中点击按钮会自动签收，列表中此属性无效")])],1):e._e(),e.formModel.actionName&&"system_flow_send"===e.formModel.actionName?a("el-form-item",{attrs:{label:"是否特送"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.IsSPSend,callback:function(t){e.$set(e.formModel,"IsSPSend",t)},expression:"formModel.IsSPSend"}})],1):e._e(),e.isDblClickBind?a("el-form-item",{attrs:{label:"绑定列表双击"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},on:{change:e.dblClickChange},model:{value:e.formModel.isDblClick,callback:function(t){e.$set(e.formModel,"isDblClick",t)},expression:"formModel.isDblClick"}})],1):e._e(),e.isContextmenuBind?a("el-form-item",{attrs:{label:"映射到右键菜单"}},[a("el-switch",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.isContextmenu,callback:function(t){e.$set(e.formModel,"isContextmenu",t)},expression:"formModel.isContextmenu"}})],1):e._e(),e.isDblClickBind?a("el-form-item",{attrs:{label:"快捷链接"}},[a("el-select",{attrs:{disabled:!e.allowEdit()},model:{value:e.formModel.linkBind,callback:function(t){e.$set(e.formModel,"linkBind",t)},expression:"formModel.linkBind"}},[a("el-option",{attrs:{label:"无",value:""}}),e._l(e.links,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],2)],1):e._e(),e._l(e.formModel.params,(function(t,n){return[a("el-form-item",{key:n,attrs:{label:t.label?t.label:"参数"+(n+1)}},[t.value&&"static"===t.value.type?a("el-input",e._b({attrs:{placeholder:t.desc+" 默认值:"+(t.default||"无"),disabled:!e.allowEdit()},scopedSlots:e._u([{key:"suffix",fn:function(){return[t.selector?a("i",{staticClass:"iconfont icon-sousuo",staticStyle:{cursor:"pointer","margin-right":"10px"},attrs:{title:"选择"},on:{click:function(a){e.openUrlDialog(t,!e.allowEdit())}}}):e._e(),a("i",{staticClass:"iconfont icon-js",staticStyle:{cursor:"pointer"},attrs:{title:"代码编辑"},on:{click:function(a){e.openEditor(t,!e.allowEdit())}}})]},proxy:!0}],null,!0),model:{value:t.value.code,callback:function(a){e.$set(t.value,"code",a)},expression:"param.value.code"}},"el-input",e.getInputAttr(t),!1)):e._e(),t.value&&"static"!==t.value.type?a("el-input",{attrs:{value:"请查看详情",placeholder:t.desc+" 默认值:"+(t.default||"无"),disabled:"disabled"},scopedSlots:e._u([{key:"suffix",fn:function(){return[a("i",{staticClass:"iconfont icon-guanbi1",staticStyle:{cursor:"pointer","margin-right":"10px"},attrs:{title:"清空"},on:{click:function(a){return e.clear(t)}}}),t.selector?a("i",{staticClass:"iconfont icon-sousuo",staticStyle:{cursor:"pointer","margin-right":"10px"},attrs:{title:"选择"},on:{click:function(a){e.openUrlDialog(t,!e.allowEdit())}}}):e._e(),a("i",{staticClass:"iconfont icon-js",staticStyle:{cursor:"pointer"},attrs:{title:"配置"},on:{click:function(a){e.openEditor(t,!e.allowEdit())}}})]},proxy:!0}],null,!0)}):e._e()],1)]}))],e.hasChildrenBtn(e.formModel)?a("el-form-item",{attrs:{label:"下拉触发模式"}},[a("el-radio-group",{on:{change:e.radioChange},model:{value:e.trigger,callback:function(t){e.trigger=t},expression:"trigger"}},[a("el-radio",{attrs:{label:"hover"}},[e._v("hover 激活")]),a("el-radio",{attrs:{label:"click"}},[e._v("click 激活")])],1)],1):e._e()],2)],1)],1),a("el-dialog",{attrs:{title:"选择系统按钮",visible:e.sysButtonSelect,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.sysButtonSelect=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("dsf-button",{on:{click:e.addSysButton}},[e._v("确定")]),a("dsf-button",{attrs:{type:"plain"},on:{click:e.closeSysButtonSelect}},[e._v("取消")])]},proxy:!0}])},[[a("div",{staticStyle:{height:"500px",overflow:"auto"}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"default-checked-keys":[],"expand-on-click-node":!1,"node-key":"key","check-on-click-node":"","default-expand-all":"","show-checkbox":""}})],1)]],2)],1)],1)},l=[],i=a(8),s=a.n(i),r=a(9),o=a.n(r),c=a(2),u=a.n(c),d=a(3),f=a.n(d);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={name:"DesButtonEdit",mixins:[$mixins.propertyDialogSetting],props:{defaultShowText:{type:Boolean,default:!0},defaultButtonStyle:{type:String,default:""},isDblClickBind:{type:Boolean,default:!1},isContextmenuBind:{type:Boolean,default:!1},isNavTree:{type:Boolean,default:!1},isAppointButton:{type:Boolean,default:!1},appointType:{type:String,default:""},showBackgroundColor:{default:!1}},watch:{formModel:function(e){if(this.importTemplatefileList=[],this.fileList=[],this.fileListMap&&this.fileListMap.has(e.id))if(e.isUploadImportTemplate)this.importTemplatefileList=this.fileListMap.get(e.id);else{var t=this.fileListMap.get(e.id);this.fileList=t.slice(-1)}}},data:function(){return{tableData:[],formModel:{},sysButtonSelect:!1,treeData:[],defaultProps:{label:"text",children:"children"},headersParam:{"X-XSRF-TOKEN":dsf.getCookie("XSRF-TOKEN")||""},fileList:[],importTemplatefileList:[],fileListMap:null,links:[],oldParams:null,fatherNodes:null,trigger:"hover",backgroundColorList:[{label:"蓝色",value:"#3D83E5"},{label:"黄色",value:"#EEA151"},{label:"红色",value:"#E75E58"}]}},created:function(){var e=this,t=dsf.mix(!0,[],this.currentData);_.each(t,(function(e){dsf.isUnDef(e.id)&&(e.id=dsf.uuid()),dsf.isUnDef(e.iconPosition)&&(e.iconPosition="left")})),this.tableData=t,this.tableData.some((function(e){return"click"===e.trigger}))&&(this.trigger="click"),this.designer.mobile?this.treeData=this.convertTree(dsf.buttons.getMobileButtons()):this.treeData=this.convertTree(dsf.buttons.getPcButtons()),this.isDblClickBind&&dsf.designer.recursionLayoutTree(this.owner,null,null,(function(t){t!=e&&t.isFormControl&&t.metadata_fullcode&&t.designId&&e.links.push({label:t.label?t.label+"("+t.metadata_fullcode+")":t.metadata_fullcode,value:t.designId})}))},computed:{setRequestUrl:function(){return dsf.url.getWebPath("file/upload?db=1")}},mounted:function(){var e=this;$(".hasSortable tbody").sortable({items:"tr",axis:"y",cursor:"move",helper:"clone",update:function(t,a){var n=Math.ceil(a.originalPosition.top/40),l=Math.ceil(a.position.top/40),i=e.tableData.splice(n,1);e.tableData.splice(l,0,i[0])},start:function(e,t){t.helper.addClass("ui-sortable-handle-move"),_.forEach(e.currentTarget.closest(".hasSortable").__vue__.columns,(function(e,a){e.width||0===e.width?t.helper.find("td")[a].style.width=e.width+"px":t.helper.find("td")[a].style.flex=1}))}}),$(".hasSortable tbody tr").disableSelection(),$(".hasSortable tbody").attr("title","拖动可调整按钮排序")},methods:{getInputAttr:function(e){return e.attrs?h({},e.attrs):{}},getStyle:function(){return{width:this.isNavTree?"600px":"icon"===this.appointType?"400px":"text"===this.appointType?"450px":"500px"}},isFlowBtn:function(e){return["system_flow_send","system_batch_flow_send","system_template_download"].includes(e.actionName)},isUploadBtn:function(e){return["system_datagrid_import","system_datagrid_row_upload","system_datagrid_preimport","system_datagrid_common_import"].includes(e.actionName)},hasChildrenBtn:function(e){return e.children&&e.children.length>0},convertTree:function(e){var t=[],a={};return _.each(e,(function(e){a[e.moduleName]||(a[e.moduleName]={text:e.moduleName,type:"group",key:e.moduleName,children:[]},t.push(a[e.moduleName]));var n=a[e.moduleName],l=e.moduleName+"-"+e.groupName;a[l]||(a[l]={text:e.groupName,type:"group",key:l,children:[]},n.children.push(a[l])),e.button.key=l+"-"+e.button.text,a[l].children.push(e.button)})),t},openSysButtonSelect:function(){this.$refs.tree&&this.$refs.tree.setCheckedKeys([]),this.sysButtonSelect=!0},allowEdit:function(){return!dsf.isEmptyObject(this.formModel)},addSysButton:function(){var e=this,t=this.$refs.tree.getCheckedNodes(!0),a=_.map(t,(function(t){var a=e.createButton(h(h({},t),{},{id:dsf.uuid(),children:[],tree_level:null===e.fatherNodes?1:2}),!0);return null!=e.fatherNodes?delete a.children:a.trigger=e.trigger,e.defaultShowText||(a.text=""),e.defaultButtonStyle&&(a.btnStyle=e.defaultButtonStyle),a.icon||(a.icon="icon-shezhi"),!a.title&&a.text&&(a.title=a.text),a}));if(this.fatherNodes){var n,l=this.fatherNodes.targetButon;l.params=[];var i=this.fatherNodes.index;(n=l.children).push.apply(n,u()(a)),l.isSystem=!1,this.$set(this.tableData,i,l),this.fatherNodes=null}else{var s;this.isAppointButton&&(a=this.appointTypeButtonHandler(a)),(s=this.tableData).push.apply(s,u()(a))}this.sysButtonSelect=!1},addCustomButton:function(){var e,t=this.createButton({caption:"自定义按钮",text:this.defaultShowText?"新增按钮":"",btnStyle:this.defaultButtonStyle?this.defaultButtonStyle:"",icon:"icon-shezhi",id:dsf.uuid(),children:[],tree_level:1,trigger:this.trigger});if(this.isAppointButton&&(t=(null===(e=this.appointTypeButtonHandler(t))||void 0===e?void 0:e[0])||{},dsf.isEmptyObject(t)))return!1;this.tableData.push(t)},appointTypeButtonHandler:function(e){var t=this;if(["icon","text"].includes(this.appointType)){dsf.isObject(e)&&(e=[e]);var a={icon:["text","btnStyle","type","iconPosition"],text:["icon","btnStyle","type"]},n={icon:["","icon-text","plain","left"],text:["","","plain"]};a=a[this.appointType],n=n[this.appointType],_.forEach(e,(function(l,i){_.forEach(a,(function(t,a){e[i]["".concat(t,"_hidden")]=!0,e[i][t]=n[a]})),t.isAppointButton&&(e[i]["".concat(t.appointType,"Button")]=!0)}))}return e},closeSysButtonSelect:function(){this.sysButtonSelect=!1},yes:function(){return _.each(this.tableData,(function(e){dsf.isUnDef(e.id)&&(e.id=dsf.uuid()),""!=e.btnStyle&&(e.iconPosition="left")})),this.tableData},rowClickHandler:function(e){if(e.params=this.formatParams(e.params),this.formModel=e,e.linkBind){var t=_.filter(this.links,(function(t){return t.value==e.linkBind}));t.length||(e.linkBind="")}},formatParams:function(e){var t=this;return e&&e.forEach((function(e){"object"!==o()(e.value)||e.value.type||(e.value={type:"static",code:e.value}),"string"===typeof e.value&&(t.testCodeBlock(e.value)?e.value={type:"code",code:e.value}:e.value={type:"static",code:e.value})})),e},createButton:function(e,t){var a={caption:"",text:"",alias:"",icon:"",btnStyle:"",title:"",isSystem:t,actionName:"",if:"",type:"",isUpload:!1,syncRead:!1,isLinkSend:!1,isLinkSendFold:!1,disabled:!1,isDblClick:!1,isContextmenu:!1,linkBind:"",iconPosition:"left",params:[]};t&&(e.actionName.indexOf("system_flow")>-1&&"system_flow_changeHandler"!==e.actionName||e.actionName.indexOf("system_batch_flow")>-1)&&(a.autoReceive=!0);var n=dsf.mix(!0,{},a,e);return n},openIcon:function(){window.open(dsf.url.getWebPath("$/iconfont/".concat(dsf.config.runType,"/demo_index.html")),"icondemo")},getIcon:function(e){var t="icon-";return e.startsWith(t)?e.substr(t.length):e},removeButton:function(e){2===(null===e||void 0===e?void 0:e.tree_level)?this.childButtonHandler("remove",e):dsf.array.remove(this.tableData,e)},up:function(e){if(2===(null===e||void 0===e?void 0:e.tree_level))this.childButtonHandler("up",e);else{var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)}}},down:function(e){if(2===(null===e||void 0===e?void 0:e.tree_level))this.childButtonHandler("down",e);else{var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}}},childButtonHandler:function(e,t){var a=this.tableData.find((function(e){return e.children&&e.children.some((function(e){return e.id===t.id}))})),n=_.findIndex(this.tableData,(function(e){return e==a})),l=null;switch("remove"!=e&&(l=_.findIndex(a.children,(function(e){return e==t}))),e){case"remove":a.children=a.children.filter((function(e){return e.id!=t.id}));break;case"up":if(l>0){var i=JSON.parse(JSON.stringify(a.children[l-1]));a.children[l]=i,a.children[l-1]=t}break;case"down":if(l<a.children.length-1){var s=JSON.parse(JSON.stringify(a.children[l+1]));a.children[l]=s,a.children[l+1]=t}break}this.$set(this.tableData,n,a)},addChildButton:function(e,t){var a=null,n=_.findIndex(this.tableData,(function(t){return t==e}));if(n>-1)if(a=this.tableData[n],"system"===t)a.children||(a.children=[]),this.fatherNodes={targetButon:a,index:n},this.openSysButtonSelect();else{a.children||(a.children=[]);var l=this.createButton({caption:"自定义按钮",text:"自定义按钮",btnStyle:this.defaultButtonStyle?this.defaultButtonStyle:"",icon:"icon-shezhi",id:dsf.uuid(),tree_level:2});a.children.push(l),this.$set(this.tableData,n,a)}},radioChange:function(e){var t=this;_.each(this.tableData,(function(a,n){Array.isArray(a.children)&&a.children.length>0&&(a.trigger=e,t.$set(t.tableData,n,a))}))},dblClickChange:function(e){var t=this;!0===e&&_.each(this.tableData,(function(e){t.formModel!=e&&(e.isDblClick=!1)}))},uploadChange:function(e){!0===e?(this.oldParams=this.formModel.params,this.formModel.params=[{value:{type:"static",code:""},desc:"导入接口地址",default:"/file/upload"},{value:{type:"static",code:""},desc:"导入参数",default:""},{value:{type:"static",code:""},desc:"可上传的文件类型",default:"xlsx|xls"},{value:{type:"static",code:""},desc:"单个文件大小。0表示无限制，单位KB",default:"0"}]):this.formModel.params=this.oldParams},clear:function(e){dsf.layer.pc.confirm("是否要清理掉当前配置内容？").then((function(){e.value={type:"static",code:""}})).catch((function(){}))},openEditor:function(e,t){t||dsf.layer.pc.openDialog({title:"按钮参数配置",width:"50%",height:"500px",overflow:"hidden",content:"DesButtonParamsSetting",params:{value:e.value},btns:[{text:"确定",handler:function(t){return!!t.validate()&&(e.value=t.getContent(),!0)}},{text:"取消"}]})},testCodeBlock:function(e){var t=/^\s*function(\s+\w*)?\(.*\)\s*{/g;return!!e&&(t.lastIndex=0,t.test(e))},httpRequest:function(e){var t=new FormData,a=this.formModel.isUploadImportTemplate?"":this.formModel.params[0].value.code;t.append("file",e.file),t.append("id",a);var n={headers:{"Content-Type":"multipart/form-data"}};this.$http.post("/file/uploadAsBlob",t,n).done((function(t){t.success?e.onSuccess(t):dsf.layer.message(t.message,!1)})).error((function(t){e.onError(t)}))},handleChange:function(e,t){if(this.fileListMap||(this.fileListMap=new Map),this.fileListMap.set(this.formModel.id,t),this.formModel.isUploadImportTemplate)this.importTemplatefileList=this.fileListMap.get(this.formModel.id);else{var a=this.fileListMap.get(this.formModel.id);this.fileList=a.slice(-1)}},handlerRemove:function(e,t){if(this.fileListMap.set(this.formModel.id,t),this.formModel.isTemplateDownload)this.fileList=this.fileListMap.get(this.formModel.id);else{this.importTemplatefileList=this.fileListMap.get(this.formModel.id);var a=s()(this.formModel.uploadSuccessHandlerParamIndex,2),n=a[0],l=a[1],i=_.filter(t,(function(t){var a,n;return(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.id)!=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.id)}));this.formModel.params[n].value.code=_.map(i,(function(e){var t;return null===e||void 0===e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.id})).join(","),this.formModel.params[l].value.code=_.map(i,(function(e){var t;return null===e||void 0===e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.originalFileName})).join(",")}},handleSuccess:function(e){if(this.loading=!1,e.success&&2e4==e.state){var t=e.data;if(dsf.isArray(this.formModel.uploadSuccessHandlerParamIndex)){var a=s()(this.formModel.uploadSuccessHandlerParamIndex,2),n=a[0],l=a[1],i=this.formModel.params[n].value.code,r=this.formModel.params[l].value.code;i=i?"".concat(i,",").concat(t.id):t.id,r=r?"".concat(r,",").concat(t.originalFileName):t.originalFileName,this.formModel.params[n].value.code=i,this.formModel.params[l].value.code=r}else this.formModel.params[0].value.code=t.id,this.formModel.params[1].value.code=t.originalFileName}},handleError:function(){this.loading=!1,dsf.layer.message("上传失败",!1)},openUrlDialog:function(e,t){if(!t){var a=this;dsf.layer.pc.openDialog({title:"设置链接",width:"1300px",height:"500px",content:"DsfUrlDialog",showClose:!1,params:{value:e.value.code,type:this.isMobile?"mobile":"pc"},btns:[{text:"确定",handler:function(t){var n=t.yes();if(!1===n)return!1;a.$set(e.value,"code",n)}},{text:"取消"}]})}},openList:function(){var e=this;dsf.layer.pc.openDialog({title:"设置链接",width:"1100px",height:"500px",content:"DsfBtnsTable",params:{tableData:this.owner.rowButtons,existData:this.tableData},btns:[{text:"确定",handler:function(t){var a=t.yes();e.tableData=e.tableData.concat(dsf.mix(!0,[],a))}},{text:"取消"}]})}}},b=m,v=a(0),g=Object(v["a"])(b,n,l,!1,null,null,null);t["default"]=g.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MonacoEditor",{ref:"editor",attrs:{language:e.language},on:{mounted:e.editorLoaded}})},l=[],i={name:"DesCodeEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{code:"",language:"",language_format:""}},created:function(){this.language_format=this.config.language,this.language=this.language_format||"javascript","jsonString"==this.language_format&&(this.language="json")},mounted:function(){},methods:{yes:function(){var e=this.$refs.editor.getContent(),t=this.language_format;return"html"==t?dsf.escapeFilter(e):"json"==t?JSON.parse(e):this.$refs.editor.getContent()},editorLoaded:function(){var e=this.currentData,t=this.language_format;"html"==t?e=dsf.unescapeHTML(e):"json"==t&&(e=JSON.stringify(e)),this.$refs.editor.setContent(e)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-collapse-edit"},[a("el-header",[a("DsfButton",{on:{click:e.add}},[e._v("新增")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"面板标题","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"是否禁用","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.disabled,callback:function(a){e.$set(t.row,"disabled",a)},expression:"scope.row.disabled"}})]}}])}),a("el-table-column",{attrs:{label:"初始化是否展开","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.activated,callback:function(a){e.$set(t.row,"activated",e._n(a))},expression:"scope.row.activated"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"CollapseEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.name){this.names[a]="";var l=this.names.indexOf(t.name);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.name}return n},newTab:function(){return{title:"面板"+(this.tableData.length+1),name:dsf.uuid(),disabled:"false",activated:"false",controls:[],error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #eee"},attrs:{width:"40%"}},[a("div",{staticClass:"design-column-edit"},[e.isReload?e._e():a("el-tree",{ref:"tree",attrs:{data:e.treeData,"highlight-current":!0,"expand-on-click-node":!1,"render-after-expand":!0,"default-expand-all":!0,"node-key":"id",props:e.defaultProps,draggable:"","allow-drag":e.handleAllowDrag,"allow-drop":e.handleAllowDrop},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",class:{"custom-tree-node__root":!n.isLeaf}},[a("span",[e._v(" "+e._s(n.label)+" "),a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(l.hide?"[隐藏]":""))]),n.parent.data.isRoot?a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(l.fixed?"[锁定]":""))]):e._e()]),a("span",[a("dsf-button",{attrs:{title:"添加子项",size:"small","btn-style":"icon-text",icon:"hao"},on:{click:function(t){return t.stopPropagation(),e.append(l)}}}),l.isRoot?[a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"}}),a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"}}),a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"}})]:[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(t){return t.stopPropagation(),e.remove(n)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(t){return t.stopPropagation(),e.up(n)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(t){return t.stopPropagation(),e.down(n)}}})]],2)])}}],null,!1,4228613019)})],1)]),a("el-main",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"列名称"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),a("el-form-item",{attrs:{label:"列标识(二次开发用)"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-form-item",{attrs:{label:"表头对齐方式"}},[a("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.headerAlign,callback:function(t){e.$set(e.form,"headerAlign",t)},expression:"form.headerAlign"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居右",value:"right"}}),a("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),a("el-form-item",{attrs:{label:"数据对齐方式"}},[a("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.align,callback:function(t){e.$set(e.form,"align",t)},expression:"form.align"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居右",value:"right"}}),a("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),a("el-form-item",{attrs:{label:"前缀(可以使用html)"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.prefix,callback:function(t){e.$set(e.form,"prefix",t)},expression:"form.prefix"}})],1),a("el-form-item",{attrs:{label:"后缀(可以使用html)"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.suffix,callback:function(t){e.$set(e.form,"suffix",t)},expression:"form.suffix"}})],1),e.isSubTable?a("el-form-item",{attrs:{label:"必填标识"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1):e._e(),a("el-form-item",{attrs:{label:"宽度"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}})],1),a("el-form-item",{attrs:{label:"最小宽度"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.minWidth,callback:function(t){e.$set(e.form,"minWidth",t)},expression:"form.minWidth"}})],1),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.hide,callback:function(t){e.$set(e.form,"hide",t)},expression:"form.hide"}})],1),"DsfDataGrid"==e.owner.ctrlName?a("el-form-item",{attrs:{label:"文本溢出时省略"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.ellipsis,callback:function(t){e.$set(e.form,"ellipsis",t)},expression:"form.ellipsis"}})],1):e._e(),"DsfDataGrid"==e.owner.ctrlName?a("el-form-item",{attrs:{label:"默认不过滤"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.addFilterColumns,callback:function(t){e.$set(e.form,"addFilterColumns",t)},expression:"form.addFilterColumns"}}),a("span",{staticStyle:{color:"#f56c6c","line-height":"normal","margin-left":"10px"}},[e._v("* 关闭后列会再初始化加载时隐藏")])],1):e._e(),e.formNode&&e.formNode.parent.data.isRoot?a("el-form-item",{attrs:{label:"是否冻结列"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.fixed,callback:function(t){e.$set(e.form,"fixed",t)},expression:"form.fixed"}}),a("span",{staticStyle:{color:"#f56c6c","line-height":"normal","margin-left":"10px"}},[e._v("* 被冻结的列将会固定在页面最左侧")])],1):e._e(),a("el-form-item",{attrs:{label:"列头附带筛选"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.isFilter,callback:function(t){e.$set(e.form,"isFilter",t)},expression:"form.isFilter"}})],1),e.form.isFilter?[a("el-form-item",{attrs:{label:"筛选字段"}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.filterInfo.field,callback:function(t){e.$set(e.form.filterInfo,"field",t)},expression:"form.filterInfo.field"}},[a("el-option",{attrs:{label:"",value:""}}),e._l(e.tableMetaData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.fieldCaption,value:e.filed}})}))],2)],1),a("el-form-item",{attrs:{label:"筛选模式"}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.filterInfo.type,callback:function(t){e.$set(e.form.filterInfo,"type",t)},expression:"form.filterInfo.type"}},[a("el-option",{attrs:{label:"",value:""}}),a("el-option",{attrs:{label:"枚举",value:"enum"}}),a("el-option",{attrs:{label:"文本",value:"string"}}),a("el-option",{attrs:{label:"数字",value:"number"}}),a("el-option",{attrs:{label:"日期(年月日)",value:"ymd"}}),a("el-option",{attrs:{label:"日期(年月)",value:"ym"}})],1)],1),"enum"==e.form.filterInfo.type?[a("el-form-item",{attrs:{label:"枚举数据源"}},[a("dsf-button",{on:{click:function(t){return e.showEmunEditor(e.form.filterInfo)}}},[e._v(" "+e._s(e.form.filterInfo.dataSource?"已设置":"请设置")+" ")])],1),a("el-form-item",{attrs:{label:"枚举是否多选"}},[a("el-switch",{model:{value:e.form.filterInfo.multiple,callback:function(t){e.$set(e.form.filterInfo,"multiple",t)},expression:"form.filterInfo.multiple"}})],1)]:e._e()]:e._e()],2)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(2),o=a.n(r),c=a(1),u=a.n(c),d={name:"DesColumnsEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{isReload:!1,tableData:[],columns:[],data:[],treeData:[{id:dsf.uuid(),label:"表头",isRoot:!0,level:-1,children:[]}],defaultProps:{children:"children",label:"label"},form:null,formNode:null,formDisabled:{label:"",code:"",align:"center",headerAlign:"center",hide:!1,width:"",readOnly:!0,filterInfo:{}},tableMetaData:null}},props:{isSubTable:{type:Boolean,default:!1}},watch:{"form.hide":{handler:function(e){var t=this.form;if(t&&!t.readOnly){if(this.formNode&&t.level>0){var a=this.formNode.parent.data.hide;if(a&&a!=e)return dsf.layer.pc.message("父列为隐藏状态时子列不可设置显示状态",!1),void(t.hide=a)}this.deep(t,(function(t){t.hide=e}))}}},"form.isFilter":{handler:function(e,t){e&&this.loadTableMetaData()},immediate:!0}},created:function(){this.form=this.formDisabled},mounted:function(){if(this.owner){var e,t=this.owner.$$getComponent(),a=dsf.mix(!0,{},t.columns);(e=this.treeData[0].children).push.apply(e,o()(this.getTreeData(a,0,null)))}},methods:{handleAllowDrop:function(e,t){return 1!==t.level},handleAllowDrag:function(e){return 1!==e.level},getTreeData:function(e,t,a){var n=this,l=[];return _.each(e,(function(e,a){var i=dsf.mix({},p(),{id:e.id,level:t,code:e.code,label:e.label,columnId:e.columnId,headerAlign:e.headerAlign,align:e.align,hide:e.hide,width:e.width,minWidth:e.minWidth,prefix:e.prefix||"",suffix:e.suffix||"",required:e.required||!1,addFilterColumns:void 0===e.addFilterColumns||e.addFilterColumns,fixed:e.fixed||!1,isFilter:e.isFilter||!1,ellipsis:e.ellipsis||!1,filterInfo:e.filterInfo||{},index:a});i.filterInfo&&void 0===i.filterInfo.multiple&&(i.filterInfo.multiple=!0),l.push(i);var s=/\d+_\d+/g;i.id&&!s.test(i.id)||(i.id=dsf.uuid());var r=n.getTreeData(e.children,t+1,i);i.children=r})),l},deep:function(e,t,a,n){var l=this;t&&t(e,a,n),e.children&&_.each(e.children,(function(e,n){l.deep(e,t,a+1,n)}))},append:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.treeData[0],t=e.children.length+1,a=dsf.mix({},p(),{id:dsf.uuid(),label:"新建列",level:e.level+1,hide:e.hide,index:t});e.children.push(a)},remove:function(e){var t=e.parent;dsf.array.remove(t.data.children,e.data)},up:function(e){f.call(this,e,"up")},down:function(e){f.call(this,e,"down")},nodeClick:function(e,t){e.isRoot?(this.form=this.formDisabled,this.formNode=null):(this.form=e,this.formNode=t,this.formNode.filterInfoCopy=dsf.mix(!0,{},this.formNode.filterInfo))},validate:function(){},getColumnsMap:function(){var e=[];return this.deep(this.treeData[0],(function(t){e.push(t)})),e},getMetaTreeData:function(e,t){var a=this;return s()(u.a.mark((function n(){var l,i,s;return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=[],"8"!=t){n.next=8;break}return i={rmId:e.rmId},n.next=5,a.$webAPI.getDbSourceFieldsTree(i);case 5:l=n.sent,n.next=13;break;case 8:if("3"!=t){n.next=13;break}return s={namespace:e.at},n.next=12,a.$webAPI.getMetaDataFieldsTree(s);case 12:l=n.sent;case 13:return n.abrupt("return",l);case 14:case"end":return n.stop()}}),n)})))()},getMetaDataListFormTree:function(e){if(e.children){var t=e.children,a=[];return _.each(t,(function(e){1==e.valueAttributes.length?a.push({fieldCaption:e.fieldCaption,filed:e.id}):e.valueAttributes.length>1&&_.each(e.valueAttributes,(function(e){a.push({fieldCaption:e.fieldCaption,filed:e.id})}))})),a}},loadTableMetaData:function(){var e=this;return s()(u.a.mark((function t(){var a,n,l,i,s;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.tableMetaData){t.next=15;break}if(a=e.owner.$$getComponent(),n=a.$getChildMetadataList(),n&&!(n.length<1)){t.next=6;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 6:if(l=n[0].metadata.at,l){t.next=10;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 10:return t.next=12,a.$getMetadataTree(n);case 12:i=t.sent,s=e.getMetaDataListFormTree(i[0]),e.tableMetaData=s;case 15:case"end":return t.stop()}}),t)})))()},showEmunEditor:function(e){var t=this;this.$openDialog({content:"DesEnumEditor",width:"900px",params:{currentData:e.dataSource||{code:null,type:"dict"}},btns:[{text:"确定",handler:function(a){if(a.yes){var n=a.yes();t.$set(e,"dataSource",n)}}},{text:"取消"}]})},yes:function(){var e=this.getColumnsMap();this.deep(this.treeData[0]||[],(function(t,a,n){if(t.children&&0!=t.children.length)t.children&&t.children.length>0&&(t.columnId="");else if(!t.columnId){var l=_.map(e,"columnId"),i=1,s="table-column-"+dsf.math.numToEnglishLetter(i);while(l.indexOf(s)>=0)l=_.map(e,"columnId"),s="table-column-"+dsf.math.numToEnglishLetter(++i);t.columnId=s}t.isFilter||(t.filterInfo={}),t.filterInfo&&(dsf.isEqualObject(t.filterInfo,t.filterInfoCopy||{})||(t.filterInfo.isUser=!0),"enum"!=t.filterInfo.type&&delete t.filterInfo.dataSource),t.level=a,t.index=n,t.id||(t.id=dsf.uuid())}),0,0);var t=this.treeData[0].children;return _.forEach(t,(function(e){e.children.length&&dsf.deepForEach(e.children,(function(t){t.fixed=e.fixed}),{isLast:!0})})),t}}};function f(e,t){var a=e.parent,n=a.childNodes.indexOf(e),l="up"==t?n>0:n<=a.childNodes.length-1;if(l){var i="up"==t?n-1:n+1,s=a.childNodes[i];this.$set(a.data.children,i,e.data),this.$set(a.data.children,n,s.data),this.$set(a.childNodes,i,e),this.$set(a.childNodes,n,s)}}function p(){var e={id:"",level:0,label:"",headerAlign:"center",align:"center",columnId:"",children:[],hide:!1,resizable:!1,prefix:"",suffix:"",required:!1,addFilterColumns:!0,fixed:!1,isFilter:!1,ellipsis:!1,filterInfo:{multiple:!0}};return dsf.mix({},e)}var h=d,m=a(0),b=Object(m["a"])(h,n,l,!1,null,null,null);t["default"]=b.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-componentinfo"},[a("div",{staticClass:"header"},[a("form",{attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.search.apply(null,arguments)}}},[a("el-input",{staticStyle:{width:"45%"},model:{value:e.searchTxt2,callback:function(t){e.searchTxt2=t},expression:"searchTxt2"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1)]),a("div",{staticClass:"content"},[e.list.length>0?[a("div",{staticClass:"list-box"},[a("div",{staticClass:"list"},e._l(e.list,(function(t){return a("div",{key:t.id,staticClass:"item",class:{"is-active":e.active==t.id},on:{click:function(a){return e.clickHandler(t)}}},[a("div",{staticClass:"tag",style:{"background-color":"0"==t.type?"#e0f2f1":"#ffebee"}},[e._v(e._s("0"==t.type?"基":"业"))]),a("div",{staticClass:"row el-row"},[a("div",{staticClass:"cell el-col-24 ellipsis"},[a("span",{staticClass:"ds-title"},[e._v(e._s(t.name)+"("+e._s(t.groupName)+")")])]),a("div",{staticClass:"cell el-col-24 ellipsis",attrs:{title:t.code}},[e._v(" "+e._s(t.code)+" ")])])])})),0)]),a("div",{staticClass:"remark"},[a("div",{domProps:{innerHTML:e._s(e.getContent)}})])]:[a("dsf-empty-data")]],2)])},l=[],i={name:"DesComponentInfoList",props:{designer:{type:Object,default:function(){return null}}},data:function(){return{searchTxt:"",searchTxt2:"",list:[],active:""}},computed:{getContent:function(){var e=this,t=_.find(this.list,(function(t){return t.id==e.active}));return t?t.remark:""}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;this.$http.get("component/list",{key:this.searchTxt,terminal:this.designer.mobile?"mobile":"pc"}).then((function(t){var a=t.data;e.list=a.data,e.list.length>0&&(e.active=e.list[0].id)}))},clickHandler:function(e){this.active=e.id},search:function(){this.searchTxt=this.searchTxt2,this.loadData()},yes:function(){var e=this,t=_.find(this.list,(function(t){return t.id==e.active}));return t||null}},beforeDestroy:function(){},destroyed:function(){}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"table",attrs:{data:e.data}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{property:"caption",label:"组件标识"}}),a("el-table-column",{attrs:{property:"type",label:"组件类型"}}),a("el-table-column",{attrs:{property:"label",label:"组件名称"}})],1)},l=[],i=a(2),s=a.n(i),r={name:"DesComponents",mixins:[$mixins.propertyDialogSetting],props:{designer:{type:Object,default:function(){return null}}},data:function(){return{show:!1,data:[]}},mounted:function(){var e=[],t=this.designer.$refs.viewProxy;dsf.designer.recursionLayoutTree(t,null,null,(function(t){if(t.isFormControl&&e.push({id:t.designId,caption:t.caption,label:t.label,type:t.$options.ctrlCaption,ctrl:t}),t.isOneToMany)return!1})),this.data=e,this.show=!0},methods:{validate:function(){var e=[],t=this.$refs.table.selection;if(_.each(t,(function(t){if(t.label){var a=dsf.designer.validateCaption(t.ctrl);e.push.apply(e,s()(a))}else e.push("请为"+t.caption+"起名后再试")})),e.length)return dsf.layer.pc.message(e[0],!1),!1},yes:function(){var e=this.$refs.table.selection,t=_.map(e,(function(e){return e.ctrl})),a=[];return _.each(t,(function(e){var t=e.$options.design.layout.exclude,n=e.$options.design.metadata.create.call(e),l=dsf.mix(!0,{},e.$props),i={props:l,metadata:n};_.each(t,(function(e){delete l[e]})),a.push(i)})),a}}},o=r,c=a(0),u=Object(c["a"])(o,n,l,!1,null,null,null);t["default"]=u.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control-filter-tree"},[a("dsf-tree-select",{attrs:{"tree-data":e.nodeList,loading:e.loading,theme:"theme1","node-key":"dsfa_rm_id","node-name":"name","search-control":"","default-expand-all":"",multiple:""},on:{"choose-node":function(t){e.checkNodeList=t}}})],1)},l=[],i={name:"DesControlSelect",mixins:[$mixins.propertyDialogSetting],data:function(){return{loading:!1,checkNodeList:[],nodeList:[]}},created:function(){this.getDesignCtrl()},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},getDesignCtrl:function(){var e=this;this.loading=!0;var t="/rm/list/control";this.$http.get(t).done((function(t){t.success?e.nodeList=t.data:dsf.layer.message("控件组获取"+t.message,!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){e.loading=!1}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"ds-meta-data-select",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("el-tab-pane",{attrs:{name:"0",label:"普通组件"}},[e.loaded[0]?a("meta-data-select-item",{ref:"select0",attrs:{nameKey:"_name",idKey:"_id","select-model":e.selectModel,url:"component/loadBaseGroupTree?code="+this.code}}):e._e()],1),a("el-tab-pane",{attrs:{name:"1",label:"业务组件"}},[e.loaded[1]?a("meta-data-select-item",{ref:"select1",attrs:{nameKey:"_name",idKey:"_id","select-model":e.selectModel,url:"component/loadBcGroupTree?code="+this.code}}):e._e()],1)],1)},l=[],i=a(41),s={name:"DesCustomComponent",components:{MetaDataSelectItem:i["default"]},props:["code","selectModel"],mixins:[$mixins.propertyDialogSetting],data:function(){return{tabIndex:"0",loaded:[!0,!1]}},watch:{tabIndex:function(e){this.$set(this.loaded,parseInt(e),!0)}},methods:{yes:function(){return this.$refs["select"+this.tabIndex].yes()}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-custom-list-set-list"},[a("el-form",{attrs:{model:e.formInline,"label-width":"145px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"列表高亮字段："}},[a("el-input",{attrs:{placeholder:"字段值为true时高亮(支持表达式)"},model:{value:e.formInline.lightCode,callback:function(t){e.$set(e.formInline,"lightCode",t)},expression:"formInline.lightCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"跳转链接字段："}},[a("dsf-input-url",{attrs:{type:e.isMobile?"mobile":"pc",placeholder:"字段有值时跳转(支持表达式)"},model:{value:e.formInline.linkCode,callback:function(t){e.$set(e.formInline,"linkCode",t)},expression:"formInline.linkCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"跳转链接打开类型："}},[a("el-input",{attrs:{placeholder:"true:新窗口 false:弹框 (支持表达式)"},model:{value:e.formInline.linkType,callback:function(t){e.$set(e.formInline,"linkType",t)},expression:"formInline.linkType"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"查看更多数据链接："}},[a("dsf-input-url",{attrs:{type:e.isMobile?"mobile":"pc",placeholder:"设置后显示更多(支持表达式)"},model:{value:e.formInline.moreUrl,callback:function(t){e.$set(e.formInline,"moreUrl",t)},expression:"formInline.moreUrl"}})],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[a("DsfButton",{attrs:{size:"small",icon:"hao"},on:{click:function(t){return e.handleEvent("add")}}},[e._v("新增")]),a("DsfButton",{attrs:{size:"small",icon:"iconfont icon-delete",type:"plain"},on:{click:function(t){return e.handleEvent("delete")}}},[e._v("清空")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.formInline.list,border:"","header-cell-style":{backgroundColor:"#f2f2f2"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50px",align:"center"}}),a("el-table-column",{attrs:{prop:"des",label:"字段描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.des,callback:function(a){e.$set(t.row,"des",a)},expression:"scope.row.des"}})]}}])}),a("el-table-column",{attrs:{prop:"code",label:"对应字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.code,callback:function(a){e.$set(t.row,"code",a)},expression:"scope.row.code"}})]}}])}),a("el-table-column",{attrs:{prop:"title",label:"显示标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{prop:"text",label:"数据格式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.text,callback:function(a){e.$set(t.row,"text",a)},expression:"scope.row.text"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居中",value:"center"}}),a("el-option",{attrs:{label:"居右",value:"right"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"width",label:"宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}})]}}])}),a("el-table-column",{attrs:{prop:"ellipsis",label:"一行显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.ellipsis,callback:function(a){e.$set(t.row,"ellipsis",a)},expression:"scope.row.ellipsis"}},[a("el-option",{attrs:{label:"否",value:"0"}}),a("el-option",{attrs:{label:"是",value:"1"}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index>0?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEvent("sort",t,"up")}}},[e._v("上移")]):e._e(),t.$index<e.formInline.list.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEvent("sort",t,"down")}}},[e._v("下移")]):e._e(),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEvent("delete",t)}}},[e._v("删除")])]}}])})],1)],1)},l=[],i={name:"DesCustomListSetList",mixins:[$mixins.propertyDialogSetting],data:function(){return{formInline:{linkType:null,linkCode:null,moreUrl:"",lightCode:null,list:[{des:"类型",width:"25%",text:"left",ellipsis:"1",code:null,title:""},{des:"标题、描述",width:"25%",text:"left",ellipsis:"1",code:null,title:""},{des:"来源人/物、目的人/物",width:"25%",text:"left",ellipsis:"1",code:null,title:""},{des:"时间",width:"25%",text:"right",ellipsis:"1",code:null,title:""}]}}},created:function(){this.owner.formInline.list&&(this.formInline=dsf.mix(!0,{},this.owner.formInline))},methods:{handleEvent:function(e,t,a){var n=this,l={add:function(){var e=dsf.mix(!0,{},{des:"",width:"100%",text:"left",ellipsis:"1",code:null,title:""});n.formInline.list.push(e)},sort:function(){var e=t.$index;if("up"==a){var l=n.formInline.list[e-1];n.formInline.list.splice(e-1,1),n.formInline.list.splice(e,0,l)}else{var i=n.formInline.list[e+1];n.formInline.list.splice(e+1,1),n.formInline.list.splice(e,0,i)}},delete:function(){t?n.formInline.list.splice(t.$index,1):n.formInline.list=[]}};l[e]&&l[e]()},validate:function(){for(var e=0,t=this.formInline.list.length;e<t;e++){var a=this.formInline.list[e];if(dsf.isUnDef(a.code)||!a.title)return dsf.layer.message("新增表格字段不能为空",!1),!1}return!0},yes:function(){return this.formInline}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"35%"}},[a("div",{staticStyle:{overflow:"auto",height:"100%"}},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),a("span",{on:{dblclick:function(t){return e.toList(n,l)}}},[e._v(e._s(n.label))]),l.field?a("span",{staticStyle:{color:"red"},on:{dblclick:function(t){return e.toList(n,l)}}},[e._v("(字段:"+e._s(l.field)+")")]):e._e()])}}])})],1)]),a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",[a("el-main",[a("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"field",label:"字段名称"}}),a("el-table-column",{attrs:{prop:"fieldCaption",label:"字段描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.fieldCaption,callback:function(a){e.$set(t.row,"fieldCaption",a)},expression:"scope.row.fieldCaption"}})]}}])}),a("el-table-column",{attrs:{label:"默认排序类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.sortType,callback:function(a){e.$set(t.row,"sortType",a)},expression:"scope.row.sortType"}},[a("el-option",{attrs:{value:"",label:"不参与"}}),a("el-option",{attrs:{value:"asc",label:"升序"}}),a("el-option",{attrs:{value:"desc",label:"降序"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"column",label:"对应列表的列"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.column,callback:function(a){e.$set(t.row,"column",a)},expression:"scope.row.column"}},[a("el-option",{attrs:{value:"",label:""}}),e._l(e.listColumns,(function(e){return a("el-option",{key:e.columnId,attrs:{value:e.columnId,label:e.label}})}))],2)]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(a){return a.stopPropagation(),e.remove(t.row)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(a){return a.stopPropagation(),e.up(t.row)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(a){return a.stopPropagation(),e.down(t.row)}}})]}}])})],1)],1)],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"DesCustomerOrderByEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"},listColumns:[]}},mounted:function(){var e=this;return s()(o.a.mark((function t(){var a,n,l,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.owner.$$getComponent(),l=n.$getChildMetadataList(),l&&!(l.length<1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(i=l[0].metadata.at,i){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return e.listColumns=(null===n||void 0===n||null===(a=n.getLastColumns)||void 0===a?void 0:a.call(n))||[],t.next=12,n.$getMetadataTree(l);case 12:e.treeData=t.sent,e.tableData=e.currentData||[];case 14:case"end":return t.stop()}}),t)})))()},methods:{toList:function(e,t){if(t.field){var a=_.findIndex(this.tableData,(function(e){return e.field==t.field}));a<0&&this.tableData.push({field:t.field,fieldCaption:t.fieldCaption,column:"",sortType:"asc",isUser:!0})}},getTreeData:function(e,t){var a=this;return s()(o.a.mark((function n(){var l,i,s;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=[],"8"!=t){n.next=8;break}return i={rmId:e.rmId},n.next=5,a.$webAPI.getDbSourceFieldsTree(i);case 5:l=n.sent,n.next=13;break;case 8:if("3"!=t){n.next=13;break}return s={namespace:e.at},n.next=12,a.$webAPI.getMetaDataFieldsTree(s);case 12:l=n.sent;case 13:return n.abrupt("return",l);case 14:case"end":return n.stop()}}),n)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)}},down:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t<this.tableData.length-1){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}},yes:function(){var e=this,t=[];return _.each(this.tableData||[],(function(a){var n=a.column,l=_.find(e.owner.customerOrder,(function(e){return e.column==n}));null!==l&&void 0!==l&&l.isUser||dsf.isEqualObject(a,l)||(a.isUser=!0),t.push(a)})),t}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{width:"500px",overflow:"auto"}},[a("el-container",[a("el-header",{staticStyle:{padding:"0 0 10px 0","text-align":"right",height:"auto"}},[a("DsfButton",{attrs:{size:"small",icon:"sousuofangda"},on:{click:e.openDialog}},[e._v("添加自定义布局")])],1),a("el-main",{staticStyle:{padding:"0",height:"100%"}},[a("el-table",{ref:"table",attrs:{"show-header":!0,data:e.tableData,"max-height":"350",size:"small","highlight-current-row":"",border:""},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),a("el-table-column",{attrs:{label:"布局类型",prop:"typeName",width:"120px"}}),a("el-table-column",{attrs:{label:"图标",prop:"icon",width:"70px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("DsfButton",{attrs:{"btn-style":"icon-text",size:"small",icon:e.getIcon(n.icon)}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,l=t.$index;return[a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(t){return e.removeData(n,l)}}}),l>0?a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(t){return e.up(n,l)}}}):e._e(),l<e.tableData.length-1?a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(t){return e.down(n,l)}}}):e._e()]}}])})],1)],1)],1)],1),a("el-main",{staticStyle:{padding:"0"}},[a("el-container",[e.formModel?a("el-form",{staticStyle:{width:"90%"},attrs:{model:e.formModel,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formModel.id,callback:function(t){e.$set(e.formModel,"id",t)},expression:"formModel.id"}})],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1),a("el-form-item",{attrs:{label:"布局类型"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formModel.typeName,callback:function(t){e.$set(e.formModel,"typeName",t)},expression:"formModel.typeName"}})],1),a("el-form-item",{attrs:{label:"背景色"}},[a("el-input",{model:{value:e.formModel.backgroundColor,callback:function(t){e.$set(e.formModel,"backgroundColor",t)},expression:"formModel.backgroundColor"}})],1)],1):e._e()],1)],1),a("el-dialog",{attrs:{title:"选择布局",visible:e.dialogShow,width:"400px","append-to-body":""},on:{"update:visible":function(t){e.dialogShow=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("dsf-button",{on:{click:e.addData}},[e._v("确定")]),a("dsf-button",{attrs:{type:"plain"},on:{click:function(t){e.dialogShow=e.fasle}}},[e._v("取消")])]},proxy:!0}])},[a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},e._l(e.layerConfig,(function(t){return a("el-radio",{key:t.type,attrs:{label:t.type,disabled:e.hasTable&&"table"===t.type}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)},l=[],i={name:"DesDataGridLayoutSetting",mixins:[$mixins.propertyDialogSetting],data:function(){return{layerConfig:s,dialogShow:!1,formModel:null,radio:"cardList",tableData:[{id:"default",name:"表格",icon:"icon-liebiao",type:"table",typeName:"表格",backgroundColor:""}]}},computed:{hasTable:function(){return!!_.find(this.tableData,(function(e){return"table"===e.type}))}},created:function(){this.currentData&&(this.tableData=_.cloneDeep(this.currentData))},mounted:function(){this.$refs.table.setCurrentRow(this.tableData[0]),this.formModel=this.tableData[0]},methods:{yes:function(){return this.tableData},getIcon:function(e){var t="icon-";return e.startsWith(t)?e.substr(t.length):e},rowClickHandler:function(e){this.formModel=e},openDialog:function(){this.dialogShow=!0},addData:function(){var e=this,t=this.layerConfig[this.radio],a={id:"default",name:t.name+this.tableData.length,icon:t.icon,type:t.type,typeName:t.name,backgroundColor:""};"table"!==t.type&&(a.id=dsf.uuid(16)),this.tableData.push(a),this.dialogShow=!1,this.$nextTick((function(){e.$refs.table.setCurrentRow(a),e.formModel=a,e.radio="cardList"}))},removeData:function(e,t){this.tableData.splice(t,1)},up:function(e,t){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)},down:function(e,t){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}}},s={table:{type:"table",name:"表格",icon:"icon-table"},cardList:{type:"cardList",name:"卡片列表",icon:"icon-category"}},r=i,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("div",{staticStyle:{"text-align":"right",height:"auto",margin:"0px -20px"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增")])],1)]),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"code",label:"元数据代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.code,callback:function(a){e.$set(t.row,"code",a)},expression:"scope.row.code"}})]}}])}),e.type?e._e():a("el-table-column",{attrs:{prop:"type",label:"类型",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},[a("el-option",{attrs:{value:0,label:"检索框"}}),a("el-option",{attrs:{value:1,label:"附加条件"}})],1)]}}],null,!1,1675615170)}),a("el-table-column",{attrs:{prop:"operation",label:"操作符",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.operation,callback:function(a){e.$set(t.row,"operation",a)},expression:"scope.row.operation"}},[a("el-option",{attrs:{value:"like",label:"匹配"}}),a("el-option",{attrs:{value:"slike",label:"开头匹配"}}),a("el-option",{attrs:{value:"elike",label:"结尾匹配"}}),a("el-option",{attrs:{value:"eq",label:"等于"}}),a("el-option",{attrs:{value:"noteq",label:"不等于"}}),a("el-option",{attrs:{value:"lt",label:"小于"}}),a("el-option",{attrs:{value:"gt",label:"大于"}}),a("el-option",{attrs:{value:"lteq",label:"小于等于"}}),a("el-option",{attrs:{value:"gteq",label:"大于等于"}}),a("el-option",{attrs:{value:"in",label:"包含"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"dataType",label:"数据类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.dataType,callback:function(a){e.$set(t.row,"dataType",a)},expression:"scope.row.dataType"}},[a("el-option",{attrs:{value:"string",label:"字符串"}}),a("el-option",{attrs:{value:"number",label:"数字"}}),a("el-option",{attrs:{value:"datetime",label:"日期"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"format",label:"格式化"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.format,callback:function(a){e.$set(t.row,"format",a)},expression:"scope.row.format"}},["datetime"==t.row.dataType?a("el-option",{attrs:{value:"ymdhms",label:"年月日时分秒"}}):e._e(),"datetime"==t.row.dataType?a("el-option",{attrs:{value:"ymd",label:"年月日"}}):e._e(),"datetime"==t.row.dataType?a("el-option",{attrs:{value:"ym",label:"年月"}}):e._e(),"datetime"==t.row.dataType?a("el-option",{attrs:{value:"y",label:"年"}}):e._e()],1)]}}])}),2!==e.type?a("el-table-column",{attrs:{prop:"valueExpress",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:0===t.row.type},model:{value:t.row.valueExpress,callback:function(a){e.$set(t.row,"valueExpress",a)},expression:"scope.row.valueExpress"}})]}}],null,!1,2965086071)}):e._e(),a("el-table-column",{attrs:{label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},l=[],i={name:"DesDataGridSearch",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],type:0}},created:function(){var e=this,t=this.currentData||[];this.tableData=t,_.each(this.tableData||[],(function(t,a){e.$set(t,"dataType",t.dataType||"string"),e.$set(t,"format",t.format||"")})),this.config.other&&(this.type=1*(this.config.other.type||"0"))},mounted:function(){},methods:{add:function(){this.tableData.push({code:"",type:this.type,operation:"like",valueExpress:"",dataType:"string",format:""})},remove:function(e){dsf.array.remove(this.tableData,e)},yes:function(){return this.tableData}},watch:{tableData:{handler:function(e){_.each(e||[],(function(e){"datetime"!=e.dataType&&(e.format="")}))},deep:!0,immediate:!0}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{width:"500px",overflow:"auto"}},[a("el-container",[a("el-header",{staticStyle:{padding:"0px 0px 10px 0px","text-align":"right",height:"auto"}},[a("DsfButton",{attrs:{size:"small",icon:"hao"},on:{click:e.addTab}},[e._v(" 新增标签 ")])],1),a("el-main",{staticStyle:{padding:"0px",height:"100%"}},[a("el-table",{attrs:{border:"","show-header":!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"KEY",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),a("el-table-column",{attrs:{label:"名称",prop:"caption"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.title)+" ")]}}])}),a("el-table-column",{attrs:{width:"60px",label:"图标",prop:"caption"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row&&t.row.iconName?a("DsfIcon",{attrs:{name:t.row.iconName}}):e._e()]}}])}),a("el-table-column",{attrs:{width:"100px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(a){return e.removeTab(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(a){return e.up(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(a){return e.down(t.row)}}})]}}])})],1)],1)],1)],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",[a("el-main",[a("el-form",{attrs:{model:e.formModel,disabled:!Object.keys(e.formModel).length,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"KEY"}},[a("el-input",{model:{value:e.formModel.key,callback:function(t){e.$set(e.formModel,"key",t)},expression:"formModel.key"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("el-input",{model:{value:e.formModel.iconName,callback:function(t){e.$set(e.formModel,"iconName",t)},expression:"formModel.iconName"}})],1),a("el-form-item",{attrs:{label:"图标文本"}},[a("el-input",{model:{value:e.formModel.iconText,callback:function(t){e.$set(e.formModel,"iconText",t)},expression:"formModel.iconText"}})],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.formModel.title,callback:function(t){e.$set(e.formModel,"title",t)},expression:"formModel.title"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:e.formModel.desc,callback:function(t){e.$set(e.formModel,"desc",t)},expression:"formModel.desc"}})],1),a("el-form-item",{attrs:{label:"数据"}},[a("el-input",{model:{value:e.formModel.number,callback:function(t){e.$set(e.formModel,"number",t)},expression:"formModel.number"}})],1),a("el-form-item",{attrs:{label:"数据单位"}},[a("el-input",{model:{value:e.formModel.unit,callback:function(t){e.$set(e.formModel,"unit",t)},expression:"formModel.unit"}})],1),a("el-form-item",{attrs:{label:"跳转SRC"}},[a("el-button",{on:{click:function(t){return e.toUrlSet(e.formModel)}}},[e._v("设置")])],1),a("el-form-item",{attrs:{label:"背景颜色"}},[a("DsfInputColor",{model:{value:e.formModel.backgroundColor,callback:function(t){e.$set(e.formModel,"backgroundColor",t)},expression:"formModel.backgroundColor"}})],1),a("el-form-item",{attrs:{label:"图标颜色"}},[a("DsfInputColor",{model:{value:e.formModel.iconColor,callback:function(t){e.$set(e.formModel,"iconColor",t)},expression:"formModel.iconColor"}})],1),a("el-form-item",{attrs:{label:"图标背景色"}},[a("el-input",{model:{value:e.formModel.iconBackgroundColor,callback:function(t){e.$set(e.formModel,"iconBackgroundColor",t)},expression:"formModel.iconBackgroundColor"}})],1)],1)],1)],1)],1)],1)},l=[],i={name:"dataPanelGroupEdit",mixins:[$mixins.propertyDialogSetting],props:{},data:function(){return{tableData:[{}],formModel:{}}},created:function(){var e=dsf.mix(!0,[],this.currentData);_.each(e,(function(e){dsf.isUnDef(e.id)&&(e.id=dsf.uuid())})),this.tableData=e},computed:{setRequestUrl:function(){return dsf.url.getWebPath("file/upload?db=1")}},mounted:function(){},methods:{rowClickHandler:function(e){this.formModel=e},addTab:function(){var e=this.tableData,t=e.length+1;this.tableData.push({key:"key".concat(t),iconName:"gouxuan",title:"title".concat(t),desc:"@[desc]",number:"@[number]",toConfig:{}})},removeTab:function(e){dsf.array.remove(this.tableData,e)},up:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)}},down:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}},validate:function(){var e=this.tableData,t=e.some((function(t){var a=0;if(e.map((function(e){e.key==t.key&&a++})),a>1)return dsf.layer.message("请解决重复".concat(t.key,"标识"),!1),!0}));return!t},yes:function(){return this.tableData},toUrlSet:function(e){var t=this;e.toConfig||this.$set(e,"toConfig",{}),this.$openDialog({title:"跳转配置",content:"ToUrlEdit",height:"60vh",width:"700px",params:{currentData:e.toConfig},btns:[{text:"确定",handler:function(a){t.$set(e,"toConfig",a.yes())}},{text:"取消"}]})}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-default-value"},[e.multiple?a("div",{staticStyle:{"text-align":"right","margin-bottom":"15px"}},[a("DsfButton",{attrs:{text:"增加默认值",size:"mini"},on:{click:e.addData}})],1):e._e(),a("div",{staticStyle:{overflow:"auto"}},[e._l(e.tableData,(function(t,n){return[a("el-table",{key:n,staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:t,border:!0}},[a("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),a("el-table-column",{attrs:{prop:"value",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}],null,!0)},[e.multiple?a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("值")]),a("DsfButton",{staticStyle:{float:"right"},attrs:{text:"删除",size:"mini"},on:{click:function(t){return e.removeData(n)}}})],1):e._e()])],1)]}))],2)])},l=[],i={name:"DesDefaultValue",mixins:[$mixins.propertyDialogSetting],data:function(){return{multiple:!1,tableData:[]}},created:function(){this.multiple=this.config.multiple||!1,this.valueAttributes=dsf.mix(!0,[],this.owner.metadata.valueAttributes),this.init()},methods:{yes:function(){var e=this.tableData.map((function(e){var t={};if(e.forEach((function(e){e.value&&(t[e.code]=e.value)})),!dsf.isEmptyObject(t))return t}));return e=e.filter((function(e){return e})),e=e.length<=0?null:e,e&&e.length>0&&1==e.length?e[0]:e},init:function(){var e,t=this,a=this.owner.metadata.defaultValue,n=this.currentData;e="array"==dsf.type(n)?dsf.mix(!0,[],n):"object"==dsf.type(n)?[dsf.mix(!0,{},n)]:"array"==dsf.type(a)?dsf.mix(!0,[],a):[dsf.mix(!0,{},a)],e.forEach((function(e){return t.addData(e)}))},addData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tableData.push(this.valueAttributes.map((function(t){return{code:t.code,text:t.name,value:void 0==e[t.code]?null:e[t.code]}})))},removeData:function(e){this.tableData.length<2?(this.tableData=[],this.addData()):this.tableData.splice(e,1)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},on:{"tab-click":e.tabsCliekHandler},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"attrs"}},[a("div",{staticStyle:{width:"100px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("属性/事件")]),a("MonacoEditor",{ref:"attrsEditor",attrs:{language:"json"},on:{mounted:function(t){return e.editorLoaded("attrs")}}})],1),a("el-tab-pane",{attrs:{name:"slots"}},[a("div",{staticStyle:{width:"100px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("插槽")]),a("MonacoEditor",{ref:"slotsEditor",attrs:{language:"html"},on:{mounted:function(t){return e.editorLoaded("slots")}}})],1)],1)},l=[],i={name:"DesDevelopment",mixins:[$mixins.propertyDialogSetting],data:function(){return{activeName:"attrs",data:{}}},created:function(){this.data=dsf.mix(!0,{},this.currentData)},mounted:function(){},methods:{yes:function(){var e={attrs:{},slots:{}};for(var t in e){var a=this.$refs[t+"Editor"];a&&(e[t]="attrs"==t?JSON.parse(a.getContent()||"{}"):a.getContent()||"")}return e},tabsCliekHandler:function(e){var t=this;this.$nextTick((function(){var a=e.name,n=a+"Editor";t.$refs[n]&&t.$refs[n].layout()}))},editorLoaded:function(e){var t=this,a=e+"Editor";this.$nextTick((function(){if(t.$refs[a]){var n="attrs"==e?JSON.stringify(t.data[e]):t.data[e]||"";t.$refs[a].setContent(n||"")}}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-layout-drag-level"},e._l(e.levels,(function(t){return a("div",{key:t,class:{active:t===e.activeLevel},on:{click:function(a){e.activeLevel=t}}},[e._v(" "+e._s(t)+" ")])})),0)},l=[],i={name:"DesDragGridChooseLevel",mixins:[$mixins.propertyDialogSetting],data:function(){return{levels:this.owner.layout.length,activeLevel:this.owner.currentLevel}},methods:{yes:function(){return this.activeLevel}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n,l,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dsf-layout-drag-box"},[a("div",{staticClass:"dsf-grid-layout"},[a("div",{staticClass:"dsf-grid-layout-header"},[a("span",[e._v("快捷布局:")]),a("div",{staticClass:"dsf-grid-layout-header-quick"},[a("div",{staticClass:"layout-item layout-item-0",on:{click:function(t){return e.addQuickLayout("layout1")}}},e._l(2,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-0",on:{click:function(t){return e.addQuickLayout("layout2")}}},e._l(3,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-1",on:{click:function(t){return e.addQuickLayout("layout3")}}},e._l(2,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-2",on:{click:function(t){return e.addQuickLayout("layout4")}}},e._l(3,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-3",on:{click:function(t){return e.addQuickLayout("layout5")}}},e._l(9,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-4",on:{click:function(t){return e.addQuickLayout("layout6")}}},e._l(3,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-5",on:{click:function(t){return e.addQuickLayout("layout7")}}},e._l(8,(function(e){return a("span",{key:e})})),0)])]),a("div",{staticClass:"dsf-grid-layout-body"},[e.currentLayout?a("div",{staticClass:"dsf-grid-layout-views"},[a("el-scrollbar",{staticClass:"dsf-grid-scroll"},e._l(e.layouts,(function(t){return a("div",{key:t[0],staticClass:"dsf-grid-layout-view",on:{mousedown:function(a){e.activeLayout=t[0]}}},[a("div",{staticClass:"view-header",class:{"view-header-active":e.activeLayout==t[0]}},[e._v(" "+e._s(t[0])+" ")]),e.dragGridLoaded?a("dsf-drag-grid",{directives:[{name:"context-menu",rawName:"v-context-menu",value:e.contentMenu,expression:"contentMenu"}],ref:"draggrid"+t[0],refInFor:!0,attrs:{colNum:e.currentLayout.colNum,colNumUnit:e.currentLayout.colNumUnit,rowHeight:e.currentLayout.rowHeight,rowHeightUnit:e.currentLayout.rowHeightUnit,verticalCompact:e.currentLayout.verticalCompact,layout:t[1],freeDrag:e.currentLayout.freeDrag,freeResize:e.currentLayout.freeResize,activeItem:t[0]===e.activeLayout?e.activeItemIndex:-1},on:{delItem:e.delItem,itemChange:e.itemChange}}):e._e()],1)})),0)],1):e._e(),a("div",{staticClass:"dsf-grid-layout-tool"},[a("DsfVirtualScroll",[a("div",{staticClass:"dsf-grid-layout-tool-header"},[e._v(" 属性设置:("+e._s(e.activeLayout)+") ")]),a("div",{staticClass:"dsf-grid-layout-tool-body"},e._l(e.propsOption,(function(t,n){return a("setting-item",{key:n,attrs:{type:t.type,value:e.getRealValue(t.value),list:e.getRealValue(t.list),data:t},on:{handleEventDistribute:e.handleEventDistribute,input:e.setRealValue},scopedSlots:e._u([t.append&&e.currentLayout?{key:"append",fn:function(){return[a("el-select",{staticClass:"append",attrs:{value:e.getRealValue(t.append.value),size:"small"},on:{input:function(a){return e.setRealValue(a,t.append.value)}}},[a("el-option",{attrs:{label:"%",value:"%"}},[e._v("%")]),a("el-option",{attrs:{label:"px",value:"px"}},[e._v("px")])],1)]},proxy:!0}:null],null,!0)})})),1),a("div",[a("div",{staticClass:"dsf-grid-layout-tool-header dsf-grid-layout-tool-header-next"},[e._v(" 单元格设置: ")]),a("div",{staticClass:"dsf-grid-layout-tool-body"},e._l(e.itemOption,(function(t,n){return a("setting-item",{key:n,attrs:{type:t.type,value:e.getRealValue(t.value),list:e.getRealValue(t.list),data:t,disabled:-1===e.activeItemIndex},on:{handleEventDistribute:e.handleEventDistribute,input:e.setRealValue}})})),1)])])],1)])])])},s=[],r=a(2),o=a.n(r),c=a(8),u=a.n(c),d=a(402),f=a.n(d),p=a(4),h=a.n(p),m=a(3),b=a.n(m),v=a(1),g=a.n(v),y=a(91),x=a(98),w=a(92),k=!(null===(n=navigator)||void 0===n||null===(n=n.clipboard)||void 0===n||!n.writeText),C=!(null===(l=navigator)||void 0===l||null===(l=l.clipboard)||void 0===l||!l.readText),D={name:"DesDragGridSetting",mixins:[$mixins.propertyDialogSetting],components:{DsfDragGrid:x["default"],SettingItem:w["default"]},props:{slotStartNum:{type:Number,default:0}},computed:{layouts:function(){var e=this,t=Object.keys(this.currentLayout.layout).sort((function(e,t){return t.replace(/^[^\d]*/,"")-e.replace(/^[^\d]*/,"")})),a=_.map(t,(function(t){return[t,e.currentLayout.layout[t]]}));return a},zIndex:function(){return-1===this.activeItemIndex?1:(null===(e=this.currentLayout.layout[this.activeLayout][this.activeItemIndex])||void 0===e?void 0:e.zIndex)||1;var e},penetrate:function(){return-1!==this.activeItemIndex&&((null===(e=this.currentLayout.layout[this.activeLayout][this.activeItemIndex])||void 0===e?void 0:e.penetrate)||!1);var e},w:function(){return-1===this.activeItemIndex?0:(null===(e=this.currentLayout.layout[this.activeLayout][this.activeItemIndex])||void 0===e?void 0:e.w)||0;var e},h:function(){return-1===this.activeItemIndex?0:(null===(e=this.currentLayout.layout[this.activeLayout][this.activeItemIndex])||void 0===e?void 0:e.h)||0;var e},overflow:function(){return-1===this.activeItemIndex?"hidden":(null===(e=this.currentLayout.layout[this.activeLayout][this.activeItemIndex])||void 0===e?void 0:e.overflow)||"hidden";var e}},watch:{activeIndex:function(e,t){this.currentLayout&&this.layoutList.splice(t-1,1,this.currentLayout),this.currentLayout=this.layoutList[e-1]},activeLayout:function(){this.activeItemIndex=-1}},created:function(){var e=this;document.addEventListener("paste",this.handlePasteLayout);var t=_.cloneDeep(this.owner.layout);this.layoutList=_.map(t,(function(e){return e.rowHeightUnit||(e.rowHeightUnit="%"),e.colNumUnit||(e.colNumUnit="%"),e})),this.currentLayout=this.layoutList[this.activeIndex-1],dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/drag-grid/vue-grid-layout.umd.min.js")]).then((function(){e.dragGridLoaded=!0})).catch((function(e){dsf.error(e),dsf.layer.message("加载vue-grid-layout文件报错",!1)}))},data:function(){return{styleBackground:{height:"0px",background:"#f3f3f3"},activeIndex:1,activeLayout:">=1200",currentLayout:null,layoutList:[],dragGridLoaded:!1,activeItemIndex:-1,propsOption:[{type:"el-input-number",title:"网格列数",value:"${currentLayout.colNum}",append:{value:"${currentLayout.colNumUnit}"},props:{max:100,min:1},description:"单位为【%】时,该值决定着把页面划分成多少列,上限为100列;此值和'单元格高度'决定组成网格基本单位大小"},{type:"el-input-number",title:"单元格高度",value:"${currentLayout.rowHeight}",append:{value:"${currentLayout.rowHeightUnit}"},props:{max:100,min:1}},{type:"dsf-button",title:"添加单元格",name:"添加单元格",eventName:"addItem"},{type:"span",title:"层级总数",value:"${self.layoutList.length}"},{type:"el-select",title:"当前层级",value:"${self.activeIndex}",list:"${self.layoutList.length}"},{type:"dsf-button",title:"新增层级",name:"新增层级",eventName:"addLevel",description:"新增层级的布局默认与当前层级的相同。"},{type:"dsf-button",title:"删除当前层级",name:"删除当前层级",eventName:"deleteLevel"},{type:"el-input-number",title:"当前层优先级",value:"${currentLayout.zIndex}",description:"该值决定当前层级展示的优先级,值越大优先级越高。"},{type:"el-radio-group",title:"紧凑模式",value:"${currentLayout.verticalCompact}",description:"开启后在垂直方向，下方单元格会自动吸附到上方单元格下面"},{type:"el-radio-group",title:"自由拖动",value:"${currentLayout.freeDrag}",description:"开启自动拖动后, 拖动单元格可以与其他单元格重叠"},{type:"el-radio-group",title:"自由拉伸",value:"${currentLayout.freeResize}",description:"开启自动拉伸后, 可以在任意方向控制单元格长宽。"}],itemOption:[{type:"el-input-number",title:"宽度",value:"${self.w}",eventName:"itemPropChange"},{type:"el-input-number",title:"高度",value:"${self.h}",eventName:"itemPropChange"},{type:"el-input-number",title:"单元格层级",value:"${self.zIndex}",eventName:"itemPropChange",props:{max:100,min:1},description:"在自动拖动下，单元格位置可能会重叠。该值越大决定单元格在更上层"},{type:"el-radio-group",title:"层级事件穿透",value:"${self.penetrate}",eventName:"itemPropChange"},{type:"el-radio-group",title:"内容超出展示",value:"${self.overflow}",list:[{label:"隐藏",value:"hidden"},{label:"滚动",value:"auto"},{label:"全显",value:"visible"}],eventName:"itemPropChange"}],contentMenu:{data:[{icon:"icon-fuzhi",name:"复制当前布局",color:"#d33",handler:this.handleCopyLayout},{icon:"icon-shiyongwendang",name:"应用布局",color:"#d33",handler:this.handleApplyLayout}]}}},methods:{handleCopyLayout:function(){if(this.currentLayout){var e=this.currentLayout,t=e.colNumUnit,a=e.colNum,n=e.rowHeight,l=e.rowHeightUnit,i=JSON.stringify({nameSpace:"layoutCopy",layoutIndex:this.activeIndex,layoutRatio:this.activeLayout,layoutData:{colNumUnit:t,colNum:a,rowHeight:n,rowHeightUnit:l},ratio:this.currentLayout.layout[this.activeLayout]});if(k){var s=document.createElement("input");document.body.append(s),s.style.opacity=0,s.value=i,s.focus(),s.selectionStart=0,s.selectionEnd=s.value.length,document.execCommand("copy",!1),dsf.layer.message("复制成功"),setTimeout((function(){s.remove()}),100)}else{var r;null===(r=navigator)||void 0===r||null===(r=r.clipboard)||void 0===r||r.writeText(i).then((function(){dsf.layer.message("复制图层成功")}))}}},_applyLayout:function(e){var t=this;if(e&&this.activeLayout)try{var a=JSON.parse(e),n=a.nameSpace,l=a.layoutIndex,i=a.layoutRatio,s=a.layoutData,r=a.ratio;if("layoutCopy"===n&&(this.layoutIndex!==l||this.activeLayout!==i)){var o=dsf.mix(!0,{},this.currentLayout,s,{layout:b()({},this.activeLayout,r)});this.currentLayout=o,this.$nextTick((function(){t.$refs["draggrid".concat(t.activeLayout)][0].setBackground()}))}}catch(c){dsf.layer.message({message:"没有找到应用图层数据",type:"warning"})}else this.activeLayout||dsf.layer.message("请选中需要应用该布局的分辨率",!1)},handleApplyLayout:function(){var e=this;return h()(g.a.mark((function t(){var a;return g.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a="",!C){t.next=8;break}return t.next=4,navigator.clipboard.readText();case 4:a=t.sent,e._applyLayout(a),t.next=9;break;case 8:dsf.layer.message({message:"当前浏览器不支持该操作，请使用【ctrl+v】粘贴图层",type:"warning"});case 9:case"end":return t.stop()}}),t)})))()},handlePasteLayout:function(e){var t=this;e.stopPropagation();var a=document.createElement("textarea");a.style.cssText="position:absolute;z-index:99999;opacity:0;",a.id="copy-container",document.body.appendChild(a),a.focus(),setTimeout((function(){var e=a.value;t._applyLayout(e)}),100)},handleKeyDown:function(e){e.stopPropagation()},handleEventDistribute:function(e,t,a){this[t](e,a)},setRealValue:function(e,t){this.parseExpress(t)(e)},getRealValue:function(e){var t=this.parseExpress(e)();return t},parseExpress:function(e){if(e&&dsf.isString(e)){var t=e.replace(/^\$\{([\s\S]+)\}$/,"$1").split("."),a=f()(t),n=a[0],l=a.slice(1),i=l.join("."),s=null;switch(n){case"self":s=this;break;case"currentItem":-1!==this.activeItemIndex&&(s=this.currentLayout.layout[this.activeLayout][this.activeItemIndex]);break;case"currentLayout":s=this.currentLayout;break;default:dsf.layer.message("表达式上下文错误");break}var r=new Function("value","\n        try {\n          var argLength = arguments.length;\n          if(argLength === 1) {\n            this.".concat(i," = value\n          } else {\n            return this.").concat(i,"\n          }\n        } catch(e) {\n          dsf.error(e);\n          return false;\n        }\n      ")).bind(s);return r}return function(){return e}},setAreaName:function(e){if(!e)return"A";var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a=e.match(/([0-9]*)([A-Z]*)/)[2],n=+e.match(/([0-9]*)([A-Z]*)/)[1]||0,l=t.indexOf(a)+1,i=l%26;return n+=~~(l/26),0===n?t[i]:n+t[i]},itemPropChange:function(e,t){if(-1!==this.activeItemIndex){var a=t.replace(/^\$\{([\s\S]+)\}$/,"$1").split("."),n=u()(a,2),l=n[1],i=_.cloneDeep(this.currentLayout.layout);i[this.activeLayout][this.activeItemIndex]&&(i[this.activeLayout][this.activeItemIndex][l]=e,this.$set(this.currentLayout,"layout",i))}},itemChange:function(e){this.activeItemIndex=e},delItem:function(e){var t=this,a=u()(e,2),n=a[0],l=a[1];1===n?this.currentLayout.layout[this.activeLayout].splice(l,1):Object.keys(this.currentLayout.layout).forEach((function(e){t.currentLayout.layout[e].splice(l,1)}))},addItem:function(){var e=this;Object.keys(this.currentLayout.layout).forEach((function(t){var a,n=e.currentLayout.layout[t],l=null===(a=n.slice(-1)[0])||void 0===a?void 0:a.i,i=_.map(n,(function(e){return e.y})),s=Math.max.apply(null,[].concat(o()(i),[1]));n.push({x:0,y:s,w:1,h:1,i:e.setAreaName(l)})}))},addLevel:function(){var e=JSON.parse(JSON.stringify(this.currentLayout));e.zIndex+=1,this.layoutList.push(e),this.activeIndex=this.layoutList.length,this.$message({message:"新增成功",type:"success"})},deleteLevel:function(){1!==this.layoutList.length?(this.layoutList.splice(this.activeIndex-1,1),this.currentLayout=null,1==this.activeIndex?this.currentLayout=this.layoutList[0]:this.activeIndex=1):dsf.layer.message("至少保留一个层级",!1)},addQuickLayout:function(e){var t=y["QUICKLAYOUT"][e],a=Object.assign({},this.currentLayout,t);this.currentLayout=JSON.parse(JSON.stringify(a)),this.layoutList.splice(this.activeIndex-1,1,a)},yes:function(){this.layoutList.splice(this.activeIndex-1,1,this.currentLayout);var e={},t={},a=this.owner.slots.splice(0,this.slotStartNum);return _.forEach(this.owner.slots,(function(e){t[e.name]=e})),_.forEach(this.layoutList,(function(a,n){for(var l in a.layout){var i=a.layout[l];_.forEach(i,(function(a){var l="area-".concat(a.i,"-").concat(n+1);e[l]=t[l]||{name:l,controls:[]}}))}})),this.owner.slots=[].concat(o()(a),o()(Object.values(e))),this.layoutList}},beforeDestroy:function(){document.removeEventListener("paste",this.handlePasteLayout)}},S=D,$=a(0),T=Object($["a"])(S,i,s,!1,null,null,null);t["default"]=T.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[e._l(e.tabs,(function(t){return["dict"==t.key?a("el-tab-pane",{key:t.key,attrs:{name:t.name,label:t.text}},[a("enum-editor-item",{attrs:{"is-attach-full":e.isAttachFull,"is-hide-value":e.isHideValue,"is-disabled-value":e.isDisabledValue,"is-tips":e.isTips,"is-order":e.isOrder,"tree-loading":e.loading[0],"tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost1,"empty-text":"请选择数据字典",type:"dict"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1):"static"==t.key?a("el-tab-pane",{key:t.key,staticClass:"ds-enum-editor-item3",attrs:{name:t.name,label:t.text}},[a("el-input",{attrs:{rows:2,placeholder:e.placeholder,type:"textarea",resize:"none"},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}})],1):"db"==t.key?a("el-tab-pane",{key:t.key,attrs:{name:t.name,label:t.text}},[a("enum-editor-item",{attrs:{"is-attach-full":e.isAttachFull,"is-hide-value":e.isHideValue,"is-disabled-value":e.isDisabledValue,"is-tips":e.isTips,"tree-loading":e.loading[1],"tree-data":e.treeData2,"default-checked-key":e.defaultCheckedKey2,"table-post":e.tablePost2,"empty-text":"请选择数据源",type:"db"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1):e._e()]}))],2)},l=[],i=a(75),s='支持格式："文本"、"文本|值"两种格式。\n多个选项用回车符换行", "层级关系用两个空格符表示\n\n例：\na|1\nb|2\n  b-1|2-1\n  b-2|2-2\n  b-3|2-3\n    b-3-1|2-3-1\n    b-3-2|2-3-2\nc|3',r={name:"DesEnumEditor",components:{EnumEditorItem:i["default"]},props:{isAttachFull:{type:Boolean,default:!1},isHideValue:{type:Boolean,default:!1},isDisabledValue:{type:Boolean,default:!1},isTips:{type:Boolean,default:!1},isOrder:{type:Boolean,default:!1},dictionaryUrl:{type:String,default:"/rm/list/dataDic"},dbSourceUrl:{type:String,default:"/rm/list/ds"}},mixins:[$mixins.propertyDialogSetting],data:function(){return{tabs:[],placeholder:s,tabIndex:"0",loaded:[!1,!1,!1],loading:[!1,!1],value1:{type:"dict",code:null,attach:[]},value2:{type:"db",code:null,resultFormat:!1,attach:[]},value3:"",treeData1:[],treeData2:[],defaultCheckedKey1:"",defaultCheckedKey2:""}},watch:{tabIndex:function(e){!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0)}},created:function(){this.tabs=dsf.config.designer.enumEditor.tabMap,this.currentData&&this.init(this.currentData)},methods:{init:function(e){var t=e.type,a=(e.attach,e.resultFormat),n=void 0!==a&&a,l=e.code,i=e.attachFullMaps,s=e.attachHideMaps,r=e.attachDisabledMaps,o=e.attachTipsMaps,c=e.attachOrderMaps;"static"===t?(l&&l.length?this.value3=u(l):this.value3="",this.tabIndex="3",this.$set(this.loaded,2,!0)):"dict"===t?(this.value1={type:t,attach:[],code:l,attachFullMaps:i,attachHideMaps:s,attachDisabledMaps:r,attachTipsMaps:o,attachOrderMaps:c},this.defaultCheckedKey1=l,this.tabIndex="1"):"db"===t&&(this.value2={type:t,attach:[],resultFormat:n,code:l,attachFullMaps:i,attachHideMaps:s,attachDisabledMaps:r,attachTipsMaps:o,attachOrderMaps:c},this.defaultCheckedKey2=l,this.tabIndex="2")},yes:function(){if("3"===this.tabIndex)return{type:"static",code:c(this.value3)};var e=this["value"+this.tabIndex],t=[],a=[],n=[],l={},i={};return dsf.deepForEach(e.attach,(function(s){s.isAttachFull&&t.push({rmId:e.code,value:s.value,attachText:s.isAttachFull}),s.isHide&&a.push(s.value),s.isDisabled&&n.push(s.value),/^[\s\n\t]*$/.test(s.tips)||(i[s.value]=s.tips),s.showOrder&&(l[s.value]=s.showOrder)})),e.attachFullMaps=t.length>0?t:void 0,e.attachHideMaps=a.length?a:void 0,e.attachDisabledMaps=n.length?n:void 0,e.attachTipsMaps=i,e.attachOrderMaps=dsf.isEmptyObject(l)?void 0:l,delete e.attach,"db"===e.type&&!1===e.resultFormat&&delete e.resultFormat,e},tablePost1:function(e,t){this.$http.get("dict/getList/"+e).done((function(e){e.success?t&&t(e.data):dsf.layer.message("请求异常！",!1)}))},tablePost2:function(e,t){this.$http.get("meta/tree/dbSource",{rmId:e}).done((function(e){e.success?t&&t(e.data):dsf.layer.message("请求异常！",!1)}))},postData1:function(){var e,t=this;this.$set(this.loading,0,!0),this.$http.get(this.dictionaryUrl,{rmGid:null===(e=this.$route)||void 0===e||null===(e=e.query)||void 0===e?void 0:e.rmGid}).done((function(e){e.success?t.treeData1=e.data.map((function(e){return t.dataFormat1(e)})):dsf.layer.message("请求异常！",!1)})).always((function(){t.$set(t.loading,0,!1)}))},postData2:function(){var e,t=this;this.$set(this.loading,1,!0),this.$http.get(this.dbSourceUrl,{namespace:"",rmGid:null===(e=this.$route)||void 0===e||null===(e=e.query)||void 0===e?void 0:e.rmGid}).done((function(e){e.success?t.treeData2=e.data.map((function(e){return t.dataFormat2(e)})):dsf.layer.message("请求异常！",!1)})).always((function(){t.$set(t.loading,1,!1)}))},dataFormat1:function(e){var t=this,a=e.name,n=e.dsfa_rm_id,l=e.type_value,i=e.children,s={label:a,ID:n,nocheck:"5"!==l,iconSkin:""};return i?s.children=i.map((function(e){return t.dataFormat1(e)})):s.nocheck&&(s.iconSkin="_special"),s},dataFormat2:function(e){var t=this,a=e.name,n=e.ID,l=e.type_value,i=e.children,s={label:a,ID:n,nocheck:"3"!==l&&"8"!==l,iconSkin:""};return i?s.children=i.map((function(e){return t.dataFormat2(e)})):s.nocheck&&(s.iconSkin="_special"),s}}};function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a===t)return e;var n=_.last(e);return n?(n.children||(n.children=[]),o(n.children,t,a+1)):e}function c(e){var t=e.split("\n"),a=[],n=0;return _.forEach(t,(function(e,t){if(e.trim()){var l=e.match(/^\s+(?=\S+)/);e=e.trim().split("|");var i=0;l&&(i=parseInt(l[0].length/2)),t||(n=i),i-=n,i<0&&(i=0);var s={text:e[0],value:e[1]||e[0]},r=o(a,i);r.push(s)}})),a}function u(e){var t=[];return dsf.deepForEach(e,(function(e,a){var n=e.text,l=e.value;t.push(new Array(a).fill("  ").join("")+n+"|"+l)})),t.join("\n")}var d=r,f=a(0),p=Object(f["a"])(d,n,l,!1,null,null,null);t["default"]=p.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("el-tab-pane",{staticClass:"ds-enum-editor-item3",attrs:{label:"用户管理",name:"static"}},[a("el-input",{attrs:{type:"textarea",rows:2,resize:"none",placeholder:"支持格式：'文本'、'文本|值'两种格式，多个选项用回车符换行"},model:{value:e.dataTwo,callback:function(t){e.dataTwo=t},expression:"dataTwo"}})],1),a("el-tab-pane",{attrs:{name:"dict",label:"数据字典",lazy:!0}},[a("enum-editor-item",{attrs:{type:"dict","tree-loading":e.treeLoading,"tree-data":e.treeData,"default-checked-key":e.defaultCheckedKey,"table-post":e.tablePost,"empty-text":"请选择数据字典"},model:{value:e.dataOne,callback:function(t){e.dataOne=t},expression:"dataOne"}})],1)],1)},l=[],i=a(75),s={name:"DesExamEnumEditor",components:{EnumEditorItem:i["default"]},mixins:[$mixins.propertyDialogSetting],data:function(){var e=this;return{tabIndex:"static",treeLoading:!1,isTreeCheck:!1,treeData:[],defaultCheckedKey:"",dataTwo:"",dataOne:{type:"dict",code:null,attach:[]},tablePost:function(t,a){e.$http.get("dict/getList/"+t).done((function(e){e.success?a&&a(e.data):dsf.layer.message("请求异常！",!1)}))}}},created:function(){this.currentData&&this.init(this.currentData)},methods:{handleClick:function(e,t){"dict"===e.name&&!this.isTreeCheck&&this.treeData&&this.getTreeData()},init:function(e){var t=e.type,a=e.attach,n=e.code;if("static"===t){if(this.tabIndex="static",!a)return!1;this.dataTwo=a.map((function(e){return e.text===e.value?e.text:e.text+"|"+e.value})).join("\n")}else this.dataOne={type:t,code:n,attach:a},this.defaultCheckedKey=n,this.tabIndex="dict",this.getTreeData()},yes:function(){if("static"===this.tabIndex){var e=this.dataTwo.trim().split("\n");return{type:"static",attach:0==e?[]:e.map((function(e){if(!_.isEmpty(e))return e=e.split("|"),{text:e[0],value:e[1]||e[0]}}))}}return this.dataOne},getTreeData:function(){var e=this;this.treeLoading=!0,this.$http.get("/rm/list/dataDic").done((function(t){t.success?(e.isTreeCheck=!0,e.treeData=t.data.map((function(t){return e.dataFormat(t)}))):dsf.error(err)})).always((function(){e.treeLoading=!1}))},dataFormat:function(e){var t=this,a=e.name,n=e.dsfa_rm_id,l=e.type_value,i=e.children,s={label:a,ID:n,nocheck:"5"!==l,iconSkin:""};return i?s.children=i.map((function(e){return t.dataFormat(e)})):s.nocheck&&(s.iconSkin="_special"),s}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"20%"}},[a("div",{staticStyle:{overflow:"auto",height:"100%"}},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",on:{dblclick:function(t){return e.toList(n,l)}}},[a("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),a("span",[e._v(e._s(n.label))]),l.field?a("span",{staticStyle:{color:"red"}},[e._v("(字段:"+e._s(l.field)+")")]):e._e()])}}])})],1)]),a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",[a("el-main",{staticStyle:{"padding-top":"0px"}},[a("el-tabs",{attrs:{type:"card",addable:""},on:{"tab-add":e.tabAddHandler,"tab-remove":e.tabRemoveHandler},model:{value:e.currentRule,callback:function(t){e.currentRule=t},expression:"currentRule"}},e._l(e.rules,(function(t,n){return a("el-tab-pane",{key:n,attrs:{label:n,name:n,closable:"rule-1"!==n}},[a("el-table",{attrs:{data:t,border:"",stripe:"","highlight-current-row":!0,"row-key":e.getRowId,"tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号",align:"center"}}),a("el-table-column",{attrs:{label:"设置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"元数据代码"}},[a("span",[e._v(e._s(t.row.table)+"."+e._s(t.row.code))])])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"值属性"}},[a("span",[e._v(e._s(t.row.currentValueAttribute))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{placeholder:"表头文字"},model:{value:t.row.caption,callback:function(a){e.$set(t.row,"caption",a)},expression:"scope.row.caption"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"格式化"}},[a("div",{staticStyle:{width:"100%",display:"flex"}},[a("el-input",{staticStyle:{flex:"1",width:"0","margin-right":"6px"},attrs:{placeholder:"服务器端格式化函数"},model:{value:t.row.format,callback:function(a){e.$set(t.row,"format",a)},expression:"scope.row.format"}}),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" StrKit.方法名称('asdasdsa') 带双引号强制指定使用这个值当成参数 类似 java调用 类.方法名称(常量)"),a("br"),e._v(" StrKit.方法名称(_this) 指当前单元格 类似 java调用 类.方法名称(columns)"),a("br"),e._v(" StrKit.方法名称(元数据.字段名称) 可以指定这一行任意一个字段 类似 java调用 类.方法名称(row.columns)"),a("br")]),a("dsf-icon",{staticStyle:{cursor:"pointer"},attrs:{name:"bangzhuzhongxin"}})],1)],1)])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"头部对齐"}},[a("el-select",{model:{value:t.row.style.headerAlign,callback:function(a){e.$set(t.row.style,"headerAlign",a)},expression:"scope.row.style.headerAlign"}},[a("el-option",{attrs:{label:"左",value:"left"}}),a("el-option",{attrs:{label:"中",value:"center"}}),a("el-option",{attrs:{label:"右",value:"right"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数据对齐"}},[a("el-select",{model:{value:t.row.style.align,callback:function(a){e.$set(t.row.style,"align",a)},expression:"scope.row.style.align"}},[a("el-option",{attrs:{label:"左",value:"left"}}),a("el-option",{attrs:{label:"中",value:"center"}}),a("el-option",{attrs:{label:"右",value:"right"}})],1)],1)],1)],1)],1)]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作",width:"130px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[["enum"==t.row.searchType?a("dsf-button",{attrs:{title:"选项配置",size:"small","btn-style":"icon-text",icon:"shezhi"},on:{click:function(a){return a.stopPropagation(),e.settingEnumItems(t.row)}}}):e._e(),a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(a){return a.stopPropagation(),e.remove(t.row)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(a){return a.stopPropagation(),e.up(t.row)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(a){return a.stopPropagation(),e.down(t.row)}}})]]}}],null,!0)})],1)],1)})),1)],1)],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"DesExportOptions",mixins:[$mixins.propertyDialogSetting],data:function(){return{currentRule:"",rules:{"rule-1":[]},treeData:[],defaultProps:{children:"children",label:"name"},options:[{label:"选项枚举",value:"enum",defaultField:["value"]},{label:"文本",value:"text"},{label:"日期时间",value:"datetime"}]}},created:function(){},mounted:function(){var e=this,t=this.owner.$$getComponent(),a=t.$getChildMetadataList();if(!a||a.length<1)dsf.layer.pc.message("请将要展示的元数据拖动到列表中,如果是子表请保存布局后再试",!1);else{var n=a[0].metadata.at;n?(this.$emit("update:currentData",{}),this.$nextTick((function(){var n=dsf.mix(!0,{},e.owner.exportOptions);_.each(n,(function(t,a){_.each(t,(function(e,t){dsf.isUnDef(e.style)&&(e.style={align:"center",headerAlign:"center"},e.align&&(e.style.align=e.align,delete e.align),e.headerAlign&&(e.style.headerAlign=e.headerAlign,delete e.headerAlign))})),e.$set(e.currentData,a,t)})),t.$getMetadataTree(a).then((function(t){e.treeData=t,"array"==dsf.type(e.currentData)?e.rules={"rule-1":e.currentData}:e.rules=e.currentData;var a=Object.keys(e.rules);e.currentRule=a[0]?a[0]:"rule-1"}))}))):dsf.layer.pc.message("请将要展示的元数据拖动到列表中,如果是子表请保存布局后再试",!1)}},methods:{getRowId:function(e){var t=e.id;return t},getParentRow:function(e){var t=_.find(this.tableData,(function(t){return t.id==e.parent}));return t||{}},toList:function(e,t){if(t.field){var a=this.rules[this.currentRule],n=_.findIndex(a,(function(e){return e.id==t.id}));if(n<0){var l={id:t.id,table:t.id.substr(0,t.id.indexOf(".")),code:t.metadata.code,valueAttributes:_.map(t.metadata.valueAttributes,"code"),currentValueAttribute:t.metadata.valueAttributes.length>1?t.code:t.metadata.valueAttributes[0].code,caption:t.fieldCaption,format:"",style:{align:"center",headerAlign:"center"}};a.push(l)}else dsf.layer.pc.message("已经存在，请勿重复添加",!1)}},getMaxRule:function(){var e=Object.keys(this.rules),t=0;return _.each(e,(function(e){var a=e.replace(/[^\d]/g,""),n=parseInt(a);n>t&&(t=n)})),t},tabAddHandler:function(){var e=this.getMaxRule();this.$set(this.rules,"rule-"+(e+1),[]),e=this.getMaxRule(),this.currentRule="rule-"+e},tabRemoveHandler:function(e){var t=this;dsf.layer.confirm("是否要删除"+e).then((function(){t.$delete(t.rules,e);var a=t.getMaxRule();t.currentRule="rule-"+a})).catch((function(){}))},getTreeData:function(e,t){var a=this;return s()(o.a.mark((function n(){var l,i,s;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=[],"8"!=t){n.next=8;break}return i={rmId:e.rmId},n.next=5,a.$webAPI.getDbSourceFieldsTree(i);case 5:l=n.sent,n.next=13;break;case 8:if("3"!=t){n.next=13;break}return s={namespace:e.at},n.next=12,a.$webAPI.getMetaDataFieldsTree(s);case 12:l=n.sent;case 13:return n.abrupt("return",l);case 14:case"end":return n.stop()}}),n)})))()},remove:function(e){var t=this.rules[this.currentRule];dsf.array.remove(t,e)},up:function(e){var t=this.rules[this.currentRule],a=_.findIndex(t,(function(t){return t==e}));if(a>0){var n=t[a-1];this.$set(t,a-1,e),this.$set(t,a,n)}},down:function(e){var t=this.rules[this.currentRule],a=_.findIndex(t,(function(t){return t==e}));if(a<t.length-1){var n=t[a+1];this.$set(t,a+1,e),this.$set(t,a,n)}},yes:function(){var e=this.rules;return e}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{width:"500px"}},[a("el-container",[a("el-header",{staticStyle:{padding:"10px 0","text-align":"right"}},[a("el-dropdown",{attrs:{placement:"bottom"},on:{command:e.addSystemRule}},[a("DsfButton",{attrs:{size:"small",icon:"jia"}},[e._v("内置规则")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.systemRuleMap,(function(t,n){return[a("el-dropdown-item",{key:n,attrs:{command:n,disabled:t.disabled}},[e._v(e._s(t.name))])]}))],2)],1),a("el-dropdown",{staticStyle:{"margin-left":"5px"},attrs:{placement:"bottom"},on:{command:e.addCustomRule}},[a("DsfButton",{attrs:{size:"small",icon:"jia"}},[e._v("自定义规则")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.customRuleMap,(function(t,n){return[a("el-dropdown-item",{key:n,attrs:{command:n}},[e._v(e._s(t.name))])]}))],2)],1)],1),a("el-main",{staticStyle:{padding:"0"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{data:e.tableData,"max-height":"500","highlight-current-row":"",border:"",stripe:""},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{property:"type",label:"类型",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row.type;return[e._v(" "+e._s("system"==a?"内置规则":"自定义规则")+" ")]}}])}),a("el-table-column",{attrs:{property:"name",label:"规则名"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row,n=a.type,l=a.key;return[e._v(" "+e._s("system"==n?e.systemRuleMap[l].name:e.customRuleMap[l].name)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:100},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text"},on:{click:function(a){return a.stopPropagation(),e.deleted(t)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),a("el-main",{staticStyle:{padding:"0"}},[a("el-container",[e.formModel?a("el-form",{staticStyle:{width:"90%"},attrs:{model:e.formModel,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-input",{attrs:{value:e.activeRow.type,disabled:""}})],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{value:e.activeRow.name,disabled:""}})],1),e.activeRow.describe?a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",value:e.activeRow.describe,disabled:""}})],1):e._e(),"custom"==e.formModel.type?[a("el-form-item",{attrs:{label:e.activeRule.valueName}},[a("el-input",{attrs:{placeholder:e.activeRule.placeholder,rows:6,type:"textarea"},model:{value:e.formModel.value,callback:function(t){e.$set(e.formModel,"value",t)},expression:"formModel.value"}})],1)]:e._e()],2):e._e()],1)],1)],1)},l=[],i={trim:{name:"首尾空白",describe:"去除首尾空白"},trimAll:{name:"所有空白",describe:"去除所有空白"}},s={keywords:{name:"关键词过滤",valueName:"关键词",placeholder:"请输入关键词\n多个请换行"},regExp:{name:"正则配置",valueName:"正则表达式",placeholder:"请输入正则表达式\n多个请换行\n正则必须/开头，/或/g或/i结尾，/默认为/g\n例如:  /a+/  过滤掉连续a字符"}},r={name:"DesFilterRuleSetting",mixins:[$mixins.propertyDialogSetting],data:function(){return{text:"",systemRuleMap:i,customRuleMap:s,formModel:null,tableData:[]}},computed:{activeRule:function(){return this.formModel?"system"==this.formModel.type?i[this.formModel.key]:s[this.formModel.key]:null},activeRow:function(){var e={};if(!this.formModel)return e;var t=this.activeRule;return"system"==this.formModel.type?e.type="内置规则":e.type="自定义规则",e.name=t.name,t.describe&&(e.describe=t.describe),e}},created:function(){this.tableData=this.currentData||[]},mounted:function(){var e=this;this.tableData.length&&(this.formModel=this.tableData[0],this.$nextTick((function(){e.$refs.table.setCurrentRow(e.formModel)})))},methods:{yes:function(){return this.tableData},addSystemRule:function(e){var t=this,a=this.systemRuleMap[e],n={key:e,type:"system"};this.$set(a,"disabled",!0),this.tableData.push(n),this.$nextTick((function(){t.$refs.table.setCurrentRow(n),t.formModel=n}))},addCustomRule:function(e){var t=this,a=(this.customRuleMap[e],{key:e,type:"custom",value:""});this.tableData.push(a),this.$nextTick((function(){t.$refs.table.setCurrentRow(a),t.formModel=a}))},rowClickHandler:function(e){this.formModel=e},deleted:function(e){var t=this,a=e.$index,n=e.row;"system"==n.type&&this.$set(this.systemRuleMap[n.key],"disabled",!1),this.tableData.splice(a,1),this.tableData.length?n==this.formModel&&this.$nextTick((function(){var e=t.tableData[a>1?a-1:0];t.$refs.table.setCurrentRow(e),t.formModel=e})):this.$nextTick((function(){t.formModel=null}))}}},o=r,c=a(0),u=Object(c["a"])(o,n,l,!1,null,null,null);t["default"]=u.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增行")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 第"+e._s(t.$index+1)+"行 ")]}}])}),a("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name="row"+(t.$index+1))+" ")]}}])}),a("el-table-column",{attrs:{label:"宽度","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}})]}}])}),a("el-table-column",{attrs:{label:"高度","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.height,callback:function(a){e.$set(t.row,"height",a)},expression:"scope.row.height"}})]}}])}),a("el-table-column",{attrs:{label:"是否伸缩","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.flexShrink,callback:function(a){e.$set(t.row,"flexShrink",a)},expression:"scope.row.flexShrink"}},[a("el-option",{attrs:{label:"是",value:1}}),a("el-option",{attrs:{label:"否",value:0}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"flexColumnEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.name){this.names[a]="";var l=this.names.indexOf(t.name);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.name}return n},newTab:function(){return{name:"row2",flexShrink:0,width:"100%",height:"auto",controls:[]}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){this.tableData.splice(e.$index,1)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.addCol}},[e._v("新增列")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 第"+e._s(t.$index+1)+"格 ")]}}])}),a("el-table-column",{attrs:{label:"高度","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.height,callback:function(a){e.$set(t.row,"height",a)},expression:"scope.row.height"}})]}}])}),a("el-table-column",{attrs:{label:"占用列数","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.span,callback:function(a){e.$set(t.row,"span",e._n(a))},expression:"scope.row.span"}})]}}])}),e.simple?e._e():a("el-table-column",{attrs:{label:"列数断点","header-align":"center",align:"center"}},[a("el-table-column",{attrs:{label:"≥1920px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.lg,callback:function(a){e.$set(t.row,"lg",e._n(a))},expression:"scope.row.lg"}})]}}],null,!1,3783331954)}),a("el-table-column",{attrs:{label:"≥1200px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.xl,callback:function(a){e.$set(t.row,"xl",e._n(a))},expression:"scope.row.xl"}})]}}],null,!1,3498212237)}),a("el-table-column",{attrs:{label:"≥992px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.md,callback:function(a){e.$set(t.row,"md",e._n(a))},expression:"scope.row.md"}})]}}],null,!1,2527293136)}),a("el-table-column",{attrs:{label:"≥768px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.sm,callback:function(a){e.$set(t.row,"sm",e._n(a))},expression:"scope.row.sm"}})]}}],null,!1,2968054951)}),a("el-table-column",{attrs:{label:"<768px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.xs,callback:function(a){e.$set(t.row,"xs",e._n(a))},expression:"scope.row.xs"}})]}}],null,!1,1393585650)})],1),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"DesFlexGrid",mixins:[$mixins.propertyDialogSetting],props:{simple:{type:Boolean,default:!1}},data:function(){return{form:null,formNode:null,tableData:[],sizeMap:[{size:"lg",desc:"≥1920px"},{size:"xl",desc:"≥1200px"},{size:"md",desc:"≥992px"},{size:"sm",desc:"≥768px"},{size:"xs",desc:"<768px"}]}},created:function(){},beforeMount:function(){},mounted:function(){var e=this,t=this.owner.$$getComponent().slots;if(t=dsf.mix(!0,[],t),t[0]){var a=t[0].controls;_.each(a,(function(t){e.simple&&(t.span/=2),e.tableData.push(t)}))}},methods:{rowClickHandler:function(){},addCol:function(){var e={span:6,height:"auto"};this.simple&&(e.span=3),this.tableData.push(dsf.designer.createComponent("dsf.col",e))},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var a=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+a.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},insert:function(e){var t={span:6,height:"auto"};this.simple&&(t.span=3),this.tableData.splice(e.$index+1,0,dsf.designer.createComponent("dsf.col",t))},yes:function(){var e=this,t=this.tableData;_.each(t,(function(t){e.simple&&(t.span*=2),e.checkMaxSpan(t,"span");var a=_.map(e.sizeMap,"size");_.each(a,(function(a){e.checkMaxSpan(t,a)}))})),this.owner.slots[0].controls=[],this.$nextTick((function(){var a=e.owner.slots[0].controls;_.each(t,(function(e){a.push(e)}))}))},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SelectTree",{attrs:{"tree-data":e.nodes,select:e.selectFlow,"show-search":!0,multi:!0},on:{"update:select":function(t){e.selectFlow=t}}})],1)},l=[],i={name:"ApplyTo",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{nodes:[],selectFlow:[]}},created:function(){var e=dsf.mix(!0,this.data);this.nodes=[this.formatData(e[0])]},mounted:function(){},methods:{yes:function(){return this.selectFlow},formatData:function(e){if(delete e.disabled,e.children)for(var t=0;t<e.children.length;t++)this.formatData(e.children[t]);return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0,loading:e.loading},on:{"update:select":function(t){e.selectFlow=t}},scopedSlots:e._u([{key:"file-icon",fn:function(t){var n=t.data;return a("i",{staticClass:"iconfont icon-edit right",on:{click:function(t){return e.openFlow(n,t)}}})}}])})],1)},l=[],i={name:"ChooseFlow",mixins:[$mixins.propertyDialogSetting],props:{value:{type:Object,default:function(){return{}}}},data:function(){return{flowData:[],selectFlow:null,checked:[],loading:!0}},created:function(){this.initFlow()},methods:{yes:function(){return this.owner&&(this.owner.metadata.defaultValue={wf_id:this.selectFlow.ID,wf_name:this.selectFlow.name}),this.selectFlow},validate:function(){return!!this.selectFlow||(dsf.layer.message("请选择流程",!1),!1)},openFlow:function(e,t){t.stopPropagation();var a=e.path,n=e.name,l=e.id,i=a.split("/"),s=i.shift(),r=i.pop(),o=i.join(".");this.$openWindow(!0,"./designer.html#/flow?id="+l+"&path="+a+"&B="+s+"&M="+o+"&pname="+r+"&title="+n)},initFlow:function(){var e=this;this.$http.get("rm/list/wf",{}).then((function(t){if(t.data.success){var a=t.data.data[0],n=a?e.formatData(a,"0"):null;e.flowData=a?[n]:[],e.currentData&&e.currentData.dsfa_rm_id&&(e.checked=[e.currentData.dsfa_rm_id],e.selectFlow=e.currentData),e.value&&e.value.dsfa_rm_id&&(e.checked=[e.value.dsfa_rm_id],e.selectFlow=e.value)}e.loading=!1}))},formatData:function(e,t){if(e.label=e.name,e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),"4"!=e.type_value&&(e.nocheck=!0),"4"==e.type_value||e.children||(e.iconSkin="_special"),e.children)for(var a=0;a<e.children.length;a++)this.formatData(e.children[a],t);return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SelectTree",{attrs:{"tree-data":e.formData,select:e.selectForm,checked:e.checked,"show-search":!0,loading:e.loading},on:{"update:select":function(t){e.selectForm=t}}})],1)},l=[],i={name:"ChooseForm",mixins:[$mixins.propertyDialogSetting],data:function(){return{formData:[],selectForm:null,checked:[],loading:!1}},created:function(){this.initFlow()},mounted:function(){},methods:{yes:function(){return this.selectForm},validate:function(){return!!this.selectForm||(dsf.layer.message("请选择表单",!1),!1)},initFlow:function(){var e=this;this.loading=!0,this.$http.get("oua/getPage",{},$$webRoot).then((function(t){if(t.data.success){var a=t.data.data,n=[];a.forEach((function(t){n.push(e.formatData(t,"0"))})),e.formData=n,e.loading=!1}}))},formatData:function(e,t){if(e.label=e.name,13==e.type_value&&(e.label="".concat(e.label,"(移动端)")),e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),e.children)for(var a=0;a<e.children.length;a++)this.formatData(e.children[a],t);return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dsf-virtual-scroll",[a("el-collapse",{staticClass:"context-tree",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.list,(function(t,n){return a("el-collapse-item",{key:n,attrs:{title:t.title,name:n}},[a("SelectTree",{attrs:{"tree-data":t.tree,"hide-checkbox":!0},on:{change:e.change}})],1)})),1)],1)},l=[],i=a(2),s=a.n(i),r=a(8),o=a.n(r),c={name:"ContextTree",data:function(){return{activeName:[0],list:[{title:"上下文",tree:[]},{title:"公用函数",tree:[]}]}},created:function(){this.init()},mounted:function(){},methods:{init:function(){var e=this;this.$http.all([this.$http.get("./static/other/context.json"),this.$http.get("./static/other/utilityFunction.json")]).then((function(t){var a,n,l=o()(t,2),i=l[0].Context,r=l[1].Function;(a=e.list[0].tree).push.apply(a,s()(i)),(n=e.list[1].tree).push.apply(n,s()(r))})).catch((function(e){}))},change:function(e){e&&e.Key&&this.$emit("change",e.Key)}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-real btn-param-setting database-operation"},[a("el-tabs",{model:{value:e.Parameter.paramMode,callback:function(t){e.$set(e.Parameter,"paramMode",t)},expression:"Parameter.paramMode"}},[a("el-tab-pane",{attrs:{label:"普通模式",name:"0",lazy:""}},[a("el-form",{ref:"form",class:{isBack:e.isBack},attrs:{"label-width":"110px"}},[a("div",{staticClass:"backup"},[a("el-form-item",{attrs:{label:e.isBack?"还原库信息":"备份数据库",required:""}},[a("div",{staticClass:"backup-input",on:{click:function(t){return e.chooseDatabase()}}},[a("el-input",{attrs:{readonly:"",placeholder:"请选择数据库"},model:{value:e.Parameter.dataBaseText,callback:function(t){e.$set(e.Parameter,"dataBaseText",t)},expression:"Parameter.dataBaseText"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1)])],1),a("div",{staticClass:"file-save"},[a("el-form-item",{attrs:{label:e.isBack?"还原文件类型":"文件保存类型",required:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.isBack?"请选择还原文件类型":"请选择文件保存类型"},on:{change:e.changeFileType},model:{value:e.Parameter.fileTypeValue,callback:function(t){e.$set(e.Parameter,"fileTypeValue",t)},expression:"Parameter.fileTypeValue"}},e._l(e.fileTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:e.isBack?"还原服务器":"备份服务器",required:""}},[a("div",{staticClass:"backup-input",on:{click:e.chooseServer}},[a("el-input",{attrs:{readonly:"",placeholder:e.isBack?"请选择还原服务器":"请选择备份服务器"},model:{value:e.Parameter.serverText,callback:function(t){e.$set(e.Parameter,"serverText",t)},expression:"Parameter.serverText"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})])],1)]),a("el-form-item",{attrs:{label:"文件存放路径",required:""}},[a("el-input",{attrs:{placeholder:"/date/bak/bak_@[t(yyyy_mm_dd)].sql"},model:{value:e.Parameter.backupFilePath,callback:function(t){e.$set(e.Parameter,"backupFilePath",t)},expression:"Parameter.backupFilePath"}})],1)],1)]),a("div",{staticClass:"actuator"},[a("el-radio-group",{staticClass:"act",model:{value:e.Parameter.actuatorType,callback:function(t){e.$set(e.Parameter,"actuatorType",t)},expression:"Parameter.actuatorType"}},[a("el-radio",{attrs:{label:0}},[e._v("默认执行器")]),a("el-radio",{attrs:{label:1}},[e._v("自定义执行器")])],1),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}}),a("el-button",{staticClass:"ds-button set-parameter",attrs:{size:"small"},on:{click:e.setParameter}},[e._v(" 设置批量参数 ")])],1)],1),a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{lazy:"",label:"高级模式",name:"1"}},[a("Parameter",{ref:"parameter",attrs:{value:e.value}}),a("div",{staticClass:"actuator"},[e.fullClassName?a("el-radio-group",{staticClass:"act",model:{value:e.Parameter.actuatorType,callback:function(t){e.$set(e.Parameter,"actuatorType",t)},expression:"Parameter.actuatorType"}},[a("el-radio",{attrs:{label:0}},[e._v("默认执行器")]),a("el-radio",{attrs:{label:1}},[e._v("自定义执行器")])],1):e._e(),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1)],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(3),o=a.n(r),c=a(1),u=a.n(c);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"DatabaseOperation",props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"},isBack:{type:Boolean,default:!1},fullClassName:{type:String,default:""}},data:function(){return{Parameter:{Type:1,ID:"",MultiType:2,Content:"",actuatorType:0,fullClassName:"",paramMode:"0",dataBaseText:"",serverValue:"",serverText:"",backupFilePath:"",fileTypeValue:null},batchParameters:{},executeScriptText:"",fileTypes:[]}},created:function(){this.Parameter=f(f({},this.Parameter),this.value),this.Parameter.paramMode+="",this.init(),this.initFile()},methods:{initFile:function(){var e=this;return s()(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTreeData("/smartControl/getResourceDict");case 2:e.fileTypes=t.sent,_.isNull(e.Parameter.fileTypeValue)&&(e.Parameter.fileTypeValue=e.fileTypes[0].value);case 4:case"end":return t.stop()}}),t)})))()},changeFileType:function(){this.Parameter.serverValue="",this.Parameter.serverText="",this.Parameter.backupFilePath=""},getTreeData:function(e){var t=this;return this.loading=!0,this.$http.get(e||"dataResource/getTree?types=1,7").done((function(e){if(t.loading=!1,e.success)return e.data}))},chooseServer:function(){var e=this.Parameter.fileTypeValue;this.chooseDatabase("/dataResource/getFileTree?types="+this.Parameter.fileTypeValue,e)},chooseDatabase:function(e,t){var a=this,n={ref:"explorer",fileType:t||"1,7",multiple:!1,defaultCheckedKeys:[e?this.Parameter.serverValue:this.Parameter.ID],nodeKey:"_id",loading:!0,props:{label:"_name"}},l=this.$openDialog({title:"备份数据库",width:"800px",height:"600px",content:"dsfExplorer",params:n,btns:[{text:"确定",handler:function(t){var n=t.yes();return _.isNull(n)?(dsf.layer.message(e?"请选择一个服务器":"请选择一个数据库",!1),!1):e?(a.Parameter.serverValue=n.id,a.Parameter.serverText=n.ip||n._name,a.Parameter.backupFilePath=n.path,!0):(a.Parameter.ID=n.id,a.Parameter.dataBaseText=n._name,!0)}},{text:"取消"}]});this.$nextTick((function(){a.getTreeData(e).then((function(e){l.$refs.content.setData(e)}))}))},editorLoaded:function(){var e=this.executeScriptText;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e,t=this;if("0"==this.Parameter.paramMode&&this.Parameter.Content){e=this.Parameter.Content.split(",");var a=[],n=[];e.forEach((function(e){var l,i,s=dsf.base64.decode(e);s=JSON.parse(s),t.executeScriptText=null===(l=s)||void 0===l||null===(l=l._content)||void 0===l?void 0:l.executeScriptText,(null===(i=s.paramInfo)||void 0===i?void 0:i.length)>0&&(n.push(s.data),a=s.paramInfo)})),a.length>0&&(this.batchParameters.paramInfo=a,this.batchParameters.data=n)}},getContent:function(){var e=this,t=1==this.Parameter.actuatorType?this.Parameter.fullClassName:this.fullClassName;if("1"==this.Parameter.paramMode){var a=this.$refs.parameter.getContent();return Object.assign(a,{actuatorType:this.Parameter.actuatorType,paramMode:Number(this.Parameter.paramMode),fullClassName:t}),a}if(this.Parameter.fullClassName=t,dsf.isEmptyObject(this.batchParameters)){var n={_content:{id:this.Parameter.ID,fullClassName:t}};return n=JSON.stringify(n),this.Parameter.Content=dsf.base64.encode(n),f(f({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}var l=[];return this.batchParameters.data.forEach((function(a,n){var i={_content:{fullClassName:t,id:e.Parameter.ID},_order:n,data:a,paramInfo:e.batchParameters.paramInfo};i=JSON.stringify(i),l.push(dsf.base64.encode(i))})),this.Parameter.Content=l.join(","),f(f({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})},validate:function(){return"1"==this.Parameter.paramMode||(1!==this.Parameter.actuatorType||this.Parameter.fullClassName?this.Parameter.dataBaseText?this.Parameter.fileTypeValue?this.Parameter.serverValue?!!this.Parameter.backupFilePath||(dsf.layer.message("文件存放路径不能为空",!1),!1):(dsf.layer.message("备份服务器不能为空",!1),!1):(dsf.layer.message("文件保存类型不能为空",!1),!1):(dsf.layer.message("备份数据库不能为空",!1),!1):(dsf.layer.message("fullClassName不能为空",!1),!1))},setParameter:function(){var e=this;this.$openDialog({title:"批量参数",width:"1200px",height:"600px",overflow:"hidden",content:"ParameterBatch",params:{value:this.batchParameters},btns:[{text:"确定",handler:function(t){var a=t.getContent();return!!a&&(e.batchParameters=a,!0)}},{text:"取消"}]})}}},h=p,m=a(0),b=Object(m["a"])(h,n,l,!1,null,null,null);t["default"]=b.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"event-setting"},[a("div",{staticClass:"left"},[a("MonacoEditor",{ref:"editor",attrs:{language:e.language,readOnly:e.readOnly},on:{mounted:e.editorLoaded}})],1),a("div",{staticClass:"right"},[a("ContextTree",{on:{change:e.change}})],1)])},l=[],i={name:"EventSetting",props:{code:{type:String,default:""},language:{type:String,default:"javascript"},isEvent:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},mounted:function(){},methods:{getContent:function(){var e;return e="html"==this.language?dsf.escapeFilter(this.$refs.editor.getContent()):this.$refs.editor.getContent(),this.isEvent?{Expression:e}:e},editorLoaded:function(){var e=this.code;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},change:function(e){this.disabled||this.$refs.editor.insertContent(e)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control-filter-tree"},[a("SelectTree",{attrs:{"tree-data":e.bussinessData,select:e.bussiness,"show-search":!0},on:{"update:select":function(t){e.bussiness=t}}})],1)},l=[],i={name:"FlowBusiness",mixins:[$mixins.propertyDialogSetting],data:function(){return{bussinessData:[],bussiness:null}},created:function(){this.initBussiness()},methods:{yes:function(){return!!this.validate()&&this.bussiness},validate:function(){return!!this.bussiness||(dsf.layer.message("请选择一个组",!1),!1)},initBussiness:function(){var e=this;this.$http.get("component/loadBlGroupTree",{}).then((function(t){if(t.data.success){var a=t.data.data[0],n=a?e.formatData(a,"14"):null;e.bussinessData=a?[n]:[]}}))},formatData:function(e,t){if(e.label=e._name,e.id=e._id,t&&(e.disabled=e.type!=t),e.children)for(var a=0;a<e.children.length;a++)this.formatData(e.children[a],t);return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-common-tree"},[a("SelectTree",{ref:"SelectTree",attrs:{loading:e.loading,checked:e.checked,customIcon:["icon-jiaohuan"],"tree-data":e.baseData,"default-keys":e.defaultKeys,"expand-all":!1,select:e.base,"show-search":!0,setIcon:e.setRoleIcon},on:{"update:select":function(t){e.base=t}}})],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"FlowCommonTree",mixins:[$mixins.propertyDialogSetting],props:{value:{type:String,default:function(){return""}},url:{type:String,default:"oua2/getRole"}},data:function(){return{baseData:[],base:null,loading:!0,checked:[],defaultKeys:[],keyword:""}},watch:{base:function(e){this.$emit("select",e)}},created:function(){this.value&&(this.checked=[this.value]),this.initBase()},methods:{getContent:function(){return!!this.validate()&&this.base.id},validate:function(){return!!this.base||(dsf.layer.message("请选择角色",!1),!1)},setRoleIcon:function(e,t){return"0"==e.data.TYPE?e.expanded?["icon-dakai"]:["icon-wenjianjia"]:"1"==e.data.TYPE?["icon-icon-people"]:["icon-icon_person"]},initBase:function(){var e=this;return s()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTreeData();case 2:null!==(a=e.base)&&void 0!==a&&a.id&&setTimeout((function(){var t=e.$refs.SelectTree.$refs.treeForm.$el.querySelector('.custom-tree-node[tree-id="key_'.concat(e.base.id,'"]'));null===t||void 0===t||t.scrollIntoView({block:"center"})}),200);case 3:case"end":return t.stop()}}),t)})))()},getTreeData:function(e){var t=this;this.loading=!0;var a={pid:e,selectId:this.value};return this.code&&(a.code=this.code),this.$http.get(this.url,a).done((function(a){if(t.loading=!1,a.success){var n=a.data,l=[];return n.forEach((function(a){l.push(t.formatData(a,"0")),e||t.defaultKeys.push(a.id)})),t.baseData=l,l}}))},formatData:function(e,t){var a;if(e.label=e.NAME||e._name,e.disabled=e.TYPE===t,e.id==this.value&&(this.defaultKeys.push(e.id),this.base=e),e.disabled||(e.leaf=!0),(null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.length)>0){this.defaultKeys.push(e.id);for(var n=0;n<e.children.length;n++)this.formatData(e.children[n],t)}else delete e.children;return e}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"for-personnel"},[a("SelectTree",{attrs:{"tree-data":e.peopleData,"default-keys":e.defaultShowPeoples,"expand-all":!1,multi:!0,select:e.selectPeople,checked:e.checked,loading:e.loadingPeople},on:{"update:select":function(t){e.selectPeople=t}}})],1)},l=[],i={name:"ForPersonnel",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{peopleData:[],loadingPeople:!0,defaultShowPeoples:[],extendPersonData:[],selectPeople:null,checked:[]}},created:function(){this.initTabel()},mounted:function(){},methods:{getContent:function(){return this.selectPeople},initTabel:function(){var e=this;this.$http.get("oua/getUserByCurUnit",{}).then((function(t){if(t.data.success){var a,n=e.formatData(t.data.data,"1");e.defaultShowPeoples.push(n.id),e.checked=null===(a=e.value)||void 0===a?void 0:a.map((function(e){return e.id})),e.peopleData=[n],e.loadingPeople=!1}}))},formatData:function(e,t){if(e.label=e.NAME||e._name,e.id=e.id||e._id,e.type=e.TYPE||e._type,t&&(e.disabled=e.type!=t),e.attributes={NAME:e.label,id:e.id,FID:e.pid,type:e.type},delete e.NAME,delete e.Atts,delete e.TYPE,delete e.FID,e.children)for(var a=0;a<e.children.length;a++)this.formatData(e.children[a],t);return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-institution-info"},[a("table",[a("tbody",[a("tr",[a("td",{attrs:{colspan:"3"}},[a("DsfTextbox",{attrs:{required:!0,rows:1,label:"节点名称"},model:{value:e.zdyq.jdmc,callback:function(t){e.$set(e.zdyq,"jdmc",t)},expression:"zdyq.jdmc"}})],1)]),a("tr",[a("td",{attrs:{colspan:"3"}},[a("DsfTextbox",{attrs:{required:!0,rows:1,label:"责任岗位"},model:{value:e.zdyq.zrgw,callback:function(t){e.$set(e.zdyq,"zrgw",t)},expression:"zdyq.zrgw"}})],1)]),a("tr",[a("td",{attrs:{colspan:"3"}},[a("DsfTextbox",{attrs:{rows:1,label:"相关记录"},model:{value:e.zdyq.xgjl,callback:function(t){e.$set(e.zdyq,"xgjl",t)},expression:"zdyq.xgjl"}})],1)])])]),a("div",{staticClass:"btns"},[a("DsfButton",{staticClass:"small",attrs:{icon:"add"},on:{click:function(t){return e.addNew()}}},[e._v(" 新增 ")]),a("DsfButton",{staticClass:"small plain",attrs:{icon:"shanchu"},on:{click:e.clearAll}},[e._v(" 清空 ")])],1),a("table",[a("tbody",{staticClass:"inner-content"},[e._m(0),e._l(e.zdyq.list,(function(t,n){return a("tr",{key:n},[a("td",{staticClass:"xhfiled sub"},[a("el-input",{staticClass:"zdyqxh",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.xh,callback:function(a){e.$set(t,"xh",a)},expression:"item.xh"}})],1),a("td",{staticClass:"filed_common sub"},[a("el-input",{staticClass:"zdyq",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("td",{staticClass:"operation"},[a("a",{staticClass:"ds-button--icon-text",on:{click:function(t){return e.deleteRow(n)}}},[a("i",{staticClass:"iconfont icon-shanchu"})])])])}))],2)])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"table-title"},[a("td",{staticClass:"xhfiled"},[e._v("序号")]),a("td",[e._v("制度要求")]),a("td",{staticClass:"operation"},[e._v("操作")])])}],i={name:"InstitutionInfo",props:{checked:{type:Object,default:function(){return{}}},value:{type:[Object,String],default:function(){return{}}}},data:function(){return{zdyq:{jdmc:"",list:[],xgjl:"",zrgw:""}}},created:function(){var e;Object.assign(this.zdyq,{jdmc:this.checked.name},(null===(e=this.value)||void 0===e?void 0:e.zdyq)||{})},mounted:function(){},methods:{getContent:function(){return{zdyq:this.zdyq}},validate:function(){var e,t;if(!this.zdyq.jdmc)return dsf.layer.message("请填写节点名称",!1),!1;if(!this.zdyq.zrgw)return dsf.layer.message("请填写责任岗位",!1),!1;var a=!1;return null===(e=this.zdyq.list)||void 0===e||e.forEach((function(e){e.xh&&e.content||(a=!0)})),a?(dsf.layer.message("请完善制度要求",!1),!1):0!==(null===(t=this.zdyq.list)||void 0===t?void 0:t.length)||(dsf.layer.message("请填写制度要求",!1),!1)},addNew:function(){this.zdyq.list.push({content:"",xh:""})},deleteRow:function(e){this.zdyq.list.splice(e,1)},clearAll:function(){this.zdyq.list=[]}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-java-parameter parameter-batch"},[a("div",{staticClass:"parameter-box"},[a("div",{staticClass:"parameter-header"},[a("el-button",{staticClass:"ds-button plain",attrs:{size:"small"},on:{click:e.addParameter}},[e._v(" 新增字段 ")])],1),a("SelectTable",{attrs:{data:e.data,columns:e.columns,height:"calc(100% - 70px)"}})],1)])},l=[],i={name:"JavaParameter",props:{value:{type:Object,default:function(){return{}}}},data:function(){return{data:[],columns:[{prop:"key",label:"字段名称",width:"160",fieldType:"input"},{prop:"value",label:"字段值",fieldType:"input"},{label:"操作",width:"94",operate:!0}],Parameter:{Type:1,MultiType:2,Content:""}}},created:function(){this.initData()},mounted:function(){},methods:{getContent:function(){if(!this.validate())return!1;var e={};this.data.forEach((function(t){e[t.key]=t.value}));var t={_content:e};return t=JSON.stringify(t),this.Parameter.Content=dsf.base64.encode(t),this.Parameter},validate:function(){var e;if(0==(null===(e=this.data)||void 0===e?void 0:e.length))return dsf.layer.message("字段不能为空",!1),!1;var t=!1,a=!1;return this.data.forEach((function(e){e.key||(t=!0),e.value||(a=!0)})),t?(dsf.layer.message("字段名称不能为空",!1),!1):!a||(dsf.layer.message("字段值不能为空",!1),!1)},initData:function(){var e;if(null!==(e=this.value)&&void 0!==e&&e.Content){var t,a=null===(t=JSON.parse(dsf.base64.decode(this.value.Content)))||void 0===t?void 0:t._content;for(var n in a)this.data.push({key:n,value:a[n]})}else this.data.push({key:"fullClassName",value:""})},addParameter:function(){var e="";0==this.data.length&&(e="fullClassName"),this.data.push({key:e,value:""})}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-leave-send"},[a("div",{staticClass:"top"},[a("el-radio",{attrs:{label:"7"},model:{value:e.superType,callback:function(t){e.superType=t},expression:"superType"}},[e._v(" RestFul ")]),a("el-radio",{attrs:{label:"8"},model:{value:e.superType,callback:function(t){e.superType=t},expression:"superType"}},[e._v(" SQL ")])],1),a("div",{staticClass:"content-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"7"==e.superType,expression:"superType == '7'"}],staticClass:"restful"},[a("div",{staticClass:"left"},[a("div",{staticClass:"url"},[a("label",[e._v("URL地址：")]),a("el-input",{attrs:{placeholder:"请选择URL"},model:{value:e.restful_url,callback:function(t){e.restful_url=t},expression:"restful_url"}})],1),a("el-table",{ref:"table",attrs:{data:e.data,height:"88%","highlight-current-row":""},on:{"current-change":e.handleChange}},[a("el-table-column",{attrs:{prop:"name",label:"参数名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}):a("label",[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"参数类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):a("label",[e._v(e._s(t.row.type))])]}}])}),a("el-table-column",{attrs:{prop:"value",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}):a("label",[e._v(e._s(t.row.value))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dsf-button",{staticClass:"plain",attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRow(t.$index,t.index)}}},[e._v("删除")]),a("dsf-button",{attrs:{size:"mini"},on:{click:function(a){return e.addRow(t.$index,t.row)}}},[e._v("增加")])]}}])},[a("template",{slot:"header"},[a("dsf-button",{staticClass:"plain",attrs:{size:"mini"},on:{click:e.clearAll}},[e._v(" 清空 ")]),a("dsf-button",{attrs:{size:"mini"},on:{click:e.addRow}},[e._v(" 新增 ")])],1)],2)],1)],1),a("div",{staticClass:"right"},[a("ContextTree",{on:{change:e.change}})],1)]),"8"==e.superType?a("div",{staticClass:"super"},[a("EventSetting",{ref:"jobEditor",attrs:{language:e.language,code:e.code}})],1):e._e()])])},l=[],i={name:"LeaveSend",props:{value:{type:Object,default:function(){return{}}}},data:function(){return{restful_url:"",content:"",superType:"7",language:"SQL",code:"",selectRow:null,data:[],options:[{value:0,label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"}]}},created:function(){this.content=this.value},mounted:function(){},methods:{getContent:function(){return this.content},addRow:function(){this.data.push({name:"",type:0,value:"",edit:!1})},deleteRow:function(e){this.data.splice(e,1)},change:function(e){},clearAll:function(){this.data=[]},handleChange:function(e){this.data.forEach((function(e){e.edit=!1})),e.edit=!0}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content dsf-link-set"},[a("div",{staticClass:"ds-tree-box fl-box"},[a("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectFlow=t}}},[a("template",{slot:"search"},[a("DsfButton",{staticClass:"small chooseForm",attrs:{disabled:e.disabled},on:{click:function(t){return e.chooseFlow()}}},[e._v(" 选择流程 ")])],1),e.flowData&&e.flowData[0]&&e.flowData[0].path?a("i",{staticClass:"iconfont icon-edit right",attrs:{slot:"icon"},on:{click:e.openFlow},slot:"icon"}):e._e()],2)],1),a("div",{staticClass:"fr-box"},[a("div",{staticClass:"top"},[a("label",{staticClass:"form-label"},[e._v("表单名称：")]),a("div",{staticClass:"input-inline",attrs:{title:e.curNode&&e.curNode.pageTitle}},[e._v(" "+e._s(e.curNode&&e.curNode.pageTitle||"暂无")+" ")]),a("DsfButton",{staticClass:"small chooseForm",attrs:{disabled:e.disabled},on:{click:function(t){return e.chooseForm()}}},[e._v(" 选择表单 ")]),a("DsfButton",{staticClass:"small applyTo",attrs:{disabled:e.disabled},on:{click:function(t){return e.applyTo()}}},[e._v(" 应用于 ")])],1),a("el-tabs",{staticClass:"tabs",model:{value:e.selectTab,callback:function(t){e.selectTab=t},expression:"selectTab"}},[a("el-tab-pane",{staticClass:"pa",staticStyle:{height:"440px"},attrs:{label:"元素控制",name:"0"}},["0"==e.selectTab?a("SelectTable",{attrs:{data:e.curNode&&e.curNode.ctrls||[],columns:e.eleColumns,height:"100%"}}):e._e()],1),e.curNode&&e.curNode.ccNode?e._e():a("el-tab-pane",{staticStyle:{height:"440px"},attrs:{label:"操作控制",name:"1"}},["1"==e.selectTab?a("SelectTable",{attrs:{data:e.curNode&&e.curNode.btns||[],columns:e.btnsColumns,height:"100%"}}):e._e()],1)],1)],1)])},l=[],i=a(2),s=a.n(i),r=a(4),o=a.n(r),c=a(1),u=a.n(c);function d(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=f(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(r)throw i}}}}function f(e,t){if(e){if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var h={name:"LinkSet",mixins:[$mixins.propertyDialogSetting],data:function(){return{searchKey:"",flowData:[],selectFlow:null,checked:[],sID:"",curNode:null,selectTab:0,tempFlow:null,data:[],default:null,disabled:!1,eleColumns:[{prop:"labelCaption",label:"控件名称"},{prop:"readOnly",label:"只读",width:100,isSelect:!0,readOnlyAll:!1,isIndeterminate:!1},{prop:"hidden",label:"隐藏",width:100,isSelect:!0,hiddenAll:!1,isIndeterminate:!1},{prop:"required",label:"必填",width:100,isSelect:!0,requiredAll:!1,isIndeterminate:!1}],btnsColumns:[{prop:"text",label:"按钮名称"},{prop:"visible",label:"可用",width:100,isSelect:!0,visibleAll:!1,isIndeterminate:!1}],cacheFormData:{},isError:!1}},watch:{selectFlow:function(e){if(e){var t=e.ctrls.length,a=e.btns.length,n=e.ctrls.filter((function(e){return e.readOnly})).length,l=e.ctrls.filter((function(e){return e.hidden})).length,i=e.ctrls.filter((function(e){return e.required})).length,s=e.btns.filter((function(e){return e.visible})).length;this.eleColumns[1].readOnlyAll=n===t,this.eleColumns[1].isIndeterminate=n>0&&n<t,this.eleColumns[2].hiddenAll=l===t,this.eleColumns[2].isIndeterminate=l>0&&l<t,this.eleColumns[3].requiredAll=i===t,this.eleColumns[3].isIndeterminate=i>0&&i<t,this.btnsColumns[1].visibleAll=s===a,this.curNode=e,e.ccNode&&(this.selectTab="0")}}},created:function(){var e=this;return o()(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.sID=(null===(a=e.owner.chooseFlow)||void 0===a?void 0:a.dsfa_rm_id)||"",t.next=3,e.getExWF();case 3:e.data=t.sent,e.initFlow();case 5:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{openFlow:function(){var e=this.flowData[0].path,t=this.flowData[0].WFName,a=this.flowData[0].id,n=e.split("/"),l=n.shift(),i=n.pop(),s=n.join(".");this.$openWindow(!0,"./designer.html#/flow?id="+a+"&path="+e+"&B="+l+"&M="+s+"&pname="+i+"&title="+t)},yes:function(){var e=this;if(0===this.flowData.length)return this.data;this.tempFlow&&(this.owner.chooseFlow=this.tempFlow);var t=dsf.mix(!0,this.flowData[0],{IsMobile:this.designer.mobile});return t.children.forEach((function(t){var a;t.ctrls&&t.ctrls.length>0&&t.ctrls.forEach((function(t){var a;if(t.visible=!t.hidden,null!==e&&void 0!==e&&null!==(a=e.default)&&void 0!==a&&a.ctrls){var n=_.find(e.default.ctrls,(function(e){return e.id==t.id}));if(n){var l=dsf.mix({},t,{id:n.id,metadataCode:n.metadataCode});dsf.mix(t,n,l)}}delete t.hidden})),(null===t||void 0===t||null===(a=t.btns)||void 0===a?void 0:a.length)>0&&t.btns.forEach((function(e){t.ccNode&&(e.visible=!1)}))})),t.NodeList=t.children,delete t.children,this.$http.post("wfk/saveExWF",{sData:JSON.stringify(t)}).then((function(e){if(2e4==e.data.state)return[t];dsf.layer.message(e.message||"环节设置异常",!1)}))},validate:function(){return!0},getExWF:function(){return this.$http.get("wfk/getExWF",{sID:this.sID,IsMobile:this.designer.mobile}).done((function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.NodeList?[e.data]:[]}))},initFlow:function(){var e=this;this.initDefault(),this.default?(this.isError=!1,this.$http.get("wfk/getWFNodeList",{sID:this.sID}).done(function(){var t=o()(u.a.mark((function t(a){var n,l,i,r,o,c,f,p,h,m,b;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a.success&&(l=e.formatData(a.data,void 0)),!((null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)>0)){t.next=37;break}if(r=dsf.mix(!0,[],e.data),null===(i=l)||void 0===i||null===(i=i.NodeList)||void 0===i||!i.length){t.next=35;break}c=d(l.NodeList),t.prev=5,c.s();case 7:if((f=c.n()).done){t.next=27;break}p=f.value,h=d(r[0].NodeList),t.prev=10,b=u.a.mark((function t(){var a,n,l,i,r,c,d;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=m.value,a.id!==p.id){t.next=20;break}if(i=a.NameSpace,r=a.code,i===e.default.NameSpace){t.next=13;break}return t.next=7,e.getFormData(i,r);case 7:o=t.sent,p.NameSpace=i,p.code=a.code,p.pageTitle=a.pageTitle,t.next=14;break;case 13:o=_.cloneDeep(e.default);case 14:c=_.cloneDeep((null===(n=o)||void 0===n?void 0:n.ctrls)||[]),d=_.cloneDeep((null===(l=o)||void 0===l?void 0:l.btns)||[]),null===c||void 0===c||c.forEach((function(e){var t;null===(t=a.ctrls)||void 0===t||t.forEach((function(t){t.id===e.id&&(e.visible=t.visible,e.readOnly=t.readOnly,e.required=t.required)})),e.hidden=!e.visible,"DsfDisposeIdea"!==e.ctrlName&&"DsfMobileDisposeIdea"!==e.ctrlName||201!=a.NodeType&&299!=a.NodeType||(e.hidden=!0)})),null===d||void 0===d||d.forEach((function(e){var t;null===(t=a.btns)||void 0===t||t.forEach((function(t){t.id===e.id&&(e.visible=t.visible)})),e.visible=!!e.visible})),p.ctrls=s()(c),p.btns=s()(d);case 20:case"end":return t.stop()}}),t)})),h.s();case 13:if((m=h.n()).done){t.next=17;break}return t.delegateYield(b(),"t0",15);case 15:t.next=13;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t["catch"](10),h.e(t.t1);case 22:return t.prev=22,h.f(),t.finish(22);case 25:t.next=7;break;case 27:t.next=32;break;case 29:t.prev=29,t.t2=t["catch"](5),c.e(t.t2);case 32:return t.prev=32,c.f(),t.finish(32);case 35:l.children=l.NodeList,e.selectFlow=l.NodeList[0];case 37:l&&l.children&&(e.flowData=[l],e.checked=[l.children[0].id],e.curNode=l.children[0]);case 38:case"end":return t.stop()}}),t,null,[[5,29,32,35],[10,19,22,25]])})));return function(e){return t.apply(this,arguments)}}())):this.disabled=!0},initDefault:function(){var e,t=this,a=[],n=[],l=!0,i=this.owner.$$getComponent().$page;dsf.recursionComponentProps(i.$props,(function(i){if(i.isBlockControl&&a.push({id:i.designId,label:i.caption,labelCaption:"".concat(i.caption),caption:i.caption,readOnly:!1,hidden:!1,visible:!0,required:!1}),i.isFormControl&&"wfinfo"!==i.caption&&!i.forceHidden){if(!i.metadata_fullcode)return l&&dsf.layer.message("请先保存表单后再操作",!1),void(l=!1);a.push({id:i.designId,label:i.label,labelCaption:"".concat(i.label,"(").concat(i.caption,")"),caption:i.caption,ctrlName:i.ctrlName,readOnly:i.readOnly,hidden:!i.visible,visible:i.visible,required:i.required,metadataCode:i.metadata_fullcode})}var s;("page"===i.caption&&(e=i.title),!i.ctrlName||"DsfButtonBar"!==i.ctrlName&&"DsfMobileButtonBar"!==i.ctrlName)||(null===i||void 0===i||null===(s=i.buttons)||void 0===s||s.forEach((function(e){var t;e.visible=!0,null===e||void 0===e||null===(t=e.children)||void 0===t||t.forEach((function(e){e.visible=!0})),n.push(e)})),t.btnsColumns[1].visibleAll=!0)}));var s=dsf.url.queryString("B"),r=dsf.url.queryString("M"),o=dsf.url.queryString("pname"),c="".concat(s,".").concat(r,".").concat(o);l&&(this.default={pageTitle:e,ctrls:a,btns:n,NameSpace:c,code:o})},formatData:function(e,t,a){if(e.label=e.WFName||e.NodeName,e.id=e.WFID||e.NodeID,a){var n=_.cloneDeep(this.default);e.pageTitle=n&&n.pageTitle||"",e.ctrls=this.getCtrls(e,_.cloneDeep(n&&n.ctrls)||[]),e.btns=n&&n.btns||[],e.NameSpace=n&&n.NameSpace||"",e.code=n&&n.code||""}if(void 0===t&&(e.disabled=e.NodeType===t),e.children=e.NodeList,e.children)for(var l=0;l<e.children.length;l++)this.formatData(e.children[l],t,!0);return e},getCtrls:function(e,t){return 201!=e.NodeType&&299!=e.NodeType||null===t||void 0===t||t.forEach((function(e){"DsfDisposeIdea"!==e.ctrlName&&"DsfMobileDisposeIdea"!==e.ctrlName||(e.hidden=!0)})),t},chooseForm:function(e){var t=this,a={type:"form"};dsf.layer.pc.openDialog({title:"选择表单",width:"400px",height:"400px",overflow:"hidden",content:"ChooseForm",params:a,btns:[{text:"确定",handler:function(){var e=o()(u.a.mark((function e(a){var n,l;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.validate()){e.next=7;break}return n=a.yes(),e.next=4,t.getFormData(n.ID,n.code,n.type_value);case 4:return l=e.sent,Object.assign(t.curNode,l),e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));function a(t){return e.apply(this,arguments)}return a}()},{text:"取消"}]})},getFormData:function(e,t,a){var n,l=this;if(this.cacheFormData[e])return this.cacheFormData[e];var i=e;i=i.replace("."+t,"");var s=13==a||0==(null===t||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"mobile-"))?"mobile":"pc";return s+="/views/".concat(i,"/").concat(t,".layout.html"),this.$http.get(s,null,{responseType:"text"},dsf.config.serverCreateHtmlDir).then((function(a){if(a.data){var n=$("<div>"+a.data+"</div>"),i=n.children("script[id='layout']").html()||"",s=new Function(["var layout="+(i||"null")+";","return layout;"].join("\n")),r=s();return l.cacheFormData[e]={pageTitle:r.title,ctrls:l.getFormctrls(r),btns:l.getBtns(r),NameSpace:e,code:t},l.cacheFormData[e]}})).catch((function(e){l.isError||(l.isError=!0,dsf.layer.message("该流程绑定的表单已经被删除，请重新选择！",!1))}))},applyTo:function(){var e=this,t={data:this.flowData};dsf.layer.pc.openDialog({title:"应用于",width:"400px",height:"400px",overflow:"hidden",content:"ApplyTo",params:t,btns:[{text:"确定",handler:function(t){var a=t.yes();return a.forEach((function(t){t.NodeID&&e.flowData.forEach((function(a){a.children.forEach((function(a){t.id===a.id&&(a.pageTitle=e.curNode.pageTitle,a.ctrls=dsf.mix(!0,[],e.curNode.ctrls),a.btns=dsf.mix(!0,[],e.curNode.btns),a.NameSpace=e.curNode.NameSpace,a.code=e.curNode.code)}))}))})),!0}},{text:"取消"}]})},getFormctrls:function(e){var t,a=this,n=[],l=e.isBlockControl;return(e.isBlockControl||e.isFormControl)&&"wfinfo"!==e.caption&&n.push({id:e.designId,label:e.label,labelCaption:l?"".concat(e.caption):"".concat(e.label,"(").concat(e.caption,")"),caption:e.caption,readOnly:!l&&e.readOnly,hidden:!l&&!e.visible,visible:!!l||e.visible,required:!l&&e.required}),null===e||void 0===e||null===(t=e.slots)||void 0===t||t.forEach((function(e){e.controls.forEach((function(e){var t=a.getFormctrls(e);n.push(t)}))})),n.flat(1/0)},getBtns:function(e){var t,a=this,n=[];!e.ctrlName||"DsfButtonBar"!==e.ctrlName&&"DsfMobileButtonBar"!==e.ctrlName?e.slots.forEach((function(e){e.controls.forEach((function(e){var t=a.getBtns(e);n.push(t)}))})):null===(t=e.buttons)||void 0===t||t.forEach((function(e){var t;e.visible=!0,null===e||void 0===e||null===(t=e.children)||void 0===t||t.forEach((function(e){e.visible=!0})),n.push(e)}));return n.flat(1/0)},chooseFlow:function(){var e=this,t={currentData:this.tempFlow||this.owner.chooseFlow};dsf.layer.pc.openDialog({title:"流程设置",width:"400px",height:"400px",overflow:"hidden",content:"ChooseFlow",params:t,btns:[{text:"确定",handler:function(t){if(t.validate()){var a=t.yes();return e.tempFlow=a,e.sID=a.dsfa_rm_id,e.data=[],e.initFlow(),!0}return!1}},{text:"取消"}]})}}},m=h,b=a(0),v=Object(b["a"])(m,n,l,!1,null,null,null);t["default"]=v.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter"},[a("div",{staticClass:"parameter"},[a("el-radio-group",{staticClass:"right",model:{value:e.Parameter.Type,callback:function(t){e.$set(e.Parameter,"Type",t)},expression:"Parameter.Type"}},[a("el-radio",{attrs:{label:1}},[e._v("指定参数")]),a("el-radio",{attrs:{label:2}},[e._v("高级模式")])],1),a("el-radio-group",{staticClass:"left",model:{value:e.Parameter.MultiType,callback:function(t){e.$set(e.Parameter,"MultiType",t)},expression:"Parameter.MultiType"}},[a("el-radio",{attrs:{label:1}},[e._v("字符串")]),a("el-radio",{attrs:{label:2}},[e._v('","分割的字符串数组')]),a("el-radio",{attrs:{label:3}},[e._v("JSON数组")])],1)],1),a("div",{staticClass:"editor"},[a("EventSetting",{ref:"event",attrs:{code:e.Parameter.Content,language:e.language}})],1)])},l=[],i=a(3),s=a.n(i);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"Parameter",props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"}},data:function(){return{Parameter:{Type:1,MultiType:2,Content:""}}},created:function(){this.Parameter=o(o({},this.Parameter),this.value)},mounted:function(){},methods:{getContent:function(){return this.Parameter.Content=this.$refs.event.getContent(),this.Parameter}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"parameter-batch"},[a("div",{staticClass:"parameter-box"},[a("div",{staticClass:"parameter-header"},[a("el-button",{staticClass:"ds-button plain",attrs:{size:"small"},on:{click:e.addParameter}},[e._v(" 新增参数 ")])],1),a("SelectTable",{attrs:{data:e.paramInfo,columns:e.paramsColumns,height:"calc(100% - 70px)"},on:{deleteRow:e.deleteRow}})],1),a("div",{staticClass:"table-box"},[a("div",{staticClass:"parameter-header"},[a("el-button",{staticClass:"ds-button plain",attrs:{size:"small"},on:{click:e.addData}},[e._v(" 新增数据 ")])],1),a("SelectTable",{attrs:{data:e.data,columns:e.dataColumns,height:"calc(100% - 70px)"}})],1)])},l=[],i={name:"ParameterBatch",mixins:[$mixins.propertyDialogSetting],props:{value:{type:Object,default:function(){return{}}}},data:function(){return{paramInfo:[],paramsColumns:[{prop:"key",label:"参数名称",fieldType:"input"},{prop:"type",label:"参数类型",width:"140",options:[]},{label:"操作",width:"94",operate:!0}],operate:[{label:"操作",width:"94",operate:!0}],columns:[],data:[]}},watch:{paramInfo:{handler:function(e){this.reset(e)},deep:!0}},created:function(){this.init()},computed:{dataColumns:function(){var e;return(null===(e=this.columns)||void 0===e?void 0:e.length)>0?this.columns.concat(this.operate):[]}},methods:{getContent:function(){if(!this.validate())return!1;if(0===this.paramInfo.length&&0===this.data.length)return{};var e={paramInfo:[],data:[]};return e.paramInfo=this.paramInfo,e.data=this.data,e},validate:function(){var e,t,a=!1;return this.paramInfo.forEach((function(e){e.key||(a=!0)})),a?(dsf.layer.message("参数名称不能为空",!1),!1):!((null===(e=this.paramInfo)||void 0===e?void 0:e.length)>0&&0==(null===(t=this.data)||void 0===t?void 0:t.length))||(dsf.layer.message("数据不能为空",!1),!1)},init:function(){var e=this;dsf.isEmptyObject(this.value)||(this.paramInfo=this.value.paramInfo,this.data=this.value.data);var t="dsfa.dict.wfexecuteparamtype",a={dicts:[{key:t,dictId:"2490e5d80b66465e9b9bc22d3e2abe15"}]};this.$webAPI.getBatchDict(a).done((function(a){var n,l=a.data,i=null===(n=l[t])||void 0===n?void 0:n.map((function(e){return e.label=e.text,e}));e.paramsColumns[1].options=i}))},addParameter:function(){this.paramInfo.push({key:"key"+(this.paramInfo.length+1),type:"string"})},reset:function(e){var t=this,a=[];e.forEach((function(e){a.push({prop:e.key,label:e.key,type:e.type,fieldType:"input"}),t.data.forEach((function(a){dsf.isUnDef(a[e.key])&&t.$set(a,e.key,"")}))}));var n=a.map((function(e){return e.prop}));this.data.forEach((function(e){Object.keys(e).forEach((function(t){-1==n.findIndex((function(e){return e==t}))&&delete e[t]}))})),this.columns=a},addData:function(){var e={};this.columns.forEach((function(t){e[t.prop]=""})),this.data.push(e)},deleteRow:function(e){this.data.forEach((function(t){delete t[e.key]}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-real flow-parameter-new"},[a("el-tabs",{model:{value:e.Parameter.paramMode,callback:function(t){e.$set(e.Parameter,"paramMode",t)},expression:"Parameter.paramMode"}},[a("el-tab-pane",{attrs:{label:"普通模式",name:"0",lazy:""}},[a("div",{staticClass:"actuator ds-hide"},[a("label",{staticStyle:{"margin-right":"10px"}},[e._v("执行目标：")]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1),a("div",{staticClass:"actuator shell"},[a("label",{staticStyle:{"margin-right":"10px"}},[e._v("shell脚本：")]),a("MonacoEditor",{ref:"editor",attrs:{language:"shell"},on:{mounted:e.editorLoaded}})],1),a("div",{staticClass:"add-param",staticStyle:{height:"312px",position:"relative"}},[a("bat-add-param",{ref:"batAddParam",attrs:{value:e.batchParameters}})],1)]),a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{lazy:"",label:"高级模式",name:"1"}},[a("Parameter",{ref:"parameter",attrs:{value:e.value}}),a("div",{staticClass:"actuator"},[e.fullClassName?a("el-radio-group",{staticClass:"act",model:{value:e.Parameter.actuatorType,callback:function(t){e.$set(e.Parameter,"actuatorType",t)},expression:"Parameter.actuatorType"}},[a("el-radio",{attrs:{label:0}},[e._v("默认执行器")]),a("el-radio",{attrs:{label:1}},[e._v("自定义执行器")])],1):e._e(),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",staticStyle:{width:"300px"},attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1)],1)],1)],1)},l=[],i=a(3),s=a.n(i),r=a(76);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"ParameterExecShell",components:{BatAddParam:r["default"]},props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"},type:{type:String,default:"shell"},url:{type:String,default:""},fullClassName:{type:String,default:"com.dsfa.platform.smart.work.executor.robot.shell.ShellExecutor"}},data:function(){return{Parameter:{Type:1,ID:"",MultiType:2,Content:"",actuatorType:0,fullClassName:"",paramMode:"0",execScriptContent:""},batchParameters:{},selectTask:{}}},created:function(){this.Parameter=c(c({},this.Parameter),this.value),0==this.Parameter.actuatorType&&!this.Parameter.fullClassName&&this.fullClassName&&(this.Parameter.fullClassName=this.fullClassName),this.Parameter.paramMode+="",this.init()},methods:{select:function(e){var t=this;if(this.selectTask=c({},e),!dsf.isDef(this.selectTask.count)&&e){var a={scriptId:e.id,curWFId:dsf.url.queryString("id")};this.$http.post("/intellect/node/ex/config/findWFListByScriptId",a).done((function(e){e.success&&t.$set(t.selectTask,"count",e.data)}))}},editorLoaded:function(){var e=this.Parameter.execScriptContent;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e;if("0"==this.Parameter.paramMode&&this.Parameter.Content&&"_params"!==this.Parameter.Content){e=this.Parameter.Content.split(",");var t=[],a=[];e.forEach((function(e){var n,l=dsf.base64.decode(e);l=JSON.parse(l),(null===(n=l.paramInfo)||void 0===n?void 0:n.length)>0&&(a.push(l.data),t=l.paramInfo)})),t.length>0&&(this.batchParameters.paramInfo=t,this.batchParameters.data=a)}},getContent:function(){var e,t=this,a=null===(e=this.$refs)||void 0===e||null===(e=e.tree)||void 0===e?void 0:e.base,n=1==this.Parameter.actuatorType?this.Parameter.fullClassName:this.fullClassName;if(this.Parameter.execScriptContent=this.$refs.editor.getContent(),"1"==this.Parameter.paramMode){var l=this.$refs.parameter.getContent();return Object.assign(l,{actuatorType:this.Parameter.actuatorType,paramMode:Number(this.Parameter.paramMode),fullClassName:n}),null!==a&&void 0!==a&&a.id&&(l.ID=a.id),l}if(null!==a&&void 0!==a&&a.id&&(this.Parameter.ID=a.id),this.Parameter.fullClassName=n,dsf.isEmptyObject(this.batchParameters)){var i={_content:{fullClassName:n}};return i=JSON.stringify(i),this.Parameter.Content=dsf.base64.encode(i),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}var s=[];return this.batchParameters.data.forEach((function(e,a){var l={_content:{fullClassName:n},_order:a,data:e,paramInfo:t.batchParameters.paramInfo};l=JSON.stringify(l),s.push(dsf.base64.encode(l))})),this.Parameter.Content=s.join(","),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})},validate:function(){var e=this.$refs.batAddParam.getContent();if(e)return this.batchParameters=e,"1"==this.Parameter.paramMode||(!(1===this.Parameter.actuatorType&&!this.Parameter.fullClassName)||(dsf.layer.message("fullClassName不能为空",!1),!1))},setParameter:function(){var e=this;this.$openDialog({title:"批量参数",width:"1200px",height:"600px",overflow:"hidden",content:"ParameterBatch",params:{value:this.batchParameters},btns:[{text:"确定",handler:function(t){var a=t.getContent();return!!a&&(e.batchParameters=a,!0)}},{text:"取消"}]})}}},d=u,f=a(0),p=Object(f["a"])(d,n,l,!1,null,null,null);t["default"]=p.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-real flow-parameter-new"},[a("el-tabs",{model:{value:e.Parameter.paramMode,callback:function(t){e.$set(e.Parameter,"paramMode",t)},expression:"Parameter.paramMode"}},[a("el-tab-pane",{class:{full:e.url},attrs:{label:e.tab1Title,name:"0",lazy:""}},[e.url?[e.viewPartProps.loaded?a("DsfViewPart",e._b({ref:"viewPart",attrs:{path:e.url,parameter:e.Parameter}},"DsfViewPart",e.viewPartProps,!1)):e._e()]:[a("div",{staticClass:"actuator ds-hide"},[a("label",{staticStyle:{"margin-right":"10px"}},[e._v("执行目标：")]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1),a("div",{staticClass:"actuator sql"},[a("DsfDataChoice",e._b({ref:"dataOrigin",model:{value:e.Parameter.ds,callback:function(t){e.$set(e.Parameter,"ds",t)},expression:"Parameter.ds"}},"DsfDataChoice",e.dataChoiceAttr,!1)),a("dsf-button",{on:{click:e.openDialog}},[e._v("新增数据源")])],1),a("div",{staticClass:"add-param",staticStyle:{height:"460px",position:"relative"}},[a("bat-add-param",{ref:"batAddParam",attrs:{value:e.batchParameters}})],1)]],2),a("el-tab-pane",{staticStyle:{height:"calc(100% + 60px)"},attrs:{lazy:"",label:"高级模式",name:"1"}},[a("Parameter",{ref:"parameter",attrs:{value:e.value}})],1)],1)],1)},l=[],i=a(3),s=a.n(i),r=a(76);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"ParameterExecSql",components:{BatAddParam:r["default"]},props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"},type:{type:String,default:"sql"},url:{type:String,default:""},fullClassName:{type:String,default:"com.dsfa.platform.smart.work.executor.robot.sql.SqlExecutor"}},data:function(){return{Parameter:{Type:1,ID:"",MultiType:2,Content:"",actuatorType:0,fullClassName:"",paramMode:"0",ds:[]},batchParameters:{},executeScriptText:"",selectTask:{},dataChoiceAttr:{label:"数据源配置",dialogUrl:"ParameterExecSqlDs",dialogTitle:"选择数据源",enabledLabelWidth:!0,labelWidth:80,isDesign:!0,dialogHeight:"550px",value:[]},tab1Title:"普通模式",viewPartProps:{showModel:"full",independent:!0,needInheritParams:!1,loaded:!1}}},created:function(){var e;(this.Parameter=c(c({},this.Parameter),this.value),0==this.Parameter.actuatorType&&!this.Parameter.fullClassName&&this.fullClassName&&(this.Parameter.fullClassName=this.fullClassName),this.Parameter.paramMode+="",this.init(),this.url)&&(this.tab1Title=(null===(e=dsf.url.parseRouter(this.url))||void 0===e||null===(e=e.router)||void 0===e||null===(e=e.query)||void 0===e?void 0:e.tabTitle)||"普通模式",this.viewPartProps.loaded=!0)},methods:{select:function(e){var t=this;if(this.selectTask=c({},e),!dsf.isDef(this.selectTask.count)&&e){var a={scriptId:e.id,curWFId:dsf.url.queryString("id")};this.$http.post("/intellect/node/ex/config/findWFListByScriptId",a).done((function(e){e.success&&t.$set(t.selectTask,"count",e.data)}))}},editorLoaded:function(){var e=this.executeScriptText;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e,t=this;if("0"==this.Parameter.paramMode&&this.Parameter.Content&&"_params"!==this.Parameter.Content){e=this.Parameter.Content.split(",");var a=[],n=[];e.forEach((function(e){var l,i,s=dsf.base64.decode(e);s=JSON.parse(s),t.executeScriptText=null===(l=s)||void 0===l||null===(l=l._content)||void 0===l?void 0:l.executeScriptText,(null===(i=s.paramInfo)||void 0===i?void 0:i.length)>0&&(n.push(s.data),a=s.paramInfo)})),a.length>0&&(this.batchParameters.paramInfo=a,this.batchParameters.data=n)}},getContent:function(){var e,t,a=this,n=null===(e=this.$refs)||void 0===e||null===(e=e.tree)||void 0===e?void 0:e.base,l=1==this.Parameter.actuatorType?this.Parameter.fullClassName:this.fullClassName;if("1"==this.Parameter.paramMode){var i=this.$refs.parameter.getContent();return Object.assign(i,{actuatorType:this.Parameter.actuatorType,paramMode:Number(this.Parameter.paramMode),fullClassName:l}),null!==n&&void 0!==n&&n.id&&(i.ID=n.id),i}if(this.url)return c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)});if(this.Parameter.ID=(null===n||void 0===n?void 0:n.id)||(null===(t=this.Parameter)||void 0===t||null===(t=t.ds)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"",this.Parameter.fullClassName=l,dsf.isEmptyObject(this.batchParameters)){var s={_content:{fullClassName:l,id:this.Parameter.ID}};return s=JSON.stringify(s),this.Parameter.Content=dsf.base64.encode(s),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}var r=[];return this.batchParameters.data.forEach((function(e,t){var n={_content:{fullClassName:l,id:a.Parameter.ID},_order:t,data:e,paramInfo:a.batchParameters.paramInfo};n=JSON.stringify(n),r.push(dsf.base64.encode(n))})),this.Parameter.Content=r.join(","),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})},validate:function(){var e,t;if(this.url&&"0"==this.Parameter.paramMode){var a,n,l=(null===(a=this.$refs.viewPart.$refs)||void 0===a||null===(a=a.view)||void 0===a||null===(n=a.yes)||void 0===n?void 0:n.call(a))||{};if(dsf.isEmptyObject(l))return dsf.layer.message("自定义页面中缺失名为yes的返回函数",!1),!1;if(dsf.isObject(l)){if(!l.ID)return dsf.layer.message("返回执行对象ID不能为空",!1),!1;l.fullClassName||(l["fullClassName"]=this.fullClassName);var i={_content:{fullClassName:l.fullClassName,id:l.ID}};return i=JSON.stringify(i),l.Content=dsf.base64.encode(i),this.Parameter.paramMode,this.Parameter=l,!0}return dsf.layer.message("请返回执行对象",!1),!1}var s=null===(e=this.$refs)||void 0===e||null===(e=e.batAddParam)||void 0===e||null===(t=e.getContent)||void 0===t?void 0:t.call(e);if(s)return this.batchParameters=s,"1"==this.Parameter.paramMode||(!(1===this.Parameter.actuatorType&&!this.Parameter.fullClassName)||(dsf.layer.message("fullClassName不能为空",!1),!1))},setParameter:function(){var e=this;this.$openDialog({title:"批量参数",width:"1200px",height:"600px",overflow:"hidden",content:"ParameterBatch",params:{value:this.batchParameters},btns:[{text:"确定",handler:function(t){var a=t.getContent();return!!a&&(e.batchParameters=a,!0)}},{text:"取消"}]})},openDialog:function(){this.$openDialog({title:"新增数据源",width:"1000px",height:"650px",content:"ParameterExecSqlAdd",customClass:"flow-parameter-exec-add-dialog",btns:[]})}}},d=u,f=a(0),p=Object(f["a"])(d,n,l,!1,null,null,null);t["default"]=p.exports},function(e,t,a){"use strict";a.r(t),a.d(t,"setObjAttr",(function(){return f}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-exec-add"},[a("DsfStepsNav",e._b({ref:"nav",scopedSlots:e._u([{key:"default0",fn:function(){return[a("meta-data-select-item",e._b({ref:"select",scopedSlots:e._u([{key:"navTreeName",fn:function(t){var n=t.data;return[n.$editing?[a("input",{directives:[{name:"model",rawName:"v-model",value:n.$label,expression:"data.$label"}],ref:n.$key+"input",attrs:{placeholder:"请填写目录名称",autofocus:""},domProps:{value:n.$label},on:{change:function(t){return e.editRow(n)},blur:function(t){return e.blurRow(n)},input:function(t){t.target.composing||e.$set(n,"$label",t.target.value)}}})]:[a("span",{staticClass:"name"},[e._v(e._s(n.$label))]),a("span",{staticClass:"c_num"},[e._v("("+e._s(n.$$children?n.$$children.length:0)+")")])]]}},{key:"navTreeBtn",fn:function(t){var n=t.data,l=t.node;return[e.addNodeParent?e._e():a("div",{staticClass:"btns"},[a("dsf-button",{attrs:{"btn-style":"4",text:"添加目录",icon:"icon_tianjia",title:"添加目录"},on:{click:function(t){return t.stopPropagation(),e.addHandlerFake(n,l)}}}),a("dsf-button",{attrs:{"btn-style":"4",text:"编辑",size:"small",icon:"edit",title:"编辑"},on:{click:function(t){return t.stopPropagation(),e.editHandler(n,l)}}}),"1"!=n.treeinfo_level?a("dsf-button",{attrs:{"btn-style":"4",text:"删除",size:"small",icon:"jian",title:"删除"},on:{click:function(t){return t.stopPropagation(),e.deleteHandler(l)}}}):e._e()],1)]}}])},"meta-data-select-item",e.selectProps,!1)),a("dsf-button",{on:{click:function(t){return e.nextStep("2")}}},[e._v("下一步")])]},proxy:!0},{key:"default1",fn:function(){return[a("DsfViewPart",e._b({ref:"viewPart1",staticClass:"sqlViewPart"},"DsfViewPart",e.viewPart1Props,!1)),a("dsf-button",{on:{click:function(t){return e.nextStep("3")}}},[e._v("下一步")])]},proxy:!0},{key:"default2",fn:function(){return[a("DsfViewPart",e._b({ref:"viewPart2"},"DsfViewPart",e.viewPart2Props,!1))]},proxy:!0}])},"DsfStepsNav",e.navProps,!1))],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c=a(41),u={name:"ParameterExecSqlAdd",components:{MetaDataSelectItem:c["default"]},data:function(){return{selectProps:{selectModel:"explorer",url:"rm/list/ds?clearEmptyDir=false",multiple:!1,nameKey:"_name",disabledViewFn:this.viewDisabledFn,isFolder:this.isFolderFn},navProps:{alignCenter:!0,lazy:!0,items:[{text:"选择目录",value:"1"},{text:"新建数据源",value:"2"},{text:"编辑数据源",value:"3"}]},viewPart1Props:{showModel:"full",path:"#/pc/dsfa/rm/rmedit?isFlow=1",independent:!0,needInheritParams:!1},viewPart2Props:{showModel:"full",path:"#/pc/dsfa/dbsource/edit?isFlow=1",independent:!0,needInheritParams:!1},editingData:null,addNodeParent:null}},methods:{isFolderFn:function(e){return"0"==e.type_value},viewDisabledFn:function(e){return"0"!=e.type_value||!e.path},nextStep:function(e){var t=this;if("2"==e){var a=this.$refs.select.yes();a?(this.viewPart1Props.path="#/pc/dsfa/rm/rmedit?isFlow=1&type=8&pid="+a._id+"&ppath="+a.path,this.$refs.nav.initValue(e)):dsf.layer.message("请先选择目录！",!1)}else this.$refs.viewPart1.$refs.view.formSave({isSilent:!0,savedClose:!1}).then((function(a){a.success&&(t.viewPart2Props.path="#/pc/dsfa/dbsource/edit?isFlow=1&id="+a.data._id,t.$refs.nav.initValue(e))}))},save:function(){this.$refs.viewPart1.$refs.view.formSave({savedClose:!0})},addHandlerFake:function(e,t){var a=this;return s()(o.a.mark((function n(){var l,i,s,r,c,u,d,p;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.expand(),s={},f(s,"$children",void 0),f(s,"$key",dsf.uuid(32)),f(s,"$label",s._name),f(s,"$disabled",!1),r=e?e.$path:[],f(s,"$path",r.concat(s)),f(s,"$isFolder",!0),f(s,"$lazy",!1),f(s,"$childNum",0),f(s,"$viewDisabled",!1),f(s,"$isImageList",!1),f(s,"$data",s),c=Object.assign({},s,{$label:s.$label,$disabled:s.$disabled,$$children:s.$children,_isLeaf:!_.find(s.$children,(function(e){return e.$isFolder}))}),f(c,"$key",s.$key),f(c,"$childNum",s.$childNum),f(c,"$isFolder",s.$isFolder),f(c,"$path",s.$path),f(c,"$data",s),f(c,"$viewDisabled",s.$viewDisabled),n.next=23,a.editHandler(c,!0,t);case 23:e.$$children||(a.$set(e,"$$children",[]),a.$set(e.$data,"$children",[]),a.$set(e.$data,"children",[])),e.$$children.unshift(c),u=a.$refs.select.$refs.explorer.$refs.nav.$refs.tree,d=(null===t||void 0===t||null===(l=t.childNodes)||void 0===l?void 0:l[0])||t,p="append",null!==t&&void 0!==t&&null!==(i=t.childNodes)&&void 0!==i&&i[0]&&(d=t.childNodes[0],p="insertBefore"),u[p](c,d.key),u.$nextTick((function(){var e,t;null===(e=a.$refs)||void 0===e||null===(e=e[c.$key+"input"])||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)}));case 31:case"end":return n.stop()}}),n)})))()},editHandler:function(e,t,a){var n=this;this.removeOldEditData((function(){n.editingData=e,n.$set(e,"$editing",!0),t&&a?n.addNodeParent=a:n.$nextTick((function(){var t,a;null===(t=n.$refs)||void 0===t||null===(t=t[e.$key+"input"])||void 0===t||null===(a=t.focus)||void 0===a||a.call(t)}))}))},addHandlerReal:function(e){var t=this,a=this.addNodeParent.data,n=dsf.layer.loading();this.$http.post("/rm/addDir",{name:e.$label,pID:a.ID,treePid:a._id,pGlobalId:a.treeinfo_globalid,pLevel:a.treeinfo_level,pPath:a.path}).done((function(a){var n=a.success,l=a.data,i=a.message;n&&l._id?(t.editingData=null,t.addNodeParent=null,t.$set(e,"_id",l._id),t.$set(e,"path",l["dsfa_rm.path"]),t.$set(e,"$editing",!1)):dsf.layer.message(i,!1)})).error((function(){dsf.layer.message("新增异常",!1)})).finally((function(){dsf.layer.closeLoading(n)}))},removeOldEditData:function(e){var t=this;if(!this.editingData||this.editingData._id||this.editingData.$label)this.editingData=null,null===e||void 0===e||e();else{var a=this.$refs.select.$refs.explorer.$refs.nav.$refs.tree,n=this.addNodeParent.data||{},l=this.editingData.$key;a.getCurrentKey()==l&&a.setCurrentKey(n.$key),a.$nextTick((function(){var i,s,r=n.$$children||[],o=r.findIndex((function(e){return e.$key===l}));(a.remove(l),d(explorer,l),t.$set(t.editingData,"$editing",!1),o>-1)&&(null===n||void 0===n||null===(i=n.$$children)||void 0===i||null===(s=i.splice)||void 0===s||s.call(i,o,1));t.editingData=null,t.addNodeParent=null,null===e||void 0===e||e()}))}},blurRow:function(e){e&&this.$set(e,"$editing",!1),this.removeOldEditData()},editRow:function(e){var t=this;if(e.$label)if(e._id){var a=dsf.layer.loading();this.editingData=null,this.$http.post("/rm/updateDir",{id:e._id,name:e.$label}).done((function(a){if(a.success){var n=t.$refs.select.$refs.explorer.$refs.nav.$refs.tree.getNode(e.$key).parent.data.$$children,l=n.findIndex((function(t){return t._id===e._id}));t.$set(n[l],"$label",e.$label),n.push({}),n.splice(n.length-1,1)}else dsf.layer.message(a.message,!1)})).error((function(e){dsf.layer.message("删除异常",!1)})).finally((function(){dsf.layer.closeLoading(a)}))}else this.addHandlerReal(e);else e.$label=e.$data._name,this.blurRow(e);this.$set(e,"$editing",!1)},deleteHandler:function(e){var t=this.$refs.select.$refs.explorer,a=t.$refs.nav.$refs.tree,n=e.key;this.editingData&&(this.$set(this.editingData,"$editing",!1),this.editingData=null),a.getCurrentKey()==n&&(a.setCurrentKey((e.parent.data||{})["$key"]),e.parent.data&&t.$refs.nav.currentChange(e.parent.data,e.parent));var l=dsf.layer.loading(),i=e.data._id;this.$http.post("/rm/deleteDir",{id:i,typeKey:0}).done((function(l){if(l.success){var s,r,o=e.parent.data||{},c=o.$$children||[],u=c.findIndex((function(e){return e._id===i}));if(a.remove(n),d(t,n),u>-1)null===o||void 0===o||null===(s=o.$$children)||void 0===s||null===(r=s.splice)||void 0===r||r.call(s,u,1)}else dsf.layer.message(l.message,!1)})).error((function(e){dsf.layer.message("删除异常",!1)})).finally((function(){dsf.layer.closeLoading(l)}))}}};function d(e,t){if(e.historyIndex>-1){var a=e.historyIndex,n=null;_.forEachRight(e.history,(function(l,i){var s;(null===(s=n)||void 0===s?void 0:s.key)==l.key||l.key==t?(e.history.splice(i,1),a>i+1&&a--):n=l})),e.historyIndex=a-1}}function f(e,t,a){return Object.defineProperty(e,t,{configurable:!0,writable:!0,value:a}),e}var p=u,h=a(0),m=Object(h["a"])(p,n,l,!1,null,null,null);t["default"]=m.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("meta-data-select-item",{ref:"select",attrs:{selectModel:"explorer",url:"rm/list/ds",multiple:!1}})},l=[],i=a(41),s={name:"ParameterExecSqlDs",components:{MetaDataSelectItem:i["default"]},mixins:[$mixins.propertyDialogSetting],data:function(){return{content:this}},methods:{yes:function(){var e=this.$refs.select.yes();return e||(dsf.layer.message("请选择数据源",!1),!1)}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-real flow-parameter-new"},[a("el-tabs",{model:{value:e.Parameter.paramMode,callback:function(t){e.$set(e.Parameter,"paramMode",t)},expression:"Parameter.paramMode"}},[a("el-tab-pane",{class:{full:e.url},attrs:{label:e.tab1Title,name:"0",lazy:""}},[e.url?[e.viewPartProps.loaded?a("DsfViewPart",e._b({ref:"viewPart",attrs:{path:e.url,parameter:e.Parameter}},"DsfViewPart",e.viewPartProps,!1)):e._e()]:[a("div",{staticClass:"actuator ds-hide"},[a("label",{staticStyle:{"margin-right":"10px"}},[e._v("执行目标：")]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1),a("div",{staticClass:"actuator sql"},[a("DsfDataChoice",e._b({ref:"dataOrigin",model:{value:e.Parameter.ds,callback:function(t){e.$set(e.Parameter,"ds",t)},expression:"Parameter.ds"}},"DsfDataChoice",e.dataChoiceAttr,!1)),a("dsf-button",{on:{click:e.openDialog}},[e._v("注册RestAPI")])],1),a("div",{staticClass:"add-param",staticStyle:{height:"460px",position:"relative"}},[a("bat-add-param",{ref:"batAddParam",attrs:{value:e.batchParameters}})],1)]],2),a("el-tab-pane",{staticStyle:{height:"calc(100% + 60px)"},attrs:{lazy:"",label:"高级模式",name:"1"}},[a("Parameter",{ref:"parameter",attrs:{value:e.value}})],1)],1)],1)},l=[],i=a(3),s=a.n(i),r=a(76);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"ParameterExecWeb",components:{BatAddParam:r["default"]},props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"},type:{type:String,default:"web"},url:{type:String,default:""},fullClassName:{type:String,default:"com.dsfa.platform.smart.work.executor.robot.web.WebExecutor"}},data:function(){return{Parameter:{Type:1,ID:"",MultiType:2,Content:"",actuatorType:0,fullClassName:"",paramMode:"0",ds:[],timeout:null,retry:0,retryNum:1},batchParameters:{},executeScriptText:"",selectTask:{},dataChoiceAttr:{label:"数据资源",dialogUrl:"#/pc/dsfa/resource/http/select",dialogTitle:"选择RestAPI",enabledLabelWidth:!0,labelWidth:65,dialogHeight:"550px",value:[]},tab1Title:"普通模式",viewPartProps:{showModel:"full",independent:!0,needInheritParams:!1,loaded:!1}}},created:function(){var e;(this.Parameter=c(c({},this.Parameter),this.value),0==this.Parameter.actuatorType&&!this.Parameter.fullClassName&&this.fullClassName&&(this.Parameter.fullClassName=this.fullClassName),this.Parameter.paramMode+="",this.init(),this.url)&&(this.tab1Title=(null===(e=dsf.url.parseRouter(this.url))||void 0===e||null===(e=e.router)||void 0===e||null===(e=e.query)||void 0===e?void 0:e.tabTitle)||"普通模式",this.viewPartProps.loaded=!0)},methods:{select:function(e){var t=this;if(this.selectTask=c({},e),!dsf.isDef(this.selectTask.count)&&e){var a={scriptId:e.id,curWFId:dsf.url.queryString("id")};this.$http.post("/intellect/node/ex/config/findWFListByScriptId",a).done((function(e){e.success&&t.$set(t.selectTask,"count",e.data)}))}},editorLoaded:function(){var e=this.executeScriptText;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e,t=this;if("0"==this.Parameter.paramMode&&this.Parameter.Content&&"_params"!==this.Parameter.Content){e=this.Parameter.Content.split(",");var a=[],n=[];e.forEach((function(e){var l,i,s=dsf.base64.decode(e);s=JSON.parse(s),t.executeScriptText=null===(l=s)||void 0===l||null===(l=l._content)||void 0===l?void 0:l.executeScriptText,(null===(i=s.paramInfo)||void 0===i?void 0:i.length)>0&&(n.push(s.data),a=s.paramInfo)})),a.length>0&&(this.batchParameters.paramInfo=a,this.batchParameters.data=n)}},getContent:function(){var e,t,a=this,n=null===(e=this.$refs)||void 0===e||null===(e=e.tree)||void 0===e?void 0:e.base,l=1==this.Parameter.actuatorType?this.Parameter.fullClassName:this.fullClassName;if("1"==this.Parameter.paramMode){var i=this.$refs.parameter.getContent();return Object.assign(i,{actuatorType:this.Parameter.actuatorType,paramMode:Number(this.Parameter.paramMode),fullClassName:l}),null!==n&&void 0!==n&&n.id&&(i.ID=n.id),i}if(this.url)return c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)});if(this.Parameter.ID=(null===n||void 0===n?void 0:n.id)||(null===(t=this.Parameter)||void 0===t||null===(t=t.ds)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"",this.Parameter.fullClassName=l,dsf.isEmptyObject(this.batchParameters)){var s={_content:{fullClassName:l,id:this.Parameter.ID}};return s=JSON.stringify(s),this.Parameter.Content=dsf.base64.encode(s),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}var r=[];return this.batchParameters.data.forEach((function(e,t){var n={_content:{fullClassName:l,id:a.Parameter.ID},_order:t,data:e,paramInfo:a.batchParameters.paramInfo};n=JSON.stringify(n),r.push(dsf.base64.encode(n))})),this.Parameter.Content=r.join(","),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})},validate:function(){var e,t;if(this.url&&"0"==this.Parameter.paramMode){var a,n,l=(null===(a=this.$refs.viewPart.$refs)||void 0===a||null===(a=a.view)||void 0===a||null===(n=a.yes)||void 0===n?void 0:n.call(a))||{};if(dsf.isEmptyObject(l))return dsf.layer.message("自定义页面中缺失名为yes的返回函数",!1),!1;if(dsf.isObject(l)){if(!l.ID)return dsf.layer.message("返回执行对象ID不能为空",!1),!1;l.fullClassName||(l["fullClassName"]=this.fullClassName);var i={_content:{fullClassName:l.fullClassName,id:l.ID}};return i=JSON.stringify(i),l.Content=dsf.base64.encode(i),this.Parameter.paramMode,this.Parameter=l,!0}return dsf.layer.message("请返回执行对象",!1),!1}var s=null===(e=this.$refs)||void 0===e||null===(e=e.batAddParam)||void 0===e||null===(t=e.getContent)||void 0===t?void 0:t.call(e);if(s)return this.batchParameters=s,"1"==this.Parameter.paramMode||(!(1===this.Parameter.actuatorType&&!this.Parameter.fullClassName)||(dsf.layer.message("fullClassName不能为空",!1),!1))},setParameter:function(){var e=this;this.$openDialog({title:"批量参数",width:"1200px",height:"600px",overflow:"hidden",content:"ParameterBatch",params:{value:this.batchParameters},btns:[{text:"确定",handler:function(t){var a=t.getContent();return!!a&&(e.batchParameters=a,!0)}},{text:"取消"}]})},openDialog:function(){this.$openDialog({title:"注册RestAPI",width:"1000px",height:"650px",content:"ParameterExecWebAdd",customClass:"flow-parameter-exec-add-dialog",btns:[]})}}},d=u,f=a(0),p=Object(f["a"])(d,n,l,!1,null,null,null);t["default"]=p.exports},function(e,t,a){"use strict";a.r(t),a.d(t,"setObjAttr",(function(){return f}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-exec-add"},[a("DsfStepsNav",e._b({ref:"nav",scopedSlots:e._u([{key:"default0",fn:function(){return[a("meta-data-select-item",e._b({ref:"select",scopedSlots:e._u([{key:"navTreeName",fn:function(t){var n=t.data;return[n.$editing?[a("input",{directives:[{name:"model",rawName:"v-model",value:n.$label,expression:"data.$label"}],ref:n.$key+"input",attrs:{placeholder:"请填写目录名称",autofocus:""},domProps:{value:n.$label},on:{change:function(t){return e.editRow(n)},blur:function(t){return e.blurRow(n)},input:function(t){t.target.composing||e.$set(n,"$label",t.target.value)}}})]:[a("span",{staticClass:"name"},[e._v(e._s(n.$label))]),a("span",{staticClass:"c_num"},[e._v("("+e._s(n.$$children?n.$$children.length:0)+")")])]]}},{key:"navTreeBtn",fn:function(t){var n=t.data,l=t.node;return[e.addNodeParent?e._e():a("div",{staticClass:"btns"},[a("dsf-button",{attrs:{"btn-style":"4",text:"添加目录",icon:"icon_tianjia",title:"添加目录"},on:{click:function(t){return t.stopPropagation(),e.addHandlerFake(n,l)}}}),a("dsf-button",{attrs:{"btn-style":"4",text:"编辑",size:"small",icon:"edit",title:"编辑"},on:{click:function(t){return t.stopPropagation(),e.editHandler(n,l)}}}),!(n._level>1)||n.$$children&&n.$$children.length?e._e():a("dsf-button",{attrs:{"btn-style":"4",text:"删除",size:"small",icon:"jian",title:"删除"},on:{click:function(t){return t.stopPropagation(),e.deleteHandler(l)}}})],1)]}}])},"meta-data-select-item",e.selectProps,!1)),a("dsf-button",{on:{click:e.nextStep}},[e._v("下一步")])]},proxy:!0},{key:"default1",fn:function(){return[a("DsfViewPart",e._b({staticClass:"webViewPart"},"DsfViewPart",e.viewPartProps,!1))]},proxy:!0}])},"DsfStepsNav",e.navProps,!1))],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c=a(41),u={name:"ParameterExecWebAdd",components:{MetaDataSelectItem:c["default"]},data:function(){return{selectProps:{selectModel:"explorer",url:"dsfaHttp/getTree",multiple:!1,nameKey:"_name",disabledViewFn:this.viewDisabledFn,isFolder:this.isFolderFn},navProps:{alignCenter:!0,lazy:!0,items:[{text:"选择目录",value:"1"},{text:"注册RestAPI",value:"2"}]},viewPartProps:{showModel:"full",path:"",independent:!0,needInheritParams:!1},editingData:null,addNodeParent:null}},methods:{isFolderFn:function(e){return"0"==e._type},viewDisabledFn:function(e){return!("0"==e._type&&e._level>1)},nextStep:function(){var e=this.$refs.select.yes();e?(this.viewPartProps.path="#/pc/dsfa/resource/http/edit?isFlow=1&pid="+e._id,this.$refs.nav.initValue("2")):dsf.layer.message("请先选择目录！",!1)},addHandlerFake:function(e,t){var a=this;return s()(o.a.mark((function n(){var l,i,s,r,c,u,d,p;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.expand(),s={_level:2},f(s,"$children",void 0),f(s,"$key",dsf.uuid(32)),f(s,"$label",s._name),f(s,"$disabled",!1),r=e?e.$path:[],f(s,"$path",r.concat(s)),f(s,"$isFolder",!0),f(s,"$lazy",!1),f(s,"$childNum",0),f(s,"$viewDisabled",!1),f(s,"$isImageList",!1),f(s,"$data",s),c=Object.assign({},s,{$label:s.$label,$disabled:s.$disabled,$$children:s.$children,_isLeaf:!_.find(s.$children,(function(e){return e.$isFolder}))}),f(c,"$key",s.$key),f(c,"$childNum",s.$childNum),f(c,"$isFolder",s.$isFolder),f(c,"$path",s.$path),f(c,"$data",s),f(c,"$viewDisabled",s.$viewDisabled),n.next=23,a.editHandler(c,!0,t);case 23:e.$$children||(a.$set(e,"$$children",[]),a.$set(e.$data,"$children",[]),a.$set(e.$data,"children",[])),e.$$children.unshift(c),u=a.$refs.select.$refs.explorer.$refs.nav.$refs.tree,d=(null===t||void 0===t||null===(l=t.childNodes)||void 0===l?void 0:l[0])||t,p="append",null!==t&&void 0!==t&&null!==(i=t.childNodes)&&void 0!==i&&i[0]&&(d=t.childNodes[0],p="insertBefore"),u[p](c,d.key),u.$nextTick((function(){var e,t;null===(e=a.$refs)||void 0===e||null===(e=e[c.$key+"input"])||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)}));case 31:case"end":return n.stop()}}),n)})))()},addHandlerReal:function(e){var t=this,a=this.addNodeParent.data,n=dsf.layer.loading();this.$http.post("/dataResource/addDic",{pid:a._id,name:e.$label}).done((function(a){var n=a.success,l=a.data,i=a.message;n&&l.id?(t.editingData=null,t.addNodeParent=null,t.$set(e,"_id",l.id),t.$set(e,"$editing",!1),t.$set(e,"_level",l.level),t.$set(e.$data,"_name",l.name)):dsf.layer.message(i,!1)})).error((function(){dsf.layer.message("新增异常",!1)})).finally((function(){dsf.layer.closeLoading(n)}))},editHandler:function(e,t,a){var n=this;this.removeOldEditData((function(){n.editingData=e,n.$set(e,"$editing",!0),t&&a?n.addNodeParent=a:n.$nextTick((function(){var t,a;null===(t=n.$refs)||void 0===t||null===(t=t[e.$key+"input"])||void 0===t||null===(a=t.focus)||void 0===a||a.call(t)}))}))},removeOldEditData:function(e){var t=this;if(!this.editingData||this.editingData._id||this.editingData.$label)this.editingData=null,null===e||void 0===e||e();else{var a=this.$refs.select.$refs.explorer,n=a.$refs.nav.$refs.tree,l=this.addNodeParent.data||{},i=this.editingData.$key;n.getCurrentKey()==i&&n.setCurrentKey(l.$key),n.$nextTick((function(){var s,r,o=l.$$children||[],c=o.findIndex((function(e){return e.$key===i}));(n.remove(i),d(a,i),t.$set(t.editingData,"$editing",!1),c>-1)&&(null===l||void 0===l||null===(s=l.$$children)||void 0===s||null===(r=s.splice)||void 0===r||r.call(s,c,1));t.editingData=null,t.addNodeParent=null,null===e||void 0===e||e()}))}},blurRow:function(e){this.$set(e,"$editing",!1),this.removeOldEditData()},editRow:function(e){var t=this;if(e.$label)if(e._id){var a=dsf.layer.loading();this.editingData=null,this.$http.post("/dataResource/updateDic",{id:e._id,name:e.$label}).done((function(a){if(a.success){var n=t.$refs.select.$refs.explorer.$refs.nav.$refs.tree.getNode(e.$key).parent.data.$$children,l=n.findIndex((function(t){return t._id===e._id}));t.$set(n[l],"$label",e.$label),n.push({}),n.splice(n.length-1,1)}else dsf.layer.message(a.message,!1)})).error((function(e){dsf.layer.message("删除异常",!1)})).finally((function(){dsf.layer.closeLoading(a)}))}else this.addHandlerReal(e);else e.$label=e.$data._name,this.blurRow(e);this.$set(e,"$editing",!1)},deleteHandler:function(e){var t=this.$refs.select.$refs.explorer,a=t.$refs.nav.$refs.tree,n=e.key;this.editingData&&(this.$set(this.editingData,"$editing",!1),this.editingData=null),a.getCurrentKey()==n&&(a.setCurrentKey((e.parent.data||{})["$key"]),e.parent.data&&t.$refs.nav.currentChange(e.parent.data,e.parent));var l=dsf.layer.loading(),i=e.data._id;this.$http.post("/dataResource/singleRemove",{resourceId:i,typeKey:"dir"}).done((function(l){if(l.success){var s,r,o=e.parent.data||{},c=o.$$children||[],u=c.findIndex((function(e){return e._id===i}));if(a.remove(n),d(t,n),u>-1)null===o||void 0===o||null===(s=o.$$children)||void 0===s||null===(r=s.splice)||void 0===r||r.call(s,u,1)}else dsf.layer.message(l.message,!1)})).error((function(e){dsf.layer.message("删除异常",!1)})).finally((function(){dsf.layer.closeLoading(l)}))}}};function d(e,t){if(e.historyIndex>-1){var a=e.historyIndex,n=null;_.forEachRight(e.history,(function(l,i){var s;(null===(s=n)||void 0===s?void 0:s.key)==l.key||l.key==t?(e.history.splice(i,1),a>i+1&&a--):n=l})),e.historyIndex=a-1}}function f(e,t,a){return Object.defineProperty(e,t,{configurable:!0,writable:!0,value:a}),e}var p=u,h=a(0),m=Object(h["a"])(p,n,l,!1,null,null,null);t["default"]=m.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-real flow-parameter-new"},[a("el-tabs",{model:{value:e.Parameter.paramMode,callback:function(t){e.$set(e.Parameter,"paramMode",t)},expression:"Parameter.paramMode"}},[a("el-tab-pane",{attrs:{label:"普通模式",name:"0",lazy:""}},[a("div",{staticClass:"actuator"},[a("label",{staticStyle:{"margin-right":"10px"}},[e._v("执行目标：")]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1),a("div",{staticClass:"add-param",staticStyle:{height:"460px",position:"relative"}},[a("bat-add-param",{ref:"batAddParam",attrs:{value:e.batchParameters}})],1)]),a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{lazy:"",label:"高级模式",name:"1"}},[a("div",{staticClass:"actuator"},[e.fullClassName?a("el-radio-group",{staticClass:"act",model:{value:e.Parameter.actuatorType,callback:function(t){e.$set(e.Parameter,"actuatorType",t)},expression:"Parameter.actuatorType"}},[a("el-radio",{attrs:{label:0}},[e._v("默认执行器")]),a("el-radio",{attrs:{label:1}},[e._v("自定义执行器")])],1):e._e(),a("label",{staticStyle:{"margin-right":"10px"}},[e._v("执行目标：")]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1),a("Parameter",{ref:"parameter",attrs:{value:e.value}})],1)],1)],1)},l=[],i=a(3),s=a.n(i),r=a(76);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"ParameterReal",components:{BatAddParam:r["default"]},props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"},type:{type:String,default:"java"},url:{type:String,default:""},fullClassName:{type:String,default:""}},data:function(){return{Parameter:{Type:1,ID:"",MultiType:2,Content:"",actuatorType:0,fullClassName:"",paramMode:"0"},batchParameters:{},executeScriptText:"",selectTask:{}}},created:function(){this.Parameter=c(c({},this.Parameter),this.value),0==this.Parameter.actuatorType&&!this.Parameter.fullClassName&&this.fullClassName&&(this.Parameter.fullClassName=this.fullClassName),this.Parameter.paramMode+="",this.init()},methods:{select:function(e){var t=this;if(this.selectTask=c({},e),!dsf.isDef(this.selectTask.count)&&e){var a={scriptId:e.id,curWFId:dsf.url.queryString("id")};this.$http.post("/intellect/node/ex/config/findWFListByScriptId",a).done((function(e){e.success&&t.$set(t.selectTask,"count",e.data)}))}},editorLoaded:function(){var e=this.executeScriptText;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e,t=this;if("0"==this.Parameter.paramMode&&this.Parameter.Content&&"_params"!==this.Parameter.Content){e=this.Parameter.Content.split(",");var a=[],n=[];e.forEach((function(e){var l,i,s=dsf.base64.decode(e);s=JSON.parse(s),t.executeScriptText=null===(l=s)||void 0===l||null===(l=l._content)||void 0===l?void 0:l.executeScriptText,(null===(i=s.paramInfo)||void 0===i?void 0:i.length)>0&&(n.push(s.data),a=s.paramInfo)})),a.length>0&&(this.batchParameters.paramInfo=a,this.batchParameters.data=n)}"java"==this.type&&(this.Parameter.actuatorType=1)},getContent:function(){var e,t=this,a=null===(e=this.$refs)||void 0===e||null===(e=e.tree)||void 0===e?void 0:e.base,n=1==this.Parameter.actuatorType?this.Parameter.fullClassName:this.fullClassName;if("1"==this.Parameter.paramMode){var l=this.$refs.parameter.getContent();return Object.assign(l,{actuatorType:this.Parameter.actuatorType,paramMode:Number(this.Parameter.paramMode),fullClassName:n}),null!==a&&void 0!==a&&a.id&&(l.ID=a.id),l}if(null!==a&&void 0!==a&&a.id||"shell"===this.type||"sql"===this.type||"java"===this.type||"general"===this.type){if(null!==a&&void 0!==a&&a.id&&(this.Parameter.ID=a.id),this.Parameter.fullClassName=n,dsf.isEmptyObject(this.batchParameters)){var i={_content:{id:this.Parameter.ID,fullClassName:n}};return"python"===this.type?(i={_content:{fullClassName:n,modeId:this.Parameter.ID}},this.Parameter.Type=1,this.Parameter.Mode_id=this.base.mode_id):"shell"===this.type||"sql"===this.type?i={_content:{fullClassName:n,executeScriptText:this.$refs.editor.getContent()}}:("java"===this.type||"general"===this.type)&&(i={_content:{fullClassName:n}}),i=JSON.stringify(i),this.Parameter.Content=dsf.base64.encode(i),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}var s=[];return this.batchParameters.data.forEach((function(e,a){var l={_content:{fullClassName:n,id:t.Parameter.ID},_order:a,data:e,paramInfo:t.batchParameters.paramInfo};"python"===t.type?l._content={fullClassName:n,modeId:t.Parameter.ID}:"shell"===t.type||"sql"===t.type?l._content={fullClassName:n,executeScriptText:t.$refs.editor.getContent()}:("java"===t.type||"general"===t.type)&&(l._content={fullClassName:n}),l=JSON.stringify(l),s.push(dsf.base64.encode(l))})),this.Parameter.Content=s.join(","),"python"===this.type&&(this.Parameter.Type=1,this.Parameter.Mode_id=this.base.mode_id),c(c({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}},validate:function(){var e=this.$refs.batAddParam.getContent();if(e)return this.batchParameters=e,"1"==this.Parameter.paramMode||(1!==this.Parameter.actuatorType||this.Parameter.fullClassName?"shell"===this.type||"sql"===this.type||"java"===this.type||(!this.$refs.tree||this.$refs.tree.validate()):(dsf.layer.message("fullClassName不能为空",!1),!1))},setParameter:function(){var e=this;this.$openDialog({title:"批量参数",width:"1200px",height:"600px",overflow:"hidden",content:"ParameterBatch",params:{value:this.batchParameters},btns:[{text:"确定",handler:function(t){var a=t.getContent();return!!a&&(e.batchParameters=a,!0)}},{text:"取消"}]})}}},d=u,f=a(0),p=Object(f["a"])(d,n,l,!1,null,null,null);t["default"]=p.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-real btn-param-setting"},[a("el-tabs",{model:{value:e.Parameter.paramMode,callback:function(t){e.$set(e.Parameter,"paramMode",t)},expression:"Parameter.paramMode"}},[a("el-tab-pane",{class:{full:e.url},attrs:{label:e.tab1Title,name:"0",lazy:""}},[e.url?[e.viewPartProps.loaded?a("DsfViewPart",e._b({ref:"viewPart",attrs:{path:e.url,parameter:e.Parameter}},"DsfViewPart",e.viewPartProps,!1)):e._e()]:["shell"===e.type||"sql"===e.type?a("div",{staticClass:"event"},[a("MonacoEditor",{ref:"editor",attrs:{language:e.type},on:{mounted:e.editorLoaded}})],1):e._e(),e.url?a("ParameterTree",{ref:"tree",class:{"has-task":"dataConversion"===e.type},attrs:{type:e.type,url:e.url,value:e.value},on:{select:e.select}}):e._e(),a("div",{staticClass:"actuator"},["dataConversion"===e.type?a("div",{staticClass:"count"},[a("p",[e._v("已选任务: "),a("span",{staticClass:"tip"},[e._v(e._s(e.selectTask._name))])]),a("p",[e._v("已选任务被其他工作流引用次数: "),a("span",{staticClass:"tip"},[e._v(e._s(e.selectTask.count))])])]):e._e(),"java"!=e.type?a("el-radio-group",{staticClass:"act",model:{value:e.Parameter.actuatorType,callback:function(t){e.$set(e.Parameter,"actuatorType",t)},expression:"Parameter.actuatorType"}},[a("el-radio",{attrs:{label:0}},[e._v("默认执行器")]),a("el-radio",{attrs:{label:1}},[e._v("自定义执行器")])],1):e._e(),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}}),a("el-button",{staticClass:"ds-button set-parameter",attrs:{size:"small"},on:{click:e.setParameter}},[e._v(" 设置批量参数 ")])],1)]],2),a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{lazy:"",label:"高级模式",name:"1"}},[a("Parameter",{ref:"parameter",attrs:{value:e.value}}),a("div",{staticClass:"actuator"},[e.fullClassName?a("el-radio-group",{staticClass:"act",model:{value:e.Parameter.actuatorType,callback:function(t){e.$set(e.Parameter,"actuatorType",t)},expression:"Parameter.actuatorType"}},[a("el-radio",{attrs:{label:0}},[e._v("默认执行器")]),a("el-radio",{attrs:{label:1}},[e._v("自定义执行器")])],1):e._e(),a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.Parameter.actuatorType,expression:"Parameter.actuatorType == 1"}],staticClass:"fullClassName",attrs:{placeholder:"fullClassName"},model:{value:e.Parameter.fullClassName,callback:function(t){e.$set(e.Parameter,"fullClassName",t)},expression:"Parameter.fullClassName"}})],1)],1)],1)],1)},l=[],i=a(3),s=a.n(i);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"ParameterReal",props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"},type:{type:String,default:"java"},url:{type:String,default:""},fullClassName:{type:String,default:""}},data:function(){return{Parameter:{Type:1,ID:"",MultiType:2,Content:"",actuatorType:0,fullClassName:"",paramMode:"0"},batchParameters:{},executeScriptText:"",selectTask:{},tab1Title:"普通模式",viewPartProps:{showModel:"full",independent:!0,needInheritParams:!1,loaded:!1}}},created:function(){var e;(this.Parameter=o(o({},this.Parameter),this.value),0==this.Parameter.actuatorType&&!this.Parameter.fullClassName&&this.fullClassName&&(this.Parameter.fullClassName=this.fullClassName),this.Parameter.paramMode+="",this.init(),this.url)&&(this.tab1Title=(null===(e=dsf.url.parseRouter(this.url))||void 0===e||null===(e=e.router)||void 0===e||null===(e=e.query)||void 0===e?void 0:e.tabTitle)||"普通模式",this.viewPartProps.loaded=!0)},methods:{select:function(e){var t=this;if(this.selectTask=o({},e),!dsf.isDef(this.selectTask.count)&&e){var a={scriptId:e.id,curWFId:dsf.url.queryString("id")};this.$http.post("/intellect/node/ex/config/findWFListByScriptId",a).done((function(e){e.success&&t.$set(t.selectTask,"count",e.data)}))}},editorLoaded:function(){var e=this.executeScriptText;"html"==this.language&&(e=dsf.unescapeHTML(e)),this.$refs.editor.setContent(e)},init:function(){var e,t=this;if("0"==this.Parameter.paramMode&&this.Parameter.Content&&"_params"!==this.Parameter.Content){e=this.Parameter.Content.split(",");var a=[],n=[];e.forEach((function(e){var l,i,s=dsf.base64.decode(e);s=JSON.parse(s),t.executeScriptText=null===(l=s)||void 0===l||null===(l=l._content)||void 0===l?void 0:l.executeScriptText,(null===(i=s.paramInfo)||void 0===i?void 0:i.length)>0&&(n.push(s.data),a=s.paramInfo)})),a.length>0&&(this.batchParameters.paramInfo=a,this.batchParameters.data=n)}"java"==this.type&&(this.Parameter.actuatorType=1)},getContent:function(){var e,t=this,a=null===(e=this.$refs)||void 0===e||null===(e=e.tree)||void 0===e?void 0:e.base,n=1==this.Parameter.actuatorType?this.Parameter.fullClassName:this.fullClassName;if("1"==this.Parameter.paramMode){var l=this.$refs.parameter.getContent();return Object.assign(l,{actuatorType:this.Parameter.actuatorType,paramMode:Number(this.Parameter.paramMode),fullClassName:n}),null!==a&&void 0!==a&&a.id&&(l.ID=a.id),l}if(this.url)return o(o({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)});if(null!==a&&void 0!==a&&a.id||"shell"===this.type||"sql"===this.type||"java"===this.type||"general"===this.type){if(null!==a&&void 0!==a&&a.id&&(this.Parameter.ID=a.id),this.Parameter.fullClassName=n,dsf.isEmptyObject(this.batchParameters)){var i={_content:{id:this.Parameter.ID,fullClassName:n}};return"python"===this.type?(i={_content:{fullClassName:n,modeId:this.Parameter.ID}},this.Parameter.Type=1,this.Parameter.Mode_id=this.base.mode_id):"shell"===this.type||"sql"===this.type?i={_content:{fullClassName:n,executeScriptText:this.$refs.editor.getContent()}}:("java"===this.type||"general"===this.type)&&(i={_content:{fullClassName:n}}),i=JSON.stringify(i),this.Parameter.Content=dsf.base64.encode(i),o(o({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}var s=[];return this.batchParameters.data.forEach((function(e,a){var l={_content:{fullClassName:n,id:t.Parameter.ID},_order:a,data:e,paramInfo:t.batchParameters.paramInfo};"python"===t.type?l._content={fullClassName:n,modeId:t.Parameter.ID}:"shell"===t.type||"sql"===t.type?l._content={fullClassName:n,executeScriptText:t.$refs.editor.getContent()}:("java"===t.type||"general"===t.type)&&(l._content={fullClassName:n}),l=JSON.stringify(l),s.push(dsf.base64.encode(l))})),this.Parameter.Content=s.join(","),"python"===this.type&&(this.Parameter.Type=1,this.Parameter.Mode_id=this.base.mode_id),o(o({},this.Parameter),{},{paramMode:Number(this.Parameter.paramMode)})}},validate:function(){if("1"==this.Parameter.paramMode)return!0;if(this.url&&("general"===this.type||"dataConversion"===this.type||"python"===this.type)){var e,t,a=(null===(e=this.$refs.viewPart.$refs)||void 0===e||null===(e=e.view)||void 0===e||null===(t=e.yes)||void 0===t?void 0:t.call(e))||{};if(dsf.isEmptyObject(a))return dsf.layer.message("自定义页面中缺失名为yes的返回函数",!1),!1;if(dsf.isObject(a)){if(!a.ID)return dsf.layer.message("返回执行对象ID不能为空",!1),!1;a.fullClassName||(a["fullClassName"]=this.fullClassName);var n,l={_content:{id:a.ID,fullClassName:a.fullClassName}};if("python"===this.type)l={_content:{fullClassName:a.fullClassName,modeId:a.ID}},a.Type=1,a.Mode_id=null===this||void 0===this||null===(n=this.base)||void 0===n?void 0:n.mode_id;else"general"===this.type&&(l={_content:{fullClassName:a.fullClassName}});return l=JSON.stringify(l),a.Content=dsf.base64.encode(l),this.Parameter.paramMode,this.Parameter=a,!0}return dsf.layer.message("请返回执行对象",!1),!1}return 1!==this.Parameter.actuatorType||this.Parameter.fullClassName?"shell"===this.type||"sql"===this.type||"java"===this.type||(!this.$refs.tree||this.$refs.tree.validate()):(dsf.layer.message("fullClassName不能为空",!1),!1)},setParameter:function(){var e=this;this.$openDialog({title:"批量参数",width:"1200px",height:"600px",overflow:"hidden",content:"ParameterBatch",params:{value:this.batchParameters},btns:[{text:"确定",handler:function(t){var a=t.getContent();return!!a&&(e.batchParameters=a,!0)}},{text:"取消"}]})}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-parameter-tree"},[a("SelectTree",{ref:"SelectTree",attrs:{loading:e.loading,checked:e.checked,customIcon:["icon-jiaohuan"],"load-node":e.loadData,"tree-data":e.baseData,"default-keys":e.defaultKeys,"expand-all":!1,select:e.base,lazy:!0,"show-search":!0,customerSearch:e.customerSearch},on:{"update:select":function(t){e.base=t}}})],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"ParameterTree",mixins:[$mixins.propertyDialogSetting],props:{value:{type:Object,default:function(){return{}}},language:{type:String,default:"java"},type:{type:String,default:"java"},url:{type:String,default:"intellect/task/dgTrans"}},data:function(){return{baseData:[],base:null,loading:!0,checked:[],defaultKeys:[],keyword:"",Parameter:{Type:1,MultiType:2,Content:"",ID:"",Mode_id:""},fullClassName:"com.dsfa.platform.smart.work.executor.robot.python.PythonExecutor"}},watch:{base:function(e){this.$emit("select",e)}},created:function(){var e;null!==(e=this.value)&&void 0!==e&&e.ID&&(this.checked=[this.value.ID])},methods:{getContent:function(){if(!this.validate())return!1;this.Parameter.ID=this.base.id;var e={_content:{id:this.Parameter.ID}};return"python"===this.type&&(e={_content:{fullClassName:this.fullClassName,modeId:this.Parameter.ID}},this.Parameter.Type=1,this.Parameter.MultiType=2,this.Parameter.Mode_id=this.base.mode_id),e=JSON.stringify(e),this.Parameter.Content=dsf.base64.encode(e),this.Parameter},validate:function(){return!!this.base||(dsf.layer.message("请选择环节",!1),!1)},loadData:function(e,t){var a,n;0===(null===e||void 0===e?void 0:e.level)?this.initBase(e,t):null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.children?t(e.data.children):null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.leaf||!((null===e||void 0===e?void 0:e.level)>1)||this.keyword?t([]):this.initBase(e,t,e.data.id)},customerSearch:function(e){return this.baseData=[],this.defaultKeys=[],this.getTreeData(void 0,e)},initBase:function(e,t,a){var n=this;return s()(o.a.mark((function e(){var l,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getTreeData(a);case 2:if(i=e.sent,null!==(l=n.base)&&void 0!==l&&l.id&&setTimeout((function(){var e=n.$refs.SelectTree.$refs.treeForm.$el.querySelector('.custom-tree-node[tree-id="key_'.concat(n.base.id,'"]'));null===e||void 0===e||e.scrollIntoView({block:"center"})}),200),!t){e.next=6;break}return e.abrupt("return",null===t||void 0===t?void 0:t(i));case 6:case"end":return e.stop()}}),e)})))()},getTreeData:function(e,t){var a=this;this.loading=!0,this.keyword=t;var n={pid:e,selectId:this.value.ID};return this.code&&(n.code=this.code),t&&(n.keyword=t),this.$http.get(this.url,n).done((function(t){if(a.loading=!1,t.success){var n=t.data,l=[];return n.forEach((function(t){l.push(a.formatData(t,"0")),e||a.defaultKeys.push(t.id)})),e||(a.baseData=l),l}}))},formatData:function(e,t){var a,n;if(e.label=e._name,e.id=e._id,e.disabled=e._type===t,null!==(a=this.value)&&void 0!==a&&a.ID&&e.id==this.value.ID&&(this.defaultKeys.push(e.id),this.base=e),e.disabled||(e.leaf=!0),(null===e||void 0===e||null===(n=e.children)||void 0===n?void 0:n.length)>0){this.defaultKeys.push(e.id);for(var l=0;l<e.children.length;l++)this.formatData(e.children[l],t)}else delete e.children;return e}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"range-rule"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.config.selectTab,callback:function(t){e.$set(e.config,"selectTab",t)},expression:"config.selectTab"}},[a("el-tab-pane",{staticClass:"dept",attrs:{label:"部门+角色",name:"0",lazy:!0}},[a("div",{staticClass:"dept_left"},[a("div",{staticClass:"top"},[a("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定部门 ")]),a("el-radio",{attrs:{label:"extend"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点部门 ")]),a("el-radio",{attrs:{label:"tag"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 标签模式 ")]),a("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),a("el-select",{staticClass:"send-to-people",attrs:{"value-key":"label",placeholder:"请选择",size:"mini"},model:{value:e.chooseValue,callback:function(t){e.chooseValue=t},expression:"chooseValue"}},e._l(e.options,(function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e}})})),1)],1),a("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},[a("SelectTree",{directives:[{name:"show",rawName:"v-show",value:"assign"==e.config.model,expression:"config.model == 'assign'"}],attrs:{lazy:!0,"load-node":e.loadDept,"tree-data":e.deptData,"default-keys":e.defaultShowDepts,"expand-all":e.deptExpandAll,select:e.selectDept,loading:e.loadingDepts,checked:e.echo.dept,setIcon:e.setIcon,showSearch:!0,customerSearch:e.customerSearchDept},on:{"update:select":function(t){e.selectDept=t}}}),a("SelectTable",{directives:[{name:"show",rawName:"v-show",value:"extend"===e.config.model,expression:"config.model === 'extend'"}],attrs:{data:e.nodesData,select:e.selectExtends,columns:e.deptColumns,height:"100%"},on:{"update:select":function(t){e.selectExtends=t},deleteRow:e.deleteRow}}),"super"==e.config.model?a("div",{staticClass:"super"},[a("EventSetting",{ref:"editor",attrs:{language:e.language,code:e.code}})],1):e._e(),"tag"==e.config.model?a("SelectTree",{staticClass:"tag",attrs:{"load-node":e.loadTag,lazy:!0,select:e.selectDeptTag,checked:e.echo.deptTag,showSearch:!0,setIcon:e.setTagIcon},on:{"update:select":function(t){e.selectDeptTag=t}}}):e._e()],1)]),a("div",{staticClass:"dept_right"},[a("SelectTree",{attrs:{setIcon:e.setRoleIcon,showSearch:!0,"tree-data":e.roleData,select:e.selectRole,checked:e.echo.role},on:{"update:select":function(t){e.selectRole=t}}})],1)]),a("el-tab-pane",{attrs:{label:"直接选人",name:"1",lazy:!0}},[a("div",{staticClass:"dept_left"},[a("div",{staticClass:"top"},[a("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定人员 ")]),a("el-radio",{attrs:{label:"extend"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点经办人 ")]),a("el-radio",{attrs:{label:"tag"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 标签模式 ")]),a("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")])],1),a("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},[a("SelectTree",{directives:[{name:"show",rawName:"v-show",value:"assign"==e.config.model,expression:"config.model == 'assign'"}],attrs:{lazy:!0,"load-node":e.loadPeople,"tree-data":e.peopleData,"default-keys":e.defaultShowPeoples,"expand-all":e.peopleExpandAll,multi:!0,select:e.selectPeople,checked:e.echo.people,loading:e.loadingPeople,showSearch:!0,customerSearch:e.customerSearchPeople,setIcon:e.setIcon},on:{"update:select":function(t){e.selectPeople=t}}}),"extend"===e.config.model?a("SelectTable",{attrs:{data:e.nodesData,select:e.selectExtendPerson,columns:e.noLevelColumns},on:{"update:select":function(t){e.selectExtendPerson=t},deleteRow:e.deleteRow}}):e._e(),"tag"==e.config.model?a("SelectTree",{staticClass:"tag",attrs:{"load-node":e.loadTag,lazy:!0,select:e.selectPeopleTag,checked:e.echo.peopleTag,showSearch:!0,setIcon:e.setTagIcon},on:{"update:select":function(t){e.selectPeopleTag=t}}}):e._e(),"super"==e.config.model?a("div",{staticClass:"super"},[a("EventSetting",{ref:"personEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)])]),a("el-tab-pane",{attrs:{label:"行政岗位",name:"2"}},[a("div",{staticClass:"dept_left"},[a("div",{staticClass:"top"},[a("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 指定岗位 ")]),a("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),a("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")])],1),a("div",{staticClass:"content-box",class:{assign:"assign"===e.config.model}},["assign"===e.config.model?a("SelectTable",{attrs:{data:e.jobData,select:e.selectJobs,columns:e.jobColumns},on:{"update:select":function(t){e.selectJobs=t},deleteRow:e.deleteRow}}):e._e(),"super"==e.config.model?a("div",{staticClass:"super"},[a("EventSetting",{ref:"jobEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)])]),a("el-tab-pane",{staticClass:"dept",attrs:{label:"人+关系",name:"3",lazy:!0}},[a("div",{staticClass:"dept_left"},[a("div",{staticClass:"top"},[a("el-radio",{attrs:{label:"assign"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 继承节点经办人 ")]),a("el-radio",{attrs:{label:"super"},on:{change:e.tabsChange},model:{value:e.config.model,callback:function(t){e.$set(e.config,"model",t)},expression:"config.model"}},[e._v(" 高级模式 ")]),a("el-checkbox",{staticClass:"send-to-people",model:{value:e.config.IsUser,callback:function(t){e.$set(e.config,"IsUser",t)},expression:"config.IsUser"}},[e._v(" 发送到人 ")])],1),a("div",{staticClass:"content-box"},["assign"===e.config.model?a("SelectTable",{attrs:{data:e.nodesData,select:e.selectAgents,columns:e.noLevelColumns},on:{"update:select":function(t){e.selectAgents=t},deleteRow:e.deleteRow}}):e._e(),"super"==e.config.model?a("div",{staticClass:"super"},[a("EventSetting",{ref:"relationEditor",attrs:{language:e.language,code:e.code}})],1):e._e()],1)]),a("div",{staticClass:"dept_right"},[a("SelectTree",{attrs:{setIcon:e.setRoleIcon,showSearch:!0,"tree-data":e.roleData,select:e.selectRelation,checked:e.echo.role,loading:e.loadingRole},on:{"update:select":function(t){e.selectRelation=t}}})],1)])],1),a("div",{staticClass:"bottom"},[a("div",{staticClass:"btnBox"},[a("el-button",{staticClass:"ds-button plain",attrs:{icon:"iconfont icon-xia",size:"small"},on:{click:e.chooseFun}},[e._v(" 选择 ")]),a("el-button",{staticClass:"ds-button plain",attrs:{icon:"iconfont icon-delete",size:"small"},on:{click:e.clearData}},[e._v(" 清空 ")])],1),a("div",{staticClass:"table-box"},[a("SelectTable",{attrs:{data:e.config.tableResult.Rule||[],columns:e.getResultColumns},on:{deleteRow:e.deleteRow}})],1)])],1)},l=[],i=a(411),s={name:"RangeRule",props:{nodes:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},language:{type:String,default:"javascript"},value:{type:Object,default:function(){return{}}}},data:function(){return{config:{selectTab:"0",model:"assign",IsDeep:0,IsUser:!0,tableResult:{Type:"",IsUser:1,Rule:[]},chooseDataObj:{}},code:"",rangeType:null,deptData:[],defaultShowDepts:[],loadingDepts:!0,nodesData:[],roleData:[],peopleData:[],loadingPeople:!0,defaultShowPeoples:[],extendPersonData:[],jobData:[{label:1,desc:2}],selectDept:null,selectRole:null,selectExtends:[],selectPeople:null,selectExtendPerson:[],selectJobs:[],selectAgents:[],selectRelation:null,selectDeptTag:null,selectPeopleTag:null,deptOptions:[{label:"当前部门",value:-9},{label:"目录",value:-1},{label:"子机构",value:0},{label:"一级部门",value:1},{label:"二级部门",value:2},{label:"三级部门",value:3}],deptColumns:[],resultColumns:[{prop:"name",label:"范围"},{prop:"IsShowDeptUser",label:"无人时，列出部门全部人员",width:"240",options:[{value:0,label:"否"},{value:1,label:"是"}]},{prop:"IsSelected",label:"状态",width:"140",options:Object(i["b"])()},{label:"操作",width:"140",operate:!0}],noLevelColumns:[],jobColumns:[{selection:!0,type:"selection",width:50},{prop:"label",label:"岗位名称"},{prop:"desc",label:"备注"}],chooseValue:null,options:[{value:{IsDeep:0,IsUser:1},label:"发送到人-限本级部门"},{value:{IsDeep:1,IsUser:1},label:"发送到人-含下级部门"},{value:{IsDeep:0,IsUser:0},label:"发送到角色-限本级部门"},{value:{IsDeep:1,IsUser:0},label:"发送到角色-含下级部门"},{value:{IsDeep:2,IsUser:0},label:"只发送到有角色的部门-限本级部门"},{value:{IsDeep:3,IsUser:0},label:"只发送到有角色的部门-含下级部门"}],echo:{role:[],dept:[],deptTag:[],people:[],peopleTag:[]},loadingRole:!0,deptExpandAll:!1,peopleExpandAll:!1}},computed:{getResultColumns:function(){var e,t;return"2"===(null===this||void 0===this||null===(e=this.config)||void 0===e?void 0:e.selectTab)||"3"===(null===this||void 0===this||null===(t=this.config)||void 0===t?void 0:t.selectTab)?this.resultColumns.filter((function(e){return"IsShowDeptUser"!==e.prop})):this.resultColumns}},created:function(){var e=[{type:"index",width:44},{selection:!0,type:"selection",width:50},{prop:"label",label:"范围"}];this.deptColumns=[].concat(e,[{prop:"level",label:"级别",options:this.deptOptions}]),this.chooseValue=this.options[0],this.noLevelColumns=[].concat(e),this.initExtendDataForOrg(),this.getFlowPosition(),this.initData()},mounted:function(){},methods:{setIcon:function(e,t){return"0"==e.data.Level?["icon-chengshi"]:"1"==e.data._type?["icon-icon_user"]:"-1"==e.data.Level?["icon-ziyuanguanli"]:["icon-tab_home_unchecked"]},setTagIcon:function(e,t){return"0"==e.data.type_value?["icon-wenjianjia"]:["icon-icon_tag"]},setRoleIcon:function(e,t){return"0"==e.data.type?e.expanded?["icon-dakai"]:["icon-wenjianjia"]:"1"==e.data.type?["icon-icon-people"]:["icon-icon_person"]},getContent:function(){return this.config.tableResult},validate:function(){return 0!=this.config.tableResult.Rule.length||(dsf.layer.message("请设置处理范围",!1),!1)},tabsChange:function(e){this.clearData()},initData:function(){var e=this,t=this.value&&dsf.mix(!0,[],this.value.Rule)||[];t&&t.length>0&&(this.config.tableResult=dsf.mix(!0,{},this.value),t.forEach((function(t){var a,n=e.value,l=e.config;12===n.Type?(l.model="super",l.selectTab="2",e.code=t.exp,a="jobAdvanced"):21===n.Type?(l.model="assign",l.selectTab="1",e.echo.people=[t.UserID],a=t.id):22===n.Type?(l.model="extend",l.selectTab="1",a=t.id):23===n.Type?(l.model="super",l.selectTab="1",e.code=t.exp,a="personAdvanced"):24===n.Type?(l.model="tag",l.selectTab="1",e.echo.peopleTag=[t.lableId],a=t.id):31===n.Type?(l.model="assign",l.selectTab="0",e.echo.role=[t.RoleID],e.echo.dept=[t.DeptID],e.selectDept={label:t.DeptName,id:t.DeptID},e.selectRole={label:t.RoleName,id:t.RoleID},a=t.DeptID+"-"+t.RoleID):32===n.Type?(l.model="extend",l.selectTab="0",e.echo.role=[t.RoleID],e.selectRole={label:t.RoleName,id:t.RoleID},a=t.NodeID+"-"+t.RoleID):33===n.Type?(l.model="super",l.selectTab="0",e.echo.role=[t.RoleID],e.selectRole={label:t.RoleName,id:t.RoleID},e.code=t.exp,a="role-"+t.RoleID):34===n.Type?(l.model="tag",l.selectTab="0",e.echo.deptTag=[t.lableId],e.echo.role=[t.RoleID],e.selectDeptTag={label:t.lableName,id:t.lableId},e.selectRole={label:t.RoleName,id:t.RoleID},a=t.lableId+"-"+t.RoleID):41===n.Type?(l.model="assign",l.selectTab="3",a="relation"+t.id):42===n.Type?(l.model="super",l.selectTab="3",e.echo.role=[t.RelationID],e.selectRole={label:t.RelationName,id:t.RelationID},e.code=t.exp,a="relationAdvanced"):a=t.id,e.config.chooseDataObj[a]=t})))},initAssignDataForOrg:function(e,t,a){var n=this;this.deptExpandAll=!1,this.$http.get("oua/getDeptByCurUnit",{sFID:a,isAsy:!0}).then((function(e){var l;if(null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.success){var i=n.formatData(e.data.data,"","dept");if(a?i=i.children:(n.defaultShowDepts.push(i.id),n.deptData=[i],i=[i]),n.loadingDepts=!1,t)return null===t||void 0===t?void 0:t(i)}}))},initExtendDataForOrg:function(){var e=_.cloneDeep(this.nodes),t=[];t.push({id:"DS_CUR_SEND_NODE",label:"当前发送节点",level:1}),e.sort((function(e,t){var a,n;return((null===(a=e.attributes.BaseInfo)||void 0===a?void 0:a.ShowOrder)||0)-((null===(n=t.attributes.BaseInfo)||void 0===n?void 0:n.ShowOrder)||0)}));for(var a=0;a<e.length;a++)t.push({id:e[a].id,label:e[a].name,level:1});this.nodesData=t},initAssignDataForPeople:function(e,t,a){var n=this;this.peopleExpandAll=!1,this.$http.get("oua/getUserByCurUnit",{sFID:a,isAsy:!0}).then((function(e){var l;if(null!==e&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l.success){var i=n.formatData(e.data.data,"1","user");if(a?i=i.children:(n.defaultShowPeoples.push(i.id),n.peopleData=[i],i=[i]),n.loadingPeople=!1,t)return null===t||void 0===t?void 0:t(i)}}))},getFlowPosition:function(){var e=this;this.$http.get("oua2/getRole",{}).then((function(t){if(t.data.success){var a=[];t.data.data.forEach((function(t){a.push(e.formatData(t,"2"))})),e.loadingRole=!1,e.roleData=a}}))},formatData:function(e,t,a){var n;if(e.label=e.NAME||e._name,e.id=e.id||e._id,e.type=e.TYPE||e._type||e.type_value,(t||"dept"===a&&-1==e.Level)&&(e.disabled=e.type!=t),a&&("dept"===a&&0==e.DeptCount||"user"===a&&(1===e.type||0==e.DeptCount&&0==e.UserCount))&&(e.leaf=!0),e.attributes={NAME:e.label,id:e.id,FID:e.pid,type:e.type},delete e.NAME,delete e.Atts,delete e.TYPE,delete e.FID,(null===e||void 0===e||null===(n=e.children)||void 0===n?void 0:n.length)>0)for(var l=0;l<e.children.length;l++)this.formatData(e.children[l],t,a);return e},handleClick:function(e){e.index;this.config.model="assign",this.echo={role:[],dept:[]},this.clearData()},editorLoaded:function(e){var t=this.code;"html"==this.language&&(t=dsf.unescapeHTML(t)),this.$refs[e].setContent(t)},deleteRow:function(e){12===e.Type?delete this.config.chooseDataObj["jobAdvanced"]:23===e.Type?delete this.config.chooseDataObj["personAdvanced"]:31===e.Type?delete this.config.chooseDataObj[e.DeptID+"-"+e.RoleID]:32===e.Type?delete this.config.chooseDataObj[e.NodeID+"-"+e.RoleID]:33===e.Type?delete this.config.chooseDataObj["role-"+e.RoleID]:34===e.Type?delete this.config.chooseDataObj[e.lableId+"-"+e.RoleID]:41===e.Type?delete this.config.chooseDataObj["relation"+e.id]:42===e.Type?delete this.config.chooseDataObj["relationAdvanced"]:delete this.config.chooseDataObj[e.id]},chooseFun:function(){var e=this;if(this.verify()){var t=this.config;if("0"===t.selectTab)if("assign"===t.model)this.addRule(this.selectDept,this.selectRole);else if("extend"===t.model)this.selectExtends.forEach((function(t){e.addRule(t,e.selectRole)}));else if("tag"===t.model)this.addRule(this.selectDeptTag,this.selectRole);else{var a={label:"表达式选角色",exp:this.$refs.editor.getContent(),id:dsf.uuid(32)};this.addRule(a,this.selectRole)}else if("1"===t.selectTab)if("assign"===t.model)this.selectPeople.forEach((function(t){e.addPerson(t)}));else if("tag"===t.model)this.addPerson(this.selectPeopleTag);else if("extend"===t.model)this.selectExtendPerson.forEach((function(t){e.addPerson(t)}));else{var n={label:"表达式选人",exp:this.$refs.personEditor.getContent(),id:dsf.uuid(32)};this.addPerson(n)}else if("2"===t.selectTab){if("super"===t.model){var l={label:"表达式选岗位"+(t.IsUser?"(发送到人)":""),exp:this.$refs.jobEditor.getContent(),id:dsf.uuid(32)};this.addJob(l)}}else if("assign"===t.model)this.selectAgents.forEach((function(t){e.addRelation(t,e.selectRelation)}));else if("super"===t.model){var i={label:"表达式选关系",exp:this.$refs.relationEditor.getContent(),id:dsf.uuid(32)};this.addRelation(i,this.selectRelation)}}},verify:function(){var e=this.config;if("0"===e.selectTab){if("assign"===e.model&&!this.selectDept)return dsf.layer.alert("请选择左侧指定部门节点"),!1;if("extend"===e.model&&0===this.selectExtends.length)return dsf.layer.alert("请选择继承的节点部门"),!1;if(!this.selectRole)return dsf.layer.alert("请选择右侧角色节点"),!1}else if("1"===e.selectTab){if("assign"===e.model&&!this.selectPeople)return dsf.layer.alert("请选择指定人员"),!1;if("extend"===e.model&&0===this.selectExtendPerson.length)return dsf.layer.alert("请选择继承节点经办人"),!1}else if("2"===e.selectTab){if("assign"===e.model)return dsf.layer.alert("暂无真实数据"),!1}else{if("assign"===e.model&&0===this.selectAgents.length)return dsf.layer.alert("请选择左侧继承节点经办人"),!1;if(!this.selectRelation)return dsf.layer.alert("请选择右侧关系节点"),!1}return!0},addRule:function(e,t){var a,n=this.config,l=0,i=0;"0"===n.selectTab?(a=this.chooseValue.label,l=this.chooseValue.value.IsDeep,i=this.chooseValue.value.IsUser):(a=n.IsUser?"发送到人":"",i=n.IsUser?1:0);var s,r="".concat(e&&e.label,"-").concat(this.getDeptLevel(e&&e.level)).concat(t.label).concat(a?"("+a+")":""),o={id:dsf.uuid(32),name:r,IsDeep:l,IsUser:i,IsSelected:0,RoleID:t.id,RoleName:t.label,IsShowDeptUser:0};"assign"===n.model?(Object.assign(o,{Type:31,DeptID:e.id,DeptName:e.label}),s=o.DeptID+"-"+o.RoleID):"extend"===n.model?(Object.assign(o,{NodeID:e.id,NodeName:e.label,Type:32,Level:e.level,DeptName:e.label}),s=o.NodeID+"-"+o.RoleID):"tag"===n.model?(Object.assign(o,{lableId:e.id,lableName:e.label,Type:34}),s=o.lableId+"-"+o.RoleID):(Object.assign(o,{Type:33,exp:e.exp}),s="role-"+t.id),this.addToTable(n,s,o)},addPerson:function(e){var t,a=this.config,n={id:e.id,name:e.label,IsSelected:0,IsUser:1,IsShowDeptUser:0};"assign"===a.model?(Object.assign(n,{UserID:e.id,UserName:e.label,DeptID:e.deptId,DeptName:e.deptName,Type:21}),t=n.id):"tag"===a.model?(Object.assign(n,{lableId:e.id,lableName:e.label,Type:24}),t=n.id):"extend"===a.model?(Object.assign(n,{NodeID:e.id,NodeName:e.label,Type:22}),t=n.id):(Object.assign(n,{exp:e.exp,Type:23}),t="personAdvanced"),this.addToTable(a,t,n)},addJob:function(e){var t,a=this.config,n={id:e.id,name:e.label,IsDeep:a.IsDeep?1:0,IsUser:a.IsUser?1:0,IsSelected:0};"super"===a.model&&(Object.assign(n,{JobID:e.id,JobName:e.label,exp:e.exp,Type:12}),t="jobAdvanced"),this.addToTable(a,t,n)},addRelation:function(e,t){var a,n=this.config,l="".concat(e&&e.label,"-").concat(t.label).concat(n.IsUser?"(发送到人)":""),i={id:e.id,name:l,IsUser:n.IsUser?1:0,RelationID:t.id,RelationName:t.label,IsSelected:0};"assign"===n.model?(Object.assign(i,{NodeID:e.id,NodeName:e.label,Type:41}),a="relation"+e.id):"super"===n.model&&(i.Type=42,i.exp=e.exp,a="relationAdvanced"),this.addToTable(n,a,i)},addToTable:function(e,t,a){e.chooseDataObj[t]||(e.tableResult.IsUser=a.IsUser,e.tableResult.Type=a.Type,e.chooseDataObj[t]=a,e.tableResult.Rule.push(a))},getDeptLevel:function(e){if(!e||"0"!==this.config.selectTab)return"";var t=this.deptOptions.find((function(t){return t.value===e}));return t.label+"-"},clearData:function(){this.config.tableResult.Type=31,this.config.tableResult.IsUser=0,this.config.tableResult.Rule=[],this.config.chooseDataObj={}},loadDept:function(e,t){var a,n;0===(null===e||void 0===e?void 0:e.level)?this.initAssignDataForOrg(e,t):null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.children&&1===(null===e||void 0===e?void 0:e.level)?t(this.deptData[0].children):null!==e&&void 0!==e&&e.data&&(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.DeptCount)>0?this.initAssignDataForOrg(e,t,e.data.id):t([])},loadPeople:function(e,t){var a,n,l,i;0===(null===e||void 0===e?void 0:e.level)?this.initAssignDataForPeople(e,t):null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.children&&1===(null===e||void 0===e?void 0:e.level)?t(this.peopleData[0].children):"1"!=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n._type)&&((null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.UserCount)>0||(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.DeptCount)>0)?this.initAssignDataForPeople(e,t,e.data.id):t([])},customerSearchDept:function(e){var t=this;this.deptData=[],this.defaultShowDepts=[],this.deptExpandAll=!0,this.loadingDepts=!0,this.$http.get("/oua/searchDeptByOrg",{keyWord:e}).done((function(e){if(t.loading=!1,e.success){var a=dsf.isEmptyObject(e.data)?null:t.formatData(e.data,"","dept");t.deptData=a?[a]:[],t.loadingDepts=!1}}))},customerSearchPeople:function(e){var t=this;this.peopleData=[],this.defaultShowPeoples=[],this.peopleExpandAll=!0,this.loadingPeople=!0,this.$http.get("oua/searchUserByOrg",{keyWord:e}).done((function(e){if(t.loading=!1,e.success){var a=dsf.isEmptyObject(e.data)?null:t.formatData(e.data,"1","user");t.peopleData=a?[a]:[],t.loadingPeople=!1}}))},loadTag:function(e,t){if(0===(null===e||void 0===e?void 0:e.level)){var a="0"==this.config.selectTab?1:2;this.initTags(t,a)}else t([])},initTags:function(e,t){var a=this;this.$http.get("/label/getLabelTree",{keyWord:"",type:t}).done((function(n){if(null!==n&&void 0!==n&&n.success){var l=a.formatData(n.data[0],t);if(l=[l],e)return null===e||void 0===e?void 0:e(l)}}))}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-ueditor"},[a("DsfUEditor",{attrs:{value:e.content,"show-label":!1,"rich-txt-height":320},on:{"editor-change":e.valueChange}})],1)},l=[],i={name:"RichText",props:{value:{type:String,default:function(){return""}}},data:function(){return{content:""}},created:function(){this.content=this.value},mounted:function(){},methods:{getContent:function(){return this.content},valueChange:function(e,t){this.content=e.data}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-institution-info"},[a("table",[a("tbody",[a("tr",[a("td",{attrs:{colspan:"3"}},[a("DsfTextbox",{attrs:{required:!0,label:"风险控制点"},model:{value:e.fxkz.fxkzd,callback:function(t){e.$set(e.fxkz,"fxkzd",t)},expression:"fxkz.fxkzd"}})],1)])])]),a("div",{staticClass:"rows"},[a("span",[e._v("风险类别")]),a("div",{staticClass:"btns"},[a("DsfButton",{staticClass:"small",attrs:{icon:"add"},on:{click:function(t){return e.addNew("fxlb")}}},[e._v(" 新增 ")]),a("DsfButton",{staticClass:"small plain",attrs:{icon:"shanchu"},on:{click:function(t){return e.clearAll("fxlb")}}},[e._v(" 清空 ")])],1)]),a("table",[a("tbody",{staticClass:"inner-content"},[e._m(0),e._l(e.fxkz.fxlb,(function(t,n){return a("tr",{key:n},[a("td",{staticClass:"xhfiled sub"},[a("el-input",{staticClass:"zdyqxh",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.xh,callback:function(a){e.$set(t,"xh",a)},expression:"item.xh"}})],1),a("td",{staticClass:"filed_common sub"},[a("el-input",{staticClass:"zdyq",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("td",{staticClass:"operation"},[a("a",{staticClass:"ds-button--icon-text",on:{click:function(t){return e.deleteRow(n,"fxlb")}}},[a("i",{staticClass:"iconfont icon-shanchu"})])])])}))],2)]),a("div",{staticClass:"rows"},[a("span",[e._v("风险描述")]),a("div",{staticClass:"btns"},[a("DsfButton",{staticClass:"small",attrs:{icon:"add"},on:{click:function(t){return e.addNew("fxms")}}},[e._v(" 新增 ")]),a("DsfButton",{staticClass:"small plain",attrs:{icon:"shanchu"},on:{click:function(t){return e.clearAll("fxms")}}},[e._v(" 清空 ")])],1)]),a("table",[a("tbody",{staticClass:"inner-content"},[e._m(1),e._l(e.fxkz.fxms,(function(t,n){return a("tr",{key:n},[a("td",{staticClass:"xhfiled sub"},[a("el-input",{staticClass:"zdyqxh",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.xh,callback:function(a){e.$set(t,"xh",a)},expression:"item.xh"}})],1),a("td",{staticClass:"filed_common sub"},[a("el-input",{staticClass:"zdyq",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("td",{staticClass:"operation"},[a("a",{staticClass:"ds-button--icon-text",on:{click:function(t){return e.deleteRow(n,"fxms")}}},[a("i",{staticClass:"iconfont icon-shanchu"})])])])}))],2)]),a("div",{staticClass:"rows"},[a("span",[e._v("控制措施")]),a("div",{staticClass:"btns"},[a("DsfButton",{staticClass:"small",attrs:{icon:"add"},on:{click:function(t){return e.addNew("kzcs")}}},[e._v(" 新增 ")]),a("DsfButton",{staticClass:"small plain",attrs:{icon:"shanchu"},on:{click:function(t){return e.clearAll("kzcs")}}},[e._v(" 清空 ")])],1)]),a("table",[a("tbody",{staticClass:"inner-content"},[e._m(2),e._l(e.fxkz.kzcs,(function(t,n){return a("tr",{key:n},[a("td",{staticClass:"xhfiled sub"},[a("el-input",{staticClass:"zdyqxh",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.xh,callback:function(a){e.$set(t,"xh",a)},expression:"item.xh"}})],1),a("td",{staticClass:"filed_common sub"},[a("el-input",{staticClass:"zdyq",attrs:{type:"textarea",autosize:{minRows:1,maxRows:99}},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("td",{staticClass:"operation"},[a("a",{staticClass:"ds-button--icon-text",on:{click:function(t){return e.deleteRow(n,"kzcs")}}},[a("i",{staticClass:"iconfont icon-shanchu"})])])])}))],2)])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"table-title"},[a("td",{staticClass:"xhfiled"},[e._v("序号")]),a("td",[e._v("风险描述")]),a("td",{staticClass:"operation"},[e._v("操作")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"table-title"},[a("td",{staticClass:"xhfiled"},[e._v("序号")]),a("td",[e._v("风险描述")]),a("td",{staticClass:"operation"},[e._v("操作")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{staticClass:"table-title"},[a("td",{staticClass:"xhfiled"},[e._v("序号")]),a("td",[e._v("控制措施")]),a("td",{staticClass:"operation"},[e._v("操作")])])}],i={name:"RiskInfo",props:{checked:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},data:function(){return{fxkz:{fxkzd:"",fxlb:[],fxms:[],kzcs:[]}}},created:function(){var e;Object.assign(this.fxkz,{fxkzd:this.checked.name},(null===(e=this.value)||void 0===e?void 0:e.fxkz)||{})},mounted:function(){},methods:{yes:function(){return{fxkz:this.fxkz}},validate:function(){var e,t,a,n,l,i;if(!this.fxkz.fxkzd)return dsf.layer.message("请填写风险控制点",!1),!1;var s=!1;if(null===(e=this.fxkz.fxlb)||void 0===e||e.forEach((function(e){e.xh&&e.content||(s=!0)})),s)return dsf.layer.message("请完善风险类别",!1),!1;if(0===(null===(t=this.fxkz.fxlb)||void 0===t?void 0:t.length))return dsf.layer.message("请填写风险类别",!1),!1;var r=!1;if(null===(a=this.fxkz.fxms)||void 0===a||a.forEach((function(e){e.xh&&e.content||(r=!0)})),r)return dsf.layer.message("请完善风险描述",!1),!1;if(0===(null===(n=this.fxkz.fxms)||void 0===n?void 0:n.length))return dsf.layer.message("请填写风险描述",!1),!1;var o=!1;return null===(l=this.fxkz.kzcs)||void 0===l||l.forEach((function(e){e.xh&&e.content||(o=!0)})),o?(dsf.layer.message("请完善控制措施",!1),!1):0!==(null===(i=this.fxkz.kzcs)||void 0===i?void 0:i.length)||(dsf.layer.message("请填写控制措施",!1),!1)},addNew:function(e){this.fxkz[e].push({content:"",xh:""})},deleteRow:function(e,t){this.fxkz[t].splice(e,1)},clearAll:function(e){this.fxkz[e]=[]}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ds-select-icon"},e._l(e.list,(function(t,l){return n("div",{key:l,staticClass:"item",class:{active:e.selected===t}},[n("img",{attrs:{src:a(860)("./"+t+"_s.png"),alt:""},on:{click:function(a){e.selected=t}}})])})),0)},l=[],i={name:"SelectImg",props:{value:{type:String,default:function(){return""}}},data:function(){return{selected:"",list:["101","201","299","301","302"]}},created:function(){this.selected=this.value||"101"},mounted:function(){},methods:{getContent:function(){return this.selected}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("el-tab-pane",{attrs:{name:"0",label:"基础环节"}},[a("SelectTree",{attrs:{multi:!0,"tree-data":e.baseData,select:e.base,"show-search":!0},on:{"update:select":function(t){e.base=t}}})],1),a("el-tab-pane",{attrs:{name:"1",label:"业务环节"}},[a("SelectTree",{attrs:{multi:!0,"tree-data":e.businessData,select:e.business,"show-search":!0},on:{"update:select":function(t){e.business=t}}})],1),a("el-tab-pane",{attrs:{name:"2",label:"机器人"}},[a("SelectTree",{attrs:{multi:!0,"tree-data":e.robotData,select:e.robot,"show-search":!0},on:{"update:select":function(t){e.robot=t}}})],1)],1)},l=[],i={name:"FlowSelectNodes",mixins:[$mixins.propertyDialogSetting],props:{code:{type:String,default:""}},data:function(){return{tabIndex:"0",baseData:[],base:null,businessData:[],business:null,robotData:[],robot:null,loadedBusiness:!1,loadedRobot:!1}},watch:{tabIndex:function(e){"1"!=e||this.loadedBusiness||this.initBusiness(),"2"!=e||this.loadedRobot||this.initRobot()}},created:function(){this.initBase()},methods:{yes:function(){if(!this.validate())return!1;if("0"==this.tabIndex){var e=this.base.filter((function(e){return 13==e.type}));return{type:2,data:e}}if("1"==this.tabIndex){var t=this.business.filter((function(e){return 14==e.type}));return{type:3,data:t}}return{type:4,data:this.robot}},validate:function(){return!("0"==this.tabIndex&&!this.base||"1"==this.tabIndex&&!this.business)||(dsf.layer.message("请选择一个环节",!1),!1)},initBase:function(){var e=this,t={};this.code&&(t.code=this.code),this.$http.get("component/loadBaseLinkGroupTree",t).then((function(t){if(t.data.success){var a=t.data.data[0],n=a?e.formatData(a,"13"):null;e.baseData=a?[n]:[]}}))},initBusiness:function(){var e=this,t={};this.code&&(t.code=this.code),this.$http.get("component/loadBlGroupTree",t).then((function(t){if(t.data.success){var a=t.data.data[0],n=a?e.formatData(a,"14"):null;e.businessData=a?[n]:[],e.loadedBusiness=!0}}))},initRobot:function(){var e=this,t={};this.code&&(t.code=this.code),this.$http.get("intellect/robot/loadRobotLinkGroupTree",t).then((function(t){if(t.data.success){var a=t.data.data[0],n=a?e.formatData(a):null;e.robotData=a?[n]:[],e.loadedRobot=!0}}))},formatData:function(e,t){if(e.label=e._name,e.id=e._id,e.children)for(var a=0;a<e.children.length;a++)this.formatData(e.children[a],t);return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{key:Math.random(),ref:"multipleTable",staticClass:"flow-select-table",staticStyle:{width:"100%"},attrs:{data:e.data,"header-align":"center",align:"center",height:e.height,border:"","tooltip-effect":"dark","row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.selectTable}},[e._l(e.columns,(function(t,n){var l=t.type,i=t.isSelect,s=t.prop,r=t.label,o=t.align,c=t.width,u=t.options,d=t.operate,f=t.fieldType;return[u||d||f||i?e._e():a("el-table-column",{key:s,attrs:{type:l,prop:s,label:r,width:c,align:o||"center"}}),u?a("el-table-column",{key:s,attrs:{type:l,prop:s,label:r,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticClass:"level",attrs:{placeholder:"请选择"},model:{value:t.row[s],callback:function(a){e.$set(t.row,s,a)},expression:"scope.row[prop]"}},e._l(u,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}],null,!0)}):e._e(),d?a("el-table-column",{key:s,attrs:{type:l,prop:s,label:r,width:c,fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteRow(t.row)}}},[a("i",{staticClass:"iconfont icon-delete"})])]}}],null,!0)}):e._e(),f&&"input"===f?a("el-table-column",{key:s,attrs:{type:l,prop:s,label:r,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row[s],callback:function(a){e.$set(t.row,s,a)},expression:"scope.row[prop]"}})]}}],null,!0)}):e._e(),f&&"editInput"===f?a("el-table-column",{key:s,attrs:{type:l,prop:s,label:r,width:c,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row[s+"Edit"]?e._e():a("span",{staticClass:"edit-filed",on:{click:function(e){t.row[s+"Edit"]=!0}}},[e._v(" "+e._s(t.row[s])+" ")]),t.row[s+"Edit"]?a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"请输入内容"},on:{blur:function(e){t.row[s+"Edit"]=!1},keyup:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.row[s+"Edit"]=!1}},model:{value:t.row[s],callback:function(a){e.$set(t.row,s,a)},expression:"scope.row[prop]"}}):e._e()]}}],null,!0)}):e._e(),i?a("el-table-column",{key:s,attrs:{type:l,prop:s,label:r,width:c,align:o||"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v(e._s(r)+"  ")]),a("el-checkbox",{attrs:{indeterminate:e.columns[n].isIndeterminate},on:{change:function(a){return e.checkAllChange(e.columns[n][s+"All"],s,e.columns[n],t)}},model:{value:e.columns[n][s+"All"],callback:function(t){e.$set(e.columns[n],s+"All",t)},expression:"columns[index][prop + 'All']"}})]}},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.selectRow(t.row[s],s,e.columns[n])}},model:{value:t.row[s],callback:function(a){e.$set(t.row,s,a)},expression:"scope.row[prop]"}})]}}],null,!0)}):e._e()]}))],2)},l=[],i={name:"SelectTable",props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},select:{type:Array,default:function(){return[]}},height:{type:[String,Number],default:function(){return 200}}},data:function(){return{}},created:function(){},mounted:function(){var e=this;this.select&&this.select.length>0&&this.select.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)}))},methods:{selectTable:function(e){this.$emit("update:select",e)},deleteRow:function(e){var t=this.data.indexOf(e);t>=0&&this.data.splice(t,1),this.$emit("deleteRow",e)},checkAllChange:function(e,t,a){this.data.forEach((function(a){var n;a[t]=e,null===a||void 0===a||null===(n=a.children)||void 0===n||n.forEach((function(a){a[t]=e}))})),a.isIndeterminate=!1},selectRow:function(e,t,a){var n=this.data.filter((function(e){return e[t]})),l=n.length;a[t+"All"]=l===this.data.length,a.isIndeterminate=l>0&&l<this.data.length}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"send-condition"},[a("div",{staticClass:"editor"},[a("EventSetting",{ref:"event",attrs:{language:e.language,code:e.config.Condition.Expression,readOnly:e.readOnly}})],1),a("div",{staticClass:"table"},[a("SelectTable",{attrs:{data:e.config.Condition.Switch.ItemValue,columns:e.columns}})],1)])},l=[],i={name:"SendCondition",props:{lines:{type:Array,default:function(){return[]}},nodes:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}},code:{type:String,default:""},language:{type:String,default:"javascript"}},data:function(){return{config:{IsEnabled:"1",Condition:{Expression:"",Switch:{ItemValue:[]}}},selectNodes:[],columns:[{prop:"LineName",label:"连线名称"},{prop:"Type",label:"条件",width:"140",options:[{label:"等于",value:0},{label:"包含",value:1},{label:"被包含",value:2},{label:"大于",value:3},{label:"大于等于",value:4},{label:"小于",value:5},{label:"小于等于",value:6},{label:"范围",value:7},{label:"有效",value:8}]},{prop:"Value",label:"值",fieldType:"input"}],readOnly:!1}},created:function(){this.initTabel()},mounted:function(){},methods:{getContent:function(){return this.config.Condition.Expression=this.$refs.event.getContent(),this.config},initTabel:function(){var e,t,a=this,n=this.value.Condition;n&&n.Switch&&n.Switch.ItemValue&&(t=n.Switch.ItemValue),n&&n.Expression&&(this.config.Condition.Expression=n.Expression);var l={};t&&t.length>0&&t.forEach((function(e){l[e.LineID]=e}));var i=this.config.Condition.Switch.ItemValue,s=this.getObjById(this.lines,null===(e=this.checked.out)||void 0===e?void 0:e[0]),r=s&&this.getObjById(this.nodes,s.to);this.readOnly="301"==(null===r||void 0===r?void 0:r.type),this.readOnly&&this.columns.forEach((function(e){delete e.options,delete e.fieldType}));var o=this.readOnly?r:this.checked,c=o.out;(null===c||void 0===c?void 0:c.length)>0&&c.forEach((function(e){a.lines.forEach((function(t){if(t.id===e){var a=l[t.id],n={Value:a&&a.Value||"",Type:dsf.isUnDef(a)?8:a.Type,LineID:t.id,LineName:t.name};i.push(n)}}))}))},getObjById:function(e,t,a){return e.find((function(e){return(a?e[a]:e.id)===t}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectFlow=t}}})],1)},l=[],i={name:"SetOpinionNode",props:{value:{type:String,default:function(){return""}},subNodes:{type:Array,default:function(){return[]}}},data:function(){return{flowData:[],selectFlow:null,checked:[]}},created:function(){this.initNodes()},mounted:function(){},methods:{yes:function(){return this.selectFlow},validate:function(){return!!this.selectFlow||(dsf.layer.message("请选择流程",!1),!1)},initNodes:function(){this.checked=[this.value],this.flowData=this.formatData(JSON.parse(JSON.stringify(this.subNodes)))},formatData:function(e,t){var a=this;return e.forEach((function(e){e.label=e.name,a.value===e.id&&(a.selectFlow=e)})),e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-set-params"},[a("SelectTable",{attrs:{data:e.data,columns:e.columns}}),a("p",{staticClass:"add-btn"},[a("el-button",{attrs:{type:"danger"},on:{click:e.deleteAll}},[e._v(" 删除所有 ")]),a("el-button",{attrs:{type:"success"},on:{click:e.addRow}},[e._v(" 新增一行 ")])],1)],1)},l=[],i={name:"SetParams",props:{value:{type:Array,default:function(){return[]}}},data:function(){return{data:[],columns:[{prop:"Key",label:"Key",fieldType:"editInput"},{prop:"Value",label:"Value",fieldType:"editInput"},{label:"操作",width:"100",operate:!0}]}},created:function(){this.init()},methods:{getContent:function(){var e=this.data.map((function(e){return{Key:e.Key,Value:e.Value}}));return e},init:function(){this.value&&this.value.length>0?this.data=this.value:this.addRow()},deleteAll:function(){this.data=[]},addRow:function(){this.data.push({Key:"",KeyEdit:!1,Value:"",ValueEdit:!1})}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form"},[a("el-form-item",{attrs:{label:"子流程类型"}},[a("el-select",{staticStyle:{width:"77%"},attrs:{name:"子流程类型"},model:{value:e.Mode,callback:function(t){e.Mode=t},expression:"Mode"}},[a("el-option",{attrs:{label:"引用",value:"0"}}),a("el-option",{attrs:{label:"复制",value:"1"}}),a("el-option",{attrs:{label:"新建",value:"2"}})],1)],1)],1),"2"!==e.Mode?a("SelectTree",{attrs:{"tree-data":e.flowData,select:e.selectFlow,checked:e.checked,"show-search":!0},on:{"update:select":function(t){e.selectFlow=t}}}):e._e()],1)},l=[],i=a(99),s={name:"SetSubFlow",components:{SelectTree:i["default"]},props:{value:{type:String,default:function(){return""}},mode:{type:Number,default:function(){return 0}}},data:function(){return{flowData:[],selectFlow:null,checked:[],Mode:String(this.mode)}},created:function(){this.initFlow()},mounted:function(){},methods:{yes:function(){return{Mode:Number(this.Mode),SubWFID:"2"!==this.Mode?this.selectFlow.dsfa_rm_id:null,SubWFName:"2"!==this.Mode?this.selectFlow.name:null}},validate:function(){return!!this.selectFlow||(dsf.layer.message("请选择流程",!1),!1)},initFlow:function(){var e=this;this.$http.get("rm/list/wf",{}).then((function(t){if(t.data.success){var a=t.data.data[0],n=a?e.formatData(a,"0"):null;e.flowData=a?[n]:[],e.currentData&&e.currentData.dsfa_rm_id&&(e.checked=[e.currentData.dsfa_rm_id],e.selectFlow=e.currentData),e.value&&(e.checked=[e.value])}}))},formatData:function(e,t){if(e.label=e.name,e.id=e.dsfa_rm_id,t&&(e.disabled=e.type_value===t),"4"!=e.type_value&&(e.nocheck=!0),"4"==e.type_value||e.children||(e.iconSkin="_special"),e.children)for(var a=0;a<e.children.length;a++)this.formatData(e.children[a],t);return this.value===e.id&&(this.selectFlow=e),e}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-sum-start-node"},[a("div",{staticClass:"proportion"},[a("label",[e._v("汇总比例：")]),a("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.Proportion,callback:function(t){e.Proportion=t},expression:"Proportion"}})],1),a("el-card",{staticClass:"box-card",attrs:{shadow:"never","body-style":"{ padding: '0px' }"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("汇总范围")])]),e.nodes&&e.nodes.length>0?a("SumStartNode",{ref:"startNode",attrs:{value:e.value.GatherRange,nodes:e.nodes}}):e._e()],1)],1)},l=[],i={name:"SumAllNode",props:{value:{type:Object,default:function(){return{Proportion:0,GatherRange:[]}}},nodes:{type:Array,default:function(){return[]}}},data:function(){return{Proportion:0,selects:[]}},created:function(){var e;this.Proportion=null!==(e=this.value.Proportion)&&void 0!==e?e:0},mounted:function(){},methods:{getContent:function(){var e=this.$refs.startNode.getContent();return{Proportion:this.Proportion,GatherRange:e}}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-sum-start-node"},[a("SelectTable",{attrs:{data:e.nodesData,select:e.selects,columns:e.columns,height:"400"},on:{"update:select":function(t){e.selects=t}}})],1)},l=[],i={name:"SumStartNode",props:{value:{type:Array,default:function(){return[]}},nodes:{type:Array,default:function(){return[]}}},data:function(){return{nodesData:[],selects:[],columns:[],content:""}},created:function(){this.columns=[{selection:!0,type:"selection",width:50},{prop:"label",label:"节点名称"},{prop:"Type",label:"任务类型"}],this.initNodes()},mounted:function(){},methods:{getContent:function(){return this.selects.map((function(e){return e.id}))},initNodes:function(){var e=this,t=_.cloneDeep(this.nodes),a=[],n=[];t.sort((function(e,t){var a,n;return((null===(a=e.attributes.BaseInfo)||void 0===a?void 0:a.ShowOrder)||0)-((null===(n=t.attributes.BaseInfo)||void 0===n?void 0:n.ShowOrder)||0)}));for(var l=function(){var l={id:t[i].id,label:t[i].name,level:1,Type:t[i].attributes.BaseInfo.Type};a.push(l),e.value&&e.value.forEach((function(e){e===l.id&&n.push(l)}))},i=0;i<t.length;i++)l();this.nodesData=a,this.selects=n}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flow-summary"},[a("p",[a("span",[e._v("汇总比例：")]),a("el-input-number",{attrs:{"controls-position":"right",min:0,max:100},model:{value:e.config.Proportion,callback:function(t){e.$set(e.config,"Proportion",t)},expression:"config.Proportion"}}),a("span",[e._v("%")])],1),a("div",{staticClass:"table"},[a("SelectTable",{attrs:{data:e.nodesData,select:e.selectNodes,columns:e.columns},on:{"update:select":function(t){e.selectNodes=t}}})],1)])},l=[],i={name:"Summary",props:{lines:{type:Array,default:function(){return[]}},checked:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},data:function(){return{config:{Proportion:0,GatherRange:""},nodesData:[],selectNodes:[],columns:[{selection:!0,type:"selection",width:50},{prop:"label",label:"连线名称",align:"left"}]}},created:function(){this.initTabel()},mounted:function(){},methods:{getContent:function(){return this.config.GatherRange=this.selectNodes.map((function(e){return e.value})).join(","),this.config},initTabel:function(){var e=this,t=this.value,a=t.GatherRange,n=t.Proportion,l=a&&a.split(",")||[];this.config.Proportion=n||0,this.selectNodes=[],this.nodesData=[];for(var i=function(){var t=e.lines[s];if(t.id!=e.checked.id){var a={value:t.id,label:t.name};e.nodesData.push(a),l&&l.length>0&&l.forEach((function(n){n===t.id&&e.selectNodes.push(a)}))}},s=0;s<this.lines.length;s++)i()}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-func-edit"},[a("MonacoEditor",{ref:"editor",attrs:{height:"300",width:"100%",language:"javascript"},on:{mounted:e.editorLoaded}})],1)},l=[],i={name:"customFuncEdit",mixins:[$mixins.propertyDialogSetting],props:{functionContainer:{type:String,default:""}},methods:{yes:function(){return this.$refs["editor"].getContent()},editorLoaded:function(){var e=this;this.$nextTick((function(){e.$refs["editor"].setContent(e.functionContainer)}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formula-edit-wrapper"},[a("div",{staticClass:"formula-edit-box"},[a("div",{ref:"contentEditable",staticClass:"formula-edit",attrs:{contentEditable:"true"},on:{keydown:e.keydown,input:e.recordPosition,selectstart:e.recordPosition,paste:e.recordPosition,cut:e.recordPosition,click:function(t){e.contendEditClick(t),e.recordPosition(t)}}}),e.showFormList?a("ul",{style:e.ListStyle,on:{keydown:e.keydownwords}},[a("el-autocomplete",{ref:"search",staticClass:"inline-input",attrs:{size:"small","fetch-suggestions":e.querySearch,placeholder:"请输入关键字筛选表单"},on:{select:e.handleSelect,blur:e.clearSign},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[a("div",{staticClass:"name"},[e._v(e._s(n.name))])]}}],null,!1,1959948405),model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1):e._e(),e.showMathList?a("ul",{style:e.ListStyle,on:{keydown:e.keydownwords}},[a("el-autocomplete",{ref:"search",staticClass:"inline-input",attrs:{"popper-class":"form-autocomplete",size:"small","fetch-suggestions":e.querySearchMath,placeholder:"请输入关键字筛选公式"},on:{select:e.handleSelectMath,blur:e.clearSign},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[a("div",{staticClass:"name"},[e._v(e._s(n.value)+" ")]),a("span",{staticClass:"value"},[e._v(e._s(n.name)+" "),a("span",[e._v(e._s(e.functionTypeMap.get(n.type)))])])]}}],null,!1,3034595572),model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1):e._e()])])},l=[],i=a(2),s=a.n(i),r=a(94),o=a(82);function c(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=u(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(r)throw i}}}}function u(e,t){if(e){if("string"===typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var f=new Map([[-1,"高级函数"],[1,"数学函数"],[2,"日期函数"],[3,"逻辑函数"],[4,"文本函数"],[5,"身份证函数"],[6,"数组函数"]]),p={props:{expression:{type:String,default:""},customFuncList:{type:Map,default:function(){return new Map}},restaurants:{type:Array,default:function(){return[]}}},data:function(){return{functionTypeMap:f,searchName:"",currentSelection:null,insertChildIndex:0,rangeOffset:0,top:0,left:0,showFormList:!1,showMathList:!1,selectItemIndex:0}},computed:{ListStyle:function(){return{top:"".concat(this.top+10,"px"),left:"".concat(this.left+10,"px")}}},created:function(){this.focusEdit=_.throttle(this._focusEdit,150,{leading:!1,trailing:!0})},beforeDestroy:function(){this.focusEdit.cancel()},methods:{keydownwords:function(e){"Backspace"===e.key&&""===this.searchName&&this.clearSign()},checkEmpty:function(){var e=this;setTimeout((function(){var t=e.$refs.contentEditable;_.trim(t.innerText)||(t.innerHTML="")}),10)},recordPosition:function(){var e=this.currentSelection,t=this.$refs.contentEditable;if(e&&e.rangeCount>0){var a=e.getRangeAt(0);this.insertChildIndex=0,this.rangeOffset=0;for(var n=0;n<t.childNodes.length;n++)if(t.childNodes[n]===a.endContainer){this.insertChildIndex=n,this.rangeOffset=a.endOffset;break}}},_focusEdit:function(e,t){var a=this,n=this.$refs.contentEditable;n.focus(),this.contendEditClick(),setTimeout((function(){n.childNodes.length&&a.currentSelection.collapse(n.childNodes[a.insertChildIndex],a.rangeOffset);var l=a.currentSelection;if(l.rangeCount>0){var i=l.getRangeAt(0),s=i.createContextualFragment('<span contentEditable="true" class="list-sign">'.concat(t,"</span>"));i.insertNode(s),l.removeAllRanges()}"@"===t?a.createMathItem(e):a.createFormItem(e)}),10)},clearSign:function(){var e=this;setTimeout((function(){$(".list-sign").remove(),e.showFormList=!1,e.showMathList=!1,e.searchName=""}),200)},handleSelect:function(e){this.createFormItem(e)},handleSelectMath:function(e){this.createMathItem(e)},querySearch:function(e,t){var a=this.restaurants,n=e?a.filter((function(t){return~t.value.indexOf(e)})):a;t(n)},querySearchMath:function(e,t){var a=new Map([].concat(s()(o["default"]),s()(this.customFuncList))),n=s()(a.keys()).map((function(e){return{name:a.get(e).title,value:e,type:a.get(e).type}})),l=e?n.filter((function(t){return t.value.startsWith(e.toUpperCase())})):n;t(l)},loadContentEditable:function(){this.contendEditClick()},contendEditClick:function(){this.currentSelection=window.getSelection?window.getSelection():document.selection},inputTransform:function(){},keydown:function(e){var t=this;if("Backspace"===e.key||"Delete"===e.key){var a=this.$refs.contentEditable,n=this.currentSelection.getRangeAt(0),l="Backspace"===e.key?n.startContainer.parentNode:n.endContainer.parentNode;"SPAN"==l.nodeName&&(a.removeChild(l),e.preventDefault())}this.checkEmpty();var i=r["default"].get(e.key);"function"===typeof i&&i.call(this,e),setTimeout((function(){for(var e=Array.from(t.$refs.contentEditable.childNodes).filter((function(e){return 3===e.nodeType})),a=0;a<e.length;a++){var n,l=e[a],i=l.textContent,r=new Map([].concat(s()(o["default"]),s()(t.customFuncList))),u=c(r.keys());try{for(u.s();!(n=u.n()).done;){var d=n.value;if(i.indexOf(d)>-1){for(var f=t.$refs.contentEditable,p=0;p<f.childNodes.length;p++)if(f.childNodes[p].textContent.indexOf(d)>=0){t.insertChildIndex=p;break}i=i.replace(r.get(d).reg,"@");var h=i.substr(0,i.indexOf("@")),m=i.substr(i.indexOf("@")+1),b=document.createDocumentFragment(),v=document.createTextNode(" "),g=document.createTextNode("("),y=document.createTextNode(")"),x=document.createTextNode(h),w=document.createTextNode(m),_=document.createElement("span");_.className="mathematical",_.setAttribute("contentEditable",!0),_.setAttribute("title",r.get(d).title),_.innerHTML=r.get(d).label,b.appendChild(x),b.appendChild(v),b.appendChild(_),b.appendChild(g),b.appendChild(y),b.appendChild(w),l.parentNode.insertBefore(b,l.nextSibling),$(l).remove(),t.currentSelection.collapse(f.childNodes[t.insertChildIndex+4],0),t.insertChildIndex+=3;break}}}catch(err){u.e(err)}finally{u.f()}}}),10)},createMathItem:function(e){var t=document.createDocumentFragment(),a=document.createTextNode(" "),n=document.createTextNode("("),l=document.createTextNode(")"),i=document.createElement("span");i.className="mathematical",i.setAttribute("contentEditable",!0),i.setAttribute("title",e.name),i.innerHTML=e.value,t.appendChild(a),t.appendChild(i),t.appendChild(n),t.appendChild(l),document.querySelector(".list-sign").parentNode.insertBefore(t,document.querySelector(".list-sign").nextSibling);var s,r=this.$refs.contentEditable;r.focus(),r.childNodes[this.insertChildIndex+5]?(s=r.childNodes[this.insertChildIndex+4],this.insertChildIndex+=4):(s=r.childNodes[this.insertChildIndex+3],this.insertChildIndex+=3),this.currentSelection.collapse(s,1),this.clearSign()},createFormItem:function(e){var t=document.createDocumentFragment(),a=document.createTextNode(" "),n=document.createTextNode(" "),l=document.createElement("span");l.className="form-key",l.setAttribute("contentEditable",!0),l.setAttribute("real",e.value),l.innerHTML=e.name,t.appendChild(a),t.appendChild(l),t.appendChild(n),document.querySelector(".list-sign").parentNode.insertBefore(t,document.querySelector(".list-sign").nextSibling);var i,s=this.$refs.contentEditable;s.focus(),s.childNodes[this.insertChildIndex+4]?(i=s.childNodes[this.insertChildIndex+4],this.insertChildIndex+=3):(i=s.childNodes[this.insertChildIndex+3],this.insertChildIndex+=2),this.currentSelection.collapse(i,1),this.clearSign()},getExpression:function(){var e=Array.from(this.$refs.contentEditable.childNodes),t="";return e.forEach((function(e){switch(e.nodeType){case 3:var a=e.nodeValue,n=a.split(String.fromCharCode(160));a=n.join(" "),t+=a;break;case 1:if("mathematical"===e.className){var l=e.innerText,i=l.split(String.fromCharCode(160));l=i.join(" "),t+=l}else{var s=e.getAttribute("real");t+="{{".concat(s,"}}")}break}})),t},expressToHTML:function(e){var t={},a=0;e=e.replace(/({{\^\^[\u4e00-\u9fa5\w\s-|]+\^\^}})/g,(function(e){var n="{{".concat(a++,"}}");return t[n]=e.replace(/{{|}}/g,""),n}));var n,l=new Map([].concat(s()(o["default"]),s()(this.customFuncList))),i=c(l.keys());try{for(i.s();!(n=i.n()).done;){var r=n.value;e.indexOf(r)>-1&&(e=e.replace(l.get(r).reg,'<span title="'.concat(l.get(r).title,'" class="mathematical" contentEditable="true">').concat(l.get(r).label,"</span>")))}}catch(err){i.e(err)}finally{i.f()}var u=this.getRestaurantsArray(this.restaurants),d=e.replace(/({{[\u4e00-\u9fa5\d\w|\-+?'"<>=\/\\\s]+}})/g,(function(e){var a=t[e],n=u.find((function(e){return e.value===a}));return n?'<span contentEditable="true" real="'.concat(a,'" class="form-key">').concat(n.name,"</span>"):'<span contentEditable="true" real="undefined" class="form-key">undefined</span>'}));return this.$refs.contentEditable.innerHTML=d,d},getRestaurantsArray:function(){var e=[];function t(a){e.push(a),a.children&&a.children.length>0&&_.each(a.children,(function(e){t(e)}))}return _.each(this.restaurants,(function(e){t(e)})),e}}},h=p,m=a(0),b=Object(m["a"])(h,n,l,!1,null,null,null);t["default"]=b.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{overflow:"auto",height:"100%",border:"1px solid #d4d4d4"},attrs:{width:"30%"}},[a("el-table",{ref:"table",attrs:{data:e.buttonsTable,"highlight-current-row":""},on:{"current-change":e.currentChangeHandler}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{label:"按钮名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.text))])]}}])})],1)],1),a("el-main",{staticStyle:{padding:"0px",border:"1px solid #d4d4d4","margin-left":"10px"}},[a("el-tree",{ref:"tree",attrs:{"node-key":"_id","show-checkbox":"","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":!0,data:e.treeData,props:e.treeProps},on:{"check-change":e.checkChangeHandler}})],1)],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"DesFunctionSetting",props:{buttons:{type:Array,default:function(){return[]}}},data:function(){return{treeData:[],treeProps:{label:"_name"},buttonsTable:[],currentSelectRow:null}},mounted:function(){var e=this;return s()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOuaRulesTree();case 2:a=t.sent,e.buttonsTable=_.map(e.buttons,(function(e){return e.setting?dsf.mix(!0,{},e):void 0})),e.buttonsTable=_.filter(e.buttonsTable,(function(e){return e})),e.treeData=a,e.$refs.table.setCurrentRow(e.buttonsTable[0]);case 7:case"end":return t.stop()}}),t)})))()},methods:{getOuaRulesTree:function(){var e=this;return s()(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$webAPI.getOuaRulesTree().then((function(e){return e.data})).catch((function(e){throw dsf.layer.pc.message("加载角色树失败",!1),e})));case 1:case"end":return t.stop()}}),t)})))()},currentChangeHandler:function(e){this.currentSelectRow=e;var t=this.currentSelectRow.roles;t=_.map(t,"id"),this.$refs.tree.setCheckedKeys(t)},checkChangeHandler:function(e,t,a){if(e&&this.currentSelectRow&&2==e.type_value)if(t){var n=_.findIndex(this.currentSelectRow.roles,(function(t){return t.id===e._id}));n>=0&&this.currentSelectRow.roles.splice(n,1),this.currentSelectRow.roles.push({id:e._id,name:e._name,serial_number:e.serial_number})}else dsf.array.remove(this.currentSelectRow.roles,(function(t,a){return t.id==e._id}))},yes:function(){return this.buttonsTable}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-grid-layout-cell-setting"},[a("el-main",{staticStyle:{padding:"0px"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"字体大小"}},[a("el-select",{model:{value:e.form.fontSize,callback:function(t){e.$set(e.form,"fontSize",t)},expression:"form.fontSize"}},[a("el-option",{attrs:{label:"1号字(34px)",value:"ds-font1"}}),a("el-option",{attrs:{label:"2号字(24px)",value:"ds-font2"}}),a("el-option",{attrs:{label:"3号字(18px)",value:"ds-font3"}}),a("el-option",{attrs:{label:"4号字(16px)",value:"ds-font4"}}),a("el-option",{attrs:{label:"5号字(14px)",value:"ds-font5"}}),a("el-option",{attrs:{label:"6号字(12px)",value:"ds-font6"}})],1)],1),a("el-form-item",{attrs:{label:"是否加粗"}},[a("el-radio-group",{model:{value:e.form.bold,callback:function(t){e.$set(e.form,"bold",t)},expression:"form.bold"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"字体颜色"}},[a("DsfInputColor",{attrs:{placeholder:"#606266"},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1),a("el-form-item",{attrs:{label:"高度"}},[a("el-input",{attrs:{placeholder:"auto"},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1),a("el-form-item",{attrs:{label:"行间距"}},[a("el-select",{model:{value:e.form.lineHeight,callback:function(t){e.$set(e.form,"lineHeight",t)},expression:"form.lineHeight"}},[a("el-option",{attrs:{label:"默认",value:"normal"}}),a("el-option",{attrs:{label:"1.2倍",value:"1.2em"}}),a("el-option",{attrs:{label:"1.5倍",value:"1.5em"}}),a("el-option",{attrs:{label:"2倍",value:"2em"}})],1)],1),a("el-form-item",{attrs:{label:"文字最大显示行数"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:5},model:{value:e.form.lineNum,callback:function(t){e.$set(e.form,"lineNum",t)},expression:"form.lineNum"}}),a("span",{staticStyle:{display:"inline-block","margin-left":"10px",color:"#c0c0c0"}},[e._v(" (0表示不省略且根据内容自动撑开容器)")])],1),a("el-form-item",{attrs:{label:"水平对齐方式"}},[a("el-select",{model:{value:e.form.align,callback:function(t){e.$set(e.form,"align",t)},expression:"form.align"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居中",value:"center"}}),a("el-option",{attrs:{label:"居右",value:"right"}})],1)],1),a("el-form-item",{attrs:{label:"垂直对齐方式"}},[a("el-select",{model:{value:e.form.verticalAlign,callback:function(t){e.$set(e.form,"verticalAlign",t)},expression:"form.verticalAlign"}},[a("el-option",{attrs:{label:"居上",value:"top"}}),a("el-option",{attrs:{label:"居中",value:"middle"}}),a("el-option",{attrs:{label:"居下",value:"bottom"}})],1)],1),a("el-form-item",{attrs:{label:"边距"}},[a("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 上： "),a("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingTop,callback:function(t){e.$set(e.form,"paddingTop",t)},expression:"form.paddingTop"}})],1),a("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 右："),a("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingRight,callback:function(t){e.$set(e.form,"paddingRight",t)},expression:"form.paddingRight"}})],1),a("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 下："),a("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingBottom,callback:function(t){e.$set(e.form,"paddingBottom",t)},expression:"form.paddingBottom"}})],1),a("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[e._v(" 左："),a("el-input-number",{staticStyle:{width:"90px"},attrs:{"controls-position":"right",min:0,max:20},model:{value:e.form.paddingLeft,callback:function(t){e.$set(e.form,"paddingLeft",t)},expression:"form.paddingLeft"}})],1)])],1)],1)],1)},l=[],i={name:"DesGridLayoutCellSetting",mixins:[$mixins.propertyDialogSetting],props:{cells:{type:Array,default:function(){return[]}},owner:{type:Object,default:function(){return{}}}},data:function(){return{form:{fontSize:"",align:"left",verticalAlign:"middle",color:"#333",paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,lineNum:0,height:"auto",lineHeight:"normal",bold:!1}}},computed:{},created:function(){var e=this.cells[0]||null;if(e){var t=this.owner.contentLayout.setting?this.owner.contentLayout.setting[e.name]:{};t=t||{},this.form.fontSize=t.fontSize||"ds-font5",this.form.align=t.align||"left",this.form.verticalAlign=t.verticalAlign||"middle",this.form.color=t.color||"",this.form.paddingTop=t.paddingTop||0,this.form.paddingRight=t.paddingRight||0,this.form.paddingBottom=t.paddingBottom||0,this.form.paddingLeft=t.paddingLeft||0,this.form.lineNum=t.lineNum||0,this.form.height=t.height||"auto",this.form.lineHeight=t.lineHeight||"normal",this.form.bold=t.bold||!1}},beforeMount:function(){},mounted:function(){},methods:{yes:function(){var e=this,t={};return _.each(this.cells,(function(a){t[a.name]=dsf.mix({},e.form)})),t}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-grid-layout-setting"},[a("el-main",{staticStyle:{padding:"0px"}},[a("table",{staticClass:"table"},[a("tr",e._l(e.colNum,(function(t){return a("td",{key:t},[a("dsf-textbox",{attrs:{"show-label":!1},model:{value:e.widths[t-1],callback:function(a){e.$set(e.widths,t-1,a)},expression:"widths[$index-1]"}})],1)})),0)])])],1)},l=[],i={name:"DesGridLayout",mixins:[$mixins.propertyDialogSetting],data:function(){return{widths:[],heights:[],tableData:[]}},computed:{rowNum:function(){return this.tableData.length},colNum:function(){return this.tableData.length?this.tableData[0].length:0},areas:function(){var e=[],t=_.flattenDeep(this.tableData);return e=t.concat(t),e=_.uniq(e),e=e.sort((function(e,t){return e<t?-1:1})),e=_.map(e,(function(e){return{text:"区域"+e,value:e}})),e}},created:function(){this.tableData=dsf.mix(!0,[],this.owner.contentLayout.grid),this.widths=dsf.mix(!0,[],this.owner.contentLayout.widths),this.heights=dsf.mix(!0,[],this.owner.contentLayout.heights)},beforeMount:function(){},mounted:function(){},methods:{rowClickHandler:function(){},addCol:function(){for(var e=[],t=0;t<this.rowNum;t++){for(var a=[],n=0;n<=this.colNum;n++)if(n==this.colNum)a.push(t*(this.colNum+1)+n+1);else{var l=this.tableData[t][n],i=(l-1)%this.colNum,s=(l-i-1)/this.colNum;a.push(s*(this.colNum+1)+i+1)}e.push(a)}this.widths=new Array(this.colNum+1).fill(this.pxToRem(+(100/(this.colNum+1)).toFixed(3)+"%")),this.tableData=e},addRow:function(){for(var e=[],t=1;t<=this.colNum;t++)e.push(this.colNum*this.rowNum+t);this.tableData.push(e),this.heights.push("46px")},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var a=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+a.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},areaChange:function(e,t,a){},yes:function(){this.owner.contentLayout.widths=this.widths,this.owner.contentLayout.heights=this.heights,this.owner.$forceUpdate()},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #eee"},attrs:{width:"40%"}},[a("div",{staticClass:"design-column-edit"},[e.isReload?e._e():a("el-tree",{ref:"tree",attrs:{data:e.treeData,"highlight-current":!0,"expand-on-click-node":!1,"render-after-expand":!0,"default-expand-all":!0,"node-key":"id",props:e.defaultProps},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(" "+e._s(n.label)+" "),a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(l.hide?"[隐藏]":""))]),n.parent.data.isRoot?a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(l.fixed?"[锁定]":""))]):e._e()]),a("span",[a("dsf-button",{attrs:{title:"添加子项",size:"small","btn-style":"icon-text",icon:"hao"},on:{click:function(t){return t.stopPropagation(),e.append(l)}}}),l.isRoot?[a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"}}),a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"}}),a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"}})]:[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(t){return t.stopPropagation(),e.remove(n)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(t){return t.stopPropagation(),e.up(n)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(t){return t.stopPropagation(),e.down(n)}}})]],2)])}}],null,!1,2825849751)})],1)]),a("el-main",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"列名称"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),a("el-form-item",{attrs:{label:"列标识(二次开发用)"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-form-item",{attrs:{label:"表头对齐方式"}},[a("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.headerAlign,callback:function(t){e.$set(e.form,"headerAlign",t)},expression:"form.headerAlign"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居右",value:"right"}}),a("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),a("el-form-item",{attrs:{label:"数据对齐方式"}},[a("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.align,callback:function(t){e.$set(e.form,"align",t)},expression:"form.align"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居右",value:"right"}}),a("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),a("el-form-item",{attrs:{label:"宽度"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}})],1),a("el-form-item",{attrs:{label:"最小宽度"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.minWidth,callback:function(t){e.$set(e.form,"minWidth",t)},expression:"form.minWidth"}})],1),e.formNode&&e.formNode.parent.data.isRoot?a("el-form-item",{attrs:{label:"是否冻结列"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.fixed,callback:function(t){e.$set(e.form,"fixed",t)},expression:"form.fixed"}}),a("span",{staticStyle:{color:"#f56c6c","line-height":"normal"}},[e._v("* 被冻结的列将会固定在页面最左侧")])],1):e._e()],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(2),o=a.n(r),c=a(1),u=a.n(c),d={name:"DesHeadColumnsEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{isReload:!1,tableData:[],columns:[],data:[],treeData:[{id:dsf.uuid(),label:"表头",isRoot:!0,level:-1,children:[]}],defaultProps:{children:"children",label:"label"},form:null,formNode:null,formDisabled:{label:"",code:"",align:"center",headerAlign:"center",hide:!1,width:"",readOnly:!0,filterInfo:{}},tableMetaData:null}},props:{isSubTable:{type:Boolean,default:!1}},watch:{"form.hide":{handler:function(e){var t=this.form;if(t&&!t.readOnly){if(this.formNode&&t.level>0){var a=this.formNode.parent.data.hide;if(a&&a!=e)return dsf.layer.pc.message("父列为隐藏状态时子列不可设置显示状态",!1),void(t.hide=a)}this.deep(t,(function(t){t.hide=e}))}}},"form.isFilter":{handler:function(e,t){e&&this.loadTableMetaData()},immediate:!0}},created:function(){this.form=this.formDisabled},mounted:function(){if(this.owner){var e,t=this.owner.$$getComponent(),a=dsf.mix(!0,{},t.headColumns);(e=this.treeData[0].children).push.apply(e,o()(this.getTreeData(a,0,null)))}},methods:{getTreeData:function(e,t,a){var n=this,l=[];return _.each(e,(function(e,a){var i=dsf.mix({},p(),{id:e.id,level:t,code:e.code,label:e.label,columnId:e.columnId,headerAlign:e.headerAlign,align:e.align,hide:e.hide,width:e.width,minWidth:e.minWidth,prefix:e.prefix||"",suffix:e.suffix||"",required:e.required||!1,fixed:e.fixed||!1,isFilter:e.isFilter||!1,filterInfo:e.filterInfo||{},index:a});l.push(i);var s=/\d+_\d+/g;i.id&&!s.test(i.id)||(i.id=dsf.uuid());var r=n.getTreeData(e.children,t+1,i);i.children=r})),l},deep:function(e,t,a,n){var l=this;t&&t(e,a,n),e.children&&_.each(e.children,(function(e,n){l.deep(e,t,a+1,n)}))},append:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.treeData[0],t=e.children.length+1,a=dsf.mix({},p(),{id:dsf.uuid(),label:"新建列",level:e.level+1,hide:e.hide,index:t,width:120});e.children.push(a)},remove:function(e){var t=e.parent;dsf.array.remove(t.data.children,e.data)},up:function(e){f.call(this,e,"up")},down:function(e){f.call(this,e,"down")},nodeClick:function(e,t){e.isRoot?(this.form=this.formDisabled,this.formNode=null):(this.form=e,this.formNode=t,this.formNode.filterInfoCopy=dsf.mix(!0,{},this.formNode.filterInfo))},getColumnsMap:function(){var e=[];return this.deep(this.treeData[0],(function(t){e.push(t)})),e},getMetaTreeData:function(e,t){var a=this;return s()(u.a.mark((function n(){var l,i,s;return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=[],"8"!=t){n.next=8;break}return i={rmId:e.rmId},n.next=5,a.$webAPI.getDbSourceFieldsTree(i);case 5:l=n.sent,n.next=13;break;case 8:if("3"!=t){n.next=13;break}return s={namespace:e.at},n.next=12,a.$webAPI.getMetaDataFieldsTree(s);case 12:l=n.sent;case 13:return n.abrupt("return",l);case 14:case"end":return n.stop()}}),n)})))()},getMetaDataListFormTree:function(e){if(e.children){var t=e.children,a=[];return _.each(t,(function(e){1==e.valueAttributes.length?a.push({fieldCaption:e.fieldCaption,filed:e.id}):e.valueAttributes.length>1&&_.each(e.valueAttributes,(function(e){a.push({fieldCaption:e.fieldCaption,filed:e.id})}))})),a}},loadTableMetaData:function(){var e=this;return s()(u.a.mark((function t(){var a,n,l,i,s;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.tableMetaData){t.next=15;break}if(a=e.owner.$$getComponent(),n=a.$getChildMetadataList(),n&&!(n.length<1)){t.next=6;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 6:if(l=n[0].metadata.at,l){t.next=10;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 10:return t.next=12,a.$getMetadataTree(n);case 12:i=t.sent,s=e.getMetaDataListFormTree(i[0]),e.tableMetaData=s;case 15:case"end":return t.stop()}}),t)})))()},showEmunEditor:function(e){var t=this;this.$openDialog({content:"DesEnumEditor",width:"900px",params:{currentData:e.dataSource||{code:null,type:"dict"}},btns:[{text:"确定",handler:function(a){if(a.yes){var n=a.yes();t.$set(e,"dataSource",n)}}},{text:"取消"}]})},yes:function(){var e=this.getColumnsMap();this.deep(this.treeData[0]||[],(function(t,a,n){if(t.children&&0!=t.children.length)t.children&&t.children.length>0&&(t.columnId="");else if(!t.columnId){var l=_.map(e,"columnId"),i=1,s="table-row-"+dsf.math.numToEnglishLetter(i);while(l.indexOf(s)>=0)l=_.map(e,"columnId"),s="table-row-"+dsf.math.numToEnglishLetter(++i);t.columnId=s}t.isFilter||(t.filterInfo={}),t.filterInfo&&(dsf.isEqualObject(t.filterInfo,t.filterInfoCopy||{})||(t.filterInfo.isUser=!0),"enum"!=t.filterInfo.type&&delete t.filterInfo.dataSource),t.level=a,t.index=n,t.id||(t.id=dsf.uuid())}),0,0);var t=this.treeData[0].children;return _.forEach(t,(function(e){e.children.length&&dsf.deepForEach(e.children,(function(t){t.fixed=e.fixed}),{isLast:!0})})),t}}};function f(e,t){var a=e.parent,n=a.childNodes.indexOf(e),l="up"==t?n>0:n<=a.childNodes.length-1;if(l){var i="up"==t?n-1:n+1,s=a.childNodes[i];this.$set(a.data.children,i,e.data),this.$set(a.data.children,n,s.data),this.$set(a.childNodes,i,e),this.$set(a.childNodes,n,s)}}function p(){var e={id:"",level:0,label:"",headerAlign:"center",align:"center",columnId:"",children:[],hide:!1,resizable:!1,prefix:"",suffix:"",required:!1,fixed:!1,isFilter:!1,filterInfo:{}};return dsf.mix({},e)}var h=d,m=a(0),b=Object(m["a"])(h,n,l,!1,null,null,null);t["default"]=b.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-icon-box"},[a("div",{staticClass:"des-icon-search-box"},[a("form",{attrs:{action:""},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.search.apply(null,arguments)}}},[a("el-input",{scopedSlots:e._u([{key:"append",fn:function(){return[a("DsfIcon",{staticStyle:{cursor:"pointer"},attrs:{name:"sousuo"},on:{click:function(t){return e.search()}}})]},proxy:!0}]),model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}})],1)]),a("div",{staticClass:"des-icon-conent-box"},[a("div",{staticClass:"des-icon-list"},e._l(e.result,(function(t){return a("div",{key:t.icon_id,class:{selected:t==e.selectIcon},on:{click:function(a){return e.selectHandler(t)}}},[a("i",{staticClass:"iconfont",class:["icon-"+t.font_class]}),a("span",{staticClass:"name"},[e._v(e._s(t.name))]),a("span",{staticClass:"value"},[e._v(e._s("icon-"+t.font_class))])])})),0)])])},l=[],i={name:"DesIconSelect",mixins:[$mixins.propertyDialogSetting],props:{icon:{type:String,default:""}},data:function(){return{searchStr:"",items:[],result:[],selectIcon:null}},computed:{$items:function(){var e=this.searchStr;if(e){var t=_.filter(this.items,(function(t){return t.name.indexOf(e)>=0}));return t}return this.items}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var e=this,t=this.icon;t=t.replace(/^icon-/g,""),this.$http.get("/static/iconfont/".concat(dsf.config.runType,"/iconfont.json")).then((function(a){var n=a.data;e.items=n.glyphs,e.result=e.items,e.selectIcon=_.find(e.items,(function(e){return e.font_class==t})),e.$nextTick((function(){var t=e.$el.querySelector(".selected");t&&t.scrollIntoView({behavior:"instant",block:"start",inline:"nearest"})}))})).catch((function(t){e.$message("图标库加载失败")}))},beforeDestroy:function(){},destroyed:function(){},methods:{search:function(){var e=this.searchStr;if(e){var t=_.filter(this.items,(function(t){return t.name.indexOf(e)>=0||("icon-"+t.font_class).indexOf(e)>=0}));this.result=t}else this.result=this.items},selectHandler:function(e){this.selectIcon=e},yes:function(){var e;return(null===this||void 0===this||null===(e=this.selectIcon)||void 0===e?void 0:e["font_class"])||null}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"data-grid-import-options",staticStyle:{height:"100%"}},[a("el-aside",{staticClass:"field-list",staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"40%"}},[a("div",{staticClass:"field-list-head"},[a("dsf-button",{on:{click:e.add}},[e._v("新增")])],1),a("div",{staticStyle:{overflow:"auto",height:"100%"}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.fields,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{property:"titleName",label:"Excl标题名称",width:"120"}}),a("el-table-column",{attrs:{property:"fieldName",label:"数据库字段"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(t){return t.stopPropagation(),e.remove(n)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(t){return t.stopPropagation(),e.up(n)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(t){return t.stopPropagation(),e.down(n)}}})]}}])})],1)],1)]),a("el-main",{staticStyle:{padding:"0px"}},[a("el-form",{ref:"form",attrs:{model:e.acField,"label-width":"140px",rules:e.rules}},[a("el-form-item",{attrs:{label:"Excl标题名称",prop:"titleName"}},[a("el-input",{model:{value:e.acField.titleName,callback:function(t){e.$set(e.acField,"titleName",t)},expression:"acField.titleName"}})],1),a("el-form-item",{attrs:{label:"表头最小宽度"}},[a("el-input",{model:{value:e.acField.headWidth,callback:function(t){e.$set(e.acField,"headWidth",t)},expression:"acField.headWidth"}})],1),a("el-form-item",{attrs:{label:"数据库字段",prop:"fieldName"}},[a("el-input",{model:{value:e.acField.fieldName,callback:function(t){e.$set(e.acField,"fieldName",t)},expression:"acField.fieldName"}})],1),a("el-form-item",{attrs:{label:"错误类型",prop:"promptType"}},[a("el-radio-group",{model:{value:e.acField.promptType,callback:function(t){e.$set(e.acField,"promptType",t)},expression:"acField.promptType"}},[a("el-radio",{attrs:{label:1}},[e._v("强制")]),a("el-radio",{attrs:{label:2}},[e._v("警告")])],1)],1),a("el-form-item",{attrs:{label:"必填"}},[a("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:e.acField.isRequired,callback:function(t){e.$set(e.acField,"isRequired",t)},expression:"acField.isRequired"}})],1),a("el-form-item",{attrs:{label:"验证方法"}},[a("el-select",{attrs:{placeholder:"请选择验证方法"},model:{value:e.acField.validationMethod,callback:function(t){e.$set(e.acField,"validationMethod",t)},expression:"acField.validationMethod"}},e._l(e.validationMethodOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"chinese"==e.acField.validationMethod||"string"==e.acField.validationMethod||"number"==e.acField.validationMethod,expression:"\n          acField.validationMethod == 'chinese' ||\n            acField.validationMethod == 'string' ||\n            acField.validationMethod == 'number'\n        "}],attrs:{label:"chinese"==e.acField.validationMethod||"string"==e.acField.validationMethod?"文本最小长度":"数字最小数",prop:"min"}},[a("el-input",{attrs:{type:"number"},model:{value:e.acField.min,callback:function(t){e.$set(e.acField,"min",t)},expression:"acField.min"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"chinese"==e.acField.validationMethod||"string"==e.acField.validationMethod||"number"==e.acField.validationMethod,expression:"\n          acField.validationMethod == 'chinese' ||\n            acField.validationMethod == 'string' ||\n            acField.validationMethod == 'number'\n        "}],attrs:{label:"chinese"==e.acField.validationMethod||"string"==e.acField.validationMethod?"文本最大长度":"数字最大数",prop:"max"}},[a("el-input",{attrs:{type:"number"},model:{value:e.acField.max,callback:function(t){e.$set(e.acField,"max",t)},expression:"acField.max"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"number"==e.acField.validationMethod,expression:"acField.validationMethod == 'number'"}],attrs:{type:"number",label:"小数点后保留位数"}},[a("el-input",{attrs:{type:"number"},model:{value:e.acField.scaleDecimal,callback:function(t){e.$set(e.acField,"scaleDecimal",t)},expression:"acField.scaleDecimal"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"custom"==e.acField.validationMethod,expression:"acField.validationMethod == 'custom'"}],attrs:{label:"自定义正则"}},[a("el-input",{model:{value:e.acField.regex,callback:function(t){e.$set(e.acField,"regex",t)},expression:"acField.regex"}})],1)],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(2),o=a.n(r),c=a(1),u=a.n(c),d={name:"DesImportOptions",mixins:[$mixins.propertyDialogSetting],data:function(){var e=this;return{fields:[],acField:{},loading:!1,validationMethodOptions:[],rules:{titleName:[{required:!0,message:"请输入Excl标题名称",trigger:"change"}],listFieldName:[{required:!0,message:"请输入数据列表字段名称",trigger:"change"}],fieldName:[{required:!0,message:"请输入数据库字段",trigger:"change"}],promptType:[{required:!0,message:"请选择错误类型",trigger:"change"}],min:[{validator:function(t,a,n){Number(a)>Number(e.acField["max"])?n(new Error("最小数必须小于最大数")):n()},required:!0,trigger:"change"}],max:[{validator:function(t,a,n){Number(a)<Number(e.acField["min"])?n(new Error("最大数必须大于最小数")):n()},required:!0,trigger:"change"}]}}},computed:{acId:function(){return this.acField.id||null}},methods:{getInitValidationRules:function(){var e=this,t=[{text:"无",value:""}];return this.$http.get("/import/initValidationRules").then((function(a){var n=a.data;n&&n.success&&t.push.apply(t,o()(n.data||[])),e.validationMethodOptions=t}))},handleCurrentChange:function(e){this.acField=e,dsf.isObject(this.acField)&&dsf.isUnDef(this.acField.promptType)&&this.$set(this.acField,"promptType",1)},fieldClick:function(e){this.acField=e,dsf.isObject(this.acField)&&dsf.isUnDef(this.acField.promptType)&&this.$set(this.acField,"promptType",1),this.$refs.singleTable.setCurrentRow(e)},add:function(){var e={id:dsf.uuid(12),titleName:"字段".concat(this.fields.length),validationMethod:"",headWidth:""};this.fields.push(e),this.fieldClick(e)},remove:function(e){var t=this.fields;dsf.array.remove(t,e)},up:function(e){var t=this.fields,a=_.findIndex(t,(function(t){return t==e}));if(a>0){var n=t[a-1];this.$set(t,a-1,e),this.$set(t,a,n)}},down:function(e){var t=this.fields,a=_.findIndex(t,(function(t){return t==e}));if(a<t.length-1){var n=t[a+1];this.$set(t,a+1,e),this.$set(t,a,n)}},yes:function(){return this.fields||[]}},created:function(){var e=this;return s()(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.fields=e.currentData||[],t.next=4,e.getInitValidationRules();case 4:e.fields.length?e.fieldClick(e.fields[0]):e.add(),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},mounted:function(){}},f=d,p=a(0),h=Object(p["a"])(f,n,l,!1,null,null,null);t["default"]=h.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-data-select",staticStyle:{height:"100%",overflow:"auto"}},[a("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading[0],"default-checked-key":e.defaultCheckedKey,multiple:e.multiple,"search-control":e.searchControl,theme:e.theme,"node-key":"ID","node-name":"label","default-expand-all":""},on:{"choose-key":e.chooseKey,"choose-node":e.chooseNode}})],1)},l=[],i={name:"DesDbDataSelect",props:{value:{type:Object,default:function(){return{key:null,node:null}}},theme:{type:String,default:"theme2"},searchControl:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{loading:!1,treeData:[],defaultCheckedKey:"",node:null}},created:function(){this.initValue(),this.postData(),this.value.key&&(this.defaultCheckedKey=this.value.key||"")},methods:{initValue:function(){this.multiple?this.value.key&&"array"!==dsf.type(this.value.key)&&this.updateValue({key:[this.value.key],node:[this.value.node]}):this.value.key&&"array"===dsf.type(this.value.key)&&this.updateValue({key:this.value.key[0],node:this.value.node[0]})},postData:function(){var e=this;this.loading=!0,this.$http.get("/rm/list/ds",{namespace:""}).done((function(t){t.success?e.treeData=t.data.map((function(t){return e.dataFormat(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this,a=e._id,n=e._name,l=e.name,i=e.ID,s=e.type_value,r=e.children,o={_id:a,_name:n,label:l,ID:i,nocheck:"3"!==s&&"8"!==s,iconSkin:""};return r?o.children=r.map((function(e){return t.dataFormat(e)})):o.nocheck&&(o.iconSkin="_special"),o},chooseKey:function(e){var t=this;setTimeout((function(){t.updateValue({key:e,node:t.node})}),20)},chooseNode:function(e){this.node=e},updateValue:function(e){this.$emit("input",e),this.$emit("change",e)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-data-select",staticStyle:{height:"100%",overflow:"auto"}},[a("dsf-tree-select",{attrs:{"tree-data":e.treeData,loading:e.loading[0],"default-checked-key":e.defaultCheckedKey,multiple:e.multiple,"search-control":e.searchControl,theme:e.theme,"node-key":"ID","node-name":"label","default-expand-all":""},on:{"choose-key":e.chooseKey,"choose-node":e.chooseNode}})],1)},l=[],i={name:"DesDictDataSelect",props:{value:{type:Object,default:function(){return{key:null,node:null}}},theme:{type:String,default:"theme2"},searchControl:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{loading:!1,treeData:[],defaultCheckedKey:"",node:null}},created:function(){this.initValue(),this.postData(),this.value.key&&(this.defaultCheckedKey=this.value.key||"")},methods:{initValue:function(){this.multiple?this.value.key&&"array"!==dsf.type(this.value.key)&&this.updateValue({key:[this.value.key],node:[this.value.node]}):this.value.key&&"array"===dsf.type(this.value.key)&&this.updateValue({key:this.value.key[0],node:this.value.node[0]})},postData:function(){var e=this;this.loading=!0,this.$http.get("/rm/list/dataDic").done((function(t){t.success?e.treeData=t.data.map((function(t){return e.dataFormat(t)})):dsf.layer.message("请求异常！",!1)})).always((function(){e.loading=!1}))},dataFormat:function(e){var t=this,a=e._id,n=e._name,l=e.name,i=e.dsfa_rm_id,s=e.type_value,r=e.children,o={_id:a,_name:n,label:l,ID:i,nocheck:"5"!==s,iconSkin:""};return r?o.children=r.map((function(e){return t.dataFormat(e)})):o.nocheck&&(o.iconSkin="_special"),o},chooseKey:function(e){var t=this;setTimeout((function(){t.updateValue({key:e,node:t.node})}),20)},chooseNode:function(e){this.node=e},updateValue:function(e){this.$emit("input",e),this.$emit("change",e)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,size:"mini",stripe:""}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center",width:"40",fixed:""}}),a("el-table-column",{attrs:{label:"内部键名",prop:"to","header-align":"center",align:"center",width:"120",fixed:""}}),a("el-table-column",{attrs:{label:"描述",prop:"desc","header-align":"center",align:"center",width:"120"}}),a("el-table-column",{attrs:{label:"类型",prop:"type","header-align":"center",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("typeFilter")(t.row.type))+" ")]}}])}),a("el-table-column",{attrs:{label:"映射键名(必填)","header-align":"center",align:"center","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.from,callback:function(a){e.$set(t.row,"from","string"===typeof a?a.trim():a)},expression:"scope.row.from"}})]}}])}),e.hasLabel?a("el-table-column",{attrs:{label:"label","header-align":"center",align:"center","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:void 0===t.row.label},model:{value:t.row.label,callback:function(a){e.$set(t.row,"label","string"===typeof a?a.trim():a)},expression:"scope.row.label"}})]}}],null,!1,3034345892)}):e._e(),e.hasPrefix?a("el-table-column",{attrs:{label:"前缀","header-align":"center",align:"center","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:void 0===t.row.prefix},model:{value:t.row.prefix,callback:function(a){e.$set(t.row,"prefix","string"===typeof a?a.trim():a)},expression:"scope.row.prefix"}})]}}],null,!1,1416856708)}):e._e(),e.hasSuffix?a("el-table-column",{attrs:{label:"后缀","header-align":"center",align:"center","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:void 0===t.row.suffix},model:{value:t.row.suffix,callback:function(a){e.$set(t.row,"suffix","string"===typeof a?a.trim():a)},expression:"scope.row.suffix"}})]}}],null,!1,931262148)}):e._e()],1)],1)},l=[],i={text:"文本",number:"数字",boolean:"布尔值",object:"对象",array:"数组"},s={name:"DesKeysMapSetting",mixins:[$mixins.propertyDialogSetting],data:function(){return{hasLabel:!1,hasPrefix:!1,hasSuffix:!1,tableData:[]}},filters:{typeFilter:function(e){var t=[];return _.forEach(e.split("|"),(function(e){var a=i[e];a&&t.push(a)})),t.join("/")}},created:function(){if(this.currentData){var e=_.cloneDeep(this.currentData),t=!1,a=!1,n=!1;_.forEach(e,(function(e){var l=e.label,i=e.prefix,s=e.suffix;void 0!==l&&(t=!0),void 0!==i&&(a=!0),void 0!==s&&(n=!0)})),this.hasLabel=t,this.hasPrefix=a,this.hasSuffix=n,this.tableData=e}},methods:{validate:function(){for(var e=0,t=this.tableData.length;e<t;e++){var a=this.tableData[e],n=a.to,l=a.from;if(!l)return dsf.layer.message("".concat(n,"的映射键名不能为空"),!1),!1}},yes:function(){return this.tableData}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-layout-grid-setting-box"},[a("div",{staticClass:"layout-setting"},[e._v(" 快捷布局： "),a("div",{staticClass:"layout-setting-box"},[a("div",{staticClass:"layout-item layout-item-0",on:{click:function(t){return e.addQuickLayout(0)}}},e._l(2,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-0",on:{click:function(t){return e.addQuickLayout(1)}}},e._l(3,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-1",on:{click:function(t){return e.addQuickLayout(2)}}},e._l(2,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-2",on:{click:function(t){return e.addQuickLayout(3)}}},e._l(3,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-3",on:{click:function(t){return e.addQuickLayout(4)}}},e._l(9,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-4",on:{click:function(t){return e.addQuickLayout(5)}}},e._l(3,(function(e){return a("span",{key:e})})),0),a("div",{staticClass:"layout-item layout-item-5",on:{click:function(t){return e.addQuickLayout(6)}}},e._l(8,(function(e){return a("span",{key:e})})),0)])]),a("div",{staticClass:"des-layout-grid-setting"},[a("div",{staticClass:"des-layout-grid-setting-section content"},[a("div",{staticClass:"des-layout-grid-setting-section-header"},[a("span",[e._v("区域")]),a("div",[a("i",{staticClass:"iconfont icon-add",attrs:{title:"新增区域"},on:{click:e.addSlot}})])]),a("dsf-virtual-scroll",{ref:"slotBox",staticClass:"des-layout-grid-setting-section-box",attrs:{"scroll-x":"",height:"0"}},[e._l(e.slotList,(function(e){return[a("des-layout-grid-setting-by-slot",{key:e,attrs:{name:e}})]}))],2)],1),a("div",{staticClass:"des-layout-grid-setting-section layout"},[e._m(0),a("dsf-virtual-scroll",{staticClass:"des-layout-grid-setting-section-box",attrs:{"scroll-x":"",height:"0"}},[e._l(e.layoutConfig,(function(t,n){return[a("des-layout-grid-setting-by-layout",{key:n,attrs:{size:n,layout:t,columns:t.columns,rows:t.rows,"slot-map":t.slotMap},on:{choose:function(t){e.activeLayout=n}}})]}))],2)],1),a("div",{staticClass:"des-layout-grid-setting-auto"},[a("div",{staticClass:"des-layout-grid-setting-section attr"},[a("div",{staticClass:"des-layout-grid-setting-section-header"},[a("span",[e._v("布局属性 "),a("span",{staticStyle:{color:"#999"}},[e._v(e._s(this.activeLayout))])])]),a("dsf-virtual-scroll",{staticClass:"des-layout-grid-setting-section-box",attrs:{"scroll-x":"",height:"0"}},[e.currentLayout?a("el-form",{attrs:{"label-width":"40px",size:"mini"}},[a("el-form-item",{attrs:{label:"列"}},[e._l(e.currentLayout.columns,(function(t,n){return[a("el-input",{key:n,staticStyle:{width:"80px",margin:"0 5px 5px 0"},attrs:{placeholder:"auto"},model:{value:e.currentLayout.columns[n],callback:function(t){e.$set(e.currentLayout.columns,n,"string"===typeof t?t.trim():t)},expression:"currentLayout.columns[x]"}},[a("i",{staticClass:"iconfont icon-shanchu",attrs:{slot:"suffix"},on:{click:function(t){return e.removeCol(n)}},slot:"suffix"})])]})),a("i",{staticClass:"iconfont icon-jia",on:{click:e.addCol}})],2),a("el-form-item",{attrs:{label:"行"}},[e._l(e.currentLayout.rows,(function(t,n){return[a("el-input",{key:n,staticStyle:{width:"80px",margin:"0 5px 5px 0"},model:{value:e.currentLayout.rows[n],callback:function(t){e.$set(e.currentLayout.rows,n,"string"===typeof t?t.trim():t)},expression:"currentLayout.rows[y]"}},[a("i",{staticClass:"iconfont icon-shanchu",attrs:{slot:"suffix"},on:{click:function(t){return e.removeRow(n)}},slot:"suffix"})])]})),a("i",{staticClass:"iconfont icon-jia",on:{click:e.addRow}})],2)],1):e._e()],1)],1),a("div",{staticClass:"des-layout-grid-setting-section attr"},[a("div",{staticClass:"des-layout-grid-setting-section-header"},[a("span",[e._v("区域"),a("span",{staticStyle:{color:"#999"}},[e._v(e._s(this.activeSlot))]),e._v("属性")])]),a("dsf-virtual-scroll",{staticClass:"des-layout-grid-setting-section-box",attrs:{"scroll-x":"",height:"0"}},[e.editSlot?a("el-form",{attrs:{"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"是否可见"}},[a("el-switch",{model:{value:e.editSlot.show,callback:function(t){e.$set(e.editSlot,"show",t)},expression:"editSlot.show"}})],1),a("el-form-item",{attrs:{label:"起始位置"}},[a("span",[e._v("列：")]),a("el-input-number",{staticStyle:{width:"110px"},attrs:{min:0,"step-strictly":""},model:{value:e.editSlot.attr[0],callback:function(t){e.$set(e.editSlot.attr,0,t)},expression:"editSlot.attr[0]"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("行：")]),a("el-input-number",{staticStyle:{width:"110px"},attrs:{min:0,"step-strictly":""},model:{value:e.editSlot.attr[1],callback:function(t){e.$set(e.editSlot.attr,1,t)},expression:"editSlot.attr[1]"}})],1),a("el-form-item",{attrs:{label:"合并单元格"}},[a("span",[e._v("列：")]),a("el-input-number",{staticStyle:{width:"110px"},attrs:{min:1,"step-strictly":""},model:{value:e.editSlot.attr[2],callback:function(t){e.$set(e.editSlot.attr,2,t)},expression:"editSlot.attr[2]"}}),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("行：")]),a("el-input-number",{staticStyle:{width:"110px"},attrs:{min:1,"step-strictly":""},model:{value:e.editSlot.attr[3],callback:function(t){e.$set(e.editSlot.attr,3,t)},expression:"editSlot.attr[3]"}})],1)],1):e._e()],1)],1)])])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-layout-grid-setting-section-header"},[a("span",[e._v("布局")])])}],i=a(8),s=a.n(i),r=a(2),o=a.n(r),c=a(101),u=a(100),d=a(95),f="ABCDEFGHIJKLMNOPQRSTUVWXYZ",p={">=1200":{columns:["auto","auto","auto","auto"],matrix:[]},">=1920":{columns:["auto","auto","auto","auto","auto"],matrix:[]},">=992":{columns:["auto","auto","auto"],matrix:[]},">=768":{columns:["auto","auto"],matrix:[]},"<768":{columns:["auto"],matrix:[]}};function h(e){if(1==e.length)return f.indexOf(e);if(2==e.length){var t=parseInt(e[0]),a=e[1];return 26*t+f.indexOf(a)}return 0}function m(e){var t=parseInt(e/26),a=e%26;return t?t+f[a]:f[a]}var b={name:"DesLayoutGridSetting",mixins:[$mixins.propertyDialogSetting],provide:function(){return{$gridSetting:this}},components:{DesLayoutGridSettingBySlot:c["default"],DesLayoutGridSettingByLayout:u["default"]},data:function(){return{activeSlot:null,activeLayout:">=1200",layoutConfig:{},slotList:[]}},computed:{currentLayout:{get:function(){return this.layoutConfig[this.activeLayout]},set:function(e){this.layoutConfig[this.activeLayout]=e}},currentSlots:function(){var e=this.currentLayout;return e?e.slotMap:{}},editSlot:function(){var e=this.currentSlots[this.activeSlot];return e||null}},created:function(){this.currentData&&this.init(this.currentData),window.addEventListener("paste",this.pasteLayout)},beforeDestroy:function(){window.removeEventListener("paste",this.pasteLayout)},methods:{pasteLayout:function(e){if(e.clipboardData&&e.clipboardData.items){var t=e.clipboardData.getData("text");if(t)try{t=JSON.parse(t),t["columns"]&&t["rows"]&&t["slotMap"]&&(this.layoutConfig[this.activeLayout]=t)}catch(a){}}},addQuickLayout:function(e){var t=this;dsf.layer.confirm({confirmButtonText:"确定",cancelButtonText:"取消",message:"使用快捷布局会覆盖当前布局，是否继续？"}).then((function(){var a=_.cloneDeep(d["default"][e]);Object.keys(t.layoutConfig).forEach((function(e){t.layoutConfig[e]=a}));for(var n=Object.keys(a),l=Math.max.apply(Math,o()(_.map(t.slotList.concat(n),(function(e){return h(e)})))),i=[],s=0;s<=l;s++)i.push(m(s));t.slotList=i}))},init:function(e){var t={},a=[];_.forEach(p,(function(n,l){var i=e[l]||n,s=i.columns,r=i.matrix,o=[],c={};_.forEach(r,(function(e,t){var n=e.height,l=e.areas;o.push(n),_.forEach(l,(function(e,n){e&&(c[e]?(c[e]["attr"][2]=Math.max(c[e]["attr"][2],n),c[e]["attr"][3]=Math.max(c[e]["attr"][3],t)):(c[e]={show:!0,attr:[n,t,n,t]},a.push(e)))}))})),_.forEach(c,(function(e){e.attr[2]=e.attr[2]-e.attr[0]+1,e.attr[3]=e.attr[3]-e.attr[1]+1})),t[l]={columns:_.map(s,(function(e){return"auto"===e?"":e})),rows:o,slotMap:c}}));var n=Math.max.apply(Math,o()(_.map(a,(function(e){return h(e)}))));a=[];for(var l=0;l<=n;l++)a.push(m(l));this.layoutConfig=t,this.slotList=a},yes:function(){var e={},t=[];_.forEach(this.layoutConfig,(function(a,n){var l=a.columns,i=a.rows,r=a.slotMap,o=_.find(r,(function(e){return e.show}));if(o){var c=_.map(i,(function(e,a){var n=_.map(l,(function(e,n){for(var l in r)if(r[l].show){var i=s()(r[l].attr,4),o=i[0],c=i[1],u=i[2],d=i[3];if(n>=o&&n<o+u&&a>=c&&a<c+d)return t.push(l),l}return""}));return{height:e,areas:n}}));e[n]={columns:_.map(l,(function(e){return e||"auto"})),matrix:c}}}));var a=this.owner.slots;return this.owner.slots=_.map(_.uniq(t),(function(e){var t="area-"+e,n=_.find(a,(function(e){return e.name===t}));return n||{name:t,controls:[]}})),a=void 0,e},addSlot:function(){var e=this,t=h(_.last(this.slotList));259!==t?(this.slotList.push(m(t+1)),this.$nextTick((function(){var t=e.$refs.slotBox.$refs.box;t.scrollBy({top:t.scrollHeight-t.offsetHeight,left:0,behavior:"smooth"})}))):dsf.layer.message("不能再多了！")},addCol:function(){this.currentLayout.columns.push("")},addRow:function(){this.currentLayout.rows.push("10%")},removeCol:function(e){this.currentLayout.columns.splice(e,1)},removeRow:function(e){this.currentLayout.rows.splice(e,1)}}},v=b,g=a(0),y=Object(g["a"])(v,n,l,!1,null,null,null);t["default"]=y.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{overflow:"auto",height:"100%"},attrs:{width:"35%"}},[a("div",{staticStyle:{overflow:"auto",height:"100%"}},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang",staticStyle:{"margin-right":"5px"}}),a("span",{on:{dblclick:function(t){return e.toList(n,l)}}},[e._v(e._s(n.label))]),l.field?a("span",{staticStyle:{color:"red"},on:{dblclick:function(t){return e.toList(n,l)}}},[e._v("(字段:"+e._s(l.field)+")")]):e._e()])}}])})],1)]),a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",[a("el-main",[a("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"fieldCaption",label:"字段描述"}}),a("el-table-column",{attrs:{prop:"field",label:"字段名称"}}),a("el-table-column",{attrs:{label:"排序类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.sortType,callback:function(a){e.$set(t.row,"sortType",a)},expression:"scope.row.sortType"}},[a("el-option",{attrs:{value:"asc",label:"升序"}}),a("el-option",{attrs:{value:"desc",label:"降序"}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(a){return a.stopPropagation(),e.remove(t.row)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(a){return a.stopPropagation(),e.up(t.row)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(a){return a.stopPropagation(),e.down(t.row)}}})]}}])})],1)],1)],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"DesListOrderByEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"}}},mounted:function(){var e=this;return s()(o.a.mark((function t(){var a,n,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.owner.$$getComponent(),n=a.$getChildMetadataList(),n&&!(n.length<1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(l=n[0].metadata.at,l){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return t.next=11,e.getTreeData(n[1].metadata,n[1].metadata.rm_type||3);case 11:e.treeData=t.sent,e.tableData=e.currentData||[];case 13:case"end":return t.stop()}}),t)})))()},methods:{toList:function(e,t){if(t.field){var a=_.findIndex(this.tableData,(function(e){return e.field==t.field}));a<0&&this.tableData.push({field:t.field,fieldCaption:t.fieldCaption,sortType:"asc"})}},getTreeData:function(e,t){var a=this;return s()(o.a.mark((function n(){var l,i,s;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=[],"8"!=t){n.next=8;break}return i={rmId:e.rmId},n.next=5,a.$webAPI.getDbSourceFieldsTree(i);case 5:l=n.sent,n.next=13;break;case 8:if("3"!=t){n.next=13;break}return s={namespace:e.at},n.next=12,a.$webAPI.getMetaDataFieldsTree(s);case 12:l=n.sent;case 13:return n.abrupt("return",l);case 14:case"end":return n.stop()}}),n)})))()},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)}},down:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t<this.tableData.length-1){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}},yes:function(){return this.tableData}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",[a("el-main",[a("el-table",{attrs:{data:e.tableData,"row-key":"key",border:"","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"label",label:"系统对应字体大小"}}),a("el-table-column",{attrs:{label:"对应行高"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.height,callback:function(a){e.$set(t.row,"height",a)},expression:"scope.row.height"}})]}}])})],1)],1)],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"DesListRowHeightAdapter",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},mounted:function(){var e=this;return s()(o.a.mark((function t(){var a,n;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n in a=[],e,e.currentData)"normal"==n?a[0]={label:"正常",key:n,height:e.currentData[n]}:"bigFont"==n?a[1]={label:"中号",key:n,height:e.currentData[n]}:"bigFont_1"==n?a[2]={label:"大号",key:n,height:e.currentData[n]}:"bigFont_2"==n?a[3]={label:"特大",key:n,height:e.currentData[n]}:"bigFont_3"==n&&(a[4]={label:"最大",key:n,height:e.currentData[n]});e.tableData=a;case 4:case"end":return t.stop()}}),t)})))()},methods:{yes:function(){for(var e={},t=0;t<this.tableData.length;t++){var a=this.tableData[t];e[a.key]=parseFloat(a.height)}return e}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},l=[],i={name:"DesMyDialog",mixins:[$mixins.propertyDialogSetting],data:function(){return{}},computed:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{attrs:{size:"small",icon:"zidingyi"},on:{click:e.addCustomButton}},[e._v("新增状态")]),a("DsfButton",{attrs:{size:"small",icon:"Magnifier",type:"plain"},on:{click:e.openIcon}},[e._v("查看按钮图标")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"状态值","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.text,callback:function(a){e.$set(t.row,"text",a)},expression:"scope.row.text"}})]}}])}),a("el-table-column",{attrs:{label:"状态图标","header-align":"center",align:"center",width:300},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("i",{class:["iconfont",t.row.icon],style:"color: "+t.row.color}),a("div",{staticStyle:{width:"180px",margin:"0 10px"}},[a("el-input",{model:{value:t.row.icon,callback:function(a){e.$set(t.row,"icon",a)},expression:"scope.row.icon"}})],1),a("el-color-picker",{model:{value:t.row.color,callback:function(a){e.$set(t.row,"color",a)},expression:"scope.row.color"}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(a){return e.removeButton(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"DesListStatusEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},created:function(){var e=this;this.currentData&&_.forEach(this.currentData,(function(t,a){e.tableData.push(t)}))},methods:{addCustomButton:function(){var e=dsf.mix(!0,{},{text:"状态值",icon:"icon-shezhi",color:"#5f5f5f"});this.tableData.push(e)},validate:function(){return-1!==_.findIndex(this.tableData,(function(e){return""===e.text}))?(dsf.layer.message("请输入状态值",!1),!1):this.isRepeat(_.map(this.tableData,"text"))?(dsf.layer.message("一种状态值只能配置一次",!1),!1):void 0},isRepeat:function(e){var t={};for(var a in e){if(t[e[a]])return!0;t[e[a]]=!0}return!1},yes:function(){var e={};return _(this.tableData).forEach((function(t){e[t.text]=t})),e},openIcon:function(){window.open(dsf.url.getWebPath("$/iconfont/".concat(dsf.config.runType,"/demo_index.html")),"icondemo")},removeButton:function(e){this.tableData.splice(e.$index,1)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"id","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),a("el-table-column",{attrs:{label:"菜单名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.icon,callback:function(a){e.$set(t.row,"icon",a)},expression:"scope.row.icon"}})]}}])}),a("el-table-column",{attrs:{label:"跳转地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dsf-input-url",{attrs:{type:e.isMobile?"mobile":"pc"},model:{value:t.row.url,callback:function(a){e.$set(t.row,"url",a)},expression:"scope.row.url"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"MeMenusEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.name){this.names[a]="";var l=this.names.indexOf(t.name);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.name}return n},newTab:function(){return{id:this.tableData.length+1,name:"菜单名称",icon:"tab-addressBook-d",url:"",subhead:""}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){this.tableData.splice(e.$index,1)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index+1,0,t)}},validate:function(){return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"接口地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.apiAddress,callback:function(a){e.$set(t.row,"apiAddress",a)},expression:"scope.row.apiAddress"}})]}}])}),a("el-table-column",{attrs:{label:"类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.config.args,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"是否懒加载","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.lazy,callback:function(a){e.$set(t.row,"lazy",a)},expression:"scope.row.lazy"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"MessageEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.name){this.names[a]="";var l=this.names.indexOf(t.name);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.name}return n},newTab:function(){return{title:"Tab"+(this.tableData.length+1),name:null,type:"messageTree",apiAddress:"http://",badge:null,lazy:"false",controls:[],error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{fixed:"",label:"显示名称",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{label:"标识",width:"140px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"接口地址",width:"200px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dsf-input-url",{attrs:{type:"datasource"},model:{value:t.row.url,callback:function(a){e.$set(t.row,"url",a)},expression:"scope.row.url"}})]}}])}),a("el-table-column",{attrs:{label:"行跳转",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.toUrlSet(t.row,"rowClick")}}},[e._v("配置")])]}}])}),a("el-table-column",{attrs:{label:"更多跳转",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.toUrlSet(t.row,"more")}}},[e._v("配置")])]}}])}),a("el-table-column",{attrs:{label:"新增跳转",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.toUrlSet(t.row,"add")}}},[e._v("配置")])]}}])}),a("el-table-column",{attrs:{label:"隐藏",width:"100px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.hide,callback:function(a){e.$set(t.row,"hide",a)},expression:"scope.row.hide"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),a("el-table-column",{attrs:{label:"懒加载",width:"100px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.lazy,callback:function(a){e.$set(t.row,"lazy",a)},expression:"scope.row.lazy"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right","header-align":"center",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"MessageNotificationTabPanelEdit",mixins:[$mixins.tabPanelTabSetting]},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"ds-meta-data-select",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("el-tab-pane",{attrs:{name:"0",label:"元数据"}},[e.loaded[0]?a("meta-data-select-item",{ref:"select0",attrs:{"select-model":e.selectModel,url:"rm/list/meta"}}):e._e()],1),a("el-tab-pane",{attrs:{name:"1",label:"数据源"}},[e.loaded[1]?a("meta-data-select-item",{ref:"select1",attrs:{"select-model":e.selectModel,url:"rm/list/ds"}}):e._e()],1)],1)},l=[],i=a(41),s={name:"DesMetaDataSelect",components:{MetaDataSelectItem:i["default"]},mixins:[$mixins.propertyDialogSetting],props:["selectModel"],data:function(){return{tabIndex:"0",loaded:[!0,!1]}},watch:{tabIndex:function(e){this.$set(this.loaded,parseInt(e),!0)}},methods:{yes:function(){return this.$refs["select"+this.tabIndex].yes()}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",overflow:"auto"}},[a("el-header",{staticStyle:{"text-align":"right",height:"auto"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center"}},[a("el-checkbox",{on:{change:e.search},model:{value:e.isShowNew,callback:function(t){e.isShowNew=t},expression:"isShowNew"}},[e._v("仅显示新增字段")]),a("form",{staticStyle:{"margin-left":"10px"},on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.search.apply(null,arguments)}}},[a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"输入组件名称检索"},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),a("DsfButton",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:e.showDialog}},[e._v("快速维护")])],1)]),a("el-main",[a("el-table",{ref:"table",attrs:{data:e.resultData,"row-key":"_id",fit:"",border:""},on:{select:e.select,"select-all":e.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"40","reserve-selection":""}}),a("el-table-column",{attrs:{label:"组件名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.label))])]}}])}),a("el-table-column",{attrs:{label:"所属元数据"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.changeKey(t.row,a)}},model:{value:t.row.mdkey,callback:function(a){e.$set(t.row,"mdkey",a)},expression:"scope.row.mdkey"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.dict,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],2)]}}])}),a("el-table-column",{attrs:{label:"新增组件"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.isNew?"是":"否")+" ")]}}])})],1),a("el-dialog",{attrs:{title:"快速维护",visible:e.dialogVisible,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{height:"200px"}},[a("el-form",[a("el-form-item",{attrs:{label:"修改目标"}},[a("el-select",{attrs:{size:"small"},model:{value:e.target,callback:function(t){e.target=t},expression:"target"}},[a("el-option",{attrs:{label:"新增字段",value:"1"}}),a("el-option",{attrs:{label:"已选字段",value:"2"}})],1),"1"==e.target?a("span",{staticStyle:{"margin-left":"10px"}},[e._v("只针对所有新增字段")]):e._e()],1),a("el-form-item",{attrs:{label:"修改目标"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.fastKey,callback:function(t){e.fastKey=t},expression:"fastKey"}},e._l(e.dict,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("span",{staticStyle:{color:"red"}},[e._v("注：该设置是针对全量数据操作")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("DsfButton",{attrs:{size:"small"},on:{click:e.sure}},[e._v("确定")]),a("DsfButton",{attrs:{size:"small",type:"plain"},on:{click:e.cancel}},[e._v("取消")])],1)])],1)],1)},l=[],i={name:"DesMetaDataSource",props:{source:{type:Array,default:function(){return[]}},dict:{type:Array,default:function(){return[]}}},data:function(){return{data:[],searchStr:"",dialogVisible:!1,resultData:[],target:"1",fastKey:"",isShowNew:!1,tableSelection:[],isCheckedAll:!1}},mounted:function(){this.data=_.map(this.source,(function(e,t){return{_id:t,label:e.ctrl.label||e.ctrl.caption,ctrl:e.ctrl,mdkey:e.source,initKey:e.source,isChange:!1,isNew:e.ctrl.metadata.$isNew||!1}})),this.fastKey=this.dict[0]||"",this.search()},methods:{changeKey:function(e,t){e.mdkey!=e.initKey?e.isChange=!0:e.isChange=!1},yes:function(){var e=_.filter(this.data,(function(e){return!e.mdkey}));return e.length>0?(dsf.layer.message("组件绑定的元数据标识存在空，请检查!!!",!1),!1):this.data},search:function(){var e=[];if(e=this.isShowNew?_.filter(this.data,(function(e){return e.isNew})):this.data,this.searchStr){var t=this.searchStr.split(" "),a=_.filter(t,(function(e){return e}));this.resultData=_.filter(e,(function(e){var t=!1;return _.each(a,(function(a){e.label.indexOf(a)>=0&&(t=!0)})),t}))}else this.resultData=e},showDialog:function(){this.dialogVisible=!0},select:function(e,t){var a=_.filter(this.tableSelection,(function(e){return e._id==t._id}));a.length<=0?this.tableSelection.push(t):dsf.array.remove(this.tableSelection,t)},selectAll:function(e,t){var a=this;if(e.length>0)for(var n=function(){var e=a.resultData[l],t=_.filter(a.tableSelection,(function(t){return t._id==e._id}));t.length<=0&&a.tableSelection.push(e)},l=0;l<this.resultData.length;l++)n();else for(var i=function(){var e=a.resultData[s],t=_.filter(a.tableSelection,(function(t){return t._id==e._id}));t.length>0&&dsf.array.remove(a.tableSelection,e)},s=0;s<this.resultData.length;s++)i()},sure:function(){var e=this,t=[];"1"==this.target?t=_.filter(this.data,(function(e){return e.isNew})):"2"==this.target&&(t=this.tableSelection),t.length<0?dsf.layer.pc.message("未找到对应的目标数据",!1):(_.each(t,(function(t){t.mdkey=e.fastKey,e.changeKey(t)})),this.dialogVisible=!1)},cancel:function(){this.dialogVisible=!1}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{staticStyle:{padding:"0px"}},[a("el-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("el-tab-pane",{attrs:{label:"自定义",name:"list"}},[a("el-main",{staticStyle:{padding:"0px"}},[a("el-header",{staticStyle:{}},[a("DsfButton",{on:{click:e.addBanner}},[e._v("新增")])],1),a("el-table",{staticClass:"ds-table",attrs:{border:!0,data:e.data.list,"highlight-current-row":!0}},[a("el-table-column",{attrs:{label:"图片地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入图片地址"},scopedSlots:e._u([{key:"append",fn:function(){return[a("el-upload",{attrs:{action:e.dsf.url.getWebPath("/file/upload"),"show-file-list":!1,"on-success":e.fileUploadSuccess(t.row)}},[a("el-button",{attrs:{icon:"el-icon-search"}})],1)]},proxy:!0}],null,!0),model:{value:t.row.image,callback:function(a){e.$set(t.row,"image",a)},expression:"scope.row.image"}})]}}])}),a("el-table-column",{attrs:{label:"标题","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",e._n(a))},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{label:"描述","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",e._n(a))},expression:"scope.row.desc"}})]}}])}),a("el-table-column",{attrs:{label:"链接","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入图片链接"},model:{value:t.row.url,callback:function(a){e.$set(t.row,"url",e._n(a))},expression:"scope.row.url"}})]}}])}),"app"==e.config.type?a("el-table-column",{attrs:{label:"复选框模式","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.jumpWay,callback:function(a){e.$set(t.row,"jumpWay",a)},expression:"scope.row.jumpWay"}},[a("el-option",{attrs:{label:"新窗口打开",value:"2"}}),a("el-option",{attrs:{label:"弹出框打开",value:"3"}}),a("el-option",{attrs:{label:"当前窗口打开",value:"4"}})],1)]}}],null,!1,2978058509)}):e._e(),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1),a("el-tab-pane",{attrs:{label:"接口",name:"url"}},[a("el-input",{attrs:{placeholder:"请输入接口地址"},model:{value:e.data.url,callback:function(t){e.$set(e.data,"url",t)},expression:"data.url"}})],1)],1)],1)],1)},l=[],i=a(2),s=a.n(i);function r(){return{title:"",desc:"",image:"",url:"",jumpWay:"2"}}var o={name:"DesMobileBannerEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{data:{url:"",list:[]},tab:"list"}},created:function(){var e=this.owner.$$getComponent(),t=e.url,a=e.list;this.data.url=t,this.data.list=dsf.mix(!0,[],a),this.tab=t?"url":"list",this.data.url||0!==this.data.list.length||this.addBanner()},methods:{addBanner:function(){this.data.list.push(r())},vaildate:function(){var e="";if("url"!==this.tab||this.data.url){if("list"===this.tab){var t=this.data.list.every((function(e){return!!e.image}));t||(e="图片地址不能为空")}}else e="请输入url";return e},deleted:function(e){this.data.list.splice(e.$index,1)},up:function(e){if(e.$index>0){var t,a=this.data.list.slice(e.$index-1,e.$index+1).reverse();(t=this.data.list).splice.apply(t,[e.$index-1,2].concat(s()(a)))}},down:function(e){if(this.data.list.length-1>e.$index){var t,a=this.data.list.slice(e.$index,e.$index+2).reverse();(t=this.data.list).splice.apply(t,[e.$index,2].concat(s()(a)))}},insert:function(e){this.data.list.splice(e.$index+1,0,r())},yes:function(){var e=this.vaildate();if(e)throw dsf.layer.message(e,!1),new Error(e);this.owner.list=dsf.mix(!0,[],this.data.list),this.owner.url=this.data.url},fileUploadSuccess:function(e){return function(t,a,n){t.data&&t.data.length>0&&(e.image=t.data[0].relativePath)}}}},c=o,u=a(0),d=Object(u["a"])(c,n,l,!1,null,null,null);t["default"]=d.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[e.showTree?a("DsfTreeSelector",{ref:"treeSelector",attrs:{slots:e.slots},on:{setDefaultSelect:e.setDefaultSelect}}):e._e()],1)},l=[],i={name:"DesMobileConvenientMenuCode",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],showTree:!1,slots:[{nodeKey:"_id",title:"菜单目录选择",showCheckBox:"1",types:"!!@[children] || !@[mobile_url]",chooseOneNode:"1",defaultOpenSeries:1,metaDataType:"0",showType:"user",showSubDept:"1",showLevel:"1",chooseMetaData:{},sqlUrl:"menu2/list/tree",name:"tHmSSdJJVxkBkKMT",error:!1,showSearch:"1",searchKey:"type",searchType:"user",async:"0",asyncSqlUrl:"",searchSqlUrl:"",pagination:"0",pageSize:1e3,paginationSql:"",clickTextFun:"check",chooseOneNodeSpecial:"1",excludeDept:"",excludeUser:"",tabId:"pBro4up8oLqxGO1v",displayMode:"tree",searchIsAsync:"0",hasPrefix:"0",canChooseRoot:"0",syncUrlForChild:null,orgAsync:"1",controls:[]}]}},created:function(){var e=this;this.$http.get("oua2/getAppKey").done((function(t){t.success&&t.data&&(e.slots[0].sqlUrl+="?appKey="+t.data)})).always((function(){e.showTree=!0}))},methods:{setDefaultSelect:function(e){this.currentData&&this.currentData.length&&e.args(this.currentData)},yes:function(){return this.$refs.treeSelector.getReturnValue()}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.addCol}},[e._v("新增列")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" 第"+e._s(t.$index+1)+"格 ")]}}])}),a("el-table-column",{attrs:{label:"高度","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.height,callback:function(a){e.$set(t.row,"height",a)},expression:"scope.row.height"}})]}}])}),a("el-table-column",{attrs:{label:"占用列数","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.span,callback:function(a){e.$set(t.row,"span",e._n(a))},expression:"scope.row.span"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"DesMobileFlexGrid",mixins:[$mixins.propertyDialogSetting],data:function(){return{form:null,formNode:null,tableData:[],sizeMap:[{size:"lg",desc:"≥1920px"},{size:"xl",desc:"≥1200px"},{size:"md",desc:"≥992px"},{size:"sm",desc:"≥768px"},{size:"xs",desc:"<768px"}]}},created:function(){},beforeMount:function(){},mounted:function(){var e=this,t=this.owner.$$getComponent().slots;if(t=dsf.mix(!0,[],t),t[0]){var a=t[0].controls;_.each(a,(function(t){e.tableData.push(t)}))}},methods:{rowClickHandler:function(){},addCol:function(){var e={span:12,height:"auto"};this.tableData.push(dsf.designer.createMobileComponent("dsf.col",e))},vaildate:function(){return 0!=data.length||(dsf.layer.pc.message("至少存在一格",!1),!1)},deleted:function(e){var t=this;if(e.row.slots[0].controls.length>0){var a=e.row.slots[0].controls;dsf.layer.pc.confirm("栅格中存在"+a.length+"个子组件,删除该单元格子组件将一起被删除。<br/>是否确定要继续?").then((function(){dsf.array.remove(t.tableData,e.row)})).catch((function(){}))}else dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},insert:function(e){var t={span:6,height:"auto"};this.tableData.splice(e.$index+1,0,dsf.designer.createMobileComponent("dsf.col",t))},yes:function(){var e=this,t=this.tableData;_.each(t,(function(t){e.checkMaxSpan(t,"span");var a=_.map(e.sizeMap,"size");_.each(a,(function(a){e.checkMaxSpan(t,a)}))})),this.owner.slots[0].controls=[],this.$nextTick((function(){var a=e.owner.slots[0].controls;_.each(t,(function(e){a.push(e)}))}))},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{width:"850px",overflow:"auto"}},[a("el-container",{staticStyle:{height:"100%"}},[a("el-header",{staticStyle:{padding:"0 0 10px 0","text-align":"right",height:"auto"}},[a("DsfButton",{attrs:{size:"small",icon:"sousuofangda"},on:{click:e.addData}},[e._v("新增")]),a("DsfButton",{attrs:{size:"small",icon:"Magnifier",type:"plain"},on:{click:e.openIcon}},[e._v("查看按钮图标")])],1),a("el-main",{staticStyle:{padding:"0",height:"100%"}},[a("el-table",{ref:"table",attrs:{"show-header":!0,data:e.tableData,height:"100%",size:"small","highlight-current-row":"",border:"",stripe:""},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"ID",prop:"_id",width:"100px"}}),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),a("el-table-column",{attrs:{label:"图标",prop:"icon",width:"60px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("dsf-icon",{attrs:{name:t.icon}})]}}])}),a("el-table-column",{attrs:{label:"背景色",prop:"backgroundColor",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("div",{staticStyle:{width:"10px",height:"10px"},style:{background:t.backgroundColor}})]}}])}),a("el-table-column",{attrs:{label:"前景色",prop:"foreColor",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("div",{staticStyle:{width:"10px",height:"10px"},style:{background:t.foreColor}})]}}])}),a("el-table-column",{attrs:{label:"图片",prop:"imgUrl",width:"60px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(""!=a.imgUrl?"有":"")+" ")]}}])}),e.config.showType?a("el-table-column",{attrs:{label:"类型",prop:"type",width:"90px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.buttonTypeConfig[a.type])+" ")]}}],null,!1,2319003813)}):e._e(),a("el-table-column",{attrs:{label:"跳转",prop:"url",width:"60px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(""!=a.url?"有":"")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,l=t.$index;return["table"!=n.type?a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(t){return e.removeData(n,l)}}}):e._e(),l>0?a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(t){return e.up(n,l)}}}):e._e(),l<e.tableData.length-1?a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(t){return e.down(n,l)}}}):e._e()]}}])})],1)],1)],1)],1),a("el-main",{staticStyle:{padding:"0"}},[a("el-container",[e.formModel?a("el-form",{staticStyle:{width:"90%"},attrs:{model:e.formModel,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formModel._id,callback:function(t){e.$set(e.formModel,"_id",t)},expression:"formModel._id"}})],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),a("el-form-item",{attrs:{label:"图标"}},[a("dsf-input-icon",{model:{value:e.formModel.icon,callback:function(t){e.$set(e.formModel,"icon",t)},expression:"formModel.icon"}})],1),a("el-form-item",{attrs:{label:"背景色"}},[a("dsf-input-color",{model:{value:e.formModel.backgroundColor,callback:function(t){e.$set(e.formModel,"backgroundColor",t)},expression:"formModel.backgroundColor"}})],1),a("el-form-item",{attrs:{label:"前景色"}},[a("dsf-input-color",{model:{value:e.formModel.foreColor,callback:function(t){e.$set(e.formModel,"foreColor",t)},expression:"formModel.foreColor"}})],1),a("el-form-item",{attrs:{label:"图片地址"}},[a("dsf-input-upload",{model:{value:e.formModel.imgUrl,callback:function(t){e.$set(e.formModel,"imgUrl",t)},expression:"formModel.imgUrl"}})],1),e.config.showType?a("el-form-item",{attrs:{label:"按钮类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formModel.type,callback:function(t){e.$set(e.formModel,"type",t)},expression:"formModel.type"}},[e._l(e.buttonTypeConfig,(function(e,t){return[a("el-option",{key:t,attrs:{label:e,value:t}})]}))],2)],1):e._e(),"backTop"===e.formModel.type?[a("el-form-item",{attrs:{label:"容器选择器"}},[a("el-input",{attrs:{placeholder:"能选中滚动条容器的css选择器"},model:{value:e.formModel.scrollDom,callback:function(t){e.$set(e.formModel,"scrollDom",t)},expression:"formModel.scrollDom"}})],1)]:"imgUrl"===e.formModel.type?[a("el-form-item",{attrs:{label:"展示图片地址"}},[a("dsf-input-upload",{model:{value:e.formModel.showPicture,callback:function(t){e.$set(e.formModel,"showPicture",t)},expression:"formModel.showPicture"}})],1),a("el-form-item",{attrs:{label:"展示图片宽"}},[a("el-input",{attrs:{placeholder:"默认200px"},model:{value:e.formModel.showPictureWidth,callback:function(t){e.$set(e.formModel,"showPictureWidth",t)},expression:"formModel.showPictureWidth"}})],1),a("el-form-item",{attrs:{label:"展示图片高"}},[a("el-input",{attrs:{placeholder:"默认200px"},model:{value:e.formModel.showPictureHeight,callback:function(t){e.$set(e.formModel,"showPictureHeight",t)},expression:"formModel.showPictureHeight"}})],1)]:"tips"===e.formModel.type?[a("el-form-item",{attrs:{label:"文字模板"}},[a("el-input",{attrs:{placeholder:"联系电话：[text]"},model:{value:e.formModel.showTemplate,callback:function(t){e.$set(e.formModel,"showTemplate",t)},expression:"formModel.showTemplate"}})],1),a("el-form-item",{attrs:{label:"高亮内容"}},[a("el-input",{attrs:{placeholder:"123-1234-6789"},model:{value:e.formModel.showContent,callback:function(t){e.$set(e.formModel,"showContent",t)},expression:"formModel.showContent"}})],1)]:[a("el-form-item",{attrs:{label:"跳转链接"}},[a("dsf-input-url",{attrs:{type:e.isMobile?"mobile":"pc",placeholder:"字段有值时跳转(支持表达式)"},model:{value:e.formModel.url,callback:function(t){e.$set(e.formModel,"url",t)},expression:"formModel.url"}})],1),a("el-form-item",{attrs:{label:"跳转方式"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formModel.openType,callback:function(t){e.$set(e.formModel,"openType",t)},expression:"formModel.openType"}},[a("el-option",{attrs:{label:"当前窗口打开",value:"0"}}),a("el-option",{attrs:{label:"主窗口打开",value:"1"}}),a("el-option",{attrs:{label:"新窗口打开",value:"2"}}),a("el-option",{attrs:{label:"对话框打开",value:"3"}})],1)],1),3==e.formModel.openType?a("el-form-item",{attrs:{label:"弹框标题"}},[a("el-input",{attrs:{placeholder:"默认取按钮名称"},model:{value:e.formModel.dialogTitle,callback:function(t){e.$set(e.formModel,"dialogTitle",t)},expression:"formModel.dialogTitle"}})],1):e._e(),3==e.formModel.openType?a("el-form-item",{attrs:{label:"弹框宽"}},[a("el-input",{attrs:{placeholder:"默认：70vw"},model:{value:e.formModel.dialogWidth,callback:function(t){e.$set(e.formModel,"dialogWidth",t)},expression:"formModel.dialogWidth"}})],1):e._e(),3==e.formModel.openType?a("el-form-item",{attrs:{label:"弹框高"}},[a("el-input",{attrs:{placeholder:"默认：60vh"},model:{value:e.formModel.dialogHeight,callback:function(t){e.$set(e.formModel,"dialogHeight",t)},expression:"formModel.dialogHeight"}})],1):e._e()]],2):e._e()],1)],1)],1)},l=[],i=a(3),s=a.n(i);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"DesMobileNavMenuData",mixins:[$mixins.propertyDialogSetting],data:function(){return{buttonTypeConfig:{default:"普通按钮",backTop:"返回顶部",imgUrl:"展示图片",tips:"展示文字"},formModel:null,tableData:[]}},created:function(){this.currentData&&(this.tableData=_.map(this.currentData,(function(e){return o(o({},e),{},{type:e.type||"default"})})),this.tableData.length&&(this.formModel=this.tableData[0]))},mounted:function(){this.formModel&&this.$refs.table.setCurrentRow(this.formModel)},methods:{yes:function(){return this.tableData},rowClickHandler:function(e){this.formModel=e},addData:function(){var e=this,t={_id:dsf.uuid(8),name:"",icon:"",imgUrl:"",backgroundColor:"",foreColor:"",type:"default",url:"",openType:"0",showPicture:"",showTemplate:"",showContent:"",scrollDom:"body",dialogWidth:"",dialogHeight:""};this.tableData.push(t),this.$nextTick((function(){e.$refs.table.setCurrentRow(t),e.formModel=t}))},removeData:function(e,t){this.tableData.splice(t,1)},up:function(e,t){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)},down:function(e,t){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)},openIcon:function(){window.open(dsf.url.getWebPath("$/iconfont/".concat(dsf.config.runType,"/demo_index.html")),"icondemo")}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ue-header-set"},[a("el-row",{staticClass:"content"},[a("el-col",{staticClass:"left",attrs:{span:6}},[a("el-checkbox",{attrs:{border:"",indeterminate:e.isIndeterminate},on:{change:e.chooseAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("ul",{staticClass:"check-list"},e._l(e.tools,(function(t,n){return a("li",{key:t.text},[a("el-checkbox",{attrs:{label:t.val,value:t.checked,checked:!1,name:"type"},on:{change:function(a){return e.chooseItem(t,n)}}},[e._v(e._s(t.text))])],1)})),0)],1),a("el-col",{staticClass:"right",attrs:{span:18}},[e.ready?a("div",{staticClass:"ue-container"},[e.showEditor?a("quill-editor",{ref:"myQuillEditor",staticClass:"quill-editor",style:{display:"flex",height:"100%","flex-direction":"column"},attrs:{options:e.option}}):e._e()],1):e._e()])],1)],1)},l=[],i=a(9),s=a.n(i),r=a(394);function o(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=c(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(r)throw i}}}}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var d={name:"MobileUeditorToolbar",mixins:[$mixins.propertyDialogSetting],data:function(){return{ready:!1,checkAll:!1,isIndeterminate:!1,tools:[{val:"bold",text:"加粗"},{val:"italic",text:"斜体"},{val:"underline",text:"下划线"},{val:"strike",text:"中划线"},{val:"blockquote",text:"引用"},{val:"code-block",text:"代码块"},{val:{header:1},text:"一级标题"},{val:{header:2},text:"二级标题"},{val:{list:"ordered"},text:"有序列表"},{val:{list:"bullet"},text:"无序列表"},{val:{script:"sub"},text:"下标"},{val:{script:"super"},text:"上标"},{val:{indent:"-1"},text:"取消首行缩进"},{val:{indent:"+1"},text:"首行缩进"},{val:{size:["small",!1,"large","huge"]},text:"字号"},{val:{header:[1,2,3,4,5,6,!1]},text:"段落"},{val:{color:[]},text:"字体颜色"},{val:{background:[]},text:"背景色"},{val:{font:[]},text:"字体"},{val:{align:[]},text:"对齐方式"},{val:"clean",text:"清除样式"},{val:"link",text:"链接"},{val:"image",text:"上传图片"},{val:"video",text:"视频地址"}],checkedTools:this.owner.toolBar,option:{modules:{toolbar:[]}},showEditor:!0}},watch:{checkedTools:function(){this.renderUEditor()}},created:function(){var e=this;Object(r["a"])((function(){e.ready=!0,e.initData(),e.judgeCheckAllStatus()}))},mounted:function(){this.renderUEditor()},methods:{initData:function(){var e=this;this.tools.forEach((function(t){0===e.checkedTools.length?t.checked=!0:t.checked=!1}));var t,a=o(this.checkedTools);try{var n=function(){var a=t.value,n=e.tools.findIndex((function(e){return"object"===s()(a)?"object"===s()(e.val)&&JSON.stringify(e.val)===JSON.stringify(a):e.val===a}));n>-1&&(e.tools[n].checked=!0)};for(a.s();!(t=a.n()).done;)n()}catch(err){a.e(err)}finally{a.f()}},judgeCheckAllStatus:function(){var e=!this.tools.find((function(e){return!e.checked}));if(e)return this.checkAll=!0,void(this.isIndeterminate=!1);var t=this.tools.findIndex((function(e){return e.checked}));if(-1!==t)return this.checkAll=!1,void(this.isIndeterminate=!0);this.checkAll=!1,this.isIndeterminate=!1},renderUEditor:function(){var e=this;this.showEditor=!1,this.option.modules.toolbar=this.checkedTools,this.$nextTick((function(){e.showEditor=!0}))},chooseItem:function(e,t){var a=_.assign({},e,{checked:!e.checked});this.tools.splice(t,1,a),this.refreshCheckedArr(),this.judgeCheckAllStatus()},chooseAll:function(){this.isIndeterminate=!1,this.checkAll?this.tools.forEach((function(e){e.checked=!0})):this.tools.forEach((function(e){e.checked=!1})),this.refreshCheckedArr()},refreshCheckedArr:function(){var e,t=[],a=o(this.tools);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.checked&&t.push(n.val)}}catch(err){a.e(err)}finally{a.f()}this.checkedTools=t},yes:function(){return this.checkedTools}}},f=d,p=a(0),h=Object(p["a"])(f,n,l,!1,null,null,null);t["default"]=h.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-layout-grid-setting dsf-nav-catalogue-setting",staticStyle:{height:"100%"}},[a("div",{staticClass:"des-layout-grid-setting-section content",staticStyle:{width:"360px"}},[a("div",{staticClass:"des-layout-grid-setting-section-header"},[a("span",[e._v("目录大纲")]),a("div",{staticClass:"menu"},[a("i",{staticClass:"iconfont icon-add",attrs:{title:"新增节点"},on:{click:function(t){return e.addNode()}}}),a("i",{staticClass:"iconfont icon-icon-close",attrs:{title:"删除节点"},on:{click:function(t){return e.removeNodes()}}})])]),a("dsf-virtual-scroll",{staticClass:"des-layout-grid-setting-section-box ds-tree-select-tree-box",attrs:{"scroll-x":"",height:"0"}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,"expand-on-click-node":!1,props:e.props,"node-key":"_id","show-checkbox":"","highlight-current":"","default-expand-all":""},on:{"current-change":e.currentChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("div",{staticClass:"custom-tree-node",class:{hide:l.hide,disabled:l.disabled}},[a("div",{staticClass:"label"},[0===l.type?a("i",{staticClass:"iconfont icon-wenjianjia"}):1===l.type?a("i",{staticClass:"iconfont icon-icon_wangye"}):a("i",{staticClass:"iconfont icon-fujian"}),a("span",{class:{required:l.required}},[e._v(e._s(l._name))])]),a("div",{staticClass:"menu"},[a("i",{staticClass:"iconfont icon-add",attrs:{title:"新增子节点"},on:{click:function(t){return t.stopPropagation(),e.addNode(n,l)}}}),a("i",{staticClass:"iconfont icon-icon-close",attrs:{title:"删除节点"},on:{click:function(t){return t.stopPropagation(),e.removeNode(n)}}})])])}}])})],1)],1),a("div",{staticClass:"des-layout-grid-setting-section",staticStyle:{flex:"auto"}},[a("div",{staticClass:"des-layout-grid-setting-section-header"},[a("span",[e._v(" "+e._s(e.form?e.tips[e.form.type][0]:"")+" "),e.form?a("span",{staticStyle:{color:"#999"}},[e._v(e._s(e.tips[e.form.type][1]))]):e._e()])]),a("dsf-virtual-scroll",{staticClass:"des-layout-grid-setting-section-box",attrs:{"scroll-x":"",height:"0"}},[e.form?a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"节点类型"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:0}},[e._v("空节点")]),a("el-radio",{attrs:{label:1}},[e._v("页面")]),a("el-radio",{attrs:{label:2}},[e._v("锚点")])],1)],1),a("el-form-item",{attrs:{label:"节点代码"}},[a("el-input",{model:{value:e.form.treeId,callback:function(t){e.$set(e.form,"treeId",t)},expression:"form.treeId"}})],1),a("el-form-item",{attrs:{label:"节点名称"}},[a("el-input",{model:{value:e.form._name,callback:function(t){e.$set(e.form,"_name",t)},expression:"form._name"}})],1),1===e.form.type?a("el-form-item",{attrs:{label:"页面链接"}},[a("dsf-input-url",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1):e._e(),2===e.form.type?a("el-form-item",{attrs:{label:"锚点标识"}},[a("el-input",{attrs:{placeholder:"一个页面，标识应该唯一。为空则按照节点名称匹配对应的文本类控件"},model:{value:e.form.anchor,callback:function(t){e.$set(e.form,"anchor",t)},expression:"form.anchor"}})],1):e._e(),a("el-form-item",{attrs:{label:"隐藏条件"}},[a("el-input",{attrs:{placeholder:"支持@[]表达式"},model:{value:e.form.hide,callback:function(t){e.$set(e.form,"hide","string"===typeof t?t.trim():t)},expression:"form.hide"}})],1),a("el-form-item",{attrs:{label:"禁用条件"}},[a("el-input",{attrs:{placeholder:"支持@[]表达式"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled","string"===typeof t?t.trim():t)},expression:"form.disabled"}})],1),a("el-form-item",{attrs:{label:"是否必显"}},[a("el-radio-group",{model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1):e._e()],1)],1)])},l=[],i={name:"NavCatalogueSetting",mixins:[$mixins.propertyDialogSetting],data:function(){return{form:null,treeData:[],tips:{0:["空节点：","只展示目录结构，不做任何跳转"],1:["页面：","会跳转对应页面"],2:["描点：","页面会滚动到锚点对应的位置"]},props:{disabled:"__"}}},created:function(){this.currentData&&(this.treeData=this.currentData)},mounted:function(){this.treeData.length&&(this.form=this.treeData[0],this.$refs.tree.setCurrentKey(this.form._id))},methods:{yes:function(){var e=[],t=[],a={};dsf.deepForEach(this.treeData,(function(n,l,i,s){e.length=l,e.push(i),n.treeId||(n.treeId=e.join("-"),t.push(n)),a[n.treeId]||(a[n.treeId]=[]),a[n.treeId].push(n),n["treeinfo_level"]=l,n["treeinfo_pid"]=(null===s||void 0===s?void 0:s["treeinfo_globalid"])||null,n["treeinfo_globalid"]=n["treeinfo_pid"]?n["treeinfo_pid"]+"."+n._id:n._id}));var n=function(e){a[e].length>1&&_.forEach(a[e],(function(t,a){a&&(t.treeId="".concat(e," (").concat(a,")"))}))};for(var l in a)n(l);return this.treeData},currentChange:function(e){this.form=e},addNode:function(e){var t,a=this,n=dsf.uuid(32),l={_id:n,_name:"",treeId:"",url:"",anchor:"",type:null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.type?2:1,hide:"",disabled:"",required:!1,children:[]};e?e.data.children.push(l):this.treeData.push(l),this.$nextTick((function(){a.form=l,a.$refs.tree.setCurrentKey(n)}))},removeNode:function(e){this.$refs.tree.remove(e)},removeNodes:function(){var e=this.$refs.tree.getCheckedNodes(!0);e.length?_.forEach(e,this.removeNode):dsf.layer.message("请至少选中一个节点",!1)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.code,callback:function(a){e.$set(t.row,"code",a)},expression:"scope.row.code"}})]}}])}),a("el-table-column",{attrs:{label:"接口路径","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.url,callback:function(a){e.$set(t.row,"url",a)},expression:"scope.row.url"}})]}}])}),a("el-table-column",{attrs:{label:"是否异步加载",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.lazy,callback:function(a){e.$set(t.row,"lazy",a)},expression:"scope.row.lazy"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),a("el-table-column",{attrs:{label:"异步接口地址",width:"200px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!t.row.lazy},model:{value:t.row.asyncUrl,callback:function(a){e.$set(t.row,"asyncUrl",a)},expression:"scope.row.asyncUrl"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"navShortMessageSeting",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],codes:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.code){this.codes[a]="";var l=this.codes.indexOf(t.code);-1!=l&&l<a&&(n="warning-row"),this.codes[a]=t.code}return n},newTab:function(){return{name:"Tab"+(this.tableData.length+1),code:null,url:"",lazy:!1,asyncUrl:""}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["code"]=this.tableData[e]["code"]||dsf.uuid();var t=this.codes.indexOf(this.tableData[e]["code"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"是否禁用","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.disable,callback:function(a){e.$set(t.row,"disable",a)},expression:"scope.row.disable"}})]}}])}),a("el-table-column",{attrs:{label:"是否隐藏","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.isHide,callback:function(a){e.$set(t.row,"isHide",e._n(a))},expression:"scope.row.isHide"}})]}}])}),a("el-table-column",{attrs:{label:"是否懒加载","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.lazy,callback:function(a){e.$set(t.row,"lazy",e._n(a))},expression:"scope.row.lazy"}})]}}])}),a("el-table-column",{attrs:{label:"是否显示提示","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.showTip,callback:function(a){e.$set(t.row,"showTip",e._n(a))},expression:"scope.row.showTip"}})]}}])}),a("el-table-column",{attrs:{label:"提示内容","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.tipContent,callback:function(a){e.$set(t.row,"tipContent",e._n(a))},expression:"scope.row.tipContent"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"NavTabEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.name){this.names[a]="";var l=this.names.indexOf(t.name);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.name}return n},newTab:function(){return{title:"Tab"+(this.tableData.length+1),name:null,disable:"false",isHide:"false",badge:null,lazy:"false",showTip:"false",tipContent:"",controls:[],error:!1}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("div",{staticStyle:{"text-align":"right",height:"auto",margin:"0px -20px"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增")])],1)]),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"code",label:"元数据代码","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.code,callback:function(a){e.$set(t.row,"code",a)},expression:"scope.row.code"}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"描述","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!t.row.isAttach},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{prop:"valueExpress",label:"对应字段","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.dataField,callback:function(a){e.$set(t.row,"dataField",a)},expression:"scope.row.dataField"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isAttach?a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.remove(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1)],1)},l=[],i={name:"NavTreeEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],type:0}},created:function(){var e=this.currentData||[];this.tableData=e},mounted:function(){},methods:{add:function(){this.tableData.push({code:"",isAttach:!0,alias:"",name:"",type:{text:"文本",value:"string"},length:"100",dataField:"",defaultValue:null,unit:null})},remove:function(e){dsf.array.remove(this.tableData,e)},yes:function(){return this.tableData}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-neweditor-toolbar"},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:6}},[a("el-checkbox",{attrs:{border:"",indeterminate:e.isIndeterminate},on:{change:e.chooseAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("ul",{staticClass:"check-list"},e._l(e.tools,(function(t,n){return a("li",{key:t.val},[a("el-checkbox",{attrs:{label:t.val,value:t.checked,checked:!1,name:"type"},on:{change:function(a){return e.chooseItem(t,n)}}},[e._v(" "+e._s(t.text)+" ")])],1)})),0)],1),a("el-col",{attrs:{span:18}},[e.showEditor?a("div",{staticClass:"ue-container"},[a("div",{attrs:{id:"toolbar-container2"}}),a("div",{attrs:{id:"editor-container2"}})]):e._e()])],1)],1)},l=[];function i(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=s(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var o={name:"DesNewEditorToolbar",mixins:[$mixins.propertyDialogSetting],data:function(){return{checkAll:!1,weditortool:null,tools:[{val:"headerSelect",text:"标题"},{val:"undo",text:"撤销"},{val:"redo",text:"重做"},{val:"bold",text:"加粗"},{val:"italic",text:"斜体"},{val:"underline",text:"下划线"},{val:"through",text:"删除线"},{val:"uploadAttachment",text:"上传附件"},{val:"sup",text:"上标"},{val:"sub",text:"下标"},{val:"clearStyle",text:"清除格式"},{val:"blockquote",text:"引用"},{val:"color",text:"字体颜色"},{val:"bgColor",text:"背景色"},{val:"numberedList",text:"有序列表"},{val:"bulletedList",text:"无序列表"},{val:"lineHeight",text:"行间距"},{val:"fontFamily",text:"字体"},{val:"fontSize",text:"字号"},{val:"indent",text:"增加缩进"},{val:"delIndent",text:"减少缩进"},{val:"justifyLeft",text:"居左对齐"},{val:"justifyCenter",text:"居中对齐"},{val:"justifyRight",text:"居右对齐"},{val:"justifyJustify",text:"两端对齐"},{val:"insertLink",text:"超链接"},{val:"unLink",text:"取消链接"},{val:"editLink",text:"修改链接"},{val:"viewLink",text:"查看链接"},{val:"insertImage",text:"网络图片"},{val:"deleteImage",text:"删除图片"},{val:"editImage",text:"编辑图片"},{val:"viewImageLink",text:"查看链接"},{val:"emotion",text:"表情"},{val:"insertVideo",text:"插入视频"},{val:"uploadVideo",text:"上传视频"},{val:"uploadImage",text:"上传图片"},{val:"divider",text:"分隔线"},{val:"insertTable",text:"插入表格"},{val:"deleteTable",text:"删除表格"},{val:"insertTableRow",text:"表格插入行"},{val:"deleteTableRow",text:"表格删除行"},{val:"insertTableCol",text:"表格插入列"},{val:"deleteTableCol",text:"表格删除列"},{val:"tableHeader",text:"设置表头"},{val:"tableFullWidth",text:"宽度自适应"},{val:"todo",text:"待办"},{val:"code",text:"行内代码"},{val:"codeBlock",text:"代码块"}],checkedTools:this.owner.toolBars,isIndeterminate:!1,toolbarConfig:{toolbarKeys:[]},showEditor:!0,wangeditorScriptLoading:!1}},watch:{checkedTools:function(){this.renderNewEditor()}},created:function(){this.initData()},mounted:function(){this.loadWEditor()},methods:{loadWEditor:function(){var e=this;return this.loadWangEditor().then((function(){e.initEditor()})).catch((function(e){dsf.error(e)}))},loadWangEditor:function(){var e=this;return new Promise((function(t,a){if(window.wangEditor)t();else if(!e.wangeditorScriptLoading){e.wangeditorScriptLoading=!0;var n=document.getElementsByTagName("head")[0],l=document.createElement("script");n.appendChild(l),l.src="./static/js/libs/wangeditor/index.js",l.onload=function(){var e=document.createElement("script");n.appendChild(e),e.src="./static/js/libs/wangeditor/attachment.js",e.onload=function(){t()}}}}))},initEditor:function(){var e=this;this.toolbarConfig.toolbarKeys=this.checkedTools;var t=window.wangEditor.createEditor({selector:"#editor-container2",config:{},mode:"default"});window.wangEditor.createToolbar({editor:t,selector:"#toolbar-container2",config:e.toolbarConfig,mode:"default"}),this.weditortool=Object.seal(t)},initData:function(){var e,t=this.tools.map((function(e){return e.checked=!1,e})),a=i(this.checkedTools);try{var n=function(){var a=e.value,n=t.findIndex((function(e){return e.val===a}));n>-1&&(t[n].checked=!0)};for(a.s();!(e=a.n()).done;)n()}catch(err){a.e(err)}finally{a.f()}this.tools=t,this.judgeCheckAllStatus()},judgeCheckAllStatus:function(){var e=!this.tools.find((function(e){return!e.checked}));if(e)return this.checkAll=!0,void(this.isIndeterminate=!1);var t=this.tools.findIndex((function(e){return e.checked}));if(-1!==t)return this.checkAll=!1,void(this.isIndeterminate=!0);this.checkAll=!1,this.isIndeterminate=!1},renderNewEditor:function(){var e=this;this.showEditor=!1,this.toolbarConfig.toolbarKeys=this.checkedTools,this.$nextTick((function(){e.weditortool=null,e.showEditor=!0,e.$nextTick((function(){e.initEditor()}))}))},chooseItem:function(e,t){var a=_.assign({},e,{checked:!e.checked});this.tools.splice(t,1,a),this.refreshCheckedArr(),this.judgeCheckAllStatus()},refreshCheckedArr:function(){var e,t=[],a=i(this.tools);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.checked&&t.push(n.val)}}catch(err){a.e(err)}finally{a.f()}this.checkedTools=t},chooseAll:function(){this.isIndeterminate=!1,this.checkAll?this.tools.forEach((function(e){e.checked=!0})):this.tools.forEach((function(e){e.checked=!1})),this.refreshCheckedArr()},yes:function(){return this.checkedTools}},beforeDestroy:function(){var e=this.weditortool;null!=e&&e.destroy()}},c=o,u=a(0),d=Object(u["a"])(c,n,l,!1,null,null,null);t["default"]=d.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{label:"",width:"35"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row._id},model:{value:e.radioId,callback:function(t){e.radioId=t},expression:"radioId"}})]}}])}),a("el-table-column",{attrs:{label:"规则名称"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a["dsfa_number_rule.name"])+" ")]}}])})],1)},l=[],i={name:"DesNumeration",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],loading:!1,param:{pageNum:1,pageSize:1e3,namespace:"dsfa.number.rule",pageName:"list"},radioId:this.currentData}},created:function(){this.initData()},methods:{initData:function(){var e=this;this.loading=!0,this.$http.get("meta/list/data",this.param).done((function(t){t.success?e.tableData=t.data:dsf.layer.message(t.message||"服务器异常",!1)})).error((function(e){dsf.layer.message(e.message||"服务器异常",!1)})).always((function(){e.loading=!1}))},yes:function(){return this.radioId||dsf.layer.message("请选择一个编号规则",!1),this.radioId}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-input",{attrs:{type:"textarea",rows:18,placeholder:"请输入内容"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})},l=[],i={name:"DesOutputWordStringEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{value:""}},computed:{},beforeCreate:function(){},created:function(){this.value=this.currentData},beforeMount:function(){},mounted:function(){var e=this.$el.querySelector(".el-textarea__inner");e.addEventListener("keydown",this.keydownHandler)},beforeDestroy:function(){var e=this.$el.querySelector(".el-textarea__inner");e.removeEventListener("keydown",this.keydownHandler)},methods:{keydownHandler:function(e){var t,a,n,l=e.target;9===e.keyCode&&(n=l.selectionStart,a=l.selectionEnd,t=$(l),t.val(t.val().substring(0,n)+"\t"+t.val().substring(a)),l.selectionStart=l.selectionEnd=n+1,e.preventDefault(),e.stopPropagation())},yes:function(){return this.value},paste:function(e){},blur:function(){this.value=this.$refs["input"].innerHTML}},destroyed:function(){}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("权限选择")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"权限标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),a("el-table-column",{attrs:{label:"权限名称",prop:"name","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"权限ID",prop:"priid",width:"280","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"PagePrivilege",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},created:function(){this.tableData=this.currentData||[]},methods:{add:function(){var e=this;this.$openDialog({title:"页面选择",width:this.config.width,height:this.config.height,top:"10vh",params:{path:"dsfa/oua/privilege/designselector"},btns:[{text:"确定",handler:function(t){if(t.content){var a=t.content;if(a&&a.yes&&dsf.isFunction(a.yes)){var n=a.yes();if(!n)return!1;_.forEach(n,(function(t){var a=e.tableData.filter((function(e,a){return e["priid"]==t["dsfa_oua_privilege_id"]}));a.length>0?a.name=t["_name"]:e.tableData.push({key:"",priid:t["dsfa_oua_privilege_id"],name:t["_name"]})}))}}}},{text:"取消"}]})},deleted:function(e){dsf.array.remove(this.tableData,e.row)},yes:function(){return this.tableData}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-control mobile ds-pending-list-edit"},[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增类别")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[a("el-table-column",{attrs:{fixed:"",label:"类别名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["默认颜色"==t.row.tag?[e._v(" 默认颜色 ")]:[a("el-input",{attrs:{placeholder:"请输入类别名称"},model:{value:t.row.tag,callback:function(a){e.$set(t.row,"tag","string"===typeof a?a.trim():a)},expression:"scope.row.tag"}})]]}}])}),a("el-table-column",{attrs:{label:"颜色","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfInputColor",{model:{value:t.row.color,callback:function(a){e.$set(t.row,"color","string"===typeof a?a.trim():a)},expression:"scope.row.color"}})]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"PendingListEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[]}},created:function(){var e=this.currentData,t={tag:"默认颜色",color:e.bgColorDefault};"默认颜色"!=e.bgColorList[0].tag&&e.bgColorList.unshift(t),this.tableData=e.bgColorList},methods:{newTab:function(){return{tag:"",color:""}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){this.tableData.splice(e.$index,1)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index+1,0,t)}},yes:function(){var e={bgColorDefault:this.tableData[0].color,bgColorList:this.tableData.slice(1)};return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-edit-container"},[a("div",{staticClass:"left"},[a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"grid"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("grid配置")]),a("Grid",{attrs:{options:e.gridOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"title"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("标题配置")]),a("Title",{attrs:{options:e.TitleOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"legend"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("图例配置")]),a("Legend",{attrs:{options:e.LegendOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"xAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("x轴配置")]),a("Xaxis",{attrs:{options:e.XaxisOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"yAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("y轴配置")]),a("Yaxis",{attrs:{options:e.YaxisOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"series"}},[a("div",{staticStyle:{width:"80px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("series配置")]),a("SeriesBar",{attrs:{options:e.seriesBarOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1)],1)],1),a("div",{staticClass:"right"},[a("div",[e._v("效果预览")]),a("PreviewChart",{staticClass:"chart",attrs:{options:e.wholeOptions}})],1)])},l=[],i=a(3),s=a.n(i),r=a(72),o=a(77),c=a(73),u=a(74),d=a(78),f=a(79),p=a(102),h=a(71),m={name:"barEdit",mixins:[$mixins.propertyDialogSetting,h["default"]],components:{PreviewChart:r["default"],Grid:o["default"],Title:c["default"],Legend:u["default"],Xaxis:d["default"],Yaxis:f["default"],SeriesBar:p["default"]},data:function(){return{activeName:"grid",wholeOptions:{},gridOptions:{},TitleOptions:{},LegendOptions:{},XaxisOptions:{},YaxisOptions:{},seriesBarOptions:{}}},created:function(){this.wholeOptions=dsf.mix(!0,{},this.owner.$children[0].chart),this.gridOptions=this.wholeOptions.grid,this.TitleOptions=this.wholeOptions.title,this.LegendOptions=this.wholeOptions.legend,this.XaxisOptions=this.wholeOptions.xAxis,this.YaxisOptions=this.wholeOptions.yAxis,this.seriesBarOptions=this.wholeOptions.series},methods:{changeOptions:function(e){var t=e.options,a=e.type;Object.assign(this.wholeOptions,s()({},a,t))}}},b=m,v=a(0),g=Object(v["a"])(b,n,l,!1,null,null,null);t["default"]=g.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("div",{staticStyle:{"text-align":"right",height:"auto",margin:"0px -20px"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增")])],1)]),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"code",label:"查询字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.queryKey,callback:function(a){e.$set(t.row,"queryKey",a)},expression:"scope.row.queryKey"}})]}}])}),a("el-table-column",{attrs:{prop:"origin",label:"来源",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.origin,callback:function(a){e.$set(t.row,"origin",a)},expression:"scope.row.origin"}},[a("el-option",{attrs:{value:"text",label:"固定值"}}),a("el-option",{attrs:{value:"queryString",label:"url"}}),a("el-option",{attrs:{value:"vm",label:"当前窗口变量"}}),a("el-option",{attrs:{value:"dialog",label:"弹出窗体参数"}}),a("el-option",{attrs:{value:"cookie",label:"cookie"}}),a("el-option",{attrs:{value:"sessionStorage",label:"sessionStorage"}}),a("el-option",{attrs:{value:"localStorage",label:"localStorage"}})],1)]}}])}),a("el-table-column",{attrs:{prop:"code",label:"来源取值字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.valueKey,callback:function(a){e.$set(t.row,"valueKey",a)},expression:"scope.row.valueKey"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},l=[],i={name:"DataGridConfigAttachRequestParams",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},created:function(){this.tableData=_.cloneDeep(this.currentData||[])},methods:{add:function(){this.tableData.push({origin:"text",queryKey:"",valueKey:""})},remove:function(e){var t=this.tableData.findIndex((function(t){return t===e}));t>=0&&this.tableData.splice(t,1)},yes:function(){return this.tableData||[]}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-edit-container"},[a("div",{staticClass:"left"},[a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"title"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("标题配置")]),a("Title",{attrs:{options:e.TitleOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"legend"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("图例配置")]),a("Legend",{attrs:{options:e.LegendOptions},on:{"change-options":e.changeOptions}})],1)],1)],1),a("div",{staticClass:"right"},[a("div",[e._v("效果预览")]),a("PreviewChart",{staticClass:"chart",attrs:{options:e.wholeOptions}})],1)])},l=[],i=a(3),s=a.n(i),r=a(72),o=a(73),c=a(74),u=a(83),d=a(71),f={name:"mapChartEdit",mixins:[$mixins.propertyDialogSetting,d["default"]],components:{PreviewChart:r["default"],Title:o["default"],Legend:c["default"],SeriesPie:u["default"]},data:function(){return{activeName:"title",wholeOptions:{},gridOptions:{},TitleOptions:{},LegendOptions:{},seriesPieOptions:{}}},created:function(){this.wholeOptions=dsf.mix(!0,{},this.owner.$children[0].chart),this.gridOptions=this.wholeOptions.grid,this.TitleOptions=this.wholeOptions.title,this.LegendOptions=this.wholeOptions.legend,this.seriesPieOptions=this.wholeOptions.series},methods:{changeOptions:function(e){var t=e.options,a=e.type;Object.assign(this.wholeOptions,s()({},a,t))}}},p=f,h=a(0),m=Object(h["a"])(p,n,l,!1,null,null,null);t["default"]=m.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-edit-container"},[a("div",{staticClass:"left"},[a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"grid"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("grid配置")]),a("Grid",{attrs:{options:e.gridOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"title"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("标题配置")]),a("Title",{attrs:{options:e.TitleOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"legend"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("图例配置")]),a("Legend",{attrs:{options:e.LegendOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"xAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("x轴配置")]),a("Xaxis",{attrs:{options:e.XaxisOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"yAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("y轴配置")]),a("Yaxis",{attrs:{options:e.YaxisOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"series"}},[a("div",{staticStyle:{width:"80px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("series配置")]),a("MixinAxis",{attrs:{options:e.seriesLineOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1)],1)],1),a("div",{staticClass:"right"},[a("div",[e._v("效果预览")]),a("PreviewChart",{staticClass:"chart",attrs:{options:e.wholeOptions}})],1)])},l=[],i=a(3),s=a.n(i),r=a(72),o=a(77),c=a(73),u=a(74),d=a(78),f=a(79),p=a(103),h=a(71),m={name:"mixinAxisEdit",mixins:[$mixins.propertyDialogSetting,h["default"]],components:{PreviewChart:r["default"],Grid:o["default"],Title:c["default"],Legend:u["default"],Xaxis:d["default"],Yaxis:f["default"],MixinAxis:p["default"]},data:function(){return{activeName:"grid",wholeOptions:{},gridOptions:{},TitleOptions:{},LegendOptions:{},XaxisOptions:{},YaxisOptions:{},seriesLineOptions:{}}},created:function(){this.wholeOptions=dsf.mix(!0,{},this.owner.$children[0].chart),this.gridOptions=this.wholeOptions.grid,this.TitleOptions=this.wholeOptions.title,this.LegendOptions=this.wholeOptions.legend,this.XaxisOptions=this.wholeOptions.xAxis,this.YaxisOptions=this.wholeOptions.yAxis,this.seriesLineOptions=this.wholeOptions.series},methods:{changeOptions:function(e){var t=e.options,a=e.type;Object.assign(this.wholeOptions,s()({},a,t))}}},b=m,v=a(0),g=Object(v["a"])(b,n,l,!1,null,null,null);t["default"]=g.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-edit-container"},[a("div",{staticClass:"left"},[a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"title"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("标题配置")]),a("Title",{attrs:{options:e.TitleOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"legend"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("图例配置")]),a("Legend",{attrs:{options:e.LegendOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"series"}},[a("div",{staticStyle:{width:"80px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("series配置")]),a("SeriesPie",{attrs:{options:e.seriesPieOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1)],1)],1),a("div",{staticClass:"right"},[a("div",[e._v("效果预览")]),a("PreviewChart",{staticClass:"chart",attrs:{options:e.wholeOptions}})],1)])},l=[],i=a(3),s=a.n(i),r=a(72),o=a(73),c=a(74),u=a(83),d=a(71),f={name:"pieEdit",mixins:[$mixins.propertyDialogSetting,d["default"]],components:{PreviewChart:r["default"],Title:o["default"],Legend:c["default"],SeriesPie:u["default"]},data:function(){return{activeName:"title",wholeOptions:{},gridOptions:{},TitleOptions:{},LegendOptions:{},seriesPieOptions:{}}},created:function(){this.wholeOptions=dsf.mix(!0,{},this.owner.$children[0].chart),this.gridOptions=this.wholeOptions.grid,this.TitleOptions=this.wholeOptions.title,this.LegendOptions=this.wholeOptions.legend,this.seriesPieOptions=this.wholeOptions.series},methods:{changeOptions:function(e){var t=e.options,a=e.type;Object.assign(this.wholeOptions,s()({},a,t))}}},p=f,h=a(0),m=Object(h["a"])(p,n,l,!1,null,null,null);t["default"]=m.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-edit-container"},[a("div",{staticClass:"left"},[a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"grid"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("grid配置")]),a("Grid",{attrs:{options:e.gridOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"title"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("标题配置")]),a("Title",{attrs:{options:e.TitleOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"legend"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("图例配置")]),a("Legend",{attrs:{options:e.LegendOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"xAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("x轴配置")]),a("Xaxis",{attrs:{options:e.XaxisOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"yAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("y轴配置")]),a("Yaxis",{attrs:{options:e.YaxisOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"series"}},[a("div",{staticStyle:{width:"80px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("series配置")]),a("SeriesLine",{attrs:{options:e.seriesLineOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1)],1)],1),a("div",{staticClass:"right"},[a("div",[e._v("效果预览")]),a("PreviewChart",{staticClass:"chart",attrs:{options:e.wholeOptions}})],1)])},l=[],i=a(3),s=a.n(i),r=a(72),o=a(77),c=a(73),u=a(74),d=a(78),f=a(79),p=a(106),h=a(71),m={name:"polylineEdit",mixins:[$mixins.propertyDialogSetting,h["default"]],components:{PreviewChart:r["default"],Grid:o["default"],Title:c["default"],Legend:u["default"],Xaxis:d["default"],Yaxis:f["default"],SeriesLine:p["default"]},data:function(){return{activeName:"grid",wholeOptions:{},gridOptions:{},TitleOptions:{},LegendOptions:{},XaxisOptions:{},YaxisOptions:{},seriesLineOptions:{}}},created:function(){this.wholeOptions=dsf.mix(!0,{},this.owner.$children[0].chart),this.gridOptions=this.wholeOptions.grid,this.TitleOptions=this.wholeOptions.title,this.LegendOptions=this.wholeOptions.legend,this.XaxisOptions=this.wholeOptions.xAxis,this.YaxisOptions=this.wholeOptions.yAxis,this.seriesLineOptions=this.wholeOptions.series},methods:{changeOptions:function(e){var t=e.options,a=e.type;Object.assign(this.wholeOptions,s()({},a,t))}}},b=m,v=a(0),g=Object(v["a"])(b,n,l,!1,null,null,null);t["default"]=g.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-edit-container"},[a("div",{staticClass:"left"},[a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"title"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("标题配置")]),a("Title",{attrs:{options:e.TitleOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"legend"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("图例配置")]),a("Legend",{attrs:{options:e.LegendOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"radar"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("指标配置")]),a("Radar",{attrs:{options:e.RadarOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"series"}},[a("div",{staticStyle:{width:"80px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("series配置")]),a("SeriesRadar",{attrs:{options:e.seriesRadarOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1)],1)],1),a("div",{staticClass:"right"},[a("div",[e._v("效果预览")]),a("PreviewChart",{staticClass:"chart",attrs:{options:e.wholeOptions}})],1)])},l=[],i=a(3),s=a.n(i),r=a(72),o=a(73),c=a(105),u=a(107),d=a(74),f=a(71),p={name:"radarEdit",mixins:[$mixins.propertyDialogSetting,f["default"]],components:{PreviewChart:r["default"],Title:o["default"],Legend:d["default"],Radar:c["default"],SeriesRadar:u["default"]},data:function(){return{activeName:"title",wholeOptions:{},TitleOptions:{},RadarOptions:{},seriesPieOptions:{}}},created:function(){this.wholeOptions=dsf.mix(!0,{},this.owner.$children[0].chart),this.TitleOptions=this.wholeOptions.title,this.LegendOptions=this.wholeOptions.legend,this.RadarOptions=this.wholeOptions.radar,this.seriesRadarOptions=this.wholeOptions.series},methods:{changeOptions:function(e){var t=e.options,a=e.type;Object.assign(this.wholeOptions,s()({},a,t))}}},h=p,m=a(0),b=Object(m["a"])(h,n,l,!1,null,null,null);t["default"]=b.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart-edit-container"},[a("div",{staticClass:"left"},[a("el-tabs",{staticClass:"design-development-edit",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"grid"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("grid配置")]),a("Grid",{attrs:{options:e.gridOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"title"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("标题配置")]),a("Title",{attrs:{options:e.TitleOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"legend"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("图例配置")]),a("Legend",{attrs:{options:e.LegendOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"xAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("x轴配置")]),a("Xaxis",{attrs:{options:e.XaxisOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"yAxis"}},[a("div",{staticStyle:{width:"60px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("y轴配置")]),a("Yaxis",{attrs:{options:e.YaxisOptions},on:{"change-options":e.changeOptions}})],1),a("el-tab-pane",{attrs:{name:"series"}},[a("div",{staticStyle:{width:"80px","text-align":"center"},attrs:{slot:"label"},slot:"label"},[e._v("series配置")]),a("SeriesScatter",{attrs:{options:e.seriesLineOptions,w:e.wholeOptions},on:{"change-options":e.changeOptions}})],1)],1)],1),a("div",{staticClass:"right"},[a("div",[e._v("效果预览")]),a("PreviewChart",{staticClass:"chart",attrs:{options:e.wholeOptions}})],1)])},l=[],i=a(3),s=a.n(i),r=a(72),o=a(77),c=a(73),u=a(74),d=a(78),f=a(79),p=a(104),h=a(71),m={name:"scatterEdit",mixins:[$mixins.propertyDialogSetting,h["default"]],components:{PreviewChart:r["default"],Grid:o["default"],Title:c["default"],Legend:u["default"],Xaxis:d["default"],Yaxis:f["default"],SeriesScatter:p["default"]},data:function(){return{activeName:"grid",wholeOptions:{},gridOptions:{},TitleOptions:{},LegendOptions:{},XaxisOptions:{},YaxisOptions:{},seriesLineOptions:{}}},created:function(){this.wholeOptions=dsf.mix(!0,{},this.owner.$children[0].chart),this.gridOptions=this.wholeOptions.grid,this.TitleOptions=this.wholeOptions.title,this.LegendOptions=this.wholeOptions.legend,this.XaxisOptions=this.wholeOptions.xAxis,this.YaxisOptions=this.wholeOptions.yAxis,this.seriesLineOptions=this.wholeOptions.series},methods:{changeOptions:function(e){var t=e.options,a=e.type;Object.assign(this.wholeOptions,s()({},a,t))}}},b=m,v=a(0),g=Object(v["a"])(b,n,l,!1,null,null,null);t["default"]=g.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-qrcode-edit"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"90px",size:"small"}},[a("el-form-item",{attrs:{label:"来源"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{attrs:{label:"upload"}},[e._v("上传")]),a("el-radio",{attrs:{label:"trends"}},[e._v("动态生成")])],1)],1),"upload"==e.form.type?a("el-form-item",{attrs:{label:"图片链接"}},[a("dsf-input-upload",{attrs:{size:"small"},model:{value:e.form.file,callback:function(t){e.$set(e.form,"file","string"===typeof t?t.trim():t)},expression:"form.file"}})],1):[a("el-form-item",{attrs:{label:"转换文本"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"支持表达式"},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text","string"===typeof t?t.trim():t)},expression:"form.text"}})],1),a("el-form-item",{attrs:{label:"图片宽度"}},[a("el-input-number",{attrs:{min:10},model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}})],1),a("el-form-item",{attrs:{label:"图片高度"}},[a("el-input-number",{attrs:{min:10},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1)]],2)],1)},l=[],i={name:"DesQrcodeEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{form:{type:"upload",file:"",text:"",width:300,height:300}}},created:function(){var e=this.currentData;if(e){var t=e.type,a=void 0===t?"upload":t,n=e.file,l=void 0===n?"":n,i=e.text,s=void 0===i?"":i,r=e.width,o=void 0===r?300:r,c=e.height,u=void 0===c?300:c;this.form=dsf.mix(!0,this.form,{type:a,file:l,text:s,width:o,height:u})}},methods:{yes:function(){return this.form}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DsfButton",{on:{click:e.addGroup}},[e._v("新增分组")]),e._l(e.tableData,(function(t,n){return a("el-container",{key:t.title},[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("div",{staticStyle:{width:"200px",float:"left"}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"tab.title"}})],1),a("DsfButton",{on:{click:function(t){return e.add(n)}}},[e._v("新增行")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",refInFor:!0,staticClass:"ds-table",attrs:{border:!0,data:t.tabItems}},[a("el-table-column",{attrs:{label:"资源名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"图片地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfInputUpload",{on:{change:e.coverChange},model:{value:t.row.imgUrl,callback:function(a){e.$set(t.row,"imgUrl",a)},expression:"scope.row.imgUrl"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"链接地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.urlAddress,callback:function(a){e.$set(t.row,"urlAddress",a)},expression:"scope.row.urlAddress"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t,n)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t,n)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t,n)}}})]}}],null,!0)})],1)],1)],1)}))],2)},l=[],i={name:"RegisterDatabaseEdit",mixins:[$mixins.propertyDialogSetting],props:{tabList:{type:Array,default:function(){return[{title:"分组名称",tabItems:[{name:"Tab",imgUrl:null,urlAddress:""}]}]}}},data:function(){return{tableData:[],names:[]}},created:function(){this.tableData=this.currentData||this.tabList},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.name){this.names[a]="";var l=this.names.indexOf(t.name);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.name}return n},addGroup:function(){var e={title:"分组名称"+(this.tableData.length+1),tabItems:[{name:"Tab",imgUrl:null,urlAddress:""}]};this.tableData.push(e)},newTab:function(){return{name:"Tab",imgUrl:null,urlAddress:""}},add:function(e){this.tableData[e]["tabItems"].push(this.newTab())},deleted:function(e,t){dsf.array.remove(this.tableData[t]["tabItems"],e.row)},up:function(e,t){if(e.$index>0){var a=this.tableData[t]["tabItems"][e.$index],n=e.$index;dsf.array.remove(this.tableData[t]["tabItems"],a),this.tableData[t]["tabItems"].splice(n-1,0,a)}},down:function(e,t){if(this.tableData[t]["tabItems"].length-1>e.$index){var a=this.tableData[t]["tabItems"][e.$index],n=e.$index;dsf.array.remove(this.tableData[t]["tabItems"],a),this.tableData[t]["tabItems"].splice(n+1,0,a)}},validate:function(){return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)},coverChange:function(e){}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{fixed:"",label:"显示名称",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{label:"标识",width:"140px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e.ischild?e._e():a("el-table-column",{attrs:{label:"是否有子目录",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.haschild,callback:function(a){e.$set(t.row,"haschild",a)},expression:"scope.row.haschild"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}],null,!1,2900145600)}),a("el-table-column",{attrs:{label:e.ischild?"接口地址":"接口地址(有子目录无效)",width:"200px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:t.row.haschild},model:{value:t.row.url,callback:function(a){e.$set(t.row,"url",a)},expression:"scope.row.url"}})]}}])}),a("el-table-column",{attrs:{label:"查询接口",width:"200px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:t.row.haschild},model:{value:t.row.searchUrl,callback:function(a){e.$set(t.row,"searchUrl",a)},expression:"scope.row.searchUrl"}})]}}])}),e.ischild?e._e():a("el-table-column",{attrs:{label:"子目录",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:!t.row.haschild},on:{click:function(a){return e.toChildSet(t.row)}}},[e._v("配置")])]}}],null,!1,4192820421)}),a("el-table-column",{attrs:{label:"默认打开层级",width:"150px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.defaultOpenSeries,callback:function(a){e.$set(t.row,"defaultOpenSeries",a)},expression:"scope.row.defaultOpenSeries"}})]}}])}),a("el-table-column",{attrs:{label:"配置参数",width:"150px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.configParams,callback:function(a){e.$set(t.row,"configParams",a)},expression:"scope.row.configParams"}})]}}])}),e.ischild?e._e():a("el-table-column",{attrs:{label:"显示方式",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.displayMode,callback:function(a){e.$set(t.row,"displayMode",a)},expression:"scope.row.displayMode"}},[a("el-option",{attrs:{label:"树选择",value:"tree"}}),a("el-option",{attrs:{label:"通讯录",value:"bar"}})],1)]}}],null,!1,3021592333)}),a("el-table-column",{attrs:{label:"隐藏",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.hide,callback:function(a){e.$set(t.row,"hide",a)},expression:"scope.row.hide"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),e.ischild?e._e():a("el-table-column",{attrs:{label:"懒加载",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.lazy,callback:function(a){e.$set(t.row,"lazy",a)},expression:"scope.row.lazy"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}],null,!1,4201215870)}),a("el-table-column",{attrs:{label:"操作",fixed:"right","header-align":"center",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"SmsTowLevelTabPanelEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[]}},props:{ischild:{type:Boolean,default:!1}},created:function(){var e=this.currentData;this.tableData=e||[this.newTab()]},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.name){this.names[a]="";var l=this.names.indexOf(t.name);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.name}return n},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){this.tableData.splice(e.$index,1)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index];this.tableData.splice(e.$index,1),this.tableData.splice(e.$index+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["name"]=this.tableData[e]["name"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["name"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复标识",!1),!1}return!0},yes:function(){return this.tableData},checkMaxSpan:function(e,t){e[t]=dsf.isNumber(e[t])?Number(e[t]):null,e[t]&&e[t]>24&&(e[t]=24),e[t]&&e[t]<0&&(e[t]=null)},newTab:function(){return{title:"Tab"+(this.tableData.length+1),name:"tab"+(this.tableData.length+1),haschild:!1,url:"",searchUrl:"",hide:!1,lazy:!1,child:[],displayMode:"tree"}},toChildSet:function(e){this.$openDialog({title:"配置子目录",width:"800px",height:"60vh",content:"SmsTowLevelTabPanelEdit",params:{ischild:!0,currentData:e.child||[]},btns:[{text:"确定",handler:function(t){if(t&&t.yes){var a=t.yes();e.child=a}}},{text:"取消"}]})}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-state-manage-edit container-full",on:{click:e.emptyClick}},[a("el-aside",{staticClass:"container-aside",attrs:{width:"250px"}},[a("div",[a("div",{staticClass:"tool-box"},[a("DsfIcon",{attrs:{name:"hao",title:"新增"},on:{click:e.addNew}})],1),a("ul",{staticClass:"box"},e._l(e.items,(function(t,n){return a("li",{key:t.id,class:{actived:n==e.activedIndex},on:{dblclick:function(t){return e.editItem(n)},click:function(t){return t.stopPropagation(),e.selected(n)}}},[e.editorIndex==n?a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"item.name"}],staticClass:"item-editor",class:["input-"+t.id],attrs:{tabindex:"index"},domProps:{value:t.name},on:{input:function(a){a.target.composing||e.$set(t,"name",a.target.value)}}}):a("span",{staticClass:"ellipsis",attrs:{title:t.name}},[e._v(e._s(t.name))]),a("DsfIcon",{staticClass:"item-deleted",attrs:{name:"guanbi1",title:"删除"},on:{click:function(t){return t.stopPropagation(),e.deleteItem(n)}}})],1)})),0)])]),a("el-main",[a("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form}},[a("el-form-item",{attrs:{label:"绑定角色"}},[a("DsfDataChoice",{staticClass:"ds-no-padding",attrs:{disabled:e.dsf.isEmptyObject(e.form),"show-label":!1,"dialog-url":"dsfa/oua/role/designselector","dialog-width":"800px","dialog-height":"60vh","text-key":"_id","value-key":"name"},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}})],1)],1),a("el-tabs",{model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[a("el-tab-pane",{attrs:{label:"组件",name:"ctrls"}},[a("el-table",{attrs:{data:e.$ctrls,fit:"",border:""},scopedSlots:e._u([{key:"empty",fn:function(){return[e._v(" 未能检测到可配置的信息 ")]},proxy:!0}])},[a("el-table-column",{attrs:{label:"组件标识"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.label))])]}}])}),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s("隐藏")+" "),a("el-checkbox",{attrs:{indeterminate:e.getIndeterminate("ctrls","hidden")},on:{change:function(t){return e.checkAllChange(t,"ctrls","hidden")}},model:{value:e.form.ctrls_checkAllHidden,callback:function(t){e.$set(e.form,"ctrls_checkAllHidden",t)},expression:"form.ctrls_checkAllHidden"}})]},proxy:!0},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.checkChange(a,t.row,"ctrls","hidden")}},model:{value:t.row.hidden,callback:function(a){e.$set(t.row,"hidden",a)},expression:"scope.row.hidden"}})]}}])}),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s("只读")+" "),a("el-checkbox",{attrs:{indeterminate:e.getIndeterminate("ctrls","readOnly")},on:{change:function(t){return e.checkAllChange(t,"ctrls","readOnly")}},model:{value:e.form.ctrls_checkAllReadOnly,callback:function(t){e.$set(e.form,"ctrls_checkAllReadOnly",t)},expression:"form.ctrls_checkAllReadOnly"}})]},proxy:!0},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.checkChange(a,t.row,"ctrls","readOnly")}},model:{value:t.row.readOnly,callback:function(a){e.$set(t.row,"readOnly",a)},expression:"scope.row.readOnly"}})]}}])}),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s("必填")+" "),a("el-checkbox",{attrs:{indeterminate:e.getIndeterminate("ctrls","required")},on:{change:function(t){return e.checkAllChange(t,"ctrls","required")}},model:{value:e.form.ctrls_checkAllRequired,callback:function(t){e.$set(e.form,"ctrls_checkAllRequired",t)},expression:"form.ctrls_checkAllRequired"}})]},proxy:!0},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.checkChange(a,t.row,"ctrls","required")}},model:{value:t.row.required,callback:function(a){e.$set(t.row,"required",a)},expression:"scope.row.required"}})]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"按钮",name:"buttons"}},[a("el-table",{attrs:{data:e.$buttons,fit:"",border:""}},[a("el-table-column",{attrs:{label:"按钮"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.label))])]}}])}),a("el-table-column",{attrs:{label:"所属按钮组"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.owner))])]}}])}),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s("隐藏")+" "),a("el-checkbox",{attrs:{indeterminate:e.getIndeterminate("buttons","hidden")},on:{change:function(t){return e.checkAllChange(t,"buttons","hidden")}},model:{value:e.form.buttons_checkAllHidden,callback:function(t){e.$set(e.form,"buttons_checkAllHidden",t)},expression:"form.buttons_checkAllHidden"}})]},proxy:!0},{key:"default",fn:function(t){return[a("el-checkbox",{on:{change:function(a){return e.checkChange(a,t.row,"buttons","hidden")}},model:{value:t.row.hidden,callback:function(a){e.$set(t.row,"hidden",a)},expression:"scope.row.hidden"}})]}}])})],1)],1)],1)],1)],1)},l=[],i={name:"DesStateManageEdit",mixins:[$mixins.propertyDialogSetting],props:{designer:{type:Object,default:function(){return null}},setting:{type:[Array,Object],default:function(){return[]}}},data:function(){return{items:dsf.mix(!0,[],this.setting),editorIndex:-1,activedIndex:-1,form:{},tabActive:"ctrls"}},computed:{$ctrls:function(){var e;return(null===this||void 0===this||null===(e=this.form)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.ctrls)||[]},$buttons:function(){var e;return(null===this||void 0===this||null===(e=this.form)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.buttons)||[]}},beforeCreate:function(){},created:function(){document.addEventListener("click",this.emptyClick)},beforeMount:function(){},mounted:function(){var e=this;if(this.items.length>0){var t=this.getDesignerComponents();_.each(this.items,(function(a){a.data&&dsf.isString(a.data)&&(a.data=JSON.parse(a.data||"{}")),a.data||e.$set(a,"data",{});var n=a.data,l=dsf.mix(!0,[],t.ctrls),i=a.data.ctrls||[];_.each(l,(function(t){var a=_.find(i,(function(e){return e.designId==t.designId}));a&&dsf.mix(t,{hidden:!a.visible,readOnly:a.readOnly,required:a.required}),e.$set(n,"ctrls",l)}));var s=dsf.mix(!0,[],t.buttons),r=a.data.buttons||[];_.each(s,(function(t){var a=_.find(r,(function(e){return e.id==t.id}));a&&dsf.mix(t,{hidden:!a.visible}),e.$set(n,"buttons",s)}))})),this.selected(0)}},beforeDestroy:function(){document.removeEventListener("click",this.emptyClick)},destroyed:function(){},methods:{getDesignerComponents:function(){var e={ctrls:[],buttons:[]};return dsf.designer.recursionLayoutTree(this.designer.$refs.viewProxy,null,null,(function(t,a,n){if(!t.treeProxy&&!t.isView){if(t.childMetaDataCodes)return!!t.isFormControl&&(e.ctrls.push({caption:t.caption,label:t.label?t.label+"("+t.caption+")":t.caption,hidden:!1,readOnly:!1,required:!1}),!1);t.isBlockControl?e.ctrls.push({caption:t.caption,label:t.caption,designId:t.designId,hidden:!1,readOnly:!1,required:!1}):t.isFormControl&&!t.forceHidden?e.ctrls.push({caption:t.metadata_fullcode,designId:t.designId,label:t.label?t.label+"("+t.caption+")":t.caption,hidden:!1,readOnly:!1,required:!1}):t.isButtonBar&&_.each(t.buttons,(function(a){var n={id:a.actionName+(a.alias?"."+a.alias:""),owner:t.caption,ownerId:t.designId,label:a.text,hidden:!1};e.buttons.push(n)}))}})),e},emptyClick:function(){this.editorIndex=-1},addNew:function(){this.items.push({id:dsf.uuid(32),name:"新建规则"+(this.items.length+1),roles:[],data:this.getDesignerComponents()})},editItem:function(e){var t=this;this.editorIndex=e;var a=_.find(this.items,(function(t,a){return a==e}));this.$nextTick((function(){var e,n;null===(e=t.$el.querySelector(".input-"+a.id))||void 0===e||null===(n=e.focus)||void 0===n||n.call(e)}))},selected:function(e){this.activedIndex=e;var t=_.find(this.items,(function(t,a){return a==e}));t?(this.form=t,this.leepDataCheckIsCheckedAll(this.form,"ctrls"),this.leepDataCheckIsCheckedAll(this.form,"buttons")):this.form={}},deleteItem:function(e){var t=this;dsf.layer.confirm("您确定要删除?").then((function(){var a=_.find(t.items,(function(t,a){return a==e}));a&&(dsf.array.remove(t.items,a),t.activedIndex==e&&t.selected(e-1))})).catch((function(){}))},getIndeterminate:function(e,t){var a,n=0,l=(null===this||void 0===this||null===(a=this.form)||void 0===a?void 0:a.data)||{};return l=l[e]||[],!!l&&(_.each(l||[],(function(e){!0===e[t]&&n++})),n>0&&n<l.length)},checkAllChange:function(e,t,a){var n,l=null===this||void 0===this||null===(n=this.form)||void 0===n?void 0:n.data;l[t]&&_.each(l[t]||[],(function(t){t[a]=e}))},checkChange:function(e,t,a,n){this.leepDataCheckIsCheckedAll(this.form,a,n)},leepDataCheckIsCheckedAll:function(e,t){var a=0,n=0,l=0,i=e.data||{};i=i[t]||[],_.each(i,(function(e){e.hidden&&a++,e.readOnly&&n++,e.required&&l++})),i.length>0&&(this.$set(this.form,t+"_checkAllHidden",a>=i.length),this.$set(this.form,t+"_checkAllReadOnly",n>=i.length),this.$set(this.form,t+"_checkAllRequired",l>=i.length))},yes:function(){var e=dsf.mix(!0,[],this.items),t=[];return _.each(e,(function(e){_.each(e.data,(function(e){_.each(e,(function(e){e.visible=!e.hidden,delete e.hidden}))})),t.push({id:e.id,name:e.name,roles:e.roles,data:JSON.stringify(e.data)})})),t}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"des-default-value"},[a("div",{staticStyle:{overflow:"auto"}},[e._l(e.tableData,(function(t,n){return[a("el-table",{key:n,staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:t,border:!0}},[a("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),a("el-table-column",{attrs:{prop:"value",label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}],null,!0)},[e.multiple?a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("值")]),a("DsfButton",{staticStyle:{float:"right"},attrs:{text:"删除",size:"mini"},on:{click:function(t){return e.removeData(n)}}})],1):e._e()])],1)]}))],2)])},l=[],i=a(3),s=a.n(i),r={name:"DesStaticDataFormItem",mixins:[$mixins.propertyDialogSetting],data:function(){return{multiple:!1,tableData:[]}},created:function(){this.multiple=!1,this.valueAttributes=dsf.mix(!0,[],this.owner.metadata.valueAttributes),this.init()},methods:{yes:function(){var e=this.tableData.map((function(e){var t={};return e.forEach((function(e){t[e.code]=e.value||""})),t}));return 1==e.length?e[0]:e},init:function(){var e=this,t=this.owner.staticValue;if(t){dsf.isString(t)&&(t=s()({},this.valueAttributes[0].code,t)),dsf.isArray(t)||(t=[t]);var a=dsf.mix(!0,[],t);a.forEach((function(t){return e.addData(t)}))}else this.addData()},addData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tableData.push(this.valueAttributes.map((function(t){return{code:t.code,text:t.name,value:void 0==e[t.code]?null:e[t.code]}})))},removeData:function(e){this.tableData.length<2?(this.tableData=[],this.addData()):this.tableData.splice(e,1)}}},o=r,c=a(0),u=Object(c["a"])(o,n,l,!1,null,null,null);t["default"]=u.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"ds-static-tree-data"},[a("el-col",{staticClass:"ds-static-tree-data_left",attrs:{span:12}},[a("el-container",[a("el-header",[0==e.data.length?a("DsfButton",{attrs:{icon:"iconfont icon-icon_tianjia",size:"small"},on:{click:e.crtData}},[e._v(" 新增树 ")]):a("DsfButton",{attrs:{icon:"iconfont icon-shanchu",size:"small",type:"plain"},on:{click:e.remove}},[e._v(" 重置树 ")]),a("DsfButton",{staticClass:"iconfont icon-lianxi",attrs:{size:"small"},on:{click:e.editNode}},[e._v(" 编辑节点数据结构 ")])],1),a("el-main",[a("el-tree",{ref:"tree",staticClass:"ds-tree-select-tree-box",attrs:{"node-key":"_id","default-expand-all":"",data:e.data,"expand-on-click-node":!1,"highlight-current":!0,"check-on-click-node":!0},on:{"current-change":e.nodeCheck},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("div",{staticClass:"tree-node custom-tree-node"},[a("i",{staticClass:"iconfont",class:[n.childNodes.length>0?n.expanded?"icon-dakai":"icon-wenjianjia":"icon-shiyongwendang"]}),a("el-input",{ref:"input"+l._id,attrs:{size:"mini",placeholder:"请输入节点名称"},model:{value:l._name,callback:function(t){e.$set(l,"_name",t)},expression:"data._name"}}),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"text",size:"mini",title:"增加同级"},on:{click:function(){return e.append(0,l)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("同级 ")]),a("el-button",{attrs:{type:"text",size:"mini",title:"增加子级"},on:{click:function(){return e.append(1,l)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v("子级 ")]),a("el-button",{attrs:{type:"text",size:"mini",title:"删除节点"},on:{click:function(){return e.remove(1,n)}}},[a("i",{staticClass:"el-icon-remove-outline"}),e._v("节点 ")])],1)],1)}}])})],1)],1)],1),a("el-col",{staticClass:"ds-static-tree-data_right",attrs:{span:12}},[a("staticTreeTable",{ref:"treeTable",staticClass:"treeTable"})],1)],1)},l=[],i=[{_id:"1",_name:"1级",treeinfo_level:1,num:1,globalLevel:""}],s={name:"DesStaticTreeData",mixins:[$mixins.propertyDialogSetting],props:{value:{type:Array,default:function(){return[]}}},provide:function(){return{$parentSelf:this}},data:function(){return{data:JSON.parse(JSON.stringify(this.value)),timeOutTimer:null,tableData:[],globalNodeData:{num:"",globalLevel:"",treeinfo_level:"",_id:"",children:"",_name:""},currentNodeData:{}}},created:function(){var e;this.currentData&&!dsf.isEmptyObject(this.currentData.attach)&&(this.data=JSON.parse(JSON.stringify(this.currentData.attach)),this.globalNodeData=JSON.parse(JSON.stringify(this.currentData.globalNodeData))),null!==(e=this.data)&&void 0!==e&&e.length||this.crtData()},methods:{crtData:function(){this.data=JSON.parse(JSON.stringify(i)),this.focusInput("1",this.data[0])},focusInput:function(e,t){var a=this;this.$nextTick((function(){a.$refs["input"+e].$refs.input.focus(),t?a.timeOutTimer=setTimeout((function(){a.$refs.tree.setCurrentKey(e),a.currentNodeData=t,clearTimeout(a.timeOutTimer)})):a.$refs.tree.setCurrentKey(e)}))},append:function(e,t){var a={};if(e){var n,l=((null===(n=_.last(t.children))||void 0===n?void 0:n.num)||0)+1;a={num:l,globalLevel:t._id,treeinfo_level:t.treeinfo_level+1,_id:t._id+"."+l,_name:t.treeinfo_level+1+"级-"+l},this.$refs.tree.append(a,t)}else{var i,s=1,r=t.globalLevel,o=null;if(t.treeinfo_level>1){var c=this.$refs.tree.getNode(r);o=_.last(c.data.children)}else o=_.last(this.data);s=((null===(i=o)||void 0===i?void 0:i.num)||0)+1,a={num:s,globalLevel:r,_id:r+(t.treeinfo_level>1?".":"")+s,_name:t.treeinfo_level+"级-"+s,treeinfo_level:t.treeinfo_level},this.$refs.tree.insertAfter(a,o)}this.focusInput(a._id,a)},remove:function(e,t){t?this.$refs.tree.remove(t):(this.data=[],this.currentNodeData={})},yes:function(){return{attach:this.data,globalNodeData:this.globalNodeData}},editNode:function(){var e=this;this.$openDialog({title:"自定义每个节点都会具备的字段",width:"550px",height:"600px",content:"staticTreeTable",params:{isGlobal:!0,value:this.globalNodeData},btns:[{text:"确定",handler:function(t){if(t){var a=t;if(a&&a.yes&&dsf.isFunction(a.yes)){var n=a.yes();if(!n)return!1;e.globalNodeData=n}}}},{text:"取消"}]})},nodeCheck:function(e){var t;this.currentNodeData=(null===(t=this.$refs.tree.getNode(e._id))||void 0===t?void 0:t.data)||{}}},beforeDestroy:function(){this.timeOutTimer&&clearTimeout(this.timeOutTimer)}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-static-tree-table"},[e.$parentSelf?e._e():a("el-header",[a("DsfButton",{attrs:{icon:"iconfont icon-icon_tianjia",size:"small",disabled:0==e.tableData.length},on:{click:function(t){return e.add()}}},[e._v(" 新增字段 ")])],1),a("el-main",[a("el-table",{attrs:{data:e.tableData,border:"",height:"555","empty-text":"请选择右侧节点"}},[a("el-table-column",{attrs:{prop:"key",label:"节点字段名","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-input",{attrs:{disabled:!e.$attrs.isGlobal||n.readOnly>=1},model:{value:n.key,callback:function(t){e.$set(n,"key",t)},expression:"row.key"}})]}}])}),e.$parentSelf?a("el-table-column",{attrs:{prop:"val",label:"节点字段值","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e.$parentSelf||"_name"!=n.key?"children"==n.key?a("el-input",{attrs:{disabled:""}}):e.$parentSelf?a("el-input",{attrs:{disabled:n.readOnly>1},model:{value:e.$parentSelf.currentNodeData[n.key],callback:function(t){e.$set(e.$parentSelf.currentNodeData,n.key,t)},expression:"$parentSelf.currentNodeData[row.key]"}}):a("el-input",{attrs:{disabled:n.readOnly>1},model:{value:n.val,callback:function(t){e.$set(n,"val",t)},expression:"row.val"}}):a("el-input",{attrs:{disabled:""}})]}}],null,!1,913161793)}):e._e(),e.$parentSelf?e._e():a("el-table-column",{attrs:{label:"操作",width:"80px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0===n.readOnly?a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.remove(n)}}},[e._v(" 删除 ")]):e._e()]}}],null,!1,421106246)})],1)],1)],1)},l=[],i=a(3),s=a.n(i),r={name:"staticTreeTable",inject:{$parentSelf:{default:null}},mixins:[$mixins.propertyDialogSetting],data:function(){return{newRow:{key:"",val:"",readOnly:0},fixedKeys:["num","globalLevel","treeinfo_level","_id","children","_name"]}},computed:{currentObj:function(){var e,t,a={};return null!==(e=this.$attrs)&&void 0!==e&&e.isGlobal?a=this.$attrs.value:null!==(t=this.$parentSelf.currentNodeData)&&void 0!==t&&t._id&&(a=dsf.mix({},this.$parentSelf.globalNodeData,this.$parentSelf.currentNodeData)),a||{}},tableData:function(){var e=[];for(var t in this.currentObj)e.push({key:t,val:this.currentObj[t],readOnly:this.isReadOnly(t)});return e}},methods:{isReadOnly:function(e){return"_name"==e?1:this.fixedKeys.includes(e)?2:0},add:function(){this.tableData.push(dsf.mix({},this.newRow))},remove:function(e){dsf.array.remove(this.tableData,e)},yes:function(){var e,t={};return null!==(e=this.$attrs)&&void 0!==e&&e.isGlobal?(_.forEach(this.tableData,(function(e){e.key&&!t[e.key]&&dsf.mix(t,s()({},e.key,e.val))})),t):this.tableData}}},o=r,c=a(0),u=Object(c["a"])(o,n,l,!1,null,null,null);t["default"]=u.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-header",{staticStyle:{padding:"8px"}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.treeFilter.apply(null,arguments)}}},[a("el-input",{attrs:{size:"small"},scopedSlots:e._u([{key:"append",fn:function(){return[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.treeFilter}})]},proxy:!0}]),model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}})],1)]),a("el-main",{staticStyle:{padding:"0px"}},[e.isReload?e._e():a("el-tree",{ref:"tree",attrs:{data:e.treeData,"highlight-current":!0,"expand-on-click-node":!1,"render-after-expand":!0,"default-expand-all":!0,"node-key":"designId","show-checkbox":"","filter-node-method":e.filterNode,"default-checked-keys":e.defaultCheckedKeys},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(" "+e._s(n.label||n.caption)+" ")])])}}],null,!1,2622264368)})],1)],1)},l=[],i={name:"DesSubTableRedundanceFields",mixins:[$mixins.propertyDialogSetting],data:function(){return{isReload:!1,treeData:[],defaultCheckedKeys:[],searchStr:""}},computed:{},beforeCreate:function(){},created:function(){var e=this.owner.$designer,t=[];dsf.designer.recursionLayoutTree(e.$refs.viewProxy,null,null,(function(e){if(!e.isOneToMany&&e.isFormControl&&t.push(e.$props),e.isOneToMany)return!1})),this.treeData=t,this.defaultCheckedKeys=this.currentData},beforeMount:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{treeFilter:function(){this.$refs.tree.filter(this.searchStr)},filterNode:function(e,t){if(e){var a=t.label||t.caption;return a.indexOf(e)>=0}return!0},nodeClick:function(){},yes:function(){var e=this.$refs.tree.getCheckedNodes();return _.map(e,"designId")}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-super-search-enum-items",staticStyle:{height:"100%"}},[a("el-main",{staticStyle:{padding:"0px",height:"100%",overflow:"hidden"}},[a("el-form",{ref:"form",attrs:{inline:!0,model:e.formData,"label-width":"100px"}}),a("el-tabs",{staticClass:"tabs",staticStyle:{height:"100%"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["treeselect"!=e.item.model&&"dataChoice"!=e.item.model?["treeselect"!=e.item.model?a("el-tab-pane",{attrs:{label:"静态数据",name:"static"}},[a("div",{staticStyle:{height:"100%",overflow:"auto"}},[a("div",{staticStyle:{"margin-bottom":"5px",float:"right"}},[a("dsf-button",{attrs:{size:"small",icon:"hao"},on:{click:e.addRow}},[e._v("增加")]),a("dsf-button",{attrs:{size:"small",icon:"guanbi2",type:"plain"}},[e._v("清空")])],1),a("el-table",{attrs:{data:e.values.static,border:""}},[a("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"选项文本"},model:{value:t.row.text,callback:function(a){e.$set(t.row,"text",a)},expression:"scope.row.text"}})]}}],null,!1,3042062022)}),a("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"多个值用;分割"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}],null,!1,4185447808)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(a){return a.stopPropagation(),e.remove(t.row)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(a){return a.stopPropagation(),e.up(t.row)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(a){return a.stopPropagation(),e.down(t.row)}}})]}}],null,!1,3903304481)})],1)],1)]):e._e(),"treeselect"!=e.item.model?a("el-tab-pane",{attrs:{label:"数据字典",name:"dict"}},[a("div",{staticStyle:{height:"100%"}},[a("DesDictDataSelect",{staticStyle:{height:"100%",overflow:"hidden"},model:{value:e.values.dict,callback:function(t){e.$set(e.values,"dict",t)},expression:"values.dict"}})],1)]):e._e(),"treeselect"!=e.item.model?a("el-tab-pane",{attrs:{label:"数据源",name:"dbsource"}},[a("div",{staticStyle:{height:"100%",overflow:"hidden"}},[a("DesDbDataSelect",{staticStyle:{height:"100%",overflow:"hidden"},model:{value:e.values.dbsource,callback:function(t){e.$set(e.values,"dbsource",t)},expression:"values.dbsource"}})],1)]):e._e()]:e._e(),"dataChoice"!=e.item.model?a("el-tab-pane",{attrs:{label:"接口",name:"interface"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入接口地址"},model:{value:e.values.interface,callback:function(t){e.$set(e.values,"interface",t)},expression:"values.interface"}})],1):a("el-tab-pane",{attrs:{label:"弹窗设置",name:"dialog"}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"弹窗标题"}},[a("el-input",{attrs:{placeholder:"默认：请选择"},model:{value:e.values.dialog.title,callback:function(t){e.$set(e.values.dialog,"title",t)},expression:"values.dialog.title"}})],1),a("el-form-item",{attrs:{label:"弹窗宽度"}},[a("el-input",{attrs:{placeholder:"默认：800px"},model:{value:e.values.dialog.width,callback:function(t){e.$set(e.values.dialog,"width",t)},expression:"values.dialog.width"}})],1),a("el-form-item",{attrs:{label:"弹窗高度"}},[a("el-input",{attrs:{placeholder:"默认：500px"},model:{value:e.values.dialog.height,callback:function(t){e.$set(e.values.dialog,"height",t)},expression:"values.dialog.height"}})],1),a("el-form-item",{attrs:{label:"弹窗地址"}},[a("dsf-input-url",{attrs:{type:e.isMobile?"mobile":"pc"},model:{value:e.values.dialog.url,callback:function(t){e.$set(e.values.dialog,"url",t)},expression:"values.dialog.url"}})],1)],1)],1)],2)],1)],1)},l=[],i={name:"DesSuperSearchEnumItems",mixins:[$mixins.propertyDialogSetting],props:{item:{type:Object,default:function(){return{}}},currentData:{type:Object,default:function(){return null}},searchItems:{type:Array,default:function(){return[]}},isMobile:Boolean},data:function(){return{formData:{rel:"",operator:"eq"},activeName:"static",values:{static:[],dict:{key:null,node:null},dbsource:{key:null,node:null},interface:"",dialog:{title:"",width:"",height:"",url:""}}}},computed:{sitems:function(){var e=this;return _.filter(this.searchItems,(function(t){return t.id!==e.item.id}))}},created:function(){var e=dsf.mix(!0,{},this.currentData);"dataChoice"==this.item.model?(this.activeName="dialog",e.value&&(this.values.dialog=e.value)):"treeselect"==this.item.model?(this.activeName="interface",this.values.interface=e.value||""):dsf.isEmptyObject(e)||(this.formData.rel=e.rel,this.formData.operator=e.operator,this.values[e.type]=e.value,this.activeName=e.type||"static")},methods:{yes:function(){return"dataChoice"==this.item.model?{type:"dialog",value:this.values.dialog}:"treeselect"==this.item.model?{type:"interface",value:this.values.interface}:{operator:this.formData.operator,rel:this.formData.rel,type:this.activeName,value:this.values[this.activeName]}},addRow:function(){this.values.static.push({})},remove:function(e){dsf.array.remove(this.values.static,e)},up:function(e){var t=_.findIndex(this.values.static,(function(t){return t==e}));if(t>0){var a=this.values.static[t-1];this.$set(this.values.static,t-1,e),this.$set(this.values.static,t,a)}},down:function(e){var t=_.findIndex(this.values.static,(function(t){return t==e}));if(t<this.values.static.length-1){var a=this.values.static[t+1];this.$set(this.values.static,t+1,e),this.$set(this.values.static,t,a)}}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-designer-setting-supersearch"},[a("el-aside",{staticClass:"ds-designer-setting-supersearch-side",attrs:{width:"20%"}},[a("el-input",{staticClass:"search-name",attrs:{placeholder:"请输入名称",size:"mini"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearch},slot:"append"})],1),a("div",{staticClass:"search-tree"},[a("DsfVirtualScroll",[a("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.treeFilter},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node",on:{dblclick:function(t){return e.toList(n,l)}}},[a("i",{staticClass:"iconfont icon-biaodanzujian-shurukuang"}),a("span",[e._v(e._s(n.label))]),l.field?a("span",{staticStyle:{color:"red"}},[e._v("(字段:"+e._s(l.field)+")")]):e._e()])}}])})],1)],1)],1),a("el-main",{staticClass:"ds-designer-setting-supersearch-main"},[a("el-table",{attrs:{data:e.tableData,"row-key":e.getRowId,"tree-props":{children:"children"},"highlight-current-row":"",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"配置","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-form",{staticClass:"demo-form-inline",attrs:{model:n,inline:!0,size:"mini","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:n.fieldCaption,callback:function(t){e.$set(n,"fieldCaption",t)},expression:"row.fieldCaption"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"字段名"}},[a("el-input",{attrs:{disabled:""},model:{value:n.field,callback:function(t){e.$set(n,"field",t)},expression:"row.field"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{on:{change:function(t){return e.searchTypeChange(t,n)}},model:{value:n.searchType,callback:function(t){e.$set(n,"searchType",t)},expression:"row.searchType"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示方式"}},["enum"==n.searchType?a("el-select",{on:{change:function(t){return e.updateModel(n)}},model:{value:n.model,callback:function(t){e.$set(n,"model",t)},expression:"row.model"}},[a("el-option",{attrs:{value:"select",label:"下拉框"}}),a("el-option",{attrs:{value:"treeselect",label:"树下拉框"}}),a("el-option",{attrs:{value:"tile",label:"平铺"}}),a("el-option",{attrs:{value:"treeTile",label:"树平铺(需子级级联)"}}),a("el-option",{attrs:{value:"dataChoice",label:"数据选择"}})],1):e._e(),"text"==n.searchType?a("el-select",{model:{value:n.model,callback:function(t){e.$set(n,"model",t)},expression:"row.model"}},[a("el-option",{attrs:{value:"textbox",label:"文本框"}})],1):e._e(),"number"==n.searchType?a("el-select",{model:{value:n.model,callback:function(t){e.$set(n,"model",t)},expression:"row.model"}},[a("el-option",{attrs:{value:"textbox",label:"文本框"}})],1):e._e(),"datetime"==n.searchType?a("el-select",{model:{value:n.model,callback:function(t){e.$set(n,"model",t)},expression:"row.model"}},[a("el-option",{attrs:{value:"ymds",label:"年月日时分秒"}}),a("el-option",{attrs:{value:"ymd",label:"年月日"}}),a("el-option",{attrs:{value:"ym",label:"年月"}}),a("el-option",{attrs:{value:"y",label:"年"}})],1):e._e(),"period"==n.searchType?a("el-select",{model:{value:n.model,callback:function(t){e.$set(n,"model",t)},expression:"row.model"}},[a("el-option",{attrs:{value:"hy",label:"半年"}}),a("el-option",{attrs:{value:"ss",label:"季度"}}),a("el-option",{attrs:{value:"md",label:"旬"}})],1):e._e()],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"布局"}},[a("el-select",{attrs:{disabled:"tile"==n.model||"treeTile"==n.model},on:{change:function(t){return e.updateLayout(n)}},model:{value:n.layout,callback:function(t){e.$set(n,"layout",t)},expression:"row.layout"}},["tile"==n.model||"treeTile"==n.model?a("el-option",{attrs:{value:"24",label:"整行"}}):e._e(),a("el-option",{attrs:{value:"12",label:"1/2"}}),a("el-option",{attrs:{value:"8",label:"1/3"}}),a("el-option",{attrs:{value:"6",label:"1/4"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作符"}},[a("el-select",{model:{value:n.operator,callback:function(t){e.$set(n,"operator",t)},expression:"row.operator"}},["isTile"==e.getItemType(n)?[a("el-option",{attrs:{label:"包含(支持多选)",value:"in"}}),a("el-option",{attrs:{label:"区间(仅单选)",value:"between"}}),a("el-option",{attrs:{label:"匹配(支持多选)",value:"like"}}),a("el-option",{attrs:{label:"匹配开始(支持多选)",value:"slike"}}),a("el-option",{attrs:{label:"匹配结尾(支持多选)",value:"elike"}})]:e._e(),"isSelect"==e.getItemType(n)?[a("el-option",{attrs:{label:"包含(支持多选)",value:"in"}}),a("el-option",{attrs:{label:"等于(仅单选)",value:"eq"}}),a("el-option",{attrs:{label:"匹配(支持多选)",value:"like"}}),a("el-option",{attrs:{label:"匹配开始(支持多选)",value:"slike"}}),a("el-option",{attrs:{label:"匹配结尾(支持多选)",value:"elike"}})]:"isText"==e.getItemType(n)?[a("el-option",{attrs:{label:"匹配",value:"like"}}),a("el-option",{attrs:{label:"匹配开始",value:"slike"}}),a("el-option",{attrs:{label:"匹配结尾",value:"elike"}}),a("el-option",{attrs:{label:"区间",value:"between"}})]:"isNumber"==e.getItemType(n)||"isDateTime"==e.getItemType(n)||"period"==e.getItemType(n)?[a("el-option",{attrs:{label:"等于",value:"eq"}}),a("el-option",{attrs:{label:"大于",value:"gt"}}),a("el-option",{attrs:{label:"小于",value:"lt"}}),a("el-option",{attrs:{label:"大于等于",value:"gteq"}}),a("el-option",{attrs:{label:"小于等于",value:"lteq"}}),a("el-option",{attrs:{label:"区间",value:"between"}})]:e._e()],2)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"提示文字"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:n.placeholder,callback:function(t){e.$set(n,"placeholder",t)},expression:"row.placeholder"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"默认值(选中)"}},[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:n.defaultValue,callback:function(t){e.$set(n,"defaultValue",t)},expression:"row.defaultValue"}})],1)],1),"enum"==n.searchType&&"treeTile"==n.model?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"级联子级字段"}},[a("el-input",{attrs:{placeholder:"子级需枚举树平铺类型"},model:{value:n.childField,callback:function(t){e.$set(n,"childField",t)},expression:"row.childField"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否自动隐藏"}},[a("el-select",{model:{value:n.autoHide,callback:function(t){e.$set(n,"autoHide",t)},expression:"row.autoHide"}},[a("el-option",{attrs:{value:!1,label:"否"}}),a("el-option",{attrs:{value:!0,label:"是"}})],1)],1)],1)]:e._e(),a("el-col",{attrs:{span:12}},["isTile"==e.getItemType(n)||"isSelect"==e.getItemType(n)&&!e.isMultipeSelect(n)?a("el-form-item",{attrs:{label:"是否显示全部"}},[a("el-radio-group",{model:{value:n.showTileAll,callback:function(t){e.$set(n,"showTileAll",t)},expression:"row.showTileAll"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1):e._e()],1),"isTile"==e.getItemType(n)?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否默认折叠"}},[a("el-radio-group",{model:{value:n.isTileCollapse,callback:function(t){e.$set(n,"isTileCollapse",t)},expression:"row.isTileCollapse"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1):e._e(),"isTile"==e.getItemType(n)?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否只能多选"}},[a("el-radio-group",{model:{value:n.isTileForceMulti,callback:function(t){e.$set(n,"isTileForceMulti",t)},expression:"row.isTileForceMulti"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1):e._e(),"tile"!=n.model&&"treeTile"!=n.model?a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示清空按钮"}},[a("el-radio-group",{model:{value:n.isClearable,callback:function(t){e.$set(n,"isClearable",t)},expression:"row.isClearable"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1):e._e()],2)],1)]}}])}),a("el-table-column",{attrs:{label:"操作",width:"130px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[["enum"==n.searchType?a("dsf-button",{attrs:{title:"选项配置",size:"small","btn-style":"icon-text",icon:"shezhi"},on:{click:function(t){return t.stopPropagation(),e.settingEnumItems(n)}}}):e._e(),a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(t){return t.stopPropagation(),e.remove(n)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(t){return t.stopPropagation(),e.up(n)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(t){return t.stopPropagation(),e.down(n)}}})]]}}])})],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(1),o=a.n(r),c={name:"DesSuperSearchSetting",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],treeData:[],defaultProps:{children:"children",label:"name"},searchName:"",options:[{label:"选项枚举",value:"enum",defaultField:["value"]},{label:"文本",value:"text"},{label:"数字",value:"number"},{label:"日期时间",value:"datetime"},{label:"季月年",value:"period"}]}},created:function(){},watch:{searchName:function(e){this.$refs.tree.filter(e)}},mounted:function(){var e=this;return s()(o.a.mark((function t(){var a,n,l;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.owner.$$getComponent(),n=a.$getChildMetadataList(),n&&!(n.length<1)){t.next=5;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 5:if(l=n[0].metadata.at,l){t.next=9;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 9:return t.next=11,a.$getMetadataTree(n);case 11:e.treeData=t.sent,e.tableData=e.currentData||[],_.each(e.currentData,(function(t){"tile"==t.model||"treeTile"==t.model?(dsf.isUnDef(t.showTileAll)&&e.$set(t,"showTileAll",!0),dsf.isUnDef(t.isTileCollapse)&&e.$set(t,"isTileCollapse",!0),dsf.isUnDef(t.isTileForceMulti)&&e.$set(t,"isTileForceMulti",!1)):"select"==t.model&&"eq"==t.operator?(dsf.isUnDef(t.showTileAll)&&e.$set(t,"showTileAll",!0),dsf.isUnDef(t.isClearable)&&e.$set(t,"isClearable",!0)):dsf.isUnDef(t.isClearable)&&e.$set(t,"isClearable",!0)}));case 14:case"end":return t.stop()}}),t)})))()},methods:{handleSearch:function(){this.$refs.tree.filter(this.searchName)},treeFilter:function(e,t){if(!e)return!0;var a=t.fieldCaption||t.name;return-1!==a.indexOf(e)},isMultipeSelect:function(e){return"isSelect"==this.getItemType(e)&&"eq"!=e.operator},getItemType:function(e){var t=e.model,a=e.searchType;return u[a][t]},getRowId:function(e){var t=e.id;return t},getParentRow:function(e){var t=_.find(this.tableData,(function(t){return t.id==e.parent}));return t||{}},searchTypeChange:function(e,t){this.updateValueAttributeJoin(t,e)},updateValueAttributeJoin:function(e,t){"enum"==e.searchType?(e.model="select",e.operator="in"):"text"==e.searchType?(e.model="textbox",e.operator="like"):"datetime"==e.searchType?(e.model="ymd",e.operator="between"):"number"==e.searchType?(e.model="textbox",e.operator="eq"):"period"==e.searchType&&(e.model="md",e.operator="eq")},updateLayout:function(e){"24"==e.layout||"enum"!=e.searchType||"tile"!=e.model&&"treeTile"!=e.model||(e.model="select")},updateModel:function(e){"tile"!=e.model&&"treeTile"!=e.model||"enum"!=e.searchType?e.layout="8":e.layout="24"},toList:function(e,t){if(t.field){var a=_.findIndex(this.tableData,(function(e){return e.field==t.field}));if(a<0){var n={id:t.id,field:t.field,fieldCaption:t.fieldCaption,type:"metadata",searchType:"enum",code:t.code,layout:"8",model:"select",defaultValue:"",operator:"in",isLineBreak:!1,placeholder:"",childField:"",autoHide:!1,showTileAll:!0,isTileCollapse:!0,isTileForceMulti:!1,isClearable:!0};this.updateValueAttributeJoin(n,n.searchType),this.tableData.push(n)}}},settingEnumItems:function(e){this.$openDialog({title:"选项设置",content:"DesSuperSearchEnumItems",height:"60vh",width:"700px",params:{item:e,searchItems:this.tableData,currentData:e.setting,isMobile:this.isMobile},btns:[{text:"确定",handler:function(t){var a=t.yes();e.setting=a||null}},{text:"取消"}]})},remove:function(e){dsf.array.remove(this.tableData,e)},up:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)}},down:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t<this.tableData.length-1){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}},yes:function(){var e=_.map(this.tableData,(function(e){var t,a=dsf.mix(!0,{},e);return"enum"!=a.searchType&&delete a.items,"treeselect"==a.model&&"interface"!==(null===a||void 0===a||null===(t=a.setting)||void 0===t?void 0:t.type)&&(a.setting=null),a}));return e}}},u={enum:{tile:"isTile",treeTile:"isTile",select:"isSelect",treeselect:"isSelect",dataChoice:"isSelect"},text:{textbox:"isText"},number:{textbox:"isNumber"},datetime:{ymds:"isDateTime",ymd:"isDateTime",ym:"isDateTime",y:"isDateTime"},period:{hy:"period",ss:"period",md:"period"}},d=c,f=a(0),p=Object(f["a"])(d,n,l,!1,null,null,null);t["default"]=p.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增页签")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{fixed:"",label:"显示名称",width:"140px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),a("el-table-column",{attrs:{label:"标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"更多跳转",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.toUrlSet(t.row,"more")}}},[e._v("配置")])]}}])}),a("el-table-column",{attrs:{label:"新增跳转",width:"120px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.toUrlSet(t.row,"add")}}},[e._v("配置")])]}}])}),a("el-table-column",{attrs:{label:"隐藏",width:"100px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.hide,callback:function(a){e.$set(t.row,"hide",a)},expression:"scope.row.hide"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),a("el-table-column",{attrs:{label:"懒加载",width:"100px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.lazy,callback:function(a){e.$set(t.row,"lazy",a)},expression:"scope.row.lazy"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),a("el-table-column",{attrs:{label:"显示提示",width:"100px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.showTip,callback:function(a){e.$set(t.row,"showTip",a)},expression:"scope.row.showTip"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)]}}])}),a("el-table-column",{attrs:{label:"提示内容","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.tipContent,callback:function(a){e.$set(t.row,"tipContent",a)},expression:"scope.row.tipContent"}})]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"TabPanelEdit",mixins:[$mixins.tabPanelTabSetting]},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ds-table-cell-set"},[a("div",{staticClass:"ds-table-cell-set-box"},[a("div",{staticClass:"ds-table-cell-set-box-label"},[e._v("对齐")]),a("div",{staticClass:"ds-table-cell-set-item"},[a("span",{staticStyle:{width:"80px"}},[e._v("水平对齐：")]),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.cellAttr["align"],callback:function(t){e.$set(e.cellAttr,"align",t)},expression:"cellAttr['align']"}},e._l(e.config["align"],(function(t,n){return a("el-option",{key:n,attrs:{label:t[0],value:t[1]}},[a("span",{style:{"font-family":t[1]}},[e._v(e._s(t[0]))])])})),1)],1),a("div",{staticClass:"ds-table-cell-set-item"},[a("span",{staticStyle:{width:"80px"}},[e._v("垂直对齐：")]),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.cellAttr["valign"],callback:function(t){e.$set(e.cellAttr,"valign",t)},expression:"cellAttr['valign']"}},e._l(e.config["valign"],(function(t,n){return a("el-option",{key:n,attrs:{label:t[0],value:t[1]}},[a("span",{style:{"font-family":t[1]}},[e._v(e._s(t[0]))])])})),1)],1)]),a("div",{staticClass:"ds-table-cell-set-box"},[a("div",{staticClass:"ds-table-cell-set-box-label"},[e._v("填充")]),a("div",{staticClass:"ds-table-cell-set-item"},[a("span",{staticStyle:{width:"60px"}},[e._v("背景色：")]),a("el-color-picker",{attrs:{size:"mini","show-alpha":""},model:{value:e.style["background-color"],callback:function(t){e.$set(e.style,"background-color",t)},expression:"style['background-color']"}})],1)]),a("div",{staticClass:"ds-table-cell-set-box"},[a("div",{staticClass:"ds-table-cell-set-box-label"},[e._v("字体")]),a("div",{staticClass:"ds-table-cell-set-item"},[a("span",{staticStyle:{width:"60px"}},[e._v("字体：")]),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.style["font-family"],callback:function(t){e.$set(e.style,"font-family",t)},expression:"style['font-family']"}},e._l(e.config["font-family"],(function(t,n){return a("el-option",{key:n,attrs:{label:t[0],value:t[1]}},[a("span",{style:{"font-family":t[1]}},[e._v(e._s(t[0]))])])})),1)],1),a("div",{staticClass:"ds-table-cell-set-item"},[a("span",{staticStyle:{width:"60px"}},[e._v("字号：")]),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.style["font-size"],callback:function(t){e.$set(e.style,"font-size",t)},expression:"style['font-size']"}},e._l(e.config["font-size"],(function(t,n){return a("el-option",{key:n,attrs:{label:t[0],value:t[1]}},[a("span",{style:{"font-size":t[1]}},[e._v(e._s(t[0]))])])})),1)],1),a("div",{staticClass:"ds-table-cell-set-item"},[a("span",{staticStyle:{width:"60px"}},[e._v("装饰：")]),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.style["text-decoration"],callback:function(t){e.$set(e.style,"text-decoration",t)},expression:"style['text-decoration']"}},e._l(e.config["text-decoration"],(function(e,t){return a("el-option",{key:t,attrs:{label:e[0],value:e[1]}})})),1)],1),a("div",{staticClass:"ds-table-cell-set-item"},[a("span",{staticStyle:{width:"60px"}},[e._v("颜色：")]),a("DsfInputColor",{attrs:{placeholder:"空则为原色图标",size:"mini"},model:{value:e.style["color"],callback:function(t){e.$set(e.style,"color",t)},expression:"style['color']"}})],1),a("div",{staticClass:"ds-table-cell-set-item",staticStyle:{width:"100%"}},[a("span",{staticStyle:{width:"60px"}},[e._v("样式：")]),a("el-checkbox",{attrs:{value:"italic"===e.style["font-style"]},on:{change:function(t){return e.$set(e.style,"font-style",t?"italic":"normal")}}},[e._v("斜体")]),a("el-checkbox",{attrs:{value:"bold"===e.style["font-weight"]},on:{change:function(t){return e.$set(e.style,"font-weight",t?"bold":"normal")}}},[e._v("粗体")])],1)])])},l=[],i={name:"DesTableCellSet",data:function(){return{borderCheckBox:{top:{"border-top":"1px solid #666"},left:{"border-left":"1px solid #666"},right:{"border-right":"1px solid #666"},bottom:{"border-bottom":"1px solid #666"}},config:{"font-family":[["跟随上下文",""],["仿宋","仿宋,FangSong"],["黑体","黑体, SimHei"],["楷体","楷体,楷体_GB2312, SimKai"],["隶书","隶书,SimLi"],["宋体","宋体,SimSun"],["微软雅黑","微软雅黑,Microsoft YaHei"],["幼圆","幼圆,YouYuan"],["andale mono","andale mono"],["arial","arial, helvetica,sans-serif"],["arial black","arial black,avant garde"],["comic sans ms","comic sans ms"],["impact","impact,chicago"],["times new roman","times new roman"]],"font-size":[["跟随上下文",""],["10px","10px"],["11px","11px"],["12px","12px"],["14px","14px"],["16px","16px"],["18px","18px"],["20px","20px"],["22px","22px"],["24px","24px"],["36px","36px"]],direction:[["跟随上下文",""],["从左到右","ltr"],["从右到左","rtl"]],"text-decoration":[["跟随上下文",""],["无装饰","none"],["下划线","underline"],["上划线","overline"],["贯穿线","line-through"]],"border-style":["none","solid","dotted","dashed"],"border-width":["1px","2px","3px","4px","5px","6px"],align:[["跟随上下文",""],["靠左","left"],["居中","center"],["靠右","right"]],valign:[["跟随上下文",""],["靠上","top"],["居中","middle"],["靠下","bottom"],["基线对齐","baseline"]]},style:{"font-family":"","font-size":"","font-style":"normal","font-weight":"normal",direction:"","text-decoration":"","text-indent":void 0,"background-color":"",color:""},cellAttr:{align:"",valign:""},borderWidth:"1px",borderStyle:"solid",borderColor:"#000",borderPosition:[!1,!1,!1,!1,!1,!1]}},computed:{borderDemo:function(){var e={t:{},l:{},r:{},b:{},cb:{},cr:{}};if(""===this.borderStyle)return e;var t="1px solid transparent";return"none"!==this.borderStyle&&(t="".concat(this.borderWidth," ").concat(this.borderStyle," ").concat(this.borderColor)),this.borderPosition[0]&&(e.t["border-top"]=t),this.borderPosition[1]&&(e.cb["border-bottom"]=t),this.borderPosition[2]&&(e.b["border-bottom"]=t),this.borderPosition[3]&&(e.l["border-left"]=t),this.borderPosition[4]&&(e.cr["border-right"]=t),this.borderPosition[5]&&(e.r["border-right"]=t),e}},methods:{yes:function(){var e={align:this.cellAttr.align,valign:this.cellAttr.valign},t={};return""!==this.style["font-family"]&&(t["font-family"]=this.style["font-family"]),""!==this.style["font-size"]&&(t["font-size"]=this.style["font-size"]),"normal"!==this.style["font-style"]&&(t["font-style"]=this.style["font-style"]),"normal"!==this.style["font-weight"]&&(t["font-weight"]=this.style["font-weight"]),""!==this.style["direction"]&&(t["direction"]=this.style["direction"]),""!==this.style["text-decoration"]&&(t["text-decoration"]=this.style["text-decoration"]),void 0!==this.style["text-indent"]&&(t["text-indent"]=this.style["text-indent"]),""!==this.style["background-color"]&&(t["background-color"]=this.style["background-color"]),""!==this.style["color"]&&(t["color"]=this.style["color"]),{cellStyle:t,cellAttr:e,borderPosition:this.borderDemo}}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),a("el-table-column",{attrs:{prop:"value",label:"宽度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"auto"},model:{value:t.row.width,callback:function(a){e.$set(t.row,"width",a)},expression:"scope.row.width"}})]}}])})],1)},l=[],i={name:"DesTableColumnsInfo",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},mounted:function(){for(var e=0;e<this.currentData.length;e++)this.tableData.push({text:"第"+(e+1)+"列",width:this.currentData[e].width})},methods:{yes:function(){var e=_.map(this.tableData,(function(e){return dsf.isNumber(e.width)&&(e.width=e.width+"px"),e.width.trim()||(e.width="auto"),{width:e.width}}));return e}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{prop:"text",label:"名称",width:"150"}}),a("el-table-column",{attrs:{prop:"value",label:"高度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"auto"},model:{value:t.row.height,callback:function(a){e.$set(t.row,"height",a)},expression:"scope.row.height"}})]}}])})],1)},l=[],i={name:"DesTableRowsInfo",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},mounted:function(){for(var e=0;e<this.currentData.length;e++)this.tableData.push({text:"第"+(e+1)+"行",height:this.currentData[e].height})},methods:{yes:function(){for(var e=0;e<this.tableData.length;e++){var t=this.tableData[e].height;""==t.trim()&&(t=57),dsf.isNumber(t)&&(t+="px"),this.owner.rows[e].height=t}}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[a("el-aside",{staticStyle:{width:"500px",overflow:"auto"}},[a("el-container",[a("el-header",{staticStyle:{padding:"0px 0px 10px 0px","text-align":"right",height:"auto"}},[a("DsfButton",{attrs:{size:"small",icon:"hao"},on:{click:e.addTab}},[e._v(" 新增标签 ")])],1),a("el-main",{staticStyle:{padding:"0px",height:"100%"}},[a("el-table",{attrs:{border:"","show-header":!0,data:e.tableData,"highlight-current-row":!0},on:{"row-click":e.rowClickHandler}},[a("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"KEY",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),a("el-table-column",{attrs:{label:"名称",prop:"caption"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),a("el-table-column",{attrs:{label:"不显示",prop:"text"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.hide?"是":"否")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shanchu",size:"small",title:"删除"},on:{click:function(a){return e.removeTab(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"shang",size:"small",title:"上移"},on:{click:function(a){return e.up(t.row)}}}),a("DsfButton",{attrs:{"btn-style":"icon-text",icon:"xia",size:"small",title:"下移"},on:{click:function(a){return e.down(t.row)}}})]}}])})],1)],1)],1)],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-container",[a("el-main",[a("el-form",{attrs:{model:e.formModel,disabled:!Object.keys(e.formModel).length,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"KEY"}},[a("el-input",{model:{value:e.formModel.key,callback:function(t){e.$set(e.formModel,"key",t)},expression:"formModel.key"}})],1),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formModel.name,callback:function(t){e.$set(e.formModel,"name",t)},expression:"formModel.name"}})],1),a("el-form-item",{attrs:{label:"数据接口"}},[a("el-input",{model:{value:e.formModel.dataUrl,callback:function(t){e.$set(e.formModel,"dataUrl",t)},expression:"formModel.dataUrl"}})],1),a("el-form-item",{attrs:{label:"跳转SRC"}},[a("el-input",{model:{value:e.formModel.iframeSrc,callback:function(t){e.$set(e.formModel,"iframeSrc",t)},expression:"formModel.iframeSrc"}})],1),a("el-form-item",{attrs:{label:"不显示"}},[a("el-radio-group",{model:{value:e.formModel.hide,callback:function(t){e.$set(e.formModel,"hide",t)},expression:"formModel.hide"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"使用自定义插槽"}},[a("el-radio-group",{model:{value:e.formModel.customize,callback:function(t){e.$set(e.formModel,"customize",t)},expression:"formModel.customize"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1)],1)],1)],1)],1)},l=[],i={name:"TabsListSetting",mixins:[$mixins.propertyDialogSetting],props:{defaultShowText:{type:Boolean,default:!0},defaultButtonStyle:{type:String,default:""},isDblClickBind:{type:Boolean,default:!1}},data:function(){return{tableData:[{}],formModel:{}}},created:function(){var e=dsf.mix(!0,[],this.currentData);_.each(e,(function(e){dsf.isUnDef(e.id)&&(e.id=dsf.uuid())})),this.tableData=e},computed:{setRequestUrl:function(){return dsf.url.getWebPath("file/upload?db=1")}},mounted:function(){},methods:{rowClickHandler:function(e){this.formModel=e},addTab:function(){var e=this.tableData,t=e.length+1;this.tableData.push({key:"key".concat(t),name:"name".concat(t),hide:!1,dataUrl:"",noSearch:!1,customize:!1})},removeTab:function(e){dsf.array.remove(this.tableData,e)},up:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t-1];this.$set(this.tableData,t-1,e),this.$set(this.tableData,t,a)}},down:function(e){var t=_.findIndex(this.tableData,(function(t){return t==e}));if(t>0){var a=this.tableData[t+1];this.$set(this.tableData,t+1,e),this.$set(this.tableData,t,a)}},validate:function(){var e=this.tableData,t=e.some((function(t){var a=0;if(e.map((function(e){e.key==t.key&&a++})),a>1)return dsf.layer.message("请解决重复".concat(t.key,"标识"),!1),!0}));return!t},yes:function(){return this.tableData}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{staticStyle:{padding:"0px"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[e.noUrl||e.config&&e.config.noUrl?e._e():a("el-form-item",{attrs:{label:"弹出地址"}},[a("dsf-input-url",{attrs:{type:e.isMobile?"mobile":"pc",placeholder:"支持表达式@[url]"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}}),a("div",{staticStyle:{"line-height":"20px",color:"#999"}},[e._v(" 4.0兼容 #/iframeloader?src=xxx(需要转码)"),a("br"),e._v(" 主框架兼容 /index.html#/iframeloader?src=xxx(需要转码) ")])],1),a("el-form-item",{attrs:{label:"打开方式"}},[a("el-radio",{attrs:{label:4},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("当前页面打开")]),a("el-radio",{attrs:{label:3},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("对话框打开")]),a("el-radio",{attrs:{label:2},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[e._v("新建窗口打开")])],1),3==e.form.state||5==e.form.state?[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"宽度"}},[a("el-input",{model:{value:e.form.width,callback:function(t){e.$set(e.form,"width",t)},expression:"form.width"}})],1),a("el-form-item",{attrs:{label:"高度"}},[a("el-input",{model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}})],1)]:e._e()],2)],1)],1)},l=[],i=a(3),s=a.n(i);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"ToUrlEdit",mixins:[$mixins.propertyDialogSetting],props:{noUrl:{type:Boolean,default:!1}},data:function(){return{form:{url:"",state:2,title:"对话框标题",width:"1000px",height:"60vh"}}},created:function(){this.form=o(o({},this.form),this.currentData||{})},methods:{yes:function(){return this.form}}},u=c,d=a(0),f=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=f.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"ds-enum-editor",attrs:{type:"border-card"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[a("el-tab-pane",{attrs:{name:"1",label:"元数据"}},[a("enum-editor-item",{ref:"meta",attrs:{type:"meta","is-tree-meta-select":"","tree-data":e.treeData1,"default-checked-key":e.defaultCheckedKey1,"table-post":e.tablePost,"tree-loading":e.loading[0],"empty-text":"请选择元数据","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),e.config&&e.config.other&&"ds"==e.config.other.exclude?e._e():a("el-tab-pane",{attrs:{name:"2",label:"数据源"}},[a("enum-editor-item",{attrs:{type:"ds","is-tree-meta-select":"","tree-data":e.treeData2,"default-checked-key":e.defaultCheckedKey2,"table-post":e.tablePost,"hide-right":!0,"tree-loading":e.loading[1],"empty-text":"请选择数据源","name-key":"name","id-key":"treeinfo_globalid"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),e.showStatic?a("el-tab-pane",{attrs:{name:"3",label:"静态数据"}},[a("DesStaticTreeData",{ref:"staticBox",attrs:{value:e.staticV}})],1):e._e()],1)},l=[],i=a(75),s={name:"TreeDataSource",components:{EnumEditorItem:i["default"]},mixins:[$mixins.propertyDialogSetting],data:function(){return{tabIndex:0,loaded:[!1,!1],loading:[!1,!1],value1:{type:"meta",code:"",attach:[]},value2:{type:"ds",code:null,attach:[]},treeData1:[],treeData2:[],showStatic:!1,staticV:[],defaultCheckedKey1:"",defaultCheckedKey2:"",tablePost:function(){}}},watch:{tabIndex:function(e){e>2||(!this.loaded[e-1]&&this["postData"+e]&&this["postData"+e](),this.$set(this.loaded,parseInt(e)-1,!0))}},created:function(){var e,t;this.showStatic=!(null===(e=this.config)||void 0===e||!e.static)&&(null===(t=this.owner)||void 0===t?void 0:t.$isPrototype),this.currentData&&void 0!==this.currentData.type?this.init(this.currentData):this.$attrs&&this.$attrs.chooseMetaData&&this.$attrs.chooseMetaData.code?this.init(this.$attrs.chooseMetaData):this.tabIndex="1"},methods:{init:function(e){var t=e.type,a=e.attach,n=e.code,l=e.chooseKey,i=dsf.mix(!0,[],a);"meta"===t?(this.value1={type:t,attach:i,code:n,chooseKey:l},this.defaultCheckedKey1=l,this.tabIndex="1"):"ds"===t?(this.value2={type:t,attach:i,code:n,chooseKey:l},this.defaultCheckedKey2=l,this.tabIndex="2"):"static"===t&&(this.staticV=i,this.tabIndex="3")},validate:function(){if(3==this.tabIndex)return!0;this.$refs.meta.getResult();var e=this["value"+this.tabIndex]["code"];return"1"===this.tabIndex?e?!(null===e||void 0===e||!e.id||null===e||void 0===e||!e.at)||(dsf.layer.message("请从右侧列表中选中一行作为节点显示名称的字段",!1),!1):(dsf.layer.message("请选择一个元数据",!1),!1):"2"==this.tabIndex?!!e||(dsf.layer.message("请选择一个数据源",!1),!1):void 0},yes:function(){return"3"==this.tabIndex?{type:"static",attach:this.$refs.staticBox.yes()}:this["value"+this.tabIndex]},postData1:function(){var e=this;this.$set(this.loading,0,!0),this.$http.get("rm/list/meta",{namespace:""}).then((function(t){var a=t.data;a.success?(e.treeData1=a.data.map((function(t){return e.dataFormat(t,"1")})),e.$nextTick((function(){e.$refs.meta.initMetaTable()}))):dsf.layer.message("请求异常！",!1)})).finally((function(){e.$set(e.loading,0,!1)}))},postData2:function(){var e=this;this.$set(this.loading,1,!0),this.$http.get("/rm/list/ds",{namespace:""}).then((function(t){var a=t.data;a.success?e.treeData2=a.data.map((function(t){return e.dataFormat(t,"2")})):dsf.layer.message("请求异常！",!1)})).finally((function(){e.$set(e.loading,1,!1)}))},dataFormat:function(e,t){var a=this;return"3"!=e.type_value&&"8"!=e.type_value&&(e.nocheck=!0),"3"==e.type_value||"8"==e.type_value||e.children||(e.iconSkin="_special"),e.children&&(e.children=e.children.map((function(e){return a.dataFormat(e,t)}))),e}}},r=s,o=a(0),c=Object(o["a"])(r,n,l,!1,null,null,null);t["default"]=c.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"tree-selector-edit"},[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{attrs:{icon:"iconfont icon-zidingyi"},on:{click:e.add}},[e._v("添加")]),a("DsfButton",{attrs:{icon:"iconfont icon-Magnifier"},on:{click:e.openIcon}},[e._v("图标库")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData}},[a("el-table-column",{attrs:{label:"条件","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"支持表达式"},model:{value:t.row.code,callback:function(a){e.$set(t.row,"code",a)},expression:"scope.row.code"}})]}}])}),a("el-table-column",{attrs:{label:"节点展开时图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfInputIcon",{attrs:{placeholder:"空则为无图标",full:""},model:{value:t.row.iconExpand,callback:function(a){e.$set(t.row,"iconExpand",a)},expression:"scope.row.iconExpand"}})]}}])}),a("el-table-column",{attrs:{label:"节点折叠时图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfInputIcon",{attrs:{placeholder:"空则为无图标",full:""},model:{value:t.row.iconFold,callback:function(a){e.$set(t.row,"iconFold",a)},expression:"scope.row.iconFold"}})]}}])}),a("el-table-column",{attrs:{label:"图标颜色","header-align":"center",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfInputColor",{attrs:{placeholder:"空则为原色图标"},model:{value:t.row.color,callback:function(a){e.$set(t.row,"color",a)},expression:"scope.row.color"}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"TreeIconEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[],isOuaSelect:!1}},created:function(){this.tableData=this.currentData||[]},methods:{newTab:function(){return{code:"",iconExpand:"",iconFold:"",color:""}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},openIcon:function(){window.open(dsf.url.getWebPath("$/iconfont/".concat(dsf.config.runType,"/demo_index.html")),"icondemo")},yes:function(){return this.tableData}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-img-list"},e._l(e.imgList,(function(t){return n("div",{key:t.name,staticClass:"img-box",class:{active:t.icon===e.chooseIcon},on:{click:function(a){return e.addClass(t)}}},[n("el-image",{attrs:{alt:t.item,src:a(861)("./"+t.showIcon+".png")}}),n("p",{staticClass:"demonstration"},[e._v(" "+e._s(t.icon)+" ")])],1)})),0)},l=[],i={name:"DesTreeImgList",mixins:[$mixins.propertyDialogSetting],props:{treeList:{type:Object,default:function(){return{}}}},data:function(){return{imgList:[],chooseIcon:"",urlPath:"../../../assets/styles/themes/tree_img/"}},created:function(){this.getTreeImgList()},mounted:function(){},methods:{addClass:function(e){this.chooseIcon=e.icon,this.treeList.icon=e.icon?this.urlPath+e.icon+".png":""},getTreeImgList:function(){var e=this;this.$http.get("./static/other/treeImgList.json").done((function(t){e.imgList=t[e.treeList.imgType];var a=e.treeList.icon;e.chooseIcon=a?a.slice(e.urlPath.length,-4):""})).error((function(e){dsf.error(e)}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"padding-right":"10px","text-align":"right"}},[a("DsfButton",{on:{click:e.addCol}},[e._v("新增")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{staticClass:"ds-table",attrs:{border:!0,data:e.tableData,size:"small","highlight-current-row":!0}},[a("el-table-column",{attrs:{label:"节点类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.typeName,callback:function(a){e.$set(t.row,"typeName",a)},expression:"scope.row.typeName"}})]}}])}),a("el-table-column",{attrs:{label:"图标类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.changeProperty(t.row,t.$index)}},model:{value:t.row.imgType,callback:function(a){e.$set(t.row,"imgType",a)},expression:"scope.row.imgType"}},e._l(e.imgType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{label:"节点图标","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.openIconDialog(t.row)}}},[e._v(" "+e._s(t.row.icon?e.sliceIcon(t.row.icon):"选择图标")+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.deleted(t)}}},[e._v("删除")])]}}])})],1)],1)],1)},l=[],i={name:"DesTreeImgSet",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],imgType:[{name:"请选择类型",value:""},{name:"文件类型",value:"file"},{name:"用户类型",value:"user"},{name:"数据类型",value:"data"},{name:"组织类型",value:"unit"}],path:"../../../assets/styles/themes/tree_img/"}},mounted:function(){this.owner.iconMap&&(this.tableData=this.owner.iconMap)},methods:{sliceIcon:function(e){return e?e.slice(this.path.length):""},addCol:function(){var e={typeName:"",imgType:"",icon:""};this.tableData.push(e)},changeProperty:function(e,t){e.icon&&(this.tableData[t].icon="")},deleted:function(e){var t=this;dsf.layer.confirm("确定要删除【".concat(e.row.typeName,"】节点类型吗?")).then((function(){t.tableData.splice(e.$index,1)})).catch((function(e){return e}))},validate:function(){return-1!==_.findIndex(this.tableData,(function(e){return""===e.typeName}))?(dsf.layer.message("请输入节点类型",!1),!1):this.isRepeat(_.map(this.tableData,"typeName"))?(dsf.layer.message("一种节点类型只能配置一次",!1),!1):void 0},isRepeat:function(e){var t={};for(var a in e){if(t[e[a]])return!0;t[e[a]]=!0}return!1},yes:function(){return this.tableData},openIconDialog:function(e){if(!e.imgType)return dsf.layer.message("请先选择图标类型",!1),!1;dsf.layer.openDialog({title:"树图标选择",fullscreen:!1,content:"DesTreeImgList",params:{treeList:e},width:"500px",height:"350px",btns:[{text:"确定",handler:function(e){}},{text:"取消"}]})}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"tree-selector-edit"},[a("el-header",{staticStyle:{padding:"10px 0px","text-align":"right"}},[a("DsfButton",{on:{click:e.add}},[e._v("新增")])],1),a("el-main",{staticStyle:{padding:"0px"}},[a("el-table",{ref:"table",staticClass:"ds-table",attrs:{border:!0,data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"显示名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),e._isMobile?e._e():a("el-table-column",{attrs:{label:"复选框模式","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"启用/不启用"},model:{value:t.row.showCheckBox,callback:function(a){e.$set(t.row,"showCheckBox",a)},expression:"scope.row.showCheckBox"}},[a("el-option",{attrs:{label:"启用-符合选择条件项",value:"1"}}),a("el-option",{attrs:{label:"启用-全部",value:"2"}}),a("el-option",{attrs:{label:"不启用",value:"0"}})],1)]}}],null,!1,1145989359)}),a("el-table-column",{attrs:{label:"选择条件","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"无"},model:{value:t.row.types,callback:function(a){e.$set(t.row,"types",a)},expression:"scope.row.types"}})]}}])},[a("template",{slot:"header"},[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[a("b",{staticClass:"ds-font4"},[e._v("结果为true时可选择 ")]),a("br"),a("br"),e._v("支持表达式@[isExist("),a("i",[e._v("节点中的key")]),e._v(","),a("i",[e._v("key对应的值")]),e._v(")]，严格区分值类型 "),a("br"),e._v("比如： "),a("br"),e._v("@[isExist(_type,1)] "),a("br"),e._v("@[isExist(_type,'1')] "),a("br"),e._v("@[isExist(_type,1,'1')] ")]),a("div",{staticClass:"name-wrapper ds-designer-property",attrs:{slot:"reference"},slot:"reference"},[a("div",[e._v("选择条件"),a("i",{staticClass:"iconfont icon-bangzhuzhongxin desc-striking",staticStyle:{"margin-left":"5px"}})])])])],1)],2),e._isMobile?e._e():a("el-table-column",{attrs:{label:"父子关联状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"关联/不关联"},model:{value:t.row.chooseOneNode,callback:function(a){e.$set(t.row,"chooseOneNode",a)},expression:"scope.row.chooseOneNode"}},[a("el-option",{attrs:{label:"关联",value:"1"}}),a("el-option",{attrs:{label:"关联(不带父级)",value:"2"}}),a("el-option",{attrs:{label:"不关联",value:"0"}})],1)]}}],null,!1,1551793661)},[a("template",{slot:"header"},[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"ds-font5"},[a("b",{staticClass:"ds-font4"},[e._v("选中一个节点后，父子节点的选中状态是否跟随当前操作节点状态变化而变化")]),a("br"),a("br"),a("b",[e._v("关联")]),e._v("：当前操作的节点勾选状态变化时，它的父级节点和子级所有节点勾选状态也会跟着变化； "),a("br"),a("b",[e._v("关联(不带父级)")]),e._v("：当前操作的节点勾选状态变化时，它的子级所有节点勾选状态也会跟着变化。父级节点勾选状态不受当前操作节点影响； "),a("br"),a("b",[e._v("不关联")]),e._v("：当前操作节点的勾选状态变化时，它的父级和子级不受其影响； ")]),a("div",{staticClass:"name-wrapper ds-designer-property",attrs:{slot:"reference"},slot:"reference"},[a("div",[e._v("父子关联状态"),a("i",{staticClass:"iconfont icon-bangzhuzhongxin desc-striking",staticStyle:{"margin-left":"5px"}})])])])],1)],2),a("el-table-column",{attrs:{label:"初始化展开层级","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"空则为展开所有",title:"不填则为展开所有节点、0为不展开"},model:{value:t.row.defaultOpenSeries,callback:function(a){e.$set(t.row,"defaultOpenSeries",a)},expression:"scope.row.defaultOpenSeries"}})]}}])}),e.isOuaSelect?a("el-table-column",{attrs:{label:"数据类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.metaDataType,callback:function(a){e.$set(t.row,"metaDataType",a)},expression:"scope.row.metaDataType"}},[a("el-option",{attrs:{label:"本部门",value:"2"}}),a("el-option",{attrs:{label:"本单位",value:"3"}}),a("el-option",{attrs:{label:"组织架构",value:"4"}})],1)]}}],null,!1,1136998362)}):a("el-table-column",{attrs:{label:"数据类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.metaDataType,callback:function(a){e.$set(t.row,"metaDataType",a)},expression:"scope.row.metaDataType"}},[a("el-option",{attrs:{label:"接口",value:"0"}}),a("el-option",{attrs:{label:"元数据组",value:"1"}})],1)]}}])}),a("el-table-column",{attrs:{label:"数据详情","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1*t.row.metaDataType>1?a("div",[a("el-select",{attrs:{placeholder:"显示类型",title:"选择显示类型：人员、部门，两者的请求接口不一样。"},model:{value:t.row.showType,callback:function(a){e.$set(t.row,"showType",a)},expression:"scope.row.showType"}},[a("el-option",{attrs:{label:"人员类型",value:"user"}}),a("el-option",{attrs:{label:"部门类型",value:"dept"}})],1),"4"==t.row.metaDataType?a("el-input",{attrs:{title:"组织架构显示层级（0代表子机构）"},model:{value:t.row.showLevel,callback:function(a){e.$set(t.row,"showLevel",a)},expression:"scope.row.showLevel"}},[a("template",{slot:"prepend"},[e._v("显示")]),a("template",{slot:"append"},[e._v("级")])],2):e._e()],1):"1"!=t.row.metaDataType?a("el-input",{attrs:{disabled:"0"!=t.row.metaDataType,placeholder:"支持表达式",title:"数据请求地址"},model:{value:t.row.sqlUrl,callback:function(a){e.$set(t.row,"sqlUrl",a)},expression:"scope.row.sqlUrl"}}):a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.setChooseMetaData(t)}}},[e._v(" 选择元数据组 ")])]}}])}),a("el-table-column",{attrs:{label:"数据标识","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.nodeKey,callback:function(a){e.$set(t.row,"nodeKey",a)},expression:"scope.row.nodeKey"}},[a("el-option",{attrs:{label:"_id",value:"_id"}}),a("el-option",{attrs:{label:"globalId",value:"globalId"}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:120},scopedSlots:e._u([{key:"default",fn:function(t){return[a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return e.insert(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return e.deleted(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return e.up(t)}}}),a("DsfButton",{staticStyle:{"min-width":"auto","margin-left":"5px"},attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return e.down(t)}}})]}}])})],1)],1)],1)},l=[],i={name:"TreeSelectorEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],names:[],isOuaSelect:!1,_isMobile:!1}},created:function(){var e=this;this.config.params&&(this.isOuaSelect="checkNode"==this.config.params.type,this._isMobile=!!this.config.params.isMobile);var t=[];_.forEach(this.currentData,(function(a){t.push(dsf.mix({nodeKey:e.owner.nodeKey},a))})),this.tableData=t},methods:{tableRowClassName:function(e){var t=e.row,a=e.rowIndex,n="";if(t.title){this.names[a]="";var l=this.names.indexOf(t.title);-1!=l&&l<a&&(n="warning-row"),this.names[a]=t.title}return n},newTab:function(){return{title:"Tab"+(this.tableData.length+1),showCheckBox:"0",types:"",chooseOneNode:"1",defaultOpenSeries:"0",metaDataType:this.isOuaSelect?"2":"0",showType:"user",showSubDept:"1",showLevel:"1",chooseMetaData:{},sqlUrl:"",async:"0",controls:[],name:dsf.uuid(),error:!1,nodeKey:this.owner.nodeKey}},add:function(){this.tableData.push(this.newTab())},insert:function(e){this.tableData.splice(e.$index+1,0,this.newTab())},deleted:function(e){dsf.array.remove(this.tableData,e.row)},up:function(e){if(e.$index>0){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a-1,0,t)}},down:function(e){if(this.tableData.length-1>e.$index){var t=this.tableData[e.$index],a=e.$index;dsf.array.remove(this.tableData,t),this.tableData.splice(a+1,0,t)}},validate:function(){for(var e in this.tableData){this.tableData[e]["title"]=this.tableData[e]["title"]||dsf.uuid();var t=this.names.indexOf(this.tableData[e]["title"]);if(-1!=t&&t<e)return dsf.layer.message("请解决重复名称",!1),!1}return!0},yes:function(){return this.tableData},setChooseMetaData:function(e){var t=this;dsf.layer.openDialog({title:"请选择",fullscreen:!1,width:"1000px",overflow:"hidden",content:"TreeDataSource",params:{chooseMetaData:t["tableData"][e.$index].chooseMetaData},btns:[{text:"确定",handler:function(a){var n=a.validate();if(!n)return!1;t["tableData"][e.$index].chooseMetaData=a.yes()}},{text:"取消"}]})}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-state-manage-edit container-full isTreeSelector",on:{click:e.emptyClick}},[a("el-aside",{staticClass:"container-aside",attrs:{width:"250px"}},[a("div",[a("div",{staticClass:"tool-box"},[a("DsfIcon",{attrs:{name:"hao",title:"新增"},on:{click:e.add}})],1),a("ul",{staticClass:"box"},e._l(e.tableData,(function(t,n){return a("li",{key:t.name,class:{actived:n==e.activedIndex},on:{dblclick:function(t){return t.stopPropagation(),e.editItem(n)},click:function(t){return t.stopPropagation(),e.selected(n)}}},[e.editorIndex==n?a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"item.title"}],staticClass:"item-editor",class:["input-"+t.name],attrs:{tabindex:"index"},domProps:{value:t.title},on:{input:function(a){a.target.composing||e.$set(t,"title",a.target.value)}}}):a("span",{staticClass:"ellipsis",attrs:{title:t.name}},[e._v(e._s(t.title))]),a("DsfButton",{attrs:{size:"small",title:"插入",icon:"hao","btn-style":"icon-text"},on:{click:function(a){return a.stopPropagation(),e.insert(t,n)}}}),a("DsfButton",{attrs:{size:"small",title:"删除",icon:"guanbi2","btn-style":"icon-text"},on:{click:function(a){return a.stopPropagation(),e.deleted(t,n)}}}),a("DsfButton",{attrs:{size:"small",title:"上移",icon:"shang","btn-style":"icon-text"},on:{click:function(a){return a.stopPropagation(),e.up(t,n)}}}),a("DsfButton",{attrs:{size:"small",title:"下移",icon:"xia","btn-style":"icon-text"},on:{click:function(a){return a.stopPropagation(),e.down(t,n)}}})],1)})),0)])]),a("el-main",[!e.form||e.dsf.isEmptyObject(e.form)?[a("div",{staticClass:"empty"},[e._v("请点击左上角 "),a("DsfIcon",{attrs:{name:"hao"}}),e._v(" 号设置数据")],1)]:[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.activedIndex>=0,expression:"activedIndex >= 0"}],ref:"form",attrs:{"label-width":"80px",model:e.form}},[a("el-divider",[e._v("请求设置：")]),e.isOuaSelect?a("el-form-item",{attrs:{label:"数据来源："}},[a("el-radio-group",{model:{value:e.form.metaDataType,callback:function(t){e.$set(e.form,"metaDataType",t)},expression:"form.metaDataType"}},[a("el-radio",{attrs:{label:"2"}},[e._v("本部门")]),a("el-radio",{attrs:{label:"3"}},[e._v("本单位")]),a("el-radio",{attrs:{label:"4"}},[e._v("组织架构")])],1)],1):a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"数据来源："}},[a("el-select",{ref:"mySelect1",attrs:{placeholder:"请选择"},model:{value:e.form.metaDataType,callback:function(t){e.$set(e.form,"metaDataType",t)},expression:"form.metaDataType"}},e._l([{text:"自定义接口",value:"0"},{text:"元数据组",value:"1"},{text:"本部门",value:"2"},{text:"本单位",value:"3"},{text:"组织架构",value:"4"},{text:"静态数据",value:"-1"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v(" ‘本部门’、‘本单位’ 是固定的异步请求。 ")]),a("div",[e._v("它们的分页接口也是固定的地址，您只需要设置是否开启分页")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1),"1"==e.form.metaDataType?a("el-form-item",{staticClass:"isData",attrs:{label:"元数据组："}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.setChooseMetaData(e.form)}}},[e._v(" "+e._s(e.dsf.isEmptyObject(e.form.chooseMetaData)?"选择":"切换")+" ")])],1):e._e(),-1==+e.form.metaDataType?a("el-form-item",{staticClass:"isData name-wrapper ds-designer-property",attrs:{label:"静态数据："}},[a("el-input",{attrs:{rows:"12",type:"textarea"},model:{value:e.form.staticData,callback:function(t){e.$set(e.form,"staticData",t)},expression:"form.staticData"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("pre",{staticClass:"ds-font4"},[e._v(e._s(JSON.stringify([{_name:"一级 1",_id:1,children:[{_name:"二级 1-1",_id:"1.1"}]}],null,2)))]),a("p",[e._v("支持表达式")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):"0"==e.form.metaDataType?a("el-form-item",{staticClass:"isData",attrs:{label:"接口地址："}},[a("el-input",{attrs:{disabled:"0"!=e.form.metaDataType},model:{value:e.form.sqlUrl,callback:function(t){e.$set(e.form,"sqlUrl",t)},expression:"form.sqlUrl"}})],1):e._e(),"0"==e.form.metaDataType?a("el-form-item",{attrs:{label:"请求是否带前缀："}},[a("el-radio-group",{model:{value:e.form.hasPrefix,callback:function(t){e.$set(e.form,"hasPrefix",t)},expression:"form.hasPrefix"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1):e._e(),"4"==e.form.metaDataType?a("el-form-item",{attrs:{label:"显示部门层级："}},[a("el-select",{ref:"mySelect2",attrs:{placeholder:"请选择"},model:{value:e.form.showLevel,callback:function(t){e.$set(e.form,"showLevel",t)},expression:"form.showLevel"}},e._l([{text:"子机构",value:"0"},{text:"一级部门",value:"1"},{text:"二级部门",value:"2"},{text:"三级部门",value:"3"},{text:"四级部门",value:"4"},{text:"五级部门",value:"5"}],(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)],1):e._e(),!e.isOuaSelect&&+e.form.metaDataType<2&&-1!=+e.form.metaDataType?a("el-form-item",{attrs:{label:"是否启用异步："}},[a("el-radio-group",{model:{value:e.form.async,callback:function(t){e.$set(e.form,"async",t)},expression:"form.async"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不启用")]),a("el-radio",{attrs:{label:"1"}},[e._v("启用")])],1)],1):e._e(),4==+e.form.metaDataType?a("el-form-item",{attrs:{label:"是否启用异步："}},[a("el-radio-group",{model:{value:e.form.orgAsync,callback:function(t){e.$set(e.form,"orgAsync",t)},expression:"form.orgAsync"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不启用")]),a("el-radio",{attrs:{label:"1"}},[e._v("启用")])],1)],1):e._e(),!e.isOuaSelect&&"1"==e.form.async&&+e.form.metaDataType<2&&-1!=+e.form.metaDataType?a("el-form-item",{staticClass:"isData name-wrapper ds-designer-property",attrs:{label:"异步接口地址："}},[a("el-input",{model:{value:e.form.asyncSqlUrl,callback:function(t){e.$set(e.form,"asyncSqlUrl",t)},expression:"form.asyncSqlUrl"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v(" 会自动给接口传两个参数{isAsy: true,sFID:'父节点_id'} ")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),!e.isOuaSelect&&+e.form.metaDataType<2&&-1!=+e.form.metaDataType||e.isMobileDevice&&e.form.showSearch?a("el-form-item",{staticClass:"isData name-wrapper ds-designer-property",attrs:{label:"搜索接口地址："}},[a("el-input",{model:{value:e.form.searchSqlUrl,callback:function(t){e.$set(e.form,"searchSqlUrl",t)},expression:"form.searchSqlUrl"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v("会自动给接口传一个参数{keyWord:'关键字'}")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),!e.isMobileDevice&&!e.isOuaSelect&&"1"==e.form.async&&1*e.form.metaDataType<2&&-1!=+e.form.metaDataType?a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"搜索使用异步："}},[a("el-radio-group",{model:{value:e.form.searchIsAsync,callback:function(t){e.$set(e.form,"searchIsAsync",t)},expression:"form.searchIsAsync"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不启用")]),a("el-radio",{attrs:{label:"1"}},[e._v("启用")])],1),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v(" 会自动给搜索接口传两个参数{keyWord:'关键字',sFID:'父节点_id'} ")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),-1!=+e.form.metaDataType?a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"是否启用分页："}},[a("el-radio-group",{model:{value:e.form.pagination,callback:function(t){e.$set(e.form,"pagination",t)},expression:"form.pagination"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不启用")]),a("el-radio",{attrs:{label:"1"}},[e._v("启用")])],1),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v("默认不启用分页")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),"1"==e.form.pagination&&-1!=+e.form.metaDataType?a("el-form-item",{attrs:{label:"每次分页请求条数："}},[a("el-input-number",{attrs:{min:1},model:{value:e.form.pageSize,callback:function(t){e.$set(e.form,"pageSize",t)},expression:"form.pageSize"}})],1):e._e(),"1"==e.form.pagination&&!e.isOuaSelect&&1*e.form.metaDataType<2&&-1!=+e.form.metaDataType?a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"分页接口地址："}},[a("el-input",{model:{value:e.form.paginationSql,callback:function(t){e.$set(e.form,"paginationSql",t)},expression:"form.paginationSql"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v(" 会自动给接口传两个参数{pageNum:'当前页码',pageSize:\"每次分页请求条数\"} ")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),+e.form.metaDataType>1?a("el-form-item",{staticClass:"isData",attrs:{label:"类型选择："}},[a("el-radio-group",{model:{value:e.form.showType,callback:function(t){e.$set(e.form,"showType",t)},expression:"form.showType"}},[a("el-radio",{attrs:{label:"user"}},[e._v("人员类型")]),a("el-radio",{attrs:{label:"dept"}},[e._v("部门类型")])],1)],1):e._e(),1*e.form.metaDataType>1?a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"部门过滤："}},[a("el-input",{model:{value:e.form.excludeDept,callback:function(t){e.$set(e.form,"excludeDept",t)},expression:"form.excludeDept"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v("以逗号分割")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),1*e.form.metaDataType>1?a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"人员过滤："}},[a("el-input",{model:{value:e.form.excludeUser,callback:function(t){e.$set(e.form,"excludeUser",t)},expression:"form.excludeUser"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v("以逗号分割")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),!e.isOuaSelect&&("1"==e.form.async||"1"==e.form.pagination)&&"0"!=e.form.chooseOneNode&&+e.form.metaDataType<2?a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"父子关联加载地址："}},[a("el-input",{model:{value:e.form.syncUrlForChild,callback:function(t){e.$set(e.form,"syncUrlForChild",t)},expression:"form.syncUrlForChild"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[a("div",[e._v("启用条件：开启 异步/分页 并且开启选择关联状态为父子关联时启用。")]),a("div",[e._v("作用：解决异步请求时，选中还没有请求子级的节点，无法加载出关联选择的子级节点数据到右侧已选择列表。")]),a("div",[e._v("注意：如果不配置该接口，只有等待子级被请求出来才能看到关联选择")]),a("div",{staticClass:"ds-bold"},[e._v("会自动给接口传两个参数{isAsy: false,sFID:'父节点_id'} ")])]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),a("el-divider",[e._v("选择设置：")]),a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"选择限制条件："}},[a("el-input",{model:{value:e.form.types,callback:function(t){e.$set(e.form,"types",t)},expression:"form.types"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[a("b",[e._v("结果为true时可选择 ")]),a("br"),a("br"),e._v("支持表达式@[isExist("),a("i",[e._v("节点中的key")]),e._v(","),a("i",[e._v("key对应的值")]),e._v(")]，严格区分值类型 "),a("br"),e._v("比如： "),a("br"),e._v("@[isExist(_type,1)] "),a("br"),e._v("@[isExist(_type,'1')] "),a("br"),e._v("@[isExist(_type,1,'1')] ")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1),a("el-form-item",{attrs:{label:"数据标识："}},[a("el-radio-group",{model:{value:e.form.nodeKey,callback:function(t){e.$set(e.form,"nodeKey",t)},expression:"form.nodeKey"}},[a("el-radio",{attrs:{label:"_id"}},[e._v("_id")]),a("el-radio",{attrs:{label:"globalId"}},[e._v("globalId")])],1)],1),a("el-form-item",{attrs:{label:"选择框显示状态："}},[a("el-radio-group",{model:{value:e.form.showCheckBox,callback:function(t){e.$set(e.form,"showCheckBox",t)},expression:"form.showCheckBox"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不显示")]),a("el-radio",{attrs:{label:"1"}},[e._v("只显示符合选择条件的项")]),a("el-radio",{attrs:{label:"2"}},[e._v("全部显示")])],1)],1),a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"选择关联状态："}},[a("el-radio-group",{model:{value:e.form.chooseOneNode,callback:function(t){e.$set(e.form,"chooseOneNode",t)},expression:"form.chooseOneNode"}},[a("el-radio",{attrs:{label:"0"}},[e._v("父子不关联")]),a("el-radio",{attrs:{label:"1"}},[e._v("父子关联")]),a("el-radio",{attrs:{label:"2"}},[e._v("关联(不带父级)")])],1),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[a("b",[e._v(" 目的：选中一个节点后，父子节点的选中状态是否跟随当前操作节点状态的变化而变化 ")]),a("br"),a("br"),a("b",[e._v("（1）关联")]),e._v(" ：当前操作的节点勾选状态变化时，它的父级节点和子级所有节点勾选状态也会跟着变化； "),a("br"),a("b",[e._v("（2）关联(不带父级)")]),e._v(" ：当前操作的节点勾选状态变化时，它的子级所有节点勾选状态也会跟着变化。父级节点勾选状态不受当前操作节点影响； "),a("br"),a("b",[e._v("（3）不关联")]),e._v(" ：当前操作节点的勾选状态变化时，它的父级和子级不受其影响； ")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1),e.isMobileDevice?e._e():a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"选中父级隐藏子级："}},[a("el-radio-group",{model:{value:e.form.chooseOneNodeSpecial,callback:function(t){e.$set(e.form,"chooseOneNodeSpecial",t)},expression:"form.chooseOneNodeSpecial"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[a("b",[e._v("当父级节点被选中后，子级节点是否还出现在右侧的选中区域。")]),a("br"),e._v("(当父子关联状态为: 关联/关联(不带父级) 此配置才生效) "),a("br"),a("p",[e._v("当选择是时会有以下3种效果：")]),a("pre",[e._v("                梦创\n                  上海\n                  成都\n                    前端\n                    后端\n              ")]),a("p",[e._v("（1）只选中前端，右边只有前端")]),a("p",[e._v(" （2）选中了前端，后端，这个时候el-tree如果有父子联动的画会将成都也变成选中，这个时候右边就是成都 ")]),a("p",[e._v("（3）部门被选中，部门下的人不会被带到右边")]),a("br"),a("b",[e._v("右侧是什么给到接口的也就是什么")])]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1),("1"==e.form.async||+e.form.metaDataType>1&&+e.form.metaDataType<4||4==+e.form.metaDataType&&"1"==e.form.orgAsync)&&"0"!=e.form.chooseOneNode&&!e.isMobileDevice?a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"根节点是否可选："}},[a("el-radio-group",{model:{value:e.form.canChooseRoot,callback:function(t){e.$set(e.form,"canChooseRoot",t)},expression:"form.canChooseRoot"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v("在开启异步 且是 选择状态是关联的情况下 生效")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1):e._e(),e.isMobileDevice?a("el-form-item",{attrs:{label:"是否显示搜索栏："}},[a("el-radio-group",{model:{value:e.form.showSearch,callback:function(t){e.$set(e.form,"showSearch",t)},expression:"form.showSearch"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不显示")]),a("el-radio",{attrs:{label:"1"}},[e._v("显示")])],1)],1):e._e(),e.isMobileDevice?e._e():a("el-form-item",{staticClass:"name-wrapper ds-designer-property",attrs:{label:"初始化展开层级："}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.defaultOpenSeries,callback:function(t){e.$set(e.form,"defaultOpenSeries",t)},expression:"form.defaultOpenSeries"}}),a("el-popover",{attrs:{trigger:"click",placement:"top"}},[a("div",{staticClass:"ds-font4"},[e._v("不填则为展开所有节点、0为不展开")]),a("i",{staticClass:"iconfont icon-bangzhuzhongxin",attrs:{slot:"reference"},slot:"reference"})])],1),e.isMobileDevice?e._e():a("el-form-item",{attrs:{label:"点击文字："}},[a("el-radio-group",{model:{value:e.form.clickTextFun,callback:function(t){e.$set(e.form,"clickTextFun",t)},expression:"form.clickTextFun"}},[a("el-radio",{attrs:{label:"check"}},[e._v("选中节点")]),a("el-radio",{attrs:{label:"expand"}},[e._v("展开或折叠节点")])],1)],1),e.isMobileDevice&&"0"==e.form.metaDataType?a("el-form-item",{attrs:{label:"显示方式："}},[a("el-radio-group",{model:{value:e.form.displayMode,callback:function(t){e.$set(e.form,"displayMode",t)},expression:"form.displayMode"}},[a("el-radio",{attrs:{label:"tree"}},[e._v("树选择")]),a("el-radio",{attrs:{label:"indexBar"}},[e._v("通讯录")])],1)],1):e._e()],1)]],2)],1)},l=[],i={name:"TreeSelectorEdit1",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[],editorIndex:-1,activedIndex:-1,form:{},names:[],isOuaSelect:!1,isMobileDevice:!1}},beforeCreate:function(){},created:function(){var e=this;document.addEventListener("click",this.emptyClick),document.addEventListener("scroll",this.handlerScroll,!0);var t=!1;this.config.params&&(this.isOuaSelect="checkNode"==this.config.params.type,this.isMobileDevice=!!this.config.params.isMobile,this.config.params.nullable&&(t=!0));var a=[],n=this.newTab();_.forEach(this.currentData,(function(t){_.forEach(_.keys(n),(function(e){dsf.isUnDef(t[e])&&"defaultOpenSeries"!=e&&"canChooseRoot"!=e&&(t[e]=n[e])})),a.push(dsf.mix({nodeKey:e.owner.nodeKey},t))})),this.tableData=a,t&&!this.tableData.length||(this.tableData.length||this.add(),this.selected(0))},beforeDestroy:function(){document.removeEventListener("click",this.emptyClick),document.removeEventListener("scroll",this.handlerScroll,!0)},destroyed:function(){},methods:{emptyClick:function(){this.editorIndex=-1},editItem:function(e){var t=this;this.editorIndex=e;var a=_.find(this.tableData,(function(t,a){return a==e}));this.$nextTick((function(){var e,n;null===(e=t.$el.querySelector(".input-"+a.name))||void 0===e||null===(n=e.focus)||void 0===n||n.call(e)}))},selected:function(e){this.activedIndex=e;var t=_.find(this.tableData,(function(t,a){return a==e}));t&&!t.staticData&&(t.staticData=JSON.stringify([{_name:"一级 1",_id:1,children:[]}],null,2)),this.form=t||{}},newTab:function(){return{title:"Tab"+(this.tableData.length+1),showCheckBox:"0",types:"",chooseOneNode:"0",defaultOpenSeries:"1",metaDataType:this.isOuaSelect?"2":"0",showType:"user",showSubDept:"1",showLevel:"1",chooseMetaData:{},sqlUrl:"",controls:[],name:dsf.uuid(),error:!1,nodeKey:this.owner.nodeKey,showSearch:"1",searchKey:"type",searchType:"user",async:"0",asyncSqlUrl:"",searchSqlUrl:"",pagination:"0",pageSize:1e3,paginationSql:"",clickTextFun:"check",chooseOneNodeSpecial:"0",excludeDept:"",excludeUser:"",staticData:null,tabId:dsf.uuid(),displayMode:"tree",searchIsAsync:"0",hasPrefix:"0",canChooseRoot:"0",syncUrlForChild:null,orgAsync:"1"}},add:function(){var e=this;this.tableData.push(this.newTab());var t=this.tableData.length-1;this.$nextTick((function(){e.selected(t),e.editItem(t)}))},insert:function(e,t){var a=this,n=t+1;this.tableData.splice(n,0,dsf.mix({},this.newTab(),{}||obj)),this.$nextTick((function(){a.selected(n),a.editItem(n)}))},deleted:function(e,t){var a=this;dsf.layer.confirm("您确定要删除【"+e.title+"】吗?").then((function(){if(dsf.array.remove(a.tableData,e),a.activedIndex==t){var n=0;a.tableData[t]?n=t:a.tableData[t-1]?n=t-1:a.tableData.length||(n=-1),a.selected(n)}else t<=a.activedIndex&&a.activedIndex--})).catch((function(){}))},up:function(e,t){if(t>0){var a=this.tableData[t],n=t;dsf.array.remove(this.tableData,a),this.tableData.splice(n-1,0,a)}},down:function(e,t){if(this.tableData.length-1>t){var a=this.tableData[t],n=t;dsf.array.remove(this.tableData,a),this.tableData.splice(n+1,0,a)}},validate:function(){for(var e in this.names=[],this.tableData){this.tableData[e]["title"]=this.tableData[e]["title"]||dsf.uuid(),this.tableData[e]["tabId"]=this.tableData[e]["tabId"]||dsf.uuid();var t=this.tableData[e]["title"],a=this.names.indexOf(t);if(-1!=a&&a<e)return dsf.layer.message("请解决重复名称【"+t+"]",!1),!1;this.names.push(t)}return!0},yes:function(){return this.tableData},setChooseMetaData:function(e){var t=this;dsf.layer.openDialog({title:"请选择",fullscreen:!1,width:"1000px",overflow:"hidden",content:"TreeDataSource",params:{chooseMetaData:t["tableData"][t.activedIndex].chooseMetaData},btns:[{text:"确定",handler:function(e){var a=e.validate();if(!a)return!1;t["tableData"][t.activedIndex].chooseMetaData=e.yes()}},{text:"取消"}]})},handlerScroll:function(){var e,t,a,n;null===(e=this.$refs)||void 0===e||null===(e=e.mySelect1)||void 0===e||null===(t=e.blur)||void 0===t||t.call(e),null===(a=this.$refs)||void 0===a||null===(a=a.mySelect2)||void 0===a||null===(n=a.blur)||void 0===n||n.call(a)}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"ds-ueditor-toolbar"},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:6}},[a("el-checkbox",{attrs:{border:"",indeterminate:e.isIndeterminate},on:{change:e.chooseAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("ul",{staticClass:"check-list"},e._l(e.tools,(function(t,n){return a("li",{key:t.val},[a("el-checkbox",{attrs:{label:t.val,value:t.checked,checked:!1,name:"type"},on:{change:function(a){return e.chooseItem(t,n)}}},[e._v(e._s(t.text))])],1)})),0)],1),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"ue-container"},[a("div",{attrs:{id:"u_template"}})])])],1)],1)},l=[];function i(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=s(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(o)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var o={name:"DesUeditorToolbar",mixins:[$mixins.propertyDialogSetting],data:function(){return{checkAll:!1,tools:[{val:"fullscreen",text:"全屏"},{val:"source",text:"源代码"},{val:"undo",text:"撤销"},{val:"redo",text:"重做"},{val:"bold",text:"加粗"},{val:"italic",text:"斜体"},{val:"underline",text:"下划线"},{val:"fontborder",text:"字符边框"},{val:"strikethrough",text:"删除线"},{val:"superscript",text:"上标"},{val:"subscript",text:"下标"},{val:"removeformat",text:"清除格式"},{val:"formatmatch",text:"格式刷"},{val:"autotypeset",text:"自动排版"},{val:"blockquote",text:"引用"},{val:"pasteplain",text:"纯文本粘贴模式"},{val:"forecolor",text:"字体颜色"},{val:"backcolor",text:"背景色"},{val:"insertorderedlist",text:"有序列表"},{val:"insertunorderedlist",text:"无序列表"},{val:"selectall",text:"全选"},{val:"cleardoc",text:"清空文档"},{val:"rowspacingtop",text:"段前距"},{val:"rowspacingbottom",text:"段后距"},{val:"lineheight",text:"行间距"},{val:"customstyle",text:"自定义标题"},{val:"paragraph",text:"段落"},{val:"fontfamily",text:"字体"},{val:"fontsize",text:"字号"},{val:"letterspacing",text:"字间距"},{val:"directionalityltr",text:"从左向右输入"},{val:"directionalityrtl",text:"从右向左输入"},{val:"indent",text:"首行缩进"},{val:"justifyleft",text:"居左对齐"},{val:"justifycenter",text:"居中对齐"},{val:"justifyright",text:"居右对齐"},{val:"justifyjustify",text:"两端对齐"},{val:"touppercase",text:"字母大写"},{val:"tolowercase",text:"字母小写"},{val:"link",text:"超链接"},{val:"unlink",text:"取消链接"},{val:"anchor",text:"锚点"},{val:"imagenone",text:"图片位置默认"},{val:"imageleft",text:"图片左浮动"},{val:"imageright",text:"图片右浮动"},{val:"imagecenter",text:"图片居中"},{val:"simpleupload",text:"单图上传"},{val:"insertimage",text:"多图上传"},{val:"emotion",text:"表情"},{val:"scrawl",text:"涂鸦"},{val:"insertvideo",text:"插入视频"},{val:"music",text:"音乐"},{val:"attachment",text:"附件"},{val:"map",text:"百度地图"},{val:"gmap",text:"Google地图"},{val:"insertframe",text:"插入Iframe"},{val:"insertcode",text:"插入代码"},{val:"webapp",text:"百度应用"},{val:"pagebreak",text:"分页"},{val:"template",text:"模板"},{val:"background",text:"背景"},{val:"horizontal",text:"分隔线"},{val:"date",text:"日期"},{val:"time",text:"时间"},{val:"spechars",text:"特殊字符"},{val:"snapscreen",text:"截图"},{val:"wordimage",text:"图片转存"},{val:"inserttable",text:"插入表格"},{val:"deletetable",text:"删除表格"},{val:"insertparagraphbeforetable",text:"表格前插入行"},{val:"insertrow",text:"表格插入行"},{val:"deleterow",text:"表格删除行"},{val:"insertcol",text:"表格插入列"},{val:"deletecol",text:"表格删除列"},{val:"mergecells",text:"表格合并多个单元格"},{val:"mergeright",text:"表格右合并单元格"},{val:"mergedown",text:"表格下合并单元格"},{val:"splittocells",text:"表格完全拆分单元格"},{val:"splittorows",text:"表格拆分成行"},{val:"splittocols",text:"表格拆分成列"},{val:"charts",text:"图表"},{val:"print",text:"打印"},{val:"preview",text:"预览"},{val:"searchreplace",text:"查询替换"},{val:"drafts",text:"从草稿箱加载"},{val:"help",text:"帮助"}],checkedTools:this.owner.toolBar,isIndeterminate:!1,dialogUe:null}},watch:{checkedTools:function(){d.call(this)}},created:function(){var e,t=this,a=t.tools.map((function(e){return e.checked=!1,e})),n=i(t.checkedTools);try{var l=function(){var t=e.value,n=a.findIndex((function(e){return e.val===t}));a[n].checked=!0};for(n.s();!(e=n.n()).done;)l()}catch(err){n.e(err)}finally{n.f()}t.tools=a,u.call(t)},mounted:function(){d.call(this)},methods:{chooseItem:function(e,t){var a=this,n=_.assign({},e,{checked:!e.checked});a.tools.splice(t,1,n),c.call(a),u.call(a)},chooseAll:function(){var e=this;e.isIndeterminate=!1,e.checkAll?e.tools.forEach((function(e){e.checked=!0})):e.tools.forEach((function(e){e.checked=!1})),c.call(e)},yes:function(){return this.dialogUe.destroy(),this.checkedTools}}};function c(){var e,t=this,a=[],n=i(t.tools);try{for(n.s();!(e=n.n()).done;){var l=e.value;l.checked&&a.push(l.val)}}catch(err){n.e(err)}finally{n.f()}t.checkedTools=a}function u(){var e=this,t=!e.tools.find((function(e){return!e.checked}));if(t)return e.checkAll=!0,void(e.isIndeterminate=!1);var a=e.tools.findIndex((function(e){return e.checked}));if(-1!==a)return e.checkAll=!1,void(e.isIndeterminate=!0);e.checkAll=!1,e.isIndeterminate=!1}function d(){var e=this;e.dialogUe&&e.dialogUe.destroy(),e.dialogUe=UE.getEditor("u_template",{autoHeightEnabled:!1,toolbars:[e.checkedTools],UEDITOR_HOME_URL:dsf.url.getWebPath("$/js/libs/UEditor/")}),e.dialogUe.ready((function(){f.call(e)}))}function f(){var e=this;$("#u_template").css("width","100%"),e.dialogUe.setHeight(390)}var p=o,h=a(0),m=Object(h["a"])(p,n,l,!1,null,null,null);t["default"]=m.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"ds-upload-file-attr",on:{"tab-click":e.handleClick},model:{value:e.tabsValue,callback:function(t){e.tabsValue=t},expression:"tabsValue"}},[a("el-tab-pane",{attrs:{label:"常用列表",name:"0"}},[a("el-form",{ref:"form"},e._l(e.fileExtArr,(function(t,n){return a("el-form-item",{key:n,attrs:{label:t.itemName}},[a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.fileExtArr[n].checkStatus,callback:function(t){e.$set(e.fileExtArr[n],"checkStatus",t)},expression:"fileExtArr[index].checkStatus"}},[a("el-checkbox",{attrs:{label:t.file.value,title:t.file.title}},[e._v(" "+e._s(t.file.title)+" ")])],1)],1)})),1)],1),a("el-tab-pane",{attrs:{label:"个性化配置",name:"1"}},[a("el-form",{ref:"formSel"},[a("el-form-item",{attrs:{label:"允许上传文件类型"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},on:{change:e.handleFileType},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}},[a("el-option",{attrs:{value:"file",label:"file(所有文件)"}}),a("el-option",{attrs:{value:"images",label:"images（图片）"}}),a("el-option",{attrs:{value:"video",label:"video（视频）"}}),a("el-option",{attrs:{value:"audio",label:"audio（音频）"}})],1)],1),a("p",[e._v("允许上传文件后缀")]),e._l(e.fileExtArr,(function(t,n){return[e.fileShow(t)?a("el-form-item",{key:n,attrs:{label:t.itemName}},[a("el-checkbox-group",{on:{change:e.handleCheckedChange},model:{value:e.fileExtArr[n].checkType,callback:function(t){e.$set(e.fileExtArr[n],"checkType",t)},expression:"fileExtArr[index].checkType"}},e._l(t.children,(function(t,n){return a("el-checkbox",{key:n+"_sel",attrs:{label:t.title+"&"+t.value,title:t.title}},[e._v(" "+e._s(t.title)+" ")])})),1)],1):e._e()]})),a("p"),a("el-form-item",{attrs:{label:"是否在文件筛选框中显示指定类型文件"}},[a("el-switch",{attrs:{"inactive-color":"#d2d2d2"},model:{value:e.isLinkeMine,callback:function(t){e.isLinkeMine=t},expression:"isLinkeMine"}})],1),e.choosenExtsStr?a("el-form-item",{attrs:{label:"已选上传文件后缀"}},[e._v(" "+e._s(e.choosenExtsStr)+" ")]):e._e(),a("p")],2)],1)],1)},l=[],i={name:"DesUploadFileAttr",mixins:[$mixins.propertyDialogSetting],data:function(){return{tabsValue:"0",allowExtObj:{},fileExtArr:[],isLinkeMine:!0,extsSetting:{},fileType:"file",choosenExtsStr:""}},computed:{},created:function(){this.tabsValue=this.owner.extsSetting.tabIndex||"0",this.getExtObj()},methods:{fileShow:function(e){var t=this;return"images"!=this.fileType&&"video"!=this.fileType&&"audio"!=this.fileType||(_.each(this.fileExtArr,(function(e){e.itemKey!=t.fileType&&(e.checkType=[])})),e.itemKey==this.fileType)},getExtObj:function(){var e=this;this.$http.get("./static/other/uploadFileExt.json").done((function(t){e.allowExtObj=t,e.fileExtArr=t.file,_.map(e.fileExtArr,(function(t){if(e.owner.extsSetting.CheckedNameStr){var a=e.owner.extsSetting.CheckedNameStr;t.checkStatus=a.includes(t.itemKey)}else{var n=e.owner.extsSetting.extStr;n&&(t.checkType=_.map(t.children,(function(e){return n.includes(e.name)?e.title+"&"+e.value:""})),e.choosenExtsStr=_.filter(n.split(","),(function(e){return""!==e})).join(),e.isLinkeMine=e.owner.extsSetting.isLinkeMine,e.fileType=e.owner.extsSetting.fileType)}t.file={title:_.map(t.children,(function(e){return e.title})).join(),value:_.map(t.children,(function(e){return e.value})).join()}}))})).error((function(e){dsf.error(e)}))},handleFileType:function(e){this.fileType=e},handleCheckedChange:function(){var e="",t="",a="",n=[],l=[];if("1"==this.tabsValue){var i=_.filter(this.fileExtArr,(function(e){return e.checkType.length}));_.map(i,(function(e){_(e.checkType).forEach((function(e){e.split("&")[0].substr(1)&&n.push(e.split("&")[0]),e.split("&")[1]&&l.push(e.split("&")[1])}))})),t=n.join(","),a=l.join(","),this.choosenExtsStr=_.filter(t.split(","),(function(e){return""!==e})).join(),this.extsSetting={CheckedNameStr:e,extStr:t,mineStr:a}}else{var s=_.filter(this.fileExtArr,(function(e){return e.checkStatus}));_(s).forEach((function(n){e+=n.itemKey+",",t+=n.file.title+",",a+=n.file.value+","})),this.extsSetting={CheckedNameStr:e,extStr:t,mineStr:a}}},handleClick:function(e){this.tabsValue=e.index},yes:function(){return this.owner.extsSetting=Object.assign({},this.extsSetting,{fileType:this.fileType,isLinkeMine:this.isLinkeMine,tabIndex:this.tabsValue}),this.owner.extsSetting}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control-filter-tree"},["tree"==e.selectModel?a("dsf-tree-select",{attrs:{"tree-data":e.treeData,"node-key":"_id","node-name":"_name",loading:!0,"default-checked-key":e.defaultCheckedKey,fileType:e.fileType,"search-control":"","default-expand-all":""},on:{"choose-node":e.chooseNode}}):e._e(),"explorer"==e.selectModel?a("dsf-explorer",e._b({ref:"explorer",attrs:{loading:e.treeLoading,multiple:!1,fileType:e.fileType,"default-checked-keys":e.defaultCheckedKey,"node-key":"_id",props:{label:"_name"}}},"dsf-explorer",e.$attrs,!1)):e._e()],1)},l=[],i={name:"DesUseLayoutTpl",mixins:[$mixins.propertyDialogSetting],props:{templateType:{type:String,default:""},fileType:{type:[String,Number],default:""},selectModel:{type:String,default:"tree"},defaultCheckedKey:{type:Array,default:function(){return[]}}},data:function(){return{treeData:[],treeLoading:!1,radioData:null}},created:function(){this.getDesignCtrl()},methods:{chooseNode:function(e){this.radioData=e},yes:function(){return"explorer"==this.selectModel?this.$refs.explorer.yes():this.radioData},getDesignCtrl:function(){var e,t,a=this;this.loading=!0;var n="/template/selectTemplates?type=".concat(this.templateType),l=((null===this||void 0===this||null===(e=this.designer)||void 0===e?void 0:e.tplId)||"").split(","),i=(null===this||void 0===this||null===(t=this.designer)||void 0===t?void 0:t.rangeFolder)||[];l=_.filter(l,(function(e){return!!e.trim()})),this.$http.get(n).done((function(e){var t=e.success,n=e.data,s=e.message;if(t){var r=null,o=function e(t){var a=[];return _.each(t,(function(t){if(t.children?t.children=e(t.children):t.children=[],t.templateVOS){var n=_.filter(t.templateVOS,(function(e){return e._name=e.name,e._id=e.id,!l.length||l.indexOf(e.id)>-1}));t.children=_.concat(t.children,n),n.length&&!r&&(r=t)}t.children.length&&a.push(t)})),a},c=function e(t,a){for(var n=[],l=0;l<t.length;l++){var i=t[l];if(a.includes(i._id))n.push(i);else if(i.children&&i.children.length){var s=e(i.children,a);s.length&&(i.children=s,n.push(i))}}return n};i&&i.length&&(n=c(n,i)),n=o(n),"explorer"==a.selectModel&&(a.$refs.explorer.setData(n),r&&a.$nextTick().then((function(){a.$refs.explorer.selectNodeByData(r)}))),a.treeData=n}else dsf.layer.message(s||"请求异常",!1)})).error((function(e){dsf.layer.message(e.message,!1)})).finally((function(){a.loading=!1}))}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%"}},[e._v(" 组件已经作废（请使用DesValidateRuleNew） ")])},l=[],i={name:"DesValidateRule",mixins:[$mixins.propertyDialogSetting],data:function(){return{activeName:"base",valueAttributes:[],currentNodeKey:"",treeConfig:{label:"name"},formModel:{},errorMsg:dsf.validate.fn.getDefaultErrorMsg(),javascript:"",expressOptions:[{expressName:"",text:"",value:""},{expressName:"身份证号码",text:"身份证号码",value:"isIDCard"},{expressName:"身份证号码",text:"身份证号码(强校验)",value:"isIDCardFull"},{expressName:"手机号码",text:"手机号码",value:"isMobile"},{expressName:"电话号码",text:"电话号码",value:"isTelPhone"},{expressName:"电话/手机号码",text:"电话/手机号码",value:"isMobileOrTelPhone"},{expressName:"电子邮箱",text:"电子邮箱",value:"isEmail"},{expressName:"车牌号",text:"车牌号",value:"isPlateNumber"},{expressName:"银行卡号",text:"银行卡号",value:"isBankCardNumber"},{expressName:"邮政编码",text:"邮政编码",value:"isPostcode"},{expressName:"中文",text:"中文",value:"isChinese"},{expressName:"字母数字组合",text:"字母数字组合",value:"isCombination"}],metaDataValidateConfig:null}},computed:{ownerCtrl:function(){return this.owner.$$getComponent()},model:function(){return this.formModel[this.currentNodeKey]}},created:function(){var e=this;this.valueAttributes=dsf.mix(!0,[],this.ownerCtrl.metadata.valueAttributes),this.currentNodeKey=this.valueAttributes[0].code,this.ownerCtrl.metadata.validate&&this.ownerCtrl.metadata.validate.config&&(this.metaDataValidateConfig=dsf.mix(!0,{},this.ownerCtrl.metadata.validate.config)),this.metaDataValidateConfig||(this.metaDataValidateConfig={}),_.each(this.valueAttributes,(function(t){var a=t.code;e.ownerCtrl.metadata&&(e.$set(e.metaDataValidateConfig,a,e.createValideConfig(a)),e.setFormModel(a,e.metaDataValidateConfig[a]))})),this.javascript=this.currentData&&this.currentData.code||""},methods:{yes:function(){var e=this,t={config:null,code:null},a="";if(a)return t.code=a,t;var n={},l=!1,i=function(){var t=e.formModel[s],a=t.required,i=t.isNumber,r=t.isNumber?t.numberMin:t.min,o=t.isNumber?t.numberMax:t.max,c=t.isNumber?t.precision:"",u=t.express,d=t.arrayMin,f=t.arrayMax;if(d&&(t.arrayMin=parseFloat(d||0)),f&&(t.arrayMax=parseFloat(f||0)),!a&&!i&&!r&&!o&&!c&&!u&&!d&&!f)return 1;e.owner.multiple&&"max"in e.owner&&(e.owner.max=d),e.owner.multiple&&"min"in e.owner&&(e.owner.min=f);var p=_.filter(e.expressOptions,(function(e){return e.value==t.express}));t.expressName=_.map(p,"expressName"),n[s]=t,a&&(l=!0)};for(var s in this.formModel)i();return"required"in this.owner&&(this.owner.required=l),0==Object.keys(n).length?null:(t.config=n,t)},createValideConfig:function(e){var t=dsf.validate.fn.getMetaDataValidateObject();if(this.metaDataValidateConfig[e]){var a=this.metaDataValidateConfig[e];return dsf.mix(!0,t,a),dsf.mix(a,t)}return dsf.mix({},t)},setFormModel:function(e,t){var a={};a.required=t.required,a.isNumber=t.isNumber,a.numberMin="",a.numberMax="",a.max="",a.min="",a.precision="",t.isNumber?(a.numberMin=t.numberMin,a.numberMax=t.numberMax,a.precision=t.precision):(a.min=t.min,a.max=t.max),"enum"==this.owner.controlMode&&this.owner.multiple?(a.arrayMin=t.arrayMin,a.arrayMax=t.arrayMax):(a.arrayMin=0,a.arrayMax=0),a.express=t.express,a.expressName=t.expressName,a.errorMsg=t.errorMsg,this.$set(this.formModel,e,a)},tabsCliekHandler:function(e){var t=this;this.$nextTick((function(){var a=e.name,n=a+"Editor";t.$refs[n]&&t.$refs[n].layout()}))},editorLoaded:function(e){var t=e+"Editor";this.$refs[t]&&this.$refs[t].setContent(this.javascript)},checkNum:function(e,t){if(this.model[e]){var a=t?parseInt:parseFloat;this.model[e]=a(this.model[e]).toString(),dsf.isNumber(this.model[e])||(this.model[e]="")}},nodeClickHandler:function(e){this.currentNodeKey=e.code}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-form",{attrs:{"label-width":"130px"}},e._l(e.rules,(function(t,n){return a("el-card",{key:n,staticStyle:{"margin-bottom":"10px"},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" 规则"+e._s(n+1)+" "),a("span",{staticStyle:{float:"right"}},[a("DsfButton",{attrs:{title:"删除",icon:"shanchu","btn-style":"icon-text"},on:{click:function(a){return e.removeRule(t)}}})],1)]},proxy:!0}],null,!0)},[a("el-form-item",{attrs:{label:"属性"}},[a("el-select",{model:{value:t.attr,callback:function(a){e.$set(t,"attr",a)},expression:"item.attr"}},e._l(e.valueAttributes,(function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"校验类型"}},[a("el-select",{on:{change:function(a){return e.typeChange(t)}},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}},e._l(e.validateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1),"array"==t.type?a("span",{staticStyle:{color:"#c0c0c0","margin-left":"10px"}},[e._v("用于校验选项个数(多选、选人、选组织)")]):e._e()],1),"number"==t.type?[a("el-form-item",{attrs:{label:"最小数"}},[a("el-input",{attrs:{placeholder:"不限制"},model:{value:t.numberMin,callback:function(a){e.$set(t,"numberMin",a)},expression:"item.numberMin"}})],1),a("el-form-item",{attrs:{label:"最大数"}},[a("el-input",{attrs:{placeholder:"不限制"},model:{value:t.numberMax,callback:function(a){e.$set(t,"numberMax",a)},expression:"item.numberMax"}})],1),a("el-form-item",{attrs:{label:"小数点后保留位数"}},[a("el-input",{attrs:{placeholder:"不限制"},model:{value:t.precision,callback:function(a){e.$set(t,"precision",a)},expression:"item.precision"}})],1)]:"string"==t.type?[a("el-form-item",{attrs:{label:"输入最小长度"}},[a("el-input",{attrs:{placeholder:"不限制"},model:{value:t.minLength,callback:function(a){e.$set(t,"minLength",a)},expression:"item.minLength"}})],1),a("el-form-item",{attrs:{label:"输入最大长度"}},[a("el-input",{attrs:{placeholder:"不限制"},model:{value:t.maxLength,callback:function(a){e.$set(t,"maxLength",a)},expression:"item.maxLength"}})],1)]:"array"==t.type?[a("el-form-item",{attrs:{label:"最小个数"}},[a("el-input",{attrs:{placeholder:"不限制"},on:{change:function(t){return e.checkNum("arrayMin",!0)}},model:{value:t.arrayMin,callback:function(a){e.$set(t,"arrayMin",a)},expression:"item.arrayMin"}})],1),a("el-form-item",{attrs:{label:"最大个数"}},[a("el-input",{attrs:{placeholder:"不限制"},on:{change:function(t){return e.checkNum("arrayMax",!0)}},model:{value:t.arrayMax,callback:function(a){e.$set(t,"arrayMax",a)},expression:"item.arrayMax"}})],1)]:"express"==t.type?[a("el-form-item",{attrs:{label:"格式"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:function(a){return e.expressChange(t)}},model:{value:t.express,callback:function(a){e.$set(t,"express",a)},expression:"item.express"}},e._l(e.expressOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text||"无",value:e.value}})})),1)],1)]:e._e(),a("el-form-item",{attrs:{label:"错误提示"}},[a("el-input",{attrs:{placeholder:"请输入错误提示"},model:{value:t.errorMsg,callback:function(a){e.$set(t,"errorMsg",a)},expression:"item.errorMsg"}})],1),a("el-form-item",{attrs:{label:"触发逻辑"}},[a("el-input",{attrs:{placeholder:"任何时候都有效"},model:{value:t.triggerExpress,callback:function(a){e.$set(t,"triggerExpress",a)},expression:"item.triggerExpress"}}),a("div",{staticStyle:{color:"red","line-height":"1.2em"}},[a("div",[e._v("注意：")]),a("div",[e._v(" 1、支持@[]表达式，填写后当表达式执行为true则执行该规则，不填写则每次触发校验都会执行该规则。 ")]),a("div",[e._v(" 2、如果页面中组件较多、规则存在复杂的触发逻辑可能会导致页面卡顿不建议使用该功能、推荐使用二次开发处理。 ")])])],1)],2)})),1)],1),a("div",[a("DsfButton",{attrs:{icon:"hao",size:"small"},on:{click:e.addRule}},[e._v("添加")])],1)])},l=[],i={name:"DesValidateRuleNew",mixins:[$mixins.propertyDialogSetting],data:function(){return{rules:[],valueAttributes:[],validateOptions:[{text:"必填",value:"required"},{text:"数字",value:"number"},{text:"字符串",value:"string"},{text:"数组",value:"array"},{text:"格式校验",value:"express"}],expressOptions:[{expressName:"身份证号码",text:"身份证号码",value:"isIDCard"},{expressName:"身份证号码",text:"身份证号码(强校验)",value:"isIDCardFull"},{expressName:"手机号码",text:"手机号码",value:"isMobile"},{expressName:"电话号码",text:"电话号码",value:"isTelPhone"},{expressName:"电话/手机号码",text:"电话/手机号码",value:"isMobileOrTelPhone"},{expressName:"电子邮箱",text:"电子邮箱",value:"isEmail"},{expressName:"车牌号",text:"车牌号",value:"isPlateNumber"},{expressName:"邮政编码",text:"邮政编码",value:"isPostcode"},{expressName:"银行卡号",text:"银行卡号",value:"isBankCardNumber"},{expressName:"护照",text:"护照",value:"isPassport"},{expressName:"字母数字组合",text:"字母数字组合",value:"isCombination"},{expressName:"中文",text:"中文",value:"isChinese"},{expressName:"月",text:"月",value:"isMonth"},{expressName:"季度",text:"季度",value:"isQuarter"}],defaultErrorMsg:dsf.validate.fn.getDefaultErrorMsg()}},computed:{ownerCtrl:function(){return this.owner.$$getComponent()}},beforeCreate:function(){},created:function(){if(this.valueAttributes=dsf.mix(!0,[],this.ownerCtrl.metadata.valueAttributes),this.ownerCtrl.metadata)if(this.ownerCtrl.metadata.validate||(this.ownerCtrl.metadata.validate={rules:[],code:null}),this.ownerCtrl.metadata.validate){var e=this.ownerCtrl.metadata.validate.config,t=dsf.mix(!0,[],this.ownerCtrl.metadata.validate.rules||[]);if(e&&(!t||t.length<=0)){t=[];var a=function(a){var n=e[a];if(n.required){var l={attr:a,type:"required",minLength:"",maxLength:"",numberMax:"",numberMin:"",precision:"",arrayMin:"",arrayMax:"",express:"",expressName:""};return l.errorMsg=n.errorMsg["required"],l.triggerExpress="",t.push(l),0}if(n.express){var i={attr:a,type:"express",minLength:"",maxLength:"",numberMax:"",numberMin:"",precision:"",arrayMin:"",arrayMax:""};return i.express=n.express,i.expressName=n.expressName,i.errorMsg=n.errorMsg,i.triggerExpress="",t.push(i),0}if(n.isNumber){var s={attr:a,type:"number",minLength:"",maxLength:"",numberMax:"",numberMin:"",precision:"",arrayMin:"",arrayMax:"",express:"",expressName:""};s.errorMsg=n.errorMsg["isNumber"],s.triggerExpress="",t.push(s);var r=["precision","numberMax","numberMin"];_.each(r,(function(e){if(n[e]){var l={attr:a,type:"number",minLength:"",maxLength:"",numberMax:"",numberMin:"",precision:""};l[e]=n[e],l.arrayMin="",l.arrayMax="",l.express="",l.expressName="",l.errorMsg=n.errorMsg[e],s.triggerExpress="",t.push(l)}}))}else{var o=["min","max"];_.each(o,(function(e){var l={attr:a,type:"string"};l.minLength="min"==e?n[e]:"",l.maxLength="max"==e?n[e]:"",l.numberMax="",l.numberMin="",l.precision="",l.arrayMin="",l.arrayMax="",l.express="",l.expressName="",l.errorMsg=n.errorMsg[e],rule.triggerExpress="",t.push(l)}))}};for(var n in e)a(n)}this.rules=t}else this.rules=dsf.mix(!0,[],this.ownerCtrl.metadata.validate.rules||[])},beforeMount:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{addRule:function(){var e=this.valueAttributes[0];this.rules.push({attr:e.code,whereExpress:"",type:"required",minLength:"",maxLength:"",numberMax:"",numberMin:"",precision:"",arrayMin:"",arrayMax:"",express:"",expressName:"",errorMsg:this.defaultErrorMsg["required"],triggerExpress:""})},removeRule:function(e){dsf.array.remove(this.rules,e)},typeChange:function(e){this.defaultErrorMsg[e.type]?e.errorMsg=this.defaultErrorMsg[e.type]:e.errorMsg="","express"!=e.type&&(e.expressName="")},expressChange:function(e){if("express"==e.type){var t=_.find(this.expressOptions,(function(t){return t.value==e.express}));e.expressName=t?t.expressName:""}},yes:function(){var e=[],t=!1;return _.each(this.rules,(function(a){var n=a,l=!0;"number"==a.type?(n.maxLength="",n.minLength="",n.arrayMin="",n.arrayMax=""):"array"==a.type?(n.maxLength="",n.minLength="",n.numberMax="",n.numberMin=""):"string"==a.type?(n.arrayMin="",n.arrayMax="",n.numberMax="",n.numberMin=""):(n.maxLength="",n.minLength="",n.numberMax="",n.numberMin="",n.arrayMin="",n.arrayMax=""),"express"==n.type&&(""!=n.expressName&&n.express||(l=!1)),l&&("required"==n.type?(t=!0,e.unshift(n)):e.push(n))})),this.owner.required=t,{code:null,rules:e}}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0}},[a("el-table-column",{attrs:{prop:"code",label:"标识",width:"100"}}),a("el-table-column",{attrs:{prop:"name",label:"描述"}}),a("el-table-column",{attrs:{prop:"typeValue",label:"字段类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{on:{change:function(a){return e.typeChange(t.row,a)}},model:{value:t.row.typeValue,callback:function(a){e.$set(t.row,"typeValue",a)},expression:"scope.row.typeValue"}},e._l(e.getType(),(function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"length",label:"字段长度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"无"},model:{value:t.row.length,callback:function(a){e.$set(t.row,"length",a)},expression:"scope.row.length"}})]}}])}),a("el-table-column",{attrs:{prop:"defaultValue",label:"字段默认值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"无"},model:{value:t.row.defaultValue,callback:function(a){e.$set(t.row,"defaultValue",a)},expression:"scope.row.defaultValue"}})]}}])}),e.showPinyin?a("el-table-column",{attrs:{prop:"pinyin",label:"拼音",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{model:{value:t.row.pinyin,callback:function(a){e.$set(t.row,"pinyin",a)},expression:"scope.row.pinyin"}})]}}],null,!1,2172022021)}):e._e(),e.showTextType?a("el-table-column",{attrs:{prop:"textType",label:"字段存储类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{disabled:e.disableTextType(t.row)},model:{value:t.row.textType,callback:function(a){e.$set(t.row,"textType",a)},expression:"scope.row.textType"}},[a("el-option",{attrs:{value:"normal",label:"普通"}}),a("el-option",{attrs:{value:"JSON",label:"JSON"}}),a("el-option",{attrs:{value:"HTML",label:"HTML"}})],1)]}}],null,!1,718865547)}):e._e()],1)},l=[],i={name:"DesValueAttributes",mixins:[$mixins.propertyDialogSetting],data:function(){return{tableData:[]}},props:{dataTypeFilter:{type:Array,default:function(){return null}},showEncrypt:{type:Boolean,default:!0},showPinyin:{type:Boolean,default:!0},showTextType:{type:Boolean,default:!0}},mounted:function(){var e=this;if(this.owner){var t=dsf.mix(!0,[],this.owner.metadata.valueAttributes);_.each(t,(function(t){t.typeValue=t.type.value,dsf.isUnDef(t.encrypt)&&(t.encrypt=!1),dsf.isUnDef(t.pinyin)&&(t.pinyin=!1),e.tableData.push(t)}))}},methods:{disableTextType:function(e){return"string"!=e.type.value&&"object"!=e.type.value&&"longObject"!=e.type.value},getType:function(){var e=this;return this.dataTypeFilter?_.filter(dsf.metadata.dataType,(function(t){return e.dataTypeFilter.indexOf(t.value)>=0})):dsf.metadata.dataType},typeChange:function(e,t){e.type=_.find(dsf.metadata.dataType,(function(e){return e.value==t})),e.textType=this.disableTextType(e)?"normal":e.textType},yes:function(){var e=dsf.mix(!0,[],this.tableData),t=[];return _.each(e,(function(e){delete e.typeValue,t.push(e)})),t}}},s=i,r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"des-value-correction-setting",staticStyle:{height:"100%"}},[a("el-main",[a("fieldset",[a("legend",[e._v("演示")]),a("el-form",{attrs:{model:e.form,size:"mini","label-width":"100px"}},[a("el-form-item",{attrs:{label:"原始值"}},[a("el-input",{model:{value:e.demoStr,callback:function(t){e.demoStr=t},expression:"demoStr"}})],1),a("el-form-item",{attrs:{label:"转换值"}},[a("div",[a("span",[e._v(e._s(e.demo))])])])],1)],1),a("el-form",{attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"规则"}},[a("el-select",{model:{value:e.form.command,callback:function(t){e.$set(e.form,"command",t)},expression:"form.command"}},[e._l(e.ruleOptions,(function(e){return[a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})]}))],2)],1),"padStart"==e.form.command?[a("el-form-item",{attrs:{label:"填充字符"}},[a("el-input",{model:{value:e.form.padStartArgs[0],callback:function(t){e.$set(e.form.padStartArgs,0,t)},expression:"form.padStartArgs[0]"}})],1),a("el-form-item",{attrs:{label:"填充长度"}},[a("el-input-number",{attrs:{min:1,precision:0,controls:!1,"step-strictly":""},model:{value:e.form.padStartArgs[1],callback:function(t){e.$set(e.form.padStartArgs,1,t)},expression:"form.padStartArgs[1]"}})],1)]:e._e(),"padEnd"==e.form.command?[a("el-form-item",{attrs:{label:"填充字符"}},[a("el-input",{model:{value:e.form.padEndArgs[0],callback:function(t){e.$set(e.form.padEndArgs,0,t)},expression:"form.padEndArgs[0]"}})],1),a("el-form-item",{attrs:{label:"填充长度"}},[a("el-input-number",{attrs:{min:1,precision:0,controls:!1,"step-strictly":""},model:{value:e.form.padEndArgs[1],callback:function(t){e.$set(e.form.padEndArgs,1,t)},expression:"form.padEndArgs[1]"}})],1)]:"block"==e.form.command?[a("el-form-item",{attrs:{label:"分割块"}},[a("el-input",{attrs:{placeholder:"多个值(数字)，用分隔，默认3,-1"},model:{value:e.form.blockArgs[0],callback:function(t){e.$set(e.form.blockArgs,0,t)},expression:"form.blockArgs[0]"}})],1),a("el-form-item",{attrs:{label:"分割符"}},[a("el-input",{attrs:{type:"textarea",placeholder:"多个分隔符用换行符分隔，默认空格",autosize:""},model:{value:e.form.blockArgs[1],callback:function(t){e.$set(e.form.blockArgs,1,t)},expression:"form.blockArgs[1]"}})],1)]:e._e()],2)],1)],1)},l=[],i=a(2),s=a.n(i),r={name:"DesValueCorrectionSetting",mixins:[$mixins.propertyDialogSetting],data:function(){return{form:{command:"block",padStartArgs:["-",20],padEndArgs:["-",20],blockArgs:["",""]},ruleOptions:[{label:"左侧补字符",value:"padStart"},{label:"右侧补字符",value:"padEnd"},{label:"大写",value:"upCase"},{label:"小写",value:"lowCase"},{label:"块分割",value:"block"}],demoStr:"TestString"}},computed:{resData:function(){var e=this.form,t={command:e.command},a=e[t.command+"Args"]||[];switch(t.command){case"block":var n=(_.trim(a[0])||"3,3,3,3,3").split(/[,，]/g).map((function(e){return parseInt(e)})),l=(a[1]||" ").split(/\n/g).map((function(e){return e||" "}));a=[n,l];break}return t.args=a,t},demo:function(){var e=this.resData,t=e.command,a=e.args;return dsf.format(t,this.demoStr,a)}},created:function(){if(this.currentData){var e=_.cloneDeep(this.currentData),t=e.command,a=e.args;switch(t){case"block":var n=a[0].join(","),l=a[1].join("\n");this.$set(this.form,"blockArgs",[n,l]);break;case"padStart":this.$set(this.form,"padStartArgs",s()(a));break;case"padEnd":this.$set(this.form,"padEndArgs",s()(a));break}this.$set(this.form,"command",t)}},methods:{yes:function(){return this.resData}}},o=r,c=a(0),u=Object(c["a"])(o,n,l,!1,null,null,null);t["default"]=u.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #eee"},attrs:{width:"40%"}},[a("div",{staticClass:"design-column-edit"},[e.isReload?e._e():a("el-tree",{ref:"tree",attrs:{data:e.treeData,"highlight-current":!0,"expand-on-click-node":!1,"render-after-expand":!0,"default-expand-all":!0,"node-key":"id",props:e.defaultProps},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(" "+e._s(n.label)+" "),a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(l.hide?"[隐藏]":""))]),n.parent.data.isRoot?a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(l.fixed?"[锁定]":""))]):e._e()]),a("span",[a("dsf-button",{attrs:{title:"添加子项",size:"small","btn-style":"icon-text",icon:"hao"},on:{click:function(t){return t.stopPropagation(),e.append(l)}}}),l.isRoot?[a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"}}),a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"}}),a("dsf-button",{staticStyle:{color:"#c0c0c0"},attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"}})]:[a("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(t){return t.stopPropagation(),e.remove(n)}}}),a("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(t){return t.stopPropagation(),e.up(n)}}}),a("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(t){return t.stopPropagation(),e.down(n)}}})]],2)])}}],null,!1,2825849751)})],1)]),a("el-main",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"列名称"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),a("el-form-item",{attrs:{label:"列标识(二次开发用)"}},[a("el-input",{attrs:{disabled:e.form.readOnly},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),a("el-form-item",{attrs:{label:"表头对齐方式"}},[a("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.headerAlign,callback:function(t){e.$set(e.form,"headerAlign",t)},expression:"form.headerAlign"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居右",value:"right"}}),a("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),a("el-form-item",{attrs:{label:"数据对齐方式"}},[a("el-select",{staticClass:"select-full",attrs:{disabled:e.form.readOnly},model:{value:e.form.align,callback:function(t){e.$set(e.form,"align",t)},expression:"form.align"}},[a("el-option",{attrs:{label:"居左",value:"left"}}),a("el-option",{attrs:{label:"居右",value:"right"}}),a("el-option",{attrs:{label:"居中",value:"center"}})],1)],1),e.isSubTable?a("el-form-item",{attrs:{label:"必填标识"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.required,callback:function(t){e.$set(e.form,"required",t)},expression:"form.required"}})],1):e._e(),a("el-form-item",{attrs:{label:"是否隐藏"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.hide,callback:function(t){e.$set(e.form,"hide",t)},expression:"form.hide"}})],1),e.formNode&&e.formNode.parent.data.isRoot?a("el-form-item",{attrs:{label:"是否冻结列"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.fixed,callback:function(t){e.$set(e.form,"fixed",t)},expression:"form.fixed"}}),a("span",{staticStyle:{color:"#f56c6c","line-height":"normal"}},[e._v("* 被冻结的列将会固定在页面最左侧")])],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isSubTable,expression:"!isSubTable"}],attrs:{label:"列头附带筛选"}},[a("el-switch",{attrs:{disabled:e.form.readOnly},model:{value:e.form.isFilter,callback:function(t){e.$set(e.form,"isFilter",t)},expression:"form.isFilter"}})],1),e.form.isFilter?a("el-form-item",{attrs:{label:"筛选字段"}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.filterInfo.field,callback:function(t){e.$set(e.form.filterInfo,"field",t)},expression:"form.filterInfo.field"}},[a("el-option",{attrs:{label:"",value:""}}),e._l(e.tableMetaData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.fieldCaption,value:e.filed}})}))],2)],1):e._e(),e.form.isFilter?a("el-form-item",{attrs:{label:"筛选模式"}},[a("el-select",{attrs:{disabled:e.form.readOnly},model:{value:e.form.filterInfo.type,callback:function(t){e.$set(e.form.filterInfo,"type",t)},expression:"form.filterInfo.type"}},[a("el-option",{attrs:{label:"",value:""}}),a("el-option",{attrs:{label:"枚举",value:"enum"}}),a("el-option",{attrs:{label:"文本",value:"string"}}),a("el-option",{attrs:{label:"数字",value:"number"}}),a("el-option",{attrs:{label:"日期(年月日)",value:"ymd"}}),a("el-option",{attrs:{label:"日期(年月)",value:"ym"}})],1)],1):e._e(),e.form.isFilter&&"enum"==e.form.filterInfo.type?a("el-form-item",{attrs:{label:"枚举数据源"}},[a("dsf-button",{on:{click:function(t){return e.showEmunEditor(e.form.filterInfo)}}},[e._v(" "+e._s(e.form.filterInfo.dataSource?"已设置":"请设置")+" ")])],1):e._e()],1)],1)],1)},l=[],i=a(4),s=a.n(i),r=a(2),o=a.n(r),c=a(1),u=a.n(c),d={name:"verticalSubColumnsEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{isReload:!1,tableData:[],columns:[],data:[],treeData:[{id:dsf.uuid(),label:"表头",isRoot:!0,level:-1,children:[]}],defaultProps:{children:"children",label:"label"},form:null,formNode:null,formDisabled:{label:"",code:"",align:"center",headerAlign:"center",hide:!1,width:"",readOnly:!0,filterInfo:{}},tableMetaData:null}},props:{isSubTable:{type:Boolean,default:!1}},watch:{"form.hide":{handler:function(e){var t=this.form;if(t&&!t.readOnly){if(this.formNode&&t.level>0){var a=this.formNode.parent.data.hide;if(a&&a!=e)return dsf.layer.pc.message("父列为隐藏状态时子列不可设置显示状态",!1),void(t.hide=a)}this.deep(t,(function(t){t.hide=e}))}}},"form.isFilter":{handler:function(e,t){e&&this.loadTableMetaData()},immediate:!0}},created:function(){this.form=this.formDisabled},mounted:function(){if(this.owner){var e,t=this.owner.$$getComponent(),a=dsf.mix(!0,{},t.columns);(e=this.treeData[0].children).push.apply(e,o()(this.getTreeData(a,0,null)))}},methods:{getTreeData:function(e,t,a){var n=this,l=[];return _.each(e,(function(e,a){var i=dsf.mix({},p(),{id:e.id,level:t,code:e.code,label:e.label,columnId:e.columnId,headerAlign:e.headerAlign,align:e.align,hide:e.hide,width:e.width,minWidth:e.minWidth,prefix:e.prefix||"",suffix:e.suffix||"",required:e.required||!1,fixed:e.fixed||!1,isFilter:e.isFilter||!1,filterInfo:e.filterInfo||{},index:a});l.push(i);var s=/\d+_\d+/g;i.id&&!s.test(i.id)||(i.id=dsf.uuid());var r=n.getTreeData(e.children,t+1,i);i.children=r})),l},deep:function(e,t,a,n){var l=this;t&&t(e,a,n),e.children&&_.each(e.children,(function(e,n){l.deep(e,t,a+1,n)}))},append:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.treeData[0],t=e.children.length+1,a=dsf.mix({},p(),{id:dsf.uuid(),label:"新建列",level:e.level+1,hide:e.hide,index:t,width:120});e.children.push(a)},remove:function(e){var t=e.parent;dsf.array.remove(t.data.children,e.data)},up:function(e){f.call(this,e,"up")},down:function(e){f.call(this,e,"down")},nodeClick:function(e,t){e.isRoot?(this.form=this.formDisabled,this.formNode=null):(this.form=e,this.formNode=t,this.formNode.filterInfoCopy=dsf.mix(!0,{},this.formNode.filterInfo))},validate:function(){},getColumnsMap:function(){var e=[];return this.deep(this.treeData[0],(function(t){e.push(t)})),e},getMetaTreeData:function(e,t){var a=this;return s()(u.a.mark((function n(){var l,i,s;return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l=[],"8"!=t){n.next=8;break}return i={rmId:e.rmId},n.next=5,a.$webAPI.getDbSourceFieldsTree(i);case 5:l=n.sent,n.next=13;break;case 8:if("3"!=t){n.next=13;break}return s={namespace:e.at},n.next=12,a.$webAPI.getMetaDataFieldsTree(s);case 12:l=n.sent;case 13:return n.abrupt("return",l);case 14:case"end":return n.stop()}}),n)})))()},getMetaDataListFormTree:function(e){if(e.children){var t=e.children,a=[];return _.each(t,(function(e){1==e.valueAttributes.length?a.push({fieldCaption:e.fieldCaption,filed:e.id}):e.valueAttributes.length>1&&_.each(e.valueAttributes,(function(e){a.push({fieldCaption:e.fieldCaption,filed:e.id})}))})),a}},loadTableMetaData:function(){var e=this;return s()(u.a.mark((function t(){var a,n,l,i,s;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.tableMetaData){t.next=15;break}if(a=e.owner.$$getComponent(),n=a.$getChildMetadataList(),n&&!(n.length<1)){t.next=6;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 6:if(l=n[0].metadata.at,l){t.next=10;break}return dsf.layer.pc.message("请将要展示的元数据拖动到列表中",!1),t.abrupt("return");case 10:return t.next=12,a.$getMetadataTree(n);case 12:i=t.sent,s=e.getMetaDataListFormTree(i[0]),e.tableMetaData=s;case 15:case"end":return t.stop()}}),t)})))()},showEmunEditor:function(e){var t=this;this.$openDialog({content:"DesEnumEditor",width:"900px",params:{currentData:e.dataSource||{code:null,type:"dict"}},btns:[{text:"确定",handler:function(a){if(a.yes){var n=a.yes();t.$set(e,"dataSource",n)}}},{text:"取消"}]})},yes:function(){var e=this.getColumnsMap();this.deep(this.treeData[0]||[],(function(t,a,n){if(t.children&&0!=t.children.length)t.children&&t.children.length>0&&(t.columnId="");else if(!t.columnId){var l=_.map(e,"columnId"),i=1,s="table-column-"+dsf.math.numToEnglishLetter(i);while(l.indexOf(s)>=0)l=_.map(e,"columnId"),s="table-column-"+dsf.math.numToEnglishLetter(++i);t.columnId=s}t.isFilter||(t.filterInfo={}),t.filterInfo&&(dsf.isEqualObject(t.filterInfo,t.filterInfoCopy||{})||(t.filterInfo.isUser=!0),"enum"!=t.filterInfo.type&&delete t.filterInfo.dataSource),t.level=a,t.index=n,t.id||(t.id=dsf.uuid())}),0,0);var t=this.treeData[0].children;return _.forEach(t,(function(e){e.children.length&&dsf.deepForEach(e.children,(function(t){t.fixed=e.fixed}),{isLast:!0})})),t}}};function f(e,t){var a=e.parent,n=a.childNodes.indexOf(e),l="up"==t?n>0:n<=a.childNodes.length-1;if(l){var i="up"==t?n-1:n+1,s=a.childNodes[i];this.$set(a.data.children,i,e.data),this.$set(a.data.children,n,s.data),this.$set(a.childNodes,i,e),this.$set(a.childNodes,n,s)}}function p(){var e={id:"",level:0,label:"",headerAlign:"center",align:"center",columnId:"",children:[],hide:!1,resizable:!1,prefix:"",suffix:"",required:!1,fixed:!1,isFilter:!1,filterInfo:{}};return dsf.mix({},e)}var h=d,m=a(0),b=Object(m["a"])(h,n,l,!1,null,null,null);t["default"]=b.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formula-wrapper"},[a("div",{staticClass:"formula-wrapper-left"},[a("label",{staticClass:"formula-wrapper-title"},[e._v("可用变量")]),a("div",{staticClass:"formula-wrapper-left-variable-box"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"当前表单"}},[a("el-scrollbar",{staticClass:"variable-scroll"},[a("el-tree",{attrs:{data:e.formList,props:e.treeProps,"node-key":"id","expand-on-click-node":!1,"default-expand-all":""},on:{"node-click":e.nodeClickHandler}})],1)],1)],1)],1),a("label",{staticClass:"formula-wrapper-title"},[e._v("函数")]),a("div",{staticClass:"formula-wrapper-left-variable-box-2"},[a("el-scrollbar",{staticClass:"variable-scroll"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",{attrs:{title:"表单函数"}},[a("ul",{staticClass:"func-ul"},e._l(e.formFnList,(function(t){return a("li",{key:t,class:{actvie:t===e.activeMath},on:{click:function(a){return e.appendTag(t,"@")},mouseenter:function(a){return e.mouseenter(t)}}},[e._v(e._s(t))])})),0)]),a("el-collapse-item",{attrs:{title:"数学函数"}},[a("ul",{staticClass:"func-ul"},e._l(e.mathList,(function(t){return a("li",{key:t,class:{actvie:t===e.activeMath},on:{click:function(a){return e.appendTag(t,"@")},mouseenter:function(a){return e.mouseenter(t)}}},[e._v(e._s(t))])})),0)]),a("el-collapse-item",{attrs:{title:"日期函数"}},[a("ul",{staticClass:"func-ul"},e._l(e.dateList,(function(t){return a("li",{key:t,class:{actvie:t===e.activeMath},on:{click:function(a){return e.appendTag(t,"@")},mouseenter:function(a){return e.mouseenter(t)}}},[e._v(e._s(t))])})),0)]),a("el-collapse-item",{attrs:{title:"逻辑函数"}},[a("ul",{staticClass:"func-ul"},e._l(e.logicalList,(function(t){return a("li",{key:t,class:{actvie:t===e.activeMath},on:{click:function(a){return e.appendTag(t,"@")},mouseenter:function(a){return e.mouseenter(t)}}},[e._v(e._s(t))])})),0)]),a("el-collapse-item",{attrs:{title:"文本函数"}},[a("ul",{staticClass:"func-ul"},e._l(e.textList,(function(t){return a("li",{key:t,class:{actvie:t===e.activeMath},on:{click:function(a){return e.appendTag(t,"@")},mouseenter:function(a){return e.mouseenter(t)}}},[e._v(e._s(t))])})),0)]),a("el-collapse-item",{attrs:{title:"身份证函数"}},[a("ul",{staticClass:"func-ul"},e._l(e.idcardList,(function(t){return a("li",{key:t,class:{actvie:t===e.activeMath},on:{click:function(a){return e.appendTag(t,"@")},mouseenter:function(a){return e.mouseenter(t)}}},[e._v(e._s(t))])})),0)]),a("el-collapse-item",{attrs:{title:"数组函数"}},[a("ul",{staticClass:"func-ul"},e._l(e.arrList,(function(t){return a("li",{key:t,class:{actvie:t===e.activeMath},on:{click:function(a){return e.appendTag(t,"@")},mouseenter:function(a){return e.mouseenter(t)}}},[e._v(e._s(t))])})),0)])],1)],1)],1)]),a("div",{staticClass:"formula-wrapper-right"},[e._m(0),a("div",{staticClass:"formula-wrapper-formula edit"},[a("DsfMonacoCustom",{ref:"formulaEditor",attrs:{editText:e.editText,config:e.editorConfig,turnOnBlock:!0,language:"javascript",cancelJsDiagnostics:!0,cancelJsCompletionItems:!0,customBlockStyle:e.customBlockStyle,loadTip:e.loadTip,loadTipCustom:e.loadTipCustom,suggestionSelectCallBack:e.suggestionSelectCallBack,loadHover:e.loadHover}})],1),a("div",[e._v(e._s(e.activeMath))]),a("div",{staticClass:"formula-wrapper-eg-box"},[a("el-scrollbar",{staticClass:"variable-scroll"},[a("div",{staticClass:"eg",domProps:{innerHTML:e._s(e.eg)}})])],1)])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"formula-wrapper-title"},[e._v("公式 "),a("span",[e._v("提示：@：公式快捷键；#：表单快捷键")])])}],i=a(462),s=i["a"],r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-chart-edit"},[a("MonacoEditor",{ref:"editor",attrs:{height:"100%",width:"100%",language:"javascript"},on:{mounted:e.editorLoaded}})],1)},l=[],i=a(463),s=i["a"],r=a(0),o=Object(r["a"])(s,n,l,!1,null,null,null);t["default"]=o.exports},function(e,t,a){"use strict";a.r(t);var n=a(3),l=a.n(n);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var r,o,c={name:"DesPlatformExcelEdit",mixins:[$mixins.propertyDialogSetting],render:function(e){return e("div",{attrs:{id:"excel-edit",class:"data-view-excel-edit"}})},data:function(){return{excelData:[],sheetOptions:{container:"excel-edit",lang:"zh",showinfobar:!1,showsheetbar:!1,showtoolbar:!1,showstatisticBar:!1,sheetFormulaBar:!1,enableAddRow:!1,enableAddBackTop:!1}}},created:function(){var e=this.currentData;if(Array.isArray(e))if(Array.isArray(e[0]))this.excelData=e;else{var t=e[0].rows,a=[];Object.keys(t).forEach((function(e){var n=t[e].cells,l=[];Object.keys(n).forEach((function(e){l.push(n[e].text)})),a.push(l)})),this.excelData=a}},mounted:function(){var e=this;this.$http.importFiles([dsf.url.getWebPath("$/js/libs/luckysheet/plugins/css/pluginsCss.css"),dsf.url.getWebPath("$/js/libs/luckysheet/plugins/plugins.css"),dsf.url.getWebPath("$/js/libs/luckysheet/css/luckysheet.css"),dsf.url.getWebPath("$/js/libs/luckysheet/assets/iconfont/iconfont.css"),dsf.url.getWebPath("$/js/libs/luckysheet/plugins/js/plugin.js"),dsf.url.getWebPath("$/js/libs/luckysheet/luckysheet.umd.js")]).then((function(){var t=window.luckysheet.transToCellData(e.excelData);window.luckysheet.destroy(),window.luckysheet.create(s(s({},e.sheetOptions),{},{data:[{name:"Sheet",row:36,column:18,celldata:t}]}))}))},methods:{yes:function(){var e=window.luckysheet.getLuckysheetfile()[0],t=window.luckysheet.getSheetData(e);t=t.filter((function(e){return e.some((function(e){return!!e}))}));var a=[];return t.forEach((function(e){var t=[];e.forEach((function(e){e&&t.push(e.v)})),a.push(t)})),window.luckysheet.destroy(),a}}},u=c,d=a(0),f=Object(d["a"])(u,r,o,!1,null,null,null);t["default"]=f.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function n(e,t){dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/vuePictureCut/vue-picture-cut.css"),dsf.url.getWebPath("$/js/libs/vuePictureCut/vue-picture-cut.umd.min.js")]).then((function(){window.Vue.use(window["vue-picture-cut"].default),null===e||void 0===e||e(window["vue-picture-cut"])})).catch((function(e){dsf.error(e),dsf.layer.message("加载vuePictureCut脚本出错",!1),null===t||void 0===t||t(e)}))}function l(e,t){dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/vcrontab/vcrontab.umd.min.js")]).then((function(){window.Vue.use(window["vcrontab"].default),null===e||void 0===e||e()})).catch((function(e){dsf.error(e),dsf.layer.message("加载vcrontab脚本出错",!1),null===t||void 0===t||t(e)}))}function i(e,t){dsf.http.importFiles([dsf.url.getWebPath("$/js/libs/quill/quill.core.css"),dsf.url.getWebPath("$/js/libs/quill/quill.snow.css"),dsf.url.getWebPath("$/js/libs/quill/quill.bubble.css"),dsf.url.getWebPath("$/js/libs/quill/quill.js"),dsf.url.getWebPath("$/js/libs/quill/vue-quill-editor.js")]).then((function(){window.Vue.use(window["VueQuillEditor"]),null===e||void 0===e||e()})).catch((function(e){dsf.error(e),dsf.layer.message("加载quill脚本出错",!1),null===t||void 0===t||t(e)}))}a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i}))},,,,,,,function(e,t,a){var n=a(429);function l(e,t){if(null==e)return{};var a,l,i=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(l=0;l<s.length;l++)a=s[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}e.exports=l,e.exports.__esModule=!0,e.exports["default"]=e.exports},function(e,t,a){var n=a(21),l=a(20),i=a(14),s=a(22);function r(e){return n(e)||l(e)||i(e)||s()}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},,,,,,,,,function(e,t,a){"use strict";function n(e){var t=[{value:0,text:"单人办理"},{value:1,text:"会签（多人同时处理）"},{value:2,text:"多人依次处理"},{value:3,text:"抄送（需提交）"},{value:4,text:"抄送（不需提交）"},{value:5,text:"抢办（按人数）"},{value:6,text:"抢办（按比例）"},{value:7,text:"抢办（同部门抢办）"},{value:8,text:"抢办（选人抢办）"}];return void 0!==e?l(t,e):t}function l(e,t){if(t+"")for(var a=0;a<e.length;a++)if(t==e[a].value)return e[a].text||e[a].label}function i(e){var t=[{label:"人工选择",value:0},{label:"默认选中",value:1},{label:"必选",value:2}];return void 0!==e?l(t,e):t}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return f})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return d}));var s=[{name:"开始事件",sort:"event",type:201},{name:"用户任务",sort:"task",type:101},{name:"条件网关",sort:"gateway",type:301},{name:"跳转网关",sort:"gateway",type:302},{name:"子流程任务",sort:"task",type:102},{name:"脚本任务",sort:"task",type:103},{name:"结束事件",sort:"event",type:299}],r=[{name:"用户任务",sort:"task",type:101},{name:"子流程任务",sort:"task",type:102},{name:"脚本任务",sort:"task",type:103},{name:"web服务任务",sort:"task",type:104},{name:"消息任务",sort:"task",type:105},{name:"python任务",sort:"task",type:106},{name:"shell任务",sort:"task",type:107},{name:"SQL任务",sort:"task",type:108},{name:"lua",sort:"task",type:109},{name:"R",sort:"task",type:110},{name:"消息哨兵",sort:"task",type:111},{name:"定时哨兵",sort:"task",type:112},{name:"数据转换",sort:"task",type:113},{name:"数据备份",sort:"task",type:114},{name:"数据还原",sort:"task",type:115},{name:"自由流",sort:"task",type:121}],o=[{name:"开始事件",sort:"event",type:201},{name:"结束事件",sort:"event",type:299}],c=[{name:"条件网关",sort:"gateway",type:301},{name:"跳转网关",sort:"gateway",type:302}],u=[{name:"终止事件",sort:"boundaryEvent",type:401},{name:"超时事件",sort:"boundaryEvent",type:402},{name:"异常事件",sort:"boundaryEvent",type:403}],d=[{name:"关键控制点",sort:"attached",type:"mark"},{name:"风险控制点",sort:"attached",type:"risk"}],f=[{name:"基础",components:s},{name:"任务",components:r},{name:"事件",components:o},{name:"网关",components:c},{name:"边界事件",components:u},{name:"附属属性",components:d}]},,,,,function(e,t,a){e.exports=a.p+"modules/platform/img/101_c_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/101_s.png"},,,,,,,,,,,,function(e,t){function a(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"modules/platform/img/102_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/103_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/104_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/105_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/106_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/107_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/108_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/109_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/201_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/204_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/299_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/301_s.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/302_s.png"},,,,function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(93),_mathematical_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(82),formFnList=[],mathList=[],dateList=[],logicalList=[],textList=[],idcardList=[],arrList=[];Array.from(_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].keys()).forEach((function(e){var t=_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].get(e).type;switch(t){case 1:mathList.push(e);break;case 2:dateList.push(e);break;case 3:logicalList.push(e);break;case 4:textList.push(e);break;case 5:idcardList.push(e);break;case 6:arrList.push(e);break;case 7:formFnList.push(e);break}}));var ISDELETEFILED=/^无效字段\d+$/;__webpack_exports__["a"]={name:"DsfFormula",mixins:[$mixins.propertyDialogSetting],data:function(){return{formFnList:formFnList,mathematical:_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"],mathList:mathList,dateList:dateList,logicalList:logicalList,textList:textList,idcardList:idcardList,arrList:arrList,activeMath:mathList[0],eg:_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].get(mathList[0]).eg,func:"",formList:[],$id2VarMap:{},$var2IdMap:{},deleteFields:{},customFuncList:new Map,treeProps:{label:"label"},editorConfig:{minimap:{enabled:!1},lineNumbers:"off"},editText:"",loadTip:{type:"local",isOpenTip:!0,localLanguage:["javascript"]},loadHover:{isOpen:!0,hoverCb:this.handleHover,language:["javascript"]}}},created:function(){var e=this,t=(this.owner.$$getComponent().metadata_fullcode,[]),a={},n={};dsf.designer.recursionLayoutTree(this.designer.$refs.viewProxy,null,null,(function(l,i,s,r){if(l.isFormControl&&l.designId!=e.owner.designId){var o,c={id:l.designId,children:[]};if(l.$list){var u=_.filter(t,(function(e){return e.id==l.$list.designId}));if(u.length>0){var d=u[0];c.name=d.name+"."+(l.label||l.caption),c.showName="[".concat(d.name,"]").concat(l.label?l.label+"(".concat(l.caption,")"):l.caption),c.subName=d.name,c.label=c.name,c.value="^^"+l.designId+"^^",u[0].children.push(c),a[c.id]=c,n[c.showName]=c.id}}else c.name=l.label||l.caption,c.showName="".concat(l.label?l.label+"(".concat(l.caption,")"):l.caption),c.label=c.name,c.value="^^"+l.designId+"^^",t.push(c),a[c.id]=c,n[c.showName]=c.id;(null===l||void 0===l||null===(o=l.metadata)||void 0===o||null===(o=o.valueAttributes)||void 0===o?void 0:o.length)>1&&_.each(l.metadata.valueAttributes,(function(e){var t={id:c.id+"."+e.code,name:c.name+"-"+e.name,label:e.name,value:"^^"+c.id+"."+e.code+"^^"};t.showName="".concat(c.subName?"[".concat(c.subName,"]"):"").concat(t.name,"(").concat(l.caption,")"),c.children.push(t),a[t.id]=t,n[t.showName]=t.id}))}})),this.formList=t,this.$id2VarMap=a,this.$var2IdMap=n},mounted:function(){var e=this.owner.$$getComponent().formula,t=_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].entries()).reduce((function(e,t){var a=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(t,1),n=a[0];return e.push(n),e}),[]),a=Object(_utils__WEBPACK_IMPORTED_MODULE_2__["serializeFormula"])(e.formula,this.$id2VarMap,t),n=a.deleteFields,l=a.formulaCodes;this.editText=l,this.deleteFields=n},methods:{handleHover:function(e,t){for(var a=e.getLineDecorations(t.lineNumber,"",!0),n=null,l={contents:[]},i=0,s=a.length;i<s;i++){var r=a[i],o=r.options.inlineClassName;if(o&&/^editor-/.test(o)&&r.range.containsPosition(t)){n=r.options.description;break}}if(n)if("function"===n.type){var c=n,u=c.title,d=c.moduleName,f=c.eg;l.contents=[{value:"**所属函数**: ".concat(d)},{value:"**函数中文名**: ".concat(u)},{value:"**解释**"},{value:"```"+f.replace(/\s+\<br\/\>/g,"")+"```"}]}else{var p=n,h=p.value,m=p.id;if(ISDELETEFILED.test(h)){var b="\r警告: \r当前表单字段已经被删除,请重新更换其他字段\n";l.contents=[{value:"**所属组件**: ~~".concat(m.split(".")[0],"~~")},{value:"```"+b+"```"}]}else l.contents=[{value:"**所属组件**: ".concat(m.split(".")[0])}]}return l},nodeClickHandler:function(e){this.appendTag(e,"#")},openCustom:function openCustom(){var _this2=this;this.$openDialog({title:"自定义公式(es5)",content:"customFuncEdit",width:"500",height:"300",overflow:"hidden hidden",params:{functionContainer:this.func},btns:[{text:"确定",handler:function handler(res){var fnstring=res.yes();_this2.func=fnstring;var matchArrs=fnstring.match(/function\s+?.+?\(/g);_this2.customFuncList=new Map,matchArrs&&matchArrs.forEach((function(it){it.match(/function(\s+?.+?)\(/g),_this2.customFuncList.set(RegExp.$1.trim(),{title:"自定义函数",label:RegExp.$1.trim(),reg:eval("/".concat(RegExp.$1.trim(),"/g")),strategy:RegExp.$1.trim(),eg:"",type:-1})}))}}]})},appendTag:function(e,t){if("#"===t)this.$refs.formulaEditor.addCode({value:e.showName,id:e.id,type:"fromField"},"focus",{isAddBlock:!0});else{var a=_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].get(e),n=a.title,l=a.moduleName,i=a.eg;this.$refs.formulaEditor.addCode({value:e,id:e,type:"function",title:n,moduleName:l,eg:i},"focus",{isAddBlock:!0,afterContent:{value:"()",position:-1}})}},customBlockStyle:function(e){var t=dsf.isString(e)?e:e.value,a="",n={};if(_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].has(t)){a="editor-custom-function";var l=_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].get(t),i=l.title,s=l.moduleName,r=l.eg;n={value:t,type:"function",id:t,title:i,moduleName:s,eg:r}}else{var o=ISDELETEFILED.test(t);a=o?"editor-custom-form__delete":"editor-custom-form",n={value:t,type:"fromField",id:o?this.deleteFields[t]:this.$var2IdMap[t]}}return{inlineClassName:a,stickiness:monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,description:n}},loadTipCustom:function(e,t,a){var n=[],l="",i=_.lastIndexOf(a,"@"),s=_.lastIndexOf(a,"#");return i>s?l="@":i<s&&(l="#"),"@"===l?_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].forEach((function(e,a){n.push({insertText:"​".concat(a,"​()"),kind:1,label:a,detail:e.title,filterText:"@-".concat(a),range:new monaco.Range(1,t.column-1,1,t.column),command:{id:"editor.suggest"}})})):"#"===l&&Object.values(this.$id2VarMap).forEach((function(e){n.push({insertText:"​".concat(e.showName,"​"),kind:14,label:e.name,detail:e.showName,filterText:"#-".concat(e.name),range:new monaco.Range(1,t.column-1,1,t.column),command:{id:"editor.suggest"}})})),{suggestions:n}},suggestionSelectCallBack:function(){this.$refs.formulaEditor.handleParseZero2decoration()},mouseenter:function(e){var t=_mathematical_js__WEBPACK_IMPORTED_MODULE_3__["default"].get(e).eg;this.activeMath=e,this.eg=t},yes:function(){var e=this.$refs.formulaEditor;e.handleParseZero2decoration();var t=e.editerInstance,a=[],n=e.handleGetAllDeracations();_.forEach(n,(function(e){var t,n=(null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.description)||{},l=n.value,i=n.id,s=n.type;l&&"fromField"===s&&a.push({range:e.range,text:"{{^^".concat(i,"^^}}"),forceMoveMarkers:!0})})),t.executeEdits("",a);var l=t.getValue().replace(/\u200b/g,"");return{formula:l,func:this.func}}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__["a"]={name:"platformCustomChartEdit",mixins:[$mixins.propertyDialogSetting],data:function(){return{wholeOptions:{},tmp:""}},created:function(){var e=dsf.mix(!0,{},this.currentData),t=this.owner.chartString;e=t||this.objectTostring(e,!0);var a="(function () {\n  return ".concat(e,"\n})()");this.tmp=a},methods:{objectTostring:function(e,t){var a=this;if(null===e)return"null,\n";if("string"===typeof e)return"'".concat(e,"',\n");if("function"===typeof e)return e.toString()+",";if(Array.isArray(e)){var n="[\n          ";return e.forEach((function(e){n+="".concat(a.objectTostring(e))})),n+="]","".concat(n,",\n")}if("object"===_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default()(e)){var l="{\n          ";return Object.keys(e).forEach((function(t){l+="".concat(t,":"),l+=a.objectTostring(e[t])})),l+="}","".concat(l,t?"\n":",\n")}return"".concat(e,",\n")},yes:function yes(){var code=this.$refs["editor"].getContent();return this.wholeOptions=eval(code),this.dealChartOption(this.owner,this.wholeOptions),this.wholeOptions},editorLoaded:function(){var e=this;this.$nextTick((function(){var t=e.tmp,a=e.$refs["editor"].editor;e.$refs["editor"].setContent(t),setTimeout((function(){a.trigger("anyString","editor.action.formatDocument")}),100)}))},dealChartOption:function(e,t){e.chartString=this.objectTostring(t,!0)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n={"./101_c_s.png":416,"./101_s.png":417,"./102_s.png":446,"./103_s.png":447,"./104_s.png":448,"./105_s.png":449,"./106_s.png":450,"./107_s.png":451,"./108_s.png":452,"./109_s.png":453,"./201_s.png":454,"./204_s.png":455,"./299_s.png":456,"./301_s.png":457,"./302_s.png":458};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=i,e.exports=l,l.id=860},function(e,t,a){var n={"./icon-b-file1.png":862,"./icon-b-file2.png":863,"./icon-b-file3.png":864,"./icon-b-file4.png":865,"./icon-b-file5.png":866,"./icon-b-file6.png":867,"./icon-b-lou1.png":868,"./icon-b-lou2.png":869,"./icon-b-lou3.png":870,"./icon-b-lou4.png":871,"./icon-b-lou5.png":872,"./icon-b-lou6.png":873,"./icon-b-lou7.png":874,"./icon-b-lou8.png":875,"./icon-b-lou9.png":876,"./icon-b-sj1.png":877,"./icon-b-sj2.png":878,"./icon-b-sj3.png":879,"./icon-b-sj4.png":880,"./icon-b-sj5.png":881,"./icon-b-sj6.png":882,"./icon-b-user1.png":883,"./icon-b-user2.png":884,"./icon-b-user3.png":885,"./icon-b-user4.png":886,"./icon-b-user5.png":887,"./icon-b-user6.png":888,"./icon-b-user7.png":889,"./icon-b-user8.png":890,"./icon-b-user9.png":891,"./icon-branchid.png":892,"./icon-class.png":893,"./icon-group.png":894,"./icon-s-file1.png":895,"./icon-s-file2.png":896,"./icon-s-file3.png":897,"./icon-s-file4.png":898,"./icon-s-file5.png":899,"./icon-s-file6.png":900,"./icon-s-lou1.png":901,"./icon-s-lou2.png":902,"./icon-s-lou3.png":903,"./icon-s-lou4.png":904,"./icon-s-lou5.png":905,"./icon-s-lou6.png":906,"./icon-s-lou7.png":907,"./icon-s-lou8.png":908,"./icon-s-lou9.png":909,"./icon-s-sj1.png":910,"./icon-s-sj2.png":911,"./icon-s-sj3.png":912,"./icon-s-sj4.png":913,"./icon-s-sj5.png":914,"./icon-s-sj6.png":915,"./icon-s-user1.png":916,"./icon-s-user2.png":917,"./icon-s-user3.png":918,"./icon-s-user4.png":919,"./icon-s-user5.png":920,"./icon-s-user6.png":921,"./icon-s-user7.png":922,"./icon-s-user8.png":923,"./icon-s-user9.png":924,"./icon-studist.png":925,"./studist.png":926};function l(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=i,e.exports=l,l.id=861},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-file1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-file2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-file3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-file4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-file5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-file6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou7.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou8.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-lou9.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-sj1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-sj2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-sj3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-sj4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-sj5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-sj6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user7.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user8.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-b-user9.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-branchid.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-class.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-group.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-file1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-file2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-file3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-file4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-file5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-file6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou7.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou8.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-lou9.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-sj1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-sj2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-sj3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-sj4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-sj5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-sj6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user1.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user2.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user3.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user4.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user5.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user6.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user7.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user8.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-s-user9.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/icon-studist.png"},function(e,t,a){e.exports=a.p+"modules/platform/img/studist.png"}])]);
//# sourceMappingURL=../../../smap/platform/dsf-platform.platform_designer_pd_setting.js.map