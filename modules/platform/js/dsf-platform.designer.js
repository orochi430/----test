/*!
 * Name: @dsf/cli-platform
 * Version: 5.17.0-alpha.5
 * Description: 平台基础包
 * BuildTime: 2024/6/19 17:49:40
*/
(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("platform",[],e):"object"===typeof exports?exports["platform"]=e():t["platform"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){function e(e){for(var n,s,a=e[0],o=e[1],r=0,l=[];r<a.length;r++)s=a[r],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&l.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(l.length)l.shift()()}var n={},i={2:0};function s(t){return a.p+"modules/platform/js/dsf-platform."+({7:"platform_common_touch-emulator",8:"platform_designer_pd_setting",9:"platform_designer_router_flow",10:"platform_designer_router_other",11:"platform_designer_router_preview",32:"platform_page_doc_content",72:"vendors~platform_designer_router_flow",73:"vendors~platform_designer_router_other"}[t]||t)+".js?_t=1718790580240"}function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,s){n=i[t]=[e,s]}));e.push(n[2]=o);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=s(t);var u=new Error;r=function(e){l.onerror=l.onload=null,clearTimeout(c);var n=i[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",u.name="ChunkLoadError",u.type=s,u.request=a,n[1](u)}i[t]=void 0}};var c=setTimeout((function(){r({type:"timeout",target:l})}),12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(e)},a.m=t,a.c=n,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var o=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]=("undefined"!==typeof self?self:this)["webpackJsonpplatform"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=r;return a(a.s=343)}({0:function(t,e,n){"use strict";function i(t,e,n,i,s,a,o,r){var l,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=l):s&&(l=r?function(){s.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:u}}n.d(e,"a",(function(){return i}))},1:function(t,e,n){var i=n(27)();t.exports=i;try{regeneratorRuntime=i}catch(s){"object"===typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},14:function(t,e,n){var i=n(15);function s(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},15:function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},16:function(t,e,n){var i=n(9)["default"],s=n(25);function a(t){var e=s(t,"string");return"symbol"==i(e)?e:String(e)}t.exports=a,t.exports.__esModule=!0,t.exports["default"]=t.exports},19:function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},s=0;s<e.length;s++){var a=e[s],o=a[0],r=a[1],l=a[2],u=a[3],c={id:t+":"+s,css:r,media:l,sourceMap:u};i[o]?i[o].parts.push(c):n.push(i[o]={id:o,parts:[c]})}return n}n.r(e),n.d(e,"default",(function(){return _}));var s="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=s&&(document.head||document.getElementsByTagName("head")[0]),r=null,l=0,u=!1,c=function(){},d=null,p="data-vue-ssr-id",h="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function _(t,e,n,s){u=n,d=s||{};var o=i(t,e);return f(o),function(e){for(var n=[],s=0;s<o.length;s++){var r=o[s],l=a[r.id];l.refs--,n.push(l)}e?(o=i(t,e),f(o)):o=[];for(s=0;s<n.length;s++){l=n[s];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete a[l.id]}}}}function f(t){for(var e=0;e<t.length;e++){var n=t[e],i=a[n.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](n.parts[s]);for(;s<n.parts.length;s++)i.parts.push(v(n.parts[s]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var o=[];for(s=0;s<n.parts.length;s++)o.push(v(n.parts[s]));a[n.id]={id:n.id,refs:1,parts:o}}}}function m(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function v(t){var e,n,i=document.querySelector("style["+p+'~="'+t.id+'"]');if(i){if(u)return c;i.parentNode.removeChild(i)}if(h){var s=l++;i=r||(r=m()),e=y.bind(null,i,s,!1),n=y.bind(null,i,s,!0)}else i=m(),e=b.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function y(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,s);else{var a=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function b(t,e){var n=e.css,i=e.media,s=e.sourceMap;if(i&&t.setAttribute("media",i),d.ssrId&&t.setAttribute(p,e.id),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},2:function(t,e,n){var i=n(23),s=n(20),a=n(14),o=n(24);function r(t){return i(t)||s(t)||a(t)||o()}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},20:function(t,e){function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},21:function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},22:function(t,e){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},23:function(t,e,n){var i=n(15);function s(t){if(Array.isArray(t))return i(t)}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},24:function(t,e){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},25:function(t,e,n){var i=n(9)["default"];function s(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},26:function(t,e){function n(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,s,a,o,r=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(r.push(i.value),r.length!==e);l=!0);}catch(t){u=!0,s=t}finally{try{if(!l&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(u)throw s}}return r}}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports},27:function(t,e,n){var i=n(9)["default"];function s(){"use strict";t.exports=s=function(){return n},t.exports.__esModule=!0,t.exports["default"]=t.exports;var e,n={},a=Object.prototype,o=a.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function p(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var s=e&&e.prototype instanceof b?e:b,a=Object.create(s.prototype),o=new N(i||[]);return r(a,"_invoke",{value:D(t,n,o)}),a}function _(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function b(){}function w(){}function x(){}var k={};p(k,u,(function(){return this}));var C=Object.getPrototypeOf,$=C&&C(C(R([])));$&&$!==a&&o.call($,u)&&(k=$);var S=x.prototype=b.prototype=Object.create(k);function T(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(s,a,r,l){var u=_(t[s],t,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==i(d)&&o.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,r,l)}),(function(t){n("throw",t,r,l)})):e.resolve(d).then((function(t){c.value=t,r(c)}),(function(t){return n("throw",t,r,l)}))}l(u.arg)}var s;r(this,"_invoke",{value:function(t,i){function a(){return new e((function(e,s){n(t,i,e,s)}))}return s=s?s.then(a,a):a()}})}function D(t,n,i){var s=f;return function(a,o){if(s===v)throw new Error("Generator is already running");if(s===g){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var r=i.delegate;if(r){var l=O(r,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===f)throw s=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=v;var u=_(t,n,i);if("normal"===u.type){if(s=i.done?g:m,u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(s=g,i.method="throw",i.arg=u.arg)}}}function O(t,n){var i=n.method,s=t.iterator[i];if(s===e)return n.delegate=null,"throw"===i&&t.iterator["return"]&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var a=_(s,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,a=function n(){for(;++s<t.length;)if(o.call(t,s))return n.value=t[s],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return w.prototype=x,r(S,"constructor",{value:x,configurable:!0}),r(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,d,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,p(t,d,"GeneratorFunction")),t.prototype=Object.create(S),t},n.awrap=function(t){return{__await:t}},T(E.prototype),p(E.prototype,c,(function(){return this})),n.AsyncIterator=E,n.async=function(t,e,i,s,a){void 0===a&&(a=Promise);var o=new E(h(t,e,i,s),a);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(S),p(S,d,"Generator"),p(S,u,(function(){return this})),p(S,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},n.values=R,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(i,s){return r.type="throw",r.arg=t,n.next=i,s&&(n.method="next",n.arg=e),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],r=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=e,s?(this.method="next",this.next=s.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var s=i.arg;L(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:R(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),y}},n}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},3:function(t,e,n){var i=n(16);function s(t,e,n){return e=i(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},31:function(t,e,n){"use strict";n.r(e),n.d(e,"install",(function(){return s}));var i=n(36);function s(t){for(var e in i["default"])t.component(e,i["default"][e])}e["default"]=s},343:function(t,e,n){t.exports=n(350)},344:function(t,e,n){(function(e){(function(e,n){t.exports=n()})("undefined"!==typeof self?self:"undefined"!==typeof windows&&window,(function(){return function(){"use strict";var t=[function(t,e,n){var i=n(1),s=n(16),a=n(19);function o(t,e,n,o){return n=n||i,o=o||s,a(t,e,n,o)}o.defaultOptions=a.defaultOptions,t.exports.js=i,t.exports.css=s,t.exports.html=o},function(t,e,n){var i=n(2).Beautifier,s=n(6).Options;function a(t,e){var n=new i(t,e);return n.beautify()}t.exports=a,t.exports.defaultOptions=function(){return new s}},function(t,e,n){var i=n(3).Output,s=n(4).Token,a=n(5),o=n(6).Options,r=n(8).Tokenizer,l=n(8).line_starters,u=n(8).positionable_operators,c=n(8).TOKEN;function d(t,e){return-1!==e.indexOf(t)}function p(t){return t.replace(/^\s+/g,"")}function h(t){for(var e={},n=0;n<t.length;n++)e[t[n].replace(/-/g,"_")]=t[n];return e}function _(t,e){return t&&t.type===c.RESERVED&&t.text===e}function f(t,e){return t&&t.type===c.RESERVED&&d(t.text,e)}var m=["case","return","do","if","throw","else","await","break","continue","async"],v=["before-newline","after-newline","preserve-newline"],g=h(v),y=[g.before_newline,g.preserve_newline],b={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function w(t,e){e.multiline_frame||e.mode===b.ForInitializer||e.mode===b.Conditional||t.remove_indent(e.start_line_index)}function x(t){t=t.replace(a.allLineBreaks,"\n");var e=[],n=t.indexOf("\n");while(-1!==n)e.push(t.substring(0,n)),t=t.substring(n+1),n=t.indexOf("\n");return t.length&&e.push(t),e}function k(t){return t===b.ArrayLiteral}function C(t){return d(t,[b.Expression,b.ForInitializer,b.Conditional])}function $(t,e){for(var n=0;n<t.length;n++){var i=t[n].trim();if(i.charAt(0)!==e)return!1}return!0}function S(t,e){for(var n,i=0,s=t.length;i<s;i++)if(n=t[i],n&&0!==n.indexOf(e))return!1;return!0}function T(t,e){e=e||{},this._source_text=t||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new o(e)}T.prototype.create_flags=function(t,e){var n=0;t&&(n=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>n&&(n=t.line_indent_level));var i={mode:e,parent:t,last_token:t?t.last_token:new s(c.START_BLOCK,""),last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:n,alignment:0,line_indent_level:t?t.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0};return i},T.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new i(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(b.BlockStatement);var n=new r(t,this._options);return this._tokens=n.tokenize(),t},T.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t,e=this._reset(this._source_text),n=this._options.eol;"auto"===this._options.eol&&(n="\n",e&&a.lineBreak.test(e||"")&&(n=e.match(a.lineBreak)[0]));var i=this._tokens.next();while(i)this.handle_token(i),this._last_last_text=this._flags.last_token.text,this._flags.last_token=i,i=this._tokens.next();return t=this._output.get_code(n),t},T.prototype.handle_token=function(t,e){t.type===c.START_EXPR?this.handle_start_expr(t):t.type===c.END_EXPR?this.handle_end_expr(t):t.type===c.START_BLOCK?this.handle_start_block(t):t.type===c.END_BLOCK?this.handle_end_block(t):t.type===c.WORD||t.type===c.RESERVED?this.handle_word(t):t.type===c.SEMICOLON?this.handle_semicolon(t):t.type===c.STRING?this.handle_string(t):t.type===c.EQUALS?this.handle_equals(t):t.type===c.OPERATOR?this.handle_operator(t):t.type===c.COMMA?this.handle_comma(t):t.type===c.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===c.COMMENT?this.handle_comment(t,e):t.type===c.DOT?this.handle_dot(t):t.type===c.EOF?this.handle_eof(t):(t.type,c.UNKNOWN,this.handle_unknown(t,e))},T.prototype.handle_whitespace_and_comments=function(t,e){var n=t.newlines,i=this._options.keep_array_indentation&&k(this._flags.mode);if(t.comments_before){var s=t.comments_before.next();while(s)this.handle_whitespace_and_comments(s,e),this.handle_token(s,e),s=t.comments_before.next()}if(i)for(var a=0;a<n;a+=1)this.print_newline(a>0,e);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,e);for(var o=1;o<n;o+=1)this.print_newline(!0,e)}};var E=["async","break","continue","return","throw","yield"];T.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=void 0!==e&&e,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&t.newlines||e,i=d(this._flags.last_token.text,u)||d(t.text,u);if(i){var s=d(this._flags.last_token.text,u)&&d(this._options.operator_position,y)||d(t.text,u);n=n&&s}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(f(this._flags.last_token,E))return;this._output.set_wrap_point()}}},T.prototype.print_newline=function(t,e){if(!e&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==c.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text)){var n=this._tokens.peek();while(this._flags.mode===b.Statement&&(!this._flags.if_block||!_(n,"else"))&&!this._flags.do_block)this.restore_mode()}this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)},T.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&("["===t.text||k(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},T.prototype.print_token=function(t){if(this._output.raw)this._output.add_raw_token(t);else{if(this._options.comma_first&&t.previous&&t.previous.type===c.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},T.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},T.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},T.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},T.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===b.Statement&&w(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},T.prototype.start_of_object_property=function(){return this._flags.parent.mode===b.ObjectLiteral&&this._flags.mode===b.Statement&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"]))},T.prototype.start_of_statement=function(t){var e=!1;return e=e||f(this._flags.last_token,["var","let","const"])&&t.type===c.WORD,e=e||_(this._flags.last_token,"do"),e=e||!(this._flags.parent.mode===b.ObjectLiteral&&this._flags.mode===b.Statement)&&f(this._flags.last_token,E)&&!t.newlines,e=e||_(this._flags.last_token,"else")&&!(_(t,"if")&&!t.comments_before),e=e||this._flags.last_token.type===c.END_EXPR&&(this._previous_flags.mode===b.ForInitializer||this._previous_flags.mode===b.Conditional),e=e||this._flags.last_token.type===c.WORD&&this._flags.mode===b.BlockStatement&&!this._flags.in_case&&!("--"===t.text||"++"===t.text)&&"function"!==this._last_last_text&&t.type!==c.WORD&&t.type!==c.RESERVED,e=e||this._flags.mode===b.ObjectLiteral&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||f(this._flags.last_token,["get","set"])),!!e&&(this.set_mode(b.Statement),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,f(t,["do","for","if","while"])),!0)},T.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=b.Expression;if("["===t.text){if(this._flags.last_token.type===c.WORD||")"===this._flags.last_token.text)return f(this._flags.last_token,l)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));e=b.ArrayLiteral,k(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),d(this._flags.last_token.type,[c.START_EXPR,c.END_EXPR,c.WORD,c.OPERATOR,c.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===c.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,e=b.ForInitializer):d(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,e=b.Conditional):d(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===t.whitespace_before?this._output.space_before_token=!1:(d(this._flags.last_token.text,l)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===c.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var i=this._tokens.peek(-4);f(n,["async","function"])||"*"===n.text&&f(i,["async","function"])?this._output.space_before_token=!0:this._flags.mode===b.ObjectLiteral?"{"!==n.text&&","!==n.text&&("*"!==n.text||"{"!==i.text&&","!==i.text)||(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===c.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===b.ObjectLiteral&&d(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===c.START_BLOCK?this.print_newline():this._flags.last_token.type!==c.END_EXPR&&this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==c.COMMA||this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},T.prototype.handle_end_expr=function(t){while(this._flags.mode===b.Statement)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,"]"===t.text&&k(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==c.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(t),this.restore_mode(),w(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===b.Conditional&&(this._previous_flags.mode=b.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},T.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===c.END_EXPR?(this.set_mode(b.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(b.BlockStatement):n&&(d(n.text,[":",","])&&d(e.type,[c.STRING,c.WORD,c.RESERVED])||d(e.text,["get","set","..."])&&d(n.type,[c.WORD,c.RESERVED]))?d(this._last_last_text,["class","interface"])&&!d(n.text,[":",","])?this.set_mode(b.BlockStatement):this.set_mode(b.ObjectLiteral):this._flags.last_token.type===c.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(b.BlockStatement):d(this._flags.last_token.type,[c.EQUALS,c.START_EXPR,c.COMMA,c.OPERATOR])||f(this._flags.last_token,["return","throw","import","default"])?this.set_mode(b.ObjectLiteral):this.set_mode(b.BlockStatement),this._flags.last_token&&f(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var i=!e.comments_before&&"}"===e.text,s=i&&"function"===this._flags.last_word&&this._flags.last_token.type===c.END_EXPR;if(this._options.brace_preserve_inline){var a=0,o=null;this._flags.inline_frame=!0;do{if(a+=1,o=this._tokens.peek(a-1),o.newlines){this._flags.inline_frame=!1;break}}while(o.type!==c.EOF&&(o.type!==c.END_BLOCK||o.opened!==t))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==c.OPERATOR&&(s||this._flags.last_token.type===c.EQUALS||f(this._flags.last_token,m)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!k(this._previous_flags.mode)||this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.COMMA||((this._flags.last_token.type===c.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==c.OPERATOR&&this._flags.last_token.type!==c.START_EXPR&&(d(this._flags.last_token.type,[c.START_BLOCK,c.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(t),this.indent(),i||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},T.prototype.handle_end_block=function(t){this.handle_whitespace_and_comments(t);while(this._flags.mode===b.Statement)this.restore_mode();var e=this._flags.last_token.type===c.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:"expand"===this._options.brace_style?e||this.print_newline():e||(k(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)},T.prototype.handle_word=function(t){if(t.type===c.RESERVED)if(d(t.text,["set","get"])&&this._flags.mode!==b.ObjectLiteral)t.type=c.WORD;else if("import"===t.text&&d(this._tokens.peek().text,["(","."]))t.type=c.WORD;else if(d(t.text,["as","from"])&&!this._flags.import_block)t.type=c.WORD;else if(this._flags.mode===b.ObjectLiteral){var e=this._tokens.peek();":"===e.text&&(t.type=c.WORD)}if(this.start_of_statement(t)?f(this._flags.last_token,["var","let","const"])&&t.type===c.WORD&&(this._flags.declaration_statement=!0):!t.newlines||C(this._flags.mode)||this._flags.last_token.type===c.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===c.EQUALS||!this._options.preserve_newlines&&f(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(t):(this.handle_whitespace_and_comments(t),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(_(t,"while"))return this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&_(t,"else"))this._flags.else_block=!0;else{while(this._flags.mode===b.Statement)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&f(t,["case","default"]))return this.print_newline(),this._flags.case_block||!this._flags.case_body&&!this._options.jslint_happy||this.deindent(),this._flags.case_body=!1,this.print_token(t),void(this._flags.in_case=!0);if(this._flags.last_token.type!==c.COMMA&&this._flags.last_token.type!==c.START_EXPR&&this._flags.last_token.type!==c.EQUALS&&this._flags.last_token.type!==c.OPERATOR||this.start_of_object_property()||d(this._flags.last_token.text,["+","-"])&&":"===this._last_last_text&&this._flags.parent.mode===b.ObjectLiteral||this.allow_wrap_or_preserved_newline(t),_(t,"function"))return(d(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!d(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==c.OPERATOR)&&(this._output.just_added_blankline()||t.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD?f(this._flags.last_token,["get","set","new","export"])||f(this._flags.last_token,E)||_(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===c.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!C(this._flags.mode)&&!k(this._flags.mode))&&this.print_newline(),this.print_token(t),void(this._flags.last_word=t.text);var n="NONE";if(this._flags.last_token.type===c.END_BLOCK?this._previous_flags.inline_frame?n="SPACE":f(t,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines?n="NEWLINE":(n="SPACE",this._output.space_before_token=!0):n="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&this._flags.mode===b.BlockStatement?n="NEWLINE":this._flags.last_token.type===c.SEMICOLON&&C(this._flags.mode)?n="SPACE":this._flags.last_token.type===c.STRING?n="NEWLINE":this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||"*"===this._flags.last_token.text&&(d(this._last_last_text,["function","yield"])||this._flags.mode===b.ObjectLiteral&&d(this._last_last_text,["{",","]))?n="SPACE":this._flags.last_token.type===c.START_BLOCK?n=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===c.END_EXPR&&(this._output.space_before_token=!0,n="NEWLINE"),f(t,l)&&")"!==this._flags.last_token.text&&(n=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),f(t,["else","catch","finally"]))if((this._flags.last_token.type!==c.END_BLOCK||this._previous_flags.mode!==b.BlockStatement||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var i=this._output.current_line;"}"!==i.last()&&this.print_newline(),this._output.space_before_token=!0}else"NEWLINE"===n?f(this._flags.last_token,m)||"declare"===this._flags.last_token.text&&f(t,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==c.END_EXPR?this._flags.last_token.type===c.START_EXPR&&f(t,["var","let","const"])||":"===this._flags.last_token.text||(_(t,"if")&&_(t.previous,"else")?this._output.space_before_token=!0:this.print_newline()):f(t,l)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&k(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===n&&(this._output.space_before_token=!0);!t.previous||t.previous.type!==c.WORD&&t.previous.type!==c.RESERVED||(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===c.RESERVED&&("do"===t.text?this._flags.do_block=!0:"if"===t.text?this._flags.if_block=!0:"import"===t.text?this._flags.import_block=!0:this._flags.import_block&&_(t,"from")&&(this._flags.import_block=!1))},T.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);var e=this._tokens.peek();while(this._flags.mode===b.Statement&&(!this._flags.if_block||!_(e,"else"))&&!this._flags.do_block)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)},T.prototype.handle_string=function(t){(!t.text.startsWith("`")||0!==t.newlines||""!==t.whitespace_before||")"!==t.previous.text&&this._flags.last_token.type!==c.WORD)&&(this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===c.RESERVED||this._flags.last_token.type===c.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===c.COMMA||this._flags.last_token.type===c.START_EXPR||this._flags.last_token.type===c.EQUALS||this._flags.last_token.type===c.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):!t.text.startsWith("`")||this._flags.last_token.type!==c.END_EXPR||"]"!==t.previous.text&&")"!==t.previous.text||0!==t.newlines?this.print_newline():this._output.space_before_token=!0)),this.print_token(t)},T.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0},T.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(C(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===b.ObjectLiteral||this._flags.mode===b.Statement&&this._flags.parent.mode===b.ObjectLiteral?(this._flags.mode===b.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)},T.prototype.handle_operator=function(t){var e="*"===t.text&&(f(this._flags.last_token,["function","yield"])||d(this._flags.last_token.type,[c.START_BLOCK,c.COMMA,c.END_BLOCK,c.SEMICOLON])),n=d(t.text,["-","+"])&&(d(this._flags.last_token.type,[c.START_BLOCK,c.START_EXPR,c.EQUALS,c.OPERATOR])||d(this._flags.last_token.text,l)||","===this._flags.last_token.text);if(this.start_of_statement(t));else{var i=!e;this.handle_whitespace_and_comments(t,i)}if("*"!==t.text||this._flags.last_token.type!==c.DOT)if("::"!==t.text)if(d(t.text,["-","+"])&&this.start_of_object_property())this.print_token(t);else{if(this._flags.last_token.type===c.OPERATOR&&d(this._options.operator_position,y)&&this.allow_wrap_or_preserved_newline(t),":"===t.text&&this._flags.in_case)return this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==c.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0));var s=!0,a=!0,o=!1;if(":"===t.text?0===this._flags.ternary_depth?s=!1:(this._flags.ternary_depth-=1,o=!0):"?"===t.text&&(this._flags.ternary_depth+=1),!n&&!e&&this._options.preserve_newlines&&d(t.text,u)){var r=":"===t.text,p=r&&o,h=r&&!o;switch(this._options.operator_position){case g.before_newline:return this._output.space_before_token=!h,this.print_token(t),r&&!p||this.allow_wrap_or_preserved_newline(t),void(this._output.space_before_token=!0);case g.after_newline:return this._output.space_before_token=!0,!r||p?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),void(this._output.space_before_token=!0);case g.preserve_newline:return h||this.allow_wrap_or_preserved_newline(t),s=!(this._output.just_added_newline()||h),this._output.space_before_token=s,this.print_token(t),void(this._output.space_before_token=!0)}}if(e){this.allow_wrap_or_preserved_newline(t),s=!1;var _=this._tokens.peek();a=_&&d(_.type,[c.WORD,c.RESERVED])}else if("..."===t.text)this.allow_wrap_or_preserved_newline(t),s=this._flags.last_token.type===c.START_BLOCK,a=!1;else if(d(t.text,["--","++","!","~"])||n){if(this._flags.last_token.type!==c.COMMA&&this._flags.last_token.type!==c.START_EXPR||this.allow_wrap_or_preserved_newline(t),s=!1,a=!1,t.newlines&&("--"===t.text||"++"===t.text||"~"===t.text)){var v=f(this._flags.last_token,m)&&t.newlines;v&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(v,!0)}";"===this._flags.last_token.text&&C(this._flags.mode)&&(s=!0),this._flags.last_token.type===c.RESERVED?s=!0:this._flags.last_token.type===c.END_EXPR?s=!("]"===this._flags.last_token.text&&("--"===t.text||"++"===t.text)):this._flags.last_token.type===c.OPERATOR&&(s=d(t.text,["--","-","++","+"])&&d(this._flags.last_token.text,["--","-","++","+"]),d(t.text,["+","-"])&&d(this._flags.last_token.text,["--","++"])&&(a=!0)),(this._flags.mode!==b.BlockStatement||this._flags.inline_frame)&&this._flags.mode!==b.Statement||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline()}this._output.space_before_token=this._output.space_before_token||s,this.print_token(t),this._output.space_before_token=a}else this.print_token(t);else this.print_token(t)},T.prototype.handle_block_comment=function(t,e){return this._output.raw?(this._output.add_raw_token(t),void(t.directives&&"end"===t.directives.preserve&&(this._output.raw=this._options.test_output_raw))):t.directives?(this.print_newline(!1,e),this.print_token(t),"start"===t.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):a.newline.test(t.text)||t.newlines?void this.print_block_commment(t,e):(this._output.space_before_token=!0,this.print_token(t),void(this._output.space_before_token=!0))},T.prototype.print_block_commment=function(t,e){var n,i=x(t.text),s=!1,a=!1,o=t.whitespace_before,r=o.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(i[0]),this.print_newline(!1,e),i.length>1){for(i=i.slice(1),s=$(i,"*"),a=S(i,o),s&&(this._flags.alignment=1),n=0;n<i.length;n++)s?(this.print_token_line_indentation(t),this._output.add_token(p(i[n]))):a&&i[n]?(this.print_token_line_indentation(t),this._output.add_token(i[n].substring(r))):(this._output.current_line.set_indent(-1),this._output.add_token(i[n])),this.print_newline(!1,e);this._flags.alignment=0}},T.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)},T.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),f(this._flags.last_token,m)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)},T.prototype.handle_unknown=function(t,e){this.print_token(t),"\n"===t.text[t.text.length-1]&&this.print_newline(!1,e)},T.prototype.handle_eof=function(t){while(this._flags.mode===b.Statement)this.restore_mode();this.handle_whitespace_and_comments(t)},t.exports.Beautifier=T},function(t){function e(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function i(t,i){this.__indent_cache=new n(t,i),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}e.prototype.clone_empty=function(){var t=new e(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},e.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},e.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},e.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return 0===this.__items.length},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf("\n");-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},e.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){while(" "===this.last())this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e,n},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=""),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e],n},n.prototype.__ensure_cache=function(t){while(t>=this.__cache.length)this.__add_column()},n.prototype.__add_column=function(){var t=this.__cache.length,e=0,n="";this.__indent_size&&t>=this.__indent_size&&(e=Math.floor(t/this.__indent_size),t-=e*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(" ")),this.__cache.push(n)},i.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},i.prototype.get_line_number=function(){return this.__lines.length},i.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},i.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},i.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},i.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},i.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&("\n"===e[e.length-1]&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join("\n");return"\n"!==t&&(n=n.replace(/[\n]/g,t)),n},i.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},i.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},i.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},i.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},i.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},i.prototype.remove_indent=function(t){var e=this.__lines.length;while(t<e)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},i.prototype.trim=function(t){t=void 0!==t&&t,this.current_line.trim();while(t&&this.__lines.length>1&&this.current_line.is_empty())this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},i.prototype.just_added_newline=function(){return this.current_line.is_empty()},i.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},i.prototype.ensure_empty_line_above=function(t,n){var i=this.__lines.length-2;while(i>=0){var s=this.__lines[i];if(s.is_empty())break;if(0!==s.item(0).indexOf(t)&&s.item(-1)!==n){this.__lines.splice(i+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}i--}},t.exports.Output=i},function(t){function e(t,e,n,i){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}t.exports.Token=e},function(t,e){var n="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",i="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",s="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",a="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",o="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",r="(?:"+o+"|["+n+s+"])",l="(?:"+o+"|["+i+s+a+"])*";e.identifier=new RegExp(r+l,"g"),e.identifierStart=new RegExp(r),e.identifierMatch=new RegExp("(?:"+o+"|["+i+s+a+"])+");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g")},function(t,e,n){var i=n(7).Options,s=["before-newline","after-newline","preserve-newline"];function a(t){i.call(this,t,"js");var e=this.raw_options.brace_style||null;"expand-strict"===e?this.raw_options.brace_style="expand":"collapse-preserve-inline"===e?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var a=0;a<n.length;a++)"preserve-inline"===n[a]?this.brace_preserve_inline=!0:this.brace_style=n[a];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",s),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}a.prototype=new i,t.exports.Options=a},function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}function n(t,e){var n,s={};for(n in t=i(t),t)n!==e&&(s[n]=t[n]);if(e&&t[e])for(n in t[e])s[n]=t[e][n];return s}function i(t){var e,n={};for(e in t){var i=e.replace(/-/g,"_");n[i]=t[e]}return n}e.prototype._get_array=function(t,e){var n=this.raw_options[t],i=e||[];return"object"===typeof n?null!==n&&"function"===typeof n.concat&&(i=n.concat()):"string"===typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},e.prototype._get_boolean=function(t,e){var n=this.raw_options[t],i=void 0===n?!!e:!!n;return i},e.prototype._get_characters=function(t,e){var n=this.raw_options[t],i=e||"";return"string"===typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},e.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(n,10);return isNaN(i)&&(i=e),i},e.prototype._get_selection=function(t,e,n){var i=this._get_selection_list(t,e,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,n);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=e,t.exports.normalizeOpts=i,t.exports.mergeOpts=n},function(t,e,n){var i=n(9).InputScanner,s=n(10).Tokenizer,a=n(10).TOKEN,o=n(14).Directives,r=n(5),l=n(13).Pattern,u=n(15).TemplatablePattern;function c(t,e){return-1!==e.indexOf(t)}var d={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:a.START,RAW:a.RAW,EOF:a.EOF},p=new o(/\/\*/,/\*\//),h=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,_=/[0-9]/,f=/[^\d\.]/,m=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),v=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";v=v.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),v="\\?\\.(?!\\d) "+v,v=v.replace(/ /g,"|");var g,y=new RegExp(v),b="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),w=b.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),x=new RegExp("^(?:"+w.join("|")+")$"),k=function(t,e){s.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new l(this._input),i=new u(this._input).read_options(this._options);this.__patterns={template:i,identifier:i.starting_with(r.identifier).matching(r.identifierMatch),number:n.matching(h),punct:n.matching(y),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(r.lineBreak),shebang:n.starting_with(/#!/).until_after(r.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:i.until(/['\\\n\r\u2028\u2029]/),double_quote:i.until(/["\\\n\r\u2028\u2029]/),template_text:i.until(/[`\\$]/),template_expression:i.until(/[`}\\]/)}};function C(t){var e="",n=0,s=new i(t),a=null;while(s.hasNext())if(a=s.match(/([\s]|[^\\]|\\\\)+/g),a&&(e+=a[0]),"\\"===s.peek()){if(s.next(),"x"===s.peek())a=s.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==s.peek()){e+="\\",s.hasNext()&&(e+=s.next());continue}a=s.match(/u([0-9A-Fa-f]{4})/g),a||(a=s.match(/u\{([0-9A-Fa-f]+)\}/g))}if(!a)return t;if(n=parseInt(a[1],16),n>126&&n<=255&&0===a[0].indexOf("x"))return t;e+=n>=0&&n<32||n>1114111?"\\"+a[0]:34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return e}k.prototype=new s,k.prototype._is_comment=function(t){return t.type===d.COMMENT||t.type===d.BLOCK_COMMENT||t.type===d.UNKNOWN},k.prototype._is_opening=function(t){return t.type===d.START_BLOCK||t.type===d.START_EXPR},k.prototype._is_closing=function(t,e){return(t.type===d.END_BLOCK||t.type===d.END_EXPR)&&e&&("]"===t.text&&"["===e.text||")"===t.text&&"("===e.text||"}"===t.text&&"{"===e.text)},k.prototype._reset=function(){g=!1},k.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var i=this._input.peek();return null===i?this._create_token(d.EOF,""):(n=n||this._read_non_javascript(i),n=n||this._read_string(i),n=n||this._read_pair(i,this._input.peek(1)),n=n||this._read_word(t),n=n||this._read_singles(i),n=n||this._read_comment(i),n=n||this._read_regexp(i,t),n=n||this._read_xml(i,t),n=n||this._read_punctuation(),n=n||this._create_token(d.UNKNOWN,this._input.next()),n)},k.prototype._read_word=function(t){var e;return e=this.__patterns.identifier.read(),""!==e?(e=e.replace(r.allLineBreaks,"\n"),t.type!==d.DOT&&(t.type!==d.RESERVED||"set"!==t.text&&"get"!==t.text)&&x.test(e)?"in"!==e&&"of"!==e||t.type!==d.WORD&&t.type!==d.STRING?this._create_token(d.RESERVED,e):this._create_token(d.OPERATOR,e):this._create_token(d.WORD,e)):(e=this.__patterns.number.read(),""!==e?this._create_token(d.WORD,e):void 0)},k.prototype._read_singles=function(t){var e=null;return"("===t||"["===t?e=this._create_token(d.START_EXPR,t):")"===t||"]"===t?e=this._create_token(d.END_EXPR,t):"{"===t?e=this._create_token(d.START_BLOCK,t):"}"===t?e=this._create_token(d.END_BLOCK,t):";"===t?e=this._create_token(d.SEMICOLON,t):"."===t&&f.test(this._input.peek(1))?e=this._create_token(d.DOT,t):","===t&&(e=this._create_token(d.COMMA,t)),e&&this._input.next(),e},k.prototype._read_pair=function(t,e){var n=null;return"#"===t&&"{"===e&&(n=this._create_token(d.START_BLOCK,t+e)),n&&(this._input.next(),this._input.next()),n},k.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(""!==t)return"="===t?this._create_token(d.EQUALS,t):"?."===t?this._create_token(d.DOT,t):this._create_token(d.OPERATOR,t)},k.prototype._read_non_javascript=function(t){var e="";if("#"===t){if(this._is_first_token()&&(e=this.__patterns.shebang.read(),e))return this._create_token(d.UNKNOWN,e.trim()+"\n");if(e=this.__patterns.include.read(),e)return this._create_token(d.UNKNOWN,e.trim()+"\n");t=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(_)){do{t=this._input.next(),n+=t}while(this._input.hasNext()&&"#"!==t&&"="!==t);return"#"===t||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(d.WORD,n)}this._input.back()}else if("<"===t&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read(),e){while(this._input.hasNext()&&!this._input.testChar(r.newline))e+=this._input.next();return g=!0,this._create_token(d.COMMENT,e)}}else if(g&&"-"===t&&(e=this.__patterns.html_comment_end.read(),e))return g=!1,this._create_token(d.COMMENT,e);return null},k.prototype._read_comment=function(t){var e=null;if("/"===t){var n="";if("*"===this._input.peek(1)){n=this.__patterns.block_comment.read();var i=p.get_directives(n);i&&"start"===i.ignore&&(n+=p.readIgnored(this._input)),n=n.replace(r.allLineBreaks,"\n"),e=this._create_token(d.BLOCK_COMMENT,n),e.directives=i}else"/"===this._input.peek(1)&&(n=this.__patterns.comment.read(),e=this._create_token(d.COMMENT,n))}return e},k.prototype._read_string=function(t){if("`"===t||"'"===t||'"'===t){var e=this._input.next();return this.has_char_escapes=!1,e+="`"===t?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=C(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(r.allLineBreaks,"\n"),this._create_token(d.STRING,e)}return null},k.prototype._allow_regexp_or_xml=function(t){return t.type===d.RESERVED&&c(t.text,["return","case","throw","else","do","typeof","yield"])||t.type===d.END_EXPR&&")"===t.text&&t.opened.previous.type===d.RESERVED&&c(t.opened.previous.text,["if","while","for"])||c(t.type,[d.COMMENT,d.START_EXPR,d.START_BLOCK,d.START,d.END_BLOCK,d.OPERATOR,d.EQUALS,d.EOF,d.SEMICOLON,d.COMMA])},k.prototype._read_regexp=function(t,e){if("/"===t&&this._allow_regexp_or_xml(e)){var n=this._input.next(),i=!1,s=!1;while(this._input.hasNext()&&(i||s||this._input.peek()!==t)&&!this._input.testChar(r.newline))n+=this._input.peek(),i?i=!1:(i="\\"===this._input.peek(),"["===this._input.peek()?s=!0:"]"===this._input.peek()&&(s=!1)),this._input.next();return this._input.peek()===t&&(n+=this._input.next(),n+=this._input.read(r.identifier)),this._create_token(d.STRING,n)}return null},k.prototype._read_xml=function(t,e){if(this._options.e4x&&"<"===t&&this._allow_regexp_or_xml(e)){var n="",i=this.__patterns.xml.read_match();if(i){var s=i[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),a=0===s.indexOf("{"),o=0;while(i){var l=!!i[1],u=i[2],c=!!i[i.length-1]||"![CDATA["===u.slice(0,8);if(!c&&(u===s||a&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(l?--o:++o),n+=i[0],o<=0)break;i=this.__patterns.xml.read_match()}return i||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(r.allLineBreaks,"\n"),this._create_token(d.STRING,n)}}return null},k.prototype._read_string_recursive=function(t,e,n){var i,s;"'"===t?s=this.__patterns.single_quote:'"'===t?s=this.__patterns.double_quote:"`"===t?s=this.__patterns.template_text:"}"===t&&(s=this.__patterns.template_expression);var a=s.read(),o="";while(this._input.hasNext()){if(o=this._input.next(),o===t||!e&&r.newline.test(o)){this._input.back();break}"\\"===o&&this._input.hasNext()?(i=this._input.peek(),"x"===i||"u"===i?this.has_char_escapes=!0:"\r"===i&&"\n"===this._input.peek(1)&&this._input.next(),o+=this._input.next()):n&&("${"===n&&"$"===o&&"{"===this._input.peek()&&(o+=this._input.next()),n===o&&(o+="`"===t?this._read_string_recursive("}",e,"`"):this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(o+=this._input.next()))),o+=s.read(),a+=o}return a},t.exports.Tokenizer=k,t.exports.TOKEN=d,t.exports.positionable_operators=m.slice(),t.exports.line_starters=b.slice()},function(t){var e=RegExp.prototype.hasOwnProperty("sticky");function n(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},n.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},n.prototype.__match=function(t,n){t.lastIndex=n;var i=t.exec(this.__input);return!i||e&&t.sticky||i.index!==n&&(i=null),i},n.prototype.test=function(t,e){return e=e||0,e+=this.__position,e>=0&&e<this.__input_length&&!!this.__match(t,e)},n.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},n.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},n.prototype.read=function(t,e,n){var i,s="";return t&&(i=this.match(t),i&&(s+=i[0])),!e||!i&&t||(s+=this.readUntil(e,n)),s},n.prototype.readUntil=function(t,e){var n="",i=this.__position;t.lastIndex=this.__position;var s=t.exec(this.__input);return s?(i=s.index,e&&(i+=s[0].length)):i=this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},n.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},n.prototype.get_regexp=function(t,n){var i=null,s="g";return n&&e&&(s="y"),"string"===typeof t&&""!==t?i=new RegExp(t,s):t&&(i=new RegExp(t.source,s)),i},n.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},n.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},n.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=n},function(t,e,n){var i=n(9).InputScanner,s=n(4).Token,a=n(11).TokenStream,o=n(12).WhitespacePattern,r={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},l=function(t,e){this._input=new i(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new o(this._input)};l.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new a,this._reset();var e=new s(r.START,""),n=null,i=[],o=new a;while(e.type!==r.EOF){t=this._get_next_token(e,n);while(this._is_comment(t))o.add(t),t=this._get_next_token(e,n);o.isEmpty()||(t.comments_before=o,o=new a),t.parent=n,this._is_opening(t)?(i.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=i.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(r.RAW,n):this._create_token(r.EOF,"")},l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return!1},l.prototype._is_closing=function(t,e){return!1},l.prototype._create_token=function(t,e){var n=new s(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return n},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=l,t.exports.TOKEN=r},function(t){function e(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}e.prototype.restart=function(){this.__position=0},e.prototype.isEmpty=function(){return 0===this.__tokens_length},e.prototype.hasNext=function(){return this.__position<this.__tokens_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},e.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},e.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=e},function(t,e,n){var i=n(13).Pattern;function s(t,e){i.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}s.prototype=new i,s.prototype.__set_whitespace_patterns=function(t,e){t+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")},s.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(" "===t)this.whitespace_before_token=" ";else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},s.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},s.prototype._create=function(){return new s(this._input,this)},s.prototype.__split=function(t,e){t.lastIndex=0;var n=0,i=[],s=t.exec(e);while(s)i.push(e.substring(n,s.index)),n=s.index+s[0].length,s=t.exec(e);return n<e.length?i.push(e.substring(n,e.length)):i.push(""),i},t.exports.WhitespacePattern=s},function(t){function e(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}e.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},e.prototype.read_match=function(){return this._input.match(this._match_pattern)},e.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype._create=function(){return new e(this._input,this)},e.prototype._update=function(){},t.exports.Pattern=e},function(t){function e(t,e){t="string"===typeof t?t:t.source,e="string"===typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;var n=this.__directive_pattern.exec(t);while(n)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},function(t,e,n){var i=n(13).Pattern,s={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function a(t,e){i.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},s),this._excluded=Object.assign({},s),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new i(t);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}a.prototype=new i,a.prototype._create=function(){return new a(this._input,this)},a.prototype._update=function(){this.__set_templated_pattern()},a.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},a.prototype.read_options=function(t){var e=this._create();for(var n in s)e._disabled[n]=-1===t.templating.indexOf(n);return e._update(),e},a.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},a.prototype.read=function(){var t="";t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);var e=this._read_template();while(e)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},a.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")},a.prototype._read_template=function(){var t="",e=this._input.peek();if("<"===e){var n=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==n||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==n||(t=t||this.__patterns.erb.read())}else"{"===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=t||this.__patterns.handlebars_comment.read(),t=t||this.__patterns.handlebars_unescaped.read(),t=t||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=t||this.__patterns.django_comment.read(),t=t||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=t||this.__patterns.smarty_comment.read(),t=t||this.__patterns.smarty_literal.read(),t=t||this.__patterns.smarty.read()));return t},t.exports.TemplatablePattern=a},function(t,e,n){var i=n(17).Beautifier,s=n(18).Options;function a(t,e){var n=new i(t,e);return n.beautify()}t.exports=a,t.exports.defaultOptions=function(){return new s}},function(t,e,n){var i=n(18).Options,s=n(3).Output,a=n(9).InputScanner,o=n(14).Directives,r=new o(/\/\*/,/\*\//),l=/\r\n|[\r\n]/,u=/\r\n|[\r\n]/g,c=/\s/,d=/(?:\s|\n)+/g,p=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,h=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function _(t,e){this._source_text=t||"",this._options=new i(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}_.prototype.eatString=function(t){var e="";this._ch=this._input.next();while(this._ch){if(e+=this._ch,"\\"===this._ch)e+=this._input.next();else if(-1!==t.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return e},_.prototype.eatWhitespace=function(t){var e=c.test(this._input.peek()),n=0;while(c.test(this._input.peek()))this._ch=this._input.next(),t&&"\n"===this._ch&&(0===n||n<this._options.max_preserve_newlines)&&(n++,this._output.add_new_line(!0));return e},_.prototype.foundNestedPseudoClass=function(){var t=0,e=1,n=this._input.peek(e);while(n){if("{"===n)return!0;if("("===n)t+=1;else if(")"===n){if(0===t)return!1;t-=1}else if(";"===n||"}"===n)return!1;e++,n=this._input.peek(e)}return!1},_.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)},_.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)},_.prototype.indent=function(){this._indentLevel++},_.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},_.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===e&&(e="\n",t&&l.test(t||"")&&(e=t.match(l)[0])),t=t.replace(u,"\n");var n=t.match(/^[\t ]*/)[0];this._output=new s(this._options,n),this._input=new a(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;var i,o,_,f=0,m=!1,v=!1,g=!1,y=!1,b=!1,w=this._ch,x=!1;while(1){if(i=this._input.read(d),o=""!==i,_=w,this._ch=this._input.next(),"\\"===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),w=this._ch,!this._ch)break;if("/"===this._ch&&"*"===this._input.peek()){this._output.add_new_line(),this._input.back();var k=this._input.read(p),C=r.get_directives(k);C&&"start"===C.ignore&&(k+=r.readIgnored(this._input)),this.print_string(k),this.eatWhitespace(!0),this._output.add_new_line()}else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(h)),this.eatWhitespace(!0);else if("$"===this._ch){this.preserveSingleSpace(o),this.print_string(this._ch);var $=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);$.match(/[ :]$/)&&($=this.eatString(": ").replace(/\s+$/,""),this.print_string($),this._output.space_before_token=!0),0===f&&-1!==$.indexOf(":")&&(v=!0,this.indent())}else if("@"===this._ch)if(this.preserveSingleSpace(o),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var S=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);S.match(/[ :]$/)&&(S=this.eatString(": ").replace(/\s+$/,""),this.print_string(S),this._output.space_before_token=!0),0===f&&-1!==S.indexOf(":")?(v=!0,this.indent()):S in this.NESTED_AT_RULE?(this._nestedLevel+=1,S in this.CONDITIONAL_GROUP_RULE&&(g=!0)):0!==f||v||(y=!0)}else if("#"===this._ch&&"{"===this._input.peek())this.preserveSingleSpace(o),this.print_string(this._ch+this.eatString("}"));else if("{"===this._ch)v&&(v=!1,this.outdent()),y=!1,g?(g=!1,m=this._indentLevel>=this._nestedLevel):m=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&m&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,"expand"===this._options.brace_style?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):("("===_?this._output.space_before_token=!1:","!==_&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if("}"===this._ch)this.outdent(),this._output.add_new_line(),"{"===_&&this._output.trim(!0),v&&(this.outdent(),v=!1),this.print_string(this._ch),m=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0),")"===this._input.peek()&&(this._output.trim(!0),"expand"===this._options.brace_style&&this._output.add_new_line(!0));else if(":"===this._ch){for(var T=0;T<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;T++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[T])){x=!0;break}!m&&!g||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||y||0!==f?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),v||(v=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent()))}else if('"'===this._ch||"'"===this._ch){var E='"'===_||"'"===_;this.preserveSingleSpace(E||o),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(";"===this._ch)x=!1,0===f?(v&&(this.outdent(),v=!1),y=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if("("===this._ch)if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),f++,this.indent(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),f&&(f--,this.outdent()));else{var D=!1;this._input.lookBack("with")&&(D=!0),this.preserveSingleSpace(o||D),this.print_string(this._ch),v&&"$"===_&&this._options.selector_separator_newline?(this._output.add_new_line(),b=!0):(this.eatWhitespace(),f++,this.indent())}else if(")"===this._ch)f&&(f--,this.outdent()),b&&";"===this._input.peek()&&this._options.selector_separator_newline&&(b=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(","===this._ch)this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||v&&!b||0!==f||y?this._output.space_before_token=!0:this._output.add_new_line();else if(">"!==this._ch&&"+"!==this._ch&&"~"!==this._ch||v||0!==f)if("]"===this._ch)this.print_string(this._ch);else if("["===this._ch)this.preserveSingleSpace(o),this.print_string(this._ch);else if("="===this._ch)this.eatWhitespace(),this.print_string("="),c.test(this._ch)&&(this._ch="");else if("!"!==this._ch||this._input.lookBack("\\")){var O='"'===_||"'"===_;this.preserveSingleSpace(O||o),this.print_string(this._ch),!this._output.just_added_newline()&&"\n"===this._input.peek()&&x&&this._output.add_new_line()}else this._output.space_before_token=!0,this.print_string(this._ch);else this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&c.test(this._ch)&&(this._ch=""))}var P=this._output.get_code(e);return P},t.exports.Beautifier=_},function(t,e,n){var i=n(7).Options;function s(t){i.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e;var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var s=0;s<n.length;s++)"expand"!==n[s]?this.brace_style="collapse":this.brace_style=n[s]}s.prototype=new i,t.exports.Options=s},function(t,e,n){var i=n(20).Beautifier,s=n(21).Options;function a(t,e,n,s){var a=new i(t,e,n,s);return a.beautify()}t.exports=a,t.exports.defaultOptions=function(){return new s}},function(t,e,n){var i=n(21).Options,s=n(3).Output,a=n(22).Tokenizer,o=n(22).TOKEN,r=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,u=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new s(t,e)};u.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)},u.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e},u.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},u.prototype.add_raw_token=function(t){this._output.add_raw_token(t)},u.prototype.print_preserved_newlines=function(t){var e=0;t.type!==o.TEXT&&t.previous.type!==o.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var n=0;n<e;n++)this.print_newline(n>0);return 0!==e},u.prototype.traverse_whitespace=function(t){return!(!t.whitespace_before&&!t.newlines)&&(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),!0)},u.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},u.prototype.print_newline=function(t){this._output.add_new_line(t)},u.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))},u.prototype.indent=function(){this.indent_level++},u.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))},u.prototype.get_full_indent=function(t){return t=this.indent_level+(t||0),t<1?"":this._output.get_indent_string(t)};var c=function(t){var e=null,n=t.next;while(n.type!==o.EOF&&t.closed!==n){if(n.type===o.ATTRIBUTE&&"type"===n.text){n.next&&n.next.type===o.EQUALS&&n.next.next&&n.next.next.type===o.VALUE&&(e=n.next.next.text);break}n=n.next}return e},d=function(t,e){var n=null,i=null;return e.closed?("script"===t?n="text/javascript":"style"===t&&(n="text/css"),n=c(e)||n,n.search("text/css")>-1?i="css":n.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?i="javascript":n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?i="html":n.search(/test\/null/)>-1&&(i="null"),i):null};function p(t,e){return-1!==e.indexOf(t)}function h(t,e,n){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=n||0,this.parser_token=e||null}function _(t){this._printer=t,this._current_frame=null}function f(t,e,n,s){this._source_text=t||"",e=e||{},this._js_beautify=n,this._css_beautify=s,this._tag_stack=null;var a=new i(e,"html");this._options=a,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}_.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},_.prototype.record_tag=function(t){var e=new h(this._current_frame,t,this._printer.indent_level);this._current_frame=e},_.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e},_.prototype._get_frame=function(t,e){var n=this._current_frame;while(n){if(-1!==t.indexOf(n.tag))break;if(e&&-1!==e.indexOf(n.tag)){n=null;break}n=n.parent}return n},_.prototype.try_pop=function(t,e){var n=this._get_frame([t],e);return this._try_pop_frame(n)},_.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)},f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===this._options.eol&&(e="\n",t&&r.test(t)&&(e=t.match(r)[0])),t=t.replace(l,"\n");var n=t.match(/^[\t ]*/)[0],i={text:"",type:""},s=new m,c=new u(this._options,n),d=new a(t,this._options).tokenize();this._tag_stack=new _(c);var p=null,h=d.next();while(h.type!==o.EOF)h.type===o.TAG_OPEN||h.type===o.COMMENT?(p=this._handle_tag_open(c,h,s,i,d),s=p):h.type===o.ATTRIBUTE||h.type===o.EQUALS||h.type===o.VALUE||h.type===o.TEXT&&!s.tag_complete?p=this._handle_inside_tag(c,h,s,i):h.type===o.TAG_CLOSE?p=this._handle_tag_close(c,h,s):h.type===o.TEXT?p=this._handle_text(c,h,s):h.type===o.CONTROL_FLOW_OPEN?p=this._handle_control_flow_open(c,h):h.type===o.CONTROL_FLOW_CLOSE?p=this._handle_control_flow_close(c,h):c.add_raw_token(h),i=p,h=d.next();var f=c._output.get_code(e);return f},f.prototype._handle_control_flow_open=function(t,e){var n={text:e.text,type:e.type};return t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),e.newlines?t.print_preserved_newlines(e):t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),t.print_token(e),t.indent(),n},f.prototype._handle_control_flow_close=function(t,e){var n={text:e.text,type:e.type};return t.deindent(),e.newlines?t.print_preserved_newlines(e):t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),t.print_token(e),n},f.prototype._handle_tag_close=function(t,e,n){var i={text:e.text,type:e.type};return t.alignment_size=0,n.tag_complete=!0,t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):("<"===n.tag_start_char&&(t.set_space_before_token("/"===e.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(t.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||t.set_wrap_point(),i},f.prototype._handle_inside_tag=function(t,e,n,i){var s=n.has_wrapped_attrs,a={text:e.text,type:e.type};return t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):"{"===n.tag_start_char&&e.type===o.TEXT?t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e):(e.type===o.ATTRIBUTE?t.set_space_before_token(!0):(e.type===o.EQUALS||e.type===o.VALUE&&e.previous.type===o.EQUALS)&&t.set_space_before_token(!1),e.type===o.ATTRIBUTE&&"<"===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),s=s||0!==e.newlines),this._is_wrap_attributes_force&&n.attr_count>=this._options.wrap_attributes_min_attrs&&(i.type!==o.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(t.print_newline(!1),s=!0)),t.print_token(e),s=s||t.previous_token_wrapped(),n.has_wrapped_attrs=s),a},f.prototype._handle_text=function(t,e,n){var i={text:e.text,type:"TK_CONTENT"};return n.custom_beautifier_name?this._print_custom_beatifier_text(t,e,n):n.is_unformatted||n.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),i},f.prototype._print_custom_beatifier_text=function(t,e,n){var i=this;if(""!==e.text){var s,a=e.text,o=1,r="",l="";"javascript"===n.custom_beautifier_name&&"function"===typeof this._js_beautify?s=this._js_beautify:"css"===n.custom_beautifier_name&&"function"===typeof this._css_beautify?s=this._css_beautify:"html"===n.custom_beautifier_name&&(s=function(t,e){var n=new f(t,e,i._js_beautify,i._css_beautify);return n.beautify()}),"keep"===this._options.indent_scripts?o=0:"separate"===this._options.indent_scripts&&(o=-t.indent_level);var u=t.get_full_indent(o);if(a=a.replace(/\n[ \t]*$/,""),"html"!==n.custom_beautifier_name&&"<"===a[0]&&a.match(/^(<!--|<!\[CDATA\[)/)){var c=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(a);if(!c)return void t.add_raw_token(e);r=u+c[1]+"\n",a=c[4],c[5]&&(l=u+c[5]),a=a.replace(/\n[ \t]*$/,""),(c[2]||-1!==c[3].indexOf("\n"))&&(c=c[3].match(/[ \t]+$/),c&&(e.whitespace_before=c[0]))}if(a)if(s){var d=function(){this.eol="\n"};d.prototype=this._options.raw_options;var p=new d;a=s(u+a,p)}else{var h=e.whitespace_before;h&&(a=a.replace(new RegExp("\n("+h+")?","g"),"\n")),a=u+a.replace(/\n/g,"\n"+u)}r&&(a=a?r+a+"\n"+l:r+l),t.print_newline(!1),a&&(e.text=a,e.whitespace_before="",e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}},f.prototype._handle_tag_open=function(t,e,n,i,s){var a=this._get_tag_open_token(e);if(!n.is_unformatted&&!n.is_content_unformatted||n.is_empty_element||e.type!==o.TAG_OPEN||a.is_start_tag?(t.traverse_whitespace(e),this._set_tag_position(t,e,a,n,i),a.is_inline_element||t.set_wrap_point(),t.print_token(e)):(t.add_raw_token(e),a.start_tag_token=this._tag_stack.try_pop(a.tag_name)),a.is_start_tag&&this._is_wrap_attributes_force){var r,l=0;do{r=s.peek(l),r.type===o.ATTRIBUTE&&(a.attr_count+=1),l+=1}while(r.type!==o.EOF&&r.type!==o.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(a.alignment_size=e.text.length+1),a.tag_complete||a.is_unformatted||(t.alignment_size=a.alignment_size),a};var m=function(t,e){if(this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",e){var n;this.tag_start_char=e.text[0],this.text=e.text,"<"===this.tag_start_char?(n=e.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=e.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:"",(e.text.startsWith("{{#>")||e.text.startsWith("{{~#>"))&&">"===this.tag_check[0]&&(">"===this.tag_check&&null!==e.next?this.tag_check=e.next.text.split(" ")[0]:this.tag_check=e.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),e.type===o.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&"/>"===e.closed.text;var i=2;"{"===this.tag_start_char&&this.text.length>=3&&"~"===this.text.charAt(2)&&(i=3),this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(i)))}else this.tag_complete=!0};f.prototype._get_tag_open_token=function(t){var e=new m(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||p(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&p(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&p(e.tag_check,this._options.content_unformatted),e.is_inline_element=p(e.tag_name,this._options.inline)||this._options.inline_custom_elements&&e.tag_name.includes("-")||"{"===e.tag_start_char,e},f.prototype._set_tag_position=function(t,e,n,i,s){if(n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||t.print_newline(!1)),this._tag_stack.record_tag(n),"script"!==n.tag_name&&"style"!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=d(n.tag_check,e)))),p(n.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),n.is_empty_element){if("{"===n.tag_start_char&&"else"===n.tag_check){this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0;var a=t.current_line_has_match(/{{#if/);a||t.print_newline(!1)}"!--"===n.tag_name&&s.type===o.TAG_CLOSE&&i.is_end_tag&&-1===n.text.indexOf("\n")||(n.is_inline_element||n.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n))}else if(n.is_end_tag){var r=!1;r=n.start_tag_token&&n.start_tag_token.multiline_content,r=r||!n.is_inline_element&&!(i.is_inline_element||i.is_unformatted)&&!(s.type===o.TAG_CLOSE&&n.start_tag_token===i)&&"TK_CONTENT"!==s.type,(n.is_content_unformatted||n.is_unformatted)&&(r=!1),r&&t.print_newline(!1)}else n.indent_content=!n.custom_beautifier_name,"<"===n.tag_start_char&&("html"===n.tag_name?n.indent_content=this._options.indent_inner_html:"head"===n.tag_name?n.indent_content=this._options.indent_head_inner_html:"body"===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||n.is_unformatted||"TK_CONTENT"===s.type&&!n.is_content_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n)},f.prototype._calcluate_parent_multiline=function(t,e){!e.parent||!t._output.just_added_newline()||(e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element||(e.parent.multiline_content=!0)};var v=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],g=["a","audio","del","ins","map","noscript","video"];f.prototype._do_optional_end_element=function(t){var e=null;if(!t.is_empty_element&&t.is_start_tag&&t.parent){if("body"===t.tag_name)e=e||this._tag_stack.try_pop("head");else if("li"===t.tag_name)e=e||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if("dd"===t.tag_name||"dt"===t.tag_name)e=e||this._tag_stack.try_pop("dt",["dl"]),e=e||this._tag_stack.try_pop("dd",["dl"]);else if("p"===t.parent.tag_name&&-1!==v.indexOf(t.tag_name)){var n=t.parent.parent;n&&-1!==g.indexOf(n.tag_name)||(e=e||this._tag_stack.try_pop("p"))}else"rp"===t.tag_name||"rt"===t.tag_name?(e=e||this._tag_stack.try_pop("rt",["ruby","rtc"]),e=e||this._tag_stack.try_pop("rp",["ruby","rtc"])):"optgroup"===t.tag_name?e=e||this._tag_stack.try_pop("optgroup",["select"]):"option"===t.tag_name?e=e||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===t.tag_name?e=e||this._tag_stack.try_pop("caption",["table"]):"thead"===t.tag_name?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"])):"tbody"===t.tag_name||"tfoot"===t.tag_name?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("thead",["table"]),e=e||this._tag_stack.try_pop("tbody",["table"])):"tr"===t.tag_name?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):"th"!==t.tag_name&&"td"!==t.tag_name||(e=e||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),e=e||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return t.parent=this._tag_stack.get_parser_token(),e}},t.exports.Beautifier=f},function(t,e,n){var i=n(7).Options;function s(t){i.call(this,t,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}s.prototype=new i,t.exports.Options=s},function(t,e,n){var i=n(10).Tokenizer,s=n(10).TOKEN,a=n(14).Directives,o=n(15).TemplatablePattern,r=n(13).Pattern,l={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:s.START,RAW:s.RAW,EOF:s.EOF},u=new a(/<\!--/,/-->/),c=function(t,e){i.call(this,t,e),this._current_tag_name="";var n=new o(this._input).read_options(this._options),s=new r(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),word_control_flow_close_excluded:n.until(/[\n\r\t <}]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =>]|\/>/),element_name:n.until(/[\n\r\t >\/]/),angular_control_flow_start:s.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:s.starting_with(/{{!--/).until_after(/--}}/),handlebars:s.starting_with(/{{/).until_after(/}}/),handlebars_open:s.until(/[\n\r\t }]/),handlebars_raw_close:s.until(/}}/),comment:s.starting_with(/<!--/).until_after(/-->/),cdata:s.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:s.starting_with(/<!\[/).until_after(/]>/),processing:s.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var a=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=s.matching(a).until_after(a)}};c.prototype=new i,c.prototype._is_comment=function(t){return!1},c.prototype._is_opening=function(t){return t.type===l.TAG_OPEN||t.type===l.CONTROL_FLOW_OPEN},c.prototype._is_closing=function(t,e){return t.type===l.TAG_CLOSE&&e&&((">"===t.text||"/>"===t.text)&&"<"===e.text[0]||"}}"===t.text&&"{"===e.text[0]&&"{"===e.text[1])||t.type===l.CONTROL_FLOW_CLOSE&&"}"===t.text&&e.text.endsWith("{")},c.prototype._reset=function(){this._current_tag_name=""},c.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var i=this._input.peek();return null===i?this._create_token(l.EOF,""):(n=n||this._read_open_handlebars(i,e),n=n||this._read_attribute(i,t,e),n=n||this._read_close(i,e),n=n||this._read_control_flows(i,e),n=n||this._read_raw_content(i,t,e),n=n||this._read_content_word(i,e),n=n||this._read_comment_or_cdata(i),n=n||this._read_processing(i),n=n||this._read_open(i,e),n=n||this._create_token(l.UNKNOWN,this._input.next()),n)},c.prototype._read_comment_or_cdata=function(t){var e=null,n=null,i=null;if("<"===t){var s=this._input.peek(1);"!"===s&&(n=this.__patterns.comment.read(),n?(i=u.get_directives(n),i&&"start"===i.ignore&&(n+=u.readIgnored(this._input))):n=this.__patterns.cdata.read()),n&&(e=this._create_token(l.COMMENT,n),e.directives=i)}return e},c.prototype._read_processing=function(t){var e=null,n=null,i=null;if("<"===t){var s=this._input.peek(1);"!"!==s&&"?"!==s||(n=this.__patterns.conditional_comment.read(),n=n||this.__patterns.processing.read()),n&&(e=this._create_token(l.COMMENT,n),e.directives=i)}return e},c.prototype._read_open=function(t,e){var n=null,i=null;return e&&e.type!==l.CONTROL_FLOW_OPEN||"<"===t&&(n=this._input.next(),"/"===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),i=this._create_token(l.TAG_OPEN,n)),i},c.prototype._read_open_handlebars=function(t,e){var n=null,i=null;return e&&e.type!==l.CONTROL_FLOW_OPEN||this._options.indent_handlebars&&"{"===t&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(n=this.__patterns.handlebars_comment.read(),n=n||this.__patterns.handlebars.read(),i=this._create_token(l.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),i=this._create_token(l.TAG_OPEN,n))),i},c.prototype._read_control_flows=function(t,e){var n="",i=null;if(!this._options.templating.includes("angular")||!this._options.indent_handlebars)return i;if("@"===t){if(n=this.__patterns.angular_control_flow_start.read(),""===n)return i;var s=n.endsWith("(")?1:0,a=0;while(!n.endsWith("{")||s!==a){var o=this._input.next();if(null===o)break;"("===o?s++:")"===o&&a++,n+=o}i=this._create_token(l.CONTROL_FLOW_OPEN,n)}else"}"===t&&e&&e.type===l.CONTROL_FLOW_OPEN&&(n=this._input.next(),i=this._create_token(l.CONTROL_FLOW_CLOSE,n));return i},c.prototype._read_close=function(t,e){var n=null,i=null;return e&&e.type===l.TAG_OPEN&&("<"===e.text[0]&&(">"===t||"/"===t&&">"===this._input.peek(1))?(n=this._input.next(),"/"===t&&(n+=this._input.next()),i=this._create_token(l.TAG_CLOSE,n)):"{"===e.text[0]&&"}"===t&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),i=this._create_token(l.TAG_CLOSE,"}}"))),i},c.prototype._read_attribute=function(t,e,n){var i=null,s="";if(n&&"<"===n.text[0])if("="===t)i=this._create_token(l.EQUALS,this._input.next());else if('"'===t||"'"===t){var a=this._input.next();a+='"'===t?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),i=this._create_token(l.VALUE,a)}else s=this.__patterns.attribute.read(),s&&(i=e.type===l.EQUALS?this._create_token(l.VALUE,s):this._create_token(l.ATTRIBUTE,s));return i},c.prototype._is_content_unformatted=function(t){return-1===this._options.void_elements.indexOf(t)&&(-1!==this._options.content_unformatted.indexOf(t)||-1!==this._options.unformatted.indexOf(t))},c.prototype._read_raw_content=function(t,e,n){var i="";if(n&&"{"===n.text[0])i=this.__patterns.handlebars_raw_close.read();else if(e.type===l.TAG_CLOSE&&"<"===e.opened.text[0]&&"/"!==e.text[0]){var s=e.opened.text.substr(1).toLowerCase();if("script"===s||"style"===s){var a=this._read_comment_or_cdata(t);if(a)return a.type=l.TEXT,a;i=this._input.readUntil(new RegExp("</"+s+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(s)&&(i=this._input.readUntil(new RegExp("</"+s+"[\\n\\r\\t ]*?>","ig")))}return i?this._create_token(l.TEXT,i):null},c.prototype._read_content_word=function(t,e){var n="";if(this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(n=this.__patterns.unformatted_content_delimiter.read()),n||(n=e&&e.type===l.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),n)return this._create_token(l.TEXT,n)},t.exports.Tokenizer=c,t.exports.TOKEN=l}],e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}var i=n(0);return i}()}))}).call(this,n(345))},345:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},346:function(t,e,n){var i={".":31,"./":31,"./IndicatorPanelEdit":114,"./IndicatorPanelEdit.vue":114,"./accessPrivilege":115,"./accessPrivilege.vue":115,"./autoCompleteMD":116,"./autoCompleteMD.vue":116,"./backgroundSetting":117,"./backgroundSetting.vue":117,"./browseScopeEdit":118,"./browseScopeEdit.vue":118,"./btnsTable":119,"./btnsTable.vue":119,"./businessComponent":120,"./businessComponent.vue":120,"./businessComponentSingle":121,"./businessComponentSingle.vue":121,"./buttonEdit":122,"./buttonEdit.vue":122,"./buttonParamsSetting":110,"./buttonParamsSetting.vue":110,"./codeEdit":123,"./codeEdit.vue":123,"./collapseEdit":124,"./collapseEdit.vue":124,"./columnsEdit":125,"./columnsEdit.vue":125,"./componentInfoList":126,"./componentInfoList.vue":126,"./components":127,"./components.vue":127,"./controlSelect":128,"./controlSelect.vue":128,"./customComponent":129,"./customComponent.vue":129,"./customListSetList":130,"./customListSetList.vue":130,"./customOrderBy":131,"./customOrderBy.vue":131,"./dataGridLayoutSetting":132,"./dataGridLayoutSetting.vue":132,"./dataGridSearchSetting":133,"./dataGridSearchSetting.vue":133,"./dataPanelGroupEdit":134,"./dataPanelGroupEdit.vue":134,"./defaultValue":135,"./defaultValue.vue":135,"./developmentEdit":136,"./developmentEdit.vue":136,"./dragGridSetting/chooseLevel":137,"./dragGridSetting/chooseLevel.vue":137,"./dragGridSetting/dragGridSetting":138,"./dragGridSetting/dragGridSetting.vue":138,"./dragGridSetting/grid":98,"./dragGridSetting/grid.vue":98,"./dragGridSetting/quickLayout":91,"./dragGridSetting/quickLayout.js":91,"./dragGridSetting/settingItem":92,"./dragGridSetting/settingItem.js":92,"./enumEditor":139,"./enumEditor.vue":139,"./examEnumEditor":140,"./examEnumEditor.vue":140,"./excelEdit":257,"./excelEdit.vue":257,"./exportOptions":141,"./exportOptions.vue":141,"./filterRuleSetting":142,"./filterRuleSetting.vue":142,"./flexColumnEdit":143,"./flexColumnEdit.vue":143,"./flexGrid":144,"./flexGrid.vue":144,"./flow/applyTo":145,"./flow/applyTo.vue":145,"./flow/batAddParam":76,"./flow/batAddParam.vue":76,"./flow/chooseFlow":146,"./flow/chooseFlow.vue":146,"./flow/chooseForm":147,"./flow/chooseForm.vue":147,"./flow/contextTree":148,"./flow/contextTree.vue":148,"./flow/databaseOperation":149,"./flow/databaseOperation.vue":149,"./flow/eventSetting":150,"./flow/eventSetting.vue":150,"./flow/flowBusiness":151,"./flow/flowBusiness.vue":151,"./flow/flowCommonTree":152,"./flow/flowCommonTree.vue":152,"./flow/forPersonnel":153,"./flow/forPersonnel.vue":153,"./flow/institutionInfo":154,"./flow/institutionInfo.vue":154,"./flow/javaParameter":155,"./flow/javaParameter.vue":155,"./flow/leaveSend":156,"./flow/leaveSend.vue":156,"./flow/linkSet":157,"./flow/linkSet.vue":157,"./flow/parameter":158,"./flow/parameter.vue":158,"./flow/parameterBatch":159,"./flow/parameterBatch.vue":159,"./flow/parameterExecShell":160,"./flow/parameterExecShell.vue":160,"./flow/parameterExecSql":161,"./flow/parameterExecSql.vue":161,"./flow/parameterExecSqlAdd":162,"./flow/parameterExecSqlAdd.vue":162,"./flow/parameterExecSqlDs":163,"./flow/parameterExecSqlDs.vue":163,"./flow/parameterExecWeb":164,"./flow/parameterExecWeb.vue":164,"./flow/parameterExecWebAdd":165,"./flow/parameterExecWebAdd.vue":165,"./flow/parameterNew":166,"./flow/parameterNew.vue":166,"./flow/parameterReal":167,"./flow/parameterReal.vue":167,"./flow/parameterTree":168,"./flow/parameterTree.vue":168,"./flow/rangeRule":169,"./flow/rangeRule.vue":169,"./flow/richText":170,"./flow/richText.vue":170,"./flow/riskInfo":171,"./flow/riskInfo.vue":171,"./flow/selectImg":172,"./flow/selectImg.vue":172,"./flow/selectNodes":173,"./flow/selectNodes.vue":173,"./flow/selectTable":174,"./flow/selectTable.vue":174,"./flow/selectTree":99,"./flow/selectTree.vue":99,"./flow/sendCondition":175,"./flow/sendCondition.vue":175,"./flow/setOpinionNode":176,"./flow/setOpinionNode.vue":176,"./flow/setParams":177,"./flow/setParams.vue":177,"./flow/setSubFlow":178,"./flow/setSubFlow.vue":178,"./flow/sumAllNode":179,"./flow/sumAllNode.vue":179,"./flow/sumStartNode":180,"./flow/sumStartNode.vue":180,"./flow/summary":181,"./flow/summary.vue":181,"./formTabIndexEditor":109,"./formTabIndexEditor.vue":109,"./formula/customFuncEdit":182,"./formula/customFuncEdit.vue":182,"./formula/formula":255,"./formula/formula.vue":255,"./formula/formulaEdit":183,"./formula/formulaEdit.vue":183,"./formula/keywordMap":94,"./formula/keywordMap.js":94,"./formula/mathematical":82,"./formula/mathematical.js":82,"./formula/utils":93,"./formula/utils.js":93,"./functionSetting":184,"./functionSetting.vue":184,"./gridLayoutCellSetting":185,"./gridLayoutCellSetting.vue":185,"./gridLayoutSetting":186,"./gridLayoutSetting.vue":186,"./headColumnsEdit":187,"./headColumnsEdit.vue":187,"./iconSelect":188,"./iconSelect.vue":188,"./importOptions":189,"./importOptions.vue":189,"./index":31,"./index.js":31,"./install":36,"./install.js":36,"./item/dbDataSelect":190,"./item/dbDataSelect.vue":190,"./item/dictDataSelect":191,"./item/dictDataSelect.vue":191,"./item/enumEditorItem":75,"./item/enumEditorItem.vue":75,"./item/layoutGridSettingByLayout":100,"./item/layoutGridSettingByLayout.vue":100,"./item/layoutGridSettingBySlot":101,"./item/layoutGridSettingBySlot.vue":101,"./item/metaDataSelectItem":41,"./item/metaDataSelectItem.vue":41,"./keysMapSetting":192,"./keysMapSetting.vue":192,"./layoutGridSetting":193,"./layoutGridSetting.vue":193,"./layoutQuickSeting":95,"./layoutQuickSeting.js":95,"./listOrderbyEdit":194,"./listOrderbyEdit.vue":194,"./listRowHeightAdapter":195,"./listRowHeightAdapter.vue":195,"./listStaticDataEdit":196,"./listStaticDataEdit.vue":196,"./listStatusEdit":197,"./listStatusEdit.vue":197,"./meMenusEdit":198,"./meMenusEdit.vue":198,"./messageEdit":199,"./messageEdit.vue":199,"./messageNotificationTabPanelEdit":200,"./messageNotificationTabPanelEdit.vue":200,"./metaDataSelect":201,"./metaDataSelect.vue":201,"./metadataSouece":202,"./metadataSouece.vue":202,"./mobileBannerEdit":203,"./mobileBannerEdit.vue":203,"./mobileConvenientMenuCode":204,"./mobileConvenientMenuCode.vue":204,"./mobileFlexGrid":205,"./mobileFlexGrid.vue":205,"./mobileNavMenuData":206,"./mobileNavMenuData.vue":206,"./mobileUeditorToolbar":207,"./mobileUeditorToolbar.vue":207,"./navCatalogueSetting":208,"./navCatalogueSetting.vue":208,"./navShortMessageSeting":209,"./navShortMessageSeting.vue":209,"./navTabEdit":210,"./navTabEdit.vue":210,"./navTreeEdit":211,"./navTreeEdit.vue":211,"./neweditorToolbar":212,"./neweditorToolbar.vue":212,"./numeration":213,"./numeration.vue":213,"./outputWordStringEdit":214,"./outputWordStringEdit.vue":214,"./pagePrivilege":215,"./pagePrivilege.vue":215,"./pendingListEdit":216,"./pendingListEdit.vue":216,"./platformCharts/barEdit":217,"./platformCharts/barEdit.vue":217,"./platformCharts/chartoptionHelper":71,"./platformCharts/chartoptionHelper.js":71,"./platformCharts/config/grid":77,"./platformCharts/config/grid.vue":77,"./platformCharts/config/legend":74,"./platformCharts/config/legend.vue":74,"./platformCharts/config/mixinAxis":103,"./platformCharts/config/mixinAxis.vue":103,"./platformCharts/config/platformSeriesScatter":104,"./platformCharts/config/platformSeriesScatter.vue":104,"./platformCharts/config/radar":105,"./platformCharts/config/radar.vue":105,"./platformCharts/config/seriesBar":102,"./platformCharts/config/seriesBar.vue":102,"./platformCharts/config/seriesLine":106,"./platformCharts/config/seriesLine.vue":106,"./platformCharts/config/seriesPie":83,"./platformCharts/config/seriesPie.vue":83,"./platformCharts/config/seriesRadar":107,"./platformCharts/config/seriesRadar.vue":107,"./platformCharts/config/shade":80,"./platformCharts/config/shade.vue":80,"./platformCharts/config/title":73,"./platformCharts/config/title.vue":73,"./platformCharts/config/xAxis":78,"./platformCharts/config/xAxis.vue":78,"./platformCharts/config/yAxis":79,"./platformCharts/config/yAxis.vue":79,"./platformCharts/customChartEdit":256,"./platformCharts/customChartEdit.vue":256,"./platformCharts/dataGridConfigAttachRequestParams":218,"./platformCharts/dataGridConfigAttachRequestParams.vue":218,"./platformCharts/mapChartEdit":219,"./platformCharts/mapChartEdit.vue":219,"./platformCharts/mixinAxisEdit":220,"./platformCharts/mixinAxisEdit.vue":220,"./platformCharts/pieEdit":221,"./platformCharts/pieEdit.vue":221,"./platformCharts/polylineEdit":222,"./platformCharts/polylineEdit.vue":222,"./platformCharts/previewChart":72,"./platformCharts/previewChart.vue":72,"./platformCharts/radarEdit":223,"./platformCharts/radarEdit.vue":223,"./platformCharts/scatterEdit":224,"./platformCharts/scatterEdit.vue":224,"./qrcodeEdit":225,"./qrcodeEdit.vue":225,"./registerDatabaseEdit":226,"./registerDatabaseEdit.vue":226,"./smsTowLevelTabPanelEdit":227,"./smsTowLevelTabPanelEdit.vue":227,"./stateManageEdit":228,"./stateManageEdit.vue":228,"./staticDataFormItem":229,"./staticDataFormItem.vue":229,"./staticListData":96,"./staticListData.vue":96,"./staticTreeData":230,"./staticTreeData.vue":230,"./staticTreeTable":231,"./staticTreeTable.vue":231,"./subTableRedundanceFields":232,"./subTableRedundanceFields.vue":232,"./superSearchEnumItems":233,"./superSearchEnumItems.vue":233,"./superSearchSetting":234,"./superSearchSetting.vue":234,"./tabPanelEdit":235,"./tabPanelEdit.vue":235,"./tableCellSet":236,"./tableCellSet.vue":236,"./tableColumnsInfo":237,"./tableColumnsInfo.vue":237,"./tableRowsInfo":238,"./tableRowsInfo.vue":238,"./tabsListSetting":239,"./tabsListSetting.vue":239,"./toUrlEdit":240,"./toUrlEdit.vue":240,"./treeDataSource":241,"./treeDataSource.vue":241,"./treeIconEdit":242,"./treeIconEdit.vue":242,"./treeImgList":243,"./treeImgList.vue":243,"./treeImgSet":244,"./treeImgSet.vue":244,"./treeSelectorEdit":245,"./treeSelectorEdit.vue":245,"./treeSelectorEdit1":246,"./treeSelectorEdit1.vue":246,"./ueditorToolbar":247,"./ueditorToolbar.vue":247,"./uploadFileAttr":248,"./uploadFileAttr.vue":248,"./useLayoutTpl":249,"./useLayoutTpl.vue":249,"./validateRuleEdit":250,"./validateRuleEdit.vue":250,"./validateRuleEditNew":251,"./validateRuleEditNew.vue":251,"./valueAttribute":252,"./valueAttribute.vue":252,"./valueCorrectionSetting":253,"./valueCorrectionSetting.vue":253,"./verticalSubColumnsEdit":254,"./verticalSubColumnsEdit.vue":254};function s(t){return a(t).then(n)}function a(t){return n.e(8).then((function(){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}))}s.keys=function(){return Object.keys(i)},s.resolve=a,s.id=346,t.exports=s},347:function(t,e,n){"use strict";n.r(e)},348:function(t,e,n){var i=n(349);"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n(19).default;s("a8dc642a",i,!0,{sourceMap:!1,shadowMode:!1})},349:function(t,e,n){"use strict";n.r(e)},350:function(t,e,n){"use strict";n.r(e);var i,s=n(2),a=n.n(s),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReload?t._e():n("dsf-designer",t._b({attrs:{model:"design","open-designer-url":t.openDesignerUrl,"update-component-props":t.updateComponentProps,"prop-show":t.propShow}},"dsf-designer",this.$attrs,!1))},r=[],l={name:"Designer",inheritAttrs:!1,data:function(){return{isReload:!1,openDesignerUrl:""}},beforeCreate:function(){},created:function(){this.openDesignerUrl="~/designer.html#/pc/page"},mounted:function(){},beforeRouteEnter:function(t,e,n){e.name==t.name?n((function(t){t.isReload=!0,t.$nextTick((function(){t.isReload=!1}))})):n((function(t){t.isReload=!1}))},beforeRouteUpdate:function(t,e,n){var i=this;this.isReload=!0,this.$nextTick((function(){i.isReload=!1})),n()},methods:{updateComponentProps:function(t){try{var e=window.opener;e&&null!==e&&void 0!==e&&e.$setComponentProps&&dsf.recursionComponentProps(t,(function(t){e.$setComponentProps(t)}))}catch(n){}},propShow:function(t,e){var n=null;try{n=window.opener}catch(o){n=null}if(n){var i,s,a=null===(i=n)||void 0===i||null===(s=i.$setDesignPropShowAndHide)||void 0===s?void 0:s.call(i,t,prop);return a}}}},u=l,c=n(0),d=Object(c["a"])(u,o,r,!1,null,null,null),p=d.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isReload?t._e():n("dsf-designer",t._b({attrs:{model:"design","open-designer-url":t.openDesignerUrl}},"dsf-designer",this.$attrs,!1))},f=[],m="ontouchstart"in window;document.createTouch||(document.createTouch=function(t,e,n,i,s,a,o){return new v(e,n,{pageX:i,pageY:s,screenX:a,screenY:o,clientX:i-window.pageXOffset,clientY:s-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var t=g(),e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length=arguments.length,t});var v=function(t,e,n,i,s){i=i||0,s=s||0,this.identifier=e,this.target=t,this.clientX=n.clientX+i,this.clientY=n.clientY+s,this.screenX=n.screenX+i,this.screenY=n.screenY+s,this.pageX=n.pageX+i,this.pageY=n.pageY+s};function g(){var t=[];return t["item"]=function(t){return this[t]||null},t["identifiedTouch"]=function(t){return this[t+1]||null},t}var y=!1,b={touchstart:function(t){y=!0,(!i||i&&!i.dispatchEvent)&&(i=t.target),w("touchstart",t)},touchmove:function(t){y&&w("touchmove",t)},touchend:function(t){y&&(y=!1,w("touchend",t),i=null)}};function w(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.touches=k(e),n.targetTouches=k(e),n.changedTouches=x(e),i.dispatchEvent(n)}function x(t){var e=g();return e.push(new v(i,1,t,0,0)),e}function k(t){return"mouseup"===t.type?g():x(t)}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;m||(this.el=t,t.addEventListener("mousedown",b.touchstart,!0),t.addEventListener("mousemove",b.touchmove,!0),t.addEventListener("mouseup",b.touchend,!0))}C["multiTouchOffset"]=75,C.prototype.unbind=function(){if(!m){var t=this.el;t.removeEventListener("mousedown",b.touchstart,!0),t.removeEventListener("mousemove",b.touchmove,!0),t.removeEventListener("mouseup",b.touchend,!0)}};var S=C,T={name:"MobileDesigner",inheritAttrs:!1,data:function(){return{isReload:!1,openDesignerUrl:""}},created:function(){this.openDesignerUrl="~/designer.html#/mobile/page"},mounted:function(){this.__touchEmulator=new S(this.$el.querySelector(".designer-mobile-wrap"))},beforeDestroy:function(){this.__touchEmulator.unbind()},beforeRouteEnter:function(t,e,n){e.name==t.name?n((function(t){t.isReload=!0,t.$nextTick((function(){t.isReload=!1}))})):n((function(t){t.isReload=!1}))},beforeRouteUpdate:function(t,e,n){var i=this;this.isReload=!0,this.$nextTick((function(){i.isReload=!1})),n()}},E=T,D=Object(c["a"])(E,h,f,!1,null,null,null),O=D.exports,P=[{path:"/pc/page",name:"Designer",component:p,meta:{title:"页面设计器"},props:function(t){return{business:t.query.B,module:t.query.M,pageName:t.query.pname,pageTitle:t.query.title,mobile:!1,isPrototype:1==t.query._prototype,tpl:1==t.query.tpl,tplCode:t.query.tplcode,tplId:t.query.tplid,templateType:t.query.templateType,layoutType:"page"}}},{path:"/mobile/page",name:"MobileDesigner",component:O,meta:{title:"移动端页面设计器"},props:function(t){return{business:t.query.B,module:t.query.M,pageName:t.query.pname,mobile:!0,_prototype_:1==t.query._prototype,tpl:1==t.query.tpl,tplCode:t.query.tplcode,tplId:t.query.tplid,layoutType:"page",templateType:t.query.templateType}}},{path:"/pc/preview",name:"DsfLayoutPreView",meta:{title:"预览"},component:function(){return n.e(11).then(n.bind(null,992))},props:function(t){return{mobile:"1"==t.query["mobile"],tpl:"1"==t.query["tpl"]}}},{path:"/mobile/preview",name:"DsfMobileLayoutPreView",meta:{title:"预览"},component:function(){return n.e(11).then(n.bind(null,993))}},{path:"/excelEditor",name:"excelEditor",component:function(){return Promise.all([n.e(73),n.e(10)]).then(n.bind(null,96))}},{path:"/seatDesign",name:"DsfSeatDesign",meta:{title:"排座设计器"},component:function(){return Promise.all([n.e(73),n.e(10)]).then(n.bind(null,952))}},{path:"/seatView",name:"DsfSeatView",meta:{title:"排座"},component:function(){return Promise.all([n.e(73),n.e(10)]).then(n.bind(null,954))}},{path:"/printingDesign",name:"DsfPrintingDesign",meta:{title:"证书套打设计器"},component:function(){return Promise.all([n.e(73),n.e(10)]).then(n.bind(null,953))}},{path:"/flow",name:"Flow",meta:{title:"流程设计器"},component:function(){return Promise.all([n.e(72),n.e(9)]).then(n.bind(null,957))}},{path:"/flow-pre",name:"FlowPreview",meta:{title:"流程显示",isPreview:!0},component:function(){return Promise.all([n.e(72),n.e(9)]).then(n.bind(null,994))}},{path:"/mobilesetting",name:"MobileSetting",meta:{title:"移动端设置"},component:function(){return Promise.resolve().then(n.bind(null,64))}}],L=P,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dsf-designer-frame",{ref:"designerPanel",attrs:{loading:t.loading,mobile:t.mobile},scopedSlots:t._u([{key:"top",fn:function(){return[t._t("top",(function(){return[n("div",{staticClass:"designer_tools_left"},[n("DsfDesignerButtons",{attrs:{designer:t._self,"show-button":t.showButton,buttons:t.tpl?t.templateButtons:t.buttons}})],1),n("div",{staticClass:"designer_tools_center"}),n("div",{staticClass:"designer_tools_right"},[t.showViewModeController?n("dsf-designer-switch",{attrs:{"active-value":t.dsf.enums.viewMode.PROTOTYPE,"inactive-value":t.dsf.enums.viewMode.DEVELOP,icon:"buju",title:"设计模式"},model:{value:t.currPageMode,callback:function(e){t.currPageMode=e},expression:"currPageMode"}}):t._e(),t.showAuxiliaryController?n("dsf-designer-switch",{attrs:{icon:"zidingyi",title:"辅助工具"},model:{value:t.auxiliary,callback:function(e){t.auxiliary=e},expression:"auxiliary"}}):t._e()],1)]}),{owner:t._self})]},proxy:!0},{key:"nav",fn:function(){},proxy:!0},{key:"left",fn:function(){return[t._t("left",(function(){return[n("dsf-designer-left",{ref:"leftTools",on:{"id-change":function(e){t.leftActiveId=e}}},[n("dsf-designer-left-item",{attrs:{id:"comp",icon:"icon-buju",title:"组件","head-title":"组件库"}},[n("dsf-designer-left-tools",{directives:[{name:"show",rawName:"v-show",value:t.showToolBar,expression:"showToolBar"}],staticClass:"has-head"})],1),t.showOutlineTree?n("dsf-designer-left-item",{attrs:{id:"outline",icon:"icon-zuzhiqunzu",title:"大纲","head-title":"大纲树"}},[n("dsf-designer-left-outline",{ref:"outline",staticClass:"has-head"})],1):t._e(),n("dsf-designer-left-item",{attrs:{id:"logic",icon:"icon-fenxiangfangshi",title:"逻辑","head-title":"逻辑设置"}},[n("dsf-designer-left-outline",{ref:"outline",staticClass:"has-head"})],1)],1)]}),{owner:t._self})]},proxy:!0},{key:"right",fn:function(){return[t._t("right",(function(){return[n("dsf-designer-right",[n("dsf-designer-right-item",{attrs:{icon:"icon-gongnengdingyi",title:"属性"}},[n("dsf-designer-properties",{directives:[{name:"show",rawName:"v-show",value:t.showProperties,expression:"showProperties"}],attrs:{data:t.attributesGroup,owner:t.attributesOwner,"prop-show":t.propShow}})],1)],1)]}),{owner:t._self})]},proxy:!0},{key:"append",fn:function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:t.dragProxy.show,expression:"dragProxy.show"}],ref:"dragProxy",staticClass:"drag-proxy",class:[t.dragProxy.class],style:t.dragProxy.style}),n("dsf-page-doc"),t._t("append",null,{owner:t._self})]},proxy:!0}],null,!0)},[[n("div",{directives:[{name:"show",rawName:"v-show",value:"logic"!=t.leftActiveId,expression:"leftActiveId != 'logic'"}],staticClass:"designer-page-margin-10"},[t._t("default",(function(){return[t.mobile?[n("dsf-phone-case",{staticClass:"designer-mobile-wrap",attrs:{disabled:t.auxiliary,height:"85%"}},[t.page?n("DsfLayoutTree",{ref:"viewProxy",style:t.layoutTreeStyle,attrs:{"is-design":!0,"component-props":t.page},on:{"update:componentProps":function(e){t.page=e},"update:component-props":function(e){t.page=e}},nativeOn:{dragstart:function(t){t.preventDefault()},mousedown:function(e){return t.mouseDownHanlder(e)},mousemove:function(e){return t.mouseMoveHanlder(e)},contextmenu:function(e){return t.contextMenuOpen(e)},click:function(e){return t.layoutTreeClickHandler(e)}}}):t._e()],1)]:[t.page?n("DsfLayoutTree",{ref:"viewProxy",style:t.layoutTreeStyle,attrs:{"is-design":!0,"component-props":t.page},on:{"update:componentProps":function(e){t.page=e},"update:component-props":function(e){t.page=e}},nativeOn:{dragstart:function(t){t.preventDefault()},mousedown:function(e){return t.mouseDownHanlder(e)},mousemove:function(e){return t.mouseMoveHanlder(e)},contextmenu:function(e){return t.contextMenuOpen(e)},click:function(e){return t.layoutTreeClickHandler(e)}}}):t._e()]]}))],2),n("dsf-designer-logic-setting",{directives:[{name:"show",rawName:"v-show",value:"logic"==t.leftActiveId,expression:"leftActiveId == 'logic'"}],attrs:{show:"logic"==t.leftActiveId}})]],2)},R=[],I=n(4),A=n.n(I),M=n(1),B=n.n(M),j=2,F=12;function V(){var t=this;$(this.$el).find(".ds-tool-item").draggable({addClasses:!1,appendTo:this.$el,distance:10,revert:"invalid",cursor:"default",containment:"window",cursorAt:{left:-20,top:-20},helper:function(t){var e=$(t.currentTarget),n=e.get(0).__vue__.data,i=e.clone();return i.addClass("proxy"),i.data("data",{state:"add",attributes:n}),i},start:function(e){t.dragProxy.style={},$(t.$el).addClass("designer-dragging");try{dsf.designer.broadcast(t,"clearMouseDownHandler",e,null)}catch(n){}},stop:function(){try{t.dragEnd()}catch(e){}finally{$(t.$el).removeClass("designer-dragging")}}})}function G(){var t=this,e=!1,n=this;$(this.$el).find(".designer-page").on("mousemove.tooldrag",(function(n){e&&(t.dragMouseMoveHandler(n),n.preventDefault())})).on("mouseout.tooldrag",(function(t){e&&t.preventDefault()})).droppable({tolerance:"pointer",accept:function(t,e,n){var i=t.hasClass("ds-desinger-drag-component");return i},drop:function(t,e){var i=e.helper.data("data")||e.draggable.data("data");"function"===typeof n.dvCustomDrag&&n.dvCustomDrag(i,t);var s=$(n.dragProxy_el),a=s.closest("[slot-name]"),o=a.attr("slot-name");if(o){var r;if(!i.state||!i.attributes)i=null===n||void 0===n||null===(r=n.customerDragDrop)||void 0===r?void 0:r.call(n,i);if(i){var l=dsf.designer.getParentControl(s);if(l)try{n.dropHandler(t,l,o,i)}catch(u){dsf.layer.pc.message(u.message,!1)}}}n.dragEnd()},activate:function(){e=!0},deactivate:function(){e=!1,n.dragEnd()}})}function z(t,e,n,i){var s,a=this,o=$(this.dragProxy_el).next(".designer-ctrl-proxy"),r=dsf.isDef(this.mobile)?this.mobile:(null===this||void 0===this||null===(s=this.$designer)||void 0===s?void 0:s.mobile)||!1;if($(this.dragProxy_el).is(":visible")){var l="";if("metadata"==i.attributes.type){var u,c=null===i||void 0===i||null===(u=i.attributes)||void 0===u||null===(u=u.data)||void 0===u||null===(u=u.controls)||void 0===u?void 0:u[0];if(dsf.isUnDef(null===c||void 0===c?void 0:c.value))throw new Error("元数据中缺失组件信息");l=c.value}else if("control"==i.attributes.type)l=i.attributes.data.code;else if("business"==i.attributes.type){var d=i.attributes.data.content;if(!d)throw new Error("业务组件中缺失组件信息");var p=JSON.parse(d);l=p.ctrlType}l=dsf.designer.getComponentCodeByClient(l,r);var h=dsf.checkAsyncComponent(l);h?dsf.requestAsyncComponents(h).then((function(){W.call(a,o.length?o:null,e,n,i)})):W.call(this,o.length?o:null,e,n,i)}}function U(){var t=this;this.dragProxy.show=!1,this.dragProxy.class="",this.dragProxy.style={},this.$nextTick((function(){$(t.dragProxy_el).appendTo(t.$el)}))}function K(t){var e=[],n=function t(n){n.forEach((function(n){n.children&&n.children.length>0?t(n.children):e.push(n)}))};return n(t),_.uniqBy(e,"_id")}function W(t,e,n,i){return q.apply(this,arguments)}function q(){return q=A()(B.a.mark((function t(e,n,i,s){var a,o,r,l,u,c,d,p,h,f,m,v,g,y,b,w,x,k,C=this;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=n._isVue?n:n.get(0).__vue__,o=a,r=null,l=null,e&&(u=e.get(0).__vue__,c=_.find(o.slots,(function(t){return t.name===i})),r=_.findIndex(c.controls,(function(t){return t===u.__context__.props}))),"add"==s.state)try{if("control"==s.attributes.type)l=J(s.attributes.data.code,{},this.mobile,this),l&&l.metadata&&(l.metadata.level=0),null!==s&&void 0!==s&&null!==(d=s.attributes)&&void 0!==d&&null!==(d=d.data)&&void 0!==d&&d.props&&(l=dsf.mix(!0,l,null===s||void 0===s||null===(h=s.attributes)||void 0===h||null===(h=h.data)||void 0===h?void 0:h.props)),f=dsf.getComponentDesignOptions(l.ctrlType),m=(null===f||void 0===f||null===(p=f.defaultInitProps)||void 0===p?void 0:p.call(f))||{},dsf.mix(!0,l,m),l&&this.addControl(o,i,l,r);else if("metadata"==s.attributes.type){if(g=s.attributes.data,y=null,y=g.currentControl?g.currentControl.value:g.controls[0].value,y.indexOf("dsf.")<0&&(y="dsf."+y),y=y.replace("dsf.mobile.","dsf."),l=J(y,{},this.mobile,this),g.content)try{b=JSON.parse(g.content||"{}"),w=b.metadata_validate||{},delete b.metadata_validate,dsf.mix(l,b),w&&(l.metadata.validate=w)}catch($){dsf.warn("元数据中的属性未能解析成功")}l.metadata.id=g.id,l.metadata.at=g.at,l.metadata.code=g.code,l.metadata.name=g.name,l.metadata.defaultValue=g.defaultValue,l.metadata.controls=g.controls,l.metadata.dataSource=g.dataSource,l.metadata.type=g.type,l.metadata.order=g.order,l.metadata.isFromMetaData=!0,l.metadata.isuser=!1,l.metadata.currentControl=l.metadata.controls[0],l.metadata.level=0,l.metadata.valueAttributes=dsf.mix(!0,[],l.metadata.valueAttributes,g.valueAttributes),g.rmId&&(l.metadata.rmId=g.rmId),_.each((null===(v=l)||void 0===v||null===(v=v.metadata)||void 0===v?void 0:v.valueAttributes)||[],(function(t){"true"==t.encrypt?t.encrypt=!0:"false"==t.encrypt&&(t.encrypt=!1)})),l.metadata.rm_type=s.attributes.group.type_value,l.caption=g.code,l.label=g.name,l&&this.addControl(o,i,l,r)}else"business"==s.attributes.type&&(x=s.attributes.data,k=JSON.parse(x.content),dsf.recursionComponentProps(k,(function(t){var e=dsf.createComponent(t.ctrlType,t);dsf.mix(t,e),t.designId=dsf.uuid(),t.isBusiness=!0,t.isFormControl||(t.caption="")})),this.addControl(o,i,k,r))}catch($){dsf.error($)}else try{s.component.$$remove(),this.$nextTick((function(){s.attributes.metadata&&s.attributes.metadata.isuser&&delete s.attributes.metadata.isuser,C.addControl(o,i,s.attributes,r,!1)}))}catch($){dsf.error($)}case 4:case"end":return t.stop()}}),t,this)}))),q.apply(this,arguments)}function H(t,e,n,i,s){return X.apply(this,arguments)}function X(){return X=A()(B.a.mark((function t(e,n,i,s,a){var o,r,l,u;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e||"",r=n||"",l=i||"",u=dsf.designer.getLayoutPath(o,r,l,s,a),t.abrupt("return",this.$http.get(u,null,{responseType:"text",cache:!1},dsf.config.serverCreateHtmlDir));case 5:case"end":return t.stop()}}),t,this)}))),X.apply(this,arguments)}function Y(t,e,n,i,s){return Q.apply(this,arguments)}function Q(){return Q=A()(B.a.mark((function t(e,n,i,s,a){var o;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=dsf.designer.getExtPath(e,n,i,s,a),t.abrupt("return",this.$http.get(o,null,{responseType:"text",cache:!1},dsf.config.serverCreateHtmlDir));case 2:case"end":return t.stop()}}),t,this)}))),Q.apply(this,arguments)}function J(t,e,n,i){var s=n?dsf.designer.createMobileComponent:dsf.designer.createComponent,a=dsf.mix(e,{designProxy:!0});return s(t,a,i)}function Z(t,e){return tt.apply(this,arguments)}function tt(){return tt=A()(B.a.mark((function t(e,n){var i;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=_.map(n,(function(t){return t.id})),t.abrupt("return",e.$webAPI.getComponents({strIds:i,terminal:e.mobile?"mobile":"pc"}).then((function(t){var e=t.data;return e})).catch((function(t){})));case 2:case"end":return t.stop()}}),t)}))),tt.apply(this,arguments)}function et(t,e){return nt.apply(this,arguments)}function nt(){return nt=A()(B.a.mark((function t(e,n){var i,s;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i=[],s=0;s<n.length;s++)"3"==n[s].type?i.push(e.$http.get("/rm/list/meta",{namespace:n[s].id})):"8"==n[s].type&&i.push(e.$http.get("/dbsource/rmId",{rmId:n[s].id}));return t.abrupt("return",e.$http.all(i));case 3:case"end":return t.stop()}}),t)}))),nt.apply(this,arguments)}function it(t,e){return st.apply(this,arguments)}function st(){return st=A()(B.a.mark((function t(e,n){var i;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=_.map(n,(function(t){return t.id})),t.abrupt("return",e.$webAPI.getBusinessComponets({strIds:i,terminal:e.mobile?"mobile":"pc"}).then((function(t){var e=t.data;return e})));case 2:case"end":return t.stop()}}),t)}))),st.apply(this,arguments)}function at(t,e){return ot.apply(this,arguments)}function ot(){return ot=A()(B.a.mark((function t(e,n){var i,s,a;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=8==n.type_value?n.dsfa_rm_id:n.ID,s={id:i,title:n.name,type:n.type_value,items:[]},_.each(n.metadata,(function(t){var e={type:"metadata",name:t.name,data:t,group:n,id:t.id};8==n.type_value&&(e.rmId=n.dsfa_rm_id),s.items.push(e)})),a=_.findIndex(e.useMetaGroup.groups,(function(t){return t.id==s.id})),a<0?e.useMetaGroup.groups.push(s):e.useMetaGroup.groups[a].items=s.items,e.$nextTick((function(){e.initToolDrag()}));case 6:case"end":return t.stop()}}),t)}))),ot.apply(this,arguments)}function rt(t,e){return lt.apply(this,arguments)}function lt(){return lt=A()(B.a.mark((function t(e,n){var i,s;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i={id:n.id,title:n.name,type:F,items:[]},_.each(n.components,(function(t){var e={type:"business",name:t.name,data:t,group:n,id:t.id,remark:$("<div>"+(t.remark||"暂无")+"</div>").text()};i.items.push(e)})),s=_.findIndex(e.useBusinessControlGroup.groups,(function(t){return t.id==i.id})),s<0?e.useBusinessControlGroup.groups.push(i):e.useBusinessControlGroup.groups[s].items=i.items,e.$nextTick((function(){e.initToolDrag()}));case 5:case"end":return t.stop()}}),t)}))),lt.apply(this,arguments)}function ut(t,e,n){return ct.apply(this,arguments)}function ct(){return ct=A()(B.a.mark((function t(e,n,i){var s,a,o,r,l;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s={id:n.id,title:n.name,type:i,items:[]},a=0;case 2:if(!(a<n.components.length)){t.next=12;break}if(o=n.components[a],!dsf.config.designer.controlsVersionFilter){t.next=7;break}if(dsf.isDsf5(o.version)){t.next=7;break}return t.abrupt("continue",9);case 7:r={type:"control",name:o.name,data:o,group:n,id:o.id,mode:o.mode,remark:$("<div>"+(o.remark||"暂无")+"</div>").text()},s.items.push(r);case 9:a++,t.next=2;break;case 12:s.items.length>0&&(l=_.findIndex(e.useControlsGroup.groups,(function(t){return t.id==s.id})),l<0?e.useControlsGroup.groups.push(s):e.useControlsGroup.groups[l].items=s.items),e.$nextTick((function(){e.initToolDrag()}));case 14:case"end":return t.stop()}}),t)}))),ct.apply(this,arguments)}var dt={props:{business:{type:String,default:""},module:{type:String,default:""},pageName:{type:String,default:""},pageTitle:{type:String,default:""},isPrototype:{type:Boolean,default:!1},tpl:{type:Boolean,default:!1},tplCode:{type:String,default:""},tplId:{type:String,default:""},templateType:{type:String,default:""},mobile:{type:Boolean,default:!1},layoutType:{type:String,default:"page"},pageComponent:{type:String,default:"dsf.page"},postSaveBefore:{type:Function,default:null},updateComponentProps:{type:Function,default:null},propShow:{type:Function,default:null},saveRequest:{type:Function,default:null},customerDragDrop:{type:Function,default:null},openDesignerUrl:{type:String,default:""},showControlGroup:{type:Boolean,default:!0},showBusinessControlGroup:{type:Boolean,default:!0},showMetaGroup:{type:Boolean,default:!0},metadataDifferentSources:{type:Boolean,default:!0},showViewModeController:{type:Boolean,default:!0},showAuxiliaryController:{type:Boolean,default:!0},renderTopButtons:{type:Function,default:null},addControlAfter:{type:Function,default:null},addControlBefore:{type:Function,default:null},isLocked:{type:Function,default:null},loadProps:{type:Function,default:null},propertyJsonPath:{type:String,default:""},requestBusinessComponent:{type:Function,default:it},allowSaveBusinessControl:{type:Boolean,default:!0},showOutlineTree:{type:Boolean,default:!0},disabledCtrlGroupRemove:{type:Boolean,default:!1}},data:function(){return this.mousedown={target:null},this._layoutInfo=null,this.layoutChangeTimer=null,this.undoAndredo=!1,{staticData:{},loading:!0,userSaving:!1,autoSaving:!1,initPageMode:dsf.enums.viewMode.DEVELOP,pageDocument:"",cacheFlow:{},pageStateSetting:[],page:null,undoList:[],undoIndex:1,defaultPageAttrs:{caption:"page",name:this.pageName,title:this.pageTitle||this.$route.query.title,context:{B:this.business,M:this.module}},dragProxy:{show:!1,class:"",style:{}},allComponentProps:{},allComponents:{},selectedComponentInstance:null,undoAndredo:!1,showToolBar:!1,showProperties:!1,isNewPage:!1,showLogic:{}}},computed:{nameSpace:function(){var t=this.business,e=this.module.replace(/\//g,".");return[t,e].join(".")},isQuestionDesigner:function(){return"question"==this.layoutType},isPrototypeDesigner:function(){return!0===this.isPrototype},isTemplate:function(){return!0===this.tpl},$saving:function(){return this.autoSaving||this.userSaving},$allowSaveBusinessControl:function(){var t,e;return!!this.allowSaveBusinessControl&&(null===this||void 0===this||null===(t=this.btnsAuths)||void 0===t||null===(e=t.includes)||void 0===e?void 0:e.call(t,"5"))}},created:function(){this.initPageMode=this.isPrototypeDesigner?dsf.enums.viewMode.PROTOTYPE:dsf.enums.viewMode.DEVELOP;var t=this.recordPageChange;this.recordPageChange=_.debounce(t,300),this.$eventBus.$on("designer-proxy-hidden",this.proxyHiddenHandler),this.$eventBus.$on("designer-proxy-show",this.proxyShowHandler)},beforeDestroy:function(){this.$eventBus.$off("designer-proxy-hidden",this.proxyHiddenHandler),this.$eventBus.$off("designer-proxy-show",this.proxyShowHandler),this.layoutChangeTimer&&window.clearInterval(this.layoutChangeTimer)},methods:{watchLayoutChange:function(){var t=this;this.layoutChangeTimer=window.setInterval((function(){if(!t.userSaving){var e=JSON.stringify(dsf.designer.getLayoutInfo(t.$refs.viewProxy));e!=t._layoutInfo&&(t._layoutInfo=e,t.$emit("designer-layout-change"))}}),1e4)},proxyHiddenHandler:function(){this.dragProxy.show=!1,this.dragProxy.class=""},proxyShowHandler:function(t){this.dragProxy.show=!0,this.dragProxy.class=t.class},recordPageChange:function(){var t,e=500,n=JSON.stringify(this.page);(null===(t=this.undoList)||void 0===t?void 0:t[this.undoList.length-1])!=n&&(this.undoList=this.undoList.slice(0,this.undoIndex+1),this.undoList[0]?this.undoList[this.undoList.length-1]!=n&&this.undoList.push(n):this.undoList.push(n),this.undoList.length>e&&this.undoList.splice(0,this.undoList.length-e),this.undoIndex=this.undoList.length-1)},undo:function(){var t=this.undoIndex-1;t<0&&(t=0,dsf.layer.message("已经没有可以回退的步骤了",!1));var e=this.undoList[t];e&&(this.undoIndex=t,e=JSON.parse(e),this.$set(this,"page",e))},redo:function(){var t=this,e=this.undoIndex+1;e>this.undoList.length-1&&(e=this.undoList.length-1,dsf.layer.message("已经没有可以前进的步骤了",!1));var n=this.undoList[e];n&&(this.undoIndex=e,n=JSON.parse(n),this.$set(this,"page",n),this.$nextTick((function(){t.undoAndredo=!1})))},designerLoaded:function(){this.selectedComponent($(this.$refs.viewProxy.$el)),this.$eventBus.$emit("update-desinger-outline",this),this.recordPageChange(),this._layoutInfo=JSON.stringify(dsf.designer.getLayoutInfo(this.$refs.viewProxy)),this.watchLayoutChange(),this.$emit("loaded"),this.showToolBar=!0,this.showProperties=!0},loadLayout:function(){var t=this;return A()(B.a.mark((function e(){var n,i,s,a,o,r,l,u,c,d,p,h,_,f,m,v,g,y,b,w,x,k;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,i=t.business,s=t.module,a=t.pageName,t.pageTitle||t.$route.query.title,e.next=7,dsf.requestAsyncComponents($components.platform.DsfTextbox);case 7:if(t.page=t.loadEmptyDesigner(t.pageComponent,t.defaultPageAttrs,t.initPageMode),!(i&&s&&a)){e.next=86;break}return o=null,r=null,l=null,u=null,c=null,d=null,p=null,h=t.tplCode,_=t.tplId,f=t.tplId?t.tplId.split(","):[],e.prev=19,e.next=22,H.call(t,i,s,a,t.mobile,t.tpl);case 22:p=e.sent,t.isNewPage=!1,e.next=30;break;case 26:e.prev=26,e.t0=e["catch"](19),p=null,t.isNewPage=!0;case 30:if(!p){e.next=77;break}return e.next=33,dsf.designer.analysisLayoutInfo(p);case 33:if(m=e.sent,o=dsf.fillComponentDefaultProps(m.layout),r=m.scss,l=m.showLogic,c=m.designer,u=m.staticValue,d=m.doc,t.tpl){e.next=49;break}return e.next=43,Y.call(t,i,s,a,t.mobile,t.tpl);case 43:v=e.sent,g=v.data,t.extJsCode=g,t.staticData=u,t.showLogic=l,t.pageDocument=d;case 49:if(!o){e.next=75;break}if(y=[i,s.replace(/\./g,"/"),a],t.tpl){e.next=54;break}return e.next=54,n.selectButtonsAndBusiness(1,y.join("/"));case 54:if(b=t.createComponent(t.pageComponent,o,t.mobile),t.page=b,t.extScssCode=r||"",w=dsf.isEmptyObject(c.controlGroup)||!c.controlGroup?[]:c.controlGroup,!t.showControlGroup){e.next=61;break}return e.next=61,t.loadControlGrooup(w);case 61:if(!t.showMetaGroup){e.next=65;break}return x=c.metadataGroup||[],e.next=65,t.loadMetaDataGroup(x);case 65:if(!t.showBusinessControlGroup){e.next=69;break}return k=c.businessControlGroup||[],e.next=69,t.loadBusinessComponetGroup(k);case 69:t.getStateManage(),t.fromTemplateId=c.fromTemplateId||"",t.firstOpen=!1,t.saved=!0,t.updateComponentProps&&t.updateComponentProps(t.page),t.$nextTick((function(){t.designerLoaded()}));case 75:e.next=86;break;case 77:if(t.tpl||!h||!_||1!=f.length){e.next=85;break}return t.fromTemplateId="",t.firstOpen=!0,t.saved=!1,t.tplId.split(","),e.abrupt("return",t.loadTemplateContent({path:t.tplCode.replace(/\./g,"/"),_id:t.tplId}).then((function(e){t.page=e,t.fromTemplateId=t.tplCode})).catch((function(e){t.page=t.loadEmptyDesigner(t.pageComponent,t.defaultPageAttrs,t.initPageMode)})).finally((function(){t.updateComponentProps&&t.updateComponentProps(t.page),t.$nextTick((function(){t.designerLoaded()}))})));case 85:t.tpl||t.tplCode&&t.tplId&&!(f.length>1)?(t.fromTemplateId="",t.firstOpen=!0,t.saved=!1,t.page=t.loadEmptyDesigner(t.pageComponent,t.defaultPageAttrs,t.initPageMode),t.updateComponentProps&&t.updateComponentProps(t.page),t.$nextTick((function(){t.designerLoaded()}))):(t.fromTemplateId="",t.firstOpen=!0,t.saved=!1,t.openTemplateDialog(!1,!1).then((function(e){t.page=e})).catch((function(e){t.page=t.loadEmptyDesigner(t.pageComponent,t.defaultPageAttrs,t.initPageMode)})).finally((function(){t.updateComponentProps&&t.updateComponentProps(t.page),t.$nextTick((function(){t.designerLoaded()}))})));case 86:case"end":return e.stop()}}),e,null,[[19,26]])})))()},loadEmptyDesigner:function(t,e,n){t=t||this.pageComponent;var i=this.createComponent(t,e,this.mobile),s=i;return n=n||this.initPageMode,s.mode=n,this.loadControlGrooup.call([]),s},clearCustom:function(){dsf.layer.message("功能建设中",!1)},openStateManage:function(){var t=this,e=this;this.$nextTick().then((function(){t.$openDialog({title:"规则设置",content:"DesStateManageEdit",width:"50vw",height:"60vh",params:{designer:t,setting:t.pageStateSetting||[]},btns:[{text:"确定",handler:function(t){e.pageStateSetting=t.yes()}},{text:"取消"}]})}))},loadTemplateContent:function(t){var e=this;return new Promise((function(n,i){var s=t.path.split("/"),a=t._id;e.templateId=a;var o=s.shift(),r=s.pop(),l=s.join("."),u=null,c=null;H.call(e,o,l,r,e.mobile,!0).then((function(t){return dsf.designer.analysisLayoutInfo(t)})).then((function(n){var i=n;u=dsf.fillComponentDefaultProps(i.layout),i.scss,i.showLogic,c=i.designer,e.fromTemplateId=t.ID||t.code})).catch((function(t){var e="未找到模板文件或者读取模板失败";dsf.layer.pc.message(e,!1),dsf.error(t),i(e)})).finally(A()(B.a.mark((function t(){var s,o,r,l,d,p,h,_;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!u){t.next=19;break}if(e.tpl){t.next=4;break}return t.next=4,e.selectButtonsAndBusiness(0,a);case 4:s=e.page.context,o=e.page.name,r=e.page.title,l=e.page.mode,e.page=null,d=dsf.isEmptyObject(c.controlGroup)||!c.controlGroup?[]:c.controlGroup,p=c.metadataGroup||[],h=c.businessControlGroup||[],_=[],e.showControlGroup&&_.push(e.loadControlGrooup(d)),e.showMetaGroup&&_.push(e.loadMetaDataGroup(p)),e.showBusinessControlGroup&&_.push(e.loadBusinessComponetGroup(h)),Promise.all(_).then((function(){dsf.mix(u,{context:s,name:o,title:r,mode:l});var t=e.createComponent(e.pageComponent,u,e.mobile);n(t)})),t.next=20;break;case 19:i();case 20:case"end":return t.stop()}}),t)}))))}))},useTpl:function(){var t=this;this.openTemplateDialog(!0,!0).then((function(e){t.page=e})).catch((function(e){t.page=t.loadEmptyDesigner(t.pageComponent,t.defaultPageAttrs,t.initPageMode,!0)})).finally((function(){t.updateComponentProps&&t.updateComponentProps(t.page),t.$nextTick((function(){t.designerLoaded()}))}))},openTemplateDialog:function(t,e){var n=this;return new Promise((function(i,s){var a=[{text:"确定",handler:function(){var t=A()(B.a.mark((function t(e){var a;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.yes(),!_.isNull(a)){t.next=6;break}return dsf.layer.message("请选择一个模板",!1),t.abrupt("return",!1);case 6:n.loading=!0,n.loadTemplateContent(a).then((function(t){i(t)})).catch((function(t){s(t)})).finally((function(){n.loading=!1}));case 8:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}];!1!==e&&a.push({text:"取消"}),dsf.layer.openDialog({title:"选择布局模板",fullscreen:!1,content:"DesUseLayoutTpl",params:{isMobile:n.mobile,templateType:n.templateType,fileType:n.mobile?12:11,isImageList:!1,selectModel:"explorer",designer:n},width:"900px",height:"550px",showClose:!1!==t,btns:a})}))},selectButtonsAndBusiness:function(t,e){var n=this;return A()(B.a.mark((function i(){var s,o,r,l,u,c,d;return B.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.$webAPI.selectButtonsAndBusiness({type:t,id:e});case 2:s=i.sent,s.success&&(o=s.data||[],r=[],l=[],o[0]&&(r=s.data[0].templateInitSubPermissionsVOS.map((function(t){return t.auth}))),u=r.reduce((function(t,e){return[].concat(a()(t),a()(e.split("^")))}),[]),u=Array.from(new Set(u)),n.btnsAuths=u,o[1]&&(l=o[1].templateInitSubPermissionsVOS.filter((function(t){return 0!=t.auth}))),c=new Map([[1,"controls"],[2,"business"],[10,"metadata"]]),l.length?(n.layout.toolsBox.activeName=c.get(l[0].subType),d=l.map((function(t){return{name:c.get(t.subType),label:t.subTypeName}})),n.$set(n.layout.toolsBox,"tabs",d)):n.$set(n.layout.toolsBox,"tabs",[]));case 4:case"end":return i.stop()}}),i)})))()},saveBusinessComponent:function(){var t=this;this.$openDialog({title:"组件选择",width:"1000px",height:"50vh",params:{designer:this},content:"DesComponents",btns:[{text:"确定",handler:function(e){var n=e.validate();if(!1===n)return!1;var i=e.yes();i.length&&(_.each(i,(function(t){t.props.metadata.id="",t.props.metadata.at="",t.props.metadata_fullcode="",delete t.metadata.isFromMetaData,delete t.metadata.isuser})),window.setTimeout((function(){t.saveToBusinessComponentGroup(i)}),1e3))}},{text:"取消"}]})},saveBusinessComponentSingle:function(t,e){var n=this;this.$openDialog({width:"400px",height:"400px",title:"保存业务组件",params:{label:e||"",ctrl:t},content:"DesBusinessComponentSingle",btns:[{text:"确定",handler:function(t){var e=t.validate();if(!1===e)return!1;var i=t.yes();i&&(i.props.metadata&&(i.props.metadata.id="",i.props.metadata.at="",i.props.metadata_fullcode=""),delete i.isFromMetaData,window.setTimeout((function(){n.saveToBusinessComponentGroup([i])}),1e3))}},{text:"取消"}]})},saveToBusinessComponentGroup:function(t){dsf.designer.saveToBusinessComponentGroup(this,t)},openComponentSelect:function(){var t=this,e=this.business,n=this.module,i=this.pageName,s=this.tpl?"":this.templateId||[e,n.replace(/\./g,"/"),i].join("/");dsf.layer.openDialog({title:"选择组件",fullscreen:!1,content:"DesCustomComponent",width:"900px",params:{code:s,selectModel:"explorer"},btns:[{text:"确定",handler:function(e){var n=e.yes(),i="0"==e.tabIndex?j:F;if(!(n.length>0))return dsf.layer.message("请选择一个组件",!1),!1;var s=K.call(t,n),a=_.map(s,(function(t){return{id:t._id,type:i}}));i==F?t.loadBusinessComponetGroup(a):t.loadControlGrooup(a)}},{text:"取消"}]})},removeControlGroup:function(t){var e=this;dsf.layer.pc.confirm("确定要删除该控件组吗?").then((function(){dsf.array.removeWith(e.useControlsGroup.groups,(function(e){return e.id==t.id}))})).catch((function(){}))},removeBusinessGroup:function(t){var e=this;dsf.layer.pc.confirm("确定要删除该业务组件吗?").then((function(){dsf.array.remove(e.useBusinessControlGroup.groups,(function(e){return e.id==t.id}))})).catch((function(){}))},openMateGroupSelect:function(){var t=this;dsf.layer.openDialog({title:"选择元数据组",fullscreen:!1,content:"DesMetaDataSelect",width:"900px",params:{selectModel:"explorer"},btns:[{text:"确定",handler:function(e){var n=e.yes();if(n.length>0){var i=K.call(t,n),s=_.map(i,(function(t){return{id:"8"==t.type_value?t.dsfa_rm_id:t.ID,type:t.type_value}}));t.loadMetaDataGroup(s)}}},{text:"取消"}]})},removeMetaDataGroup:function(t){var e=this;dsf.layer.pc.confirm("确定要删除该元数据吗?").then((function(){dsf.array.removeWith(e.useMetaGroup.groups,(function(e){return e.id==t.id}))})).catch((function(){}))},getComponentsByNode:function(t){var e=[];function n(t){e.push(t),_.each(t.slots||[],(function(t){_.each(t.controls,(function(t){n(t)}))}))}return n(t||this.page),e},createComponent:function(t,e,n){return J(t,e,this.mobile,n)},showButton:function(t){var e=["pc","mobile"];t.client&&(e=t.client);var n=this.mobile?"mobile":"pc";return!!e.includes(n)&&!(t.value&&!this.btnsAuths.includes(t.value))},clearSelectedSlot:function(){var t=document.querySelectorAll("[slot-name]");_.each(t,(function(t){t.classList.remove("ds-slot-selected")}))},selectedSlot:function(t){if("TR"!=t.get(0).tagName){var e=t.attr("slot-name");if(e){var n=dsf.designer.isAllowDrop(t,e,this);if(n){var i=dsf.designer.getParentControl(t);if(i){var s=$(i.$el);if(s.is("[slot-name='".concat(e,"']")))return s.addClass("ds-slot-selected"),s;var a=s.find("[slot-name='".concat(e,"']")),o=null;return a.each((function(t,e){var n=e.closest(".ds-control");if(n.__vue__){var s=n.__vue__.$layoutTree||n.__vue__;s==i&&(o=$(e))}})),o&&o.get(0)&&o.eq(0).addClass("ds-slot-selected"),o}}}return null}},clearSelectedComponent:function(){var t=$(this.$el).find(".designer-ctrl-proxy,.design-no-proxy");t.each((function(t,e){var n=e.__vue__;if(!n.layoutProxy)while(!n.isDsf)if(n=n.$parent,!n)break;n&&(n=n.$layoutTree?n.$layoutTree:n,n&&(n.__desContext__.selected=!1))}))},$getEventTarget:function(t){var e=$(t).closest(".ds-text-content"),n=e.length>0;return n&&(t=e.parent().get(0)),t},layoutTreeClickHandler:function(t){var e=this,n=n=$(t.target),i=t.ctrlKey||t.metaKey;if(i)this.clearSelectedSlot(),this.$nextTick((function(){e.selectedComponent(n,i)}));else{this.clearSelectedSlot(),this.clearSelectedComponent();this.selectedSlot(n);this.selectedComponent(n,i)}t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},selectedComponent:function(t,e,n){var i=this,s=null,a=!1;if(n){var o=t.is(".design-no-proxy");o&&(a=!0,s=$(t))}if(a||(s=t.closest(".designer-ctrl-proxy")),s.length){var r=s.get(0).__vue__;r.$layoutTree&&(r=r.$layoutTree);var l=r.__desContext__.selected;if(r){if(r.isView||(e?(r.__desContext__.selected=!l,r.__desContext__.selected&&this.filterSelectedParentAndChild(r)):r.__desContext__.selected=!0),r.treeProxy)return;if(1==r.__desContext__.selected||r.isView){var u,c,d=this.mobile?"mobile":"pc";this.selectedComponentInstance=null===(u=r)||void 0===u||null===(c=u.$$getComponent)||void 0===c?void 0:c.call(u),dsf.designer.getComponentPropries(this,r.ctrlType,d).then((function(t){var e,n=t.data;if(r){r.$$getComponent&&r.$$getComponent()}null===i||void 0===i||null===(e=i.loadProps)||void 0===e||e.call(i,i.selectedComponentInstance,n),n.forEach((function(t){return t.attributes.forEach((function(t){i.format(t,r)}))})),i.attributesGroup=n||[],i.attributesOwner=r})).catch((function(t){i.attributesGroup=[],i.attributesOwner=r,dsf.error(t)}))}}return dsf.isElementEditable(t)||this.$el.focus(),r}},format:function(t,e){var n=this;t.dictionaryControl&&t.dictionary&&0===t.dictionary.length&&(t.dictionary=[],dsf.recursionComponentProps(e.$$getComponent().$page.$props,(function(e){var i;(e.isFormControl&&"wfinfo"!==e.caption&&"DsfDisposeIdea"!==e.ctrlName&&"DsfMobileDisposeIdea"!==e.ctrlName&&"DsfFormCommentBox"!==e.ctrlName&&("oldFlow"in t||t.dictionary.push({id:e.designId,text:"".concat(e.label,"(").concat(e.caption,")"),value:e.caption})),"wfinfo"===e.caption&&"oldFlow"in t)&&(n.cacheFlow.WFID!==e.chooseFlow.dsfa_rm_id?n.$http.get("wfk/getWFNodeList",{sID:e.chooseFlow.dsfa_rm_id}).then((function(e){e.data.success&&(e.data.data&&e.data.data.NodeList&&e.data.data.NodeList.forEach((function(e){t.dictionary.push({id:e.NodeID,text:e.NodeName,value:e.NodeID})})),n.cacheFlow=e.data.data)})):null===(i=n.cacheFlow)||void 0===i||null===(i=i.NodeList)||void 0===i||i.forEach((function(e){t.dictionary.push({id:e.NodeID,text:e.NodeName,value:e.NodeID})})))})))},getSelectionComponents:function(){var t=document.querySelectorAll(".ds-control-selected"),e=_.map(t,(function(t){var e=null===t||void 0===t?void 0:t.__vue__;return e&&e.$layoutTree||e}));return e=_.filter(e,(function(t){return t})),e},filterSelectedParentAndChild:function(t){var e=this.getSelectionComponents(),n=[];_.eachRight(e,(function(e,i){var s=t.$el==e.$el;if(!s){var a=e.$el.compareDocumentPosition(t.$el);(8&a||16&a)&&n.push(e)}})),_.each(n,(function(t){t.__desContext__.selected=!1}))},addControl:function(t,e,n,i,s){if(!1===this.checkAddContorl(t,n,e))return!1;if(n.designId||(n.designId=dsf.uuid()),this.addControlBefore&&this.addControlBefore(n,e,t),n.caption||(n.caption=this.getComponentDefaultNamePrefix(n)),!1!==s&&dsf.recursionComponentProps(n,(function(t){t&&t.isFormControl&&(t.metadata.$isNew=!0)})),t.$$getComponent)t=t.$children[0];else while(!t.slots)t=t.$parent;if(t.$el){var a=t.$el.matches(".ds-subtable-cell-content"),o=t.$el.matches(".ds-datagrid-cell-content"),r=t.$el.closest(".ds-subtable-expand-view");r&&(a=!1),n.isFormControl&&(a?(n.showLabel=!1,n.simple=!0,n.lrNoPadding=!0):o?(n.showLabel=!1,n.simple=!1,n.lrNoPadding=!0,t.updateColumn(n)):(n.simple=!1,n.lrNoPadding=!1))}var l=_.findIndex(t.slots,(function(t){return t.name==e}));if(l>=0){var u,c,d=t.slots[l];d&&d.textProxy?dsf.hasOwn(n,"textProxy")&&(n.textProxy=!0,n.showLabel=!1):n.textProxy=!1,dsf.isUnDef(i)||i<0?d.controls.push(n):d.controls.splice(i,0,n),null===(u=t)||void 0===u||null===(c=u.$slotControlsChange)||void 0===c||c.call(u,n,d)}this.addControlAfter&&this.addControlAfter(n,e,t),this.recordPageChange()},checkAddContorl:function(t,e,n){var i=null;t.$$getComponent&&(i=t.$$getComponent());var s=dsf.getComponentDesignOptions(i.ctrlType);if(null!==s&&void 0!==s&&s.checkChildren){var a=s.checkChildren.call(i,e,n),o="此处不可放入"+e.ctrlName,r=!0;return dsf.isObject(a)&&!1===a.result&&(r=!1,o=a.message?a.message:o),!1===a&&(r=!1),r||dsf.layer.message(o,!1),!1}},settingFunction:function(){var t=this;this.$openDialog({title:"功能授权",content:"DesFunctionSetting",width:"1000px",height:"60vh",params:{buttons:_.filter(this.buttons,(function(t){return t.setting}))},btns:[{text:"确定",handler:function(e){var n=e.yes();n&&_.each(n,(function(e){var n=_.filter(t.buttons,(function(t){return t.id==e.id}));n=n.length>0?n[0]:null,n&&(n.roles=e.roles)}))}},{text:"取消"}]})},setQuestionIndex:function(t,e,n){if(dsf.isUnDef(n)||n<0)this.setPrevQuestionIndex(t,e);else{var i=0;_.forEach(e,(function(t,e){t.isQuestionControl&&t.hasQuestionIndex&&t.visible&&(i++,t.questionIndex=i)}))}},openDevelopment:function(){var t=this,e=this.$refs.viewProxy;try{dsf.designer.createViewMetaData(e,this.mobile)}catch(n){return void dsf.layer.message(n,!1)}this.$nextTick((function(){var n=dsf.designer.getLayoutInfo(e);dsf.setObjAttr(n,"showLogic",t.showLogic);var i=dsf.designer.convertTemplateAndControlData(n,!0,!1),s=dsf.beautify.html(i.tpl);dsf.layer.pc.openDialog({title:"二次开发",fullscreen:!0,overflow:"hidden",content:"Development",params:{extCode:t.extJsCode||"",css:t.extScssCode||"",vueTemplate:s||""},btns:[{text:"保存并提交",handler:function(e){var n=e.yes();return t.extJsCode=n.extCode,t.extScssCode=n.css,t.saveLayout(),!1}},{text:"保存不提交",handler:function(e){var n=e.yes();t.extJsCode=n.extCode,t.extScssCode=n.css}},{text:"关闭"}]})}))},openPageDoc:function(){this.$eventBus.$emit("showComponentDoc",{id:null})},saveLayoutToTemplate:function(){var t=this;this.userSaving=!0,dsf.designer.saveLayoutToTemplate(this).finally((function(){t.userSaving=!1,t._layoutInfo=JSON.stringify(dsf.designer.getLayoutInfo(t.$refs.viewProxy))}))},autoSaveLayout:function(){var t=this;if(!this.userSaving&&!this.autoSaving)return this.autoSaving=!0,new Promise((function(e,n){dsf.designer.autoSaveLayout(t).then((function(t){e(t)})).catch((function(t){n(t)})).finally((function(){t.autoSaving=!1,t._layoutInfo=JSON.stringify(dsf.designer.getLayoutInfo(t.$refs.viewProxy))}))}))},customPostLayout:function(t){var e=this;return A()(B.a.mark((function n(){return B.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,dsf.designer.customPostLayout(e,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},saveLayout:function(){var t=this;function e(t,e){var n=this;if(this.page.mode!=dsf.enums.viewMode.PROTOTYPE){var i=dsf.designer.getStaticValue(this.$refs.viewProxy);dsf.isEmptyObject(i)||(this.staticData={},dsf.warn("静态数据被丢弃"))}var s=dsf.designer.saveLayoutValidate(this.$refs.viewProxy);!1!==s&&dsf.designer.saveLayout(this).then((function(e){t(e)})).catch((function(t){e(t)})).finally((function(){n.userSaving=!1,n._layoutInfo=JSON.stringify(dsf.designer.getLayoutInfo(n.$refs.viewProxy))}))}return this.userSaving=!0,this.autoSaving?new Promise((function(n,i){t.$nextTick().then((function(){window.setTimeout((function(){e.call(t,n,i)}),500)}))})):new Promise((function(n,i){t.$nextTick().then((function(){e.call(t,n,i)}))}))},preView:function(){var t=this;try{var e=this.$refs.viewProxy.$$getComponent();try{dsf.designer.createViewMetaData(e,this.mobile)}catch(i){return void dsf.layer.message(i,!1)}this.$nextTick().then((function(){var n=dsf.designer.getLayoutInfo(e,!0);n=dsf.designer.controlToJson(n);var i="/",s='<script type="text/template" id="layout">\n'.concat(n,"\n<").concat(i,"script>");window.$previewStr=s,dsf.layer.pc.openWindow(!0,"./designer.html#"+(t.mobile?"/mobile":"/pc")+"/preview")}))}catch(i){var n="出现了未知的错误";"string"==dsf.type(i)?n=i:dsf.error(i),dsf.layer.pc.message(n,!1)}},createToMobile:function(){var t=this;return A()(B.a.mark((function e(){var n,i,s,a,o,r,l,u,c,d,p,h,f,m,v,g,y;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("form"!=!t.page.pageType){e.next=3;break}return dsf.layer.message("该功能仅支持表单页面"),e.abrupt("return");case 3:return n=t.business,i=t.module,s="mobile-"+t.pageName,a=null,o=null,e.prev=8,e.next=11,Y.call(t,n,i,s,!0,!1);case 11:return r=e.sent,e.next=14,H.call(t,n,i,s,!0,!1);case 14:l=e.sent,a=r.data,o=l.data,e.next=21;break;case 19:e.prev=19,e.t0=e["catch"](8);case 21:if(u=!0,!o){e.next=32;break}return e.prev=23,e.next=26,dsf.layer.confirm("移动端页面已存在,是否要覆盖?");case 26:u=!0,e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](23),u=!1;case 32:if(u){e.next=34;break}return e.abrupt("return");case 34:return c=null,d=null,p={},h=null,dsf.designer.recursionLayoutTree(t.$refs.viewProxy,null,null,(function(t,e,n){var i,s,a=null===t||void 0===t||null===(i=t.$options)||void 0===i||null===(i=i.design)||void 0===i||null===(i=i.toMobile)||void 0===i||null===(i=i.getMobileControl)||void 0===i||null===(s=i.call)||void 0===s?void 0:s.call(i,t);if(e&&e.isView&&(c=n),e&&e.isOneToMany&&(d=n),t.isView&&a&&(p[a.caption]=h=a),t.isFormControl)if(t.isOneToMany||t.$list){if(t.isOneToMany){if(a){var o=_.find(h.slots,(function(t){return t.name==c}));o&&o.controls.push(a),p[t.caption]=a}}else if(!t.isOneToMany&&t.$list){var r,l=t.$list,u=p[l.caption],f=null===l||void 0===l||null===(r=l.$options)||void 0===r||null===(r=r.design)||void 0===r||null===(r=r.toMobile)||void 0===r?void 0:r.childComponentAddToMobileSubTable;a&&dsf.isFunction(f)&&f.call(t.$list,u,a,d)}}else if(a){var m=_.find(h.slots,(function(t){return t.name==c}));m&&m.controls.push(a)}if(t.isButtonBar&&a){var v=_.find(h.slots,(function(t){return t.name==c}));v&&v.controls.push(a)}})),f=dsf.designer.createViewMetaData(t.$refs.viewProxy,!0),f.nameSpace=[n,i,s].join("."),f.path=[n,i,s].join("/"),f.isMobile=!0,e.next=45,dsf.designer.getPostLayoutParams(t,t.$refs.viewProxy,f,!1,(function(t){t.layout=h,t.css="",t.scss="",t.moduleName=f.nameSpace,t.doc="",t.designerNode.fromTemplateId="dsfa.template.mobile-null"}));case 45:return m=e.sent,m.isMobile=!0,m.templateid="dsfa.template.mobile-null",m.pageName="mobile-"+t.pageName,m.extJsCode=a||t.extDefaultCode,v=t.saveRequest||t.$webAPI.pageBuild,e.next=53,v(m);case 53:g=e.sent,y=g.data,"20000"==y.state?dsf.layer.message("生成成功"):dsf.layer.message("生成失败",!1);case 56:case"end":return e.stop()}}),e,null,[[8,19],[23,29]])})))()},getComponentDefaultNamePrefix:function(t){var e=t.ctrlType.split("."),n=e[e.length-1].toLowerCase()+this.$refs.viewProxy.getSerial();return n},loadMetaDataGroup:function(t){var e=this;return A()(B.a.mark((function n(){var i;return B.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t=_.uniqBy(t,(function(t){return t.id})),n.next=4,et(e,t);case 4:i=n.sent,_.each(i,(function(n){var i=n.data;i=_.filter(i||[],(function(e){return 3==e.type_value?_.map(t,"id").indexOf(e.ID)>=0:_.map(t,"id").indexOf(e.dsfa_rm_id)>=0})),_.each(i,(function(t){at(e,t)}))})),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),dsf.httpError(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},loadControlGrooup:function(t){var e=this;return A()(B.a.mark((function n(){var i;return B.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,t=_.uniqBy(t,(function(t){return t.id})),!(t.length>0)){n.next=7;break}return n.next=5,Z(e,t);case 5:i=n.sent,_.each(i,(function(t){ut(e,t,2)}));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),dsf.httpError(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},loadBusinessComponetGroup:function(){var t=arguments,e=this;return A()(B.a.mark((function n(){var i,s,o,r,l;return B.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:[],e.$route.query.bctrls&&(o=e.$route.query.bctrls.split(","),r=_.map(o,(function(t){return{id:t}})),(s=i).push.apply(s,a()(r))),n.prev=2,i=_.uniqBy(i,(function(t){return t.id})),l=[],!(i.length>0||e.requestBusinessComponent!==it)){n.next=11;break}return n.next=8,e.requestBusinessComponent(e,i);case 8:l=n.sent,n.next=12;break;case 11:l=[];case 12:_.each(l,(function(t){rt(e,t)})),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](2),dsf.error(n.t0);case 18:case"end":return n.stop()}}),n,null,[[2,15]])})))()},getCurrentUserRoles:function(){var t=this;return A()(B.a.mark((function e(){var n;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$webAPI.getCurrentUserRoles();case 2:return n=e.sent,e.abrupt("return",_.keyBy(n.data,"serialNumber"));case 4:case"end":return e.stop()}}),e)})))()},getStateManage:function(){var t=this;return A()(B.a.mark((function e(){var n,i,s;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.business,i=t.module,s=t.pageName,t.$http.get("/design/state",{namespace:n+"."+i,pageName:s}).then((function(e){var n=e.data;if(2e4==n.state){var i=n.data;t.pageStateSetting=i}})).catch((function(e){t.pageStateSetting=[]}));case 4:case"end":return e.stop()}}),e)})))()},resize:function(){dsf.resizeComponent(this.$refs.viewProxy.$$getComponent())},contextMenuOpen:function(t){var e=this;return A()(B.a.mark((function n(){var i,s,a,o,r,l,u,c,d;return B.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=dsf.designer.getComponentByTarget(t.target),i){n.next=3;break}return n.abrupt("return");case 3:if(s=i?i.$options:{},a=s.design?s.design.contextMenuHandler:null,a){n.next=9;break}i=i.$parent,n.next=10;break;case 9:return n.abrupt("break",11);case 10:if(i!=e.$root){n.next=3;break}case 11:if(o=i.$options,r=i.$options.design?i.$options.design.contextMenuHandler:null,!r){n.next=20;break}return t.preventDefault(),t.stopPropagation(),n.next=18,o.design.contextMenuHandler.call(i,t,e);case 18:l=n.sent,l&&l.length>0&&(u=Vue.directive("contextMenu").contextMenuClick,c={x:t.clientX,y:t.clientY},d=function t(e){var n=_.map(e,(function(e){if(e){if("-"==e)return{divided:!0};var n={icon:e.icon,color:e.color,name:e.text,disabled:e.disabled,hide:e.hide,select:e.select,handler:function(t){var n=t.clickEvent;e.handler.call(i,e,n)}};if(dsf.isFunction(e.children)){var s=e.children;n.children=A()(B.a.mark((function e(){var n;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s();case 3:if(n=e.sent,!dsf.isArray(n)||!n.length){e.next=6;break}return e.abrupt("return",t(n));case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e["catch"](0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))}else dsf.isArray(e.children)&&e.children.length&&(n.children=t(e.children));return n}}));return n=_.filter(n,(function(t){return t})),n},u(c,{},d(l),i.$el,t));case 20:case"end":return n.stop()}}),n)})))()},mouseDownHanlder:function(t){try{if(this.clearSelectedSlot(),0!=t.button)return;var e=this.$getEventTarget(t.target);e||(e=t.target);var n=dsf.designer.getComponentByTarget(e);if(!n)return;dsf.designer.broadcast(this,"clearMouseDownHandler",t,null,n),this.mousedown.target=n;var i=n?n.$options:{};i.design.mouseDownHandler&&i.design.mouseDownHandler.call(n,t,this,e)}catch(s){dsf.error(s)}finally{$(document).one("mouseup",this.mouseUpHandler)}},mouseMoveHanlder:function(t){try{if(this.mousedown.target){var e=this.mousedown.target.$options||{};e.design.mouseMoveHandler&&e.design.mouseMoveHandler.call(this.mousedown.target,t,this)}}catch(n){dsf.error(n)}},mouseUpHandler:function(t){try{if(this.mousedown.target){var e=this.mousedown.target.$options||{};e.design.mouseUpHandler&&e.design.mouseUpHandler.call(this.mousedown.target,t,this)}}catch(n){dsf.error(n)}finally{this.mousedown.target=null}}}},pt="BOM:DsfLayout-",ht=!1,_t={props:{isFocus:{type:Boolean,default:!0}},created:function(){document.addEventListener("keydown",this.watchKeyBoard)},beforeDestroy:function(){document.removeEventListener("keydown",this.watchKeyBoard)},data:function(){return{isCopeing:!1}},mounted:function(){},methods:{copyComp:function(){var t=this;this.isCopeing=!0,this.$nextTick().then((function(){var e,n=t.$el.querySelector(".designer-page"),i=t.getSelectionComponents();0==i.length&&(i=[t.$refs.viewProxy]),i=_.filter(i,(function(t){var e=16&n.compareDocumentPosition(t.$el);return e})),i=_.map(i,(function(t){return t.$layoutTree||t}));var s=[];_.each(i,(function(t){var e=dsf.designer.getLayoutInfo(t,!0);s.push(e)}));var a=dsf.designer.controlToJson(s),o=kt(t.page),r=Ct.call(t),l=pt+[o,r].join("|")+";"+a;if(null!==(e=navigator)&&void 0!==e&&null!==(e=e.clipboard)&&void 0!==e&&e.writeText){var u;null===(u=navigator)||void 0===u||null===(u=u.clipboard)||void 0===u||u.writeText(l).then((function(){dsf.layer.message("复制成功"),t.isCopeing=!1}))}else{var c=document.createElement("input");document.body.append(c),c.value=l,c.focus(),c.selectionStart=0,c.selectionEnd=c.value.length,document.execCommand("copy",!1,null),dsf.layer.message("复制成功"),window.setTimeout((function(){t.$el.focus(),c.remove(),t.isCopeing=!1}),200)}}))},watchKeyBoard:function(t){var e=this;if(this.isFocus){var n=this,i=document.activeElement;if(!dsf.isElementEditable(i)&&(t.ctrlKey||t.metaKey))if("65"==t.keyCode)this.clearSelectedSlot(),this.clearSelectedComponent(),this.selectedComponent(this.$refs.viewProxy.$el),$(this.$refs.viewProxy.$el).addClass("designer-ctrl-proxy-focus"),t.preventDefault();else if("67"==t.keyCode){var s=document.getSelection(),o=document.querySelectorAll(".ds-dialog").length>0;"Range"==s.type||o||(t.preventDefault(),this.copyComp())}else if("86"==t.keyCode)this.$getClipboard().then((function(t){if(t&&t.indexOf(pt)>=0)t.startsWith("<")&&(t=$(t).text()),e.loading=!0,e.$copyToPage(t),e.loading=!1;else{var i=ft(t);if(i.startsWith("<img "))e.loading=!0,gt.call(e,i).then((function(t){n.$copyComponetToTarget([t]).then((function(){dsf.layer.message("粘贴完成")}))})).finally((function(){e.loading=!1}));else if(i.startsWith("<table")){var s=e.$el.querySelectorAll(".ds-control-selected");if(1===s.length){var o=a()(s[0].childNodes).findIndex((function(t){return t.className.indexOf("ds-chart")>-1}))>-1;if(o)return s[0].__vue__.$children[0].parseData=i,!1}e.loading=!0,Tt.call(e,i),e.loading=!1,dsf.layer.message("粘贴完成")}e.loading=!1}}));else if("70"==t.keyCode){if(this.isSimple)return;var r=mt.call(this);r.target&&r.slot||(r=vt.call(this));var l=this;this.$openDialog({content:"DesComponentInfoList",title:"组件查找",params:{designer:this},width:"70vw",height:"60vh",overflow:"hidden hidden",btns:[{text:"确定",handler:function(t){var e=t.yes();if(e&&r.slot){var n=null;if(0==e.type)n=J(e.code,{},this.mobile);else if(1==e.type){var i=e.content;if(i){var s=JSON.parse(i);dsf.recursionComponentProps(s,(function(t){var e=dsf.createComponent(t.ctrlType,t);dsf.mix(t,e),t.designId=dsf.uuid(),t.isBusiness=!0})),n=s}else n=null,dsf.layer.message("未能获取到业务组件的布局信息")}n&&l.addControl(r.target,r.slot.name,n)}}},{text:"取消"}]}),t.preventDefault()}else if("89"==t.keyCode){var u;null===this||void 0===this||null===(u=this.redo)||void 0===u||u.call(this)}else if("90"==t.keyCode){var c;null===this||void 0===this||null===(c=this.undo)||void 0===c||c.call(this),t.preventDefault()}}},$getClipboard:function(){return new Promise((function(t,e){var n=$("#copyTextBox");n.length<=0&&(n=$('<div contenteditable id="copyTextBox" style="display:none; position:fixed;z-index:100000;top:0px;left:0px"></div>').appendTo($("body"))),n.fadeTo(10,0),window.focus(),n.focus().select(),window.setTimeout((function(){var e=n.get(0).childNodes,i="";e&&e.length>0&&(3==e[0].nodeType?i=e[0].nodeValue:(i=n.html(),i=Et(i))),n.blur(),n.remove(),t(i)}),50)}))},$copyToPage:function(t){var e=this;if(t)try{var n=t.indexOf(";"),i=t.substring(pt.length,n).split("|"),s=i[0],a=i[1],o=Ct.call(this);if(a!=o)return void dsf.layer.message("不同的终端类型不可复制",!1);t=t.substr(n+1);var r=JSON.parse(t);if(r){var l=_.map(r,(function(t){return dsf.designer.requestAsyncComponentsByLayout(t)}));Promise.all(l).then((function(){try{var t=r.length>0&&r[0].isView,n=null;n=t?e.$copyPage(r[0],kt(e.page)==s):e.$copyComponetToTarget(r),n.then((function(){dsf.layer.message("粘贴完成")}))}catch(i){dsf.error(i),dsf.layer.message("解析结构出现了未知的错误",!1)}}))}}catch(u){dsf.error(u),dsf.layer.message("无法识别的结构数据",!1)}},$createComponentsFromClipboard:function(t,e){var n=this,i=this.page;"dataview"===t.pageType&&"dataview"===i.pageType?(i.slots=dsf.mix(!0,[],t.slots),i.layout=dsf.mix(!0,Array.isArray(t.layout)?[]:{},t.layout),i.backgroundConfigs=dsf.mix(!0,{},t.backgroundConfigs),i.backgroundConfig=dsf.mix(!0,{},t.backgroundConfig),_.each(i.slots||[],(function(t){t.controls.forEach((function(t){St.call(n,t)}))}))):_.each(t.slots||[],(function(t){var e=_.find(i.slots,(function(e){return e.name==t.name}));e&&_.each(t.controls,(function(t){var i=dsf.designer.createComponent(t.ctrlType);i=dsf.mix(i,t),St.call(n,i),e.controls.push(i)}))}))},$copyPage:function(t,e){var n=this;return new Promise((function(e,i){var s=n.page,a=!1;if(_.each(s.slots,(function(t){var e;(null===t||void 0===t||null===(e=t.controls)||void 0===e?void 0:e.length)>0&&(a=!0)})),a){var o=!1;dsf.layer.confirm({message:"当前页面上已经存在组件，您是否要覆盖当前页面",confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(i){_.each(s.slots||[],(function(t){t.controls.splice(0,t.controls.length)})),n.$createComponentsFromClipboard(t,o),e()})).catch((function(t){})).finally((function(){}))}else n.$createComponentsFromClipboard(t),e()}))},$copyComponetToTarget:function(t){var e=this;return new Promise((function(n,i){var s,a=null,o=e.$el.querySelector("[slot-name].ds-slot-selected"),r=e.$el.querySelectorAll(".ds-control-selected");if(o){a=dsf.designer.getParentControl(o);var l=o.getAttribute("slot-name");s=_.find(a.slots,(function(t){return t.name==l})),e.$nextTick((function(){_.each(t,(function(t){var n=dsf.designer.createComponent(t.ctrlType);n=dsf.mix(n,t),St.call(e,n),e.addControl(a,s.name,n)})),n()}))}else if(1==r.length&&!ht){ht=!0;var u=r[0].__vue__;if(u=u.$layoutTree||u,o=$(u.$el).closest("[slot-name]"),a=dsf.designer.getParentControl(o),o.hasClass("freeze-slot")||o.hasClass("disabled-copy")||o.hasClass("disabled-drop"))dsf.layer.message("该位置禁止复制",!1),ht=!1;else{var c=o.attr("slot-name");s=_.find(a.slots,(function(t){return t.name==c})),$t.call(e).then((function(i){var o=_.findIndex(s.controls,(function(t){return t===u.__context__.props}));o>=0&&("after"==i?o+=1:"merge"==i&&dsf.array.remove(s.controls,u.__context__.props),e.$nextTick((function(){_.eachRight(t,(function(t){var n=dsf.designer.createComponent(t.ctrlType);n=dsf.mix(n,t),St.call(e,n),e.addControl(a,s.name,n,o)})),n()})))})).catch((function(){})).finally((function(){ht=!1}))}}}))}}};function ft(t){var e="";if(t.startsWith("<")){var n=new DOMParser,i=n.parseFromString(t,"text/html");if(i){var s,a=null===i||void 0===i||null===(s=i.body)||void 0===s||null===(s=s.childNodes)||void 0===s?void 0:s[0];if(a&&1==a.nodeType)if("IMG"==a.tagName)e=a.outerHTML;else if("TABLE"==a.tagName)e=a.outerHTML;else{var o;e=ft((null===a||void 0===a||null===(o=a.childNodes)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.outerHTML)||"")}}}return e}function mt(){var t=this.$el.querySelector("[slot-name].ds-slot-selected"),e=(this.$el.querySelectorAll(".ds-control-selected"),null),n=null;if(t){n=dsf.designer.getParentControl(t);var i=t.getAttribute("slot-name");e=_.find(n.slots,(function(t){return t.name==i}))}return{target:n,slot:e}}function vt(){var t=null,e=null,n=this.$el.querySelectorAll(".ds-control-selected");if(n.length>0){var i=n[0].__vue__;i=i.$layoutTree||i;var s=$(i.$el).closest("[slot-name]");e=dsf.designer.getParentControl(s);var a=s.attr("slot-name");t=_.find(e.slots,(function(t){return t.name==a}))}return{target:e,slot:t}}function gt(t){return yt.apply(this,arguments)}function yt(){return yt=A()(B.a.mark((function t(e){var n,i,s,a,o,r,l,u;return B.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=$(e),i=n.attr("src"),s=this,!i||0!=i.indexOf("data:image")){t.next=20;break}return t.next=6,xt(s,i.split(",")[1]);case 6:return a=t.sent,i=a,t.next=10,bt(i);case 10:if(o=t.sent,!o){t.next=18;break}return t.next=14,wt(s,o);case 14:return r=t.sent,t.next=17,dsf.designer.requestAsyncComponentsByLayout(r);case 17:return t.abrupt("return",r);case 18:t.next=28;break;case 20:return t.next=22,bt(i);case 22:if(l=t.sent,!l){t.next=28;break}return t.next=26,wt(s,l);case 26:return u=t.sent,t.abrupt("return",u);case 28:case"end":return t.stop()}}),t,this)}))),yt.apply(this,arguments)}function bt(t){var e=new Image;return e.src=t,new Promise((function(t,n){e.onload=function(){t(e)},e.onerror=function(){n("加载错误")}}))}function wt(t,e){return new Promise((function(n,i){var s="dsf.uploaddesignimg";t.mobile&&(s="dsf.mobile.uploaddesignimg");var a=dsf.checkAsyncComponent(s),o=e.width,r=(e.height,{url:e.src,width:o+"px",height:"auto",designProxy:!0});if(a)dsf.requestAsyncComponents(a).then((function(e){var i=t.createComponent(s,r);n(i)}));else{var l=t.createComponent(s,r);n(l)}}))}function xt(t,e){return t.$http.post("file/base64Img",{base64ImgStr:e}).then((function(t){var e=t.data;if(e.data&&e.data.length>0){var n=e.data[0].relativePath;return n=dsf.url.getWebPath(n),n}}))}function kt(t){return[t.context.B,t.context.M,t.name].join(".")}function Ct(){return this.mobile?"mobile":"pc"}function $t(){return new Promise((function(t,e){dsf.layer.openDialog({template:"您想复制到当前选中组件哪个位置？",title:"提示",width:"420px",height:"60px",btnSize:"small",btns:[{text:"之前",type:"main",handler:function(){t("before")}},{text:"之后",type:"main",handler:function(){t("after")}},{text:"覆盖",type:"main",handler:function(){t("merge")}},{text:"取消",handler:function(){e()}}]})}))}function St(t){var e=this;t.designId=dsf.uuid(),t.isCopy=!0,t.designShowMarkRemove=!0,t.designShowMarkDragDrop=!0,t.designShowMarkCaption=!0,t.designShowMarkInfo=!0,t.designDisabledProps=null,_.each(t.slots||[],(function(t){t&&_.each(t.controls,(function(n){St.call(e,n,t)}))}))}function Tt(t){var e=this.createComponent("dsf.table",{clipboardString:t});return this.$copyComponetToTarget([e])}function Et(t){return String(t).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;/g,"&")}var Dt={name:"DsfDesigner",mixins:[dt,_t],provide:function(){return{$designer:this}},props:{layoutTreeVirtual:{type:Function,default:null},getVirtualComponentVnode:{type:Function,default:null},isSimple:{type:Boolean,default:!1},getExtendShowLogic:{type:Function,required:!1}},data:function(){var t=this;return this.postSaveBeforeList=[],{extDefaultCode:dsf.extDefaultCode,firstOpen:!0,saved:!1,design:!0,btnsAuths:[],templateId:"",buttons:[{text:"保存",id:"save",icon:"baocun",handler:this.saveLayout,setting:!0,roles:[],value:"1"},{text:"预览",id:"preview",icon:"icon_yulan",handler:this.preView,setting:!1,roles:[]},{text:"模板选择",id:"tpl",icon:"shebeikaifa1",handler:this.useTpl,setting:function(){return!t.isQuestionDesigner},roles:[],value:"2"},{text:"控件组选择",id:"ctrl",icon:"shebeiguanli",handler:this.openComponentSelect,setting:function(){return!t.isQuestionDesigner},roles:[],value:"4"},{text:"元数据选择",id:"meta",icon:"shujuwajue",handler:this.openMateGroupSelect,setting:!0,roles:[],value:"3"},{text:"状态配置",id:"stateMessage",icon:"hanshu",handler:this.openStateManage,setting:function(){return!t.isQuestionDesigner},roles:[],saved:!0,value:"6"},{text:"二次开发",id:"js",icon:"shebeikaifa1",handler:this.openDevelopment,setting:!0,roles:[],saved:!0,value:"7"},{text:"需求文档",id:"desc",icon:"DOC",handler:this.openPageDoc,setting:function(){return!t.isQuestionDesigner},roles:[],value:"8"}],templateButtons:[{text:"保存模板",icon:"baocun",handler:this.saveLayoutToTemplate,setting:!1,roles:[],show:function(){return!0}},{text:"预览",icon:"icon_yulan",handler:this.preView,setting:!1,roles:[],show:function(){return!0}},{text:"模板选择",icon:"shebeikaifa1",handler:this.useTpl,setting:!0,roles:[],show:function(){return!0}},{text:"控件组选择",icon:"shebeiguanli",handler:this.openComponentSelect,setting:!0,roles:[],show:function(){return!0}}],layout:{toolsBox:{activeName:"controls",tabs:[{name:"controls",label:"基础组件"},{name:"business",label:"业务组件"},{name:"metadata",label:"元数据"}]}},useControlsGroup:{activeName:"",groups:[]},useMetaGroup:{activeName:"",groups:[]},useBusinessControlGroup:{activeName:"",groups:[]},attributesGroup:[],attributesOwner:{},subTree:[],controls:{},dragMouseMoveTarget:null,extJsCode:dsf.extDefaultCode,extCssCode:"",extScssCode:"",fromTemplateId:"",buttonLoad:!1,leftToolsFloat:!1,leftActiveId:null,undoList:[],auxiliary:!1}},computed:{dragProxy_el:function(){return this.$refs.dragProxy},leftTabs:function(){var t,e=this;return _.filter(null===this||void 0===this||null===(t=this.layout)||void 0===t||null===(t=t.toolsBox)||void 0===t?void 0:t.tabs,(function(t){return!e.isQuestionDesigner||"business"!=t.name}))},currPageMode:{get:function(){var t=this.page;return t?t.mode:null},set:function(t){this.page&&(this.page.mode=t)}},layoutTreeStyle:function(){var t=this.mobile,e=this.page;return t||!e?{position:"absolute",height:"100%",width:"100%"}:{margin:"0 auto",height:"100%"}},ignoreIntersectionObserver:function(){return this.$saving||this.isCopeing},disableAuxiliary:function(){return"logic"==this.leftActiveId}},created:function(){var t=this;document.addEventListener("click",this.emptyClick),this.$on("loaded",(function(){t.business==dsf.enums.viewMode.PROTOTYPE&&(t.currPageMode=dsf.enums.viewMode.PROTOTYPE)}))},beforeDestroy:function(){document.removeEventListener("click",this.emptyClick)},mounted:function(){var t=this;return A()(B.a.mark((function e(){return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.$nextTick(A()(B.a.mark((function e(){return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.init(),e.next=4,t.loadLayout();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),dsf.httpError(e.t0,{message:"设计器加载失败"});case 9:return e.prev=9,t.loading=!1,t.buttonLoad=!0,e.finish(9);case 13:case"end":return e.stop()}}),e,null,[[0,6,9,13]])}))));case 2:case"end":return e.stop()}}),e)})))()},updated:function(){},methods:{emptyClick:function(t){this.clearSelectedSlot()},dragEnd:function(){U.call(this)},init:function(){this.initToolDrag(),this.initDrop()},initToolDrag:function(){V.call(this)},initDrop:function(){G.call(this)},showAndHideTextConent:function(t){var e=$(this.$el).find(".ds-text-content");e.each((function(n){t&&e.get(n)==t.get(0)?e.eq(n).hide():e.eq(n).show()}))},dragMouseMoveHandler:function(t){var e=$(t.target),n=null;if(!e.hasClass("drag-proxy")){var i=null,s=null,a="after",o=!1,r=$(this.dragProxy_el);if(e.is("[slot-name]"))o=dsf.designer.isAllowDrop(e,e.attr("slot-name"),this),o&&(n=e,this.dragProxy.show=!0,this.dragProxy.class="",n.append(r));else{var l=e.closest(".designer-ctrl-proxy");if(l&&l.length>0){if(!e.hasClass("designer-mask")&&!e.hasClass("ds-control")||e.hasClass("ds-no-drop"))return;var u=dsf.designer.getDsfComponent(l.get(0).__vue__,this);if(u&&(u=u.$$getComponent?u.$$getComponent():u,n=l.closest("[slot-name]"),o=dsf.designer.isAllowDrop(n,n.attr("slot-name"),this),o)){var c=e.height();this.dragProxy.show=!0,this.dragProxy.class="",t.offsetY<c/2?(l.before(r),a="before"):(l.after(r),a="after"),s=u}}}if(o){var d,p=dsf.designer.getParentControl(r);p=null!==(d=p)&&void 0!==d&&d.$$getComponent?p.$$getComponent():p,i=p,s||(s=p)}if(s&&i){var h,_=null===(h=i)||void 0===h||null===(h=h.$options)||void 0===h||null===(h=h.design)||void 0===h?void 0:h.dragProxyStyle,f=_?_.call(i,s,a):{};this.dragProxy.style=f}}},dropHandler:function(t,e,n,i){z.call(this,t,e,n,i)}}},Ot=Dt,Pt=Object(c["a"])(Ot,N,R,!1,null,null,null),Lt=Pt.exports,Nt=n(64),Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-props-box"},[n("el-tabs",{attrs:{stretch:""},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[n("el-tab-pane",{staticClass:"commonUse",attrs:{label:"常用",name:"1"}}),n("el-tab-pane",{staticClass:"all",attrs:{label:"全部",name:"2"}})],1),n("div",{staticClass:"designer-props"},[n("dsf-virtual-scroll",[n("el-collapse",{attrs:{accordion:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.data,(function(e,i){return n("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:t.showGroup(e),expression:"showGroup(group)"}],key:i,attrs:{title:e.name,name:e.name}},[n("div",t._l(e.attributes,(function(e,i){return n("DsfDesignerProperty",{directives:[{name:"show",rawName:"v-show",value:t.show(e),expression:"show(item)"}],key:(e.bindControlAttr||"")+i,attrs:{id:(e.bindControlAttr||"")+i,rel:e.bindControlAttr,desc:e.desc,"desc-striking":e.desc_striking,data:e,owner:t.owner,disabled:t.isDisabled(e),bind:t.getBind(e)}})})),1)])})),1)],1)],1)],1)},It=[],At={name:"DsfDesignerProperties",inject:{$designer:{default:null},$designerRight:{default:null}},provide:function(){return{$properties:this}},props:{data:{type:Array,default:function(){return[]}},owner:{type:Object,default:function(){return{}}},propShow:{type:Function,default:null}},data:function(){return{tabActive:"1",activeName:"",inCommonUseGroup:[]}},computed:{isSimple:function(){return this.$designer.isSimple},propsList:function(){var t=this.tabActive;return 1==t&&this.inCommonUseGroup.length>0?this.inCommonUseGroup:this.data}},watch:{data:{handler:function(t){this.activeName=t[0]?t[0].name:"",this.inCommonUseGroup=this.getInCommonUse(this.data),this.$designerRight&&this.$designerRight.focusPopper()}},inCommonUseGroup:function(t){t.length?this.tabActive="1":this.tabActive="2"}},mounted:function(){this.inCommonUseGroup=this.getInCommonUse(this.data)},methods:{isDisabled:function(t){var e;return!!t.disabled||((null===this||void 0===this||null===(e=this.owner)||void 0===e?void 0:e.designDisabledProps)||[]).indexOf(t.bindControlAttr)>=0},filterIsCommonUse:function(t){return"1"!=this.tabActive||!!t.inCommonUse},showGroup:function(t){var e=this,n=_.filter(t.attributes,(function(t){return e.show(t)}));return n.length},getInCommonUse:function(t){var e=this,n=[];return _.each(t,(function(t){var i=_.filter(t.attributes,(function(t){return t.inCommonUse})),s=i.length;e.$set(t,"commonUseCount",s),i.length&&n.push(t)})),n},getBind:function(t){var e=t.bindControlAttr||"",n=e.split(".");if(1==n.length)return{data:this.owner,key:n[0]||""};var i=n.slice(0,n.length-1),s=this.owner,a=i.shift();while(a){var o=this.testProp(s,a);if(!dsf.isDef(o)){s=null;break}s=o,a=i.shift()}return s||(s=this.owner),{data:s,key:n[n.length-1]}},testProp:function(t,e){var n="return obj."+e,i=new Function("obj","key",n);try{return i(t,e)}catch(s){return null}},show:function(t){if(this.isSimple&&!1===t.isSimple)return!1;var e=!0;if(t.inCommonUse||1!=this.tabActive||(e=!1),e&&t.showExpress&&(e=this.$eval(t.showExpress,this.owner)),e){var n=!0;try{var i=this.owner.$$getComponent?this.owner.$$getComponent():this.owner;this.propShow&&this.propShow(i,t)}catch(s){dsf.warn(s)}finally{e=!1!==n}}return e}}},Mt=At,Bt=Object(c["a"])(Mt,Rt,It,!1,null,null,null),jt=Bt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ds-designer-property property-item"},[n("div",{staticClass:"property-item-name"},[t._v(" "+t._s(t.data.text)+" "),t.desc?n("DsfIcon",{class:{"desc-striking":t.descStriking},staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{name:"bangzhuzhongxin"},on:{click:function(e){return t.showHelp(t.data)}}}):t._e()],1),"text"==t.data.showType?[t.inputDisabled?n("div",{staticClass:"el-input is-disabled",attrs:{tabindex:"-1"},on:{keydown:function(t){t.stopPropagation()}}},[n("div",{staticClass:"el-input__inner"},[t._v(t._s(t.dataValue))])]):n("el-input",{attrs:{attrdata:t.data,disabled:t.inputDisabled,placeholder:"请输入"},on:{change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}})]:t._e(),"number"==t.data.showType?n("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.inputDisabled,attrdata:t.data,controls:t.config.controls||!0,size:t.config.size||"medium",step:t.config.step,"step-strictly":t.config.stepStrictly||!1,min:t.config.min||0,max:t.config.max,precision:t.config.precision||0},on:{change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}):"boolean"==t.data.showType?n("el-radio-group",{attrs:{disabled:t.inputDisabled,attrdata:t.data},on:{change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1):"checkbox"==t.data.showType?n("el-checkbox-group",{attrs:{disabled:t.inputDisabled,attrdata:t.data},on:{change:t.dataValueChange},model:{value:t.dataValueArray,callback:function(e){t.dataValueArray=e},expression:"dataValueArray"}},t._l(t.data.dictionary,(function(e,i){return n("el-checkbox",{key:i,attrs:{label:e.value}},[t._v(" "+t._s(e.text)+" ")])})),1):"radio"==t.data.showType?n("el-radio-group",{attrs:{disabled:t.inputDisabled,attrdata:t.data},on:{change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}},t._l(t.data.dictionary,(function(e,i){return n("el-radio",{key:i,attrs:{label:e.value}},[t._v(" "+t._s(e.text)+" ")])})),1):"select"==t.data.showType?n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:t.config.multiple,disabled:t.inputDisabled,attrdata:t.data,placeholder:"请选择"},on:{"visible-change":t.visibleChange,change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}},t._l(t.data.dictionary,(function(t,e){return n("el-option",{key:e,attrs:{label:t.text,value:t.value}})})),1):"rangeSelect"==t.data.showType?n("DsfRangeSelect",{attrs:{disabled:t.inputDisabled,dictionary:t.data.dictionary},on:{change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}):"timePicker"==t.data.showType?n("el-time-picker",t._b({staticStyle:{width:"100%"},attrs:{disabled:t.inputDisabled,attrdata:t.data},on:{"visible-change":t.visibleChange,change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}},"el-time-picker",t.data.attributes,!1)):"datePicker"==t.data.showType?n("el-date-picker",t._b({staticStyle:{width:"100%"},attrs:{disabled:t.inputDisabled,attrdata:t.data,"value-format":"timestamp"},on:{"visible-change":t.visibleChange,change:t.dataValueChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}},"el-date-picker",t.data.attributes,!1)):"multipleText"==t.data.showType?[n("el-row",{attrs:{gutter:2}},t._l(t.config.inputs,(function(e,i){return n("el-col",{key:i,attrs:{span:24/t.config.inputs.length}},[t.dataValue?[n("el-input",t._b({staticClass:"mtext",attrs:{disabled:t.inputDisabled,placeholder:e.placeholder||"",attrdata:t.data},on:{change:function(e){return t.arrayDataValueChange(e,t.dataValue,i)}},model:{value:t.dataValue[i],callback:function(e){t.$set(t.dataValue,i,e)},expression:"dataValue[$index]"}},"el-input",t.data.attributes,!1))]:[n("el-input",t._b({staticClass:"mtext",attrs:{disabled:t.inputDisabled,placeholder:e.placeholder||"",attrdata:t.data},on:{change:function(e){return t.arrayDataValueChange(e,t.dataValue,i)}}},"el-input",t.data.attributes,!1))]],2)})),1)]:"options"==t.data.showType||"dialog"==t.data.showType?n("DsfDesignerDialog",{attrs:{disabled:t.inputDisabled,owner:t.owner,attrdata:t.data,"is-mobile":t.isMobile},on:{change:t.dataValueChange,"visible-change":t.visibleChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}):"upload"==t.data.showType?n("DsfInputUpload",{attrs:{disabled:t.inputDisabled,accept:t.data.accept,data:t.data.config,"bt-name":t.data.btnName,action:t.getRequestUrl(t.data),placeholder:"请输入"},on:{change:t.dataValueChange,"visible-change":t.visibleChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}):"color"==t.data.showType?n("DsfInputColor",t._b({attrs:{disabled:t.inputDisabled,placeholder:"请输入"},on:{change:t.dataValueChange,"visible-change":t.visibleChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}},"DsfInputColor",t.data.config,!1)):"url"==t.data.showType?n("DsfInputUrl",{attrs:{disabled:t.inputDisabled,type:t.data.attributes&&t.data.attributes.type||(t.isMobile?"mobile":"pc"),placeholder:"请输入"},on:{change:t.dataValueChange,"visible-change":t.visibleChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}):"icon"==t.data.showType?n("DsfInputIcon",{attrs:{disabled:t.inputDisabled},on:{change:t.dataValueChange,"visible-change":t.visibleChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}):"areaCode"==t.data.showType?n("DsfInputAreaCode",{attrs:{owner:t.owner,disabled:t.inputDisabled},on:{change:t.dataValueChange,"visible-change":t.visibleChange},model:{value:t.dataValue,callback:function(e){t.dataValue=e},expression:"dataValue"}}):t._e()],2)},Vt=[],Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("DsfButton",{attrs:{type:"plain",disabled:t.disabled,icon:"shezhi"},on:{click:t.clickHandler}},[t._v("设置")])},zt=[],Ut={name:"DsfDesignerDialog",inject:{$designer:{default:null}},model:{prop:"args"},props:{disabled:{type:Boolean,default:!1},attrdata:{type:Object,default:function(){return null}},args:{type:[Object,Array,Number,String,Date],default:function(){return null}},owner:{type:Object,default:function(){return null}},designer:{type:Object,default:function(){return null}},isMobile:{type:Boolean,default:!1}},data:function(){return{cloneArgs:{},dialogVisible:!1,width:"50%"}},watch:{dialogVisible:function(t){this.$emit("visible-change",t)}},created:function(){var t=this.attrdata;this.owner&&this.owner.isQuestionControl&&t&&t.config&&"DesQuestionConfig"===t.config.content&&this.$bus.$on("questionSetting",this.clickHandler)},destroyed:function(){this.$bus.$off("questionSetting",this.clickHandler)},methods:{sure:function(){},cancel:function(){},clickHandler:function(t){var e,n,i,s=this.$designer;this.dialogVisible=!0;var a=this,o=this.owner,r=this.attrdata.config,l=s.mobile,u=r.title,c=r.content,d=r.width,p=r.height,h=r.top,_=r.overflow,f=r.class;"array"==dsf.type(this.args)?this.cloneArgs=dsf.mix(!0,[],this.args):"object"==dsf.type(this.args)?this.cloneArgs=dsf.mix(!0,{},this.args):this.cloneArgs=this.args;var m=window.document.querySelector("#app"),v=this.$router||(null===m||void 0===m||null===(e=m.__vue__)||void 0===e||null===(e=e.$root)||void 0===e||null===(e=e.$options)||void 0===e?void 0:e.router),g=this.$store||(null===m||void 0===m||null===(n=m.__vue__)||void 0===n||null===(n=n.$root)||void 0===n?void 0:n.$options.store),y=this.$i18n||(null===m||void 0===m||null===(i=m.__vue__)||void 0===i||null===(i=i.$root)||void 0===i?void 0:i.$options.i18n),b=Vue.extend({router:v,store:g,i18n:y,data:function(){return{dialogVisible:!0,title:u||"设置",content:c,config:r,currentData:a.cloneArgs,width:d||"50%",height:p||"auto",top:h||"10vh",destroyOnClose:!0,owner:o,isMobile:l,overflow:_||"auto",params:r.params||{},skin:f||"",designer:s}},watch:{dialogVisible:function(t){a.dialogVisible=t}},created:function(){},methods:{sure:function(){var t=this;return A()(B.a.mark((function e(){var n;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=null,!t.$refs.content){e.next=9;break}if(!1===t.$refs.content.validate()){e.next=9;break}if(!t.$refs.content.yes){e.next=7;break}return e.next=6,t.$refs.content.yes();case 6:n=e.sent;case 7:t.dialogVisible=!1,t.$nextTick((function(){a.$emit("change",n)}));case 9:case"end":return e.stop()}}),e)})))()},clear:function(){var t=this;return A()(B.a.mark((function e(){var n;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=null,!t.$refs.content){e.next=8;break}if(!t.$refs.content.clear){e.next=6;break}return e.next=5,t.$refs.content.clear();case 5:n=e.sent;case 6:t.dialogVisible=!1,t.$nextTick((function(){a.$emit("change",n)}));case 8:case"end":return e.stop()}}),e)})))()},close:function(){this.dialogVisible=!1},cancel:function(){var t=this;w&&(w=null),window.setTimeout((function(){t.$destroy()}),0)}},template:'<DsfDialog :class=\'skin\' :title="title" :visible.sync="dialogVisible" :width="width" :top="top" :close-on-click-modal="false" :append-to-body="true"  @close="close" @closed="cancel" >\n                    <div :style="{\'height\':height,\'overflow\':(overflow||\'auto\')}">\n                     <component :is="content"  v-bind="params" :designer="designer" :is-mobile="designer.mobile" :current-data="currentData" :owner="owner" :config="config" ref="content"></component>\n                    </div>\n                    <template v-slot:footer>\n                      <DsfButton text="确定" @click="sure" />\n                      <DsfButton v-if="config.isClear" type="plain" :text="config.isClear === true ? \'清空\' : config.isClear" @click="clear" />\n                      <DsfButton text="取消" type="plain" @click="close"/>\n                    </template>\n                  </DsfDialog>'}),w=(new b).$mount()}}},Kt=Ut,Wt=Object(c["a"])(Kt,Gt,zt,!1,null,null,null),qt=Wt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ds-range-select"},[n("el-select",{attrs:{disabled:t.disabled,placeholder:"请选择"},on:{change:t.valueChange,"visible-change":function(e){return t.$emit("visible-change",e)}},model:{value:t.startValue,callback:function(e){t.startValue=e},expression:"startValue"}},t._l(t.start,(function(t,e){return n("el-option",{key:"start-"+e,attrs:{label:t.text,value:t.value}})})),1),n("span",{staticClass:"seperate"},[t._v("至")]),n("el-select",{attrs:{disabled:t.disabled,placeholder:"请选择"},on:{change:t.valueChange,"visible-change":function(e){return t.$emit("visible-change",e)}},model:{value:t.endValue,callback:function(e){t.endValue=e},expression:"endValue"}},t._l(t.end,(function(t,e){return n("el-option",{key:"start-"+e,attrs:{label:t.text,value:t.value}})})),1)],1)},Xt=[],Yt={props:{disabled:{type:Boolean,default:!1},value:{type:Array,default:function(){return[]}},dictionary:{type:Array,default:function(){return[]}}},data:function(){return{startValue:"",endValue:""}},computed:{start:function(){return this.dictionary},end:function(){var t=this,e=this.dictionary.findIndex((function(e){return e.value===t.startValue}));return this.dictionary.slice(e)}},watch:{value:function(){this.initValue()}},created:function(){this.initValue(),this.valueChange()},methods:{initValue:function(){this.startValue=this.value.length?this.value[0]:this.dictionary[0].value,this.endValue=this.value.length?this.value[1]:this.dictionary[this.dictionary.length-1].value},valueChange:function(){var t=this;if(this.end.some((function(e){return e.value===t.endValue}))){var e=[this.startValue,this.endValue];this.$emit("input",e),this.$emit("change",e)}else this.endValue=this.end[0].value}}},Qt=Yt,Jt=Object(c["a"])(Qt,Ht,Xt,!1,null,null,null),Zt=Jt.exports,te={name:"DsfDesignerProperty",components:{DsfDesignerDialog:qt,DsfRangeSelect:Zt},inject:{$designer:{default:null},$properties:{default:null},$designerRight:{default:null}},props:{id:{type:String,default:""},disabled:{type:Boolean,default:!1},data:{type:Object,default:function(){return{}}},bind:{type:Object,default:function(){return{}}},owner:{type:Object,default:function(){return{}}},desc:{type:String,default:""},descStriking:{type:Boolean,default:!1}},data:function(){return{dataValue:this.convertFromDataType(this.bind.data[this.bind.key])}},computed:{isMobile:function(){return this.owner.$designer.mobile||!1},config:function(){var t=this.data.config;return t||{}},dataValueArray:{get:function(){return this.dataValue||[]},set:function(t){this.dataValue=t}},inputDisabled:function(){var t,e=this.disabled,n=this.config,i=this.data,s=this.owner;return!0===e||(!(null===n||void 0===n||!n.disabled)||!("caption"!=(null===i||void 0===i?void 0:i.bindControlAttr)||!s.isFormControl||!(s.isBusiness||null!==(t=s.metadata)&&void 0!==t&&t.isFromMetaData)))}},created:function(){if(this.$watch((function(){var t,e,n=(null===this||void 0===this||null===(t=this.bind)||void 0===t?void 0:t.key)||"",i=null===this||void 0===this||null===(e=this.bind)||void 0===e||null===(e=e.data)||void 0===e?void 0:e[n];return i}),{handler:function(t){this.dataValue=this.convertFromDataType(t)}}),this.data.loadExceFunction){var t=this.data.loadExceFunction,e=this.owner[t];e&&e.call(this.owner,this.data)}},beforeDestroy:function(){this._visibleProper&&this.$designerRight&&this.$designerRight.focusPopper(!1,this.id)},methods:{getInCommonUse:function(t){return this.$properties.filterIsCommonUse(t)},dataValueChange:function(t){var e=this,n=t;if(void 0!==n&&this.bind.key){var i=this.convertToDataType(t,this.data.splitChart);"caption"==this.bind.key&&dsf.isString(i)&&(i=i.toLowerCase(),this.dataValue=i),this.bind.data[this.bind.key]=i}this.$nextTick((function(){if(e.data.changeExecFunction){var t=e.data.changeExecFunction,n=e.owner[t];n&&n.call(e.owner,e.data.bindControlAttr)}e.$nextTick((function(){var t,n;null===e||void 0===e||null===(t=e.owner)||void 0===t||null===(t=t.$designer)||void 0===t||null===(n=t.recordPageChange)||void 0===n||n.call(t)}))}))},showHelp:function(t){this.$openDialog({title:t.name,width:t.descWidth||"500px",height:t.descHeight||"300px",overflow:"auto",template:'<span style="display: inline-block; line-height: 1.5em" v-html="dsf.safe.xss(params.value)"></span>',params:{value:t.desc},btns:[]})},convertFromDataType:function(t){var e=t;if(dsf.isDef(t))if("text"==this.data.showType)this.data&&this.data&&this.data.dataType&&("Number[]"==this.data.dataType||"String[]"==this.data.dataType?"array"==dsf.type(t)&&(e=t.join(this.data.splitChart||",")):"Number"==this.data.dataType&&(e=t.toString()));else if("timePicker"==this.data.showType&&"array"==dsf.type(t)){var n=dsf.date.format(new Date,"yyyy/mm/dd ");e=[new Date(n+t[0]),new Date(n+t[1])]}return e},convertToDataType:function(t){var e=t;return dsf.isDef(t)&&("text"==this.data.showType&&"string"==dsf.type(t)?"Number[]"==this.data.dataType?(e=t.split(this.data.splitChart||","),e=_.map(e,(function(t){return parseFloat(t)}))):"String[]"==this.data.dataType?e=t.split(this.data.splitChart||","):"Number"==this.data.dataType&&(e=parseFloat(e)):"timePicker"==this.data.showType&&Array.isArray(t)&&(e=[dsf.date.format(t[0],"hh:ii:ss"),dsf.date.format(t[1],"hh:ii:ss")])),e},arrayDataValueChange:function(t,e,n){this.dataValueChange(e.slice(0))},getRequestUrl:function(t){return dsf.url.getWebPath(t.requestUrl||"/file/upload/")},handleSuccess:function(t){var e=this;return function(t,n){e.dataValueChange(t.data[0].absolutePath)}.bind(this)},beforeUpload:function(t){},visibleChange:function(t){this._visibleProper=t,this.$designerRight.focusPopper(t,this.id)}}},ee=te,ne=Object(c["a"])(ee,Ft,Vt,!1,null,null,null),ie=ne.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.buttons,(function(e,i){return n("DsfButton",{directives:[{name:"show",rawName:"v-show",value:t.showButton(e),expression:"showButton(button)"}],key:i,attrs:{title:e.text,icon:e.icon,"btn-style":"icon-text"},on:{click:function(t){return e.handler(t,e)}}},[t._v(" "+t._s(e.text)+" ")])})),1)},ae=[],oe={name:"DsfDesignerButtons",inject:{$designer:{default:null}},props:{buttons:{type:Array,default:function(){return[]}},designer:{type:Object,default:function(){return null}},showButton:{type:Function,default:dsf.noop}},created:function(){var t,e;null===this||void 0===this||null===(t=this.$designer)||void 0===t||null===(e=t.renderTopButtons)||void 0===e||e.call(t,this.buttons)},methods:{}},re=oe,le=Object(c["a"])(re,se,ae,!1,null,null,null),ue=le.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-tabs",{staticClass:"ds-development",staticStyle:{width:"100%",height:"100%"},attrs:{type:"card"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"业务代码",name:"code",lazy:""}},[n("MonacoEditor",{ref:"extCode",attrs:{code:t.extCode}})],1),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"自定义样式",name:"css",lazy:""}},[n("MonacoEditor",{ref:"css",attrs:{code:t.css,language:"scss"}})],1),n("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"模板(仅查看,不可修改)",name:"模板",lazy:""}},[n("MonacoEditor",{ref:"vueTemplate",attrs:{code:t.vueTemplate,language:"html"}})],1)],1)},de=[],pe=n(8),he=n.n(pe),_e={code:"extCode",css:"css","模板":"vueTemplate"},fe={name:"Development",props:{vueTemplate:{type:String,default:""},css:{type:String,default:""},extCode:{type:String,default:""}},data:function(){return{active:"code"}},watch:{active:function(){this.layout()}},mounted:function(){var t=this;this.__resizeObserver=new ResizeObserver((function(e){var n=he()(e,1),i=n[0];return i&&t.layout()})),this.__resizeObserver.observe(this.$el)},beforeDestroy:function(){var t;null===(t=this.__resizeObserver)||void 0===t||t.disconnect()},methods:{layout:_.debounce((function(){var t=this.$refs[_e[this.active]];t&&t.editor&&t.editor.layout()}),300),yes:function(){var t=this.$refs.extCode?this.$refs.extCode.getContent():this.extCode,e=this.$refs.css?this.$refs.css.getContent():this.css,n=this.$refs.vueTemplate?this.$refs.vueTemplate.getContent():this.vueTemplate;return{extCode:t,css:e,vueTemplate:n}}}},me=fe,ve=Object(c["a"])(me,ce,de,!1,null,null,null),ge=ve.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],ref:"designerPanel",staticClass:"ds-designer",class:[t.mobile?"mobile":"pc"]},[n("div",{staticClass:"designer-head"},[n("div",{staticClass:"designer_tools"},[t._t("top")],2)]),n("div",{staticClass:"designer-content"},[n("div",{staticClass:"designer-center"},[t._t("nav"),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeft,expression:"showLeft"}],staticClass:"designer-left"},[t._t("left")],2),n("dsf-designer-container",t._g(t._b({staticClass:"designer-page"},"dsf-designer-container",t.$props,!1),t.$listeners),[t._t("default")],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showRight,expression:"showRight"}],staticClass:"designer-right"},[t._t("right")],2)],2)]),t._t("append")],2)},be=[],we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"screen-value",rawName:"v-screen-value",value:t.fullScreen,expression:"fullScreen"},{name:"screen-class",rawName:"v-screen-class",value:"dsf-designer-container-full",expression:"'dsf-designer-container-full'"}],class:[t.auxiliary?"dsf-designer-container":"dsf-designer-container-disabled"],on:{wheel:function(e){return e.stopPropagation(),t.onWheel.apply(null,arguments)}}},[t.auxiliary?[n("div",{staticClass:"dsf-designer-container__tools"},[n("div",{staticClass:"tools-item"},[t._v(" 设备 "),n("el-dropdown",{attrs:{size:"mini",placement:"top"},on:{command:t.deviceChange}},[n("span",{staticClass:"bt"},[t._v(t._s(t.device?t.device.text||t.device.name:""))]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.deviceConfig,(function(e){return n("el-dropdown-item",{key:e.name,attrs:{divided:e.divided,command:e}},[t._v(" "+t._s(e.text||e.name)+" "),"auto"!=e.name?n("span",{staticStyle:{color:"#aaa"}},[t._v(" ("+t._s(e.width)+" x "+t._s(e.height)+") ")]):t._e()])})),1)],1),n("span",{staticClass:"bt",on:{click:t.setRect}},[t._v(t._s(t.width))]),t._v(" x "),n("span",{staticClass:"bt",on:{click:t.setRect}},[t._v(t._s(t.height))])],1),t.disableScale?t._e():n("div",{staticClass:"tools-item"},[t._v(" 缩放 "),n("el-dropdown",{attrs:{size:"mini",placement:"top"},on:{command:t.scaleChange}},[n("span",{staticClass:"bt"},[t._v(t._s(t.scale)+"%")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.scaleConfig,(function(e){return n("el-dropdown-item",{key:e,attrs:{command:e}},[t._v(t._s(e)+"%")])})),1)],1)],1),t.mobile&&!t.disableRotate?n("div",{staticClass:"tools-item"},[t._v(" 旋转 "),n("i",{staticClass:"bt rotate-bt",attrs:{rotate:!!t.device&&t.device.rotate},on:{click:t.doRotate}},[n("dsf-icon",{attrs:{name:"icon_phonenumber1"}}),n("dsf-icon",{attrs:{name:"menu-revoke"}})],1)]):t._e(),n("div",{staticClass:"tools-item",attrs:{disable:t.disableRuler}},[t._v(" 刻度 "),n("dsf-icon",{staticClass:"bt",attrs:{name:"zidingyi"},on:{click:function(e){t.disableRuler=!t.disableRuler}}})],1),n("div",{staticClass:"tools-item",attrs:{disable:t.disableGuidelines}},[t._v(" 辅助线 "),n("dsf-icon",{staticClass:"bt",attrs:{name:"dingwei"},on:{click:function(e){t.disableGuidelines=!t.disableGuidelines}}})],1),n("div",{staticClass:"tools-item"},[t._v(" "+t._s(t.fullScreen?"还原":"全屏")+" "),n("dsf-icon",{staticClass:"bt",attrs:{name:t.fullScreen?"huanyuanhuabu":"quanping"},on:{click:t.doFullScreen}})],1),n("dsf-icon",{staticClass:"help-bt",attrs:{name:"icon-mine-questionnaire",title:"快捷键"},on:{click:t.showHelp}})],1),n("transition",{attrs:{name:"el-fade-in-linear"}},[t.showScaleTips&&!t.disableScale?n("div",{staticClass:"scale-tips"},[n("span",[t._v(t._s(t.scale)+"%")]),t.isMac?n("div",[t._v("option键 + 鼠标滚轮")]):n("div",[t._v("alt键 + 鼠标滚轮")])]):t._e()]),t.disableRuler?t._e():n("Ruler",{ref:"rulerX",staticClass:"__ruler __x",attrs:{type:"x"}}),t.disableRuler?t._e():n("Ruler",{ref:"rulerY",staticClass:"__ruler __y",attrs:{type:"y"}}),t.disableGuidelines?t._e():n("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseIsEnter,expression:"mouseIsEnter"}],staticClass:"__guidelines __x",style:{transform:"translateX("+t.mousePointX+"px)"}},[n("span",[t._v(t._s(t.mousePointLeft))])]),t.disableGuidelines?t._e():n("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseIsEnter,expression:"mouseIsEnter"}],staticClass:"__guidelines __y",style:{transform:"translateY("+t.mousePointY+"px)"}},[n("span",[t._v(t._s(t.mousePointTop))])])]:t._e(),n("div",{ref:"warp",staticClass:"dsf-designer-container__warp",on:{mouseenter:function(e){t.mouseIsEnter=!0},mouseleave:function(e){t.mouseIsEnter=!1},mousemove:t.warpMousemove,scroll:t.onScroll}},[t.auxiliary?[n("div",{ref:"rect",staticClass:"__rect"}),n("div",{staticClass:"__occupying",style:t.occupyingStyle,on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.panelMouseDown.apply(null,arguments)}}})]:t._e(),n("div",{staticClass:"dsf-designer-container__warp-canvas",class:{"is-key-alt":t.isKeyAlt},style:t.canvasStyle,on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:e.altKey?t.panelMouseDown.apply(null,arguments):null}}},[t._t("default")],2)],2),n("Help",{ref:"help"})],2)},xe=[],ke=n(7),Ce=n.n(ke),$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas")},Se=[],Te={name:"Ruler",inject:["$designerContainer"],props:{type:String},computed:{realWidth:function(){return this.$designerContainer.realWidth},realHeight:function(){return this.$designerContainer.realHeight},top:function(){return this.$designerContainer.top},left:function(){return this.$designerContainer.left},scale:function(){return this.$designerContainer.scale}},mounted:function(){this.ctx=this.$el.getContext("2d")},methods:{resize:function(){var t=this.type,e=this.ctx,n=this.$el;if(e){var i=this.$designerContainer.boxRect.box,s=i.width,a=void 0===s?0:s,o=i.height,r=void 0===o?0:o;a&&r&&(a="y"==t?18:a,r="x"==t?18:r,n.width=a,n.height=r,e.width=2*a,e.height=2*r)}},draw:function(){var t=this.type,e=this.ctx;e.clearRect(0,0,e.width,e.height),"y"==t?this.drawY():this.drawX()},drawX:function(){var t=this.ctx,e=this.$designerContainer,n=e.left,i=e.scale,s=e.realWidth,a=e.boxRect,o=a.scrollLeft,r=void 0===o?0:o,l=a.box.width;n-=r+12;var u=n+s,c=n,d=0;while(c<=l)p(),d++;d=-1;while(c>=0)p(),d--;function p(){c=n+d*i/10;var e=d%10==0,s=c>=n&&c<=u;t.strokeStyle=s?e?"#333":"#999":"#ccc",c=Math.round(c),t.beginPath(),t.lineWidth=1,t.lineCap="round",t.moveTo(c,0),t.lineTo(c,e?12:6),t.stroke(),e&&s&&(t.font="10px sans-serif",t.fillStyle="#777",t.fillText(10*d,c+5,18))}},drawY:function(){var t=this.ctx,e=this.$designerContainer,n=e.top,i=e.scale,s=e.realHeight,a=e.boxRect,o=a.scrollTop,r=void 0===o?0:o,l=a.box.height;t.lineWidth=1,n-=r+12;var u=n+s,c=n,d=-1;while(c>=0)p(),d--;d=0;while(c<=l)p(),d++;function p(){c=n+d*i/10;var e=d%10==0,s=c>=n&&c<=u;t.strokeStyle=s?e?"#333":"#999":"#ccc",c=Math.round(c),t.beginPath(),t.lineCap="round",t.moveTo(0,c),t.lineTo(e?12:6,c),t.stroke(),e&&s&&(t.save(),t.translate(18,c+5),t.rotate(-Math.PI/2),t.font="10px sans-serif",t.fillStyle="#777",t.textAlign="right",t.fillText(10*d,0,0),t.rotate(Math.PI/2),t.translate(-18,5-c),t.restore())}}}},Ee=Te,De=Object(c["a"])(Ee,$e,Se,!1,null,null,null),Oe=De.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"帮助",visible:t.dialogVisible,"custom-class":"dsf-designer-container__help",width:"600px","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[t.$designerContainer.disableScale?t._e():n("p",[n("label",[n("span",{staticClass:"key"},[t._v(t._s(t.altKeyName))]),t._v(" + 鼠标滚轮：")]),n("span",[t._v("控制视图缩放")])]),n("p",[n("label",[n("span",{staticClass:"key"},[t._v(t._s(t.altKeyName))]),t._v(" + 鼠标左键：")]),n("span",[t._v("有滚动条时，可拖动视图位置")])]),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("dsf-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)])},Le=[],Ne={name:"Help",inject:{$designerContainer:{default:null}},data:function(){var t=dsf.client.isMac();return this.altKeyName=t?"option":"alt;",{dialogVisible:!1}},methods:{open:function(){this.dialogVisible=!0}}},Re=Ne,Ie=Object(c["a"])(Re,Pe,Le,!1,null,null,null),Ae=Ie.exports,Me=25,Be=30,je=2*Be,Fe={name:"DsfDesignerContainer",components:{Ruler:Oe,Help:Ae},inject:{$designer:{default:null}},provide:function(){return{$designerContainer:this}},props:{mobile:{type:Boolean,default:!1},disableScale:{type:Boolean,default:!1},disableRotate:{type:Boolean,default:!1},deviceList:{type:Array,default:function(){return[]}},defaultDevice:{type:Object,default:null}},data:function(){return this.scaleConfig=[50,60,80,100,125,150,200],this.isMac=dsf.client.isMac(),{autoDevice:{name:"auto",text:"自定义",width:0,height:0},showScaleTips:!1,device:null,fullScreen:!1,disableRuler:!1,disableGuidelines:!0,mouseIsEnter:!1,scrollWidth:0,scrollHeight:0,scale2:100,top:Be,left:Be,mousePointX:0,mousePointY:0,mousePointLeft:0,mousePointTop:0,isKeyAlt:!1,isDownPanel:!1,scrollBarXStyle:{},scrollBarYStyle:{}}},computed:{auxiliary:function(){var t=this.$designer,e=t.auxiliary,n=t.disableAuxiliary;return!n&&e},deviceConfig:function(){var t=this.mobile?Ve:Ge;return this.deviceList.length?[this.autoDevice].concat(this.deviceList,t):[this.autoDevice].concat(t)},width:function(){if(!this.device)return 0;var t=this.device,e=t.rotate,n=t.width,i=void 0===n?0:n,s=t.height,a=void 0===s?0:s;return e?a:i},height:function(){if(!this.device)return 0;var t=this.device,e=t.rotate,n=t.width,i=void 0===n?0:n,s=t.height,a=void 0===s?0:s;return e?i:a},scale:{get:function(){return this.scale2},set:function(t){this.disableScale||(this.scale2=t>Me?t:Me)}},realWidth:function(){var t=this.width,e=this.scale;return t*e/100},realHeight:function(){var t=this.height,e=this.scale;return t*e/100},warpStyle:function(){var t=this.top,e=this.left,n=this.scale;return n/=100,{"background-size":"".concat(n/10,"px ").concat(n/10,"px, ").concat(n,"px ").concat(n,"px"),"background-position":"".concat(e,"px ").concat(t,"px, ").concat(e-n/20,"px ").concat(t-n/20,"px")}},canvasStyle:function(){if(!this.auxiliary)return{};var t=this.top,e=this.left,n=this.width,i=this.height,s=this.scale;return s/=100,{width:"".concat(n,"px"),height:"".concat(i,"px"),transform:"translate(".concat(e,"px, ").concat(t,"px) scale(").concat(s,")")}},occupyingStyle:function(){if(!this.auxiliary)return{};var t=this.boxRect||{},e=t.hasXScroll,n=void 0!==e&&e,i=t.hasYScroll,s=void 0!==i&&i,a=this.left,o=this.top,r=this.scale,l=this.scrollWidth,u=this.scrollHeight;return n?l+="px":l="100%",s?u+="px":u="100%",{"background-size":"".concat(r/10,"px ").concat(r/10,"px, ").concat(r,"px ").concat(r,"px"),"background-position":"".concat(a+r/20,"px ").concat(o+r/20,"px, ").concat(a+r/2,"px ").concat(o+r/2,"px"),width:l,height:u}},rulerXStyle:function(){if(!this.auxiliary)return{};var t=this.realWidth,e=this.top,n=this.left;return{width:"".concat(t,"px"),height:"20px",top:"".concat(e,"px"),left:"".concat(n,"px")}},rulerYStyle:function(){if(!this.auxiliary)return{};var t=this.realHeight,e=this.top,n=this.left;return{height:"".concat(t,"px"),width:"20px",top:"".concat(e,"px"),left:"".concat(n,"px")}}},watch:{auxiliary:{handler:function(t){var e=this;t?this.$nextTick((function(){e.device||(e.setBoxRect(),e.setDefaultDevice(),e.autoScale()),window.$designerSscale=e.scale,e.$emit("scale-change",e.scale),e.mobile&&ze(e.width),window.addEventListener("keydown",e.onKeyDown),e.doResize(),e.$nextTick(e.toScroll)})):(this.isKeyAlt=!1,window.$designerSscale=100,this.$emit("scale-change",100),this.mobile&&ze(375),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),document.body.removeEventListener("mousemove",this.onKeyUp),this.$nextTick((function(){e.dispatchResize()})))},immediate:!0},disableRuler:function(t){var e=this;t||this.$nextTick((function(){e.resizeRuler(),e.drawRuler()}))},scale:function(t){var e=this;this.showScaleTips=!0,clearTimeout(this.__showScaleTipsTimeout),this.__showScaleTipsTimeout=setTimeout((function(){e.showScaleTips=!1}),1e3),window.$designerSscale=t,this.$emit("scale-change",t)},width:function(t){this.mobile&&ze(this.auxiliary?t:375)}},created:function(){this.dispatchResize=_.debounce(dsf.dispatchResize,500),this.$resize=_.throttle(this.doResize,16),this.auxiliary&&window.addEventListener("keydown",this.onKeyDown)},mounted:function(){var t=this;window.ResizeObserver&&(this.observer=new ResizeObserver((function(){t.auxiliary&&(t.setBoxRect(),t.doResize(),t.$nextTick(t.toScroll))})),this.observer.observe(this.$refs.warp))},beforeDestroy:function(){var t;null===(t=this.observer)||void 0===t||t.disconnect(),this.dispatchResize.cancel(),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),document.body.removeEventListener("mousemove",this.onKeyUp),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)},methods:{setDefaultDevice:function(){var t=this.defaultDevice,e=this.deviceConfig,n=t?_.find(e,(function(e){return e.name==t.name})):null;n||(n=this.mobile?e[1]:e[0]),this.device=n,this.$emit("device-change",n)},deviceChange:function(t){var e=this;"auto"!=t.name||t.width&&t.height||(t.width=this.width,t.height=this.height),this.device=t,t.width&&t.height&&this.autoScale(),this.$emit("device-change",t),this.doResize(),this.$nextTick((function(){e.toScroll(),e.dispatchResize()}))},autoScale:function(){if(!this.disableScale){var t=this.boxRect.box,e=t.width,n=t.height,i=Math.floor(100*Math.min((e-je)/this.width,(n-je)/this.height));this.scale=i<100?i:100}},scaleChange:function(t){this.scale=t,this.doResize(),this.$nextTick(this.toScroll)},doRotate:function(){var t=this;this.$set(this.device,"rotate",!this.device.rotate),this.autoScale(),this.doResize(),this.$nextTick((function(){dsf.dispatchResize(),t.toScroll()}))},doFullScreen:function(){var t=this.fullScreen,e=this.$el;this.fullScreen=!t,t?(this.$refs.warp.classList.remove("designer-page"),e.classList.remove("ds-designer"),e.classList.remove("mobile")):(this.$refs.warp.classList.add("designer-page"),e.classList.add("ds-designer"),this.mobile&&e.classList.add("mobile"))},setBoxRect:function(){var t=this.$refs.warp.getBoundingClientRect();this.boxRect={box:t}},doResize:function(){if(this.auxiliary){var t=this.width,e=this.height,n=this.$refs,i=n.warp,s=n.rect,a=s.offsetWidth,o=s.offsetHeight;a<i.offsetWidth&&(a=i.offsetWidth),o<i.offsetHeight&&(o=i.offsetHeight),t&&e||(this.$set(this.device,"width",a-je),this.$set(this.device,"height",o-je));var r=this.realWidth,l=this.realHeight,u=this.$el.getBoundingClientRect(),c=a,d=o,p=!1,h=!1;r>c-je&&(c=r+je,p=!0),l>d-je&&(d=l+je,h=!0),this.boxRect=Object.assign(this.boxRect,{left:u.left,top:u.top,width:a,height:o,scrollWidth:c,scrollHeight:d,hasXScroll:p,hasYScroll:h,scrollTop:0,scrollLeft:0}),this.scrollWidth=c,this.scrollHeight=d,this.resizeRuler()}},toScroll:function(t,e){if(this.auxiliary){var n=this.$refs.warp,i=n.scrollTop,s=n.scrollLeft;void 0==t&&(t=s),void 0==e&&(e=i);var a=this.realWidth,o=this.realHeight,r=this.boxRect,l=r.hasXScroll,u=r.hasYScroll,c=r.scrollWidth,d=r.scrollHeight,p=Be,h=Be;l||(h=(c-a)/2),u||(p=(d-o)/2),this.top=p,this.left=h,(l||u)&&this.$refs.warp.scrollTo(t,e),this.drawRuler()}},onScroll:function(t){if(this.auxiliary){var e=t.target,n=e.scrollTop,i=e.scrollLeft,s=this.boxRect,a=this.left,o=this.top,r=this.mousePointX,l=this.mousePointY,u=this.scale;u/=100,this.boxRect=Object.assign(s,{scrollTop:n,scrollLeft:i}),this.mousePointLeft=Math.round((r-a+i)/u),this.mousePointTop=Math.round((l-o+n)/u),this.drawRuler()}},onWheel:function(t){if((t.ctrlKey||t.metaKey)&&t.preventDefault(),this.auxiliary){var e=t.deltaX,n=t.deltaY;t.shiftKey&&n&&(e=n,n=0),"FF"===dsf.client.type&&1===t.deltaMode?(e&&(e=e<0?-10:10),n&&(n=n<0?-10:10)):(Math.abs(e)<100?e/=2:e/=10,Math.abs(n)<100?n/=2:n/=10),t.altKey&&(t.preventDefault(),this.doScale(e+n>0?-1:1,t.clientX,t.clientY),this.warpMousemove(t))}},doScale:function(t){var e=this;if(!this.disableScale){var n=this.scale,i=this.mousePointX,s=this.mousePointY,a=this.$refs.warp,o=a.scrollTop,r=a.scrollLeft,l=n+t;if(!(l<Me)){var u=l/n;r=(i+r-Be)*u+Be-i,o=(s+o-Be)*u+Be-s,this.scale=l,this.doResize(),this.$nextTick((function(){e.toScroll(r,o)}))}}},onKeyDown:function(t){this.auxiliary&&18==t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.isKeyAlt=!0,window.addEventListener("keyup",this.onKeyUp),document.body.addEventListener("mousemove",this.onKeyUp))},onKeyUp:function(t){this.auxiliary&&("mousemove"==t.type&&!t.altKey||18==t.keyCode)&&(this.isKeyAlt=!1,window.removeEventListener("keyup",this.onKeyUp),document.body.removeEventListener("mousemove",this.onKeyUp))},panelMouseDown:function(t){window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)},mousemove:function(t){var e=t.movementX,n=void 0===e?0:e,i=t.movementY,s=void 0===i?0:i;this.$refs.warp.scrollBy(-n,-s)},mouseup:function(t){this.mousemove(t),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)},warpMousemove:function(t){if(this.auxiliary){var e=this.top,n=this.left,i=this.scale,s=this.boxRect;i/=100;var a=t.clientX-s.box.left,o=t.clientY-s.box.top;this.mousePointX=Math.round(a),this.mousePointY=Math.round(o),this.mousePointLeft=Math.round((a-n+s.scrollLeft)/i),this.mousePointTop=Math.round((o-e+s.scrollTop)/i)}},resizeRuler:function(){var t=this.$refs,e=t.rulerX,n=t.rulerY;e&&n&&(e.resize(),n.resize())},drawRuler:function(){var t=this.$refs,e=t.rulerX,n=t.rulerY;e&&n&&(e.draw(),n.draw())},setRect:function(){var t=this,e=(this.$createElement,Vue.observable({width:this.width+"",height:this.height+""})),n={width:[{required:!0,message:"宽度不能为空",trigger:"blur"},{type:"string",pattern:/^[1-9]\d+$/,message:"必须输入正整数",trigger:"blur"}],height:[{required:!0,message:"高度不能为空",trigger:"blur"},{type:"string",pattern:/^[1-9]\d+$/,message:"必须输入正整数",trigger:"blur"}]},i=function(i){return i("el-form",Ce()([{ref:"form",attrs:{"label-width":"60px"}},{props:{model:e}},{attrs:{rules:n}}]),[i("el-form-item",{attrs:{label:"宽",prop:"width"}},[i("div",{class:"el-input",style:"width: 280px"},[i("input",Ce()([{on:{input:function(n){n.target.composing||t.$set(e,"width",n.target.value)}},attrs:{type:"text"},class:"el-input__inner",domProps:{value:e.width}},{directives:[{name:"model",value:e.width,modifiers:{}}]}]))])]),i("el-form-item",{attrs:{label:"高",prop:"height"}},[i("div",{class:"el-input",style:"width: 280px"},[i("input",Ce()([{on:{input:function(n){n.target.composing||t.$set(e,"height",n.target.value)}},attrs:{type:"text"},class:"el-input__inner",domProps:{value:e.height}},{directives:[{name:"model",value:e.height,modifiers:{}}]}]))])])])};ELEMENT.MessageBox({title:"宽高设置",showClose:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",message:i(this.$createElement),beforeClose:function(e,n,i){"confirm"===e?t.$refs.form.validate((function(t){if(!t)return!1;i()})):i()}}).then((function(n){if("confirm"===n){var i=Number(e.width),s=Number(e.height);isNaN(i)||isNaN(s)||t.deviceChange({name:"auto",text:"自定义",width:i,height:s})}}))},showHelp:function(){this.$refs.help.open()}}},Ve=[{name:"iPhone SE",width:375,height:667,divided:!0},{name:"iPhone XR",width:414,height:896},{name:"iPhone 12 Pro",width:390,height:844},{name:"Pixel 5",width:393,height:851},{name:"Samsung Galaxy S8+",width:360,height:740},{name:"Samsung Galaxy S80 Ultra",width:412,height:915},{name:"iPad Air",width:1180,height:820},{name:"iPad Mini",width:1024,height:768},{name:"Surface Pro 7",width:1368,height:912}],Ge=[{name:"1k屏 (16:9)",width:1920,height:1080,divided:!0},{name:"2k屏 (16:9)",width:2560,height:1440},{name:"2.5k屏 (16:10)",width:2560,height:1600},{name:"4k屏 (16:9)",width:3840,height:2160},{name:"2k超宽屏 (21.5:9)",width:3440,height:1440},{name:"1k超宽屏 (32:9)",width:3840,height:1080},{name:"iPad Air",width:1180,height:820},{name:"iPad Mini",width:1024,height:768},{name:"Surface Pro 7",width:1368,height:912}];function ze(t){var e=320,n=100,i=2*t;i>750&&(i=750);var s=window.document.documentElement;s.style.fontSize=t>=i?n+"px":t<=e?n*(e/i)+"px":n*(t/i)+"px"}var Ue=Fe,Ke=Object(c["a"])(Ue,we,xe,!1,null,null,null),We=Ke.exports,qe={name:"DsfDesignerFrame",components:{DsfDesignerContainer:We},props:{showLeft:{type:Boolean,default:!0},showRight:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},mobile:{type:Boolean,default:!1},disableScale:{type:Boolean,default:function(){return!this.$route.query.all}},disableRotate:{type:Boolean,default:function(){return!this.$route.query.all}},deviceList:{type:Array,default:function(){return[]}},defaultDevice:{type:Object,default:null}}},He=qe,Xe=Object(c["a"])(He,ye,be,!1,null,null,null),Ye=Xe.exports,Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-left-item"},[t._t("head",(function(){return[n("div",{staticClass:"designer-left-head"},[n("span",[t._v(t._s(t.headTitle))]),t.allowCollapse?n("DsfIcon",{staticClass:"designer-icon-fixed",attrs:{name:"tuding",title:t.$leftToolsFloat?"固定":"悬浮"},on:{click:function(e){return t.leftToolsFixedOrFloat()}}}):t._e()],1)]})),n("div",{staticStyle:{height:"calc(100% - 40px)"}},[t._t("default")],2)],2)},Je=[],Ze={name:"DsfDesignerLeftItem",inject:{$designerLeft:{default:null},$designer:{default:null}},props:{id:{type:[String,Number,Boolean],default:null},title:{type:String,default:""},icon:{type:String,default:""},headTitle:{type:String,default:""},allowCollapse:{type:Boolean,default:!0}},computed:{$leftToolsFloat:function(){var t;return null===this||void 0===this||null===(t=this.$designerLeft)||void 0===t?void 0:t.float}},data:function(){return{leftToolsFloat2:!1}},methods:{leftToolsFixedOrFloat:function(){this.$designerLeft.float=!this.$designerLeft.float}}},tn=Ze,en=Object(c["a"])(tn,Qe,Je,!1,null,null,null),nn=en.exports,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-left-tools"},[n("el-tabs",{staticClass:"designer-left-tools-tabs",class:{"hide-tabs":1==t.$layoutTabs.length},attrs:{stretch:""},model:{value:t.$layout.toolsBox.activeName,callback:function(e){t.$set(t.$layout.toolsBox,"activeName",e)},expression:"$layout.toolsBox.activeName"}},t._l(t.$layoutTabs,(function(e){return n("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticStyle:{"padding-left":"4px"}},[t._v(t._s(e.label))])]},proxy:!0}],null,!0)},[n("div",{staticClass:"design-search-box"},[n("form",{attrs:{action:""},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.leftSearch.apply(null,arguments)}}},[n("el-input",{staticClass:"design-search-input",staticStyle:{height:"30px","line-height":"30px"},model:{value:t.leftSearchInput,callback:function(e){t.leftSearchInput=e},expression:"leftSearchInput"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.leftSearch},slot:"append"})],1)],1)]),n("div",{staticClass:"design-ctrl-box"},[n("div",{staticClass:"design-ctrl-box-inner"},["controls"===e.name&&"controls"==t.$layout.toolsBox.activeName?n("dsf-virtual-scroll",t._l(t.getFilterResult(t.$useControlsGroup.groups),(function(e,i){return n("el-collapse",{key:i,attrs:{accordion:""},model:{value:t.$useControlsGroup.activeName,callback:function(e){t.$set(t.$useControlsGroup,"activeName",e)},expression:"$useControlsGroup.activeName"}},[n("el-collapse-item",{attrs:{name:e.title}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",attrs:{title:e.title}},[t._v(" "+t._s(e.title)+" ")]),t.$designer.disabledCtrlGroupRemove?t._e():n("DsfIcon",{staticClass:"remove-item-icon",attrs:{name:"guanbi2"},on:{click:function(n){return n.stopPropagation(),t.removeControlGroup(e)}}})],1),n("div",{staticClass:"ds-tools-group-content"},t._l(e.items,(function(e,i){return n("dsf-designer-drag-item",{directives:[{name:"show",rawName:"v-show",value:t.isShow(e),expression:"isShow(item)"}],key:i,attrs:{data:e}})})),1)],2)],1)})),1):"metadata"===e.name&&"metadata"==t.$layout.toolsBox.activeName?n("dsf-virtual-scroll",t._l(t.getFilterResult(t.$useMetaGroup.groups),(function(e,i){return n("el-collapse",{key:i,attrs:{accordion:""},model:{value:t.$useMetaGroup.activeName,callback:function(e){t.$set(t.$useMetaGroup,"activeName",e)},expression:"$useMetaGroup.activeName"}},[n("el-collapse-item",{attrs:{name:e.id}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",attrs:{title:e.title||e.name}},[t._v(" "+t._s(e.title||e.name)+" ")]),t.$designer.disabledCtrlGroupRemove?t._e():n("DsfIcon",{staticClass:"remove-item-icon",attrs:{name:"guanbi2"},on:{click:function(n){return n.stopPropagation(),t.removeMetaDataGroup(e)}}})],1),n("div",{staticClass:"ds-tools-group-content"},t._l(e.items,(function(e,i){return n("dsf-designer-drag-item",{directives:[{name:"show",rawName:"v-show",value:t.isShow(e),expression:"isShow(item)"}],key:i,attrs:{data:e}})})),1)],2)],1)})),1):"business"===e.name&&"business"==t.$layout.toolsBox.activeName?n("dsf-virtual-scroll",t._l(t.getFilterResult(t.$useBusinessControlGroup.groups),(function(e,i){return n("el-collapse",{key:i,attrs:{accordion:""},model:{value:t.$useBusinessControlGroup.activeName,callback:function(e){t.$set(t.$useBusinessControlGroup,"activeName",e)},expression:"$useBusinessControlGroup.activeName"}},[n("el-collapse-item",{attrs:{name:e.title}},[n("template",{slot:"title"},[n("div",{staticClass:"ellipsis",attrs:{title:e.title}},[t._v(" "+t._s(e.title)+" ")]),t.$designer.disabledCtrlGroupRemove?t._e():n("DsfIcon",{staticClass:"remove-item-icon",attrs:{name:"guanbi2"},on:{click:function(n){return n.stopPropagation(),t.removeBusinessGroup(e)}}})],1),n("div",{staticClass:"ds-tools-group-content"},t._l(e.items,(function(e,i){return n("dsf-designer-drag-item",{directives:[{name:"show",rawName:"v-show",value:t.isShow(e),expression:"isShow(item)"}],key:i,attrs:{data:e}})})),1)],2)],1)})),1):t._e()],1)])])})),1)],1)},an=[],on={name:"DsfDesignerLeftTools",inject:{$designer:{default:null}},updated:function(){this.$designer.initToolDrag()},props:{layout:{type:Object},useControlsGroup:{type:Object,default:function(){return null}},useMetaGroup:{type:Object,default:function(){return null}},useBusinessControlGroup:{type:Object,default:function(){return null}},tools:{type:Object,default:function(){return{activeName:"",groups:[]}}}},computed:{showControlGroup:function(){return this.$designer.showControlGroup},showBusinessControlGroup:function(){return this.$designer.showBusinessControlGroup},showMetaGroup:function(){return this.$designer.showMetaGroup},$layout:function(){return this.layout?this.layout:(null===this||void 0===this||null===(t=this.$designer)||void 0===t?void 0:t.layout)||{};var t},$layoutTabs:function(){var t,e=this,n=(null===this||void 0===this||null===(t=this.$layout)||void 0===t||null===(t=t.toolsBox)||void 0===t?void 0:t.tabs)||[];return n=_.filter(n,(function(t){return"controls"==t.name?e.showControlGroup:"business"==t.name?e.showBusinessControlGroup:"metadata"==t.name?e.showMetaGroup:void 0})),n},$useControlsGroup:function(){return this.useControlsGroup?this.useControlsGroup:(null===this||void 0===this||null===(t=this.$designer)||void 0===t?void 0:t.useControlsGroup)||{};var t},$useBusinessControlGroup:function(){return this.useBusinessControlGroup?this.useBusinessControlGroup:(null===this||void 0===this||null===(t=this.$designer)||void 0===t?void 0:t.useBusinessControlGroup)||{};var t},$useMetaGroup:function(){return this.useMetaGroup?this.useMetaGroup:(null===this||void 0===this||null===(t=this.$designer)||void 0===t?void 0:t.useMetaGroup)||{};var t}},data:function(){return{leftSearchStr:"",leftSearchInput:""}},watch:{},methods:{isShow:function(t){var e,n=this.$designer.currPageMode==dsf.enums.viewMode.PROTOTYPE,i=t.name,s=!1;this.leftSearchStr?s=i?i.indexOf(this.leftSearchStr)>=0:(null===t||void 0===t||null===(e=t.id)||void 0===e?void 0:e.indexOf(this.leftSearchStr))>=0:s=!0;var a=!1;return a=!t.mode||(n?(t.mode||[]).indexOf("原型模式")>=0:(t.mode||[]).indexOf("研发模式")>=0),s&&a},leftSearch:function(){var t=this;this.leftSearchStr=this.leftSearchInput,this.$nextTick((function(){t.$designer.initToolDrag()})),this.$emit("search")},removeControlGroup:function(t){this.$designer.removeControlGroup(t)},removeMetaDataGroup:function(t){this.$designer.removeMetaDataGroup(t)},removeBusinessGroup:function(t){this.$designer.removeBusinessGroup(t)},getFilterResult:function(t){var e=this,n=[];return _.each(t,(function(t){var i=dsf.mix(!0,{},t);i.items=[],_.each(t.items,(function(t){e.isShow(t)&&i.items.push(t)})),i.items.length&&n.push(i)})),n}}},rn=on,ln=Object(c["a"])(rn,sn,an,!1,null,null,null),un=ln.exports,cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-right-wrap",class:{float:t.float,focus:t.isFocus}},[n("div",{staticClass:"designer-right-box"},[n("div",{staticClass:"designer-right-head ellipsis",attrs:{title:t.ctrlName||""}},[n("span",[t._v(t._s(t.ctrlName||""))]),n("dsf-icon",{staticClass:"designer-icon-fixed",attrs:{name:"tuding",title:t.float?"固定":"悬浮"},on:{click:t.rightToolsFixedOrFloat}})],1),n("div",{staticClass:"designer-right-content"},[t._t("default")],2)]),n("div",{staticClass:"designer-right-bar"},[t._l(t.tabList,(function(e,i){return[n("div",{key:i,staticClass:"designer-right-bar-item",class:{active:i===t.active},attrs:{title:e.componentOptions.propsData.title},on:{click:function(e){t.active=i},mouseenter:function(e){return t.mouseEnterHandler(i)}}},[n("i",{staticClass:"iconfont",class:[e.componentOptions.propsData.icon||"icon-huixingzhen"]}),n("span",[t._v(t._s(e.componentOptions.propsData.title))])])]}))],2)])},dn=[],pn={name:"DsfDesignerRight",inject:{$designer:{default:null}},provide:function(){return{$designerRight:this}},props:{allowCollapse:{type:Boolean,default:!0}},data:function(){return{active:-1,float:!1,focusPoppers:{}}},computed:{ctrlName:function(){var t,e,n;if(this.$designer.flow)return(null===(n=this.$designer.checked)||void 0===n?void 0:n.name)||"";var i=null===this||void 0===this||null===(t=this.$designer)||void 0===t?void 0:t.selectedComponentInstance;return(null===i||void 0===i||null===(e=i.$options)||void 0===e?void 0:e.ctrlCaption)||""},isFocus:function(){var t=this.focusPoppers;for(var e in t)if(t[e])return!0;return!1},tabList:function(){var t=this.$slots.default;return _.filter(t,(function(t){var e,n;return"dsf-designer-right-item"===(null===t||void 0===t||null===(e=t.componentOptions)||void 0===e?void 0:e.tag)||"DsfDesignerRightItem"===(null===t||void 0===t||null===(n=t.componentOptions)||void 0===n?void 0:n.tag)}))}},watch:{active:function(t,e){var n,i,s=null===(n=this.tabList)||void 0===n?void 0:n[e],a=null===(i=this.tabList)||void 0===i?void 0:i[t];null===s||void 0===s||s.elm.classList.remove("active"),null===a||void 0===a||a.elm.classList.add("active")},float:function(t,e){this.$nextTick().then((function(){dsf.dispatchResize()}))}},mounted:function(){this.tabList.length&&(this.active=0)},methods:{mouseEnterHandler:function(t){this.float&&(this.active=t)},rightToolsFixedOrFloat:function(){this.float=!this.float},focusPopper:function(t,e){void 0!=t?this.$set(this.focusPoppers,e,t):this.focusPoppers={}}}},hn=pn,_n=Object(c["a"])(hn,cn,dn,!1,null,null,null),fn=_n.exports,mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-right-item"},[t._t("head",(function(){return[t.headTitle?n("div",{staticClass:"designer-right-item-head"},[n("span",[t._v(t._s(t.headTitle))])]):t._e()]})),n("div",{staticClass:"designer-right-item-body"},[t._t("default")],2)],2)},vn=[],gn={name:"DsfDesignerRightItem",inject:{$designerRight:{default:null},$designer:{default:null}},props:{title:{type:String,default:""},icon:{type:String,default:""},headTitle:{type:String,default:""}}},yn=gn,bn=Object(c["a"])(yn,mn,vn,!1,null,null,null),wn=bn.exports,xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-left-wrap",class:{float:t.float}},[n("div",{staticClass:"designer-left-bar"},[t._l(t.tabList,(function(e){return[n("div",{key:e.id,staticClass:"designer-left-bar-item",class:{active:e===t.active},attrs:{title:e.title},on:{click:function(n){return t.itemClick(e.id)},mouseenter:function(n){return t.mouseEnterHandler(e.id)}}},[n("i",{staticClass:"iconfont",class:[e.icon||"icon-huixingzhen"]}),n("span",[t._v(t._s(e.title))])])]}))],2),n("div",{staticClass:"designer-left-box"},[t._t("default")],2)])},kn=[],Cn={name:"DsfDesignerLeft",provide:function(){return{$designerLeft:this}},data:function(){return this.activeItem=null,{active:null,float:!1}},inject:{$designer:{default:null}},computed:{tabList:function(){var t=this.$slots.default,e=_.filter(t,(function(t){var e,n;return"dsf-designer-left-item"===(null===t||void 0===t||null===(e=t.componentOptions)||void 0===e?void 0:e.tag)||"DsfDesignerLeftItem"===(null===t||void 0===t||null===(n=t.componentOptions)||void 0===n?void 0:n.tag)}));return _.map(e,(function(t,e){var n=_.cloneDeep(t.componentOptions.propsData);return n.vnode=t,dsf.isUnDef(n.id)&&(n.id=e),n}))}},watch:{float:function(t,e){this.$nextTick().then((function(){dsf.dispatchResize()}))}},mounted:function(){this.tabList.length&&this.showContent(this.tabList[0])},methods:{mouseEnterHandler:function(t){this.float&&this.itemClick(t)},itemClick:function(t){if(this.active.id!==t){var e=_.findIndex(this.tabList,(function(e){return e.id==t})),n=this.tabList[e];this.showContent(n),this.$emit("id-change",t),this.$emit("activeChange",{index:e,data:n,tab:n.vnode})}},showContent:function(t){var e,n;this.active&&(null===(n=this.active.vnode.elm)||void 0===n||n.classList.remove("active"));null===(e=t.vnode.elm)||void 0===e||e.classList.add("active"),this.active=t}}},$n=Cn,Sn=Object(c["a"])($n,xn,kn,!1,null,null,null),Tn=Sn.exports,En=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-left-outline"},[n("dsf-virtual-scroll",{attrs:{"scroll-x":"","scroll-y":""}},[n("dsf-designer-left-outline-tree",{attrs:{data:t.treeData,"active-id":t.activeItemId}})],1)],1)},Dn=[],On=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"designer-left-outline-tree"},[t._l(t.data,(function(e,i){return[n("div",{key:e.designId,staticClass:"designer-left-outline-tree-item",attrs:{id:"outline-"+e.designId}},[n("div",{staticClass:"designer-left-outline-tree-item-label",attrs:{title:t.getTitle(e)},on:{click:function(n){return t.itemClick(e)}}},[(t.children=t.getChildren(e))&&t.children.length?n("a",{staticClass:"iconfont icon-xiajiantou",on:{click:function(e){return e.stopPropagation(),t.doClosed.apply(null,arguments)}}}):t._e(),n("span",{attrs:{title:e.label}},[t._v(t._s(t._f("ctrlName")(e)))])]),n("br"),t.children.length?[n("dsf-designer-left-outline-tree",{attrs:{"parent-node":t.thisNode,"parent-item":e,data:t.children,"active-id":t.activeId}})]:t._e()],2),n("br",{key:i})]}))],2)},Pn=[],Ln=null,Nn={name:"DsfDesignerLeftOutlineTree",inject:{$designer:{default:null}},props:{parentNode:{type:Object,default:null},parentItem:{type:Object,default:null},data:{type:Array,default:function(){return[]}},activeId:{type:String,default:""}},data:function(){return{chooseId:null,thisNode:this}},filters:{ctrlName:function(t){Ln||(Ln=Object.assign.apply(Object,[{}].concat(a()(_.values(window.$components)))));var e=t.ctrlName,n=t.isFormControl,i=t.label;if(n&&i)return i;var s=Ln[e];if(dsf.isFunction(s)&&s.resolved){var o=s.resolved.extendOptions;return o.ctrlCaption||e}return(null===s||void 0===s?void 0:s.ctrlCaption)||e}},methods:{itemClick:function(t){var e=$(document).find('[des-id="'.concat(t.designId,'"]:not(.hidden-columns [des-id="').concat(t.designId,'"])'));this.$designer.clearSelectedSlot(),this.$designer.clearSelectedComponent(),this.$designer.selectedComponent($(e),!1,!0)},doClosed:function(t){var e=t.target.parentElement.parentElement;e.classList.contains("closed")?e.classList.remove("closed"):e.classList.add("closed")},getTitle:function(t){var e=["ID：".concat(t.designId),"组件：".concat(t.ctrlName)];return t.caption&&e.push("标识：".concat(t.caption)),t.label&&e.push("名称：".concat(t.label)),t.title&&e.push("标题：".concat(t.title)),e.join("\n")},getChildren:function(t){var e=this,n=t.slots||[],i=t.controls||[],s=a()(i);return _.forEach(n,(function(t){var n=e.getChildren(t);n.length&&s.push.apply(s,a()(n))})),s}}},Rn=Nn,In=Object(c["a"])(Rn,On,Pn,!1,null,null,null),An=In.exports,Mn={name:"DsfDesignerLeftOutline",components:{DsfDesignerLeftOutlineTree:An},inject:{$designer:{default:null}},data:function(){return{treeData:[]}},computed:{activeItemId:function(){var t=this.$designer.attributesOwner;return t.$designId||""}},watch:{activeItemId:function(t,e){var n=this;e&&this.$nextTick((function(){var t=n.$el.querySelector("#outline-".concat(e));null===t||void 0===t||t.classList.remove("active"),$(".designer-left-outline-tree-item.tag").removeClass("tag")})),t&&this.$nextTick((function(){var e=n.$el.querySelector("#outline-".concat(t));e&&(e.classList.add("active"),Bn(e.parentElement))}))}},created:function(){var t=this;this.$eventBus.$on("update-desinger-outline",(function(e){t.$designer===e&&t.updateTree()}))},mounted:function(){},methods:{updateTree:function(){var t=this.$designer.$refs.viewProxy;this.treeData=t?[t]:[]}}};function Bn(t){t.classList.contains("ds-virtual-scroll-box")||(t.classList.contains("designer-left-outline-tree-item")&&!t.classList.contains("tag")&&(t.classList.add("tag"),t.classList.remove("closed")),Bn(t.parentElement))}var jn=Mn,Fn=Object(c["a"])(jn,En,Dn,!1,null,null,null),Vn=Fn.exports,Gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ds-tool-item ds-desinger-drag-component",attrs:{name:t.data.name},on:{mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveHandler.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterHandler.apply(null,arguments)}}},[t.show?n("el-popover",{attrs:{placement:"right",trigger:"hover"}},[n("div",[n("div",[n("label",[t._v("编号：")]),n("span",[t._v(t._s(t.data.id))])]),n("div",[n("label",[t._v("标识：")]),n("span",[t._v(t._s(t.data.data.code))])]),n("div",[n("label",[t._v("名称：")]),n("span",[t._v(t._s(t.data.name))])]),n("div",[n("label",[t._v("说明：")]),n("span",{domProps:{innerHTML:t._s(t.data.remark)}},[t._v(t._s(t.data.naremarkme))])])]),n("div",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.data.name||t.data.id))])]):n("div",{staticClass:"ellipsis"},[t._v(t._s(t.data.name||t.data.id))])],1)},zn=[],Un={name:"DsfDesignerDragItem",props:{data:{type:Object,default:function(){return null}}},data:function(){return{show:!1}},computed:{title:function(){var t=this.data,e=t.data,n=t.id,i=t.name,s=t.remark;return["ID：",n,"\n","标识：",e.code,"\n","名称：",i,"\n","说明：",s||"暂无"].join("")}},methods:{mouseEnterHandler:function(t){this.show=!0},mouseLeaveHandler:function(t){this.show=!1}}},Kn=Un,Wn=Object(c["a"])(Kn,Gn,zn,!1,null,null,null),qn=Wn.exports,Hn={},Xn={name:"DsfLayoutTree",inheritAttrs:!1,provide:function(){return{$layoutParent:this,$layoutTree:this}},inject:{$layoutParent:{default:null},$designer:{default:null},$list:{default:null},$childCaptionUniqueScope:{default:null},$formLayoutBox:{default:null}},props:{componentProps:{type:Object,default:function(){return null}},rootProp:{type:Object,default:function(){return null}},parentProp:{type:Object,default:function(){return null}},ctrlIndex:{type:String,default:""},isLayoutTree:{type:Boolean,default:!0}},data:function(){return this.__vctrl__=null,this.virtualComponentClass=null,{layoutVirtual:!1,layoutActive:!1,$layoutContext:{props:null,root:null,parent:null,controls:{}},$designContext:{show:!0,minHeight:void 0,height:"auto",width:"auto",margin:"0",mask:!1,hasInfo:!1,hasDragDrop:!0,hasRemove:!0,hasSetting:!0,settingButton:!1,settingMenus:[],settingButtonHandler:null,showCaption:!1},$events:{},$clientId:"",$scopeData:null,$isReload:!1,watchs:[],settingOpen:!1,layoutProxy:!0,isMounted:!1}},computed:{$$getCss:function(){var t=[],e=this.__context__.props,n=e.isFormControl,i=e.isTextContent;if((n||i)&&this.$formLayoutBox&&this.$parent==this.$formLayoutBox){var s,o="",r=[];if(this.$designer.mobile)o=24,r=["van-col","van-col--"+o];else o=this.__context__.props.colSpan?this.__context__.props.colSpan:null===(s=this.$formLayoutBox)||void 0===s?void 0:s.colSpan,parseInt(o||0)>0&&(r=["el-col","el-col-"+o]);t.push.apply(t,a()(r))}return t},$virtual:function(){return!!this.layoutVirtual&&!this.layoutActive},__designLock__:function(){var t,e=!1;return dsf.isFunction(null===(t=this.$designer)||void 0===t?void 0:t.isLocked)&&(e=!0===this.$designer.isLocked(this)),e},__context__:function(){return this.$data.$layoutContext},__desContext__:function(){return this.$data.$designContext},__hasDesign__:function(){return this.$attrs["is-design"]},__nodeSwitch__:function(){var t=this.__context__.props.designProxy;return t?"design-proxy":"design-no-proxy"},__hasComponentDocument__:function(){var t,e=null===(t=this.$designer)||void 0===t?void 0:t.pageDocument,n=this.__context__.props.designId;return!(!e||!n)&&new RegExp('did="'.concat(n,'"'),"gi").test(e)},__showMask__:function(){return this.__desContext__.mask},__showMarkInfo__:function(){return this.__desContext__.hasInfo},__showMarkDragDrop__:function(){return this.__desContext__.hasDragDrop&&this.__context__.props.designShowMarkDragDrop},__showMarkRemove__:function(){return this.__desContext__.hasRemove&&this.__context__.props.designShowMarkRemove},__showMarkCaption__:function(){return this.__desContext__.showCaption&&this.__context__.props.designShowMarkCaption}},watch:{$virtual:{handler:function(t){si.call(this,t)}},"componentProps.__virtual__":{handler:function(t,e){ni.call(this)}},"__context__.props.metadata.dataSource":{handler:function(t){("items-meta-data"==this.__context__.props.metadata.ckey||this.__context__.props.metadata.dataSourceWatch)&&di.call(this,t)}},"$designer.openDesignerUrl":{handler:function(t,e){this.$updateOpenDesignerUrl()}},"__context__.props.openDesignerUrl":{handler:function(t,e){this.$updateOpenDesignerUrl()}},componentProps:{handler:function(){this.__context__.props=this.componentProps,this.__context__.props.isView?this.__context__.root=this:this.__context__.root=this.rootProp}},isMounted:{handler:function(t){var e=this;t&&this.$nextTick((function(){_i.call(e)}))}}},setup:function(){},beforeCreate:function(){},created:function(){this.__context__.props=this.componentProps,ei.call(this),ti.call(this),ni.call(this);var t=this.__context__.props.designId;this.$designer.allComponentProps[t]=this.__context__.props||null,this.$createSelectedAction(),this.$formControlAndLabelWatch(),si.call(this,this.$virtual),Object.defineProperty(this,"realCtrl",{get:function(){return this.$refs.ctrl},configurable:!0})},updated:function(){},mounted:function(){hi.call(this);var t=this.__context__.props.ctrlName;if(!t){var e=dsf.getComponentOptions(this.__context__.props.ctrlType);t=e.name}if(!Vue.options.components[t])return dsf.layer.message("【".concat(t,"】组件没有被注册，请调用Vue.component函数进行全局注册"),!1),void this.$$remove();this.$designer.$emit("layout-tree-mounted",this)},beforeDestroy:function(){_.each(this.watchs||[],(function(t){t()}));try{this.$refs.dragdrap&&$(this.$refs.dragdrap).draggable("destroy")}catch(t){}},destroyed:function(){var t,e,n,i;ri.call(this),oi.call(this),delete this.$designer.allComponentProps[this.__context__.props.designId],dsf.isDef(this.componentProps.__layoutTree__)&&delete this.componentProps.__layoutTree__,null===this||void 0===this||null===(t=this.realCtrl)||void 0===t||null===(e=t.$destroy)||void 0===e||e.call(t),null===this||void 0===this||null===(n=this.__vctrl__)||void 0===n||null===(i=n.$destroy)||void 0===i||i.call(n),this.__vctrl__=void 0,delete this.realCtrl},methods:{ctrlMounted:function(){},$settingMenus:function(){var t=this;if(this.$virtual)return[];var e=this.__desContext__.settingMenus;dsf.isFunction(e)&&(e=e());var n=_.filter(e,(function(e){var n=t.$settingMenuItemShow(e);return n}));return n},$isTextBox:function(){if("dsf.textbox"==this.componentProps.ctrlType)return!0},$createSelectedAction:function(){var t=this,e=!1;Object.defineProperty(this.__desContext__,"selected",{get:function(){return e},set:function(n){e=n,e?t.$componentSelected():t.$componentUnSelected()}})},$clickSettingButton:function(){var t=this;this.settingOpen=!0,this.$nextTick((function(){t.$refs.settingDownDown.show()}))},$formControlAndLabelWatch:function(){var t=this;if(this.__context__.props.isFormControl){var e=this.__context__.props,n=this.$watch((function(){return e.label}),(function(n,i){if(n!=i){var s=e.forLabel,a=t.$designer.allComponentProps[s];a&&(a.value=n)}}));this.watchs.push(n)}if(this.__context__.props.isTextContent){var i=this.__context__.props,s=this.$watch((function(){return i.value}),(function(e,n){if(e!=n){var s=i.forFormControl,a=t.$designer.allComponentProps[s];a&&(a.label=e)}}));this.watchs.push(s)}},$componentSelected:function(){$(this.$designer.$el).find(".designer-ctrl-proxy.designer-ctrl-proxy-focus").removeClass("designer-ctrl-proxy-focus"),this.$getComponetRenderType("design-proxy")?$(this.$el).addClass("ds-control-selected"):$(this.$el).addClass("ds-control-no-proxy-selected")},$componentUnSelected:function(){this.$getComponetRenderType("design-proxy")?$(this.$el).removeClass("ds-control-selected"):$(this.$el).removeClass("ds-control-no-proxy-selected")},$mouseoverHanlder:function(){this.__context__.props.isView||$(this.$el).addClass("ds-control-hover"),this.layoutActive=!0},$mouseoutHandler:function(){this.__context__.props.isView||$(this.$el).removeClass("ds-control-hover"),this.__desContext__.selected||(this.layoutActive=!1)},$designMarginChange:function(t){this.$data.$designContext.margin=t.args},$designHeightChange:function(t){this.$data.$designContext.height=t.args},$designMinHeightChange:function(t){this.$data.$designContext.minHeight=t.args||void 0},$getComponetRenderType:function(t){return this.__nodeSwitch__==t&&this.__context__.props},$$getComponent:function(){if(!this._isDestroyed)return this.$virtual?ai.call(this):this.realCtrl},$$remove:function(){var t=this,e=$(this.$el),n=$(e).closest("[slot-name]"),i=dsf.designer.getParentControl(e),s=n.attr("slot-name");if(i){var a=i.$$getComponent?i.$$getComponent():i,o=a.slots?a.slots||[]:a.slots,r=a.$el.matches(".ds-datagrid-cell-content"),l=_.findIndex(o,(function(t){return t.name==s}));if(o[l]&&dsf.array.remove(o[l].controls,this.__context__.props),r)if(o[0].controls.length>0){var u=o[0].controls[0];i.updateColumn(u)}else i.clearColumn();delete this.$designer.allComponentProps[this.__context__.props.designId],this.$emit("layout-tree-remove",this),this.$nextTick((function(){t.$designer.selectedComponent($(t.$designer.$refs.viewProxy.$el),!1,!0),t.$designer.recordPageChange(),t.$designer.resize()}))}},$setting:function(){var t=dsf.getComponentDesignOptions(this.__context__.props.ctrlType);t&&t.settingButtonHandler.call(this.$refs.ctrl)},$settingMenuItemClickHandler:function(t){var e=this.__desContext__.settingMenus;dsf.isFunction(this.__desContext__.settingMenus)&&(e=this.__desContext__.settingMenus()||[]);var n=_.find(e||[],(function(e){return e.command===t}));n&&n.handler.call(this.$$getComponent(),n,this)},$settingMenuItemShow:function(t){if(this.$virtual)return!1;if(t.hidden){var e=this.$$getComponent();if(e){var n=t.hidden.call(e);if(!0===n)return!1}}return!0},$viewDoc:function(){var t;this.$eventBus.$emit("showComponentDoc",{id:null===(t=this.$$getComponent())||void 0===t||null===(t=t.$options)||void 0===t||null===(t=t.propsData)||void 0===t?void 0:t.designId})},$getRoot:function(){var t=this.rootProp;return!t&&this.__context__.props.isView&&(t=this),t},$copy:function(){this.$designer.copyComp()},$detail:function(){try{var t,e,n,i,s=this.$$getComponent(),a={caption:s.$options.ctrlCaption,id:null===s||void 0===s||null===(t=s.metadata)||void 0===t?void 0:t.id,name:null===s||void 0===s||null===(e=s.metadata)||void 0===e?void 0:e.name,typeText:null===s||void 0===s||null===(n=s.metadata)||void 0===n||null===(n=n.type)||void 0===n?void 0:n.text,typeValue:null===s||void 0===s||null===(i=s.metadata)||void 0===i||null===(i=i.type)||void 0===i?void 0:i.value};dsf.layer.openDialog({title:"控件信息",fullscreen:!1,content:"DsfComponentInfo",params:{info:a},width:"350px",height:"150px"})}catch(o){dsf.layer.alert("请保存后再试")}},$updateCopyComponentNewCaption:function(){var t=this,e=this.__context__.props,n=!0;return n=dsf.isUnDef(this.$designer.updateDesignerCopyCaption)?ii.call(this,e):this.$designer.updateDesignerCopyCaption(e),this.__context__.props.metadata&&(this.$list&&this.$list.isOneToMany?(delete this.__context__.props.metadata.isFromMetaData,delete this.__context__.props.metadata.isuser,delete this.__context__.props.designerInfo):this.$list||(delete this.__context__.props.metadata.isFromMetaData,delete this.__context__.props.metadata.isuser,delete this.__context__.props.designerInfo,this.__context__.props.metadata.id="",this.__context__.props.metadata.at="",this.__context__.props.metadata.content="{}")),this.$nextTick((function(){t.$updateCopyComponentStaticValue();var n,i=dsf.getComponentDesignOptions(e.ctrlType);i&&(null===i||void 0===i||null===(n=i.copy)||void 0===n||null===(n=n.after)||void 0===n||n.call(t.$refs.ctrl,t.componentProps))})),n},$updateCopyComponentStaticValue:function(){try{if("childMetaDataCodes"in this.__context__.props){var t=this.__context__.props.childMetaDataCodes.slice(0);dsf.designer.createComponentMetaData(this,this.$designer.$refs.viewProxy);var e=[],n=this.__context__.props.childMetaDataCodes.slice(0),i=this.__context__.props.staticValue;_.each(i||[],(function(i){var s={};_.each(n,(function(e,n){s[e]=i[t[n]]})),dsf.isEmptyObject(s)&&(s=i),e.push(s)})),e.length>0?this.__context__.props.staticValue=e:this.__context__.props.staticValue=null}}catch(s){this.__context__.props.staticValue=null}},$updateOpenDesignerUrl:function(){this.__context__.props.isView&&(this.__context__.props.openDesignerUrl=this.$designer.openDesignerUrl)}},render:function(t){var e=Yn.call(this,t);return e}};function Yn(t){var e=this;if(this.$getComponetRenderType("design-proxy"))return t("div",Ce()([{attrs:{tabindex:"-1"}},{on:{mouseover:function(t){e.$mouseoverHanlder(t),t.stopPropagation()},mouseout:function(t){e.$mouseoutHandler(t),t.stopPropagation()}}},{directives:[{name:"show",value:this.__desContext__.show}],class:["designer-ctrl-proxy"].concat(a()(this.$$getCss)),style:{height:this.__desContext__.height,margin:this.__desContext__.margin,"min-height":this.__desContext__.minHeight||void 0}}]),[Qn.call(this,t),Zn.call(this,t),t("div",{class:"designer-selected"})]);if(this.$getComponetRenderType("design-no-proxy")){var n=this.__context__.props.ctrlName,i=this._b({class:"design-no-proxy",directives:[{name:"show",rawName:"v-show",value:this.__desContext__.show,expression:"__desContext__.show"}],ref:"ctrl",staticClass:"design-no-proxy",attrs:{"is-design":this.__hasDesign__},on:{mounted:this.ctrlMounted},scopedSlots:Jn.call(this,t)},n,this.__context__.props,!1,!0);return t(n,i)}}function Qn(t){if(!this.$data.$isReload){if(!this.$virtual){var e=this.__context__.props.ctrlName,n=this._b({key:"ctrl",ref:"ctrl",attrs:{"is-design":this.__hasDesign__},on:{mounted:this.ctrlMounted,"design-margin-change":this.$designMarginChange,"design-height-change":this.$designHeightChange,"design-min-height-change":this.$designMinHeightChange},scopedSlots:Jn.call(this,t)},e,this.__context__.props,!1,!0),i=t(e,n);return i}var s;if(dsf.isFunction(null===this||void 0===this||null===(s=this.$designer)||void 0===s?void 0:s.getVirtualComponentVnode)){var a=this.$designer.getVirtualComponentVnode(t,this);return a}}return t()}function Jn(t){var e=this,n={};return _.each(this.__context__.props.slots,(function(i){n[i.name]=function(n){var s=i.controls||[],a=s.map((function(n){var i=t("DsfLayoutTree",{key:n.designId,attrs:{componentProps:n,"is-design":e.__hasDesign__}});return i}));return a}})),n}function Zn(t){var e=this;if(this.$virtual)return t();var n=null,i=null,s=null,a=null,o=null,r=null,l=null;s=this.__showMarkInfo__?t("li",Ce()([{key:"info",class:"info",attrs:{title:"组件详情"}},{on:{mousedown:function(t){t.stopPropagation()},click:function(t){e.$detail(t),t.stopPropagation()}}}]),[t("DsfIcon",{style:{color:"#1E9FFF"},attrs:{name:"fangdajing"}})]):t(),a=this.__hasComponentDocument__&&!this.__designLock__?t("li",Ce()([{key:"doc",class:"componentdoc",attrs:{title:"描述文档"}},{on:{click:function(t){e.$viewDoc(t),t.stopPropagation()},mousedown:function(t){t.stopPropagation()}}}]),[t("DsfIcon",{style:{color:"#1E9FFF"},attrs:{name:"icon_bangzhuwendang"}})]):t(),this.__showMarkDragDrop__&&!this.__designLock__&&(o=t("li",Ce()([{key:"dragdrap",ref:"dragdrap",class:"dragdrop ds-desinger-drag-component",attrs:{title:"拖动"}},{on:{mousedown:function(t){t.stopPropagation()}}}]),[" ",t("DsfIcon",{style:{color:"#FFB800"},attrs:{name:"yidong"}})])),r=this.__desContext__.hasSetting&&!this.__designLock__?t("li",Ce()([{key:"setting",class:"setting",attrs:{title:"设置"}},{on:{mousedown:function(t){t.stopPropagation()}}}]),[this.settingOpen?t("el-dropdown",Ce()([{attrs:{placement:"bottom"},ref:"settingDownDown"},{props:{hideOnClick:!1}},{},{on:{command:this.$settingMenuItemClickHandler}}]),[t("DsfIcon",{style:{color:"#1E9FFF"},attrs:{name:"shezhi"}}),t("el-dropdown-menu",{slot:"dropdown"},[this.$settingMenus().map((function(e,n){return t("el-dropdown-item",{attrs:{command:e.command},key:n},[e.text])}))])]):t("DsfIcon",Ce()([{style:{color:"#1E9FFF"},attrs:{name:"shezhi"}},{on:{mouseenter:function(t){e.$clickSettingButton(t),t.stopPropagation(),t.preventDefault()}}}]))]):t(),l=this.__showMarkRemove__&&!this.__designLock__?t("li",Ce()([{key:"remove",class:"remove",attrs:{title:"移除"}},{on:{click:function(t){e.$$remove(t),t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation()}}}]),[t("DsfIcon",{style:{color:"#FF0000"},attrs:{name:"shanchu"}})]):t(),i=this.isMounted?t("ul",{class:"designer-mask-ul"},[[s,a,o,r,l]]):t(),n=this.__showMarkCaption__?t("div",Ce()([{key:"code",attrs:{title:this.__context__.props.caption},class:"designer-code"},{on:{mouseover:function(t){t.stopPropagation()},mouseout:function(t){t.stopPropagation()}}}]),[this.__context__.props.caption]):t();var u=t("div",{key:"mask",class:{"designer-mask":this.__showMask__},staticClass:"designer-btns"},[[i,n]]);return u}function ti(){var t;null!==this&&void 0!==this&&null!==(t=this.__context__)&&void 0!==t&&null!==(t=t.props)&&void 0!==t&&t.isCopy&&(this.__context__.props.isTextContent&&(this.__context__.props.forFormControl=""),this.$updateCopyComponentNewCaption(),delete this.__context__.props.isCopy)}function ei(){dsf.isDef(this.componentProps.__layoutTree__)&&delete this.componentProps.__layoutTree__,Object.defineProperty(this.componentProps,"__layoutTree__",{value:this,enumerable:!1,configurable:!0,writable:!1})}function ni(){var t=this.componentProps.__virtual__,e=t;e?(!this.virtualComponentClass&&dsf.isFunction(this.$designer.layoutTreeVirtual)&&(this.virtualComponentClass=this.$designer.layoutTreeVirtual(this)),this.layoutVirtual=!0):this.layoutVirtual=!1}function ii(t){var e,n=null;n=null!==this&&void 0!==this&&this.$childCaptionUniqueScope?this.$designer.getComponentsByNode(this.$childCaptionUniqueScope):this.$designer.getComponentsByNode(),n=_.filter(n,(function(e){return e.designId!=t.designId}));var i=null===(e=/(\d+)$/g.exec(t.caption))||void 0===e?void 0:e[0];i=parseInt(i)||0;var s=100,a=0,o=!1,r=this.$designer.$refs.viewProxy;while(s>a){var l=_.findIndex(n,(function(e){return e.caption==t.caption&&e.designId!=t.designId}));if(l<0){r.serialNum<i&&r.setSerial(i);break}if(t.desCopyedChangeCaption){var u=t.caption.replace(new RegExp(i+"$","gi"),"");t.caption=u+r.getSerial(),o=!0}a++}return i=0,o}function si(t){var e=this;t?this.$nextTick((function(){ai.call(e),ri.call(e)})):this.$nextTick((function(){oi.call(e),li.call(e)}))}function ai(){return this.__vctrl__||(this.__vctrl__=new this.virtualComponentClass),this.__vctrl__.$parent=this,this.__vctrl__.$virtual=!0,this.__vctrl__.__layoutTree__=this,dsf.mix(this.__vctrl__.$props,this.componentProps),this.__vctrl__.$props.isDesign=!0,this.$refs.ctrl_virtual&&(this.__vctrl__.$el=this.$refs.ctrl_virtual,this.__vctrl__.$el.__vue__=this.__vctrl__),this.__vctrl__}function oi(){if(this.__vctrl__){var t,e,n,i,s;for(var a in this.__vctrl__.$destroy(),null!==this&&void 0!==this&&null!==(t=this.$refs)&&void 0!==t&&null!==(t=t.ctrl_virtual)&&void 0!==t&&t.__vue__&&(this.$refs.ctrl_virtual.__vue__=null),null!==this&&void 0!==this&&null!==(e=this.__vctrl__)&&void 0!==e&&null!==(e=e.$el)&&void 0!==e&&e.__vue__&&(this.__vctrl__.$el.__vue__=null),null!==this&&void 0!==this&&null!==(n=this.__vctrl__)&&void 0!==n&&n.$el&&(this.__vctrl__.$el=null),null!==this&&void 0!==this&&null!==(i=this.__vctrl__)&&void 0!==i&&i.$parent&&(this.__vctrl__.$parent=null,delete this.__vctrl__.$parent),null!==this&&void 0!==this&&null!==(s=this.__vctrl__)&&void 0!==s&&s.__layoutTree__&&delete this.__vctrl__.__layoutTree__,this.__vctrl__._props)this.__vctrl__._props[a]=null;this.__vctrl__=null}}function ri(){gi.call(this),yi.call(this),bi.call(this),delete this.$designer.allComponents[this.__context__.props.designId]}function li(){var t;this.__context__.props&&(fi.call(this),mi.call(this),vi.call(this),this.isMounted=!0,this.$designer.allComponents[this.__context__.props.designId]=null===this||void 0===this||null===(t=this.$refs)||void 0===t?void 0:t.ctrl)}var ui={};function ci(t){var e=this;if(!ui[t]){var n=new Promise((function(n,i){e.$http.get(t).then((function(t){n(t)})).catch((function(t){i(t)})).finally((function(){delete ui[t]}))}));ui[t]=n}return ui[t]}function di(t){"static"==t.type?dsf.isDef(t.code)&&(this.__context__.props.items=t.code):pi.call(this,t)}function pi(t){var e=this;if(Hn[t.code])this.__context__.props.items=dsf.mix(!0,[],Hn[t.code]);else{var n=t.type,i={db:"meta/tree/dbSource?rmId=".concat(t.code),dict:"dict/getList/".concat(t.code)},s=i[n],a=ci.call(this,s);a.then((function(n){var i=n.data,s=dsf.mix(!0,[],i.data);e.__context__.props.items=s,Hn[t.code]=s}))}}function hi(){if(this.$attrs["is-design"]){this.__desContext__.mask=!0,this.__desContext__.hasInfo=!1,this.__desContext__.hasDragDrop=!0,this.__desContext__.hasRemove=!0,this.__desContext__.hasSetting=!1;var t=dsf.getComponentDesignOptions(this.__context__.props.ctrlType);t&&(this.__desContext__.mask=t.isMask,this.__desContext__.showCaption=t.toolButtons.showCaption||!1,this.__desContext__.hasInfo=t.toolButtons.infoButton,this.__desContext__.hasDragDrop=t.toolButtons.dragButton,this.__desContext__.hasRemove=t.toolButtons.removeButton,this.__desContext__.hasSetting=t.toolButtons.settingButton,this.__desContext__.settingMenus=t.settingMenus,this.__desContext__.settingButtonHandler=t.settingButtonHandler,t.fit?this.__desContext__.height="100%":this.__desContext__.height="auto"!=this.__desContext__.height?this.__desContext__.height:"auto")}}function _i(){var t=this;this.$refs.dragdrap&&$(this.$refs.dragdrap).draggable({addClasses:!1,appendTo:this.$designer.$el,distance:10,revert:"invalid",cursor:"default",containment:"window",cursorAt:{left:-20,top:-20},helper:function(){var e=$("<div class='ds-tool-item proxy'>"+t.__context__.props.caption+"</div>");return e.data("data",{state:"move",attributes:t.__context__.props,component:t}),e},start:function(){t.__desContext__.show=!1},stop:function(){t.__desContext__.show=!0}})}function fi(){var t=this,e=Object.keys(this.$props),n=function(n){if(!(e.indexOf(n)<0))throw t.$refs.ctrl.ctrlName+'包含了与代理组件一样的属性"'+n+'"';Object.defineProperty(t,n,{configurable:!0,set:function(t){this.__context__.props[n]=t},get:function(){return this.__context__.props[n]}})};for(var i in this.__context__.props)n(i)}function mi(){var t=this;if(this.$refs.ctrl&&this.$refs.ctrl.$options.computed){var e=function(e){Object.defineProperty(t,e,{configurable:!0,set:function(t){this.$refs.ctrl[e]=t},get:function(){var t;return null===this||void 0===this||null===(t=this.$refs)||void 0===t||null===(t=t.ctrl)||void 0===t?void 0:t[e]}})};for(var n in this.$refs.ctrl.$options.computed)e(n)}}function vi(){if(this.$refs.ctrl&&this.$refs.ctrl.$options.methods)for(var t in this.$refs.ctrl.$options.methods)this[t]=this.$refs.ctrl[t].bind(this.$refs.ctrl)}function gi(){var t=Object.keys(this.$props);for(var e in this.__context__.props)t.indexOf(e)<0&&(Object.defineProperty(this,e,{configurable:!0,value:void 0}),delete this[e])}function yi(){if(this.$refs.ctrl&&this.$refs.ctrl.$options.computed)for(var t in this.$refs.ctrl.$options.computed)Object.defineProperty(this,t,{configurable:!0,value:void 0}),delete this[t]}function bi(){if(this.$refs.ctrl&&this.$refs.ctrl.$options.methods)for(var t in this.$refs.ctrl.$options.methods)this[t]=null,delete this[t]}var wi,xi,ki=Xn,Ci=Object(c["a"])(ki,wi,xi,!1,null,null,null),$i=Ci.exports,Si=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logic-setting-item",attrs:{"node-key":t.node.designId},on:{click:t.itemClick}},[n("div",{staticClass:"logic-setting-item-header ds-font4"},[n("div",{staticClass:"node-title"},[n("span",{staticClass:"node-index"},[t._v(t._s(t.node.__index__)+"、")]),n("span",{staticClass:"node-name"},[t._v(t._s(t.getCtrlName(t.node)))]),n("span",{staticClass:"node-caption"},[t._v(t._s(t.node.caption))])]),n("div",{staticClass:"button-bar"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isAdvanced,expression:"!isAdvanced"}],attrs:{size:"mini",type:"text",title:"添加规则"},on:{click:t.addRule}},[t._v("添加")]),n("el-button",{attrs:{size:"mini",type:"text",title:"清空规则"},on:{click:t.resetRule}},[t._v("清空")])],1)]),"options"==t.rule.mode?n("div",{staticClass:"logic-setting-item-content"},[t._l(t.rule.options,(function(e,i){return n("logic-setting-rule",{key:i,attrs:{index:i+1,node:t.node,"condition-list":e,"variable-options":t.variableOptions,"variable-form-options":t.variableFormOptions},on:{remove:function(n){return t.removeRule(e,i)}}})})),t.rule.options.length?t._e():n("div",{staticClass:"logic-setting-rule empty-rule"},[t._v("暂无规则")])],2):"advanced"==t.rule.mode?n("div",{staticClass:"logic-setting-item-content advanced"},[n("monaco-editor",{ref:"editor",attrs:{theme:"vs-local",language:"javascript"},on:{mounted:t.editorLoaded,blur:t.editorBlur}})],1):t._e()])},Ti=[],Ei=["DsfMobileDataGrid","DsfMobileStaticList","DsfMobileSubTable","DsfDataGrid","DsfStaticList","DsfSubTable","DsfSubTableBlock","DsfVerticalSubTable","DsfVirtualList"],Di=null;function Oi(t){Di||(Di=Object.assign.apply(Object,[{}].concat(a()(_.values(window.$components)))));var e=t.ctrlName,n=t.isFormControl,i=t.label;if(n&&i)return i;var s=Di[e];if(dsf.isFunction(s)&&s.resolved){var o=s.resolved.extendOptions;return o.ctrlCaption||e}return(null===s||void 0===s?void 0:s.ctrlCaption)||e}function Pi(t){var e={index:t.__index__,value:t.designId,text:Oi(t),owner:t};return e.label="".concat(e.index,". ").concat(e.text," (").concat(t.caption,")"),e}function Li(t){if(!t)return Promise.resolve([]);var e=t.type,n=t.code;if("static"==e)return Promise.resolve(n);var i=null;return"dict"==e?i=dsf.http.get("/dict/getList/"+n):"db"==e&&(i=dsf.http.get("/meta/tree/dbSource",{rmId:n})),i?i.done((function(t){var e=t.success,n=t.data,i=t.message;if(e)return n;throw new Error(i)})):Promise.resolve([])}var Ni=_.once((function(){window.monaco.editor.defineTheme("vs-local",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#fcfcfc","editorGutter.background":"#f8f8f8","minimap.background":"#fafafa"}})})),Ri=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logic-setting-rule"},[n("div",{staticClass:"rule-header"},[n("el-dropdown",{attrs:{placement:"bottom"},on:{command:t.addCondition}},[n("dsf-button",{staticClass:"rule-button",attrs:{size:"mini"}},[t._v("添加条件")]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.conditionType,(function(e){var i=e.text,s=e.value;return[n("el-dropdown-item",{key:s,attrs:{command:s}},[t._v(t._s(i))])]}))],2)],1),n("div",{staticClass:"el-dropdown"},[n("dsf-button",{staticClass:"rule-button",attrs:{size:"mini"},on:{click:t.removeRule}},[t._v("删除规则")])],1)],1),n("div",{staticClass:"rule-body"},[t._l(t.conditionList,(function(e,i){return[n("logic-setting-rule-item",{key:i,attrs:{index:i+1,condition:e,node:t.node,"variable-options":t.variableOptions,"variable-form-options":t.variableFormOptions},on:{remove:function(n){return t.removeCondition(e,i)}}})]}))],2)])},Ii=[],Ai=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logic-setting-rule-item",class:{"--error":t.condition.$error}},[n("div",{staticClass:"rule-item-title"},[t._v(t._s(t.conditionType[t.condition.type].text)+"：")]),"operation"==t.condition.type?n("div",{staticClass:"rule-item-content"},[n("el-select",{attrs:{"popper-class":"dsf-designer-logic-setting-rule-select",placeholder:"控件",size:"mini"},on:{change:t.ctrlChange},model:{value:t.condition.ctrl,callback:function(e){t.$set(t.condition,"ctrl",e)},expression:"condition.ctrl"}},t._l(t.variableFormOptions,(function(e){return n("el-option-group",{key:e.text,attrs:{label:e.text}},t._l(e.options,(function(e){var i=e.index,s=e.value,a=e.text,o=e.label,r=e.owner;return n("el-option",{key:s,attrs:{value:s,label:o,owner:r}},[n("span",{staticClass:"form-index"},[t._v(t._s(i)+". ")]),n("span",{staticClass:"form-label"},[t._v(t._s(a))]),n("span",{staticClass:"form-name"},[t._v(t._s(r.caption))])])})),1)})),1),n("el-select",{directives:[{name:"show",rawName:"v-show",value:t.valueAttributes.length>1,expression:"valueAttributes.length > 1"}],staticStyle:{width:"100px"},attrs:{placeholder:"值属性",size:"mini"},on:{change:t.ctrlCodeChange},model:{value:t.condition.ctrlCode,callback:function(e){t.$set(t.condition,"ctrlCode",e)},expression:"condition.ctrlCode"}},t._l(t.valueAttributes,(function(e){var i=e.code,s=e.type,a=e.name;return n("el-option",{key:i,attrs:{label:a,value:i+"|"+s.value}},[t._v(" "+t._s(a)+"（"+t._s(i)+"） ")])})),1),n("el-select",{staticStyle:{width:"96px"},attrs:{placeholder:"运算符",size:"mini"},model:{value:t.condition.operator,callback:function(e){t.$set(t.condition,"operator",e)},expression:"condition.operator"}},t._l(t.comparisonOperatorOptions,(function(t){var e=t.value,i=t.text;return n("el-option",{key:e,attrs:{label:i,value:e}})})),1),"null"!==t.condition.operator&&"notnull"!==t.condition.operator?[t.dataSource?n("el-select",{staticStyle:{width:"76px"},attrs:{placeholder:"值来源",size:"mini"},on:{change:t.valueTypeChange},model:{value:t.condition.valueType,callback:function(e){t.$set(t.condition,"valueType",e)},expression:"condition.valueType"}},t._l(t.conditionValueType,(function(t){var e=t.value,i=t.text;return n("el-option",{key:e,attrs:{value:e,label:i}})})),1):t._e(),"custom"==t.condition.valueType?n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"自定义值",size:"mini"},model:{value:t.condition.value,callback:function(e){t.$set(t.condition,"value",e)},expression:"condition.value"}},t._l(t.valueAttributes,(function(e){var i=e.code,s=e.name;return n("el-option",{key:i,attrs:{label:s,value:i}},[t._v(" "+t._s(s)+"（"+t._s(i)+"） ")])})),1):n("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"值选项",size:"mini"},model:{value:t.condition.value,callback:function(e){t.$set(t.condition,"value",e)},expression:"condition.value"}},t._l(t.valueOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.text,value:e[t.ctrlCode]}})})),1)]:t._e(),n("span",[n("i",{staticClass:"rule-line-button el-icon-remove-outline",attrs:{title:"删除"},on:{click:function(e){return t.$emit("remove")}}})])],2):"follow"==t.condition.type?n("div",{staticClass:"rule-item-content"},[n("el-select",{attrs:{"popper-class":"dsf-designer-logic-setting-rule-select",placeholder:"控件",size:"mini"},on:{change:t.ctrlChange},model:{value:t.condition.ctrl,callback:function(e){t.$set(t.condition,"ctrl",e)},expression:"condition.ctrl"}},t._l(t.variableOptions,(function(e){return n("el-option-group",{key:e.text,attrs:{label:e.text}},[t._l(e.options,(function(e){var i=e.index,s=e.value,a=e.text,o=e.label,r=e.owner;return[n("el-option",{key:s,attrs:{value:s,label:o,disabled:s==t.node.designId}},[n("span",{staticClass:"form-index"},[t._v(t._s(i)+". ")]),n("span",{staticClass:"form-label"},[t._v(t._s(a))]),n("span",{staticClass:"form-name"},[t._v(t._s(r.caption))])])]}))],2)})),1),n("el-select",{staticStyle:{width:"90px"},attrs:{placeholder:"运算符",size:"mini"},model:{value:t.condition.operator,callback:function(e){t.$set(t.condition,"operator",e)},expression:"condition.operator"}},[n("el-option",{attrs:{label:"同步显示",value:"true"}}),n("el-option",{attrs:{label:"相反显示",value:"false"}})],1),n("span",[n("i",{staticClass:"rule-line-button el-icon-remove-outline",attrs:{title:"删除条件"},on:{click:function(e){return t.$emit("remove")}}})])],1):t._e(),t.condition.$error?n("div",{staticClass:"rule-item-error"},[t._v(" "+t._s(t.condition.$error.message)+" ")]):t._e()])},Mi=[],Bi={name:"LogicSettingRuleItem",inject:{$designer:{default:null}},props:["index","node","condition","variableOptions","variableFormOptions"],data:function(){var t=dsf.designer,e=t.conditionType,n=t.conditionValueType;return this.conditionType=e,this.conditionValueType=n,{valueOptions:[]}},computed:{metadata:function(){var t=this.$designer.allComponentProps[this.condition.ctrl];return(null===t||void 0===t?void 0:t.metadata)||null},dataSource:function(){var t;return(null===(t=this.metadata)||void 0===t?void 0:t.dataSource)||null},valueAttributes:function(){var t,e=null===(t=this.metadata)||void 0===t?void 0:t.valueAttributes;return null!==e&&void 0!==e&&e.length?e:[]},ctrlCode:function(){var t,e=null===(t=this.condition)||void 0===t?void 0:t.ctrlCode;return e?e.replace(/\|.+$/,""):""},comparisonOperatorOptions:function(){var t,e=null===(t=this.condition)||void 0===t?void 0:t.ctrlCode;if(e){var n=dsf.designer.comparisonOperatorOptions,i=e.replace(/^.+\|/,"");return n[i]||{}}return{}}},watch:{"dataSource.code":{handler:function(t){var e=this;if(t){var n=dsf.layer.loading();Li(this.dataSource).then((function(t){e.valueOptions=t})).catch((function(t){dsf.layer.message(t,!1)})).finally((function(){dsf.layer.closeLoading(n)}))}else this.valueOptions=[]},immediate:!0}},methods:{ctrlChange:function(){if(this.valueAttributes.length){var t=this.valueAttributes[0],e=t.code,n=t.type,i=e+"|"+n.value;this.condition.ctrlCode!==i&&this.$set(this.condition,"ctrlCode",i)}else this.$set(this.condition,"ctrlCode",null);this.$set(this.condition,"valueType",this.dataSource?"enum":"custom"),this.$set(this.condition,"value",""),this.$delete(this.condition,"$error")},valueTypeChange:function(){this.$set(this.condition,"value","")},ctrlCodeChange:function(){this.$set(this.condition,"value","")}}},ji=Bi,Fi=Object(c["a"])(ji,Ai,Mi,!1,null,null,null),Vi=Fi.exports,Gi={name:"LogicSettingRule",components:{LogicSettingRuleItem:Vi},props:["index","node","conditionList","variableOptions","variableFormOptions"],data:function(){return this.conditionType=dsf.designer.conditionType,{}},methods:{addCondition:function(t){var e={type:t,ctrl:null,ctrlCode:null,operator:"notnull",valueType:"custom",value:""};if("operation"==t){var n,i=null===(n=this.variableFormOptions)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.options)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.owner;if(i){var s;e["ctrl"]=i.designId;var a=null===(s=i.metadata)||void 0===s?void 0:s.valueAttributes;if(null!==a&&void 0!==a&&a.length){var o=a[0],r=o.code,l=o.type;e["ctrlCode"]=r+"|"+l.value}}}else e["operator"]="true";this.conditionList.push(e)},removeCondition:function(t,e){this.conditionList.splice(e,1)},removeRule:function(){this.$emit("remove")}}},zi=Gi,Ui=Object(c["a"])(zi,Ri,Ii,!1,null,null,null),Ki=Ui.exports,Wi={name:"LogicSettingItem",components:{LogicSettingRule:Ki},inject:{$designer:{default:null}},props:{node:{type:Object,required:!0}},data:function(){return{}},computed:{rule:{get:function(){var t=this.$designer.showLogic,e=this.node.designId;return t[e]||Vue.set(t,e,{mode:"options",advanced:"",options:[]}),t[e]},set:function(t){var e=this.$designer.showLogic,n=this.node.designId;this.$set(e,n,t)}},isAdvanced:{get:function(){return"advanced"===this.rule.mode},set:function(t){this.$set(this.rule,"mode",t?"advanced":"options")}},globalOptions:function(){return this.$parent.globalOptions},globalFormOptions:function(){return this.$parent.globalFormOptions},scopeOptions:function(){var t;return(null===(t=this.node.__scopeNode__)||void 0===t?void 0:t.__scopeOptions__)||null},scopeFormOptions:function(){var t;return(null===(t=this.node.__scopeNode__)||void 0===t?void 0:t.__scopeFormOptions__)||null},variableOptions:function(){var t=this.globalOptions,e=this.scopeOptions,n=[];return null!==e&&void 0!==e&&e.length&&n.push({text:"作用域控件",options:_.map(e,Pi)}),t.length&&n.push({text:"全局控件",options:_.map(t,Pi)}),n},variableFormOptions:function(){var t=this.globalFormOptions,e=this.scopeFormOptions,n=[];return null!==e&&void 0!==e&&e.length&&n.push({text:"作用域表单",options:_.map(e,Pi)}),t.length&&n.push({text:"全局表单",options:_.map(t,Pi)}),n}},mounted:function(){this.$parent.$on("resize",this.editorResize)},destroyed:function(){this.$parent.$off("resize",this.editorResize),this.$delete(this.$designer.showLogic,this.node.designId)},methods:{getCtrlName:Oi,addRule:function(){this.rule.options.push([])},removeRule:function(t,e){this.rule.options.splice(e,1)},resetRule:function(){this.rule={mode:"options",advanced:"",options:[]}},itemClick:function(){if(!this.$el.getAttribute("active-id")){var t=this.node.designId,e=$(document).find('[des-id="'.concat(t,'"]:not(.hidden-columns [des-id="').concat(t,'"])'));this.$designer.clearSelectedSlot(),this.$designer.clearSelectedComponent(),this.$designer.selectedComponent($(e),!1,!0)}},editorLoaded:function(t){var e=this;Ni(),window.monaco.editor.setTheme("vs-local"),this.$nextTick((function(){if(t){var n=e.rule.advanced||qi;t.setValue(n)}}))},editorBlur:function(t){t&&(this.rule.advanced=t.getValue())},editorResize:function(){this.$refs.editor&&this.$refs.editor.layout()}}},qi="/**\n * 返回true则显示，返回false则隐藏\n * @param vm {object}二开页面实例\n * @param scope {object | undefined} 作用域插槽参数\n * @returns {boolean}\n **/\nfunction fn(vm, scope) {\n\n\n  return true;\n}\n",Hi=Wi,Xi=Object(c["a"])(Hi,Si,Ti,!1,null,null,null),Yi=Xi.exports,Qi={name:"DsfDesignerLogicSetting",components:{LogicSettingItem:Yi},inject:{$designer:{default:null}},props:{show:{type:Boolean,default:!1}},data:function(){return this.__vnodes=null,{treeData:[],globalOptions:[],globalFormOptions:[]}},computed:{showLogic:function(){return this.$designer.showLogic},activeId:function(){var t=this.$designer.attributesOwner;return t.$designId||""},nameSpace:function(){return this.$designer.nameSpace}},watch:{activeId:function(t){this.show&&this.activeWatchHandler(t)},show:function(t){var e=this;t&&this.$nextTick((function(){e.activeWatchHandler(e.activeId,"instant")}))}},created:function(){var t=this;this.$designer.postSaveBeforeList.push(this.postSaveBefore),this.$eventBus.$on("update-desinger-outline",(function(e){t.$designer===e&&t.updateTree()}))},mounted:function(){var t=this;this.__resizeObserver=new ResizeObserver((function(e){var n=he()(e,1),i=n[0];t.show&&i&&t.$emit("resize")})),this.__resizeObserver.observe(this.$el)},beforeDestroy:function(){var t;dsf.array.remove(this.$designer.postSaveBeforeList,this.postSaveBefore),null===(t=this.__resizeObserver)||void 0===t||t.disconnect()},render:function(t){if(!this.show&&this.__vnodes)return this.__vnodes;var e=this.renderCompItems(t),n=t("div",{class:"dsf-designer-logic-setting"},[t("p",{class:"header ds-font2"},[t("span",["显示逻辑"]),t("div",{class:"tips"},["Tips: 规则与规则之间是 || (或者) 关系，条件与条件之间是 && (并且) 关系"])]),t("div",{class:"main"},[e])]);return this.__vnodes=n,n},methods:{renderCompItems:function(t){var e=[],n=0,i=[],s=[];return dsf.deepForEach(this.treeData,(function(a,o,r,l){var u;a.isView?a:(dsf.setObjAttr(a,"__scopeNode__",l.__scopeNode__||l.__$scopeNode__||null),a.designProxy&&(Ei.indexOf(a.ctrlName)>-1?(dsf.setObjAttr(a,"__scopeOptions__",[]),dsf.setObjAttr(a,"__scopeFormOptions__",[]),dsf.setObjAttr(a,"__$scopeNode__",a),dsf.setObjAttr(a,"__$scopeIndex__",0)):a.isFormControl&&(a.__scopeNode__?a.__scopeNode__.__scopeFormOptions__.push(a):s.push(a)),a.__scopeNode__?a.__scopeNode__.__scopeOptions__.push(a):i.push(a),u=a.__scopeNode__?a.__scopeNode__.__index__+"-"+ ++a.__scopeNode__.__$scopeIndex__:++n,dsf.setObjAttr(a,"__index__",u),e.push(t("logic-setting-item",{key:a.designId,attrs:{node:a}}))))}),{children:this.getChildren}),e.length||e.push(t("el-empty",{attrs:{"image-size":200}})),this.globalOptions=i,this.globalFormOptions=s,e},updateTree:function(){var t=this.$designer.$refs.viewProxy;this.treeData=t?[t]:[]},getChildren:function(t){var e=this,n=t.slots||[],i=t.controls||[],s=a()(i);return _.forEach(n,(function(t){var n=e.getChildren(t);n.length&&s.push.apply(s,a()(n))})),s},itemClick:function(t){var e=$(document).find('[des-id="'.concat(t.designId,'"]:not(.hidden-columns [des-id="').concat(t.designId,'"])'));this.$designer.clearSelectedSlot(),this.$designer.clearSelectedComponent(),this.$designer.selectedComponent($(e),!1,!0)},activeWatchHandler:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth",n=this.$el.querySelector("[active-id]"),i=this.$el.querySelector('[node-key="'.concat(t,'"]'));n&&n.removeAttribute("active-id"),i&&(i.setAttribute("active-id",!0),i.scrollIntoView({behavior:e,block:"nearest"}))},postSaveBefore:function(){var t=this;return A()(B.a.mark((function e(){var n,i,s,a,o,r;return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=[],i=t.$designer,s=i.showLogic,a=void 0===s?{}:s,o=i.allComponentProps,r=void 0===o?{}:o,_.eachRight(a,(function(e,i){r[i]?"advanced"==e.mode?e.options=[]:"options"==e.mode&&(e.advanced="",_.each(e.options,(function(e){_.each(e,(function(e){var i=null;e.ctrl?r[e.ctrl]?"follow"==e.type||e.ctrlCode||(i={message:"值属性项必填"}):i={message:"所选控件项可能被移除，值无效"}:i={message:"控件项性必填"},i&&(n.push(i),t.$set(e,"$error",i))}))}))):delete a[i]})),!n.length){e.next=8;break}return t.$designer.$refs.leftTools.itemClick("logic"),e.next=7,t.$nextTick();case 7:throw new Error("显示逻辑中存在 ".concat(n.length," 处校验错误"));case 8:case"end":return e.stop()}}),e)})))()}}},Ji={DsfDesigner:Lt,DsfDesignerProperties:jt,DsfDesignerButtons:ue,MobileSetting:Nt["default"],Development:ge,DsfDesignerProperty:ie,DsfDesignerFrame:Ye,DsfDesignerDragItem:qn,DsfDesignerLeft:Tn,DsfDesignerRight:fn,DsfDesignerRightItem:wn,DsfDesignerLeftItem:nn,DsfDesignerLeftTools:un,DsfDesignerLogicSetting:Qi,DsfDesignerLeftOutline:Vn,DsfLayoutTree:$i};function Zi(t){window.$platformDesigner=Ji,_.each(Ji,(function(e,n){t.component(e.name||n,e)}))}var ts=Zi,es=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-drawer",{attrs:{title:"需求文档",visible:t.show,"append-to-body":!0,"modal-append-to-body":!0,"destroy-on-close":!1,"wrapper-closable":!1,size:"50%","custom-class":"pagedoc-drawer",direction:"rtl"},on:{"update:visible":function(e){t.show=e},close:t.handleClose}},[t.show?n("page-doc-content",{ref:"content",attrs:{docId:t.docId}}):t._e()],1)},ns=[],is={name:"page-doc",components:{"page-doc-content":function(){return n.e(32).then(n.bind(null,1265))}},data:function(){return{show:!1,docId:null}},methods:{showContent:function(t){var e=t.id;this.docId=e,this.show=!0},handleClose:function(){this.$refs.content.handleClose()}},mounted:function(){this.$eventBus.$on("showComponentDoc",this.showContent)},beforeDestroy:function(){this.$eventBus.$off("showComponentDoc",this.showContent)}},ss=is,as=Object(c["a"])(ss,es,ns,!1,null,null,null),os=as.exports;function rs(t){t.component("DsfPageDoc",os)}var ls=rs,us=n(31),cs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{staticClass:"dsf-input-upload",attrs:{value:t.value,size:t.size,disabled:t.disabled,placeholder:t.placeholder},on:{change:t.onChange,input:function(e){return t.$emit("input",e)}}},[n("el-upload",{attrs:{slot:"append",headers:t.dsf.getDefaultHttpHeader(),accept:t.accept,action:t.action,data:t.data,"show-file-list":!1,"on-progress":t.uploadProgress,"on-success":t.uploadSuccess,"on-error":t.uploadError},slot:"append"},[n("el-button",{attrs:{size:t.size,icon:"iconfont icon-yunduanshangchuan"}})],1)],1)},ds=[],ps={name:"DsfInputUpload",props:{value:{type:String,default:""},placeholder:{type:String,default:"请输入"},btName:{type:String,default:"上传"},accept:{type:String,default:".jpg,.jpeg,.png,.gif,.webp,.svg"},data:{type:Object,required:!1},action:{type:String,default:function(){return dsf.url.getWebPath("/file/upload/")}},size:{type:String,required:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},methods:{uploadProgress:function(){this.loading=dsf.layer.loading()},uploadSuccess:function(t){var e=this;dsf.layer.closeLoading(this.loading),this.loading=void 0,t&&t.success?(this.$emit("input",t.data[0].relativePath),this.$nextTick((function(){e.onChange(t.data[0].relativePath)}))):dsf.layer.message(t&&t.message||"上传失败",!1)},uploadError:function(){dsf.layer.closeLoading(this.loading),this.loading=void 0,dsf.layer.message("文件上传失败",!1)},onChange:function(t){this.$emit("change",t)}}},hs=ps,_s=Object(c["a"])(hs,cs,ds,!1,null,null,null),fs=_s.exports,ms=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{staticClass:"dsf-input-url",attrs:{placeholder:t.placeholder,disabled:t.disabled,size:t.size,clearable:""},on:{change:t.onChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.openDialog},slot:"append"})],1)},vs=[],gs={name:"DsfInputAreaCode",props:{owner:{type:Object,default:function(){return{}}},value:{type:String,default:""},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},size:{type:String,required:!1}},computed:{val:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{onChange:function(t){this.$emit("change",t)},openDialog:function(){var t=this;if(!this.disabled){this.$emit("visible-change",!0);var e=dsf.layer.pc.openDialog({title:"选择区划",width:"800px",height:"auto",content:"DsfAreaCascaderPanel",showClose:!1,params:{value:this.val,checkStrictly:!0,accuracy:3},onOpened:function(){if(/^(\d{12}\.)*\d{12}$/.test(t.val)){var n=t.val.split(".");n.shift(),e.$refs.content.setValue(n)}},btns:[{text:"确定",handler:function(e){var n="000000000000."+e.value.join(".");t.val=n,t.onChange(n)}},{text:"取消"}]},(function(){t.$emit("visible-change",!1)}))}}}},ys=gs,bs=Object(c["a"])(ys,ms,vs,!1,null,null,null),ws=bs.exports,xs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-autocomplete",{staticClass:"dsf-input-color",attrs:{value:t.value||"",placeholder:t.placeholder,"fetch-suggestions":t.querySearch,disabled:t.disabled,size:t.size,"popper-class":"dsf-input-color-popper"},on:{input:function(e){return t.$emit("input",e)},change:t.onChange,select:t.onSelect},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return[n("div",[n("i",{staticClass:"iconfont icon-ditu-yuan",style:{color:i.color}}),t._v(" "+t._s(i.name)+" ")])]}}])},[n("el-color-picker",{attrs:{slot:"append",size:t.size,disabled:t.disabled,"show-alpha":""},on:{"visible-change":function(e){return t.$emit("visible-change",e)}},slot:"append",model:{value:t.pickerValue,callback:function(e){t.pickerValue=e},expression:"pickerValue"}})],1)},ks=[],Cs={name:"DsfInputColor",props:{value:{type:String,default:""},placeholder:{type:String,default:"请输入颜色值"},disabled:{type:Boolean,default:!1},size:{type:String,required:!1},auto:{type:Boolean,default:!1}},computed:{pickerValue:{set:function(t){var e=this.value;if(e){"theme"==e&&(e="@normal");var n=e.replace(/^(theme:|@)/,"");dsf.themeConfig.currentTheme[n]&&(t=e)}t!=e&&(this.$emit("input",t),this.onChange(t))},get:function(){var t=this.value;if(!t)return"";"theme"==t&&(t="@normal");var e=t.replace(/^(theme:|@)/,"");return dsf.themeConfig.currentTheme[e]||t}},restaurants:function(){return[{name:"@main",color:"var(--t--main)"},{name:"@normal",color:"var(--t--normal)"},{name:"@normal2",color:"var(--t--normal2)"},{name:"@warning",color:"var(--t--warning)"}]}},methods:{querySearch:function(t,e){e(this.restaurants)},onSelect:function(t){var e=t.name,n=t.color;this.auto&&(n=e),this.$emit("input",n),this.onChange(n)},onChange:function(t){this.$emit("change",t)}}},$s=Cs,Ss=Object(c["a"])($s,xs,ks,!1,null,null,null),Ts=Ss.exports,Es=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{staticClass:"dsf-input-url",attrs:{placeholder:t.placeholder,disabled:t.disabled,size:t.size},on:{change:t.onChange},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},[n("el-button",{attrs:{slot:"append",icon:t.isSimple?"el-icon-edit":"el-icon-search"},on:{click:t.openDialog},slot:"append"})],1)},Ds=[],Os={name:"DsfInputUrl",props:{value:{type:String,default:""},type:{type:String,default:"pc"},placeholder:{type:String,default:"请输入"},disabled:{type:Boolean,default:!1},size:{type:String,required:!1},isSimple:{type:Boolean,default:!1}},computed:{val:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{onChange:function(t){this.$emit("change",t)},openDialog:function(){var t=this;this.disabled||(this.$emit("visible-change",!0),dsf.layer.pc.openDialog({title:"设置链接",width:"1300px",height:"500px",content:"DsfUrlDialog",showClose:!1,params:{value:this.val,type:this.type,isSimple:this.isSimple},btns:[{text:"确定",handler:function(e){var n=e.yes();if(!1===n)return!1;t.val=n,t.onChange(n)}},{text:"取消"}]},(function(){t.$emit("visible-change",!1)})))}}},Ps=Os,Ls=Object(c["a"])(Ps,Es,Ds,!1,null,null,null),Ns=Ls.exports,Rs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{staticClass:"dsf-input-icon",attrs:{value:t.value||"",placeholder:t.placeholder,disabled:t.disabled,size:t.size,"popper-class":"dsf-input-color-popper"},on:{input:function(e){return t.$emit("input",e)},change:t.onChange},scopedSlots:t._u([{key:"suffix",fn:function(){return[n("DsfIcon",{attrs:{name:t.value}})]},proxy:!0},{key:"append",fn:function(){return[n("el-button",{attrs:{size:t.size,icon:"iconfont icon-sousuo"},on:{click:t.showIconSelect}})]},proxy:!0}])})},Is=[],As={name:"DsfInputIcon",props:{value:{type:String,default:""},placeholder:{type:String,default:"请输入icon名称"},disabled:{type:Boolean,default:!1},size:{type:String,required:!1},full:{type:Boolean,default:!1}},methods:{onChange:function(t){this.$emit("change",t)},showIconSelect:function(){var t=this;this.disabled||(this.$emit("visible-change",!0),dsf.layer.pc.openDialog({title:"图标选择",content:"DesIconSelect",params:{icon:this.value},width:"980px",height:"60vh",btns:[{text:"确定",handler:function(e){var n=null===e||void 0===e?void 0:e.yes();n&&(t.$emit("input",t.full?"icon-".concat(n):n),t.onChange(n))}},{text:"取消"}]},(function(){t.$emit("visible-change",!1)})))}}},Ms=As,Bs=Object(c["a"])(Ms,Rs,Is,!1,null,null,null),js=Bs.exports,Fs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticStyle:{height:"100%"}},[t.isSimple?t._e():n("el-aside",{staticStyle:{height:"100%",flex:"none",border:"1px solid #d4d4d4"},attrs:{width:"540px"}},[n("meta-data-select-item",{staticStyle:{height:"100%"},attrs:{url:t.currentURL[1],multiple:!1,"default-checked-key":t.defaultCheckedKey,"show-button":!1,"select-model":"explorer"},on:{"choose-node":t.chooseNode}})],1),n("el-main",{staticStyle:{width:"0",padding:"0",flex:"auto"}},[n("dsf-virtual-scroll",[n("div",{staticStyle:{padding:"0 20px"}},[n("div",{staticStyle:{padding:"10px","min-height":"20px",border:"1px solid #ddd","margin-bottom":"15px","border-radius":"5px","background-color":"#fafafa",color:"#666"}},[t._v("预览："+t._s(t.url||"无效链接"))]),t.isSimple?n("el-form",{attrs:{model:t.form,size:"small","label-width":"80px"}},[n("el-form-item",{attrs:{label:"链接地址",placeholder:"可以从左侧选择"}},[n("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url","string"===typeof e?e.trim():e)},expression:"form.url"}})],1)],1):"pc"===t.type||"mobile"===t.type?n("el-form",{attrs:{model:t.form,size:"small","label-width":"80px"}},[n("el-form-item",{attrs:{label:"页面路径"}},[n("el-input",{attrs:{placeholder:"例：./index.html?a=1"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path","string"===typeof e?e.trim():e)},expression:"form.path"}})],1),n("el-form-item",{attrs:{label:t.currentURL[0],placeholder:"可以从左侧选择"}},[n("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url","string"===typeof e?e.trim():e)},expression:"form.url"}})],1)],1):n("el-form",{attrs:{model:t.form,size:"small","label-width":"100px"}},[n("el-form-item",{attrs:{label:t.currentURL[0],placeholder:"可以从左侧选择"}},[n("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url","string"===typeof e?e.trim():e)},expression:"form.url"}})],1)],1),n("el-table",{attrs:{data:t.form.params,size:"small",border:"",stripe:""}},[n("el-table-column",{attrs:{type:"index",label:"#",width:"50",align:"center"}}),n("el-table-column",{attrs:{label:"参数名",width:"130px","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-input",{attrs:{size:"small"},model:{value:i.key,callback:function(e){t.$set(i,"key","string"===typeof e?e.trim():e)},expression:"row.key"}})]}}])}),n("el-table-column",{attrs:{label:"参数值",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-input",{attrs:{size:"small"},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"row.value"}})]}}])}),n("el-table-column",{attrs:{label:"编码",width:"70px",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-checkbox",{model:{value:i.encode,callback:function(e){t.$set(i,"encode",e)},expression:"row.encode"}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"110px",align:"center","header-align":"center"},scopedSlots:t._u([{key:"header",fn:function(){return[n("span",{staticStyle:{"margin-right":"5px"}},[t._v("操作")]),n("dsf-button",{attrs:{title:"新增参数",size:"small","btn-style":"icon-text",icon:"jia"},on:{click:function(e){return e.stopPropagation(),t.form.params.push({})}}})]},proxy:!0},{key:"default",fn:function(e){var i=e.row,s=e.$index;return[n("dsf-button",{attrs:{title:"删除",size:"small","btn-style":"icon-text",icon:"guanbi2"},on:{click:function(e){return e.stopPropagation(),t.remove(i,s)}}}),s>0?n("dsf-button",{attrs:{title:"上移",size:"small","btn-style":"icon-text",icon:"shang"},on:{click:function(e){return e.stopPropagation(),t.up(i,s)}}}):t._e(),s<t.form.params.length-1?n("dsf-button",{attrs:{title:"下移",size:"small","btn-style":"icon-text",icon:"xia"},on:{click:function(e){return e.stopPropagation(),t.down(i,s)}}}):t._e()]}}])})],1)],1)])],1)],1)},Vs=[],Gs=n(41),zs={name:"DsfUrlDialog",components:{MetaDataSelectItem:Gs["default"]},props:{defaultPath:{type:String,default:""},URL_MAP:{type:Object,default:function(){return{pc:["路由/锚点","rm/list/page"],mobile:["路由/锚点","rm/list/mobilePage"],datasource:["数据源","rm/list/ds"]}}},type:{type:String,default:"pc"},value:{type:String,default:""},isSimple:{type:Boolean,default:!1}},data:function(){return{currentNode:null,defaultCheckedKey:null,form:{path:"",url:"",params:[{key:"",value:"",encode:!1}]}}},computed:{currentURL:function(){return this.URL_MAP[this.type]},url:function(){var t=this.form,e=t.url,n=t.path,i=t.params,s="#/",a={};return _.forEach(i,(function(t){var e=t.key,n=t.value,i=t.encode;e&&(n=n||"",a[e]=i?encodeURIComponent(n):n)})),n||(n=this.defaultPath),e&&(e=e.replace(/^(\/)+/,""),e=this.parseUrl(e),a=Object.assign({},e.searchQuery,a),e=e.hostname+e.pathname),a=_.map(a,(function(t,e){return e+"="+t})).join("&"),n&&(n=n.replace(/((#+)|(#\/))$/,""),s=n+"#/"),e&&(s+=e),a&&(s+="?"+a),s}},watch:{tabIndex:function(t){this.$set(this.loaded,parseInt(t),!0)}},created:function(){var t=this,e=this.value.trim();if(e){var n=this.parseUrl(e);if("pc"===this.type||"mobile"===this.type){var i=n.href.replace(n.hash,""),s=n.hashKey.split("?")[0],a=n.hashQuery;n.hash||(i="",s=n.href.replace(n.search,""),a=n.searchQuery);var o=_.map(a,(function(e,n){e=decodeURIComponent(e);var i=-1===t.value.indexOf(n+"="+e);return{key:n,value:e,encode:i}}));o.length||(o=[{key:"",value:"",encode:!1}]),this.defaultCheckedKey=s.replace(/^((\/pc\/)|(pc\/)|(\/mobile\/)|(mobile\/))/,"").replace(/\//g,"."),this.form={path:i,url:s,params:o}}else{var r=n.href.replace(n.search,""),l=_.map(n.searchQuery,(function(e,n){e=decodeURIComponent(e);var i=-1===t.value.indexOf(n+"="+e);return{key:n,value:e,encode:i}}));l.length||(l=[{key:"",value:"",encode:!1}]),this.defaultCheckedKey=r.replace(/\//g,"."),this.form={url:r,params:l}}}},methods:{chooseNode:function(t){switch(this.currentNode=t,this.type){case"pc":this.$set(this.form,"url","pc/"+t["path"]);break;case"mobile":this.$set(this.form,"url","mobile/"+t["path"]);break;case"datasource":this.$set(this.form,"url","dbsource/interface/"+t["path"]);break}},remove:function(t,e){this.form.params.splice(e,1)},up:function(t,e){var n=this.form.params[e-1];this.$set(this.form.params,e-1,t),this.$set(this.form.params,e,n)},down:function(t,e){var n=this.form.params[e+1];this.$set(this.form.params,e+1,t),this.$set(this.form.params,e,n)},yes:function(){var t=this.url;return t||(dsf.layer.message(this.currentURL[0]+"不能为空",!1),!1)},parseUrl:function(t){var e="";0===t.indexOf("/")&&(t=t.substr(1),e="/");var n=dsf.url.parse(t);return n.href=e+n.href,n}}},Us=zs,Ks=Object(c["a"])(Us,Fs,Vs,!1,null,null,null),Ws=Ks.exports,qs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dsf-explorer"},[n("div",{staticClass:"dsf-explorer-header"},[t.showButton?n("div",{staticClass:"dsf-explorer-button"},[n("i",{staticClass:"iconfont icon-shang",staticStyle:{transform:"rotate(-90deg)"},attrs:{disabled:t.prevBtDisabled,title:"后退"},on:{click:function(e){return t.selectHistory(-1)}}}),n("i",{staticClass:"iconfont icon-shang",staticStyle:{transform:"rotate(90deg)"},attrs:{disabled:t.nextBtDisabled,title:"前进"},on:{click:function(e){return t.selectHistory(1)}}}),n("i",{staticClass:"iconfont icon-shang",attrs:{disabled:t.paths.length<1,title:"上一级"},on:{click:t.selectPrevLevel}})]):t._e(),n("dsf-explorer-path"),n("div",{staticClass:"dsf-explorer-search"},[n("el-input",{attrs:{placeholder:"在当前路径搜索","suffix-icon":"el-icon-search",size:"small",clearable:""},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1)],1),n("div",{staticClass:"dsf-explorer-main"},[n("dsf-explorer-nav",{ref:"nav",on:{"current-change":t.currentChange},scopedSlots:t._u([{key:"navTreeName",fn:function(e){var n=e.data;return[t._t("navTreeName",null,{data:n})]}},{key:"navTreeBtn",fn:function(e){var n=e.data,i=e.node;return[t._t("navTreeBtn",null,{data:n,node:i})]}}],null,!0)}),n("dsf-explorer-view",{attrs:{"view-data":t.viewData,model:t.viewModel,searching:t.searching}})],1),n("div",{staticClass:"dsf-explorer-footer"},[n("span",[t._v("共"+t._s(t.viewData.length)+"条数据")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.selectNum,expression:"selectNum"}]},[t._v(" 已选择 "),n("el-popover",{attrs:{offset:100,"popper-class":"dsf-explorer-popover "+(t.multiple?"multiple":""),placement:"top-start",width:"500",trigger:"click"}},[n("dsf-explorer-view",{attrs:{"view-data":t.selectArr,model:"selector"}}),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(t.selectNum))])],1),t._v(" 条 ")],1),t._v("   "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.selectNum,expression:"selectNum"}],attrs:{type:"text"},on:{click:t.clearSelect}},[t._v(" (清空) ")])],1)])},Hs=[],Xs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dsf-explorer-path"},[n("div",{staticClass:"dsf-explorer-path__item",on:{click:function(e){return t.$explorer.selectNode(null)}}},[n("span",{staticClass:"iconfont icon-wenjianjia"})]),n("div",{staticClass:"dsf-explorer-path-realWarp",attrs:{eliding:t.showPaths.length<t.paths.length}},[t._l(t.showPaths,(function(e){return[n("div",{key:e.key,staticClass:"dsf-explorer-path__item",on:{click:function(n){return t.$explorer.selectNode(e)}}},[n("span",[t._v(t._s(e.label))])])]}))],2),n("div",{ref:"warp",staticClass:"dsf-explorer-path-warp"},[t._l(t.paths,(function(e){return[n("div",{key:e.key,staticClass:"dsf-explorer-path__item"},[n("span",[t._v(t._s(e.label))])])]}))],2)])},Ys=[],Qs={name:"DsfExplorerPath",inject:["$explorer"],data:function(){return{showPaths:[]}},computed:{paths:function(){return this.$explorer.paths}},watch:{paths:function(){var t=this;this.$nextTick((function(){t.updateRealColumnsInfo()}))}},created:function(){this._updateRealColumnsInfo=_.debounce(this.updateRealColumnsInfo,50)},mounted:function(){var t=this;this.__resizeObserver1=new ResizeObserver((function(){return t._updateRealColumnsInfo()})),this.__resizeObserver1.observe(this.$el),this.__resizeObserver2=new ResizeObserver((function(){return t._updateRealColumnsInfo()})),this.__resizeObserver2.observe(this.$refs.warp)},beforeDestroy:function(){var t,e;null===(t=this.__resizeObserver1)||void 0===t||t.disconnect(),null===(e=this.__resizeObserver2)||void 0===e||e.disconnect()},methods:{updateRealColumnsInfo:function(){var t=this.$el.offsetWidth-10,e=this.$refs.warp.offsetWidth,n=this.paths;if(e+26>t){for(var i=this.$refs.warp.childNodes,s=0,a=[],o=t-26,r=n.length-1;r>0;r--){var l=i[r].offsetWidth+15;if(!(s+l<=o))break;s+=l,a.unshift(n[r])}this.showPaths=a}else this.showPaths=n}}},Js=Qs,Zs=Object(c["a"])(Js,Xs,Ys,!1,null,null,null),ta=Zs.exports,ea=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dsf-virtual-scroll",{staticClass:"dsf-explorer-nav",attrs:{"scroll-x":""}},[t.show?n("el-tree",{ref:"tree",attrs:{load:t.$explorer.lazyLoad,"default-expanded-keys":t.$explorer.defaultExpandedKeys,props:t.config,"expand-on-click-node":!1,"empty-text":t.$explorer.loading?"数据加载中...":"暂无数据","node-key":"$key",lazy:"","highlight-current":"","highlight-path":""},on:{"current-change":t.currentChange},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,s=e.data;return[n("div",{staticClass:"custom-tree-node"},[n("div",[n("i",{staticClass:"iconfont",class:[i.expanded?"icon-dakai":"icon-wenjianjia"]}),t._t("navTreeName",(function(){return[n("span",{staticClass:"name"},[t._v(t._s(i.label))]),n("span",{staticClass:"c_num"},[t._v("("+t._s(s.$childNum)+")")])]}),{data:s})],2),t._t("navTreeBtn",null,{data:s,node:i})],2)]}}],null,!0)}):t._e()],1)},na=[],ia={name:"DsfExplorerNav",inject:["$explorer"],data:function(){return this.config={label:"$label",children:"$children",disabled:"$disabled",isLeaf:"_isLeaf"},{show:!0}},methods:{reset:function(){var t=this;return A()(B.a.mark((function e(){return B.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.show=!1,e.next=3,t.$nextTick();case 3:t.show=!0;case 4:case"end":return e.stop()}}),e)})))()},selectNode:function(t,e){if(void 0===t){var n=this.$refs.tree.store.root.childNodes;n.length&&(t=n[0])}if(null===t)return this.$refs.tree.setCurrentKey(null),void this.currentChange(null,null,e);this.$refs.tree.setCurrentNode(t.data),this.currentChange(t.data,t,e)},selectNodeByData:function(t){var e=this;return A()(B.a.mark((function n(){var i,s,a,o,r,l;return B.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$lazy){n.next=17;break}i=null,s=0,a=t.$path.length;case 3:if(!(s<a)){n.next=17;break}return o=t.$path[s],n.next=7,e.$nextTick();case 7:if(!o.$lazy){n.next=11;break}i=o,n.next=14;break;case 11:return r=e.$refs.tree.getNode(i),n.next=14,e.nodeLazy(r);case 14:s++,n.next=3;break;case 17:l=e.$refs.tree.getNode(t),e.selectNode(l);case 19:case"end":return n.stop()}}),n)})))()},currentChange:function(t,e,n){this.$emit("current-change",t,e,n)},nodeLazy:function(t){return new Promise((function(e){t.loadData((function(t){e(t)}))}))}}},sa=ia,aa=Object(c["a"])(sa,ea,na,!1,null,null,null),oa=aa.exports,ra=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dsf-explorer-view",class:{"show-path":t.showPath}},["selector"!=t.model?n("div",{staticClass:"dsf-explorer-view__header"},[n("div",{staticClass:"__check"},[t.multiple?n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate,value:t.checkAll},on:{change:t.handleCheckAllChange}}):t._e()],1),n("div",{staticClass:"__name"},[t._v("名称")])]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],staticClass:"no-data"},[n("i",{staticClass:"el-icon-loading"}),t._v("  搜索中... ")]),n("dsf-virtual-scroll",{directives:[{name:"show",rawName:"v-show",value:!t.searching,expression:"!searching"}],staticClass:"dsf-explorer-view__body",attrs:{height:"0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.viewData.length,expression:"!viewData.length"}],staticClass:"no-data"},[t._v("暂无数据")]),t._l(t.viewData,(function(e){return[e.$isImageList?[n("div",{key:e.$key,staticClass:"view-list-item",on:{click:function(n){return t.onClick(e)},dblclick:function(n){return t.onDblclick(e)}}},[e.thumbnail?n("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[n("div",[n("img",{staticStyle:{"max-width":"100%","max-heigth":"100%",margin:"auto"},attrs:{src:t._f("imgFormat")(e.thumbnail),alt:"img"}})]),n("div",{staticClass:"sortImg",attrs:{slot:"reference"},slot:"reference"},[n("img",{attrs:{src:t._f("imgFormat")(e.thumbnail),alt:""}})])]):n("div",{staticClass:"no-img"}),n("el-popover",{attrs:{placement:"right",trigger:"hover"}},[n("div",[t._v(" "+t._s(e.$label)+" ")]),n("div",{staticClass:"ellipsis",attrs:{slot:"reference"},slot:"reference"},[n("el-checkbox",{attrs:{disabled:!t.checkStrictly&&e.$viewDisabled,value:!!t.selectMap[e.$key]},on:{change:function(n){return t.doCheck(e)}},nativeOn:{click:function(t){t.stopPropagation()},dblclick:function(t){t.stopPropagation()}}}),n("span",[t._v(" "+t._s(e.$label))])],1)])],1)]:[n("div",{key:e.$key,staticClass:"view-item",class:{"is-checked":"selector"!=t.model&&(t.checkStrictly||!e.$isFolder)&&t.selectMap[e.$key]},on:{click:function(n){return t.onClick(e)},dblclick:function(n){return t.onDblclick(e)}}},["selector"!=t.model?n("div",{staticClass:"__check"},[t.multiple&&!t.checkStrictly&&e.$isFolder?n("el-checkbox",{attrs:{value:2==t.indeterminateMap[e.$key],indeterminate:1==t.indeterminateMap[e.$key]},on:{change:function(n){return t.doCheck(e)}},nativeOn:{click:function(t){t.stopPropagation()},dblclick:function(t){t.stopPropagation()}}}):n("el-checkbox",{attrs:{disabled:!t.checkStrictly&&e.$viewDisabled,value:!!t.selectMap[e.$key]},on:{change:function(n){return t.doCheck(e)}},nativeOn:{click:function(t){t.stopPropagation()},dblclick:function(t){t.stopPropagation()}}})],1):t._e(),n("div",{staticClass:"__icon"},[e.$isFolder?n("i",{staticClass:"iconfont icon-wenjianjia"}):n("i",{staticClass:"iconfont icon-shiyongwendang"})]),n("div",{staticClass:"view-item-center"},[n("div",{staticClass:"__info"},["search"!=t.model?n("span",{staticClass:"__name"},[t._v(" "+t._s(e.$label)+" ")]):n("span",{staticClass:"__name",domProps:{innerHTML:t._s(e.$searchResult)}}),e.$isFolder?n("span",{staticClass:"__num"},[t._v(" ("+t._s(e.$childNum)+") ")]):t._e()]),t.showPath?n("div",{staticClass:"__path ds-multi-ellipsis-1"},[t._v(" "+t._s(t._f("path")(e.$path))+" ")]):t._e()]),"selector"==t.model?n("div",{staticClass:"__bt",on:{click:function(n){return n.stopPropagation(),t.doCheck(e)}}},[n("i",{staticClass:"iconfont icon-guanbi1"})]):t._e()])]]}))],2)],1)},la=[],ua=n(3),ca=n.n(ua),da={name:"DsfExplorerView",inject:["$explorer"],props:{searching:{type:Boolean,default:!1},model:{type:String,default:""},viewData:{type:Array,default:function(){return[]}}},data:function(){return this.dblclickMap={},{}},computed:{config:function(){return this.$explorer.config},multiple:function(){return this.$explorer.multiple},checkStrictly:function(){return this.$explorer.checkStrictly},showPath:function(){var t=this.model;return"search"==t||"selector"==t},selectMap:{get:function(){return this.$explorer.selectMap},set:function(t){this.$explorer.selectMap=t}},indeterminateMap:{get:function(){return this.$explorer.indeterminateMap},set:function(t){this.$explorer.indeterminateMap=t}},selectNum:function(){var t=this.viewData,e=this.checkStrictly,n=this.selectMap,i=this.indeterminateMap,s={checked:0,indeterminate:0};return t.length&&this.$explorer.selectNum?(_.each(t,(function(t){var a=t.$key;!t.$isFolder||e?s.checked+=n[a]?1:0:2==i[a]?s.checked++:1==i[a]&&s.indeterminate++})),s):s},checkAll:function(){var t=this.viewData,e=this.selectNum,n=e.checked,i=e.indeterminate;return!(i||!n||n<t.length)},isIndeterminate:function(){var t=this.checkAll,e=this.selectNum,n=e.checked,i=e.indeterminate;return!(!n&&!i)&&!t}},filters:{path:function(t){return t=_.map(t,"$label"),t.pop(),"/ "+t.join(" / ")}},beforeDestroy:function(){clearTimeout(this._timeOut)},methods:{handleCheckAllChange:function(t){var e=this.viewData;if(!e.length)return 0;this._checkAll(e,t),this.$explorer.updateNodeState(e[0]),this.$explorer.chooseHandler()},_checkAll:function(t,e){var n=this;if(t.length){var i=this.checkStrictly,s=this.selectMap,a=this.indeterminateMap;_.each(t,(function(t){var o=t.$key;!t.$isFolder||i?e?n.$set(s,o,t):n.$delete(s,o):(e?n.$set(a,o,2):n.$delete(a,o),n._checkAll(t.$children||[],e))}))}},onDblclick:function(t){"selector"!=this.model&&(clearTimeout(this._timeOut),t.$isFolder&&(delete this.dblclickMap[t.$key],t.$isFolder?this.$explorer.selectNodeByData(t):this.doCheck(t)))},onClick:function(t){var e=this;if("selector"!=this.model)if(clearTimeout(this._timeOut),t.$isFolder){var n=t.$key;this.dblclickMap[n]||(this.dblclickMap[n]=t),this._timeOut=setTimeout((function(){delete e.dblclickMap[n],e.doCheck(t)}),300)}else this.doCheck(t)},doCheck:function(t){var e=this,n=this.multiple,i=this.checkStrictly,s=this.selectMap,a=this.indeterminateMap;if(n||i||!t.$viewDisabled){var o=t.$key;n?i?s[o]?this.$delete(s,o):this.$set(s,o,t):t.$isFolder?2==a[o]?(this.$delete(a,o),dsf.deepForEach(t.$children,(function(t){t.$isFolder?e.$delete(a,t.$key):e.$delete(s,t.$key)}),{children:"$children"})):(this.$set(a,o,2),dsf.deepForEach(t.$children,(function(t){t.$isFolder?e.$set(a,t.$key,2):e.$set(s,t.$key,t)}),{children:"$children"})):s[o]?this.$delete(s,o):this.$set(s,o,t):s[o]?this.selectMap={}:this.selectMap=ca()({},o,t),this.$explorer.updateNodeState(t),this.$explorer.chooseHandler()}}}},pa=da,ha=Object(c["a"])(pa,ra,la,!1,null,null,null),_a=ha.exports,fa={name:"DsfExplorer",components:{DsfExplorerPath:ta,DsfExplorerNav:oa,DsfExplorerView:_a},provide:function(){return{$explorer:this}},props:{disabledViewFn:{type:Function,default:null},nodeKey:{type:String,default:"_id"},props:{type:Object,default:function(){return{label:"_name",children:"children",disabled:"disabled"}}},loading:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},fileType:{type:[String,Number],default:""},isFolder:{type:Function,default:null},viewDisabled:{type:Function,default:null},isImageList:{type:Boolean,default:!1},defaultExpandedLevel:{type:Number,default:2},defaultCheckedKeys:{type:[String,Array],default:function(){return[]}},checkStrictly:{type:Boolean,default:!1}},data:function(){return this.keyMap={},{activeNode:null,keywords:"",searching:!1,historyIndex:-1,history:[],originalData:[],treeData:[],defaultExpandedKeys:[],searchViewData:[],selectMap:{},indeterminateMap:{}}},computed:{config:function(){return Object.assign({label:"label",children:"children",disabled:"disabled"},this.props)},isFolderFn:function(){return this.isFolder||function(t){if(this.fileType){var e=dsf.isString(this.fileType)?this.fileType.split(","):[];return e.length>1?-1==e.indexOf(t.type):t.type!=this.fileType}return t.children&&t.children.length>0}.bind(this)},viewDisabledFn:function(){return this.viewDisabled||function(t){this.isFolderFn(t)}.bind(this)},paths:function(){var t=[],e=this.activeNode;while(e&&e.level>0)t.unshift(e),e=e.parent;return t},realKeywords:function(){return _.trim(this.keywords).replace(/\s+/g," ")},viewData:function(){var t=this.activeNode,e=this.realKeywords;return e?this.searchViewData:t?this.getNodeChildren(t):this.originalData},nextBtDisabled:function(){var t=this.history,e=this.historyIndex;return t.length-1==e},prevBtDisabled:function(){return this.historyIndex<=0},selectArr:function(){return _.values(this.selectMap)},selectNum:function(){return this.selectArr.length},viewModel:function(){return this.realKeywords?"search":""}},watch:{realKeywords:function(t){t?(this.searching=!0,this._doSearch()):(this.searching=!1,this.searchViewData=[])}},created:function(){this._doSearch=_.debounce(this.doSearch,500)},methods:{setData:function(t){var e;this.selectMap={},this.indeterminateMap={},this.searchViewData=[],this.treeData=[],this.originalData=[],this.history=[],this.historyIndex=-1,this.searching=!1,this.keywords="",this.activeNode=null,this.defaultExpandedKeys={},this.keyMap={},this.formatData(t),null===(e=this.$refs.nav)||void 0===e||e.reset()},formatData:function(t){var e=this,n=this.isFolderFn,i=this.viewDisabledFn,s=this.defaultExpandedLevel,a=this.defaultCheckedKeys,o=this.nodeKey,r=this.multiple,l=this.checkStrictly,u=this.config,c=u.label,d=u.disabled,p=u.children;dsf.isUnDef(a)?a=[]:dsf.isArray(a)||(a=[a]);var h=[],f={},m={};dsf.deepForEach(t,(function(t,r,l,u){var _,v=u?u.$path:[],g=n(t),y=i(t);va(t,"$key",dsf.uuid(32)),va(t,"$label",t[c]),va(t,"$disabled",t[d]),va(t,"$path",v.concat(t)),va(t,"$isFolder",!!g),va(t,"$lazy",!1),va(t,"$childNum",(null===(_=t[p])||void 0===_?void 0:_.length)||0),va(t,"$viewDisabled",!!y),va(t,"$isImageList",!g&&e.isImageList),g&&(va(t,"$children",t[p]),s>r&&h.push(t.$key)),a.indexOf(t[o])>-1&&(f[t.$key]=t),m[t.$key]=t}));var v=[];_.each(t,(function(t){t.$isFolder&&v.push(ma(t))})),this.keyMap=m,this.defaultExpandedKeys=h,this.originalData=t,this.treeData=v;var g=_.values(f);if(g.length)if(r)if(l)this.selectMap=f;else{var y={};_.each(f,(function(t){if(!t.$isFolder){e.selectMap[t.$key]=t;var n=_.nth(t.$path,-2);n&&(y[n.$key]=n)}})),_.each(y,(function(t){return e.updateNodeState(t)}))}else{var b=l?g[0]:_.find(g,(function(t){return!t.$isFolder}));b&&(this.selectMap[b.$key]=b)}},lazyLoad:function(t,e){var n=[];if(t.level){var i=this.getNodeChildren(t);null!==i&&void 0!==i&&i.length&&_.each(i,(function(t){t.$isFolder&&n.push(ma(t))}))}else n=this.treeData;_.each(n,(function(t){va(t.$data,"$lazy",!0)})),e(n)},getNodeChildren:function(t){var e=this.config.children;return t.data.$$children||t.data.$data[e]||[]},selectNode:function(t,e){this.$refs.nav.selectNode(t,e)},selectNodeByData:function(t){this.$refs.nav.selectNodeByData(t)},currentChange:function(t,e,n){if(this.keywords="",this.activeNode=e,!n){var i=this.history,s=this.historyIndex;i.length=s+1,i.length>19&&(i.length=19),i.push(e),this.historyIndex=i.length-1}},selectPrevLevel:function(){var t=this.paths;if(t.length<2)return this.selectNode(null);this.selectNode(_.nth(t,-2))},selectHistory:function(t){var e=this.history,n=this.historyIndex,i=this.nextBtDisabled,s=this.prevBtDisabled;1!=t||i?-1!=t||s||(this.historyIndex--,this.selectNode(e[n-1],!0)):(this.historyIndex++,this.selectNode(e[n+1],!0))},doSearch:function(){var t=this.activeNode,e=this.realKeywords,n=this.config,i=n.label,s=n.children,a=t?this.getNodeChildren(t):this.originalData;if(a.length){var o=[],r=e.split(" "),l=function t(e){for(var n=e[i],a=!0,l=0,u=r.length;l<u;l++)if(-1==n.indexOf(r[l])){a=!1;break}if(a){var c=new RegExp("(".concat(r.join("|"),")"),"g"),d="<i>".concat(n.replace(c,"</i><span>$1</span><i>"),"</i>");va(e,"$searchResult",d.replace(/<i><\/i>/g,"")),o.push(e)}!e.$children&&e[s]&&dsf.deepForEach(e[s],t,{children:s})};dsf.deepForEach(a,l),this.searchViewData=o,this.searching=!1}else this.searchViewData=[]},updateNodeState:function(t){for(var e=this.selectMap,n=this.indeterminateMap,i=t.$path.length-2;i>=0;i--){for(var s=t.$path[i],a=s.$key,o=!1,r=!1,l=!1,u=s.$children.length-1;u>=0;u--){var c=s.$children[u],d=c.$key;c.$isFolder?2==n[d]?o=!0:1==n[d]?r=!0:l=!0:e[d]?o=!0:l=!0}l||r||!o?r||l&&o?this.$set(n,a,1):this.$delete(n,a):this.$set(n,a,2)}},clearSelect:function(){this.selectMap={},this.indeterminateMap={}},chooseHandler:function(){var t=this.multiple,e=this.selectMap,n=this.selectArr,i=this.$listeners;if(i["choose-node"]){var s=t?n:(null===n||void 0===n?void 0:n[0])||null;this.$emit("choose-node",s)}if(i["choose-key"]){var a=_.keys(e),o=t?a:(null===a||void 0===a?void 0:a[0])||null;this.$emit("choose-key",o)}},yes:function(){var t=this.multiple,e=this.selectArr;return t?e:(null===e||void 0===e?void 0:e[0])||null}}};function ma(t){var e=Object.assign({},t,{$label:t.$label,$disabled:t.$disabled,$$children:t.$children,_isLeaf:!_.find(t.$children,(function(t){return t.$isFolder}))});return va(e,"$key",t.$key),va(e,"$childNum",t.$childNum),va(e,"$isFolder",t.$isFolder),va(e,"$path",t.$path),va(e,"$data",t),va(e,"$viewDisabled",t.$viewDisabled),e}function va(t,e,n){return Object.defineProperty(t,e,{configurable:!0,writable:!0,value:n}),t}var ga=fa,ya=Object(c["a"])(ga,qs,Hs,!1,null,null,null),ba=ya.exports,wa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dsf-button",{staticClass:"dsf-designer-switch",attrs:{icon:t.icon,title:t.title,active:t.val,"btn-style":"icon-text"},on:{click:function(e){t.val=!t.val}}},[t._t("default",(function(){return[t._v(t._s(t.title))]}))],2)},xa=[],ka={name:"DsfDesignerSwitch",props:{value:{type:[Boolean,String,Number],default:!1},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},icon:{type:String,default:""},title:{type:String,default:""}},computed:{val:{get:function(){return this.value===this.activeValue},set:function(t){this.$emit("input",t?this.activeValue:this.inactiveValue)}}}},Ca=ka,$a=Object(c["a"])(Ca,wa,xa,!1,null,null,null),Sa=$a.exports,Ta=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dsf-designer-radio",class:{"has-icon":t.hasIcon}},t._l(t.items,(function(e){return n("dsf-button",{key:e.value,staticClass:"dsf-designer-switch",attrs:{icon:e.icon,title:e.title,active:t.val==e.value,"btn-style":t.hasIcon?"icon-text":""},on:{click:function(n){t.val=e.value}}},[t._t("default",(function(){return[t._v(t._s(e.title))]}))],2)})),1)},Ea=[],Da={name:"DsfDesignerRadio",props:{value:{type:[Boolean,String,Number],default:!1},items:{type:Array,default:function(){return[]}},hasIcon:{type:Boolean,default:!0}},computed:{val:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},Oa=Da,Pa=Object(c["a"])(Oa,Ta,Ea,!1,null,null,null),La=Pa.exports,Na=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ds-component-info"},[n("p",[n("label",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("控件类型：")]),t._v(" "+t._s(t.info.caption)+" ")]),n("p",[n("label",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("元数据标识：")]),t._v(" "+t._s(t.info.id||"无")+" ")]),n("p",[n("label",{staticStyle:{width:"100px",display:"inline-block"}},[t._v("元数据名称：")]),t._v(" "+t._s(t.info.name||"无")+" ")])])},Ra=[],Ia={name:"DsfComponentInfo",props:{info:{type:Object,default:function(){return{}}}}},Aa=Ia,Ma=Object(c["a"])(Aa,Na,Ra,!1,null,null,null),Ba=Ma.exports,ja=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dsf-phone-case",style:t.elStyle,attrs:{disabled:t.disabled}},[t.disabled?n("div",{staticClass:"dsf-phone-case__body"},[t._t("default")],2):n("div",{staticClass:"dsf-phone-case__content"},[t.showNavBar?n("DsfDemoBrowserNavBar",{attrs:{"show-back":t.showBack,title:t.title,"go-back":t.goBack}}):t._e(),n("div",{staticClass:"dsf-phone-case__body"},[t._t("default")],2)],1)])},Fa=[],Va={name:"DsfPhoneCase",props:{showNavBar:{type:Boolean,default:!0},title:{type:String,default:"无标题"},goBack:{type:Function,default:dsf.noop},showBack:{type:Boolean,default:!1},width:{type:String,default:"375px"},height:{type:String,default:"750px"},disabled:{type:Boolean,default:!1}},computed:{elStyle:function(){return this.disabled?{}:{width:this.width,height:this.height}}}},Ga=Va,za=Object(c["a"])(Ga,ja,Fa,!1,null,null,null),Ua=za.exports;function Ka(t){t.component(Ws.name,Ws),t.component(ws.name,ws),t.component(fs.name,fs),t.component(Ts.name,Ts),t.component(js.name,js),t.component(Ns.name,Ns),t.component(ba.name,ba),t.component(Sa.name,Sa),t.component(La.name,La),t.component(Ba.name,Ba),t.component(Ua.name,Ua)}n(68),n(348);var Wa={},qa=null;function Ha(t){Object.defineProperty(dsf,"beautify",{get:function(){return Wa.beautify},enumerable:!0,configurable:!0}),t.use(us["default"]),t.use(Ka),t.use(ts),t.use(ls)}Object.defineProperty(Wa,"beautify",{get:function(){return qa||(qa=n(344)),qa},enumerable:!0,configurable:!0});!function(t,e){Vue.use(Ha),dsf.mix(!0,t.$mixins,{designer:ts}),(e=t.$platformRouter.designer).push.apply(e,a()(L))}(dsf.global||(dsf.global={}))},36:function(t,e,n){"use strict";n.r(e);for(var i=n(8),s=n.n(i),a=[["DsfIndicatorPanelEdit","./IndicatorPanelEdit.vue"],["AccessPrivilege","./accessPrivilege.vue"],["DesAutoCompleteMD","./autoCompleteMD.vue"],["BackgroundSetting","./backgroundSetting.vue"],["BrowseScopeEdit","./browseScopeEdit.vue"],["DsfBtnsTable","./btnsTable.vue"],["DesBusinessComponent","./businessComponent.vue"],["DesBusinessComponentSingle","./businessComponentSingle.vue"],["DesButtonEdit","./buttonEdit.vue"],["DesButtonParamsSetting","./buttonParamsSetting.vue"],["DesCodeEdit","./codeEdit.vue"],["CollapseEdit","./collapseEdit.vue"],["DesColumnsEdit","./columnsEdit.vue"],["DesComponentInfoList","./componentInfoList.vue"],["DesComponents","./components.vue"],["DesControlSelect","./controlSelect.vue"],["DesCustomComponent","./customComponent.vue"],["DesCustomListSetList","./customListSetList.vue"],["DesCustomerOrderByEdit","./customOrderBy.vue"],["DesDataGridLayoutSetting","./dataGridLayoutSetting.vue"],["DesDataGridSearch","./dataGridSearchSetting.vue"],["dataPanelGroupEdit","./dataPanelGroupEdit.vue"],["DesDefaultValue","./defaultValue.vue"],["DesDevelopment","./developmentEdit.vue"],["DesDragGridChooseLevel","./dragGridSetting/chooseLevel.vue"],["DesDragGridSetting","./dragGridSetting/dragGridSetting.vue"],["DesEnumEditor","./enumEditor.vue"],["DesExamEnumEditor","./examEnumEditor.vue"],["DesPlatformExcelEdit","./excelEdit.vue"],["DesExportOptions","./exportOptions.vue"],["DesFilterRuleSetting","./filterRuleSetting.vue"],["flexColumnEdit","./flexColumnEdit.vue"],["DesFlexGrid","./flexGrid.vue"],["ApplyTo","./flow/applyTo.vue"],["ChooseFlow","./flow/chooseFlow.vue"],["ChooseForm","./flow/chooseForm.vue"],["ContextTree","./flow/contextTree.vue"],["DatabaseOperation","./flow/databaseOperation.vue"],["EventSetting","./flow/eventSetting.vue"],["FlowBusiness","./flow/flowBusiness.vue"],["FlowCommonTree","./flow/flowCommonTree.vue"],["ForPersonnel","./flow/forPersonnel.vue"],["InstitutionInfo","./flow/institutionInfo.vue"],["JavaParameter","./flow/javaParameter.vue"],["LeaveSend","./flow/leaveSend.vue"],["LinkSet","./flow/linkSet.vue"],["Parameter","./flow/parameter.vue"],["ParameterBatch","./flow/parameterBatch.vue"],["ParameterReal","./flow/parameterReal.vue"],["ParameterExecSql","./flow/parameterExecSql.vue"],["ParameterExecSqlDs","./flow/parameterExecSqlDs.vue"],["ParameterExecSqlAdd","./flow/parameterExecSqlAdd.vue"],["ParameterExecWebAdd","./flow/parameterExecWebAdd.vue"],["ParameterExecShell","./flow/parameterExecShell.vue"],["ParameterExecWeb","./flow/parameterExecWeb.vue"],["ParameterNew","./flow/parameterNew.vue"],["ParameterTree","./flow/parameterTree.vue"],["RangeRule","./flow/rangeRule.vue"],["RichText","./flow/richText.vue"],["RiskInfo","./flow/riskInfo.vue"],["SelectImg","./flow/selectImg.vue"],["FlowSelectNodes","./flow/selectNodes.vue"],["SelectTable","./flow/selectTable.vue"],["SelectTree","./flow/selectTree.vue"],["SendCondition","./flow/sendCondition.vue"],["SetOpinionNode","./flow/setOpinionNode.vue"],["SetParams","./flow/setParams.vue"],["SetSubFlow","./flow/setSubFlow.vue"],["SumAllNode","./flow/sumAllNode.vue"],["SumStartNode","./flow/sumStartNode.vue"],["Summary","./flow/summary.vue"],["customFuncEdit","./formula/customFuncEdit.vue"],["DsfFormula","./formula/formula.vue"],["DesFunctionSetting","./functionSetting.vue"],["DesGridLayoutCellSetting","./gridLayoutCellSetting.vue"],["DesGridLayout","./gridLayoutSetting.vue"],["DesHeadColumnsEdit","./headColumnsEdit.vue"],["DesIconSelect","./iconSelect.vue"],["DesImportOptions","./importOptions.vue"],["DesDbDataSelect","./item/dbDataSelect.vue"],["DesDictDataSelect","./item/dictDataSelect.vue"],["EnumEditorItem","./item/enumEditorItem.vue"],["DesLayoutGridSettingByLayout","./item/layoutGridSettingByLayout.vue"],["DesLayoutGridSettingBySlot","./item/layoutGridSettingBySlot.vue"],["DesMetaDataSelectItem","./item/metaDataSelectItem.vue"],["DesKeysMapSetting","./keysMapSetting.vue"],["DesLayoutGridSetting","./layoutGridSetting.vue"],["DesListOrderByEdit","./listOrderbyEdit.vue"],["DesListRowHeightAdapter","./listRowHeightAdapter.vue"],["DesMyDialog","./listStaticDataEdit.vue"],["DesListStatusEdit","./listStatusEdit.vue"],["MeMenusEdit","./meMenusEdit.vue"],["MessageEdit","./messageEdit.vue"],["MessageNotificationTabPanelEdit","./messageNotificationTabPanelEdit.vue"],["DesMetaDataSelect","./metaDataSelect.vue"],["DesMetaDataSource","./metadataSouece.vue"],["DesMobileBannerEdit","./mobileBannerEdit.vue"],["DesMobileFlexGrid","./mobileFlexGrid.vue"],["DesMobileNavMenuData","./mobileNavMenuData.vue"],["MobileUeditorToolbar","./mobileUeditorToolbar.vue"],["NavCatalogueSetting","./navCatalogueSetting.vue"],["navShortMessageSeting","./navShortMessageSeting.vue"],["NavTabEdit","./navTabEdit.vue"],["NavTreeEdit","./navTreeEdit.vue"],["DesNewEditorToolbar","./neweditorToolbar.vue"],["DesNumeration","./numeration.vue"],["DesOutputWordStringEdit","./outputWordStringEdit.vue"],["PagePrivilege","./pagePrivilege.vue"],["PendingListEdit","./pendingListEdit.vue"],["barEdit","./platformCharts/barEdit.vue"],["GridConfig","./platformCharts/config/grid.vue"],["LegendConfig","./platformCharts/config/legend.vue"],["MixinAxisConfig","./platformCharts/config/mixinAxis.vue"],["platformSeriesScatterConfig","./platformCharts/config/platformSeriesScatter.vue"],["radarConfig","./platformCharts/config/radar.vue"],["SeriesBarConfig","./platformCharts/config/seriesBar.vue"],["SeriesLineConfig","./platformCharts/config/seriesLine.vue"],["SeriesPieConfig","./platformCharts/config/seriesPie.vue"],["SeriesRadarConfig","./platformCharts/config/seriesRadar.vue"],["TitleConfig","./platformCharts/config/title.vue"],["XaxisConfig","./platformCharts/config/xAxis.vue"],["YaxisConfig","./platformCharts/config/yAxis.vue"],["platformCustomChartEdit","./platformCharts/customChartEdit.vue"],["DataGridConfigAttachRequestParams","./platformCharts/dataGridConfigAttachRequestParams.vue"],["mapChartEdit","./platformCharts/mapChartEdit.vue"],["mixinAxisEdit","./platformCharts/mixinAxisEdit.vue"],["pieEdit","./platformCharts/pieEdit.vue"],["polylineEdit","./platformCharts/polylineEdit.vue"],["radarEdit","./platformCharts/radarEdit.vue"],["scatterEdit","./platformCharts/scatterEdit.vue"],["DesQrcodeEdit","./qrcodeEdit.vue"],["RegisterDatabaseEdit","./registerDatabaseEdit.vue"],["SmsTowLevelTabPanelEdit","./smsTowLevelTabPanelEdit.vue"],["DesStateManageEdit","./stateManageEdit.vue"],["DesStaticDataFormItem","./staticDataFormItem.vue"],["DesStaticListData","./staticListData.vue"],["DesStaticTreeData","./staticTreeData.vue"],["staticTreeTable","./staticTreeTable.vue"],["DesSubTableRedundanceFields","./subTableRedundanceFields.vue"],["DesSuperSearchEnumItems","./superSearchEnumItems.vue"],["DesSuperSearchSetting","./superSearchSetting.vue"],["TabPanelEdit","./tabPanelEdit.vue"],["DesTableCellSet","./tableCellSet.vue"],["DesTableColumnsInfo","./tableColumnsInfo.vue"],["DesTableRowsInfo","./tableRowsInfo.vue"],["TabsListSetting","./tabsListSetting.vue"],["ToUrlEdit","./toUrlEdit.vue"],["TreeDataSource","./treeDataSource.vue"],["TreeIconEdit","./treeIconEdit.vue"],["DesTreeImgList","./treeImgList.vue"],["DesTreeImgSet","./treeImgSet.vue"],["TreeSelectorEdit","./treeSelectorEdit.vue"],["TreeSelectorEdit1","./treeSelectorEdit1.vue"],["DesUeditorToolbar","./ueditorToolbar.vue"],["DesUploadFileAttr","./uploadFileAttr.vue"],["DesUseLayoutTpl","./useLayoutTpl.vue"],["DesValidateRule","./validateRuleEdit.vue"],["DesValidateRuleNew","./validateRuleEditNew.vue"],["DesValueAttributes","./valueAttribute.vue"],["verticalSubColumnsEdit","./verticalSubColumnsEdit.vue"],["DesValueCorrectionSetting","./valueCorrectionSetting.vue"],["DesMobileConvenientMenuCode","./mobileConvenientMenuCode.vue"]],o={},r=function(){var t=s()(a[l],2),e=t[0],i=t[1];o[e]=Vue.defineAsyncComponent((function(){return n(346)("".concat(i))}))},l=0,u=a.length;l<u;l++)r();e["default"]=o},4:function(t,e){function n(t,e,n,i,s,a,o){try{var r=t[a](o),l=r.value}catch(u){return void n(u)}r.done?e(l):Promise.resolve(l).then(i,s)}function i(t){return function(){var e=this,i=arguments;return new Promise((function(s,a){var o=t.apply(e,i);function r(t){n(o,s,a,r,l,"next",t)}function l(t){n(o,s,a,r,l,"throw",t)}r(void 0)}))}}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},41:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ds-meta-data-select-item"},["tree"==t.selectModel?n("dsf-tree-select",{attrs:{"tree-data":t.treeData,loading:t.loading,multiple:t.multiple,theme:t.theme,"default-checked-key":t.defaultCheckedKey,"node-key":t.idKey,"node-name":t.nameKey,"search-control":"","default-expand-all":""},on:{"choose-node":t.chooseNode}}):t._e(),"explorer"==t.selectModel?n("dsf-explorer",{ref:"explorer",attrs:{loading:t.loading,multiple:t.multiple,"default-checked-keys":t.defaultCheckedKey,"node-key":t.idKey,props:{label:t.nameKey},"show-button":t.showButton,isFolder:t.isFolder,viewDisabled:t.disabledViewFn},on:{"choose-node":t.chooseNode},scopedSlots:t._u([{key:"navTreeName",fn:function(e){var n=e.data;return[t._t("navTreeName",null,{data:n})]}},{key:"navTreeBtn",fn:function(e){var n=e.data,i=e.node;return[t._t("navTreeBtn",null,{data:n,node:i})]}}],null,!0)}):t._e()],1)},s=[],a={name:"DesMetaDataSelectItem",props:{nameKey:{type:String,default:"name"},idKey:{type:String,default:"ID"},url:{type:String,required:!0},multiple:{type:Boolean,default:!0},theme:{type:String,default:"theme2"},defaultCheckedKey:{type:[Array,String,Number],default:function(){return[]}},selectModel:{type:String,default:"tree"},showButton:{type:Boolean,default:!0},isFolder:{type:Function,default:null},disabledViewFn:{type:Function,default:null}},data:function(){return{loading:!1,treeData:[],checkList:[]}},created:function(){this.postData()},methods:{yes:function(){return"explorer"==this.selectModel?this.$refs.explorer.yes():this.checkList},chooseNode:function(t){this.checkList=t,this.$emit("choose-node",t)},postData:function(){var t=this;this.loading=!0,this.$http.get(this.url,{namespace:""}).done((function(e){var n=e.success,i=e.data,s=e.message;n?("tree"==t.selectModel?t.dataFormat(i):"explorer"==t.selectModel&&t.$refs.explorer.setData(i),t.treeData=i):dsf.layer.message(s||"请求异常！",!1)})).always((function(){t.loading=!1}))},dataFormat:function(t){for(var e=0;e<t.length;e++){var n=t[e];n.label=n.name,n.children&&this.dataFormat(n.children)}}}},o=a,r=n(0),l=Object(r["a"])(o,i,s,!1,null,null,null);e["default"]=l.exports},64:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"ds-designer-mobile-setting"},[n("el-aside",{attrs:{width:"300px"}},[n("DsfPanel",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("配置")]},proxy:!0},{key:"default",fn:function(){return[n("div",{staticStyle:{padding:"10px"}},[n("el-tree",{ref:"tree",attrs:{data:t.treeData,"node-key":"type","expand-on-click-node":!1,"current-node-key":t.currentType,"default-expand-all":"","highlight-current":""},on:{"current-change":t.selectedNode}})],1)]},proxy:!0}])})],1),n("el-main",[n("div",{staticClass:"form"},[n("DsfPanel",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.title))]},proxy:!0},{key:"header",fn:function(){return[n("div",{staticStyle:{"text-align":"right"}},[n("DsfButton",{attrs:{icon:"baocun"},on:{click:function(e){return t.save()}}},[t._v("保存")]),n("DsfButton",{attrs:{icon:"shuaxin1",type:"plain"},on:{click:function(e){return t.refresh()}}},[t._v("刷新")])],1)]},proxy:!0}])},[[n("div",{staticStyle:{padding:"10px"}},["info"==t.currentType&&t.info?n("el-form",[n("el-form-item",{attrs:{label:"AppID"}},[n("el-input",{attrs:{disabled:""},model:{value:t.info["id"],callback:function(e){t.$set(t.info,"id",e)},expression:"info['id']"}})],1),n("el-form-item",{attrs:{label:"AppCode"}},[n("el-input",{attrs:{disabled:""},model:{value:t.info["code"],callback:function(e){t.$set(t.info,"code",e)},expression:"info['code']"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{disabled:""},model:{value:t.info["name"],callback:function(e){t.$set(t.info,"name",e)},expression:"info['name']"}})],1)],1):t._e(),"navs"==t.currentType&&t.navs?n("el-form",{attrs:{"label-position":"right",size:"small"}},[n("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[n("DsfButton",{attrs:{icon:"hao",type:"plain",size:"small"},on:{click:function(e){return t.addNav()}}},[t._v("新增")])],1),t._l(t.navs,(function(e,i){return n("el-card",{key:i,staticStyle:{"margin-bottom":"10px"}},[[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticStyle:{float:"right"}},[n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.remove(t.navs,e)}}},[t._v("删除")]),n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.up(t.navs,e)}}},[t._v("上移")]),n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.down(t.navs,e)}}},[t._v("下移")])],1),n("div",{staticStyle:{clear:"both"}})])],[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"nav.text"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"地址"}},[n("dsf-input-url",{attrs:{type:"mobile"},model:{value:e.href,callback:function(n){t.$set(e,"href",n)},expression:"nav.href"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"图标类型"}},[n("el-radio-group",{model:{value:e.iconType,callback:function(n){t.$set(e,"iconType",n)},expression:"nav.iconType"}},[n("el-radio",{attrs:{label:"icon"}},[t._v("icon")]),n("el-radio",{attrs:{label:"image"}},[t._v("图片")])],1)],1)],1),"image"==e.iconType?[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"图片地址"}},[n("dsf-input-upload",{model:{value:e.imagePath,callback:function(n){t.$set(e,"imagePath",n)},expression:"nav.imagePath"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"选中图片地址"}},[n("dsf-input-upload",{model:{value:e.activeImagePath,callback:function(n){t.$set(e,"activeImagePath",n)},expression:"nav.activeImagePath"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"大图标"}},[n("el-radio-group",{model:{value:e.big,callback:function(n){t.$set(e,"big",n)},expression:"nav.big"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1)],1)]:[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"图标"}},[n("dsf-input-icon",{model:{value:e.icon,callback:function(n){t.$set(e,"icon",n)},expression:"nav.icon"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"选中图标"}},[n("dsf-input-icon",{model:{value:e.activeIcon,callback:function(n){t.$set(e,"activeIcon",n)},expression:"nav.activeIcon"}})],1)],1)]],2)]],2)}))],2):t._e(),"preloads"==t.currentType&&t.preloads?n("el-form",{attrs:{"label-position":"right",size:"small"}},[n("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[n("DsfButton",{attrs:{icon:"hao",type:"plain",size:"small"},on:{click:function(e){return t.addPreLoad()}}},[t._v("新增")])],1),t._l(t.preloads,(function(e,i){return n("el-card",{key:i,staticStyle:{"margin-bottom":"10px"}},[[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticStyle:{float:"right"}},[n("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:function(n){return t.remove(t.preloads,e)}}},[t._v("删除")])],1),n("div",{staticStyle:{clear:"both"}})])],[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"地址"}},[n("dsf-input-url",{attrs:{type:"mobile"},model:{value:e.href,callback:function(n){t.$set(e,"href",n)},expression:"pre.href"}})],1)],1)],1)]],2)}))],2):t._e()],1)]],2)],1),n("div",{staticClass:"demo"},[n("dsf-phone-case",{directives:[{name:"loading",rawName:"v-loading",value:t.iframeLoading,expression:"iframeLoading"}],staticClass:"ds-designer-phone",attrs:{"show-back":t.demo.showBack,title:t.demo.title,"go-back":t.goBack}},[n("iframe",{ref:"appDemoFrame",attrs:{scrolling:"no",name:"appDemo",src:t.src}})])],1)])],1)},s=[],a=n(3),o=n.n(a);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={name:"MobileSetting",data:function(){return{loading:!1,iframeLoading:!1,appId:"",currentType:"info",treeData:[{label:"app配置",type:"root",children:[]}],title:"",navs:null,info:null,preloads:null,src:"",demo:{showBack:!1,title:"",route:null}}},watch:{"demo.route":{handler:function(t){var e,n;t&&(this.demo.showBack=(null===t||void 0===t||null===(e=t.meta)||void 0===e?void 0:e.level)>1,this.demo.title=(null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.title)||"无标题")},immediate:!0}},beforeCreate:function(){window.$mobileSetting=this},created:function(){var t=this;this.appId=this.$route.query.id,this.loadData().then((function(e){!e&&(e=t.getDefaultConfig()),t.navs=e.navs||[],t.info=e.info,t.preloads=e.preloads||[];var n=[{label:"基本配置",type:"info",data:t.info},{label:"导航配置",type:"navs",data:t.navs},{label:"预加载",type:"preloads",data:t.preloads}];t.treeData[0].children=n,t.selectedNode(t.treeData[0].children[0]),t.loadIframe()}))},mounted:function(){},beforeDestroy:function(){delete window.$mobileSetting},methods:{loadData:function(){var t=this.$route.query.id,e={pageName:"mobileappedit",namespace:"dsfa.mobile",data:JSON.stringify({_id:t})};return this.$webAPI.getFormData(e).then((function(t){var e=t.data,n={id:e.data["dsfa_rm.dsfa_rm_id"],code:e.data["dsfa_rm.ID"],name:e.data["dsfa_rm.name"]},i=e.data["dsfa_rm.content"]?JSON.parse(e.data["dsfa_rm.content"]):{navs:[],preloads:[]};return i.info=n,i}))},selectedNode:function(t){"root"!=t.type&&(this.title=t.label,this.currentType=t.type)},getDefaultConfig:function(){var t={info:{id:"",name:"",code:""},navs:[],preloads:[]};return t},loadIframe:function(){var t=this.treeData[0].children[1].data||[],e=t[0]?t[0].href:"";e=dsf.url.anchorToRoutePath(e),this.src=e?"mobile-index.html?appid="+this.info.code+"#"+e:""},save:function(){var t=this;_.each(this.navs||[],(function(e){e.href=dsf.url.anchorToRoutePath(e.href),e.href=t.$replace(e.href)})),_.each(this.preloads||[],(function(e){e.href=dsf.url.anchorToRoutePath(e.href),e.href=t.$replace(e.href)}));var e={"dsfa_rm.content":JSON.stringify({navs:this.navs,preloads:this.preloads})},n={namespace:"dsfa.mobile",pageName:"mobileappedit",data:JSON.stringify(l({_id:this.$route.query.id},e))};this.loading=!0,this.$webAPI.formSave(n).then((function(t){var e=t.data;"20000"==e.state?dsf.layer.message("保存成功"):dsf.layer.message(e.message,!1)})).catch((function(t){dsf.layer.message("保存失败",!1)})).finally((function(){t.loading=!1,t.refresh()}))},refresh:function(){var t=this;this.iframeLoading=!0,this.src="",this.$nextTick((function(){window.setTimeout((function(){t.loadIframe(),t.iframeLoading=!1}),500)}))},getDefaultInfo:function(){return{name:""}},getDefaultNavButton:function(){return{text:"",href:"",iconType:"icon",icon:"",activeIcon:"",imagePath:"",activeImagePath:""}},getDefaultPreLoad:function(){return{href:""}},addPreLoad:function(){if(this.preloads){var t=this.getDefaultPreLoad();this.preloads.push(t)}},addNav:function(){if(this.navs){var t=this.getDefaultNavButton();this.navs.push(t)}},goBack:function(){var t=this.$refs.appDemoFrame.contentWindow;t&&t.history.back()},routeChange:function(t){this.demo.route=t},remove:function(t,e){dsf.array.remove(t,e)},up:function(t,e){var n=_.findIndex(t,e);if(n>0){var i=t[n-1];this.$set(t,n-1,e),this.$set(t,n,i)}},down:function(t,e){var n=_.findIndex(t,e);if(n<t.length-1){var i=t[n+1];this.$set(t,n+1,e),this.$set(t,n,i)}}}},c=u,d=n(0),p=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=p.exports},68:function(t,e,n){var i=n(347);"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n(19).default;s("4d04005a",i,!0,{sourceMap:!1,shadowMode:!1})},7:function(t,e,n){"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)}var s=["attrs","props","domProps"],a=["class","style","directives"],o=["on","nativeOn"],r=function(t){return t.reduce((function(t,e){for(var n in e)if(t[n])if(-1!==s.indexOf(n))t[n]=i({},t[n],e[n]);else if(-1!==a.indexOf(n)){var r=t[n]instanceof Array?t[n]:[t[n]],u=e[n]instanceof Array?e[n]:[e[n]];t[n]=[].concat(r,u)}else if(-1!==o.indexOf(n))for(var c in e[n])if(t[n][c]){var d=t[n][c]instanceof Array?t[n][c]:[t[n][c]],p=e[n][c]instanceof Array?e[n][c]:[e[n][c]];t[n][c]=[].concat(d,p)}else t[n][c]=e[n][c];else if("hook"===n)for(var h in e[n])t[n][h]=t[n][h]?l(t[n][h],e[n][h]):e[n][h];else t[n]=e[n];else t[n]=e[n];return t}),{})},l=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}};t.exports=r},8:function(t,e,n){var i=n(21),s=n(26),a=n(14),o=n(22);function r(t,e){return i(t)||s(t,e)||a(t,e)||o()}t.exports=r,t.exports.__esModule=!0,t.exports["default"]=t.exports},9:function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports["default"]=t.exports}})["default"]}));
//# sourceMappingURL=../../../smap/platform/dsf-platform.designer.js.map