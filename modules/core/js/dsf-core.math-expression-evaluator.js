/*!
 * Name: @dsf/cli-core
 * Version: 5.17.0-alpha.5
 * Description: 核心模块
 * BuildTime: 2024/6/19 17:49:24
*/
(("undefined"!==typeof self?self:this)["webpackJsonpcore"]=("undefined"!==typeof self?self:this)["webpackJsonpcore"]||[]).push([[13],{296:function(e,t,n){"use strict";var o=n(302),a=n(299),s=n(303),r=n(304),h=n(305),u=function(){function e(){this.toPostfix=s.toPostfix,this.addToken=o.addToken,this.lex=o.lex,this.postfixEval=r.postfixEval,this.math=h.createMathFunctions(this),this.tokens=a.createTokens(this)}return e.prototype.eval=function(e,t,n){return this.postfixEval(this.toPostfix(this.lex(e,t)),n)},e}();u.TOKEN_TYPES=a.tokenTypes,u.tokenTypes=a.tokenTypes,e.exports=u},299:function(e,t,n){"use strict";function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0});var a,s={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1};t.tokenTypes=void 0,(a=t.tokenTypes||(t.tokenTypes={}))[a.FUNCTION_WITH_ONE_ARG=0]="FUNCTION_WITH_ONE_ARG",a[a.NUMBER=1]="NUMBER",a[a.BINARY_OPERATOR_HIGH_PRECENDENCE=2]="BINARY_OPERATOR_HIGH_PRECENDENCE",a[a.CONSTANT=3]="CONSTANT",a[a.OPENING_PARENTHESIS=4]="OPENING_PARENTHESIS",a[a.CLOSING_PARENTHESIS=5]="CLOSING_PARENTHESIS",a[a.DECIMAL=6]="DECIMAL",a[a.POSTFIX_FUNCTION_WITH_ONE_ARG=7]="POSTFIX_FUNCTION_WITH_ONE_ARG",a[a.FUNCTION_WITH_N_ARGS=8]="FUNCTION_WITH_N_ARGS",a[a.BINARY_OPERATOR_LOW_PRECENDENCE=9]="BINARY_OPERATOR_LOW_PRECENDENCE",a[a.BINARY_OPERATOR_PERMUTATION=10]="BINARY_OPERATOR_PERMUTATION",a[a.COMMA=11]="COMMA",a[a.EVALUATED_FUNCTION=12]="EVALUATED_FUNCTION",a[a.EVALUATED_FUNCTION_PARAMETER=13]="EVALUATED_FUNCTION_PARAMETER",a[a.SPACE=14]="SPACE",t.createTokens=function(e){return[{token:"sin",show:"sin",type:0,value:e.math.sin},{token:"cos",show:"cos",type:0,value:e.math.cos},{token:"tan",show:"tan",type:0,value:e.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:e.math.P},{token:"C",show:"C",type:10,value:e.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:e.math.asin},{token:"acos",show:"acos",type:0,value:e.math.acos},{token:"atan",show:"atan",type:0,value:e.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:e.math.cosh},{token:"acosh",show:"acosh",type:0,value:e.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:e.math.div},{token:"!",show:"!",type:7,value:e.math.fact},{token:"tanh",show:"tanh",type:0,value:e.math.tanh},{token:"atanh",show:"atanh",type:0,value:e.math.atanh},{token:"Mod",show:" Mod ",type:2,value:e.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:e.math.mul},{token:"sinh",show:"sinh",type:0,value:e.math.sinh},{token:"asinh",show:"asinh",type:0,value:e.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:e.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:e.math.add},{token:"-",show:"-",type:9,value:e.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:e.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:e.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:e.math.and}].map((function(e){return o({},e,{precedence:s[e.type]})}))},t.preced=s},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(299);function a(e,t){for(var n=0;n<e.length;n++)e[n]+=t;return e}var s={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0},r={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},h={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},u={},p={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},i={1:!0},l=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function y(e,t,n,o){for(var a=0;a<o;a++)if(e[n+a]!==t[a])return!1;return!0}function E(e,t){for(var n=0;n<t.length;n++)if(t[n].token===e)return n;return-1}t.addToken=function(e){for(var t=0;t<e.length;t++){var n=e[t].token.length,a=-1;e[t].type===o.tokenTypes.FUNCTION_WITH_N_ARGS&&void 0===e[t].numberOfArguments&&(e[t].numberOfArguments=2),l[n]=l[n]||[];for(var s=0;s<l[n].length;s++)if(e[t].token===l[n][s]){a=E(l[n][s],this.tokens);break}-1===a?(this.tokens.push(e[t]),e[t].precedence=o.preced[e[t].type],l.length<=e[t].token.length&&(l[e[t].token.length]=[]),l[e[t].token.length].push(e[t].token)):(this.tokens[a]=e[t],e[t].precedence=o.preced[e[t].type])}},t.lex=function(e,t){var n,N={value:this.math.changeSign,type:o.tokenTypes.FUNCTION_WITH_ONE_ARG,precedence:4,show:"-"},f={value:")",show:")",type:o.tokenTypes.CLOSING_PARENTHESIS,precedence:0},v={value:"(",type:o.tokenTypes.OPENING_PARENTHESIS,precedence:0,show:"("},T=[v],c=[],A=e,_=s,k=0,O=u,R="";void 0!==t&&this.addToken(t);var I=function(e,t){for(var n,o,a,s=[],r=t.length,h=0;h<r;h++)if(!(h<r-1&&" "===t[h]&&" "===t[h+1])){for(n="",o=t.length-h>l.length-2?l.length-1:t.length-h;o>0;o--)if(void 0!==l[o])for(a=0;a<l[o].length;a++)y(t,l[o][a],h,o)&&(n=l[o][a],a=l[o].length,o=0);if(h+=n.length-1,""===n)throw new Error("Can't understand after "+t.slice(h));s.push(e.tokens[E(n,e.tokens)])}return s}(this,A);for(n=0;n<I.length;n++){var w=I[n];if(14!==w.type){var P,d=w.token,M=w.type,m=w.value,g=w.precedence,C=w.show,S=T[T.length-1];for(P=c.length;P--&&0===c[P];)if(-1!==[o.tokenTypes.FUNCTION_WITH_ONE_ARG,o.tokenTypes.BINARY_OPERATOR_HIGH_PRECENDENCE,o.tokenTypes.CONSTANT,o.tokenTypes.OPENING_PARENTHESIS,o.tokenTypes.CLOSING_PARENTHESIS,o.tokenTypes.BINARY_OPERATOR_LOW_PRECENDENCE,o.tokenTypes.BINARY_OPERATOR_PERMUTATION,o.tokenTypes.COMMA,o.tokenTypes.EVALUATED_FUNCTION,o.tokenTypes.EVALUATED_FUNCTION_PARAMETER].indexOf(M)){if(!0!==_[M])throw new Error(d+" is not allowed after "+R);T.push(f),_=r,O=p,c.pop()}if(!0!==_[M])throw new Error(d+" is not allowed after "+R);!0===O[M]&&(M=o.tokenTypes.BINARY_OPERATOR_HIGH_PRECENDENCE,m=this.math.mul,C="&times;",g=3,n-=1);var U={value:m,type:M,precedence:g,show:C,numberOfArguments:w.numberOfArguments};if(M===o.tokenTypes.FUNCTION_WITH_ONE_ARG)_=s,O=u,a(c,2),T.push(U),I[n+1].type!==o.tokenTypes.OPENING_PARENTHESIS&&(T.push(v),c.push(2));else if(M===o.tokenTypes.NUMBER)S.type===o.tokenTypes.NUMBER?(S.value+=m,a(c,1)):T.push(U),_=r,O=h;else if(M===o.tokenTypes.BINARY_OPERATOR_HIGH_PRECENDENCE)_=s,O=u,a(c,2),T.push(U);else if(M===o.tokenTypes.CONSTANT)T.push(U),_=r,O=p;else if(M===o.tokenTypes.OPENING_PARENTHESIS)a(c,1),k++,_=s,O=u,T.push(U);else if(M===o.tokenTypes.CLOSING_PARENTHESIS){if(!k)throw new Error("Closing parenthesis are more than opening one, wait What!!!");k--,_=r,O=p,T.push(U),a(c,1)}else if(M===o.tokenTypes.DECIMAL){if(S.hasDec)throw new Error("Two decimals are not allowed in one number");S.type!==o.tokenTypes.NUMBER&&(S={show:"0",value:0,type:o.tokenTypes.NUMBER,precedence:0},T.push(S)),_=i,a(c,1),O=u,S.value+=m,S.hasDec=!0}else M===o.tokenTypes.POSTFIX_FUNCTION_WITH_ONE_ARG&&(_=r,O=p,a(c,1),T.push(U));M===o.tokenTypes.FUNCTION_WITH_N_ARGS?(_=s,O=u,a(c,w.numberOfArguments+2),T.push(U),I[n+1].type!==o.tokenTypes.OPENING_PARENTHESIS&&(T.push(v),c.push(w.numberOfArguments+2))):M===o.tokenTypes.BINARY_OPERATOR_LOW_PRECENDENCE?(S.type===o.tokenTypes.BINARY_OPERATOR_LOW_PRECENDENCE?S.value===this.math.add?(S.value=m,S.show=C,a(c,1)):S.value===this.math.sub&&"-"===C&&(S.value=this.math.add,S.show="+",a(c,1)):S.type!==o.tokenTypes.CLOSING_PARENTHESIS&&S.type!==o.tokenTypes.POSTFIX_FUNCTION_WITH_ONE_ARG&&S.type!==o.tokenTypes.NUMBER&&S.type!==o.tokenTypes.CONSTANT&&S.type!==o.tokenTypes.EVALUATED_FUNCTION_PARAMETER?"-"===d&&(_=s,O=u,a(c,1).push(2),T.push(N),T.push(v)):(T.push(U),a(c,2)),_=s,O=u):M===o.tokenTypes.BINARY_OPERATOR_PERMUTATION?(_=s,O=u,a(c,2),T.push(U)):M===o.tokenTypes.COMMA?(_=s,O=u,T.push(U)):M===o.tokenTypes.EVALUATED_FUNCTION?(_=s,O=u,a(c,6),T.push(U),I[n+1].type!==o.tokenTypes.OPENING_PARENTHESIS&&(T.push(v),c.push(6))):M===o.tokenTypes.EVALUATED_FUNCTION_PARAMETER&&(_=r,O=p,T.push(U)),a(c,-1),R=d}else if(n>0&&n<I.length-1&&1===I[n+1].type&&(1===I[n-1].type||6===I[n-1].type))throw new Error("Unexpected Space")}for(P=c.length;P--;)T.push(f);if(!0!==_[5])throw new Error("complete the expression");for(;k--;)T.push(f);return T.push(f),T}},303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPostfix=function(e){for(var t,n,o,a=[],s=-1,r=-1,h=[{value:"(",type:4,precedence:0,show:"("}],u=1;u<e.length;u++)if(1===e[u].type||3===e[u].type||13===e[u].type)1===e[u].type&&(e[u].value=Number(e[u].value)),a.push(e[u]);else if(4===e[u].type)h.push(e[u]);else if(5===e[u].type)for(;4!==(null==(p=n=h.pop())?void 0:p.type);){var p;n&&a.push(n)}else if(11===e[u].type){for(;4!==(null==(i=n=h.pop())?void 0:i.type);){var i;n&&a.push(n)}h.push(n)}else{r=(t=e[u]).precedence,s=(o=h[h.length-1]).precedence;var l="Math.pow"==o.value&&"Math.pow"==t.value;if(r>s)h.push(t);else{for(;s>=r&&!l||l&&r<s;)n=h.pop(),o=h[h.length-1],n&&a.push(n),s=o.precedence,l="Math.pow"==t.value&&"Math.pow"==o.value;h.push(t)}}return a}},304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postfixEval=function(e,t){(t=t||{}).PI=Math.PI,t.E=Math.E;for(var n,o,a,s=[],r=void 0!==t.n,h=0;h<e.length;h++)if(1===e[h].type)s.push({value:e[h].value,type:1});else if(3===e[h].type)s.push({value:t[e[h].value],type:1});else if(0===e[h].type){var u=s[s.length-1];Array.isArray(u)?u.push(e[h]):u.value=e[h].value(u.value)}else if(7===e[h].type){var p=s[s.length-1];Array.isArray(p)?p.push(e[h]):p.value=e[h].value(p.value)}else if(8===e[h].type){for(var i=[],l=0;l<e[h].numberOfArguments;l++){var y=s.pop();y&&i.push(y.value)}s.push({type:1,value:e[h].value.apply(e[h],i.reverse())})}else if(10===e[h].type)n=s.pop(),o=s.pop(),Array.isArray(o)?((o=o.concat(n)).push(e[h]),s.push(o)):Array.isArray(n)?(n.unshift(o),n.push(e[h]),s.push(n)):s.push({type:1,value:e[h].value(o.value,n.value)});else if(2===e[h].type||9===e[h].type)n=s.pop(),o=s.pop(),Array.isArray(o)?((o=o.concat(n)).push(e[h]),s.push(o)):Array.isArray(n)?(n.unshift(o),n.push(e[h]),s.push(n)):s.push({type:1,value:e[h].value(o.value,n.value)});else if(12===e[h].type){n=s.pop();var E=void 0;E=!Array.isArray(n)&&n?[n]:n||[],o=s.pop(),a=s.pop(),s.push({type:1,value:e[h].value(a.value,o.value,E)})}else 13===e[h].type&&(r?s.push({value:t[e[h].value],type:3}):s.push([e[h]]));if(s.length>1)throw new Error("Uncaught Syntax error");return parseFloat(s[0].value.toFixed(15))}},305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMathFunctions=function(e){return{isDegree:!0,acos:function(t){return e.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(e,t){return e+t},asin:function(t){return e.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return e.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(e){return Math.log(e+Math.sqrt(e*e-1))},asinh:function(e){return Math.log(e+Math.sqrt(e*e+1))},atanh:function(e){return Math.log((1+e)/(1-e))},C:function(t,n){var o=1,a=t-n,s=n;s<a&&(s=a,a=n);for(var r=s+1;r<=t;r++)o*=r;var h=e.math.fact(a);return"NaN"===h?"NaN":o/h},changeSign:function(e){return-e},cos:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.cos(t)},cosh:function(e){return(Math.pow(Math.E,e)+Math.pow(Math.E,-1*e))/2},div:function(e,t){return e/t},fact:function(e){if(e%1!=0)return"NaN";for(var t=1,n=2;n<=e;n++)t*=n;return t},inverse:function(e){return 1/e},log:function(e){return Math.log(e)/Math.log(10)},mod:function(e,t){return e%t},mul:function(e,t){return e*t},P:function(e,t){for(var n=1,o=Math.floor(e)-Math.floor(t)+1;o<=Math.floor(e);o++)n*=o;return n},Pi:function(t,n,o){for(var a=1,s=t;s<=n;s++)a*=Number(e.postfixEval(o,{n:s}));return a},pow10x:function(e){for(var t=1;e--;)t*=10;return t},sigma:function(t,n,o){for(var a=0,s=t;s<=n;s++)a+=Number(e.postfixEval(o,{n:s}));return a},sin:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.sin(t)},sinh:function(e){return(Math.pow(Math.E,e)-Math.pow(Math.E,-1*e))/2},sub:function(e,t){return e-t},tan:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.tan(t)},tanh:function(t){return e.math.sinh(t)/e.math.cosh(t)},toRadian:function(e){return e*Math.PI/180},and:function(e,t){return e&t}}}}}]);
//# sourceMappingURL=../../../smap/core/dsf-core.math-expression-evaluator.js.map