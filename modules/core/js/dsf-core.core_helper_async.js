/*!
 * Name: @dsf/cli-core
 * Version: 5.17.0-alpha.5
 * Description: 核心模块
 * BuildTime: 2024/6/19 17:49:24
*/
(("undefined"!==typeof self?self:this)["webpackJsonpcore"]=("undefined"!==typeof self?self:this)["webpackJsonpcore"]||[]).push([[8],{106:function(e,t,r){"use strict";r.r(t);var n=r(45),i=r.n(n),o=r(24),s=r.n(o);t["default"]={imgCompress:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"blob",o=Object.prototype.toString.call(e);if("[object Blob]"!=o&&"[object File]"!=o||(t.format||(t.format=e.type),e=URL.createObjectURL(e),o="[object String]"),"[object String]"==o)return new Promise((function(o,c){var a=new Image;a.onload=i()(s.a.mark((function e(){var i;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.imgCompress(a,t,n);case 3:i=e.sent,o(i),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),c(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.onerror=function(e){c(e)},a.src=dsf.url.getWebPath(e)}));if("[object HTMLImageElement]"==o){var c=t.format,a=void 0===c?"image/png":c,f=t.encoderOptions,h=void 0===f?.8:f,d=dsf.isNumber(t.width),u=dsf.isNumber(t.height),l=e.width,g=e.height;d&&(l=t.width,u||(g=l*e.height/e.width)),u&&(g=t.height,d||(l=g*e.width/e.height));var m=document.createElement("canvas");m.width=l,m.height=g;var v=m.getContext("2d");if("image/png"!=a.toLowerCase()&&(v.fillStyle="#fff",v.fillRect(0,0,l,g)),v.drawImage(e,0,0,l,g),"blob"==n)return new Promise((function(e,t){try{m.toBlob(e,a,h)}catch(r){t(r)}}));try{var p=m.toDataURL(a,h);return Promise.resolve(p)}catch(b){return Promise.reject(b)}}return Promise.reject(null)},qrCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(dsf.isString(e)&&(e={content:e}),!dsf.isObject(e))return Promise.reject(null);var t=e,r=t.content,n=void 0===r?"":r,i=t.width,o=void 0===i?300:i,s=t.height,c=void 0===s?300:s;return new Promise((function(e,t){dsf.http.get("/qrCode/getQrBase64",{content:n,width:o,height:c}).done((function(r){var n=r.success,i=r.data,o=r.message;n?e(i):t({message:o})})).error((function(e){t(e)}))}))}}}}]);
//# sourceMappingURL=../../../smap/core/dsf-core.core_helper_async.js.map